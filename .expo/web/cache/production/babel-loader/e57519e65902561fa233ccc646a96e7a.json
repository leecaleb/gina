{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var initial_state={class_id:'',passcodeTeacherId:{},teachers:{},students:{},isConnected:false,errMessage:''};export default function classInfo(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initial_state;var action=arguments.length>1?arguments[1]:undefined;var newState=_objectSpread({},state);switch(action.type){case'SET_CONNECT_STATE':{var isConnected=action.isConnected;return _objectSpread(_objectSpread({},state),{},{isConnected:isConnected});}case'INITIALIZE_CLASS':var teachers={},students={};action.teacher_objs.forEach(function(teacher){teachers[teacher[0]]={name:teacher[1],passcode:teacher[2],logged_in:false,in_time:'',out_time:''};state.passcodeTeacherId[teacher[2]]=teacher[0];});action.students.forEach(function(student){var id=student.id,name=student.name,profile_picture=student.profile_picture,blood_type=student.blood_type,address=student.address,home_phone=student.home_phone,father_phone=student.father_phone,mother_phone=student.mother_phone,conversation_id=student.conversation_id;students[id]={name:name,profile_picture:profile_picture,blood_type:blood_type,address:address,home_phone:home_phone,father_phone:father_phone,mother_phone:mother_phone,conversation_id:conversation_id};});return _objectSpread(_objectSpread({},state),{},{passcodeTeacherId:state.passcodeTeacherId,teachers:teachers,students:students});case'SET_CLASS_ID':return _objectSpread(_objectSpread({},state),{},{class_id:action.class_id});case'FETCH_ATTENDANCE_SUCCESS':{var data=action.data;data.forEach(function(attendance_obj){var attendance_id=attendance_obj.attendance_id,teacher_id=attendance_obj.teacher_id,in_time=attendance_obj.in_time;newState.teachers[teacher_id]=_objectSpread(_objectSpread({},state.teachers[teacher_id]),{},{logged_in:true,attendance_id:attendance_id,in_time:in_time});});return newState;}case'MARK_TEACHER_LOGGED_IN':{var teacher_id=action.teacher_id,time=action.time,attendance_id=action.attendance_id;newState.teachers[teacher_id]=_objectSpread(_objectSpread({},state.teachers[teacher_id]),{},{logged_in:true,in_time:time,attendance_id:attendance_id});return newState;}case'MARK_TEACHER_LOGGED_OUT':{var _teacher_id=action.teacher_id,_time=action.time;newState.teachers[_teacher_id]=_objectSpread(_objectSpread({},state.teachers[_teacher_id]),{},{logged_in:false,out_time:_time,attendance_id:''});return newState;}case'MARK_STAFF_ATTENDANCE_FAIL':var errMessage=action.errMessage;return{errMessage:errMessage};case'CLEAR_STATE':return{class_id:'',passcodeTeacherId:{},teachers:{},students:{},isConnected:false,errMessage:''};default:return state;}}","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/redux/school/reducers/classInfo.js"],"names":["initial_state","class_id","passcodeTeacherId","teachers","students","isConnected","errMessage","classInfo","state","action","newState","type","teacher_objs","forEach","teacher","name","passcode","logged_in","in_time","out_time","student","id","profile_picture","blood_type","address","home_phone","father_phone","mother_phone","conversation_id","data","attendance_obj","attendance_id","teacher_id","time"],"mappings":"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","sourcesContent":["const initial_state = {\n    class_id: '',\n    passcodeTeacherId: {},\n    teachers: {\n        /*\n        {teacher_id}: {\n            name: \"teacher_name\",\n            passcode: 33,\n            logged_in: false,\n            attendance_id: '',\n            in_time: '',\n            out_time: ''\n        }, {...}\n        */\n    },\n    students: {\n        /*\n        {student_id}: {\n            name: \"\",\n            profile_picture: \"\",\n            conversation_id; \"\",\n            blood_type: \"\",\n            address: \"\",\n            home_phone: \"\",\n            father_phone: \"\",\n            mother_phone: \"\"\n        }, {...}\n        */\n    },\n    isConnected: false,\n    errMessage: ''\n}\n\nexport default function classInfo(state = initial_state, action) {\n    const newState = { ...state }\n    switch (action.type) {\n        case 'SET_CONNECT_STATE': {\n            const { isConnected } = action\n            return {\n                ...state,\n                isConnected\n            }\n        }\n        case 'INITIALIZE_CLASS':\n            var teachers = {}, students = {}\n            action.teacher_objs.forEach(teacher => {\n                teachers[teacher[0]] = {\n                    name: teacher[1],\n                    passcode: teacher[2],\n                    logged_in: false,\n                    in_time: '',\n                    out_time: ''\n                }\n                state.passcodeTeacherId[teacher[2]] = teacher[0]\n            })\n            action.students.forEach(student => {\n                const { \n                    id,\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone, \n                    mother_phone, \n                    conversation_id } = student\n                students[id] = {\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone,\n                    mother_phone,\n                    conversation_id\n                }\n            })\n            \n            return {\n                ...state,\n                passcodeTeacherId: state.passcodeTeacherId,\n                teachers: teachers,\n                students: students\n            }\n        \n        case 'SET_CLASS_ID':\n            return {\n                ...state,\n                class_id: action.class_id\n            }\n    \n        case 'FETCH_ATTENDANCE_SUCCESS': {\n            const { data } = action\n            data.forEach(attendance_obj => {\n                const { attendance_id, teacher_id, in_time } = attendance_obj\n                newState.teachers[teacher_id] = {\n                    ...state.teachers[teacher_id],\n                    logged_in: true,\n                    attendance_id,\n                    in_time\n                }\n            })\n\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_IN':{\n            const { teacher_id, time, attendance_id } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: true,\n                in_time: time,\n                attendance_id\n            }\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_OUT':{\n            const { teacher_id, time } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: false,\n                out_time: time,\n                attendance_id: ''\n            }\n            return newState\n        }\n\n        case 'MARK_STAFF_ATTENDANCE_FAIL':\n            const {errMessage} = action\n            return {\n                errMessage\n            }\n        \n        case 'CLEAR_STATE':\n            return {\n                class_id: '',\n                passcodeTeacherId: {},\n                teachers: {},\n                students: {},\n                isConnected: false,\n                errMessage: ''\n            }\n        \n        default:\n            return state\n    }\n\n}"]},"metadata":{},"sourceType":"module"}