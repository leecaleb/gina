{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/parent/restroomcard.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Card, CardItem } from 'native-base';\nimport { formatDate, fetchData as _fetchData } from \"../util\";\nimport Reloading from \"../reloading\";\n\nvar RestroomCard = function (_React$Component) {\n  _inherits(RestroomCard, _React$Component);\n\n  var _super = _createSuper(RestroomCard);\n\n  function RestroomCard(props) {\n    var _this;\n\n    _classCallCheck(this, RestroomCard);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      isLoading: true\n    };\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(RestroomCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var date = this.props.date;\n      this.fetchData(this.props.child_id, new Date(date.getTime()));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.date !== prevProps.date) {\n        this.setState({\n          isLoading: true\n        });\n        this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n      } else if (this.props.child_id !== prevProps.child_id) {\n        this.setState({\n          isLoading: true\n        });\n        this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n      }\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData(child_id, date) {\n      var start_date, end_date, diaperData;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(date.getHours() < 17)) {\n                _context.next = 3;\n                break;\n              }\n\n              this.setState({\n                isLoading: false\n              });\n              return _context.abrupt(\"return\");\n\n            case 3:\n              start_date = formatDate(date);\n              date.setDate(date.getDate() + 1);\n              end_date = formatDate(date);\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(_fetchData('diaper', child_id, start_date, end_date));\n\n            case 8:\n              diaperData = _context.sent;\n              this.setState({\n                isLoading: false,\n                diaperData: diaperData\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          isLoading = _this$state.isLoading,\n          diaperData = _this$state.diaperData;\n      var today = formatDate(this.props.date);\n      return React.createElement(Card, {\n        style: {\n          width: '93%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          width: 56,\n          height: 56,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        source: require(\"../../assets/icon-diaper.png\"),\n        style: {\n          width: 48,\n          height: 48\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          paddingTop: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }\n      }, \"\\u5982\\u5EC1\")), isLoading ? React.createElement(Reloading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }\n      }) : diaperData && diaperData[today] ? React.createElement(View, {\n        style: {\n          flex: 1,\n          paddingVertical: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flexDirection: 'row',\n          paddingBottom: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 19\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          textAlign: 'center',\n          color: '#606060'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 23\n        }\n      }, \"\\u6642\\u9593\")), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          textAlign: 'center',\n          color: '#606060'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 23\n        }\n      }, \"\\u6392\\u6CC4\")), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          textAlign: 'center',\n          color: '#606060'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 23\n        }\n      }, \"\\u4F7F\\u7528\")), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15,\n          textAlign: 'center',\n          color: '#606060'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 23\n        }\n      }, \"\\u72C0\\u6CC1\"))), diaperData[today].map(function (record, index) {\n        var time = record.time,\n            cloth_diaper = record.cloth_diaper,\n            pee_or_poo = record.pee_or_poo,\n            condition = record.condition,\n            teacher_id = record.teacher_id;\n        return React.createElement(View, {\n          key: index,\n          style: {\n            flexDirection: 'row'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 23\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 23,\n            textAlign: 'center',\n            color: '#404040'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 27\n          }\n        }, time)), React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 23,\n            textAlign: 'center',\n            color: '#404040'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 27\n          }\n        }, pee_or_poo)), React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 23,\n            textAlign: 'center',\n            color: '#404040'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 27\n          }\n        }, cloth_diaper ? '學習褲' : '尿布')), React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 23,\n            textAlign: 'center',\n            color: '#404040'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 27\n          }\n        }, condition)));\n      })) : React.createElement(View, {\n        style: {\n          flex: 1,\n          paddingVertical: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 19\n        }\n      }, \"\\u6C92\\u6709\\u65B0\\u7D00\\u9304\")))));\n    }\n  }]);\n\n  return RestroomCard;\n}(React.Component);\n\nexport { RestroomCard as default };","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/parent/restroomcard.js"],"names":["React","Card","CardItem","formatDate","fetchData","Reloading","RestroomCard","props","state","isLoading","bind","date","child_id","Date","getTime","prevProps","setState","getHours","start_date","setDate","getDate","end_date","diaperData","today","width","flex","flexDirection","height","justifyContent","alignItems","require","paddingTop","fontSize","paddingVertical","paddingBottom","textAlign","color","map","record","index","time","cloth_diaper","pee_or_poo","condition","teacher_id","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading';\n\nexport default class RestroomCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const diaperData = await fetchData('diaper', child_id, start_date, end_date)\n    this.setState({\n      isLoading: false,\n      diaperData\n    })\n  }\n\n  render() {\n    const { isLoading, diaperData } = this.state\n    // console.log('diaperData: ', diaperData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-diaper.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>如廁</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : diaperData && diaperData[today] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View style={{ flexDirection: 'row', paddingBottom: 5 }}>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>排泄</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>使用</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>狀況</Text>\n                    </View>\n                  </View>\n                  {diaperData[today].map((record, index) => {\n                    const { time, cloth_diaper, pee_or_poo, condition, teacher_id } = record\n                    return (\n                      <View key={index} style={{ flexDirection: 'row' }}>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{pee_or_poo}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{cloth_diaper ? '學習褲' : '尿布'}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{condition}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}