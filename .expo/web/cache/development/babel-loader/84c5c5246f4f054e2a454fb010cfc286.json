{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/parent/appetitecard.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Card, CardItem, Button } from 'native-base';\nimport { formatDate, fetchData as _fetchData, beautifyDate } from \"../util\";\nimport Reloading from \"../reloading\";\n\nvar AppetiteCard = function (_React$Component) {\n  _inherits(AppetiteCard, _React$Component);\n\n  var _super = _createSuper(AppetiteCard);\n\n  function AppetiteCard(props) {\n    var _this;\n\n    _classCallCheck(this, AppetiteCard);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      child_id: _this.props.child_id,\n      fruit_name: null,\n      isLoading: true,\n      breakfast: null,\n      fruit: null,\n      lunch: null,\n      snack: null\n    };\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(AppetiteCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var date = this.props.date;\n      this.fetchData(this.state.child_id, new Date(date.getTime()));\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.date !== prevProps.date) {\n        this.setState({\n          isLoading: true\n        });\n        this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n      } else if (this.props.child_id !== prevProps.child_id) {\n        this.setState({\n          isLoading: true\n        });\n        this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n      }\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData(child_id, date) {\n      var start_date, end_date, appetiteData;\n      return _regeneratorRuntime.async(function fetchData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(date.getHours() < 17)) {\n                _context.next = 3;\n                break;\n              }\n\n              this.setState({\n                isLoading: false\n              });\n              return _context.abrupt(\"return\");\n\n            case 3:\n              start_date = formatDate(date);\n              date.setDate(date.getDate() + 1);\n              end_date = formatDate(date);\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(_fetchData('appetite', child_id, start_date, end_date));\n\n            case 8:\n              appetiteData = _context.sent;\n              this.denormalizeAppetiteData(appetiteData.data, date);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"denormalizeAppetiteData\",\n    value: function denormalizeAppetiteData(appetiteData) {\n      var date = this.props.date;\n      var today = formatDate(date);\n\n      if (appetiteData && appetiteData[today]) {\n        var _appetiteData$today = appetiteData[today],\n            fruit_name = _appetiteData$today.fruit_name,\n            breakfast_rating = _appetiteData$today.breakfast_rating,\n            fruit_rating = _appetiteData$today.fruit_rating,\n            lunch_rating = _appetiteData$today.lunch_rating,\n            snack_rating = _appetiteData$today.snack_rating;\n        var breakfast = this.parseData(breakfast_rating);\n        var fruit = this.parseData(fruit_rating);\n        var lunch = this.parseData(lunch_rating);\n        var snack = this.parseData(snack_rating);\n        this.setState({\n          fruit_name: fruit_name,\n          breakfast: breakfast,\n          fruit: fruit,\n          lunch: lunch,\n          snack: snack,\n          appetiteData: appetiteData,\n          isLoading: false\n        });\n      } else {\n        this.setState({\n          appetiteData: appetiteData,\n          isLoading: false\n        });\n      }\n    }\n  }, {\n    key: \"parseData\",\n    value: function parseData(data_string) {\n      var rating = data_string.slice(0, -1);\n      var water_drunk = parseInt(data_string.slice(-1));\n      return {\n        rating: rating,\n        water_drunk: water_drunk\n      };\n    }\n  }, {\n    key: \"getEmoji\",\n    value: function getEmoji() {}\n  }, {\n    key: \"getWaterDrinkingStatus\",\n    value: function getWaterDrinkingStatus() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          appetiteData = _this$state.appetiteData,\n          isLoading = _this$state.isLoading,\n          breakfast = _this$state.breakfast,\n          fruit = _this$state.fruit,\n          lunch = _this$state.lunch,\n          snack = _this$state.snack,\n          rating = _this$state.rating,\n          fruit_name = _this$state.fruit_name;\n      var today = formatDate(this.props.date);\n      return React.createElement(Card, {\n        style: {\n          width: '93%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          width: 56,\n          height: 56,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        source: require(\"../../assets/icon-appetite.png\"),\n        style: {\n          width: 48,\n          height: 48\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          paddingTop: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 15\n        }\n      }, \"\\u98F2\\u98DF\")), isLoading ? React.createElement(Reloading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }\n      }) : appetiteData && appetiteData[today] ? React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          paddingVertical: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 19\n        }\n      }, breakfast ? React.createElement(View, {\n        style: {\n          width: '45%',\n          justifyContent: 'center',\n          backgroundColor: '#F5F5F5',\n          marginRight: '5%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          color: 'rgba(0,0,0,0.8)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 25\n        }\n      }, \"\\u65E9\\u9910\")), React.createElement(View, {\n        style: {\n          justifyContent: 'center',\n          alignItems: 'center',\n          padding: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }\n      }, breakfast.rating || ' ')), React.createElement(View, {\n        style: {\n          padding: 5,\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }\n      }, breakfast.water_drunk ? '有喝水' : ' '))) : null, fruit ? React.createElement(View, {\n        style: {\n          width: '45%',\n          justifyContent: 'center',\n          backgroundColor: '#F5F5F5',\n          marginRight: '5%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          color: 'rgba(0,0,0,0.8)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }\n      }, fruit_name !== '水果' && \"\\u6C34\\u679C\\u9910: \" + fruit_name || '水果')), React.createElement(View, {\n        style: {\n          justifyContent: 'center',\n          alignItems: 'center',\n          padding: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 25\n        }\n      }, fruit.rating || ' ')), React.createElement(View, {\n        style: {\n          padding: 5,\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }\n      }, fruit.water_drunk ? '有喝水' : ' '))) : null), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          paddingVertical: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 19\n        }\n      }, lunch ? React.createElement(View, {\n        style: {\n          width: '45%',\n          justifyContent: 'center',\n          backgroundColor: '#F5F5F5',\n          marginRight: '5%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          color: 'rgba(0,0,0,0.8)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      }, \"\\u5348\\u9910\")), React.createElement(View, {\n        style: {\n          justifyContent: 'center',\n          alignItems: 'center',\n          padding: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }\n      }, lunch.rating || ' ')), React.createElement(View, {\n        style: {\n          padding: 5,\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 25\n        }\n      }, lunch.water_drunk ? '有喝水' : ' '))) : null, snack ? React.createElement(View, {\n        style: {\n          width: '45%',\n          justifyContent: 'center',\n          backgroundColor: '#F5F5F5',\n          marginRight: '5%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          color: 'rgba(0,0,0,0.8)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }, \"\\u9EDE\\u5FC3\")), React.createElement(View, {\n        style: {\n          justifyContent: 'center',\n          alignItems: 'center',\n          padding: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 25\n        }\n      }, snack.rating || ' ')), React.createElement(View, {\n        style: {\n          padding: 5,\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 25\n        }\n      }, snack.water_drunk ? '有喝水' : ' '))) : null)) : React.createElement(View, {\n        style: {\n          flex: 1,\n          paddingVertical: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 17\n        }\n      }, \"\\u6C92\\u6709\\u65B0\\u7D00\\u9304\")))));\n    }\n  }]);\n\n  return AppetiteCard;\n}(React.Component);\n\nexport { AppetiteCard as default };","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/parent/appetitecard.js"],"names":["React","Card","CardItem","Button","formatDate","fetchData","beautifyDate","Reloading","AppetiteCard","props","state","child_id","fruit_name","isLoading","breakfast","fruit","lunch","snack","bind","date","Date","getTime","prevProps","setState","getHours","start_date","setDate","getDate","end_date","appetiteData","denormalizeAppetiteData","data","today","breakfast_rating","fruit_rating","lunch_rating","snack_rating","parseData","data_string","rating","slice","water_drunk","parseInt","width","flex","flexDirection","height","justifyContent","alignItems","require","paddingTop","fontSize","paddingVertical","backgroundColor","marginRight","padding","color","textAlign","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, TextInput, Image } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { formatDate, fetchData, beautifyDate } from '../util'\nimport Reloading from '../reloading'\n\nexport default class AppetiteCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      // rankings: ['Ok', 'Good', 'Awesome!'],\n      fruit_name: null,\n      isLoading: true,\n      breakfast: null,\n      fruit: null,\n      lunch: null,\n      snack: null,\n      // rating: {\n      //   'Awesome': '滿滿一碗',\n      //   'Good': '７/8分滿',\n      //   'Ok': '半碗',\n      //   'Poor': '胃口不佳'\n      // }\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const appetiteData = await fetchData('appetite', child_id, start_date, end_date)\n    this.denormalizeAppetiteData(appetiteData.data, date)\n  }\n\n  denormalizeAppetiteData(appetiteData) {\n    const { date } = this.props\n    const today = formatDate(date)\n    if (appetiteData && appetiteData[today]){\n      const { fruit_name, breakfast_rating, fruit_rating, lunch_rating, snack_rating } = appetiteData[today]\n      // console.log('fruit_name: ', fruit_name)\n      const breakfast = this.parseData(breakfast_rating)\n      const fruit = this.parseData(fruit_rating)\n      const lunch = this.parseData(lunch_rating)\n      const snack = this.parseData(snack_rating)\n\n      this.setState({\n        fruit_name,\n        breakfast,\n        fruit,\n        lunch,\n        snack,\n        appetiteData,\n        isLoading: false\n      })\n    } else {\n      this.setState({\n      appetiteData,\n      isLoading: false\n    })\n    }\n  }\n\n  parseData(data_string) {\n    const rating = data_string.slice(0, -1)\n    const water_drunk = parseInt(data_string.slice(-1))\n    // const rating_icons = {\n    //   'Awesome': require('../../assets/icon-appetite-awesome.png'),\n    //   'Good': require('../../assets/icon-appetite-good.png'),\n    //   'Ok': require('../../assets/icon-appetite-ok.png')\n    // }\n    return {\n      // rating_icon: rating_icons[rating],\n      rating,\n      water_drunk\n    }\n  }\n\n  getEmoji() {\n\n  }\n\n  getWaterDrinkingStatus() {\n    \n  }\n\n  render() {\n    const { appetiteData, isLoading, breakfast, fruit, lunch, snack, rating, fruit_name } = this.state\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-appetite.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>飲食</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : appetiteData && appetiteData[today] ? \n                <View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {breakfast ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>早餐</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{breakfast.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {breakfast.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                  {fruit ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>{(fruit_name !== '水果' && `水果餐: ${fruit_name}`) || '水果'}</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{fruit.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {fruit.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n                  </View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {lunch ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>午餐</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{lunch.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {lunch.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n\n                    </View>\n                    : null\n                  }\n\n                  {snack ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>點心</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{snack.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {snack.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                </View>\n                </View>\n            : <View style={{ flex: 1, paddingVertical: 8 }}>\n                <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n              </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}