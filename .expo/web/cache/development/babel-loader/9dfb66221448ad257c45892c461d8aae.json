{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/teacher/admin/editstudentprofile.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport PushNotificationIOS from \"react-native-web/dist/exports/PushNotificationIOS\";\nimport { get, put } from \"../../util\";\nimport PickerComponent from \"../../picker\";\nimport Reloading from \"../../reloading\";\n\nvar EditStudentProfile = function (_React$Component) {\n  _inherits(EditStudentProfile, _React$Component);\n\n  var _super = _createSuper(EditStudentProfile);\n\n  function EditStudentProfile(props) {\n    var _this;\n\n    _classCallCheck(this, EditStudentProfile);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      parents: [],\n      student: null,\n      isLoading: true\n    };\n    return _this;\n  }\n\n  _createClass(EditStudentProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props, student_id, student, response, success, statusCode, message, data;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = this.props, student_id = _this$props.student_id, student = _this$props.student;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(get(\"/student/\" + student_id + \"/family\"));\n\n            case 3:\n              response = _context.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context.next = 8;\n                break;\n              }\n\n              alert('Sorry 取得家庭資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message);\n              return _context.abrupt(\"return\");\n\n            case 8:\n              this.setState({\n                parents: response.data,\n                student: student,\n                isLoading: false\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"addParent\",\n    value: function addParent() {\n      var parents = this.state.parents;\n\n      if (parents.length === 3) {\n        alert('Sorry 一個寶貝只能註冊三位家長！');\n        return;\n      }\n\n      this.props.addParent({\n        id: '',\n        name: '',\n        role: '',\n        username: '',\n        password: '',\n        mobile: '',\n        work_phone: '',\n        address: ''\n      });\n    }\n  }, {\n    key: \"editStudentData\",\n    value: function editStudentData() {\n      var student_id, student, name, class_id, response, success, statusCode, message, data, old_class_id;\n      return _regeneratorRuntime.async(function editStudentData$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              student_id = this.props.student_id;\n              student = this.state.student;\n              name = student.name, class_id = student.class_id;\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(put(\"/student/\" + student_id, {\n                name: name,\n                class_id: class_id\n              }));\n\n            case 5:\n              response = _context2.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context2.next = 10;\n                break;\n              }\n\n              alert('Sorry 編輯學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message);\n              return _context2.abrupt(\"return\");\n\n            case 10:\n              this.props.hideModal();\n              old_class_id = this.props.student.class_id;\n              this.props.editStudentSuccess(student_id, name, old_class_id, class_id);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getClassNames\",\n    value: function getClassNames() {\n      var classes = this.props.classes;\n      return Object.keys(classes).map(function (class_id) {\n        return classes[class_id].name;\n      });\n    }\n  }, {\n    key: \"handleSelectClass\",\n    value: function handleSelectClass(class_name) {\n      var classes = this.props.classes;\n      var class_id_found = '';\n      Object.keys(classes).forEach(function (class_id) {\n        if (classes[class_id].name === class_name) {\n          class_id_found = class_id;\n        }\n      });\n      this.setState({\n        student: _objectSpread(_objectSpread({}, this.state.student), {}, {\n          class_id: class_id_found\n        })\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var _this$state = this.state,\n          student = _this$state.student,\n          parents = _this$state.parents,\n          isLoading = _this$state.isLoading;\n\n      if (isLoading) {\n        return React.createElement(Reloading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }\n        });\n      }\n\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 3,\n          flexDirection: 'row',\n          alignItems: 'center',\n          backgroundColor: '#DCDCDC'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 25\n        }\n      }, React.createElement(Image, {\n        source: student.profile_picture === '' ? require(\"../../../assets/icon-thumbnail.png\") : {\n          uri: student.profile_picture\n        },\n        style: {\n          width: 200,\n          height: 200,\n          borderRadius: 100\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 29\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, React.createElement(TextInput, {\n        style: {\n          fontSize: 50\n        },\n        value: student.name,\n        onChangeText: function onChangeText(name) {\n          return _this2.setState({\n            student: _objectSpread(_objectSpread({}, _this2.state.student), {}, {\n              name: name\n            })\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }\n      }), React.createElement(TouchableHighlight, {\n        style: {\n          backgroundColor: 'rgba(255,255,255, 0.5)',\n          alignItems: 'center',\n          padding: 5,\n          width: '90%',\n          marginTop: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 29\n        }\n      }, classes[student.class_id].name)))), React.createElement(View, {\n        style: {\n          flex: 5,\n          backgroundColor: '#F5F5F5'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }\n      }, parents.map(function (parent) {\n        return React.createElement(View, {\n          key: parent.id,\n          style: {\n            width: '100%',\n            height: '33%',\n            padding: '1%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 33\n          }\n        }, React.createElement(TouchableHighlight, {\n          style: {\n            flex: 1,\n            padding: 10,\n            backgroundColor: '#b5e9e9',\n            justifyContent: 'center'\n          },\n          onPress: function onPress() {\n            return _this2.props.addParent(parent);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 37\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 1,\n            flexDirection: 'row'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 41\n          }\n        }, React.createElement(View, {\n          style: {\n            paddingRight: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 45\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 49\n          }\n        }, parent.role)), React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 45\n          }\n        }, React.createElement(View, {\n          style: {\n            width: '100%',\n            flexDirection: 'row'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 49\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 53\n          }\n        }, \"\\u59D3\\u540D: \", parent.name, \"         \"), React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 53\n          }\n        }, \"\\u5E33\\u865F: \", parent.username, \"         \")), React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 49\n          }\n        }, \"\\u624B\\u6A5F: \", parent.mobile), React.createElement(Text, {\n          style: {\n            fontSize: 18\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 49\n          }\n        }, \"\\u5DE5\\u4F5C/\\u5BB6\\u7528\\u96FB\\u8A71: \", parent.work_phone), React.createElement(Text, {\n          style: {\n            fontSize: 18\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 49\n          }\n        }, \"\\u5730\\u5740: \", parent.address)))));\n      }), parents.length < 3 ? React.createElement(View, {\n        style: {\n          width: '100%',\n          height: '33%',\n          padding: '1%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 10,\n          backgroundColor: 'white',\n          justifyContent: 'center',\n          borderWidth: 5,\n          borderRadius: 1,\n          borderStyle: 'dashed'\n        },\n        onPress: function onPress() {\n          return _this2.addParent();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 33\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 37\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 41\n        }\n      }, \"\\u65B0\\u589E\\u5BB6\\u9577\")))) : null)), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          backgroundColor: '#DCDCDC'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#fa625f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.props.hideModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 29\n        }\n      }, \"\\u8FD4\\u56DE\"))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#00c07f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.editStudentData();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 29\n        }\n      }, \"\\u9001\\u51FA\")))));\n    }\n  }]);\n\n  return EditStudentProfile;\n}(React.Component);\n\nexport { EditStudentProfile as default };","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/admin/editstudentprofile.js"],"names":["React","get","put","PickerComponent","Reloading","EditStudentProfile","props","state","parents","student","isLoading","student_id","response","success","statusCode","message","data","alert","setState","length","addParent","id","name","role","username","password","mobile","work_phone","address","class_id","hideModal","old_class_id","editStudentSuccess","classes","Object","keys","map","class_name","class_id_found","forEach","flex","padding","flexDirection","alignItems","backgroundColor","profile_picture","require","uri","width","height","borderRadius","justifyContent","fontSize","marginTop","parent","paddingRight","borderWidth","borderStyle","alignSelf","editStudentData","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, PushNotificationIOS } from 'react-native'\nimport { get, put } from '../../util'\nimport PickerComponent from '../../picker'\nimport Reloading from '../../reloading'\n\nexport default class EditStudentProfile extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            parents: [],\n            student: null,\n            isLoading: true\n        }\n    }\n\n    async componentDidMount() {\n        const { student_id, student } = this.props\n        const response = await get(`/student/${student_id}/family`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得家庭資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.setState({\n            parents: response.data,\n            student,\n            isLoading: false\n        })\n    }\n\n    addParent() {\n        const { parents } = this.state\n        if (parents.length === 3) {\n            alert('Sorry 一個寶貝只能註冊三位家長！')\n            return \n        }\n        this.props.addParent({\n            id: '',\n            name: '',\n            role: '',\n            username: '',\n            password: '',\n            mobile: '',\n            work_phone: '',\n            address: ''\n        })\n    }\n\n    async editStudentData() {\n        const { student_id } = this.props\n        const { student } = this.state\n        const { name, class_id } = student\n        const response = await put(`/student/${student_id}`, {\n            name,\n            class_id\n        })\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 編輯學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.props.hideModal()\n        const old_class_id = this.props.student.class_id\n        this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n    }\n\n    // getClassByStudentId() {\n    //     const { student_id, classes } = this.props\n    //     Object.keys(classes).forEach(class_id => {\n    //         const {students} = classes[class_id]\n    //         for(var i = 0; i < students.length; i++) {\n    //             if (student_id === students[i]) {\n    //                 return classes[class_id].name\n    //             }\n    //         }\n    //     })\n    //     return ''\n    // }\n\n    getClassNames() {\n        const { classes } = this.props\n        return Object.keys(classes).map(class_id => {\n            return classes[class_id].name\n        })\n    }\n    \n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            student: {\n                ...this.state.student,\n                class_id: class_id_found\n            }\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { student, parents, isLoading } = this.state\n        // console.log('student: ', student)\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 3, flexDirection: 'row', alignItems: 'center', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{  }}\n                            // onPress={() => }\n                        >\n                            <Image\n                                source={\n                                    student.profile_picture === '' ?\n                                        require('../../../assets/icon-thumbnail.png')\n                                        : {uri: student.profile_picture}\n                                }\n                                style={{\n                                    width: 200,\n                                    height: 200,\n                                    borderRadius: 100\n                                }}\n                            />\n                        </TouchableHighlight>\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                        <TextInput \n                            style={{ fontSize: 50 }}\n                            value={student.name}\n                            onChangeText={name => this.setState({\n                                student: {\n                                    ...this.state.student,\n                                    name\n                                }\n                            })}\n                        />\n                        {/* <Text style={{ fontSize: 50 }}>{classes[student.class_id].name}</Text> */}\n                        {/* <PickerComponent\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                            textStyle={{fontSize: 50}}\n                            selectedValue={classes[student.class_id].name}\n                            options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                            handleOnClick={() => { }}\n                            handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                        /> */}\n                        <TouchableHighlight\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                        >\n                            <Text style={{fontSize: 50}}>{classes[student.class_id].name}</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 5, backgroundColor: '#F5F5F5' }}>\n\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        {parents.map(parent => {\n                            return (\n                                <View key={parent.id} style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                    <TouchableHighlight\n                                        style={{ flex: 1, padding : 10, backgroundColor: '#b5e9e9', justifyContent: 'center' }}\n                                        onPress={() => this.props.addParent(parent)}\n                                    >\n                                        <View style={{ flex: 1, flexDirection: 'row' }}>\n                                            {/* <Text style={{ fontSize: 30, alignSelf: 'center' }}>{parent.role}</Text> */}\n                                            <View style={{ paddingRight: 10 }}>\n                                                <Text style={{ fontSize: 20 }}>{parent.role}</Text>\n                                            </View>\n                                            <View>\n                                                <View style={{ width: '100%', flexDirection:'row'}}>\n                                                    <Text style={{ fontSize: 20 }}>姓名: {parent.name}         </Text>\n                                                    <Text style={{ fontSize: 20 }}>帳號: {parent.username}         </Text>\n                                                </View>\n                                                <Text style={{ fontSize: 20 }}>手機: {parent.mobile}</Text>\n                                                <Text style={{ fontSize: 18 }}>工作/家用電話: {parent.work_phone}</Text>\n                                                <Text style={{ fontSize: 18 }}>地址: {parent.address}</Text>\n                                            </View>\n                                        </View>\n                                    </TouchableHighlight>\n                                </View>\n                            )\n                        })}\n                        {parents.length < 3 ?\n                            <View style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                <TouchableHighlight\n                                    style={{\n                                        flex: 1,\n                                        padding : 10,\n                                        backgroundColor: 'white',\n                                        justifyContent: 'center',\n                                        borderWidth: 5,\n                                        borderRadius: 1,\n                                        borderStyle: 'dashed'\n                                    }}\n                                    onPress={() => this.addParent()}\n                                >\n                                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>新增家長</Text>\n                                    </View>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                            onPress={() => this.props.hideModal()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                            onPress={() => this.editStudentData()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </View>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}