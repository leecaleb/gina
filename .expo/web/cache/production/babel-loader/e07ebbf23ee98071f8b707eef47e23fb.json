{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import{Card,CardItem}from'native-base';import{formatDate,fetchData as _fetchData}from\"../util\";import Reloading from\"../reloading\";var RestroomCard=function(_React$Component){_inherits(RestroomCard,_React$Component);var _super=_createSuper(RestroomCard);function RestroomCard(props){var _this;_classCallCheck(this,RestroomCard);_this=_super.call(this,props);_this.state={isLoading:true};_this.fetchData=_this.fetchData.bind(_assertThisInitialized(_this));return _this;}_createClass(RestroomCard,[{key:\"componentDidMount\",value:function componentDidMount(){var date=this.props.date;this.fetchData(this.props.child_id,new Date(date.getTime()));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.date!==prevProps.date){this.setState({isLoading:true});this.fetchData(this.props.child_id,new Date(this.props.date.getTime()));}else if(this.props.child_id!==prevProps.child_id){this.setState({isLoading:true});this.fetchData(this.props.child_id,new Date(this.props.date.getTime()));}}},{key:\"fetchData\",value:function fetchData(child_id,date){var start_date,end_date,diaperData;return _regeneratorRuntime.async(function fetchData$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(date.getHours()<17)){_context.next=3;break;}this.setState({isLoading:false});return _context.abrupt(\"return\");case 3:start_date=formatDate(date);date.setDate(date.getDate()+1);end_date=formatDate(date);_context.next=8;return _regeneratorRuntime.awrap(_fetchData('diaper',child_id,start_date,end_date));case 8:diaperData=_context.sent;this.setState({isLoading:false,diaperData:diaperData});case 10:case\"end\":return _context.stop();}}},null,this,null,Promise);}},{key:\"render\",value:function render(){var _this$state=this.state,isLoading=_this$state.isLoading,diaperData=_this$state.diaperData;var today=formatDate(this.props.date);return React.createElement(Card,{style:{width:'93%'}},React.createElement(View,{style:{flex:1,flexDirection:'row'}},React.createElement(View,{style:{width:56,height:56,justifyContent:'center',alignItems:'center'}},React.createElement(Image,{source:require(\"../../assets/icon-diaper.png\"),style:{width:48,height:48}})),React.createElement(View,{style:{flex:1}},React.createElement(View,{style:{paddingTop:8}},React.createElement(Text,{style:{fontSize:20}},\"\\u5982\\u5EC1\")),isLoading?React.createElement(Reloading,null):diaperData&&diaperData[today]?React.createElement(View,{style:{flex:1,paddingVertical:8}},React.createElement(View,{style:{flexDirection:'row',paddingBottom:5}},React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:15,textAlign:'center',color:'#606060'}},\"\\u6642\\u9593\")),React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:15,textAlign:'center',color:'#606060'}},\"\\u6392\\u6CC4\")),React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:15,textAlign:'center',color:'#606060'}},\"\\u4F7F\\u7528\")),React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:15,textAlign:'center',color:'#606060'}},\"\\u72C0\\u6CC1\"))),diaperData[today].map(function(record,index){var time=record.time,cloth_diaper=record.cloth_diaper,pee_or_poo=record.pee_or_poo,condition=record.condition,teacher_id=record.teacher_id;return React.createElement(View,{key:index,style:{flexDirection:'row'}},React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:23,textAlign:'center',color:'#404040'}},time)),React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:23,textAlign:'center',color:'#404040'}},pee_or_poo)),React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:23,textAlign:'center',color:'#404040'}},cloth_diaper?'學習褲':'尿布')),React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:{fontSize:23,textAlign:'center',color:'#404040'}},condition)));})):React.createElement(View,{style:{flex:1,paddingVertical:8}},React.createElement(Text,{style:{fontSize:17}},\"\\u6C92\\u6709\\u65B0\\u7D00\\u9304\")))));}}]);return RestroomCard;}(React.Component);export{RestroomCard as default};","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/parent/restroomcard.js"],"names":["React","Card","CardItem","formatDate","fetchData","Reloading","RestroomCard","props","state","isLoading","bind","date","child_id","Date","getTime","prevProps","setState","getHours","start_date","setDate","getDate","end_date","diaperData","today","width","flex","flexDirection","height","justifyContent","alignItems","require","paddingTop","fontSize","paddingVertical","paddingBottom","textAlign","color","map","record","index","time","cloth_diaper","pee_or_poo","condition","teacher_id","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading';\n\nexport default class RestroomCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const diaperData = await fetchData('diaper', child_id, start_date, end_date)\n    this.setState({\n      isLoading: false,\n      diaperData\n    })\n  }\n\n  render() {\n    const { isLoading, diaperData } = this.state\n    // console.log('diaperData: ', diaperData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-diaper.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>如廁</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : diaperData && diaperData[today] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View style={{ flexDirection: 'row', paddingBottom: 5 }}>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>排泄</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>使用</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>狀況</Text>\n                    </View>\n                  </View>\n                  {diaperData[today].map((record, index) => {\n                    const { time, cloth_diaper, pee_or_poo, condition, teacher_id } = record\n                    return (\n                      <View key={index} style={{ flexDirection: 'row' }}>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{pee_or_poo}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{cloth_diaper ? '學習褲' : '尿布'}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{condition}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}