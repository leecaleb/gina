{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import TextInput from\"react-native-web/dist/exports/TextInput\";import AsyncStorage from\"react-native-web/dist/exports/AsyncStorage\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import{Button}from'native-base';import{bindActionCreators}from'redux';import{connect}from'react-redux';import Icon from\"@expo/vector-icons/MaterialCommunityIcons\";import Auth from'@aws-amplify/auth';var Signup=function(_React$Component){_inherits(Signup,_React$Component);var _super=_createSuper(Signup);function Signup(props){var _this;_classCallCheck(this,Signup);_this=_super.call(this,props);_this.state={username:'',name:'',user_type:'',email:'',password:'',errMessage:''};return _this;}_createClass(Signup,[{key:\"handleSignup\",value:function handleSignup(){var _this2=this;var _this$state=this.state,username=_this$state.username,password=_this$state.password,name=_this$state.name,email=_this$state.email,user_type=_this$state.user_type;if(!this.state.user_type){this.setState({errMessage:'Please select user role'});}else{Auth.signUp({username:username,password:password,attributes:{name:name,email:email}}).then(function(data){console.log(_this2.state.user_type);fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/user/'+username,{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({name:name,email:email,role:user_type})}).then(function(response){return response.json();}).then(function(responseJson){console.log(responseJson);_this2.props.changeAuthState('ConfirmSignUpPage');}).catch(function(err){console.error(err);});}).catch(function(err){_this2.setState({errMessage:err.message});});}}},{key:\"setUserRole\",value:function setUserRole(role){this.setState({user_type:role});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(KeyboardAvoidingView,{style:styles.container,behavior:\"padding\",enabled:true},React.createElement(View,{style:{width:'45%',marginBottom:20,flexDirection:'row',justifyContent:'space-around'}},React.createElement(TouchableHighlight,{style:{width:80,height:85},onPress:function onPress(){_this3.setUserRole('teacher');}},React.createElement(Icon,{name:\"food-apple\",size:80,color:\"#C93D1B\"})),React.createElement(TouchableHighlight,{style:{width:80,height:85},onPress:function onPress(){_this3.setUserRole('parent');}},React.createElement(Icon,{name:\"baby-buggy\",size:80,color:\"#f8c43a\"}))),React.createElement(Text,null,this.state.user_type,\" Sign Up\"),this.state.errMessage===''?null:React.createElement(Text,{style:{color:'red'}},this.state.errMessage),React.createElement(TextInput,{placeholder:\"username\",style:styles.textInput,onChangeText:function onChangeText(username){return _this3.setState({username:username});},value:this.state.username}),React.createElement(TextInput,{secureTextEntry:true,placeholder:\"password\",style:styles.textInput,onChangeText:function onChangeText(password){return _this3.setState({password:password});},value:this.state.password}),React.createElement(TextInput,{placeholder:\"Name\",style:styles.textInput,onChangeText:function onChangeText(name){return _this3.setState({name:name});},value:this.state.name}),React.createElement(TextInput,{placeholder:\"Email\",style:styles.textInput,onChangeText:function onChangeText(email){return _this3.setState({email:email});},value:this.state.email}),React.createElement(View,{style:{width:'90%',margin:10,flexDirection:'row',justifyContent:'space-around'}},React.createElement(TouchableHighlight,{style:{backgroundColor:'#35D0BA'},onPress:this.handleSignup.bind(this)},React.createElement(Text,null,\"Sign up\")),React.createElement(TouchableHighlight,{style:{backgroundColor:'#35D0BA'},onPress:function onPress(){return _this3.props.changeAuthState('signedout');}},React.createElement(Text,null,\" Already have an account? Sign in here\"))));}}]);return Signup;}(React.Component);var styles=StyleSheet.create({container:{flex:1,justifyContent:'center',alignItems:'center'},textInput:{height:40,width:'90%',borderColor:'gray',borderWidth:1,marginTop:8}});export default Signup;","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/auth/signup.js"],"names":["React","Button","bindActionCreators","connect","Icon","Auth","Signup","props","state","username","name","user_type","email","password","errMessage","setState","signUp","attributes","then","data","console","log","fetch","method","headers","Accept","body","JSON","stringify","role","response","json","responseJson","changeAuthState","catch","err","error","message","styles","container","width","marginBottom","flexDirection","justifyContent","height","setUserRole","color","textInput","margin","backgroundColor","handleSignup","bind","Component","StyleSheet","create","flex","alignItems","borderColor","borderWidth","marginTop"],"mappings":"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","sourcesContent":["import React from 'react'\n// import { db } from '../../configuration/db'\nimport { View, StyleSheet, Text, KeyboardAvoidingView, TextInput, AsyncStorage, TouchableHighlight } from 'react-native'\nimport { Button } from 'native-base'\n// import firebase from 'firebase'\n// import { addCurrentUser, addUserType } from '../../redux/actions/index'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons'\nimport Auth from '@aws-amplify/auth'\n\nclass Signup extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            name: '',\n            user_type: '',\n            email: '',\n            password: '',\n            errMessage: ''\n        }\n    }\n\n    handleSignup() {\n        const {username, password, name, email, user_type} = this.state\n        if (!this.state.user_type) {\n            this.setState({ errMessage: 'Please select user role'})\n        } else {\n            Auth.signUp({\n                username,\n                password,\n                attributes: {\n                    name,\n                    email\n                }\n            })\n                .then((data) => {\n                    // console.log(data)\n                    // switch to code input page\n                    // initialize user in database and recorde user id \n                    // for use later to switch to homepage upon successful code input\n                    console.log(this.state.user_type)\n\n                    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/user/' + username, {\n                        method: 'POST',\n                        headers: {\n                            Accept: 'application/json',\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            name,\n                            email,\n                            role: user_type\n                        })\n                    })\n                        .then((response) => response.json())\n                        .then((responseJson) => {\n                            console.log(responseJson)\n                            // this.props.navigation.navigate('ConfirmSignUpPage', {role: this.state.user_type})\n                            this.props.changeAuthState('ConfirmSignUpPage')\n                        })\n                        .catch((err) => {\n                            console.error(err)\n                        })\n                })\n                .catch((err) => {\n                    this.setState({ errMessage: err.message })\n                })            \n        }\n    }\n\n    setUserRole (role) {\n        this.setState({ user_type: role })\n    }\n\n    render () {\n        return (\n            <KeyboardAvoidingView style={styles.container} behavior=\"padding\" enabled>\n                <View style={{ width: '45%', marginBottom:20, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('teacher')}}>\n                        <Icon\n                            name='food-apple'\n                            size={80}\n                            color='#C93D1B'>\n                        </Icon>\n                        {/* <Text>Teacher</Text> */}\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('parent')}}>\n                        <Icon\n                            name='baby-buggy'\n                            size={80}\n                            color='#f8c43a'>\n                        </Icon>\n                        {/* <Text>Parent</Text> */}\n                    </TouchableHighlight>\n                </View>\n                <Text>{this.state.user_type} Sign Up</Text>\n                {this.state.errMessage === '' ?\n                    null \n                : <Text style={{ color: 'red' }}>\n                    {this.state.errMessage}\n                </Text>}\n\n                <TextInput\n                    placeholder=\"username\"\n                    style={styles.textInput}\n                    onChangeText={(username) => this.setState({ username })}\n                    value={this.state.username}\n                />\n                <TextInput\n                    secureTextEntry\n                    placeholder=\"password\"\n                    style={styles.textInput}\n                    onChangeText={(password) => this.setState({ password })}\n                    value={this.state.password}\n                />\n                <TextInput\n                    placeholder=\"Name\"\n                    style={styles.textInput}\n                    onChangeText={(name) => this.setState({ name })}\n                    value={this.state.name}\n                />\n                <TextInput\n                    placeholder=\"Email\"\n                    style={styles.textInput}\n                    onChangeText={(email) => this.setState({ email })}\n                    value={this.state.email}\n                />\n                \n                <View style={{ width: '90%', margin: 10, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={this.handleSignup.bind(this)}>\n                        <Text>Sign up</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={() => this.props.changeAuthState('signedout')}>\n                        <Text> Already have an account? Sign in here</Text>\n                    </TouchableHighlight>\n                </View>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    textInput: {\n        height: 40,\n        width: '90%',\n        borderColor: 'gray',\n        borderWidth: 1,\n        marginTop: 8\n    }\n})\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n//         ...bindActionCreators({ addCurrentUser, addUserType }, dispatch)\n//     }\n// }\n\n// function mapStateToProps(state) {\n//     return({\n//         user: state.user\n//     })\n// }\n\n// export default connect(mapStateToProps, mapDispatchToProps) (Signup)\nexport default Signup"]},"metadata":{},"sourceType":"module"}