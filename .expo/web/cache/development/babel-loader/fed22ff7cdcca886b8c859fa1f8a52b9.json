{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/parent/medicationrequestmain.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { formatDate, formatTime, beautifyDate, beautifyTime } from \"../util\";\nimport MedicinePowderForm from \"./medicinepowderform\";\nimport MedicineSyrupForm from \"./medicinesyrupform\";\nimport MedicineCreamForm from \"./medicinecreamform\";\nimport ENV from \"../../variables\";\n\nvar MedicationRequestMain = function (_React$Component) {\n  _inherits(MedicationRequestMain, _React$Component);\n\n  var _super = _createSuper(MedicationRequestMain);\n\n  function MedicationRequestMain(props) {\n    var _this;\n\n    _classCallCheck(this, MedicationRequestMain);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      optionButtonWidth: 0,\n      optionButtonHeight: 0,\n      show_date_picker: false,\n      show_time_picker: false,\n      date: new Date(),\n      time: new Date(),\n      show_editor: '',\n      藥粉: null,\n      need_refrigeration: false,\n      藥水: null,\n      藥膏: null,\n      note: '',\n      access_mode: 'create'\n    };\n    return _this;\n  }\n\n  _createClass(MedicationRequestMain, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"getHeader\",\n    value: function getHeader() {\n      var _this$state = this.state,\n          access_mode = _this$state.access_mode,\n          date = _this$state.date;\n\n      if (access_mode === 'read') {\n        if (formatDate(date) === formatDate(new Date())) {\n          return '今天托藥單';\n        }\n\n        var days_of_week = ['天', '一', '二', '三', '四', '五', '六'];\n        var day = days_of_week[date.getDay()];\n        return \"\\u661F\\u671F\" + day;\n      } else if (access_mode === 'create') {\n        return '新增托藥單';\n      } else if (access_mode === 'edit') {\n        return '編輯中...';\n      }\n    }\n  }, {\n    key: \"fetchAccessMode\",\n    value: function fetchAccessMode() {\n      return this.state.access_mode;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.request !== this.props.request) {\n        var request = this.props.request;\n\n        if (!request) {\n          this.setState({\n            date: new Date(),\n            time: new Date(),\n            藥粉: null,\n            need_refrigeration: false,\n            藥水: null,\n            藥膏: null,\n            note: '',\n            access_mode: 'create'\n          });\n          return;\n        }\n\n        var timestamp = request.timestamp,\n            medication = request.medication,\n            note = request.note;\n        var 藥粉 = medication.藥粉,\n            need_refrigeration = medication.need_refrigeration,\n            藥水 = medication.藥水,\n            藥膏 = medication.藥膏;\n        this.setState({\n          date: timestamp,\n          time: timestamp,\n          藥粉: 藥粉,\n          need_refrigeration: need_refrigeration,\n          藥水: 藥水,\n          藥膏: 藥膏,\n          note: note,\n          access_mode: 'read'\n        });\n      }\n    }\n  }, {\n    key: \"setDate\",\n    value: function setDate(date) {\n      if (Platform.OS === 'ios') {\n        this.iosSetDate(date);\n      } else {\n        this.androidSetDate(date);\n      }\n    }\n  }, {\n    key: \"iosSetDate\",\n    value: function iosSetDate(date) {\n      if (this.state.access_mode === 'read') return;\n      this.setState({\n        date: date,\n        time: date\n      });\n    }\n  }, {\n    key: \"androidSetDate\",\n    value: function androidSetDate(date) {\n      if (date !== undefined) {\n        this.setState({\n          date: date,\n          time: date,\n          show_date_picker: false\n        });\n      } else {\n        this.setState({\n          show_date_picker: false\n        });\n      }\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime(time) {\n      if (Platform.OS === 'ios') {\n        this.iosSetTime(time);\n      } else {\n        this.androidSetTime(time);\n      }\n    }\n  }, {\n    key: \"iosSetTime\",\n    value: function iosSetTime(time) {\n      if (this.state.access_mode === 'read') return;\n      this.setState({\n        time: time\n      });\n    }\n  }, {\n    key: \"androidSetTime\",\n    value: function androidSetTime(time) {\n      if (time !== undefined) {\n        this.setState({\n          time: time,\n          show_time_picker: false\n        });\n      } else {\n        this.setState({\n          show_time_picker: false\n        });\n      }\n    }\n  }, {\n    key: \"onFinishEdit\",\n    value: function onFinishEdit(medicine_type, medicine_data) {\n      this.setState(_defineProperty({\n        show_editor: ''\n      }, medicine_type, medicine_data));\n    }\n  }, {\n    key: \"onCancelSelect\",\n    value: function onCancelSelect(medicine_type) {\n      this.setState(_defineProperty({\n        show_editor: ''\n      }, medicine_type, null));\n    }\n  }, {\n    key: \"handleClickConfirmButton\",\n    value: function handleClickConfirmButton() {\n      var access_mode = this.state.access_mode;\n\n      if (access_mode === 'read') {\n        this.setState({\n          access_mode: 'edit'\n        });\n      } else if (access_mode === 'create') {\n        this.sendRequest(null);\n      } else if (access_mode === 'edit') {\n        var id = this.props.request.id;\n        this.sendRequest(id);\n      }\n    }\n  }, {\n    key: \"sendRequest\",\n    value: function sendRequest(request_id) {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          date = _this$state2.date,\n          time = _this$state2.time,\n          藥粉 = _this$state2.藥粉,\n          need_refrigeration = _this$state2.need_refrigeration,\n          藥水 = _this$state2.藥水,\n          藥膏 = _this$state2.藥膏,\n          note = _this$state2.note;\n      var _this$props = this.props,\n          student_id = _this$props.student_id,\n          class_id = _this$props.class_id;\n      var request_body = {\n        request_id: request_id,\n        timestamp: formatDate(date) + \" \" + formatTime(time),\n        class_id: class_id,\n        藥粉: 藥粉,\n        need_refrigeration: need_refrigeration,\n        藥水: 藥水,\n        藥膏: 藥膏,\n        note: note\n      };\n      fetch(\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\" + ENV + \"/medicationrequest/student/\" + student_id, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        var statusCode = resJson.statusCode,\n            message = resJson.message,\n            data = resJson.data;\n\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message);\n          return;\n        }\n\n        _this2.props.onCreateRequestSuccess(data.id);\n      }).catch(function (err) {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending medication request');\n      });\n    }\n  }, {\n    key: \"deleteRequestConfirm\",\n    value: function deleteRequestConfirm() {\n      var confirmed = confirm('確定要刪除？');\n\n      if (confirmed) {\n        this.deleteRequest();\n      }\n    }\n  }, {\n    key: \"deleteRequest\",\n    value: function deleteRequest() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          request = _this$props2.request,\n          class_id = _this$props2.class_id;\n      fetch(\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\" + ENV + \"/medicationrequest/\" + request.id, {\n        method: 'DELETE',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          class_id: class_id\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        var statusCode = resJson.statusCode,\n            message = resJson.message,\n            data = resJson.data;\n\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message);\n          return;\n        }\n\n        _this3.props.onDeleteRequestSuccess(data.id);\n      }).catch(function (err) {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request');\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state3 = this.state,\n          show_date_picker = _this$state3.show_date_picker,\n          show_time_picker = _this$state3.show_time_picker,\n          date = _this$state3.date,\n          time = _this$state3.time,\n          藥粉 = _this$state3.藥粉,\n          藥水 = _this$state3.藥水,\n          藥膏 = _this$state3.藥膏,\n          note = _this$state3.note,\n          optionButtonWidth = _this$state3.optionButtonWidth,\n          optionButtonHeight = _this$state3.optionButtonHeight,\n          show_editor = _this$state3.show_editor,\n          access_mode = _this$state3.access_mode;\n\n      if (show_date_picker) {\n        return React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 9\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 3,\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 11\n          }\n        }), React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 11\n          }\n        }, React.createElement(TouchableHighlight, {\n          style: {\n            width: '50%',\n            padding: 10,\n            backgroundColor: 'rgba(255,255,255,0.4)',\n            alignSelf: 'flex-end'\n          },\n          onPress: function onPress() {\n            return _this4.setState({\n              show_date_picker: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 30,\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }\n        }, \"OK\"))));\n      }\n\n      if (show_time_picker) {\n        return React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 9\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 3,\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 11\n          }\n        }), React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 11\n          }\n        }, React.createElement(TouchableHighlight, {\n          style: {\n            width: '50%',\n            padding: 10,\n            backgroundColor: 'rgba(255,255,255,0.4)',\n            alignSelf: 'flex-end'\n          },\n          onPress: function onPress() {\n            return _this4.setState({\n              show_time_picker: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 13\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 30,\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }\n        }, \"OK\"))));\n      }\n\n      return React.createElement(KeyboardAvoidingView, {\n        style: {\n          flex: 1\n        },\n        behavior: \"padding\",\n        enabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }\n      }, this.getHeader())), React.createElement(View, {\n        style: {\n          flex: 7\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          paddingVertical: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableHighlight, {\n        disabled: access_mode === 'read' || show_editor !== '',\n        style: {\n          backgroundColor: 'rgba(255,255,255,0.4)',\n          justifyContent: 'center',\n          padding: 10,\n          height: '100%'\n        },\n        onPress: function onPress() {\n          return _this4.setState({\n            show_date_picker: !show_date_picker\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 15\n        }\n      }, beautifyDate(date))), React.createElement(TouchableHighlight, {\n        disabled: access_mode === 'read' || show_editor !== '',\n        style: {\n          backgroundColor: 'rgba(255,255,255,0.4)',\n          justifyContent: 'center',\n          padding: 10,\n          height: '100%'\n        },\n        onPress: function onPress() {\n          return _this4.setState({\n            show_time_picker: !show_time_picker\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 15\n        }\n      }, beautifyTime(time)))), show_editor === '藥粉' ? React.createElement(MedicinePowderForm, {\n        藥粉: 藥粉,\n        width: optionButtonWidth,\n        height: optionButtonHeight,\n        onFinishEdit: function onFinishEdit(powder_amount) {\n          return _this4.onFinishEdit('藥粉', powder_amount);\n        },\n        onCancelSelect: function onCancelSelect() {\n          return _this4.onCancelSelect('藥粉');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }\n      }) : show_editor === '藥水' ? React.createElement(MedicineSyrupForm, {\n        藥水: 藥水,\n        width: optionButtonWidth,\n        height: optionButtonHeight,\n        onFinishEdit: function onFinishEdit(syrup_amount) {\n          return _this4.onFinishEdit('藥水', syrup_amount);\n        },\n        onCancelSelect: function onCancelSelect() {\n          return _this4.onCancelSelect('藥水');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 15\n        }\n      }) : show_editor === '藥膏' ? React.createElement(MedicineCreamForm, {\n        藥膏: 藥膏,\n        width: optionButtonWidth,\n        height: optionButtonHeight,\n        onFinishEdit: function onFinishEdit(cream_area) {\n          return _this4.onFinishEdit('藥膏', cream_area);\n        },\n        onCancelSelect: function onCancelSelect() {\n          return _this4.onCancelSelect('藥膏');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 17\n        }\n      }) : React.createElement(View, {\n        style: {\n          flex: 4\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 3,\n          backgroundColor: 'rgba(255,255,255,0.4)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 19\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableHighlight, {\n        disabled: access_mode === 'read',\n        style: {\n          flex: 1,\n          backgroundColor: 藥粉 ? '#ff8944' : '#ffddb7',\n          justifyContent: 'center',\n          marginLeft: 14,\n          marginTop: 14,\n          marginRight: 7,\n          marginBottom: 7\n        },\n        onLayout: function onLayout(event) {\n          var _event$nativeEvent$la = event.nativeEvent.layout,\n              width = _event$nativeEvent$la.width,\n              height = _event$nativeEvent$la.height;\n\n          _this4.setState({\n            optionButtonWidth: width,\n            optionButtonHeight: height\n          });\n        },\n        underlayColor: \"#ff8944\",\n        onPress: function onPress() {\n          return _this4.setState({\n            show_editor: '藥粉',\n            藥粉: 藥粉 || 1\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 23\n        }\n      }, 藥粉 ? React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 27\n        }\n      }, \"\\u85E5\\u7C89: \", 藥粉, \" \\u5305\") : React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 29\n        }\n      }, \"\\u85E5\\u7C89\")), React.createElement(TouchableHighlight, {\n        disabled: access_mode === 'read',\n        style: {\n          flex: 1,\n          backgroundColor: this.state.need_refrigeration ? '#ff8944' : '#ffddb7',\n          justifyContent: 'center',\n          marginLeft: 7,\n          marginTop: 14,\n          marginRight: 14,\n          marginBottom: 7\n        },\n        underlayColor: \"#ff8944\",\n        onPress: function onPress() {\n          return _this4.setState({\n            need_refrigeration: !_this4.state.need_refrigeration\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 25\n        }\n      }, \"\\u85E5\\u54C1\\u9700\\u51B7\\u85CF\"))), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableHighlight, {\n        disabled: access_mode === 'read',\n        style: {\n          flex: 1,\n          backgroundColor: 藥水 ? '#ff8944' : '#ffddb7',\n          justifyContent: 'center',\n          marginLeft: 14,\n          marginTop: 7,\n          marginRight: 7,\n          marginBottom: 14\n        },\n        onPress: function onPress() {\n          return _this4.setState({\n            show_editor: '藥水',\n            藥水: 藥水 || 0\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 23\n        }\n      }, 藥水 ? React.createElement(Text, {\n        style: {\n          fontSize: 20,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 27\n        }\n      }, \"\\u85E5\\u6C34: \", 藥水, \" c.c.\") : React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 29\n        }\n      }, \"\\u85E5\\u6C34\")), React.createElement(TouchableHighlight, {\n        disabled: access_mode === 'read',\n        style: {\n          flex: 1,\n          backgroundColor: 藥膏 ? '#ff8944' : '#ffddb7',\n          justifyContent: 'center',\n          marginLeft: 7,\n          marginTop: 7,\n          marginRight: 14,\n          marginBottom: 14\n        },\n        onPress: function onPress() {\n          return _this4.setState({\n            show_editor: '藥膏'\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 23\n        }\n      }, 藥膏 ? React.createElement(Text, {\n        style: {\n          fontSize: 20,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 27\n        }\n      }, \"\\u85E5\\u818F\\u90E8\\u4F4D: \", 藥膏) : React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 29\n        }\n      }, \"\\u85E5\\u818F\")))), React.createElement(View, {\n        style: {\n          backgroundColor: '#b5e9e9'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 19\n        }\n      }, React.createElement(TextInput, {\n        editable: access_mode !== 'read',\n        placeholder: \"\\u5099\\u8A3B\",\n        placeholderTextColor: \"grey\",\n        value: note,\n        style: {\n          backgroundColor: '#eaf8f8',\n          borderRadius: 3,\n          fontSize: 20,\n          padding: 20\n        },\n        onChangeText: function onChangeText(note) {\n          return _this4.setState({\n            note: note\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 21\n        }\n      }))), this.props.request !== undefined && this.props.request.administered ? React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          paddingVertical: 10,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 15\n        }\n      }, \"\\u5582\\u85E5\\u8001\\u5E2B: \", this.props.request.teacher_name)) : React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          paddingVertical: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          marginHorizontal: 7\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }\n      }, access_mode === 'edit' ? React.createElement(TouchableHighlight, {\n        disabled: show_editor !== '',\n        style: {\n          height: '100%',\n          padding: 10,\n          justifyContent: 'center',\n          backgroundColor: 'rgba(255,255,255,0.4)'\n        },\n        onPress: function onPress() {\n          return _this4.deleteRequestConfirm();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 19\n        }\n      }, \"\\u522A\\u9664\")) : null), React.createElement(View, {\n        style: {\n          flex: 1,\n          marginHorizontal: 7\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }\n      }, access_mode === 'edit' ? React.createElement(TouchableHighlight, {\n        disabled: show_editor !== '',\n        style: {\n          height: '100%',\n          padding: 10,\n          justifyContent: 'center',\n          backgroundColor: 'rgba(255,255,255,0.4)'\n        },\n        onPress: function onPress() {\n          return _this4.setState({\n            access_mode: 'read'\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 19\n        }\n      }, \"\\u53D6\\u6D88\\u7DE8\\u8F2F\")) : null), React.createElement(View, {\n        style: {\n          flex: 1,\n          marginHorizontal: 7\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }\n      }, React.createElement(TouchableHighlight, {\n        disabled: show_editor !== '',\n        style: {\n          height: '100%',\n          padding: 10,\n          justifyContent: 'center',\n          backgroundColor: 'rgba(255,255,255,0.4)'\n        },\n        onPress: function onPress() {\n          return _this4.handleClickConfirmButton();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 25,\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 17\n        }\n      }, access_mode === 'read' ? '編輯' : access_mode === 'create' ? '新增' : access_mode === 'edit' ? '送出' : null))))));\n    }\n  }]);\n\n  return MedicationRequestMain;\n}(React.Component);\n\nexport { MedicationRequestMain as default };","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/parent/medicationrequestmain.js"],"names":["React","formatDate","formatTime","beautifyDate","beautifyTime","MedicinePowderForm","MedicineSyrupForm","MedicineCreamForm","ENV","MedicationRequestMain","props","state","optionButtonWidth","optionButtonHeight","show_date_picker","show_time_picker","date","Date","time","show_editor","藥粉","need_refrigeration","藥水","藥膏","note","access_mode","days_of_week","day","getDay","prevProps","request","setState","timestamp","medication","Platform","OS","iosSetDate","androidSetDate","undefined","iosSetTime","androidSetTime","medicine_type","medicine_data","sendRequest","id","request_id","student_id","class_id","request_body","fetch","method","headers","Accept","body","JSON","stringify","then","res","json","resJson","statusCode","message","data","alert","onCreateRequestSuccess","catch","err","confirmed","confirm","deleteRequest","onDeleteRequestSuccess","flex","justifyContent","width","padding","backgroundColor","alignSelf","fontSize","textAlign","alignItems","getHeader","flexDirection","paddingVertical","height","powder_amount","onFinishEdit","onCancelSelect","syrup_amount","cream_area","marginLeft","marginTop","marginRight","marginBottom","event","nativeEvent","layout","borderRadius","administered","teacher_name","marginHorizontal","deleteRequestConfirm","handleClickConfirmButton","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput, KeyboardAvoidingView, Alert, ScrollView, Platform } from 'react-native'\n// import DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, beautifyDate, beautifyTime }  from '../util'\nimport MedicinePowderForm from './medicinepowderform'\nimport MedicineSyrupForm from './medicinesyrupform'\nimport MedicineCreamForm from './medicinecreamform'\nimport ENV from '../../variables'\n\nexport default class MedicationRequestMain extends React.Component{\n  constructor(props) {\n    super(props) \n    this.state = {\n      optionButtonWidth: 0,\n      optionButtonHeight: 0,\n      show_date_picker: false,\n      show_time_picker: false,\n      date: new Date(),\n      time: new Date(),\n      show_editor: '',\n      藥粉: null,\n      need_refrigeration: false,\n      藥水: null,\n      藥膏: null,\n      note: '',\n      access_mode: 'create'\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  getHeader() {\n    const { access_mode, date, } = this.state\n    if (access_mode === 'read') {\n      if (formatDate(date) === formatDate(new Date)) {\n        return '今天托藥單'\n      }\n      const days_of_week = ['天', '一', '二', '三', '四', '五', '六']\n      const day = days_of_week[date.getDay()]\n      return `星期${day}`\n    } else if (access_mode === 'create') {\n      return '新增托藥單'\n    } else if (access_mode === 'edit') {\n      return '編輯中...'\n    }\n  }\n\n  fetchAccessMode() {\n    return this.state.access_mode\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.request !== this.props.request) {\n      const { request } = this.props\n      if (!request) {\n        this.setState({\n          date: new Date(),\n          time: new Date(),\n          藥粉: null,\n          need_refrigeration: false,\n          藥水: null,\n          藥膏: null,\n          note: '',\n          access_mode: 'create'\n        })\n        return\n      }\n\n      const { timestamp, medication, note } = request\n      const { 藥粉, need_refrigeration, 藥水, 藥膏 } = medication\n      this.setState({\n        date: timestamp,\n        time: timestamp,\n        藥粉,\n        need_refrigeration,\n        藥水,\n        藥膏,\n        note,\n        access_mode: 'read'\n      })\n    }\n  }\n\n  setDate(date) {\n    if (Platform.OS === 'ios') {\n      this.iosSetDate(date)\n    } else { // android\n      this.androidSetDate(date)\n    }\n  }\n\n  iosSetDate(date) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      date,\n      time: date\n    })\n  }\n\n  androidSetDate(date) {\n    if (date !== undefined) {\n      this.setState({\n        date,\n        time: date,\n        show_date_picker: false\n      })\n    } else {\n      this.setState({ show_date_picker: false })\n    }\n  }\n\n  setTime(time) {\n    if (Platform.OS === 'ios') {\n      this.iosSetTime(time)\n    } else { // android\n      this.androidSetTime(time)\n    }\n  }\n\n  iosSetTime(time) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      time\n    })\n  }\n\n  androidSetTime(time) {\n    if (time !== undefined) {\n      this.setState({\n        time,\n        show_time_picker: false\n      })\n    } else {\n      this.setState({ show_time_picker: false })\n    }\n  }\n\n  onFinishEdit(medicine_type, medicine_data) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: medicine_data\n    })\n  }\n\n  onCancelSelect(medicine_type) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: null\n    })\n  }\n\n  handleClickConfirmButton() {\n    const { access_mode } = this.state\n    if (access_mode === 'read') {\n      this.setState({\n        access_mode: 'edit'\n      })\n    } else if (access_mode === 'create') {\n      this.sendRequest(null)\n    } else if (access_mode === 'edit') {\n      const { id } = this.props.request\n      this.sendRequest(id)\n    }\n  }\n\n  sendRequest(request_id) {\n    const { date, time, 藥粉, need_refrigeration, 藥水, 藥膏, note  } = this.state\n    const {student_id, class_id} = this.props\n    const request_body = {\n      request_id,\n      timestamp: `${formatDate(date)} ${formatTime(time)}`,\n      class_id,\n      藥粉,\n      need_refrigeration,\n      藥水,\n      藥膏,\n      note\n    }\n\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/student/${student_id}`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onCreateRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending medication request')\n      })\n  }\n\n  deleteRequestConfirm() {\n    const confirmed = confirm('確定要刪除？')\n    if (confirmed) {\n      this.deleteRequest()\n    }\n  }\n\n  deleteRequest() {\n    const { request, class_id } = this.props\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request.id}`, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        class_id\n      })\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onDeleteRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n      })\n  }\n\n  render() {\n    const {\n      show_date_picker,\n      show_time_picker,\n      date,\n      time,\n      藥粉,\n      藥水,\n      藥膏,\n      note,\n      optionButtonWidth,\n      optionButtonHeight,\n      show_editor,\n      access_mode\n    } = this.state\n\n    // console.log(this.props.request)\n\n    if (show_date_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'date'}\n              value={date}\n              onChange={(event, date) => this.setDate(date)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_date_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    if (show_time_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'time'}\n              value={time}\n              onChange={(event, time) => this.setTime(time)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_time_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    return (\n      <KeyboardAvoidingView\n        style={{ flex: 1 }}\n        behavior='padding'\n        enabled\n      >\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n          <Text style={{ fontSize: 30, textAlign: 'center' }}>{this.getHeader()}</Text>\n        </View>\n        <View style={{ flex: 7 }}>\n\n          {/* DATE and TIME */}\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', paddingVertical: 10 }}>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_date_picker: !show_date_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyDate(date)}</Text>\n            </TouchableHighlight>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_time_picker: !show_time_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyTime(time)}</Text>\n            </TouchableHighlight>\n          </View>\n\n          {show_editor === '藥粉' ? \n            <MedicinePowderForm\n              藥粉={藥粉}\n              width={optionButtonWidth}\n              height={optionButtonHeight}\n              onFinishEdit={(powder_amount) => this.onFinishEdit('藥粉', powder_amount)}\n              onCancelSelect={() => this.onCancelSelect('藥粉')}\n            />\n            : show_editor === '藥水' ?\n              <MedicineSyrupForm\n                藥水={藥水}\n                width={optionButtonWidth}\n                height={optionButtonHeight}\n                onFinishEdit={(syrup_amount) => this.onFinishEdit('藥水', syrup_amount)}\n                onCancelSelect={() => this.onCancelSelect('藥水')}\n              />\n              : show_editor === '藥膏' ?\n                <MedicineCreamForm\n                  藥膏={藥膏}\n                  width={optionButtonWidth}\n                  height={optionButtonHeight}\n                  onFinishEdit={(cream_area) => this.onFinishEdit('藥膏', cream_area)}\n                  onCancelSelect={() => this.onCancelSelect('藥膏')}\n                />\n                :\n                <View style={{ flex: 4 }}>\n                  <View style={{ flex: 3, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* POWDER */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥粉 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 14,\n                          marginRight: 7,\n                          marginBottom: 7\n                        }}\n                        onLayout={(event) => {\n                          const { width, height } = event.nativeEvent.layout\n                          this.setState({\n                            optionButtonWidth: width,\n                            optionButtonHeight: height\n                          })\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ show_editor: '藥粉', 藥粉: 藥粉 || 1 })}\n                      >\n                        {藥粉 ? \n                          <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉: {藥粉} 包</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* REFRIGERATED */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: this.state.need_refrigeration ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 14,\n                          marginRight: 14,\n                          marginBottom: 7\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ need_refrigeration: !this.state.need_refrigeration})}\n                      >\n                        <Text style={{ fontSize: 25, textAlign: 'center' }}>藥品需冷藏</Text>\n                      </TouchableHighlight>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* SYRUP */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥水 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 7,\n                          marginRight: 7,\n                          marginBottom: 14\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥水', 藥水: 藥水 || 0 })}\n                      >\n                        {藥水 ?\n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥水: {藥水} c.c.</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥水</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* CREAM */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥膏 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 7,\n                          marginRight: 14,\n                          marginBottom: 14,\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥膏' })}\n                      >\n                        {藥膏 ? \n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥膏部位: {藥膏}</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥膏</Text>\n                        }\n                        \n                      </TouchableHighlight>\n                    </View>\n                  </View>\n\n              {/* NOTE */}\n                  <View\n                    style={{ backgroundColor: '#b5e9e9' }}\n                  >\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      placeholder='備註'\n                      placeholderTextColor='grey'\n                      value={note}\n                      style={{\n                        // height: '100%',\n                        backgroundColor: '#eaf8f8',\n                        borderRadius: 3,\n                        fontSize: 20,\n                        padding: 20,\n                      }}\n                      onChangeText={note => this.setState({ note })}\n                    />\n                  </View>\n                </View>\n\n          }\n\n          {/* Add Button */}\n          {this.props.request !== undefined && this.props.request.administered ?\n            <View\n              style={{ flex: 1, flexDirection: 'row', paddingVertical: 10, justifyContent: 'center', alignItems: 'center' }}\n            >\n              <Text style={{ fontSize: 30 }}>喂藥老師: {this.props.request.teacher_name}</Text>\n            </View>\n            :\n          <View\n            style={{ flex: 1, flexDirection: 'row', paddingVertical: 10 }}\n          >\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    // alignSelf: 'flex-start',\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.deleteRequestConfirm()}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>刪除</Text>\n                </TouchableHighlight>\n                : null\n              }              \n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.setState({ access_mode: 'read'})}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>取消編輯</Text>\n                </TouchableHighlight>\n                : null\n              }\n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              <TouchableHighlight\n                disabled={show_editor !== ''}\n                style={{\n                  height: '100%',\n                  padding: 10,\n                  justifyContent: 'center',\n                  backgroundColor: 'rgba(255,255,255,0.4)'\n                }}\n                onPress={() => this.handleClickConfirmButton()}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>\n                  {access_mode === 'read' ?\n                    '編輯'\n                    : access_mode === 'create' ?\n                      '新增'\n                      : access_mode === 'edit' ?\n                        '送出'\n                        : null\n                  }\n                </Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n          }\n        </View>\n      </KeyboardAvoidingView>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}