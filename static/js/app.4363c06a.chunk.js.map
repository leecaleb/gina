{"version":3,"sources":["assets/app-splash.gif","assets/icon-delete.png","assets/icon-teacher-thumbnail.png","assets/icon-qr.png","assets/app_logo.png","assets/icon-checked.png","assets/icon-plus.png","redux/school/reducers/classInfo.js","redux/school/reducers/attendance.js","redux/school/reducers/appetite.js","redux/school/reducers/sleep.js","redux/school/reducers/healthstatus.js","redux/school/reducers/milk.js","redux/school/reducers/diaper.js","redux/school/reducers/message.js","redux/school/reducers/school.js","redux/school/reducers/index.js","redux/school/reducers/medicationrequests.js","redux/school/reducers/water.js","redux/school/actions/index.js","components/teacher/loginnumberpad.js","variables.js","components/util.js","components/teacher/attendancecard.js","components/teacher/medicationrequestcard.js","components/reloading.js","components/teacher/pickupalert.js","components/picker.js","components/teacher/wellnessform.js","components/teacher/studentmodal.js","components/teacher/teachermodal.js","components/teacher/modal.js","components/teacher/inboxcard.js","components/teacher/teacherhome.js","components/teacher/schoolhome.js","components/teacher/teacherclockinout.js","components/parent/timemodal.js","components/teacher/logs/medrequestmodal.js","components/teacher/logs/medicinelog.js","components/teacher/logs/wellnesslog.js","components/header.js","components/teacher/logs/appetitelog.js","components/teacher/logs/sleeplog.js","components/teacher/logs/milklog.js","components/teacher/logs/pootextinput.js","components/teacher/logs/pooentry.js","components/teacher/logs/diaperlog.js","components/teacher/admin/adminhome.js","components/teacher/admin/registernewstudents.js","components/teacher/admin/registerparents.js","components/teacher/admin/registration.js","components/teacher/admin/modal.js","components/teacher/admin/editstudentprofile.js","components/teacher/admin/addparent.js","components/teacher/admin/qrpage.js","components/teacher/admin/students.js","components/teacher/admin/addteacher.js","components/teacher/admin/editteacher.js","components/teacher/admin/teachers.js","components/teacher/messageforparents.js","components/teacher/attendancepage.js","components/teacher/inbox.js","components/teacher/admin/downloadpage.js","components/teacher/admin/downloadteacherattendance.js","components/teacher/schoolapp.js","components/auth/signin.js","components/auth/signup.js","redux/parent/reducers/index.js","redux/parent/reducers/parent.js","redux/parent/reducers/attendance.js","redux/parent/reducers/inbox.js","redux/parent/actions/index.js","components/parent/wellnesscard.js","components/parent/appetitecard.js","components/parent/milkcard.js","components/parent/sleepcard.js","components/parent/restroomcard.js","components/parent/messagecard.js","components/parent/parenthometitle.js","components/parent/profileselector.js","components/parent/qrpage.js","components/parent/medicinerequestcard.js","components/parent/morningremindercard.js","components/parent/announcementcard.js","components/parent/parenthome.js","components/parent/medicinepowderform.js","components/parent/medicinesyrupform.js","components/parent/medicinecreamform.js","components/parent/medicationrequestmain.js","components/parent/medicationrequestpage.js","components/parent/absenceexcuse.js","components/parent/absenceexcusepage.js","components/parent/pickuprequest.js","components/parent/addmedicationrequestpage.js","components/parent/announcementpage.js","components/parent/announcementlistpage.js","components/parent/parentapp.js","components/auth/confirmsignup.js","components/auth/authloading.js","configuration/aws-cognito-auth.js","App.js","assets/icon-thumbnail.png","assets/icon-checked-box.png","assets/icon-unchecked-box.png","assets/icon-medication-powder.png","assets/icon-medication-syrup.png","assets/icon-medication-gel.png","assets/icon-medication-pill.png","assets/icon-wellness.png","assets/icon-appetite.png","assets/icon-milk.png","assets/icon-sleep.png","assets/icon-diaper.png","assets/icon-message.png","assets/icon-babies.png","assets/icon-medrequest.png","assets/icon-morningreminder.png","assets/icon-announcement.png","assets/icon-back.png","assets/icon-forward.png","assets/icon-plus-green.png","assets/icon-plus-red.png","assets/icon-download.png"],"names":["module","exports","initial_state","class_id","passcodeTeacherId","teachers","students","isConnected","errMessage","initialized","present","Set","absent","unmarked","attendance","initialState","loaded","fruit_name","ratings","updatedStudents","err_message","by_student_id","records","by_id","all_id","errorMessage","newDataForCreate","oldDataForEdit","records_with_error","record_id_for_update","dataForRemoval","all_dispatched","students_pending_amount_update","data_to_update","new_data_for_create","old_data_for_edit","message_by_student_id","student_id_for_update","classes","pick_up_request","admin_passcode","viewing_status","passcodeAdminId","teacherOnDuty","student_present","student_absent","student_unmarked","teacher_present","teacher_absent","teacher_unmarked","combineReducers","classInfo","state","action","newState","type","teacher_objs","forEach","teacher","name","passcode","logged_in","in_time","out_time","student","id","profile_picture","blood_type","address","home_phone","father_phone","mother_phone","conversation_id","data","attendance_obj","attendance_id","teacher_id","time","student_id","delete","excuse_type","medicationrequests","requests","unfinished","finished","new_unfinished","request_id","administered","i","length","push","appetite","Breakfast","Fruit","Lunch","Snack","mealType","rating","water_drank","slice","meal_type","student_id_array","Object","keys","add","newRatingObj","map","water","byId","includes","sleep","sleepData","index","sleep_time","record_id_array","record_id","setSeconds","removed","splice","found","has","new_record_id","size","wake_time","student_record_ids","removing_index","findIndex","element","healthstatus","len","temperature","status","wellnessData","student_id_list","record_id_list","new_id","Date","milk","milkData","amount","milk_amount","date_time","record_id_index","indexOf","diaper","diaperData","cloth_diaper","pee_or_poo","poo_condition","current_pee_or_poo","condition","console","log","new_records","message","text","things_to_bring","other_item","activities","other_activity","message_data","items_to_bring_bool","item_to_bring","new_acitivities_bool","activity","school","admins","updated_classes","admin_id","updated_teachers","attendance_array","total_minutes","updated_students","uri","old_class_id","new_class_id","new_student_id_array","image_url","initializeClass","rateAppetite","markPresent","markAbsent","initializeRequests","fillMedRequest","fetchAttendanceSuccess","markTeacherLoggedIn","markTeacherLoggedOut","clearRatings","setAllRatingsToGreat","addWellnessRecord","addHealthStatus","addTemperature","sendWellnessDataSuccess","sendWellnessDataFail","invalidateWellnessData","setSleepTime","removeSleepRecord","removeSleepRecordSuccess","removeSleepRecordFail","setWakeTime","removeWakeTime","editMilkAmount","editMilkTime","updateDiaperAmount","addDiaperRecord","editDiaperTime","switchPeeOrPoo","editPooCondition","removeDiaperRecordSuccess","removeDiaperRecordFail","clearDiaperlogErrorMessage","addMilkRecord","fetchClassAppetiteData","fetchClassWellnessData","fetchClassSleepData","clearPendingSleepUpdate","fetchClassMilkData","createDataSuccess","createDataFail","editDataSuccess","editDataFail","removeMilkRecordSuccess","removeMilkRecordFail","createSleepRecordSuccess","createSleepRecordFail","editSleepRecordSuccess","editSleepRecordFail","fetchClassDiaperData","createDiaperRecordSuccess","createDiaperRecordFail","editDiaperRecordSuccess","editDiaperRecordFail","editDiaperAmountSuccess","editDiaperAmountFail","removeRecord","clearState","setClassId","onSendAppetiteSuccess","alertErrMessage","clearAppetiteErrorMessage","addStudentIdForUpdate","markWaterDrank","markStaffAttendanceFail","writeToAll","writeToOne","remindItemsToBringToAll","remindItemsToBringToOne","recordActivitiesForAll","recordActivitiesForOne","writeItemToBringToAll","writeItemToBringToOne","writeActivityForAll","writeActivityForOne","fetchClassMessageData","alertSleeplogErrorMessage","clearSleeplogErrorMessage","editFruitName","fetchClassesSuccess","fetchTeachersSuccess","fetchStudentsSuccess","initializeStudentWellness","sendMessageOnSuccess","setConnectState","clearSchoolState","fetchTeacherAttendanceSuccess","fetchStudentAttendanceSuccess","editTeacherOnDuty","addPickupRequest","updateViewingStatus","updateProfilePicture","editStudentSuccess","updateTeacherProfilePicture","markRecordError","markRecordCorrect","LoginNumberPad","props","number_array","handlePasscode","bind","num","this","setState","handleEnterPasscode","TouchableHighlight","style","backgroundColor","width","height","flex","justifyContent","alignItems","zIndex","position","underlayColor","onPress","hideLoginPad","borderRadius","flexDirection","margin","fontSize","fontWeight","paddingHorizontal","alignSelf","flexWrap","number","key","React","Component","connect","StyleSheet","create","button","minWidth","aspectRatio","class","dispatch","bindActionCreators","getEnvVars","env","undefined","Constants","manifest","releaseChannel","formatDate","date","getFullYear","getMonth","getDate","beautifyDate","beautifyMonthDate","formatTime","getHours","getMinutes","getSeconds","beautifyTime","formatHourMinute","get","endpoint","a","async","success","fetch","ENV","method","headers","Accept","then","res","json","resJson","statusCode","catch","err","result","post","body","JSON","stringify","put","delete_by_id","fetchData","child_id","start_date","end_date","query","fetchedData","fetchClassData","sendWellnessData","wellness_data","data_objs","normalize","request_body","fetchResult","AttendanceCard","selected_student_ids","attendance_type","showModal","Text","View","paddingLeft","paddingTop","onSelectAttendanceType","textAlign","adjustsFontSizeToFit","handleOnClick","styles","cardContainer","Image","source","require","borderWidth","borderColor","footer","marginTop","paddingVertical","thumbnailImage","forwardRef","MedicationReqeustCard","timerId","d","alert","medication_requests","padding","navigation","button_text","ScrollView","horizontal","timestamp","medication","note","card","color","Reloading","ActivityIndicator","PickupAlert","timer","setTimeout","timeoutId","requestQueue","isLoading","onConfirm","goBack","Alert","clearTimeout","request","arrival_time","marginRight","PickerComponent","selectedIndex","Platform","OS","options","ActionSheetIOS","showActionSheetWithOptions","cancelButtonIndex","buttonIndex","handleSelectValue","ActionSheet","show","selectedValue","textStyle","disabled","showSelect","WellnessForm","other_option","normalized_temperature","autoFocus","TextInput","keyboardType","placeholder","value","onChangeText","temp","handleTempInput","handleSelectStatus","selectTextOnFocus","onBlur","StudentModal","getClassIdByStudentId","class_id_found","j","wellness","Toast","buttonText","duration","sendDataResult","fetchStudentAttendance","hideModal","school_id","startDate","endDate","response","handleSend","TeacherModal","clockout","clockin","fetchTeacherAttendance","setOptions","headerRight","paddingRight","editTemperature","record","Math","round","clock","Modal","KeyboardAvoidingView","behavior","enabled","InboxCard","messages","items_to_bring","message_for_teacher","TeacherHome","poll","showLoginNumberPad","pageClicked","alertForPickup","pickupQueue","modalStudentId","modalTeacherId","isAdmin","onConfirmPickup","unsubscribe","NetInfo","addEventListener","route","params","class_name","title","refs","navigate","newPickupQueue","contentContainerStyle","paddingBottom","ref","button_row","record_button","marginVertical","SchoolHome","handleSignOut","window","e","fetchClassIdAndName","fetchTeacherData","fetchStudentData","class_data","getAdminId","teacher_id_array","school_name","loadAuth","Auth","signOut","removeEventListener","TeacherClockInOut","logging_in","fetchStaffAttendanceByClassId","clockOut","clockIn","staff_id","marginBottom","Dimensions","TimeModal","onChange","isWeekday","special_date","day","getDay","toDateString","datetime","isIOS","iosSetDate","androidSetDate","selectDatetimeConfirm","datetime_type","minDatetime","maxDatetime","minTime","maxTime","inline","selected","minDate","maxDate","onClickOutside","filterDate","showTimeSelect","showTimeSelectOnly","timeIntervals","timeCaption","dateFormat","MedRequestModal","medicated_time","showTimePicker","thumbnail","student_name","fever_entry","before_meal","gel","other_type","powder","powder_refrigerated","syrup","marginHorizontal","entry","need_refrigerated","marginLeft","TeacherMedicineLog","refreshing","selected_request_id","handleShowRequest","handleFulfillRequest","current_request","refreshControl","RefreshControl","onRefresh","fetchFromDB","tintColor","titleColor","colors","progressBackgroundColor","WellnessLog","show_record","addRecord","setDate","denormalize","has_unsent_record","wellnessDataValidated","validated","childThumbnail","hasUnsentRecord","subHeading","Header","TeacherAppetiteLog","selectedForCustomize","editingFruitType","students_with_records","handleRateFoodWellness","handleClearAll","handleSetAll","appetiteData","customized_text","appetite_log","b_rating","f_rating","l_rating","s_rating","obj","mealButtons","mealButtonText","onLongPress","fruitNameEditorOnBlur","meal_rating","cardBody","isRatingCustomized","onClickOther","onCustomizeRating","customizedRatingOnBlur","foodButton","TeacherSleepLog","showIOSDatePicker","recordType","confirmDelete","showDateTimeModal","updateReducerTime","setTime","last_record","current_wake_time","checkLastRecord","n","last_record_id","getTime","last_second_record","start_time","checkRecord","prev_record_id","next_record_id","prev_record","next_record","createRecord","editRecord","status_code","createSleepRecordRes","editRecordRes","current_sleep_time","confirmToRemoveWakeTime","confirmToRemoveRecord","TeacherMilkLog","handleOnAddRecord","handleRemoveRecord","handleRemove","handleCreate","handleCreateRes","handleEdit","handleEditRes","createDataRes","editDataRes","checkUnsent","handleEditMilkAmout","textRef","isFocused","onEndEditing","PooEntry","selected_other","diaper_records","DiaperLog","show_time_picker","record_id_for_edit","removeDiaperRecord","createRecords","create_records_result","sendDiaperAmountData","sendDiaperAmountDataResult","Promise","all","Array","from","createRecordsRes","keyboardShouldPersistTaps","handleUpdateDiaperAmount","confirmRemove","mode","display","event","minimumDate","AdminHome","pageName","TouchableOpacity","onClick","handleNavigate","navigationOptions","headerTitle","RegisterNewStudents","studentDataArray","found_class_id","addStudent","borderBottomWidth","borderBottomColor","setName","setBloodType","removeStudent","handleSelectClass","RegisterParents","parentDataArray","email","username","password","role","mobile","work_phone","transportation","parentSignUpStatus","nativeEvent","toLowerCase","signUp","attributes","values","addParent","parent","Picker","onValueChange","itemValue","itemIndex","setRole","Item","label","removeParent","autoCapitalize","setEmail","setUsername","secureTextEntry","setPassword","handleSignup","disable","Registration","createFamilyProfileStatus","all_parents_signed_up","getParentSignUpStatus","getParentDataArray","getStudentDataArray","error","createFamilyProfile","component","modal_padding","EditStudentProfile","parents","borderStyle","editStudentData","AddParent","qr_data","parent_data","signUpParent","editable","viewQRCode","postParent","QRPage","name_prefix","Students","getPermissionAsync","Permissions","_pickImage","url","ImagePicker","mediaTypes","All","allowsEditing","aspect","quality","base64","cancelled","getProfilePictureURL","modal_type","image","path","getMilliseconds","deleteStudentById","getModalContent","max","pageY","confirmDeleteStudent","AddTeacher","postTeacher","EditTeacher","getClassIdByTeacherId","class_id_list","Teachers","selected_teacher_id","confirm","deleteTeacher","confirmDeleteTeacher","MessageForParents","to_all_message","activities_list","activities_bool","editingOtherItemToBring","editingOtherItemForStudent","editingOtherActivity","editingOtherActivityForOne","messageData","selected_index","new_bool","normalized_data","item","otherItemForAllEditorOnBlur","otherActivityEditorOnBlur","multiline","maxLength","editItemToBringToOneEditorOnBlur","activityForOneEditorOnBlur","AttendancePage","display_list","students_or_teachers","selected_class_id","teacherClicked","attendanceType","all_id_list","person_id","selectPersonType","selectClass","selectAttendanceType","person","Inbox","morning_reminder","DownloadPage","DownloadTeacherAttendance","store","createStore","reducer","Stack","createStackNavigator","SchoolApp","NavigationContainer","Navigator","initialRouteName","screenOptions","gestureEnabled","headerTitleStyle","Screen","initialParams","headerLeft","Signin","user_type","signIn","user","challengeName","completeNewPassword","code","changeAuthState","keyboardVerticalOffset","container","textInput","pass","handleSignIn","responseJson","setUserRole","child_of_id","med_requests","child","days","1","2","3","4","5","inbox","current_conversation_id","conversations_by_id","most_recently_read_message_id","initializeChildren","getMedRequestSuccess","WellnessCard","prevProps","updateTitleTemp","AppetiteCard","breakfast","fruit","lunch","snack","denormalizeAppetiteData","today","breakfast_rating","fruit_rating","lunch_rating","snack_rating","parseData","data_string","water_drunk","parseInt","MilkCard","milkIntakeData","milk_type","teacher_name","SleepCard","hours","minutes","RestroomCard","MessageCard","data_available","message_id","scrollHeight","message_read","propDate","items_list","parent_id","threshold","setHours","before4am","prev_day","scrollEnabled","setScrollHeight","target","onLayout","sendMessage","showMessageForTeacher","ParentHomeTitle","layout","selectOtherChildProfile","opacity","ProfileSelector","showSelector","SlideInRight","Animated","Value","timing","toValue","useNativeDriver","start","onSelectStudent","windowWidth","student_of_id","transform","translateX","interpolate","inputRange","outputRange","hideQRCode","MedicationRequestCard","get_todays_requests","object_array","viewMedRequest","afterFive","MorningReminderCard","morning_reminder_id","reminder_read","milk_timestamp","diaper_timestamp","diaper_type","showDateTimeModalType","includeMilkIntake","includeDiaper","onSendMessageDelay","debounce","reminder","showTimeModal","onFocus","AnnouncementCard","announcements","fetchAnnouncement","viewMore","announcement","viewAnnouncement","read","ParentHome","_handleAppStateChange","nextAppState","appState","match","checkStudentAttendance","showQR","update_type","AppState","end","selected_student","day_difference","getDayDifference","goBackADay","goForwardADay","slideIn","onGoBack","MedicinePowderForm","藥粉","onCancelSelect","onFinishEdit","MedicineSyrupForm","藥水","MedicineCreamForm","藥膏","area","optionButtonWidth","optionButtonHeight","show_date_picker","show_editor","need_refrigeration","access_mode","iosSetTime","androidSetTime","medicine_type","medicine_data","sendRequest","onCreateRequestSuccess","deleteRequest","onDeleteRequestSuccess","getHeader","powder_amount","syrup_amount","cream_area","placeholderTextColor","deleteRequestConfirm","handleClickConfirmButton","MedicationRequestPage","tomorrow","SlideInLeft","total_height","total_width","left","top","day_of_week","selected_request_index","fetchMedicationRequest","initializePage","selectRequest","sequence","fetchAccessMode","new_request_index","deleted_request_id","updated_requests","SectionList","sections","keyExtractor","renderItem","section","renderSectionHeader","AbsenceExcuse","editing_other_option","max_date","cached_date","show_start_date_picker","show_end_date_picker","childIsSick","months","absence_time","setStartDate","setEndDate","setChildNotSick","setChildSick","sendAbsenceNote","iosSetStartDate","androidSetStartDate","checkUniqueStudentDate","iosSetEndDate","androidSetEndDate","abs","editAbsenceNote","option","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","editorOnBlur","textAlignVertical","dateContainer","AbsenceExcusePage","todays_date","fetchAbsenceExcuse","duplicateDateFound","selected_request","showsHorizontalScrollIndicator","PickupRequest","provided_times","hightlighted_colors","choose_other_option","setMinutes","minute","AddMedicationRequestPage","time_array","time_selected_index","medicated_timestamp","date_array","date_selected_index","switchRequest","handleDateSelected","handleTimeSelected","updated_date_array","updated_time_array","normalizedData","trim","timeIsEmpty","removeDate","removeTime","borderLeftWidth","onSelectSyrup","editSyrupAmountEntry","editSyrupRefrigerationEntry","editSyrupNoteEntry","removeSyrupEntry","blurOnSubmit","onSelectFeverSyrup","editFeverSyrupAmountEntry","editFeverSyrupRefrigerationEntry","removeFeverSyrupEntry","onClickConfirm","cancelEdit","AnnouncementPage","markRead","announcement_id","selected_announcement","photo_url_arr","WebBrowser","AnnouncementListPage","useState","setAnnouncements","page","setPage","endReached","setEndReached","useEffect","fetchAnnouncementByPage","overflow","ParentApp","ConfirmSignUp","confirmCode","confirmSignUp","getCurrentUser","caretHidden","fill","charAt","rounded","input","YellowBox","ignoreWarnings","AuthLoading","Font","currentAuthenticatedUser","awsCognitoAuth","identityPooId","region","userPoolId","userPoolWebClientId","Amplify","configure","cognito_auth","App","_cacheSplashResourcesAsync","gif","Asset","fromModule","downloadAsync","_cacheResourcesAsync","SplashScreen","hide","images","cacheImages","isAppReady","isSplashReady","preventAutoHide","defaultProps","allowFontScaling"],"mappings":"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","file":"static/js/app.4363c06a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/app-splash.0a3ec935.gif\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4UlEQVRo3u2YvUvDQBiHf++dGYuLoKJDB4sfuCnEDmprrX+0iikiqOAoOOioUKxLzeAHvTsXBZHY3CXvRcX7jcnl8jzJm+TNASEhISEhIZZJO/HKsBs3fM0/bDUX0k684nKMsB34uLe2RDCHUpvjdHdjmR2+GzekVD2CSdK99VXb48gWXih5BGD2fVPfkNipHZ5dscFrkwCYe990b6Tu1PYvLksLZMCDUyIDHi4SuSUUvUbPAF4yds2Q0UdlymkMPABo6AnFUkJPrY26kjoBUM/YXehO5MBbz0m2J+SU4IJ3EuCS4IR3FigrwQ1fSKCohA/4wgKuEr7gSwnYSmgyI1/wpQVyJQgDGGgA0z7gWQQs7gR8wbMJOEqw9lFsAh8SI6lPKLveYYAHkNjigndqp23yGplIGMhKrha3wMer0hBmxgybKtsAerkoOe95r8+B8ApvMADQ99GKswjkfmGF2FZKbgK49SVB3uA/txKt5oKUKgEw/ytaiSK9jS8JqgLepwRVBf9FosfV3Ikq4QFgsnd6owS1AdxxPNhUJfyP/NT7/BnhmDu3hGikxDfjSn9NJw/Or8eUk4AYSZ6lxfb6ohAi+ZNLixkSxAmfIRHZwjvH+/J6N264Lq+HhISEhPzvvAH4usfGrPqHIQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/icon-teacher-thumbnail.0693cca6.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVR42u1bbW7CMAx9TIhb7CKM/R87yI4y2BF2HWgvsgLHoPuTSihLGtv5aNP5SREsJHbixvZzYIBCoVAoFC5sAHwBuAHoK21XAEezFzaOFW/cbgeJAa5m8rbiU7x7OAlsDNarHaP7ePrvgU4NIJjzDqAjBJ4OwP5hXusY03g+bxLoy+Y7lMUM7cchz24Dzg99pwT6omOZbyJVoD0u9HdsMBatV2NAAhk+3+WejJ4oh6sveQwIbcA37sxkb7H6SC6wChjANcbu7z0y+4AOrnypvtF1pHCBxnrKuVFMX+os0FqL57pYlvWuCwbcreNJzrrWyEWExqK6K7jNjgjtjSLKYt4sfz2N6Ok9TFCqL5sBiparWg7PkAlKmVjI12PliJihxAB3z3tuFoAwn4/pfJnSN0P1PlVeK3yyxahwaDyE1JgqJ5a6Zw+CK4bRSsiZTRBcTBYIBUFuOcstb32xYnKCwq33OY3KIPsE+8jG0HLfAeqd4NRBkJq/Y+4AJbGiWBC8B8Y2Qga3Zcahaqo0btbQanAuMSD2uzpq/uZ+f9CmJmapr8So+ZvLEaLSYPLqSjBfGgOSGGC9IHdOfstMtWjLrP+lLpCbWUYfYeqRPAe4fujz6g2Q+oRSmWc2A/h+2TGFAWadBVx5OqavujTompeyr1g5fGHc7HQT1BIsSHjAB4BvAM+BcZ0ZO5anY/t2S6gGJz0hWg2qAfy4mdddxft7Na+in8sfsJx/mPiUGGBjjHCteOMXs/kNFAqFQqH4g1+9qDy6b2x6HAAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/app_logo.fee19d58.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-checked.83ee9de4.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-plus.e319f13c.png\";","const initial_state = {\n    class_id: '',\n    passcodeTeacherId: {},\n    teachers: {\n        /*\n        {teacher_id}: {\n            name: \"teacher_name\",\n            passcode: 33,\n            logged_in: false,\n            attendance_id: '',\n            in_time: '',\n            out_time: ''\n        }, {...}\n        */\n    },\n    students: {\n        /*\n        {student_id}: {\n            name: \"\",\n            profile_picture: \"\",\n            conversation_id; \"\",\n            blood_type: \"\",\n            address: \"\",\n            home_phone: \"\",\n            father_phone: \"\",\n            mother_phone: \"\"\n        }, {...}\n        */\n    },\n    isConnected: false,\n    errMessage: ''\n}\n\nexport default function classInfo(state = initial_state, action) {\n    const newState = { ...state }\n    switch (action.type) {\n        case 'SET_CONNECT_STATE': {\n            const { isConnected } = action\n            return {\n                ...state,\n                isConnected\n            }\n        }\n        case 'INITIALIZE_CLASS':\n            var teachers = {}, students = {}\n            action.teacher_objs.forEach(teacher => {\n                teachers[teacher[0]] = {\n                    name: teacher[1],\n                    passcode: teacher[2],\n                    logged_in: false,\n                    in_time: '',\n                    out_time: ''\n                }\n                state.passcodeTeacherId[teacher[2]] = teacher[0]\n            })\n            action.students.forEach(student => {\n                const { \n                    id,\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone, \n                    mother_phone, \n                    conversation_id } = student\n                students[id] = {\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone,\n                    mother_phone,\n                    conversation_id\n                }\n            })\n            \n            return {\n                ...state,\n                passcodeTeacherId: state.passcodeTeacherId,\n                teachers: teachers,\n                students: students\n            }\n        \n        case 'SET_CLASS_ID':\n            return {\n                ...state,\n                class_id: action.class_id\n            }\n    \n        case 'FETCH_ATTENDANCE_SUCCESS': {\n            const { data } = action\n            data.forEach(attendance_obj => {\n                const { attendance_id, teacher_id, in_time } = attendance_obj\n                newState.teachers[teacher_id] = {\n                    ...state.teachers[teacher_id],\n                    logged_in: true,\n                    attendance_id,\n                    in_time\n                }\n            })\n\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_IN':{\n            const { teacher_id, time, attendance_id } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: true,\n                in_time: time,\n                attendance_id\n            }\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_OUT':{\n            const { teacher_id, time } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: false,\n                out_time: time,\n                attendance_id: ''\n            }\n            return newState\n        }\n\n        case 'MARK_STAFF_ATTENDANCE_FAIL':\n            const {errMessage} = action\n            return {\n                errMessage\n            }\n        \n        case 'CLEAR_STATE':\n            return {\n                class_id: '',\n                passcodeTeacherId: {},\n                teachers: {},\n                students: {},\n                isConnected: false,\n                errMessage: ''\n            }\n        \n        default:\n            return state\n    }\n\n}","var initial_state = {\n    initialized: false,\n    present: new Set(),// student_A_id\n    absent: new Set(), // student_B_id\n    unmarked: new Set(),\n    attendance: {\n        /*\n        {student_A_id}: {\n            present: true,\n            in_time: [Date],\n            out_time: [Date]\n        },\n        {student_B_id}: {\n            present: false,\n            excuse_type: \"fever\"\n        }\n        */\n    }\n}\n\nexport default function attendance(state = initial_state, action) {\n    switch (action.type) {\n        // case 'INITIALIZE_CLASS':\n        //     var attendance = {}\n        //     var unmarked = new Set()\n        //     action.students.forEach(student => {\n        //         const { id } = student\n        //         unmarked.add(id)\n        //         attendance[id] = {\n        //             present: false\n        //         }\n        //     })\n        //     return {\n        //         ...state,\n        //         initialized: true,\n        //         unmarked: unmarked,\n        //         attendance: attendance\n        //     }\n\n        // case 'MARK_PRESENT':\n        //     // student_id, in_time\n        //     state.unmarked.delete(action.student_id)\n        //     return {\n        //         ...state,\n        //         present: new Set([...state.present, action.student_id]),\n        //         unmarked: state.unmarked,\n        //         attendance: {\n        //             ...state.attendance,\n        //             [action.student_id]: {\n        //                 present: true,\n        //                 in_time: action.in_time\n        //             }\n        //         }\n        //     }\n        \n        case 'MAKR_DISMISS':\n            return {\n                ...state,\n                attendance: {\n                    ...state.attendance,\n                    [action.student_id]: {\n                        ...state.attendance[action.student_id],\n                        present: false,\n                        out_time: action.out_time\n                    }\n                }\n            }\n        \n        case 'MARK_ABSENT':\n            // student_id, excuse_type\n            state.unmarked.delete(action.student_id)\n            return {\n                ...state,\n                absent: new Set([...state.absent, action.student_id]),\n                unmarked: state.unmarked,\n                attendance: {\n                    ...state.attendance,\n                    [action.student_id]: {\n                        ...state.attendance[action.student_id],\n                        excuse_type: action.excuse_type\n                    }\n                }\n            }\n    \n        case 'CLEAR_STATE':\n            return {\n                initialized: false,\n                present: new Set(),\n                absent: new Set(),\n                unmarked: new Set(),\n                attendance: {}\n            }\n        default:\n            return state\n    }\n}","var initialState = {\n    loaded: false,\n    fruit_name: '水果',\n    ratings: {\n        /*\n        {student_id}: { \n            Breakfast: 'Awesome0'\n            Fruit: '0'\n            Lunch: 'Good1',\n            Snack: 'Ok1',\n            teacher_id: ''\n        }, {...}\n        */\n    },\n    updatedStudents: new Set(),\n    err_message: ''\n}\n\nexport default function appetite(state = initialState, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS': {\n            var ratings = {}\n            action.students.forEach(student => {\n                const { id } = student\n                ratings[id] = {\n                    Breakfast: '0',\n                    Fruit: '0',\n                    Lunch: '0',\n                    Snack: '0',\n                    teacher_id: ''\n                }\n            })\n\n            return {\n                ...state,\n                ratings\n            }\n        }\n        case 'FETCH_CLASS_APPETITE_DATA': {\n            const { fruit_name, ratings } = action\n            return {\n                ...state,\n                fruit_name,\n                ratings: {\n                    ...state.ratings,\n                    ...ratings\n                }\n            }\n        }\n\n        case 'EDIT_FRUIT_NAME': {\n            const { fruit_name } = action\n            return {\n                ...state,\n                fruit_name,\n                // loaded: false\n            }\n        }\n\n        case 'RATE_APPETITE':{\n            const { student_id, mealType, rating, teacher_id } = action\n            var { updatedStudents } = state\n            const water_drank = state.ratings[student_id][mealType].slice(-1)\n            if (rating !== '') {\n                updatedStudents = new Set([...state.updatedStudents, student_id])\n            }\n            return {\n                ...state,\n                ratings: {\n                    ...state.ratings,\n                    [student_id]: {\n                        ...state.ratings[student_id],\n                        [mealType]: rating + water_drank,\n                        teacher_id\n                    }\n                },\n                updatedStudents\n            }\n        }\n        \n        case 'CLEAR_RATINGS': {\n            const { meal_type } = action\n            const newState = { ...state }\n            const student_id_array = Object.keys(state.ratings)\n            const updatedStudents = new Set()\n            for (var i = 0; i < student_id_array.length; i++) {\n                const student_id = student_id_array[i]\n                if (state.ratings[student_id][meal_type] !== '0') {\n                    updatedStudents.add(student_id)\n                }\n                newState.ratings[student_id] = {\n                    ...state.ratings[student_id],\n                    [meal_type]: '0'\n                }\n            }\n            newState.updatedStudents = updatedStudents\n\n            return newState\n        }\n        case 'SET_ALL_RATINGS_TO_GREAT':{\n            var newRatingObj = {}\n            var student_id_array = []\n            Object.keys(state.ratings).map((student_id) => {\n                student_id_array.push(student_id)\n                const water_drank = state.ratings[student_id][action.mealType].slice(-1) === '1'\n                newRatingObj[student_id] = {\n                    ...state.ratings[student_id],\n                    [action.mealType]: water_drank ? 'Awesome1' : 'Awesome0',\n                    teacher_id: action.teacher_id\n                }\n            })\n            return {\n                ...state,\n                ratings: newRatingObj,\n                updatedStudents: new Set(student_id_array)\n            }\n        }\n        \n        case 'MARK_WATER_DRANK': {\n            const { student_id, meal_type, teacher_id } = action\n            const updatedStudents = new Set([...state.updatedStudents, student_id])\n            const rating = state.ratings[student_id][meal_type]\n            const water_drank = rating.slice(-1) === '1'\n            return {\n                ...state,\n                ratings: {\n                    ...state.ratings,\n                    [student_id]: {\n                        ...state.ratings[student_id],\n                        [meal_type]: water_drank ? rating.slice(0, -1) + '0' : rating.slice(0, -1) + '1',\n                        teacher_id\n                    }\n                },\n                updatedStudents\n            }\n        }\n        case 'CLEAR_UPDATED_STUDENTS':{\n            return {\n                ...state,\n                updatedStudents: new Set()\n            }\n        }\n        case 'ON_SEND_APPETITE_SUCCESS':{\n            return {\n                ...state,\n                updatedStudents: new Set()\n            }\n        }    \n        case 'ALERT_ERR_MESSAGE': {\n            const { err_message } = action\n            return {\n                ...state,\n                err_message\n            }\n        }\n            \n        case 'CLEAR_ERR_MESSAGE': {\n            return {\n                ...state,\n                err_message: ''\n            }\n        }\n            \n        case 'ADD_STUDENT_ID_FOR_UPDATE': {\n            const { student_id_array } = action\n            return {\n                ...state,\n                updatedStudents: new Set([...state.updatedStudents, ...student_id_array])\n            }\n        }\n        \n        case 'CLEAR_STATE': {\n            return {\n                loaded: false,\n                fruit_name: '水果',\n                ratings: {},\n                updatedStudents: new Set(),\n                err_message: ''\n            }\n        }\n        default:\n            return state\n    }\n}","var initial_state = {\n    by_student_id: {\n        /*\n        {student_id}: [{record_id}, {...}]\n        */\n    },\n    records: {\n        by_id: {\n            // { record_id }: {\n            //     student_id: '',\n            //     sleep_time: '',\n            //     wake_time: '',\n            //     teacher_id: ''\n            // }\n        },\n        all_id: new Set()\n    },\n    errorMessage: '',\n    newDataForCreate: new Set(),\n    oldDataForEdit: new Set(),\n    records_with_error: new Set()\n}\n\nexport default function sleep(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS':\n            by_student_id = {}\n            action.students.forEach(student => {\n                const { id } = student\n                by_student_id[id] = []\n            })\n            return {\n                ...state,\n                by_student_id\n            }\n\n        case 'FETCH_CLASS_SLEEP_DATA': {\n            const { by_student_id, records } = action.sleepData\n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    by_id: {\n                        ...state.records.by_id,\n                        ...records.by_id\n                    },\n                    all_id: new Set([\n                        ...state.records.all_id,\n                        ...records.all_id\n                    ])\n                }\n            }\n        }\n\n        case 'SET_SLEEP_TIME': {\n            const newState = { ...state }\n            const { student_id, index, sleep_time, teacher_id } = action\n            const record_id_array = newState.by_student_id[student_id]\n            const record_id = record_id_array[index]\n            const records = newState.records.by_id\n            sleep_time.setSeconds(0, 0)\n            if (index !== null) { // if index is specified, we change data\n                if (index > 0 && sleep_time <= records[record_id_array[index - 1]].sleep_time) {\n                    const record_id_array = newState.by_student_id[student_id]\n                    const removed = record_id_array.splice(index, 1)\n                    let found = 0\n                    for(var i = 0; i < record_id_array.length-1; i++) {\n                        if (records[record_id_array[i]].sleep_time > sleep_time) {\n                            found = i // index of record\n                            break\n                        }\n                    }\n                    record_id_array.splice(found, 0, removed[0])\n                    newState.by_student_id[student_id] = record_id_array\n                }\n\n                newState.records.by_id[record_id].sleep_time = sleep_time\n                newState.records.by_id[record_id].teacher_id = teacher_id\n                \n                if (!newState.newDataForCreate.has(record_id)) {\n                    newState.oldDataForEdit.add(record_id)\n                }\n            } else { // if index not specified, we push new data\n                // const record_length = record_id_array.length\n                const new_record_id = newState.records.all_id.size\n\n                // if (record_length > 0 && sleep_time <= records[record_id_array[record_length - 1]].wake_time) {\n                //     //if sleep_time <= wake time of last record\n                //     // WARNING!!!!\n                //     newState.records_with_error = new Set([...state.records_with_error, new_record_id, record_length - 1])\n                // } \n                    newState.by_student_id[student_id].push(new_record_id)\n                    newState.records.by_id[new_record_id] = {\n                        student_id,\n                        sleep_time,\n                        wake_time: null,\n                        teacher_id\n                    }\n                    newState.records.all_id.add(new_record_id)\n                    newState.errorMessage = ''\n                    newState.newDataForCreate.add(new_record_id)\n                // }\n\n            }\n            return newState\n        }\n\n        case 'SET_WAKE_TIME': {\n            const newState = { ...state }\n            const { student_id, index, wake_time, teacher_id } = action\n            const record_id = newState.by_student_id[student_id][index]\n            // const next_record_id = index + 1 < newState.by_student_id[student_id].length ?\n            //     newState.by_student_id[student_id][index + 1]\n            //     : -1\n            // const records = newState.records.by_id\n            wake_time.setSeconds(0,0)\n\n            newState.records.by_id[record_id].wake_time = wake_time\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            newState.errorMessage = ''\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            return newState\n        }\n            \n        case 'REMOVE_WAKE_TIME': {\n            const { record_id, teacher_id } = action\n            const newState = { ...state }\n            const records_with_error = new Set([...state.records_with_error])\n            records_with_error.delete(record_id)\n            newState.records_with_error = records_with_error\n            newState.records.by_id[record_id].wake_time = null\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n            return newState\n        }\n        \n        case 'CREATE_SLEEP_RECORD_SUCCESS': {\n            return {\n                ...state,\n                newDataForCreate: new Set()\n            }\n        }\n\n        case 'CREATE_SLEEP_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errMessage\n            }\n        }\n\n        case 'EDIT_SLEEP_RECORD_SUCCESS': {\n            return {\n                ...state,\n                oldDataForEdit: new Set()\n            }\n        }\n\n        case 'EDIT_SLEEP_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errMessage\n            }\n        }\n\n        case 'REMOVE_RECORD_SUCCESS': {\n            const { record_id, student_id } = action\n            const student_record_ids = state.by_student_id[student_id]\n            const removing_index = student_record_ids.findIndex(element => element === record_id)\n\n            const newDataForCreate = new Set([...state.newDataForCreate])\n            newDataForCreate.delete(record_id)\n\n            const oldDataForEdit = new Set([...state.oldDataForEdit])\n            oldDataForEdit.delete(record_id)\n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    [student_id]: [\n                        ...student_record_ids.slice(0, removing_index),\n                        ...student_record_ids.slice(removing_index+1)\n                    ]\n                },\n                newDataForCreate,\n                oldDataForEdit\n            }\n        }\n\n        case 'REMOVE_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errorMessage\n            }\n        }\n\n        case 'MARK_RECORD_ERROR': {\n            const { record_id_array } = action\n            return {\n                ...state,\n                records_with_error: new Set([...state.records_with_error, ...record_id_array])\n\n            }\n        }\n\n        case 'MARK_RECORD_CORRECT': {\n            const { record_id } = action\n            let records_with_error = new Set([...state.records_with_error])\n            records_with_error.delete(record_id)\n            return {\n                ...state,\n                records_with_error\n            }\n        }\n            \n        case 'ALERT_SLEEPLOG_ERROR_MESSAGE': {\n            const {err_message} = action\n            return {\n                ...state,\n                errorMessage: err_message\n            }\n        }\n            \n        case 'CLEAR_SLEEPLOG_ERROR_MESSAGE': {\n            return {\n                ...state,\n                errorMessage: ''\n            }\n        }\n\n        case 'CLEAR_STATE':\n            return {\n                by_student_id: {},\n                records: {\n                    by_id: {},\n                    all_id: new Set()\n                },\n                errorMessage: '',\n                newDataForCreate: new Set(),\n                oldDataForEdit: new Set(),\n                records_with_error: new Set()\n            }\n        \n        default:\n            return state \n    }\n}","var initial_state = {\n    // loaded: false,\n    by_student_id: {\n        /*\n        {student_id}: [{record_id}, {record_id}...]\n        */\n    },\n    records: {\n        // { record_id }: {\n        //     student_id\n        //     temperature: {INT_TYPE},\n        //     status: '',\n        //     time: '',\n        //     teacher_id: ''\n        // }, {...}\n    },\n    record_id_for_update: new Set(),\n    // record_id_for_edit: new Set()\n    errMessage: '',\n    records_with_error: new Set()\n}\n\nexport default function healthstatus(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_STUDENT_WELLNESS': {\n            var by_student_id = {}\n            var records = {}\n            var len = 0\n            action.students.forEach(student_id => {\n                // const { id } = student\n                by_student_id[student_id] = [len, len+1]\n\n                records[len] = {\n                    temperature: '',\n                    status: '健康寶寶',\n                    time: null,\n                    teacher_id: ''\n                }\n\n                records[len+1] = {\n                    temperature: '',\n                    status: '健康寶寶',\n                    time: null,\n                    teacher_id: ''\n                }\n\n                len+=2\n            })\n\n            return {\n                ...state,\n                by_student_id,\n                records\n            }\n        }\n\n        case 'FETCH_CLASS_WELLNESS_DATA': {\n            const { by_student_id, records } = action.wellnessData\n            const student_id_list = Object.keys(by_student_id)\n            for (var i = 0; i < student_id_list.length; i++){\n                const student_id = student_id_list[i]\n                let record_id_list = by_student_id[student_id]\n                if (record_id_list.length === 1) {\n                    record_id_list.push(state.by_student_id[student_id][1])\n                    by_student_id[student_id] = record_id_list\n                }\n            }\n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    ...state.records,\n                    ...records\n                },\n                // record_id_for_update: new Set()\n            }\n        }\n\n        case 'ADD_RECORD': {\n            const {by_student_id, records} = state\n            const { student_id } = action\n            const new_id = Object.keys(state.records).length\n            return {\n                ...state,\n                by_student_id: {\n                    ...by_student_id,\n                    [student_id]: [...by_student_id[student_id], new_id]\n                },\n                records: {\n                    ...records,\n                    [new_id]: {\n                        temperature: '',\n                        status: '健康寶寶',\n                        time: null,\n                        teacher_id: ''\n                    }\n                }\n            }\n        }\n\n        case 'ADD_HEALTH_STATUS': {\n            const { student_id, record_id, status, teacher_id } = action\n            const record_id_for_update = new Set([...state.record_id_for_update, record_id])\n            const records = {\n                ...state.records,\n                [record_id]: {\n                    ...state.records[record_id],\n                    student_id,\n                    status,\n                    time: new Date(),\n                    teacher_id\n                }\n            }\n            return {\n                ...state,\n                records,\n                record_id_for_update\n            }\n        }\n        case 'ADD_TEMPERATURE': {\n            const { student_id, record_id, temperature, teacher_id } = action\n            const record_id_for_update = new Set([...state.record_id_for_update, record_id])\n            const records = {\n                ...state.records,\n                [record_id]: {\n                    ...state.records[record_id],\n                    student_id,\n                    temperature,\n                    time: new Date(),\n                    teacher_id\n                }\n            }\n            return {\n                ...state,\n                records,\n                record_id_for_update\n            }\n        }\n            \n        case 'INVALIDATE_WELLNESS_DATA': {\n            const { record_id, errMessage } = action\n            return {\n                ...state,\n                //TODO how do we efficiently match each errmessage to the wellness_form that contains the error\n                records_with_error: new Set([...state.records_with_error, record_id])\n            }\n        }\n            \n        case 'SEND_WELLNESS_DATA_SUCCESS': {\n            return {\n                ...state,\n                record_id_for_update: new Set()\n            }\n        }\n            \n        case 'SEND_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n\n        case 'CLEAR_STATE': {\n            return {\n                by_student_id: {},\n                records: {},\n                record_id_for_update: new Set(),\n                errMessage: '',\n                records_with_error: new Set()\n            }\n        }\n        \n        default:\n            return state\n    }\n}","var initial_state = {\n    /* TODO: flatten the structure like sleep record for better separation of post and put (?)\n            -why separate post and put instead of upsert in lambda?\n            -possible conflict: if using student_id/date/time as uniqueness delimeter,\n                                edited records with a new time set gets INSERTed into database\n            -solution: fetched data doesn't get added into newDataForCreate set\n            -problem#2: how do we treat initial rendering of page; will each student gets a placeholding, empty record\n    */\n    loaded: false,\n    by_student_id: {\n        // {student_id}: [{record_id}, {...}]\n    },\n    records: {\n        by_id: {\n            /*{ record_id }: {\n                student_id,\n                time,\n                amount,\n                teacher_id\n            }*/\n        },\n        all_id: new Set()\n    },\n    // pendingUpdates: new Set(),\n    newDataForCreate: new Set(),\n    oldDataForEdit: new Set(),\n    dataForRemoval: new Set(),\n    errMessage: ''\n}\n\nexport default function milk(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS': {\n            var by_student_id = {}\n            action.students.forEach(student => {\n                const { id } = student\n                by_student_id[id] = []\n            })\n            // initial_state = {\n            //     ...state,\n            //     by_student_id\n            // }\n            return {\n                ...state,\n                by_student_id\n            }\n        }\n        \n        case 'FETCH_CLASS_MILK_DATA': {\n            const { by_student_id, records } = action.milkData\n            \n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    by_id: {\n                        ...state.records.by_id,\n                        ...records.by_id\n                    },\n                    all_id: new Set([\n                        ...state.records.all_id,\n                        ...records.all_id\n                    ])\n                }\n            }\n        }\n\n        case 'FETCH_CLASS_MILK_DATA_SUCCESS': {\n\n        } \n\n        case 'ADD_MILK_RECORD': {\n            const newState = { ...state }\n            const { student_id } = action\n            const record_id = state.newDataForCreate.size\n            newState.records.by_id[record_id] = {\n                student_id,\n                time: new Date,\n                amount: '',\n                teacher_id: ''\n            }\n            newState.by_student_id[student_id].push(record_id)\n            newState.newDataForCreate.add(record_id)\n            return newState\n        }\n\n        case 'EDIT_MILK_AMOUNT': {\n            const newState = { ...state }\n            const { record_id, milk_amount, teacher_id } = action\n            newState.records.by_id[record_id].amount = milk_amount\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n            return newState\n        }\n\n        case 'EDIT_MILK_TIME': {\n            const newState = { ...state }\n            const { record_id, date_time, teacher_id } = action\n            newState.records.by_id[record_id].time = date_time\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n            return newState\n        }\n            \n        case 'CREATE_DATA_SUCCESS': {\n            return {\n                ...state,\n                newDataForCreate: new Set()\n            }\n        }\n            \n        case 'CREATE_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n            \n        case 'EDIT_DATA_SUCCESS': {\n            return {\n                ...state,\n                oldDataForEdit: new Set()\n            }\n        }\n            \n        case 'EDIT_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n\n        case 'REMOVE_RECORD': {\n            const { student_id, record_id } = action\n            const newState = { ...state }\n            let record_id_index = state.by_student_id[student_id].indexOf(record_id)\n            if (record_id_index > -1) {\n                newState.by_student_id[student_id].splice(record_id_index, 1)\n            }\n\n            if (newState.oldDataForEdit.has(record_id)) {\n                newState.oldDataForEdit.delete(record_id)\n            }\n\n            if (newState.newDataForCreate.has(record_id)) {\n                newState.newDataForCreate.delete(record_id)\n            } else {\n                newState.dataForRemoval.add(record_id)\n            }\n\n            return newState\n        }\n            \n        case 'REMOVE_MILK_RECORD_SUCCESS':\n            return {\n                ...state,\n                dataForRemoval: new Set()\n            }\n        \n        case 'REMOVE_MILK_RECORD_FAIL':\n            return {\n                ...state,\n                errMessage: 'Error occured while removing milk record, please try again'\n            }\n        \n        case 'CLEAR_STATE':\n            return {\n                loaded: false,\n                by_student_id: {},\n                records: {\n                    by_id: {},\n                    all_id: new Set()\n                },\n                newDataForCreate: new Set(),\n                oldDataForEdit: new Set(),\n                dataForRemoval: new Set(),\n                errMessage: ''\n            }\n\n        default:\n            return state\n    }\n}","var initial_state = {\n  by_student_id: {\n    /*\n    {student_id}: {\n      amount: 16,\n      records: [{record_id}, {...}]\n    }\n    */\n  },\n  records: {\n    by_id: {\n      /*\n      {record_id}: {\n        student_id,\n        time: {Datetime},\n        cloth_diaper: true/false,\n        pee_or_poo: {小便/大便},\n        poo_condition: {varchar(4)}\n        teacher_id\n      }\n      */\n    },\n    all_id: []\n  },\n  all_dispatched: true,\n  students_pending_amount_update: new Set(),\n  data_to_update: [],\n  new_data_for_create: new Set(),\n  old_data_for_edit: new Set(),\n  err_message: ''\n}\n\nexport default function diaper(state = initial_state, action) {\n  switch (action.type) {\n    case 'INITIALIZE_CLASS': {\n      by_student_id = {}\n      action.students.forEach(student => {\n        const { id } = student\n        by_student_id[id] = {\n          amount: '',\n          records: []\n        }\n      })\n      // initial_state = {\n      //   ...state,\n      //   by_student_id\n      // }\n      return {\n        ...state,\n        by_student_id\n      }\n    }\n    case 'FETCH_CLASS_DIAPER_DATA': { // TODO: fix bug\n      return {\n        ...state,\n        ...action.diaperData\n      }\n    }\n    case 'ADD_DIAPER_RECORD': {\n      const { student_id, time, cloth_diaper, teacher_id } = action\n      const newState = { ...state }\n      const id = newState.records.all_id.length\n      newState.by_student_id[student_id].records.push(id)\n      if (!cloth_diaper) {\n        newState.by_student_id[student_id].amount -= 1\n        newState.students_pending_amount_update.add(student_id)\n      }\n\n      newState.records.by_id[id] = {\n        student_id,\n        time,\n        cloth_diaper,\n        pee_or_poo: '小便',\n        poo_condition: '正常',\n        teacher_id\n      }\n      newState.records.all_id.push(id)\n      newState.all_dispatched = false\n      newState.new_data_for_create.add(id)\n      return newState\n    }\n      \n    case 'EDIT_DIAPER_TIME': {\n      const { record_id, time, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n      newState.records.by_id[record_id].time = time\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n      return newState\n    }\n    \n    case 'SWITCH_PEE_OR_POO': {\n      const { record_id, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n      const current_pee_or_poo = newState.records.by_id[record_id].pee_or_poo\n      newState.records.by_id[record_id].pee_or_poo = current_pee_or_poo === '小便' ? '大便' : '小便'\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (current_pee_or_poo === '小便') {\n        newState.records.by_id[record_id].poo_condition = '正常'\n      }\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n      return newState\n    }\n\n    case 'EDIT_POO_CONDITION': {\n      const { record_id, condition, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n\n      console.log('EDIT_POO_CONDITION: ', record_id, condition, teacher_id)\n      newState.records.by_id[record_id].poo_condition = condition\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n      return newState\n    }\n      \n    case 'REMOVE_DIAPER_RECORD_SUCCESS': {\n      const { student_id, record_id } = action\n      const newState = { ...state }\n      const new_records = []\n      \n      const records = state.by_student_id[student_id].records\n      if(!state.records.by_id[record_id].cloth_diaper) {\n        newState.by_student_id[student_id].amount += 1\n      }\n\n      for (var i = 0; i < records.length; i++){\n        if (records[i] !== record_id) {\n          new_records.push(records[i])\n        }\n      }\n      newState.by_student_id[student_id].records = new_records\n\n      const new_data_for_create = new Set([...state.new_data_for_create])\n      new_data_for_create.delete(record_id)\n      newState.new_data_for_create = new_data_for_create\n\n      const old_data_for_edit = new Set([...state.old_data_for_edit])\n      old_data_for_edit.delete(record_id)\n      newState.old_data_for_edit = old_data_for_edit\n\n      return newState\n    }\n    \n    case 'REMOVE_DIAPER_RECORD_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    case 'UPDATE_DIAPER_AMOUNT': {\n      const { student_id, amount } = action\n      const students_pending_amount_update = new Set([...state.students_pending_amount_update, student_id])\n      return {\n        ...state,\n        by_student_id: {\n          ...state.by_student_id,\n          [student_id]: {\n            ...state.by_student_id[student_id],\n            amount\n          }\n        },\n        students_pending_amount_update\n      }\n    }\n    \n    case 'CREATE_DIAPER_RECORD_SUCCESS': {\n      return {\n        ...state,\n        new_data_for_create: new Set(),\n        old_data_for_edit: new Set()\n      }\n    }\n      \n    case 'CREATE_DIAPER_RECORD_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    case 'EDIT_DIAPER_RECORD_SUCCESS': {\n      return {\n        ...state,\n        old_data_for_edit: new Set()\n      }\n    }\n\n    case 'EDIT_DIAPER_RECORD_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    case 'EDIT_DIAPER_AMOUNT_SUCCESS': {\n      return {\n        ...state,\n        students_pending_amount_update: new Set()\n      }\n    }\n      \n    case 'EDIT_DIAPER_AMOUNT_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n      \n    case 'CLEAR_ERR_MESSAGE': {\n      return {\n        ...state,\n        err_message: ''\n      }\n    }\n      \n    case 'CLEAR_STATE': {\n      return {\n        by_student_id: {},\n        records: {\n          by_id: {},\n          all_id: []\n        },\n        all_dispatched: true,\n        students_pending_amount_update: new Set(),\n        data_to_update: [],\n        new_data_for_create: new Set(),\n        old_data_for_edit: new Set(),\n        err_message: ''\n      }\n    }\n\n    default:\n      return state\n  }\n}","const initial_state = {\n  // TODO: parents can only write one response per message\n  // TODO: how do we incorporate reminders for things to bring\n  message_by_student_id: {\n    // { student_id }: {\n    //   text: '',\n    //   things_to_bring: [0,0,1,1,0,0,0],\n    //   other_item: ''\n    //   activities: [1,1,0,0,0,0,1],\n    //   other_activity: '',\n    //   teacher_id: ''\n    // }\n  },\n  student_id_for_update: new Set()\n}\n\nexport default function message(state = initial_state, action) {\n  switch (action.type) {\n    case 'INITIALIZE_CLASS': {\n      const message_by_student_id = {}\n      action.students.forEach(student => {\n        const { id } = student\n        message_by_student_id[id] = {\n          text: '',\n          things_to_bring: [0, 0, 0, 0, 0],\n          other_item: '其它',\n          activities: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n          other_activity: '其它',\n          teacher_id: ''\n        }\n      })\n      return {\n        ...state,\n        message_by_student_id\n      }\n    }\n      \n    case 'FETCH_CLASS_MESSAGE_DATA': {\n      const { message_data } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          ...message_data\n        }\n      }\n    }\n\n    case 'WRITE_TO_ALL': {\n      const { text, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].text = text\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n\n      return {\n        ...state,\n        ...message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'WRITE_TO_ONE': {\n      const { text, student_id, teacher_id } = action\n      const student_id_for_update = new Set([...state.student_id_for_update, student_id])\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            text,\n            teacher_id\n          }\n        },\n        student_id_for_update\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ALL': {\n      const { items_to_bring_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].things_to_bring = items_to_bring_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ONE': {\n      const { student_id, things_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].things_to_bring = things_to_bring\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ALL': {\n      const { item_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_item = item_to_bring === '' ? '其它' : item_to_bring\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ONE': {\n      const { student_id, item_to_bring, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_item: item_to_bring,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ALL': {\n      const { new_acitivities_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].activities = new_acitivities_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ONE': {\n      const { student_id, activities, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].activities = activities\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ALL': {\n      const { activity, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_activity = activity === '' ? '其它' : activity\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ONE': {\n      const { student_id, activity, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_activity: activity,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n\n    case 'SEND_MESSAGE_ON_SUCCESS': {\n      return {\n        ...state,\n        student_id_for_update: new Set()\n      }\n    }\n\n    case 'CLEAR_STATE': {\n      return {\n        message_by_student_id: {},\n        student_id_for_update: new Set()\n      }\n    }\n\n    default:\n      return state\n  }\n}","const initial_state = {\n  isConnected: true,\n  classes: {\n    /*\n    [id]: {\n      teachers: [],\n      students: [],\n      name: ''\n    }\n    */\n  },\n  pick_up_request: [],\n  admin_passcode: '',\n  viewing_status: '',\n  passcodeAdminId: {},\n  passcodeTeacherId: {},\n  teacherOnDuty: '',\n  teachers: {\n      /*\n      [id]: {\n          name: '',\n          profile_picture: '',\n          passcode: 33,\n          present: false,\n          attendance: [attendance_id, ...]\n      }, {...}\n      */\n  },\n  students: {\n      /*\n      [id]: {\n          name: '',\n          profile_picture: '',\n          present: true,\n          wellness_id: '',\n          address: '',\n          father_phone: '',\n          mother_phone: '',\n          attendance_id: ''\n      }, {...}\n      */\n  },\n  attendance: {\n    /*\n    [id]: {\n      in_time: '',\n      out_time: '',\n      excuse_type: ''\n    }\n    */\n  },\n  student_present: new Set(),\n  student_absent: new Set(),\n  student_unmarked: new Set(),\n  teacher_present: new Set(),\n  teacher_absent: new Set(),\n  teacher_unmarked: new Set()\n}\n\nexport default function school(state = initial_state, action) {\n  switch (action.type) {\n    case 'SET_CONNECT_STATE': {\n      const { isConnected } = action\n      return {\n          ...state,\n          isConnected\n      }\n    }\n    case 'FETCH_CLASSES_SUCCESS':\n      const { classes, admin_passcode } = action\n      return {\n        ...state,\n        classes,\n        admin_passcode\n      }\n    \n    case 'FETCH_TEACHERS_SUCCESS': {\n      const { admins, teachers, classes } = action\n      const updated_classes = {...state.classes}\n      const {passcodeAdminId, passcodeTeacherId} = state\n\n      Object.keys(classes).forEach(class_id => {\n        updated_classes[class_id].teachers = classes[class_id].teachers\n      })\n\n      Object.keys(admins).forEach(admin_id => {\n        passcodeAdminId[admins[admin_id].passcode] = admin_id\n      })\n\n      Object.keys(teachers).forEach(teacher_id => {\n        passcodeTeacherId[teachers[teacher_id].passcode] = teacher_id\n      })\n\n      return {\n        ...state,\n        passcodeAdminId,\n        passcodeTeacherId,\n        // admins,\n        teachers: {\n          ...teachers,\n          ...admins\n        },\n        classes: updated_classes,\n        teacher_unmarked: new Set(Object.keys(teachers))\n      }\n    }\n\n    case 'FETCH_STUDENTS_SUCCESS': {\n      const { students, classes } = action\n      const updated_classes = {...state.classes}\n\n      Object.keys(classes).forEach(class_id => {\n        updated_classes[class_id].students = classes[class_id].students\n      })\n      \n      return {\n        ...state,\n        students,\n        classes: updated_classes,\n        student_unmarked: new Set(Object.keys(students))\n      }\n    }\n\n    case 'FETCH_TEACHER_ATTENDANCE_SUCCESS': {\n      const { attendance, teachers } = action\n      const updated_teachers = {...state.teachers}\n      const teacher_unmarked = new Set(Object.keys(state.teachers))\n      const teacher_present = new Set()\n      const teacher_absent = new Set()\n      Object.keys(teachers).forEach(teacher_id => {\n        updated_teachers[teacher_id].attendance = teachers[teacher_id].attendance_array\n        updated_teachers[teacher_id].present = teachers[teacher_id].present\n        updated_teachers[teacher_id].total_minutes = teachers[teacher_id].total_minutes\n        if (teachers[teacher_id].present) {\n          teacher_present.add(teacher_id)\n        } else {\n          teacher_absent.add(teacher_id)\n        }\n        teacher_unmarked.delete(teacher_id)\n      })\n      return {\n        ...state,\n        teachers: updated_teachers,\n        attendance: {\n          ...state.attendance,\n          ...attendance\n        },\n        teacher_present,\n        teacher_absent,\n        teacher_unmarked\n      }\n    }\n\n    case 'FETCH_STUDENT_ATTENDANCE_SUCCESS': {\n      const { attendance, students, present, absent } = action\n      const updated_students = {...state.students}\n      const student_unmarked = new Set(Object.keys(state.students))\n      Object.keys(students).forEach(student_id => {\n        updated_students[student_id].attendance_id = students[student_id]\n\n        if (present.includes(student_id) || absent.includes(student_id)) {\n          student_unmarked.delete(student_id)\n        }\n      })\n      return {\n        ...state,\n        students: updated_students,\n        attendance: {\n          ...state.attendance,\n          ...attendance\n        },\n        student_present: new Set([...present]),\n        student_absent: new Set([...absent]),\n        student_unmarked\n      }\n    }\n\n    case 'EDIT_TEACHER_ON_DUTY': {\n      const {teacher_id} = action\n      return {\n        ...state,\n        teacherOnDuty: teacher_id\n      }\n    }\n    \n    case 'ADD_PICKUP_REQUEST': {\n      const { requests } = action\n      return {\n        ...state,\n        pick_up_request: requests\n      }\n    }\n\n    case 'UPDATE_VIEWING_STATUS': {\n      const { status } = action\n      return {\n        ...state,\n        viewing_status: status\n      }\n    }\n\n    case 'UPDATE_PROFILE_PICTURE': {\n      const { student_id, uri } = action\n      const students = {...state.students}\n      students[student_id].profile_picture = uri\n      return {\n        ...state,\n        students\n      }\n    }\n\n    case 'EDIT_STUDENT_SUCCESS': {\n      const { student_id, name, old_class_id, new_class_id } = action\n      const students = {...state.students}\n      const classes = {...state.classes}\n      students[student_id].name = name\n      students[student_id].class_id = new_class_id\n\n      // remove student id from old class[id].students\n      let student_id_array = classes[old_class_id].students\n      let new_student_id_array = []\n      for(var i = 0; i < student_id_array.length; i++) {\n        if (student_id_array[i] !== student_id) {\n          new_student_id_array.push(student_id)\n        }\n      }\n      classes[old_class_id].students = new_student_id_array\n\n      // add student id to new class[id].students\n      student_id_array = classes[new_class_id].students\n      student_id_array.push(student_id)\n      classes[new_class_id].students = student_id_array\n\n      return {\n        ...state,\n        students,\n        classes\n      }\n    }\n\n    case 'UPDATE_TEACHER_PROFILE_PICTURE': {\n      const { teacher_id, image_url } = action\n      const teachers = {...state.teachers}\n      teachers[teacher_id].profile_picture = image_url\n      return {\n        ...state,\n        teachers\n      }\n    }\n\n    case 'CLEAR_STATE': {\n      return {\n        ...state,\n        viewing_status: ''\n      }\n    }\n  \n    case 'CLEAR_SCHOOL_STATE': {\n      return {\n        isConnected: false,\n        classes: {},\n        pick_up_request: [],\n        passcodeAdminId: {},\n        passcodeTeacherId: {},\n        teacherOnDuty: '',\n        teachers: {},\n        students: {},\n        attendance: {},\n        student_present: new Set(),\n        student_absent: new Set(),\n        student_unmarked: new Set(),\n        teacher_present: new Set(),\n        teacher_absent: new Set(),\n        teacher_unmarked: new Set()\n      }\n    }\n    \n    default:\n        return state\n  }\n\n}","import { combineReducers } from 'redux'\nimport classInfo from './classInfo'\nimport attendance from './attendance'\nimport medicationrequests from './medicationrequests'\nimport appetite from './appetite'\nimport water from './water'\nimport sleep from './sleep'\nimport healthstatus from './healthstatus'\nimport milk from './milk'\nimport diaper from './diaper'\nimport inbox from './inbox'\nimport message from './message'\nimport school from './school'\n\nexport default combineReducers({\n    classInfo,\n    attendance,\n    medicationrequests,\n    appetite,\n    water,\n    sleep,\n    healthstatus,\n    milk,\n    diaper,\n    message,\n    school\n})","export default function medicationrequests(state = {\n    requests: {\n        // [request_id]: {\n        //     'student_id': student_id,\n        //     'timestamp': timestamp.strftime('%B %d, %Y %H:%M:%S'),\n        //     'medication': {\n        //         '藥粉': None if 藥粉 == 'None' else 藥粉,\n        //         'need_refrigeration': need_refrigeration == 'True',\n        //         '藥水': None if 藥水 == 'None' else 藥水,\n        //         '藥膏': None if 藥膏 == 'None' else 藥膏\n        //     },\n        //     'note': note,\n        //     'administered': administered,\n        //     'teacher_id': teacher_id\n        // }, {...}\n    },\n    unfinished: [],\n    finished: []\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_REQUESTS':{\n            const { requests, finished, unfinished} = action\n            return {\n                ...state,\n                requests,\n                finished,\n                unfinished\n            }\n        }\n        \n        case 'FILL_MED_REQUEST':{\n            const newState = { ...state }\n            const { unfinished } = state\n            var new_unfinished = []\n            newState.requests[action.request_id].administered = true\n            newState.finished = [...state.finished, action.request_id]\n\n            for (var i = 0; i < unfinished.length; i++) {\n                if (unfinished[i] !== action.request_id) {\n                    new_unfinished.push(unfinished[i])\n                }\n            }\n            newState.unfinished = new_unfinished\n            return newState\n        }\n        \n        case 'CLEAR_STATE': {\n            return {\n                requests: {},\n                unfinished: [],\n                finished: []\n            }\n        }\n\n        default:\n            return state\n    }\n}","export default function water(state = {\n    byId: {\n\n    }\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS':\n            var students = {}\n            action.students.forEach(student => {\n                students[student[0]] = []\n            })\n            return {\n                byId: students\n            }\n        \n        case 'ADD_WATER_RECORD':\n            // const d = action.date\n            // time = d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds()\n            // action.student_id_list.forEach(id => {\n            //     state.byId[id].push(time)\n            // })\n            if (!state.byId[action.student_id].includes(action.time)) {\n                state.byId[action.student_id].push(action.time)\n            }\n            return {\n                ...state\n            }\n        default:\n            return state\n    }\n}","\nexport const initializeClass = (teacher_objs, students) => {\n    return {\n        type: 'INITIALIZE_CLASS',\n        teacher_objs,\n        students\n    }\n}\n\nexport const rateAppetite = (student_id, mealType, rating, teacher_id) => {\n    return {\n        type: 'RATE_APPETITE',\n        student_id,\n        mealType,\n        rating,\n        teacher_id\n    }\n}\n\nexport const markPresent = (student_id, in_time) => {\n    return {\n        type: 'MARK_PRESENT',\n        student_id,\n        in_time\n    }\n}\n\nexport const markDismiss = (student_id, out_time) => {\n    return {\n        type: 'MARK_DISMISS',\n        student_id,\n        out_time\n    }\n}\n\nexport const markAbsent = (student_id, excuse_type) => {\n    return {\n        type: 'MARK_ABSENT',\n        student_id,\n        excuse_type\n    }\n}\n\nexport const initializeRequests = (requests, finished, unfinished) => {\n    return {\n        type: 'INITIALIZE_REQUESTS',\n        requests,\n        finished,\n        unfinished\n    }\n}\n\nexport const fillMedRequest = (request_id) => {\n    return {\n        type: 'FILL_MED_REQUEST',\n        request_id\n    }\n}\n\nexport const fetchAttendanceSuccess = (data) => {\n    return {\n        type: 'FETCH_ATTENDANCE_SUCCESS',\n        data\n    }\n}\n\nexport const markTeacherLoggedIn = (teacher_id, time, attendance_id) => {\n    return {\n        type: 'MARK_TEACHER_LOGGED_IN',\n        teacher_id,\n        time,\n        attendance_id\n    }\n}\n\nexport const markTeacherLoggedOut = (teacher_id, time) => {\n    return {\n        type: 'MARK_TEACHER_LOGGED_OUT',\n        teacher_id,\n        time\n    }\n}\n\nexport const clearRatings = (meal_type) => {\n    return {\n        type: 'CLEAR_RATINGS',\n        meal_type\n    }\n}\n\nexport const setAllRatingsToGreat = (mealType, teacher_id) => {\n    return {\n        type: 'SET_ALL_RATINGS_TO_GREAT',\n        mealType,\n        teacher_id\n    }\n}\n\nexport const addWaterRecord = (time, student_id) => {\n    return {\n        type: 'ADD_WATER_RECORD',\n        time,\n        student_id\n    }\n}\n\nexport const addWellnessRecord = (student_id) => {\n    return {\n        type: 'ADD_RECORD',\n        student_id\n    }\n}\n\nexport const addHealthStatus = (student_id, record_id, status, teacher_id) => {\n    return {\n        type: 'ADD_HEALTH_STATUS',\n        student_id,\n        record_id,\n        status,\n        teacher_id\n    }\n}\n\nexport const addTemperature = (student_id,record_id, temperature, teacher_id) => {\n    return {\n        type: 'ADD_TEMPERATURE',\n        student_id,\n        record_id,\n        temperature,\n        teacher_id\n    }\n}\n\nexport const sendWellnessDataSuccess = () => {\n    return {\n        type: 'SEND_WELLNESS_DATA_SUCCESS'\n    }\n}\n\nexport const sendWellnessDataFail = (errMessage) => {\n    return {\n        type: 'SEND_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const invalidateWellnessData = (record_id, errMessage) => {\n    return {\n        type: 'INVALIDATE_WELLNESS_DATA',\n        record_id,\n        errMessage\n    }\n}\n\nexport const setSleepTime = (student_id, index, sleep_time, teacher_id) => {\n    return {\n        type: 'SET_SLEEP_TIME',\n        student_id,\n        index,\n        sleep_time,\n        teacher_id\n    }\n}\n\nexport const removeSleepRecord = (record_id, student_id) => {\n    return {\n        type: 'REMOVE_RECORD',\n        record_id,\n        student_id\n    }\n}\n\nexport const removeSleepRecordSuccess = (record_id, student_id) => {\n    return {\n        type: 'REMOVE_RECORD_SUCCESS',\n        record_id,\n        student_id\n    }\n}\n\nexport const removeSleepRecordFail = (errorMessage) => {\n    return {\n        type: 'REMOVE_RECORD_FAIL',\n        errorMessage\n    }\n}\n\nexport const setWakeTime = (student_id, index, wake_time, teacher_id) => {\n    return {\n        type: 'SET_WAKE_TIME',\n        student_id,\n        index,\n        wake_time,\n        teacher_id\n    }\n}\n\nexport const removeWakeTime = (record_id, teacher_id) => {\n    return {\n        type: 'REMOVE_WAKE_TIME',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editMilkAmount = (record_id, milk_amount, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_AMOUNT',\n        record_id,\n        milk_amount,\n        teacher_id\n    }\n}\n\nexport const editMilkTime = (record_id, date_time, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_TIME',\n        record_id, \n        date_time,\n        teacher_id\n    }\n}\n\nexport const updateDiaperAmount = (student_id, amount) => {\n    return {\n        type: 'UPDATE_DIAPER_AMOUNT',\n        student_id,\n        amount\n    }\n}\n\nexport const addDiaperRecord = (student_id, time, cloth_diaper, teacher_id) => {\n    return {\n        type: 'ADD_DIAPER_RECORD',\n        student_id,\n        time,\n        cloth_diaper,\n        teacher_id\n    }\n}\n\nexport const editDiaperTime = (record_id, time, teacher_id) => {\n    return {\n        type: 'EDIT_DIAPER_TIME',\n        record_id, \n        time,\n        teacher_id\n    }\n}\n\nexport const switchPeeOrPoo = (record_id, teacher_id) => {\n    return {\n        type: 'SWITCH_PEE_OR_POO',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editPooCondition = (record_id, condition, teacher_id) => {\n    return {\n        type: 'EDIT_POO_CONDITION',\n        record_id,\n        condition,\n        teacher_id\n    }\n}\n\nexport const removeDiaperRecordSuccess = (student_id, record_id) => {\n    return {\n        type: 'REMOVE_DIAPER_RECORD_SUCCESS',\n        student_id,\n        record_id\n    }\n}\n\nexport const removeDiaperRecordFail = (err_message) => {\n    return {\n        type: 'REMOVE_DIAPER_RECORD_FAIL',\n        err_message\n    }\n}\n\nexport const clearDiaperlogErrorMessage = () => {\n    return {\n        type: 'CLEAR_ERR_MESSAGE'\n    }\n}\n\nexport const addMilkRecord = (student_id) => {\n    return {\n        type: 'ADD_MILK_RECORD',\n        student_id\n    }\n}\n\nexport const clearUpdatedStudents = () => {\n    return {\n        type: 'CLEAR_UPDATED_STUDENTS'\n    }\n}\n\nexport const fetchClassAppetiteData = (fruit_name, ratings) => {\n    return {\n        type: 'FETCH_CLASS_APPETITE_DATA',\n        fruit_name,\n        ratings\n    }\n}\n\nexport const fetchClassWellnessData = (wellnessData) => {\n    return {\n        type: 'FETCH_CLASS_WELLNESS_DATA',\n        wellnessData\n    }\n}\n\nexport const fetchClassSleepData = (sleepData) => {\n    return {\n        type: 'FETCH_CLASS_SLEEP_DATA',\n        sleepData\n    }\n}\n\nexport const clearPendingSleepUpdate = () => {\n    return {\n        type: 'CLEAR_PENDNING_SLEEP_UPDATE'\n    }\n}\n\nexport const fetchClassMilkData = (milkData) => {\n    return {\n        type: 'FETCH_CLASS_MILK_DATA',\n        milkData\n    }\n}\n\n// TODO: specify create and edit for milk data\nexport const createDataSuccess = () => {\n    return {\n        type: 'CREATE_DATA_SUCCESS'\n    }\n}\n\nexport const createDataFail = (errMessage) => {\n    return {\n        type: 'CREATE_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const editDataSuccess = () => {\n    return {\n        type: 'EDIT_DATA_SUCCESS'\n    }\n}\n\nexport const editDataFail = (errMessage) => {\n    return {\n        type: 'EDIT_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const removeMilkRecordSuccess = () => {\n    return {\n        type: 'REMOVE_MILK_RECORD_SUCCESS'\n    }\n}\n\nexport const removeMilkRecordFail = () => {\n    return {\n        type: 'REMOVE_MILK_RECORD_FAIL'\n    }\n}\n\nexport const createSleepRecordSuccess = () => {\n    return {\n        type: 'CREATE_SLEEP_RECORD_SUCCESS'\n    }\n}\n\nexport const createSleepRecordFail = (errMessage) => {\n    return {\n        type: 'CREATE_SLEEP_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editSleepRecordSuccess = () => {\n    return {\n        type: 'EDIT_SLEEP_RECORD_SUCCESS'\n    }\n}\n\nexport const editSleepRecordFail = (errMessage) => {\n    return {\n        type: 'EDIT_SLEEP_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const fetchClassDiaperData = (diaperData) => {\n    return {\n        type: 'FETCH_CLASS_DIAPER_DATA',\n        diaperData\n    }\n}\n\nexport const createDiaperRecordSuccess = () => {\n    return {\n        type: 'CREATE_DIAPER_RECORD_SUCCESS'\n    }\n}\n\nexport const createDiaperRecordFail = (errMessage) => {\n    return {\n        type: 'CREATE_DIAPER_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editDiaperRecordSuccess = () => {\n    return {\n        type: 'EDIT_DIAPER_RECORD_SUCCESS'\n    }\n}\n\nexport const editDiaperRecordFail = (errMessage) => {\n    return {\n        type: 'EDIT_DIAPER_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editDiaperAmountSuccess = () => {\n    return {\n        type: 'EDIT_DIAPER_AMOUNT_SUCCESS'\n    }\n}\n\nexport const editDiaperAmountFail = (errMessage) => {\n    return {\n        type: 'EDIT_DIAPER_AMOUNT_FAIL',\n        errMessage\n    }\n}\n\nexport const removeRecord = (student_id, record_id, index) => {\n    return {\n        type: 'REMOVE_RECORD',\n        student_id,\n        record_id,\n        index\n    }\n}\n\nexport const clearState = () => {\n    return {\n        type: 'CLEAR_STATE'\n    }\n}\n\nexport const getConversations = (conversations, unread_conversation_list) => {\n    return {\n        type: 'GET_CONVERSATIONS',\n        conversations,\n        unread_conversation_list\n    }\n}\n\nexport const setMessageDataSchool = (messages, most_recently_read_message_id, conversation_id, student_id) => {\n    return {\n        type: 'SET_MESSAGE_DATA',\n        messages,\n        most_recently_read_message_id,\n        conversation_id,\n        student_id\n    }\n}\n\nexport const setCurrentConversationId = (conversation_id) => {\n    return {\n        type: 'SET_CURRENT_CONVERSATION_ID',\n        conversation_id\n    }\n}\n\nexport const clearCurrentConversationIdSchool = () => {\n    return {\n        type: 'CLEAR_CURRENT_CONVERSATION_ID'\n    }\n}\n\nexport const setClassId = (class_id) => {\n    return {\n        type: 'SET_CLASS_ID',\n        class_id\n    }\n}\n\nexport const onSendAppetiteSuccess = () => {\n    return {\n        type: 'ON_SEND_APPETITE_SUCCESS'\n    }\n}\n\nexport const alertErrMessage = (err_message) => {\n    return {\n        type: 'ALERT_ERR_MESSAGE',\n        err_message\n    }\n}\n\nexport const clearAppetiteErrorMessage = () => {\n    return {\n        type: 'CLEAR_ERR_MESSAGE'\n    }\n}\n\nexport const addStudentIdForUpdate = (student_id_array) => {\n    return {\n        type: 'ADD_STUDENT_ID_FOR_UPDATE',\n        student_id_array\n    }\n}\n\nexport const markWaterDrank = (student_id, meal_type, teacher_id) => {\n    return {\n        type: 'MARK_WATER_DRANK',\n        student_id,\n        meal_type,\n        teacher_id\n    }\n}\n\nexport const markStaffAttendanceFail = (errMessage) => {\n    return {\n        type: 'MARK_STAFF_ATTENDANCE_FAIL',\n        errMessage\n    }\n}\n\nexport const writeToAll = (text, teacher_id) => {\n    return {\n        type: 'WRITE_TO_ALL',\n        text,\n        teacher_id\n    }\n}\n\nexport const writeToOne = (text, student_id, teacher_id) => {\n    return {\n        type: 'WRITE_TO_ONE',\n        text,\n        student_id,\n        teacher_id\n    }\n}\n\nexport const remindItemsToBringToAll = (items_to_bring_bool, teacher_id) => {\n    return {\n        type: 'REMIND_ITEMS_TO_BRING_TO_ALL',\n        items_to_bring_bool,\n        teacher_id\n    }\n}\n\nexport const remindItemsToBringToOne = (student_id, things_to_bring, teacher_id) => {\n    return {\n        type: 'REMIND_ITEMS_TO_BRING_TO_ONE',\n        student_id,\n        things_to_bring,\n        teacher_id\n    }\n}\n\nexport const recordActivitiesForAll = (new_acitivities_bool, teacher_id) => {\n    return {\n        type: 'RECORD_ACTIVITIES_FOR_ALL',\n        new_acitivities_bool,\n        teacher_id\n    }\n}\n\nexport const recordActivitiesForOne = (student_id, activities, teacher_id) => {\n    return {\n        type: 'RECORD_ACTIVITIES_FOR_ONE',\n        student_id,\n        activities,\n        teacher_id\n    }\n}\n\nexport const writeItemToBringToAll = (item_to_bring, teacher_id) => {\n    return {\n        type: 'WRITE_ITEM_TO_BRING_TO_ALL',\n        item_to_bring,\n        teacher_id\n    }\n}\n\nexport const writeItemToBringToOne = (student_id, item_to_bring, teacher_id) => {\n    return {\n        type: 'WRITE_ITEM_TO_BRING_TO_ONE',\n        student_id,\n        item_to_bring,\n        teacher_id\n    }\n}\n\nexport const writeActivityForAll = (activity, teacher_id) => {\n    return {\n        type: 'WRITE_ACTIVITY_FOR_ALL',\n        activity,\n        teacher_id\n    }\n}\n\nexport const writeActivityForOne = (student_id, activity, teacher_id) => {\n    return {\n        type: 'WRITE_ACTIVITY_FOR_ONE',\n        student_id,\n        activity,\n        teacher_id\n    }\n}\n\nexport const fetchClassMessageData = (message_data) => {\n    return {\n        type: 'FETCH_CLASS_MESSAGE_DATA',\n        message_data\n    }\n}\n\nexport const alertSleeplogErrorMessage = (err_message) => {\n    return {\n        type: 'ALERT_SLEEPLOG_ERROR_MESSAGE',\n        err_message\n    }\n}\n\nexport const clearSleeplogErrorMessage = () => {\n    return {\n        type: 'CLEAR_SLEEPLOG_ERROR_MESSAGE'\n    }\n}\n\nexport const editFruitName = (fruit_name) => {\n    return {\n        type: 'EDIT_FRUIT_NAME',\n        fruit_name\n    }\n}\n\nexport const fetchClassesSuccess = (classes, admin_passcode) => {\n    return {\n        type: 'FETCH_CLASSES_SUCCESS',\n        classes,\n        admin_passcode\n    }\n}\n\nexport const fetchTeachersSuccess = (admins, teachers, classes) => {\n    return {\n        type: 'FETCH_TEACHERS_SUCCESS',\n        admins,\n        teachers, \n        classes\n    }\n}\n\nexport const fetchStudentsSuccess = (students, classes) => {\n    return {\n        type: 'FETCH_STUDENTS_SUCCESS',\n        students,\n        classes\n    }\n}\n\nexport const initializeStudentWellness = (students) => {\n    return {\n        type: 'INITIALIZE_STUDENT_WELLNESS',\n        students\n    }\n}\n\nexport const sendMessageOnSuccess = () => {\n    return {\n        type: 'SEND_MESSAGE_ON_SUCCESS'\n    }\n}\n\nexport const setConnectState = (isConnected) => {\n    return {\n        type: 'SET_CONNECT_STATE',\n        isConnected\n    }\n}\n\nexport const clearSchoolState = () => {\n    return {\n        type: 'CLEAR_SCHOOL_STATE'\n    }\n}\n\nexport const fetchTeacherAttendanceSuccess = (attendance, teachers) => {\n    return {\n        type: 'FETCH_TEACHER_ATTENDANCE_SUCCESS',\n        attendance,\n        teachers\n    }\n}\n\nexport const fetchStudentAttendanceSuccess = (attendance, students, present, absent) => {\n    return {\n        type: 'FETCH_STUDENT_ATTENDANCE_SUCCESS',\n        attendance,\n        students,\n        present,\n        absent\n    }\n}\n\nexport const editTeacherOnDuty = (teacher_id) => {\n    return {\n        type: 'EDIT_TEACHER_ON_DUTY',\n        teacher_id\n    }\n}\n\nexport const addPickupRequest = (requests) => {\n    return {\n        type: 'ADD_PICKUP_REQUEST',\n        requests\n    }\n}\n\nexport const updateViewingStatus = (status) => {\n    return {\n        type: 'UPDATE_VIEWING_STATUS',\n        status\n    }\n}\n\nexport const updateProfilePicture = (student_id , uri) => {\n    return {\n        type: 'UPDATE_PROFILE_PICTURE',\n        student_id,\n        uri\n    }\n}\n\nexport const editStudentSuccess = (student_id, name, old_class_id, new_class_id) => {\n    return {\n        type: 'EDIT_STUDENT_SUCCESS',\n        student_id,\n        name,\n        old_class_id,\n        new_class_id\n    }\n}\n\nexport const updateTeacherProfilePicture = (teacher_id, image_url) => {\n    return {\n        type: 'UPDATE_TEACHER_PROFILE_PICTURE',\n        teacher_id,\n        image_url\n    }\n}\n\nexport const markRecordError = (record_id_array) => {\n    return {\n        type: 'MARK_RECORD_ERROR',\n        record_id_array\n    }\n}\n\nexport const markRecordCorrect = (record_id) => {\n    return {\n        type: 'MARK_RECORD_CORRECT',\n        record_id\n    }\n}","import React from 'react'\nimport { Container, View, Text, Card, CardItem, Item, Input, Button, Toast } from 'native-base'\nimport { TouchableHighlight, StyleSheet } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { markTeacherLoggedIn, markTeacherLoggedOut } from '../../redux/school/actions/index'\n\nclass LoginNumberPad extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            passcode: '',\n            err_message: '',\n            number_array: [1,2,3,4,5,6,7,8,9]\n        }\n        this.handlePasscode = this.handlePasscode.bind(this)\n    }\n\n    handlePasscode(num) {\n        this.setState({ passcode: this.state.passcode + num })\n    }\n\n    handleEnterPasscode() {\n        this.props.handleEnterPasscode(this.state.passcode)\n        this.setState({ passcode: '' })\n    }\n\n    render() {\n        const {passcode, number_array} = this.state\n        return (\n            <TouchableHighlight\n                style={{\n                    backgroundColor: 'rgba(0,0,0,0.5)',\n                    width: '100%',\n                    height: '100%',\n                    // // opacity: 0.5,\n                    flex: 1,\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    zIndex: 2,\n                    position: 'absolute',\n                }}\n                underlayColor='transparent'\n                onPress={this.props.hideLoginPad}\n            >\n                <TouchableHighlight\n                    style={{ width: 350, height: 560, borderRadius: 25, zIndex: 3, position: 'absolute', backgroundColor: 'white' }}\n                    underlayColor='white'\n                    onPress={() => { }}\n                >\n                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                        <View style={{ flex: 1, flexDirection: 'row', width: 310, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#b5e9e9', justifyContent: 'center' }}>\n                            <Text style={{ width: 210, fontSize: 40, fontWeight: 'bold', paddingHorizontal: 20, alignSelf: 'center' }}>{passcode}</Text>\n                            <TouchableHighlight\n                                style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#ffe1d0', justifyContent: 'center', alignItems: 'center'  }}\n                                underlayColor='#fa625f'\n                                onPress={() => this.setState({ passcode: '' })}\n                            >\n                                <Text style={{ fontSize: 30 }} >Clear</Text>\n                            </TouchableHighlight>\n                        </View>\n                        <View style={{ flex: 3, flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'center' }}>\n                            {number_array.map(number => {\n                                return (\n                                    <TouchableHighlight\n                                        key={number}\n                                        style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#fff1b5', justifyContent: 'center', alignItems: 'center'  }}\n                                        underlayColor='#f4d41f'\n                                        onPress={() => this.handlePasscode(number)}\n                                    >\n                                        <Text style={{ fontSize: 30 }} >{number}</Text>\n                                    </TouchableHighlight>\n                                )\n                            })}\n                        </View>\n                        <View style={{ flex: 1, flexDirection: 'row' }}>\n                            <TouchableHighlight\n                                style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#fff1b5', justifyContent: 'center', alignItems: 'center' }}\n                                underlayColor='#f4d41f'\n                                onPress={() => this.handlePasscode(0)}\n                            >\n                                <Text style={{ fontSize: 30 }}>0</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight\n                                style={{ width: 210, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#dcf3d0', justifyContent: 'center', alignItems: 'center' }}\n                                underlayColor='#00c07f'\n                                onPress={() => this.handleEnterPasscode()}\n                            >\n                                <Text style={{ fontSize: 30 }}>Enter</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                </TouchableHighlight>\n            </TouchableHighlight>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    button: {\n        minWidth: '22%',\n        aspectRatio: 1,\n        margin: 5,\n        justifyContent: 'center'\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markTeacherLoggedIn, markTeacherLoggedOut}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (LoginNumberPad)","import Constants from 'expo-constants';\n\n// export const prodUrl = \"https://someapp.herokuapp.com\";\n\n// const ENV = {\n//   dev: {\n//     apiUrl: \"http://localhost:3000\"\n//   },\n//   staging: {\n//     apiUrl: prodUrl\n//   },\n//   prod: {\n//     apiUrl: prodUrl\n//   }\n// };\n\nfunction getEnvVars(env = \"\") {\n  if (env === null || env === undefined || env === \"\") return \"prod\";\n  if (env.indexOf(\"dev\") !== -1) return \"prod\";\n  if (env.indexOf(\"staging\") !== -1) return \"staging\";\n  if (env.indexOf(\"prod\") !== -1) return \"prod\";\n}\n\nexport default getEnvVars(Constants.manifest.releaseChannel);\n","// import { connect } from \"react-redux\"\nimport ENV from '../variables'\n\nexport const formatDate = (date) => {\n    return date.getFullYear() + '-' + ('0' + (date.getMonth()+ 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyDate = (date) => {\n    return date.getFullYear() + '/' + ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyMonthDate = (date) => {\n    return ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const formatTime = (date) => {\n    return date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\n}\n\nexport const beautifyTime = (date) => {\n    return date.getHours() + ':' + ('0' + date.getMinutes()).slice(-2)\n}\n\nexport const formatHourMinute = (date) => {\n    return date.getHours() + ':' + date.getMinutes()\n}\n\nexport const get = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log(resJson)\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const post = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const put = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const delete_by_id = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const fetchData = async (type, child_id, start_date, end_date) => {\n    // const date = formatDate(new Date());\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/${child_id}?start_date=${start_date}&end_date=${end_date}`\n\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    // console.log(`${type} util/fetchData/fetchedData: `, fetchedData)\n    return fetchedData\n}\n\nexport const fetchClassData = async (type, class_id, start_date, end_date) => {\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/class/${class_id}?start_date=${start_date}&end_date=${end_date}`\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            // console.log('fetchClassData/resJson: /', resJson)\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    return fetchedData\n}\n\nexport const fetchMessagesByConversationId = async (conversation_id, sender_id, recipient_id) => {\n    console.log('fetchMessageByConvId/recipient_id', recipient_id)\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const messageData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('fetchMessagesByConversationId/resJson: ', resJson)\n            const { messages, most_recently_read_message_id } = resJson.data\n            if (resJson.statusCode === 200) {\n                markRead(messages, sender_id, recipient_id)\n                return {\n                    success: true,\n                    data: resJson.data\n                }\n            } else {\n                return {\n                    sucess: false,\n                    data: resJson\n                }\n            }\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            return {\n                success: false,\n                data: err\n            }\n        })\n    return messageData\n}\n\nconst markRead = (message_array, sender_id, recipient_id) => {\n    // console.log('message_array: ', message_array)\n    // const { sender_id, recipient_id } = this.state\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message`\n\n    const most_recent_message = message_array[0] ? message_array[0] : null\n    if (most_recent_message === null || most_recent_message.sender_id === sender_id || most_recent_message.read_at !== null) {\n        return\n    }\n\n    fetch(query, {\n        method: 'PUT',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            most_recent_message_id: most_recent_message.message_id,\n            recipient_id\n        })\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('markRead/resJson: ', resJson)\n        })\n        .catch(err => console.log('err: ', err))\n}\n\nexport const fetchReadReceipt = async (conversation_id,  sender_id) => {\n    // const { conversation_id } = this.state.messageData\n    // const sender_id = this.props.child_id\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message/read-receipt?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const success = true\n    const message_id = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('parent/inboxcard/fetchReadReceipt/resJson: ', resJson)\n            return resJson.data\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            success = false\n            return `err: ${err}`\n        })\n    return {\n        success,\n        data: message_id\n    }\n}\n\nexport const sendWellnessData = async (wellness_data, class_id, date) => {\n    const { record_id_for_update} = wellness_data\n    var data_objs = []\n\n    if (record_id_for_update.size === 0) {\n        return {\n            success: true,\n            data: []\n        }\n    }\n\n    record_id_for_update.forEach((record_id) => {\n        data_objs.push({\n            record_id,\n            ...wellness_data.records[record_id]\n        })\n    })\n    normalize(data_objs)\n\n    var request_body = {\n        date,\n        class_id,\n        data_objs\n    }\n\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/wellness/`\n    \n    const fetchResult = await fetch(query, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n        .then((res) => res.json())\n        .then((resJson) => {\n            const { statusCode, message, data } = resJson\n            if (statusCode > 200 || statusCode === undefined) {\n                return {\n                    success: false,\n                    statusCode,\n                    message\n                }\n            }\n            return {\n                success: true,\n                statusCode,\n                message,\n                data\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                message: err\n            }\n        })\n    return fetchResult\n}\n\nfunction normalize(data_objs) {\n    for (var i = 0; i < data_objs.length; i++) {\n        data_objs[i].time = formatTime(data_objs[i].time)\n    }\n}","import React from 'react'\nimport { Card, CardItem, Toast } from 'native-base'\nimport { View, Text, StyleSheet, Image, TouchableHighlight } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { markAbsent, markPresent } from './../../redux/school/actions/index'\nimport { formatDate } from './../util'\n\nclass AttendanceCard extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            selected_student_ids: []\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    onSelectAttendanceType(attendance_type) {\n        const { attendance } = this.props\n        switch (attendance_type) {\n            case 'present': {\n                this.setState({\n                    selected_student_ids: [...attendance.present]\n                })\n                return\n            }\n            \n            case 'absent': {\n                this.setState({\n                    selected_student_ids: [...attendance.absent]\n                })\n                return \n            }\n                \n            case 'unmarked': {\n                this.setState({\n                    selected_student_ids: [...attendance.unmarked]\n                })\n                return\n            }\n        }\n    }\n\n    fetchData() {\n        const date = formatDate(new Date())\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance?date=${date}&class_id=${this.props.class.class_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then(res => res.json())\n        .then(resJson => {\n            for (var key in resJson) {\n                // {student_id}: [in_time, out_time, excuse_type]\n                if(resJson[key][0] !== null) {\n                    this.props.markPresent(key, resJson[key][0])\n                }\n                else if (resJson[key][2] !== null) {\n                    this.props.markAbsent(key, resJson[key][2])\n                }\n            }\n            this.setState({\n                selected_student_ids: [...this.props.attendance.unmarked]\n            })\n        })\n        .catch(err => console.log('err: ', err))\n    }\n\n    handleOnClick(student_id) {\n        this.props.showModal(student_id)\n    }\n\n    render() {\n        // TODO: on unmount, clear redux\n        // TODO: way to automatically update absent whenever parents send absense request\n        // TODO: what to display on homepage vs what to display in other pages after teachers\n        //          click into the attendance status(present, absent, or not yet)\n        // console.log(this.props.attendance)\n        // console.log(this.props.class.students)\n        return (\n            <Card style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                <CardItem>\n                    <Text style={{ fontSize: 30 }}>出席狀況</Text>\n                </CardItem>\n\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>出席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#dcf3d0'\n                            }}\n                            underlayColor='#00c07f'\n                            onPress={() => this.onSelectAttendanceType('present')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.present.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>缺席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#ffe1d0'\n                            }}\n                            underlayColor='#fa625f'\n                            onPress={() => this.onSelectAttendanceType('absent')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.absent.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>未知</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#fff1b5'\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.onSelectAttendanceType('unmarked')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.unmarked.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', flexWrap: 'wrap' }}>\n                    {this.state.selected_student_ids.map((student_id) => {\n                        const { present, unmarked, absent } = this.props.attendance\n                        return (\n                            <TouchableHighlight\n                                key={student_id}\n                                style={{ width: '31%', margin: '1%'}}\n                                underlayColor='transparent'\n                                onPress={() => this.handleOnClick(student_id)}\n                            >\n                                <View style={styles.cardContainer}>\n                                    <Card>\n                                        <CardItem style={{ justifyContent: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={{\n                                                        height: 200,\n                                                        width: 200,\n                                                        borderRadius: 100,\n                                                        borderWidth: 10,\n                                                        borderColor:\n                                                            present.has(student_id) ? '#dcf3d0'\n                                                                : unmarked.has(student_id) ? '#fff1b5'\n                                                                    : '#ffe1d0'\n                                                    }}\n                                                />\n                                        </CardItem>\n                                        <CardItem\n                                            footer\n                                            style={{ justifyContent: 'center', marginTop: -5 }}\n                                        >\n                                            <Text style={{ marginTop: -10 }}>{this.props.class.students[student_id].name}</Text>\n                                        </CardItem>\n                                    </Card>\n                                </View>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        paddingVertical: 5\n    },\n    thumbnailImage: {\n        height: 80,\n        width: 80,\n        borderRadius: 40\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        attendance: state.attendance,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markAbsent, markPresent}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (AttendanceCard)","import React from 'react'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { initializeRequests } from '../../redux/school/actions/index'\nimport { formatHourMinute } from '../util'\n\nclass MedicationReqeustCard extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            timerId: null\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    fetchData() {\n        const d = new Date()\n        const date = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate()\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/medicationrequest?date=' + date + '&class_id=' + this.props.class_id, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                const { requests, finished, unfinished } = data\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('托藥單取不完整，請和工程師聯繫' + message)\n                    return\n                }\n                this.props.initializeRequests(requests, finished, unfinished)\n            })\n            .catch(err => {\n                alert('Error, please try again 托藥單取不完整，請和工程師聯繫：' + err.message)\n            })\n    }\n\n    render() {\n        const { students } = this.props\n        const { requests, unfinished } = this.props.medication_requests\n        // console.log('this.props.medication_requests: ', this.props.medication_requests)\n        return (\n            <Card style={{ flex: 1, width: '90%'}}>\n                <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                    <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>托藥單</Text>\n                    <TouchableHighlight\n                        style={{\n                            width: '25%',\n                            alignSelf: 'flex-end',\n                            position: 'absolute',\n                            padding: 5,\n                            backgroundColor: '#b5e9e9'\n                        }}\n                        onPress={() => {\n                            this.props.navigation.push('TeacherMedicineLog', {\n                                request_id: null\n                            })\n                        }}\n                    >\n                        <Text style={styles.button_text}>查看</Text>\n                    </TouchableHighlight>\n                </View>\n                <View style={{ }}>\n                    <ScrollView horizontal={true}>\n                        {unfinished.map((request_id) => {\n                            const { student_id, timestamp, medication, note, administered, teacher_id } = requests[request_id]\n                            const time = formatHourMinute(new Date(timestamp))\n                            return (\n                                <TouchableHighlight\n                                    key={request_id}\n                                    style={{ flex: 1, margin: 3 }}\n                                    onPress={() => {\n                                        this.props.navigation.push('TeacherMedicineLog', {\n                                            request_id\n                                        })\n                                    }}\n                                >\n                                    <Card style={{ flex:1, alignItems: 'center', paddingHorizontal: 15 }}>\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Text style={{ fontSize: 35 }}>{time}</Text>\n                                        </View>\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                source={\n                                                    students[student_id].profile_picture === '' ?\n                                                        require('../../assets/icon-thumbnail.png')\n                                                        : {uri: students[student_id].profile_picture} \n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View\n                                            style={{ justifyContent: 'center' }}\n                                        >\n                                            <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                                        </View>\n                                    </Card>\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\n// const mapStateToProps = (state) => {\n//     return {\n//         medication_requests: state.medicationrequests\n//     }\n// }\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ initializeRequests }, dispatch)\n    }\n}\n\nexport default connect(null, mapDispatchToProps, null, { forwardRef: true }) (MedicationReqeustCard)","import React from 'react'\nimport { View, Text, ActivityIndicator } from 'react-native'\n\nexport default class Reloading extends React.Component{\n    render() {\n        return (\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                <Text>Loading...</Text>\n                <ActivityIndicator size=\"large\"></ActivityIndicator>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { formatDate } from '../util'\nimport Reloading from '../reloading'\nimport { addPickupRequest } from '../../redux/school/actions/index'\nimport { bindActionCreators } from 'redux'\n\nclass PickupAlert extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            color: '#ffe1d0',\n            // alertForPickup: false,\n            requestQueue: [],\n            isLoading: true\n        }\n        this.onConfirm = this.onConfirm.bind(this)\n    }\n\n    componentDidMount() {\n        // const { requestQueue } = this.props.route.params\n        // if (requestQueue.length > 0) {\n        //     this.setState({\n        //         requestQueue,\n        //         isLoading: false\n        //     })\n            this.timeoutId = this.timer()\n        // } else {\n        //     this.props.navigation.goBack()\n        // }\n    }\n\n    timer = () => setTimeout(() => {\n        this.setState({ color: this.state.color === '#ffe1d0' ? '#fa625f' : '#ffe1d0' })\n        this.timeoutId = this.timer()\n        }, 2000\n    )\n\n    // fetchData() {\n    //     const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance/pickup-request?school_id=${this.props.school_id}`\n    //     fetch(query, {\n    //         method: 'GET',\n    //         headers: {\n    //             Accept: 'application/json',\n    //             'Content-Type': 'application/json'\n    //         }\n    //     })\n    //         .then(res => res.json())\n    //         .then(resJson => {\n    //             if (resJson.data.length > 0) {\n    //                 this.timeoutId = this.timer()\n    //             }\n    //             this.setState({\n    //                 alertForPickup: resJson.data.length === 0 ? false : true,\n    //                 requestQueue: resJson.data\n    //             })\n    //         })\n    //         .catch(err => {\n    //             console.log('err: ', err)\n    //         })\n    // }\n\n    onConfirm(request_id, index) {\n        const pick_up_request = [...this.props.pick_up_request]\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance/pickup-request?request_id=${request_id}`\n        fetch(query, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // TODO: error handling\n                const { statusCode, message } = resJson\n                if (statusCode === 200) {\n                    pick_up_request.splice(index, 1)\n                    this.props.addPickupRequest(pick_up_request)\n                    if (pick_up_request.length === 0) {\n                        // clearTimeout(this.timeoutId)\n                        this.props.navigation.goBack()\n                    }\n                } else {\n                    Alert.alert(\n                        'Sorry 取得接回通知資料時電腦出狀況了！',\n                        '請截圖和與工程師聯繫 ' + message,\n                        [{ text: 'Ok' }]\n                    )\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId)\n    }\n\n    render() {\n        const { pick_up_request, students } = this.props\n        // if (this.state.isLoading) {\n        //     return <Reloading />\n        // } else {\n            // const request = this.state.requestQueue[0]\n            // const student = this.props.students[request['student_id']]\n            return (\n                <View style={{\n                    flex: 1,\n                    flexDirection: 'row',\n                    // backgroundColor: 'transparent',\n                    justifyContent: 'space-evenly',\n                    alignItems: 'center',\n                    flexWrap: 'wrap'\n                    // zIndex: 2,\n                    // position: 'absolute',\n                    // width: '100%',\n                    // height: '100%'\n                }}>\n                    {pick_up_request.map((request, index) => {\n                        const { id, student_id, arrival_time } = request\n                        const student = students[student_id]\n                        return(\n                            <View\n                                key={index}\n                                style={{\n                                    // flex: 1,\n                                    width: '45%',\n                                    height: '45%',\n                                    marginTop: '5%',\n                                    backgroundColor: this.state.color,\n                                    // zIndex: 3,\n                                    // position: 'absolute'\n                                }}\n                            >\n                                <View style={{ flex: 2, alignItems: 'center', justifyContent: 'center' }}>\n                                    <Image\n                                        source={{uri: student.profile_picture }}\n                                        style={{\n                                            width: '80%',\n                                            aspectRatio: 1\n                                        }}\n                                    />\n                                </View>\n                                <View style={{ flex: 1 }}>\n                                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                                        <Text style={{ fontSize: 80, textAlign: 'center' }}>{arrival_time}</Text>\n                                    </View>\n                                    <View style={{ flex: 1 }}>\n                                        <TouchableHighlight\n                                            style={{\n                                                backgroundColor: 'grey',\n                                                padding: 15,\n                                                alignSelf: 'flex-end',\n                                                justifyContent: 'center',\n                                                marginRight: 15\n                                            }}\n                                            onPress={() => this.onConfirm(id, index)}\n                                        >\n                                            <Text style={{ fontSize: 35, textAlign: 'center', color: 'lightgrey' }}>確認</Text>\n                                        </TouchableHighlight>\n                                    </View>\n                                </View>\n                            </View>\n                        )\n                    })}\n                </View>\n            )\n        // }\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        students: state.school.students,\n        pick_up_request: state.school.pick_up_request\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ addPickupRequest }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (PickupAlert)","import React from 'react'\nimport { View, TouchableHighlight, Text, Platform, Picker, ActionSheetIOS } from 'react-native'\nimport { ActionSheet } from 'native-base'\n\nexport default class PickerComponent extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      selectedIndex: 0\n    }\n  }\n\n  isIOS() {\n    if (Platform.OS === 'ios') {\n      return true\n    } else return false\n  }\n\n  showActionSheet() {\n    // this.props.handleOnClick()\n    // if (this.isIOS()) {\n    //   this.iosShowActionSheet()\n    // } else { // android\n    //   this.androidShowActionSheet()\n    // }\n  }\n\n  iosShowActionSheet() {\n    const { options } = this.props\n    ActionSheetIOS.showActionSheetWithOptions(\n      {\n        options,\n        cancelButtonIndex: options.length-1\n      },\n      (buttonIndex) => {\n        this.setState({\n          selectedIndex: buttonIndex\n        })\n        this.props.handleSelectValue(options[buttonIndex])\n      }\n    )\n  }\n\n  androidShowActionSheet() {\n    const { options } = this.props\n    ActionSheet.show(\n      {\n        options,\n        cancelButtonIndex: options.length-1\n      },\n      buttonIndex => {\n        this.setState({ selectedIndex: buttonIndex })\n        this.props.handleSelectValue(options[buttonIndex])\n      }\n    )\n  }\n\n  isOtherSelected() {\n    const { selectedValue, options } = this.props\n    const index = options.indexOf(selectedValue)\n    if (index < 0) return true\n    return false\n  }\n\n  render() {\n    const { selectedValue, style, textStyle, disabled } = this.props\n    return (\n      <TouchableHighlight\n        disabled={disabled}\n        style={style}\n        onPress={() => this.props.showSelect()}\n      >\n        <Text style={textStyle}>{selectedValue}</Text>\n      </TouchableHighlight>\n    )\n  }\n}","import React from 'react'\nimport { View, TextInput, Text } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { addHealthStatus, addTemperature } from '../../redux/school/actions/index'\nimport PickerComponent from '../picker'\n\nclass WellnessForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      other_option: ''\n    }\n  }\n\n  handleSelectStatus(student_id, record_id, status) {\n    if (status === 'Cancel') {\n      return\n    } else if (status === '其他') {\n      this.setState({\n        other_option: '其他'\n      })\n    } else {\n      this.props.addHealthStatus(student_id, record_id, status, this.props.teacher_id)\n    }\n  }\n\n  handleTempInput(student_id, record_id, temperature) {\n    const normalized_temperature = \n      temperature.slice(-1) === '.' ?\n        temperature.slice(0,2)\n        :\n      temperature.length === 3 ? \n        temperature.slice(0,2) + '.' + temperature.slice(-1)\n        : temperature\n    this.props.addTemperature(student_id, record_id, normalized_temperature, this.props.teacher_id)\n  }\n\n  render() {\n    const { student_id, record_id, records, records_with_error, autoFocus } = this.props\n    const wellness_data = records[record_id]\n    return (\n      <View\n        style={{\n          flex: 1,\n          flexDirection: 'row',\n          alignItems: 'center',\n          justifyContent: 'center',\n          borderWidth: 2,\n          borderColor: records_with_error.has(record_id) ? 'red' : 'transparent'\n        }}\n      >\n        <View \n          style={{ \n            flex: 1, \n            flexDirection: 'row', \n            backgroundColor: 'rgba(255,255,255, 0.5)', \n            marginRight: '10%', \n            justifyContent: 'center',\n            padding: 5\n          }}\n        >\n          <TextInput\n            style={{ fontSize: 40 }}\n            autoFocus={autoFocus}\n            keyboardType='decimal-pad'\n            placeholder='體溫'\n            value={'' + wellness_data.temperature}\n            onChangeText={(temp) => { this.handleTempInput(student_id, record_id, temp) }}\n          />\n          {wellness_data.temperature === '' ? null : <Text style={{ fontSize: 30 }}>°</Text>}\n        </View>\n        <View style={{ flex: 2 }}>\n          {this.state.other_option === '' ? \n            <PickerComponent\n              style={{ \n                backgroundColor: 'rgba(255,255,255, 0.5)',\n                alignItems: 'center',\n                padding: 5\n              }}\n              textStyle={{fontSize: 40}}\n              selectedValue={wellness_data.status}\n              options={[\n                \"健康寶寶\",\n                \"發燒\",\n                \"喉嚨偏紅\",\n                \"咳嗽\",\n                \"流⿐涕\",\n                \"頭痛\",\n                \"活動⼒不佳\",\n                \"嘔吐\", \n                \"糞便帶有⾎絲\",\n                \"拉肚子\",\n                \"其他\",\n                \"Cancel\"\n              ]}\n              handleOnClick={() => { }}\n              handleSelectValue={(status) => this.handleSelectStatus(student_id, record_id, status)}\n            />\n          : <TextInput\n              style={{ \n                fontSize: 40,\n                backgroundColor: 'rgba(255,255,255, 0.5)',\n                alignItems: 'center',\n                padding: 2\n              }}\n              keyboardType='default'\n              autoFocus={this.state.other_option !== ''}\n              selectTextOnFocus={true}\n              // placeholder=''\n              value={wellness_data.status}\n              onChangeText={(status) => { this.handleSelectStatus(student_id, record_id, status) }}\n              onBlur={() => this.setState({ other_option: ''})}\n            />\n          }\n        </View>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      // class: state.classInfo,\n    records: state.healthstatus.records,\n    records_with_error: state.healthstatus.records_with_error\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      ...bindActionCreators({\n          addHealthStatus,\n          addTemperature,\n      }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (WellnessForm)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate, post } from '../util'\nimport { sendWellnessDataFail, sendWellnessDataSuccess } from '../../redux/school/actions/index'\n\nclass StudentModal extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n        class_id: ''\n    }\n  }\n\n  componentDidMount() {\n    const { class_id, student_id } = this.props\n    if (class_id === 'all') {\n      this.getClassIdByStudentId(student_id)\n    } else {\n      this.setState({ class_id })\n    }\n  }\n\n  getClassIdByStudentId(student_id) {\n      const { classes } = this.props\n      const id = Object.keys(classes)\n      var class_id_found = ''\n      for(var i = 0; i < id.length; i++) {\n          const {students} = classes[id[i]]\n          for(var j = 0; j < students.length; j++) {\n              if (students[j] === student_id) {\n                  class_id_found = id[i]\n              }\n          }\n      }\n\n      this.setState({\n          class_id: class_id_found\n      })\n  }\n\n  async handleSend(record_id) {\n    const { wellness, isConnected } = this.props\n    const { class_id } = this.state\n    const { records } = wellness\n    const record = records[record_id]\n    if (record.temperature === '') {\n      Alert.alert(\n        '未填寫!',\n        '',\n        [{text: 'OK'}]\n      )\n      return\n    }\n\n    if (!isConnected) {\n        Toast.show({\n            text: '拍謝 網路連不到! 等一下再試試看',\n            buttonText: 'Okay',\n            position: \"top\",\n            type: \"warning\",\n            duration: 2000\n        })\n    }\n\n    const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n    if (sendDataResult.success) {\n        this.props.fetchStudentAttendance()\n        this.props.sendWellnessDataSuccess()\n        this.props.hideModal()\n    } else {\n      this.props.sendWellnessDataFail(sendDataResult.message)\n    }\n  }\n\n  async markAbsent() {\n    const { student_id, school_id } = this.props\n    const { class_id } = this.state\n    const body = {\n      student_id,\n      class_id,\n      school_id,\n      startDate: formatDate(new Date()),\n      endDate: formatDate(new Date()),\n      excuse_type: 'none-medical',\n      note: '校方填寫'\n    }\n    const response = await post('/absence-excuse', body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        Alert.alert(\n            'Sorry 標記學生缺席時電腦出狀況了！',\n            '請截圖和與工程師聯繫\\n\\n' + message,\n            [{ text: 'Ok' }]\n        )\n        return \n    }\n    this.props.fetchStudentAttendance()\n    this.props.hideModal()\n  }\n\n  render() {\n    const { show, student_id, teacher_id, students, student_unmarked, student_absent, teacherOnDuty } = this.props\n    const student = students[student_id]\n    const { wellness } = this.props\n    const record_id = wellness.by_student_id[student_id][0]\n    return (\n        <View\n          style={{\n            flex: 1,\n            width: '80%',\n            height: '70%',\n            backgroundColor:\n                student_absent.has(student_id) ? '#ffe1d0'\n                : student_unmarked.has(student_id) ? '#fff1b5'\n                : '#dcf3d0',\n            zIndex: 3,\n            position: 'absolute'\n          }}\n        >\n          <View style={{ flex: 2, flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center' }}>\n            <View style={{ flex: 1, alignItems: 'center' }}>\n              <Image\n                source={\n                  student.profile_picture === '' ?\n                      require('../../assets/icon-thumbnail.png')\n                      : {uri: student.profile_picture }\n              }\n                style={styles.thumbnailImage}\n              />\n            </View>\n            <View style={{ flex: 1, alignItems: 'flex-start' }}>\n              <Text style={{ fontSize: 60 }}>{student.name}</Text>\n              <TouchableHighlight\n                style={{ padding: 10, backgroundColor: 'lightgrey', justifyContent: 'center' }}\n                onPress={() => this.markAbsent()}\n              >\n                <Text style={{ fontSize: 40 }}>缺席</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n          \n          <View style={{ flex: 2 }}>\n            <View style={{ flex: 3, alignItems: 'center' }}>\n              <Text style={{ fontSize: 20 }}>血型: {student.blood_type} </Text>\n              <Text style={{ fontSize: 20 }}>地址: {student.address}</Text>\n              <Text style={{ fontSize: 20 }}>家裡電話: {student.home_phone}</Text>\n              <Text style={{ fontSize: 20 }}>（父）手機: {student.father_phone}</Text>\n              <Text style={{ fontSize: 20 }}>（母）手機: {student.mother_phone}</Text>\n            </View>\n            <View style={{ flex: 1, flexDirection: 'row', paddingHorizontal: 30 }}>\n              {student_unmarked.has(student_id) ? \n                <WellnessForm\n                  student_id={student_id}\n                  teacher_id={teacherOnDuty}\n                  record_id={record_id}\n                  autoFocus={true}\n                />\n              : null}\n            </View>\n          </View>\n\n          <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n            {student_unmarked.has(student_id) ?\n              <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'red', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={this.props.hideModal}\n                >\n                  <Text style={{ fontSize: 30 }}>取消</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'grey', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={() => this.handleSend(record_id)}\n                >\n                  <Text style={{ fontSize: 30 }}>送出</Text>\n                </TouchableHighlight>\n              </View>\n              : null\n            }\n          </View>\n        </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    // school: state.school,\n    classes: state.school.classes,\n    student_absent: state.school.student_absent,\n    student_unmarked: state.school.student_unmarked,\n    students: state.school.students,\n    wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({ sendWellnessDataFail, sendWellnessDataSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (StudentModal)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, TextInput } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate, post, formatTime, put } from '../util'\nimport { markPresent, sendWellnessDataFail, editTeacherOnDuty } from '../../redux/school/actions/index'\n\nclass TeacherModal extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n        temperature: ''\n    }\n  }\n\n  editTemperature(temperature) {\n    const normalized_temperature = \n      temperature.slice(-1) === '.' ?\n        temperature.slice(0,2)\n        :\n      temperature.length === 3 ? \n        temperature.slice(0,2) + '.' + temperature.slice(-1)\n        : temperature\n      this.setState({ temperature: normalized_temperature })\n  }\n\n  clock() {\n    const { isConnected, teacher_id, teachers } = this.props\n    const teacher = teachers[teacher_id]\n\n    if (!isConnected) {\n      Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n      })\n      return\n    }\n\n    if (teacher.present) {\n      const attendance_id = teacher.attendance[teacher.attendance.length - 1]\n      this.clockout(attendance_id)\n    } else {\n      this.clockin()\n    }\n  }\n\n  async clockout(attendance_id) {\n    const response = await put(`/staff-attendance/${attendance_id}`, {\n      out_time: formatDate(new Date()) + ' ' + formatTime(new Date())\n  })\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      Alert.alert(\n        'Sorry 打卡時電腦出狀況了！',\n        '請截圖和與工程師聯繫\\n\\n' + message,\n        [{ text: 'Ok' }]\n      )\n    }\n\n    this.props.fetchTeacherAttendance()\n    this.props.hideModal()\n  }\n\n  async clockin() {\n    const { isConnected, teacher_id } = this.props\n    const { temperature } = this.state\n\n    if (!isConnected) {\n        Toast.show({\n            text: '拍謝 網路連不到! 等一下再試試看',\n            buttonText: 'Okay',\n            position: \"top\",\n            type: \"warning\",\n            duration: 2000\n        })\n    }\n\n    const response = await post('/staff-attendance', {\n        teacher_id,\n        in_time: formatDate(new Date()) + ' ' + formatTime(new Date()),\n        temperature: temperature ? temperature : 0\n    })\n\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        Alert.alert(\n            'Sorry 打卡時電腦出狀況了！',\n            '請截圖和與工程師聯繫\\n\\n' + message,\n            [{ text: 'Ok' }]\n        )\n        return \n    }\n    this.props.fetchTeacherAttendance()\n    this.props.hideModal()\n  }\n\n  editTeacherOnDuty(teacher_id) {\n    const { teacherOnDuty, teachers } = this.props\n    var name = '未登入'\n    if (teacherOnDuty === teacher_id) {\n      this.props.editTeacherOnDuty('')\n    } else {\n      this.props.editTeacherOnDuty(teacher_id)\n      name = teachers[teacher_id].name\n    }\n    \n    this.props.navigation.setOptions({ \n        headerRight: () => (\n            <View style={{ paddingRight: 20 }}>\n                <Text style={{ fontSize: 30 }}>{`值班老師：${name}`}</Text>\n            </View>\n        )\n    })\n  }\n\n  // getTotalTime(record) {\n  //   const { teacher_id, teachers, attendance } = this.props\n  //   let total_hour = 0\n  //   let total_min = 0\n  //   for(var i = 0; i < teachers[teacher_id].attendance.length; i++){\n  //     const { in_time, out_time } = attendance[teachers[teacher_id].attendance[i]]\n  //     total_hour += parseInt(in_time)\n  //     total_min +=\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, teachers, unmarked, absent, teacherOnDuty, attendance } = this.props\n    const { temperature } = this.state\n    const teacher = teachers[teacher_id]\n    // console.log('teacher: ', teacher)\n    // const { wellness } = this.props\n    // const record_id = wellness.by_student_id[student_id][0]\n    // TODO: temperature\n    return (\n        <View\n          style={{\n            flex: 1,\n            width: '80%',\n            height: '70%',\n            backgroundColor:\n              absent.has(teacher_id) ? '#ffe1d0'\n                : unmarked.has(teacher_id) ? '#fff1b5'\n                : '#dcf3d0',\n            zIndex: 3,\n            position: 'absolute'\n          }}\n        >\n          <View style={{ flex: 3, flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center' }}>\n            <View style={{ flex: 1, alignItems: 'center' }}>\n              <Image\n                source={\n                    teacher.profile_picture === '' ?\n                      require('../../assets/icon-teacher-thumbnail.png')\n                      : {uri: teacher.profile_picture }\n              }\n                style={styles.thumbnailImage}\n              />\n              <TextInput\n              style={{ fontSize: 60 }}\n              keyboardType='decimal-pad'\n              placeholder='體溫'\n              value={'' + temperature}\n              onChangeText={(temperature) => this.editTemperature(temperature)}\n          />\n            </View>\n            <View style={{ flex: 1 }}>\n              <Text style={{ fontSize: 60 }}>{teacher.name}</Text>\n              <TouchableHighlight\n                onPress={() => this.editTeacherOnDuty(teacher_id)}\n                underlayColor='transparent'\n              >\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <Image\n                    source={teacherOnDuty === teacher_id ? \n                      require('../../assets/icon-checked-box.png')\n                    : require('../../assets/icon-unchecked-box.png')}\n                    style={{ width: 80, aspectRatio: 1 }}\n                  />\n                  <Text style={{ fontSize: 40 }}>值班老師</Text>\n                </View>\n              </TouchableHighlight>\n            </View>\n          </View>\n          \n          <View style={{ flex: 2, paddingHorizontal: 30, justifyContent: 'space-evenly', alignItems: 'center' }}>\n            {teacher.attendance && teacher.attendance.map((attendance_id) => {\n              const record = attendance[attendance_id]\n              return (\n                <View key={attendance_id} style={{ flex: 1, flexDirection: 'row', width: '60%', justifyContent: 'space-around' }}>\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 50 }}>{record.in_time}</Text>\n                  </View>\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 50 }}>{record.out_time}</Text>\n                  </View>\n                </View>\n              )\n            })}\n\n            {/* <TouchableHighlight\n              style={{ backgroundColor: 'red', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n              onPress={() => this.clock()}\n            >\n              <Text style={{ fontSize: 30 }}>打卡</Text>\n            </TouchableHighlight> */}\n            <View style={{ flexDirection: 'row', alignSelf: 'flex-end',  backgroundColor: 'white', padding: 10 }}>\n              <Text style={{ fontSize: 25}}>今日總計: {Math.round(teacher.total_minutes*100) / 100}</Text>\n            </View>\n          </View>\n\n          <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n            {/* {unmarked.has(teacher_id) ? */}\n              <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'red', flex: 1, height: 80, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={this.props.hideModal}\n                >\n                  <Text style={{ fontSize: 40 }}>取消</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'grey', flex: 1, height: 80, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={() => this.clock()}\n                >\n                  <Text style={{ fontSize: 40 }}>打卡</Text>\n                </TouchableHighlight>\n              </View>\n              {/* : null\n            } */}\n          </View>\n        </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    attendance: state.school.attendance,\n    teachers: state.school.teachers,\n    teacherOnDuty: state.school.teacherOnDuty,\n    unmarked: state.school.teacher_unmarked,\n    absent: state.school.teacher_absent,\n    // wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail, editTeacherOnDuty}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherModal)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate } from '../util'\nimport { markPresent, sendWellnessDataFail } from '../../redux/school/actions/index'\nimport StudentModal from './studentmodal'\nimport TeacherModal from './teachermodal'\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  // async handleSend(record_id) {\n  //   const { wellness, class_id, isConnected } = this.props\n  //   const { records } = wellness\n  //   const record = records[record_id]\n  //   if (record.temperature === '') {\n  //     Alert.alert(\n  //       '未填寫!',\n  //       '',\n  //       [{text: 'OK'}]\n  //     )\n  //     return\n  //   }\n\n  //   if (!isConnected) {\n  //       Toast.show({\n  //           text: '拍謝 網路連不到! 等一下再試試看',\n  //           buttonText: 'Okay',\n  //           position: \"top\",\n  //           type: \"warning\",\n  //           duration: 2000\n  //       })\n  //   }\n\n  //   const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n  //   if (sendDataResult.success) {\n  //     sendDataResult.data.forEach(student_id => {\n  //       this.props.markPresent(student_id, new Date)\n  //     })\n  //   } else {\n  //     this.props.sendWellnessDataFail(sendDataResult.message)\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id, school_id } = this.props\n    if (!show) {\n      return null\n    }\n    const student = students[student_id]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        behavior='height'\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={this.props.hideModal}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        {student_id !== '' ?\n          <StudentModal\n            student_id={student_id}\n            // teacher_id={teacher_id}\n            teacherOnDuty={teacherOnDuty}\n            class_id={class_id}\n            school_id={school_id}\n            // unmarked={unmarked}\n            // absent={absent}\n            fetchStudentAttendance={() => this.props.fetchStudentAttendance()}\n            hideModal={this.props.hideModal}\n          />\n          : <TeacherModal \n              teacher_id={teacher_id}\n              teacherOnDuty={teacherOnDuty}\n              navigation={this.props.navigation}\n              // class_id={class_id}\n              // unmarked={unmarked}\n              // absent={absent}\n              fetchTeacherAttendance={() => this.props.fetchTeacherAttendance()}\n              hideModal={this.props.hideModal}\n            />\n        }\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.classInfo.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)","import React from 'react'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\n// import { initializeRequests } from '../../redux/school/actions/index'\nimport { formatHourMinute, get, formatDate } from '../util'\n\nclass InboxCard extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            messages: []\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    async fetchData() {\n        const { class_id } = this.props\n        // let yesterday = new Date()\n        // yesterday.setDate(yesterday.getDate() - 1)\n        const date = new Date()\n        const response = await get(`/message/class/${class_id}/unread?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert(`Sorry 取得家長訊息時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n              return \n        }\n        // this.props.getUnreadMessageSuccess(data)\n        // console.log('data: ', data)\n        this.setState({ messages: data })\n    }\n\n    render() {\n        const { students } = this.props\n        const { messages } = this.state\n        // const { requests, unfinished } = this.props.medication_requests\n        return (\n            <Card style={{ flex: 1, width: '90%'}}>\n                <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                    <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>訊息</Text>\n                    {/* <TouchableHighlight\n                        style={{\n                            width: '25%',\n                            alignSelf: 'flex-end',\n                            position: 'absolute',\n                            padding: 5,\n                            backgroundColor: '#b5e9e9'\n                        }}\n                        onPress={() => {\n                            this.props.navigation.push('TeacherMedicineLog', {\n                                request_id: null\n                            })\n                        }}\n                    >\n                        <Text style={styles.button_text}>查看</Text>\n                    </TouchableHighlight> */}\n                </View>\n                <View style={{ }}>\n                    <ScrollView horizontal={true}>\n                        {messages.map((message, index) => {\n                            const { activities, items_to_bring, message_for_teacher, other_activity, other_item, student_id, teacher_id, text } = message\n                            // const time = formatHourMinute(new Date(timestamp))\n                            return (\n                                <TouchableHighlight\n                                    key={index}\n                                    style={{ flex: 1, margin: 3 }}\n                                    onPress={() => {\n                                        this.props.navigation.push('Inbox', {\n                                            messages,\n                                            students\n                                        })\n                                    }}\n                                >\n                                    <Card style={{ flex:1, alignItems: 'center', padding: 15 }}>\n                                        {/* <View style={{ justifyContent: 'center' }}>\n                                            <Text style={{ fontSize: 35 }}>{time}</Text>\n                                        </View> */}\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                source={\n                                                    students[student_id].profile_picture === '' ?\n                                                        require('../../assets/icon-thumbnail.png')\n                                                        : {uri: students[student_id].profile_picture} \n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View\n                                            style={{ justifyContent: 'center' }}\n                                        >\n                                            <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                                        </View>\n                                    </Card>\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\n// const mapStateToProps = (state) => {\n//     return {\n//         medication_requests: state.medicationrequests\n//     }\n// }\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ }, dispatch)\n    }\n}\n\nexport default connect(null, mapDispatchToProps, null, { forwardRef: true }) (InboxCard)","import React from 'react'\nimport { Text, Button, Container, Content, Toast} from 'native-base'\nimport { StyleSheet, View } from 'react-native'\nimport { setConnectState, initializeClass, setClassId, clearState } from '../../redux/school/actions/index'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport LoginNumberPad from './loginnumberpad'\nimport AttendanceCard from './attendancecard'\nimport MedicationReqeustCard from './medicationrequestcard'\nimport Reloading from '../reloading'\nimport PickupAlert from './pickupalert'\nimport Modal from './modal'\nimport NetInfo from '@react-native-community/netinfo'\nimport InboxCard from './inboxcard'\n\n\nclass TeacherHome extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            showLoginNumberPad: false,\n            pageClicked: '',\n            alertForPickup: false,\n            pickupQueue: [],\n            showModal: false,\n            modalStudentId: '',\n            modalTeacherId: '',\n            isAdmin: false,\n            admin_id: ''\n        }\n        this.initializeClass = this.initializeClass.bind(this)\n        this.handleEnterPasscode = this.handleEnterPasscode.bind(this)\n        this.hideLoginPad = this.hideLoginPad.bind(this)\n        this.onConfirmPickup = this.onConfirmPickup.bind(this)\n        this.showModal = this.showModal.bind(this)\n        this.hideModal = this.hideModal.bind(this)\n    }\n\n    componentDidMount() {\n        this.unsubscribe = NetInfo.addEventListener(state => {\n            const {isConnected} = state\n            this.props.setConnectState(isConnected)\n        });\n        const { class_id, class_name, isAdmin, admin_id } = this.props.route.params\n        this.setState({ isAdmin, admin_id })\n        this.props.setClassId(class_id)\n        this.initializeClass(class_id)\n        this.timeoutId = this.timer(class_id)\n        this.props.navigation.setOptions({ \n            title: class_name\n        })\n    }\n\n    timer = (class_id) => setTimeout(() => {\n        this.poll(class_id)\n    }, 10000)\n\n    async poll(class_id) {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/class/${class_id}/updates`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => { // TODO: make sure to disable this polling for admin log in\n                // console.log('teacherhome/poll/resJson: ', resJson)\n                const update_types = resJson.data\n                update_types.forEach(type => {\n                    this.refs[type].fetchData()\n                })\n            })\n            .catch(err => {console.log('err: ', err)})\n        this.timeoutId = this.timer(class_id)\n    }\n\n    initializeClass(class_id) {\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/class/${class_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then((res) => res.json())\n            .then((resJson) => {\n                // console.log('teacherHome/resJson: ', resJson)\n                this.props.initializeClass(resJson.teachers, resJson.students)\n                this.setState({\n                    isLoading: false\n                })\n        }).catch(err => {\n            console.log('err: ', err)\n        })\n    }\n\n    handleEnterPasscode(passcode) {\n        const teacher_id = this.props.class.passcodeTeacherId[passcode]\n        if (teacher_id === undefined) {\n            Toast.show({\n                text: 'Wrong password!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 3000\n            })\n        } else if (this.state.pageClicked === 'attendance_modal') {\n            this.setState({\n                showModal: true,\n                showLoginNumberPad: false,\n                modalTeacherId: teacher_id\n            })\n        } else {\n            this.props.navigation.navigate(this.state.pageClicked, {\n                teacher_id: teacher_id,\n                class: this.props.class,\n            })\n            this.setState({ showLoginNumberPad: false })\n        }\n    }\n\n    pageClicked(pageClicked) {\n        const { isAdmin, admin_id } = this.state\n        if (isAdmin) {\n            this.props.navigation.push(pageClicked, {\n                class: this.props.class,\n                teacher_id: admin_id\n            })\n        } else {\n            this.setState({ showLoginNumberPad: true, pageClicked})\n        }\n    }\n\n    hideLoginPad() {\n        this.setState({ showLoginNumberPad: false })\n    }\n\n    onConfirmPickup() {\n        var newPickupQueue = this.state.pickupQueue.slice(1, this.state.pickupQueue.length)\n        this.setState({\n            alertForPickup: newPickupQueue.length === 0 ? false : true,\n            pickupQueue: newPickupQueue\n        })\n    }\n\n    showModal(student_id) {\n        this.setState({\n            showLoginNumberPad: true,\n            pageClicked: 'attendance_modal',\n            modalStudentId: student_id\n        })\n    }\n\n    hideModal() {\n        this.setState({\n            showModal: false\n        })\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId)\n        this.props.clearState()\n        this.unsubscribe()\n    }\n\n    render() {\n        const { class_id } = this.props.route.params\n        if (this.state.isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        return (\n            <Container style={{ flex: 1 }}>\n                {this.state.showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={this.hideLoginPad}\n                    /> : null\n                }\n                {/* <PickupAlert\n                    ref=\"pickup_request\"\n                    class_id={class_id}\n                    students={this.props.class.students}\n                /> */}\n\n                <Modal\n                    show={this.state.showModal}\n                    student_id={this.state.modalStudentId}\n                    teacher_id={this.state.modalTeacherId}\n                    class_id={class_id}\n                    hideModal={this.hideModal}\n                />\n\n                <Content contentContainerStyle={{\n                    marginTop: 30,\n                    paddingBottom: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }}>\n                    {/* <Button\n                        style={styles.button}\n                        onPress={() => {this.props.navigation.push('TeacherClockInOut')}}>\n                        <Text style={styles.button_text}>打卡</Text>\n                    </Button> */}\n\n                    {/* <View style={styles.card}>\n                        {this.props.attendance.initialized ? \n                            <AttendanceCard\n                                ref=\"attendance\"\n                                navigator={this.props.navigation}\n                                showModal={(student_id) => this.showModal(student_id)}\n                            />\n                        : <Reloading />\n                        }\n                    </View> */}\n                    <InboxCard\n                        ref=\"messages\"\n                        class_id={class_id}\n                        students={this.props.class.students}\n                        navigation={this.props.navigation}\n                    />\n\n                    <MedicationReqeustCard\n                        ref=\"med_request\"\n                        class_id={class_id}\n                        students={this.props.class.students}\n                        medication_requests={this.props.medication_requests}\n                        navigation={this.props.navigation}\n                    />\n\n                    <View style={styles.button_row}>\n                        <Button\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('WellnessLog')}>\n                            <Text style={styles.button_text}>健康</Text>\n                        </Button>\n                        <Button\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('MessageForParents')}>\n                            <Text style={styles.button_text}>老師{\"\\n\"}留⾔</Text>\n                            </Button>\n                        <Button\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('TeacherAppetiteLog')}>\n                            <Text style={styles.button_text}>飲食</Text>\n                        </Button>\n                    </View>\n                    <View style={styles.button_row}>\n                        <Button\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('TeacherSleepLog')}>\n                            <Text style={styles.button_text}>睡眠</Text>\n                        </Button>\n                        <Button\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('TeacherMilkLog')}>\n                            <Text style={styles.button_text}>餵奶</Text>\n                        </Button>\n                        <Button\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('DiaperLog')}>\n                            <Text style={styles.button_text}>換尿布</Text>\n                        </Button>\n                    </View>\n                    <Button\n                        style={styles.button}\n                        onPress={() => this.props.navigation.goBack()}>\n                        <Text style={styles.button_text}>返回</Text>\n                    </Button>\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%'\n    },\n    button_row: {\n        width: '90%',\n        height: 100,\n        justifyContent: 'space-between',\n        flexDirection: 'row',\n        marginVertical: 7,\n        paddingHorizontal: 3\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 40\n    },\n    record_button: {\n        width: '30%',\n        height: '100%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        medication_requests: state.medicationrequests,\n        attendance: state.attendance,\n        teachers: state.school.teachers\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({setConnectState, initializeClass, setClassId, clearState}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherHome)","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport Auth from '@aws-amplify/auth'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { \n    setConnectState, \n    fetchClassesSuccess, \n    fetchTeachersSuccess, \n    fetchStudentsSuccess,\n    initializeStudentWellness,\n    clearSchoolState,\n    addPickupRequest,\n    updateViewingStatus,\n    fetchStudentAttendanceSuccess } from '../../redux/school/actions/index'\nimport { get, formatDate } from '../util'\nimport NetInfo from '@react-native-community/netinfo'\nimport LoginNumberPad from './loginnumberpad'\n// import PickupAlert from './pickupalert'\nimport ENV from '../../variables'\n\nclass SchoolHome extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            classes: [],\n            err_message: '',\n            showLoginNumberPad: false,\n            pageClicked: '',\n            class_id: '',\n            admin_id: ''\n        }\n        this.handleSignOut = this.handleSignOut.bind(this)\n    }\n\n    async componentDidMount() {\n        // this.unsubscribe = NetInfo.addEventListener(state => {\n        //     const {isConnected} = state\n        //     this.props.setConnectState(isConnected)\n        // });\n        window.addEventListener('offline', (e) => {\n            this.props.setConnectState(false) \n        });\n        window.addEventListener('online', () => {\n            this.props.setConnectState(true)\n        });\n        const { school_id } = this.props.route.params\n        await this.fetchClassIdAndName()\n        this.fetchTeacherData(school_id)\n        this.fetchStudentData(school_id)\n        // this.timeoutId = this.timer(school_id)\n    }\n\n    // timer = (school_id) => setTimeout(() => {\n    //     this.poll(school_id)\n    // }, 10000)\n\n    // async poll(school_id) {\n    //     const { viewing_status } = this.props\n    //     if (viewing_status === '') {\n    //         const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/class/${school_id}/updates`\n    //         await fetch(query, {\n    //             method: 'GET',\n    //             headers: {\n    //                 Accept: 'application/json',\n    //                 'Content-Type': 'application/json'\n    //             }\n    //         })\n    //             .then(res => res.json())\n    //             .then(resJson => {\n    //                 console.log('schoolhome: ', resJson)\n    //                 const update_types = resJson.data\n    //                 update_types.forEach(type => {\n    //                     if (type === 'pickup_request') {\n    //                         this.fetchPickupRequest(school_id)\n    //                     } else if(type === 'attendance') {\n    //                         this.fetchStudentAttendance()\n    //                     } else {\n    //                         this.refs[type].fetchData()\n    //                     }\n    //                 })\n    //             })\n    //             .catch(err => {\n    //                 Toast.show({\n    //                     text: '系統出差錯，請重新開ＡＰＰ',\n    //                     buttonText: 'Okay',\n    //                     position: \"top\",\n    //                     type: \"warning\",\n    //                     duration: 3000\n    //                 })\n    //             })\n    //     }\n    //     this.timeoutId = this.timer(school_id)\n    // }\n\n    async fetchClassIdAndName() {\n        const { school_id } = this.props.route.params\n        await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/school/${school_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 取得教室資料時電腦出狀況了！請截圖和與工程師聯繫 ' + message)\n                    return\n                }\n                this.setState({\n                    classes: data.classes\n                })\n                const classes = {}\n                data.classes.forEach(class_data => {\n                    const {id, name } = class_data\n                    classes[id] = {\n                        teachers: [],\n                        students: [],\n                        name\n                    }\n                })\n                this.props.fetchClassesSuccess(classes, data.admin_passcode)\n            }).catch(err => {\n                alert('Sorry 取得教室資料時電腦出狀況了！請截圖和與工程師聯繫')\n            })\n    }\n    async fetchTeacherData(school_id) {\n        const response = await get(`/school/${school_id}/teacher`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得教師資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        const {admins, teachers, classes} = data\n        this.props.fetchTeachersSuccess(admins, teachers, classes)\n        this.getAdminId(teachers)\n    }\n\n    getAdminId(teachers) {\n        const teacher_id_array = Object.keys(teachers)\n        for(var i = 0; i < teacher_id_array.length; i++) {\n            if (teachers[teacher_id_array[i]].name === '管理員') {\n                this.setState({\n                    admin_id: teacher_id_array[i]\n                })\n                return\n            }\n        }\n    }\n\n    async fetchStudentData(school_id) {\n        const response = await get(`/school/${school_id}/student`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const {students, classes} = data\n        this.props.fetchStudentsSuccess(students, classes)\n        this.props.initializeStudentWellness(Object.keys(students))\n    }\n\n    fetchPickupRequest(school_id) {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance/pickup-request?school_id=${school_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                if (resJson.data.length > 0) {\n                    this.props.addPickupRequest(resJson.data)\n                    this.props.navigation.navigate('PickupAlert', {\n                    })\n                }\n            })\n            .catch(err => {\n                alert('Sorry 取得接回告知時電腦出狀況了！請截圖和與工程師聯繫')\n            })\n    }\n\n    async fetchStudentAttendance() {\n        const { school_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/attendance?school_id=${school_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生出席資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const { attendance, students, present, absent } = data\n        this.props.fetchStudentAttendanceSuccess(attendance, students, present, absent)\n    }\n\n    handleEnterPasscode(passcode) {\n        console.log(passcode)\n        const { school_name, school_id } = this.props.route.params\n        const { passcodeAdminId, passcodeTeacherId, classes, teachers } = this.props\n        const { pageClicked, class_id } = this.state\n        const teacher_id = passcodeTeacherId[passcode]\n        const admin_id = passcodeAdminId[passcode]\n        console.log(admin_id)\n\n\n        if (teacher_id === undefined && admin_id === undefined) {\n            alert('密碼不正確！請截圖和與工程師聯繫')\n        } else if (admin_id !== undefined) {\n            this.setState({ showLoginNumberPad: false })\n            this.props.navigation.navigate(pageClicked, {\n                school_name, \n                school_id,\n                class_id,\n                class_name: '管理員：' + teachers[admin_id].name,\n                isAdmin: true,\n                admin_id\n            })\n        } else if (class_id !== '' && !classes[class_id].teachers.includes(teacher_id) || pageClicked === 'AdminHome') {\n            alert('Sorry 權限不合！請截圖和與工程師聯繫')\n        } else { //pageClicked === 'TeacherHome'\n            this.setState({ showLoginNumberPad: false })\n            this.props.updateViewingStatus('teacher')\n            this.props.navigation.navigate('TeacherHome', {\n                class_id,\n                class_name: classes[class_id].name,\n                isAdmin: false\n            })\n        }\n    }\n\n    hideLoginPad() {\n        this.setState({ showLoginNumberPad: false })\n    }\n\n    handleSignOut() {\n        const {loadAuth} = this.props.route.params\n        Auth.signOut()\n            .then(() => {\n                loadAuth()\n            })\n            .catch(err => console.log(err))\n    }\n\n    componentWillUnmount() {\n        // clearTimeout(this.timeoutId)\n        window.removeEventListener('offline', (e) => {\n            this.props.setConnectState(false) \n        });\n        window.removeEventListener('online', (e) => {\n            this.props.setConnectState(false) \n        });\n        this.props.clearSchoolState()\n    }\n\n    render() {\n        const { classes, showLoginNumberPad } = this.state\n        const { school_id } = this.props.route.params\n        return (\n            <View style={{ flex: 1, flexDirection: 'column' }}>\n                {showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={() => this.hideLoginPad()}\n                    /> : null\n                }\n\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <TouchableHighlight\n                        key='admin'\n                        style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                        onPress={() => this.setState({ showLoginNumberPad: true, pageClicked: 'AdminHome' })}\n                    >\n                        <Text style={{ fontSize: 50, textAlign: 'center' }}>行政管理</Text>\n                    </TouchableHighlight>\n                    {/* <TouchableHighlight\n                        key='child_dismissal'\n                        style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                        onPress={() => {\n                            this.props.navigation.push('DismissChildQRScan', {})\n                        }}\n                    >\n                        <Text style={{ fontSize: 50, textAlign: 'center' }}>放學</Text>\n                    </TouchableHighlight> */}\n                </View>\n                <TouchableHighlight\n                    key='attendance_page'\n                    style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                    onPress={() => {\n                        this.props.navigation.push('AttendancePage', {\n                            school_id\n                        })\n                    }}\n                >\n                    <Text style={{ fontSize: 80, textAlign: 'center' }}>出席/打卡</Text>\n                </TouchableHighlight>\n                <View style={{ flex: 3 }}>\n                    {classes.map((class_data) => {\n                        if (class_data.name === '管理員') return null\n                        return(\n                            <TouchableHighlight\n                                key={class_data.id}\n                                style={{ \n                                    flex: 1,\n                                    backgroundColor: '#74b987', \n                                    margin: 10,\n                                    justifyContent: 'center'\n                                }}\n                                onPress={() => this.setState({\n                                    showLoginNumberPad: true,\n                                    pageClicked: 'TeacherHome',\n                                    class_id: class_data.id\n                                })}\n                            >\n                                <Text style={{ fontSize: 80, textAlign: 'center' }}>{class_data.name}</Text>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        pick_up_request: state.school.pick_up_request,\n        passcodeAdminId: state.school.passcodeAdminId,\n        passcodeTeacherId: state.school.passcodeTeacherId,\n        classes: state.school.classes,\n        teachers: state.school.teachers,\n        viewing_status: state.school.viewing_status,\n        isConnected: state.school.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setConnectState,\n            fetchClassesSuccess, \n            fetchTeachersSuccess, \n            fetchStudentsSuccess,\n            initializeStudentWellness,\n            addPickupRequest,\n            clearSchoolState,\n            updateViewingStatus,\n            fetchStudentAttendanceSuccess\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (SchoolHome)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight } from 'react-native'\nimport { Container, Content, Text, View, Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport LoginNumberPad from './loginnumberpad'\nimport { bindActionCreators } from 'redux';\nimport { markTeacherLoggedIn, markTeacherLoggedOut, markStaffAttendanceFail, fetchAttendanceSuccess } from '../../redux/school/actions/index'\n\nclass TeacherClockInOut extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            logging_in: false,\n            teacher_id: ''\n        }\n        this.handleEnterPasscode = this.handleEnterPasscode.bind(this)\n        this.hideLoginPad = this.hideLoginPad.bind(this)\n    }\n\n    componentDidMount() {\n        this.fetchStaffAttendanceByClassId()\n    }\n\n    fetchStaffAttendanceByClassId() {\n        const { class_id, isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance?class_id=${class_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                this.props.fetchAttendanceSuccess(resJson.data)\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n\n    }\n\n    handleEnterPasscode(passcode) {\n        const teacher_id = this.props.class.passcodeTeacherId[passcode]\n        if (teacher_id === undefined || teacher_id !== this.state.teacher_id) {\n            Toast.show({\n                text: 'Wrong password!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 3000\n            })\n        } else {\n            const teacher = this.props.class.teachers[teacher_id]\n            const time = new Date()\n            if (teacher.logged_in) {\n                this.clockOut(teacher_id, time)\n            } else {\n                this.clockIn(teacher_id, time)\n            }\n            this.setState({ logging_in: false })\n        }\n        \n    }\n\n    clockIn(staff_id, time) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance`\n        fetch(query, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                staff_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if ( statusCode > 200 || resJson[\"message\"] === \"Internal server error\") {\n                    this.props.markStaffAttendanceFail(message)\n                } else {\n                    this.props.markTeacherLoggedIn(staff_id, time, data.attendance_id)\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    clockOut(staff_id, time) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n\n        const { attendance_id } = this.props.class.teachers[staff_id]\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance/${attendance_id}`\n        fetch(query, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === \"Internal server error\") {\n                    this.props.markStaffAttendanceFail(message)\n                }\n                else {\n                    this.props.markTeacherLoggedOut(staff_id, time)\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    hideLoginPad() {\n        this.setState({ logging_in: false })\n    }\n\n    render() {\n        const { errMessage } = this.props.class\n        return(\n            <Container>\n                {errMessage !== '' ?    \n                    <Text style={{ fontSize: 20, color: 'red' }}>{errMessage}</Text>\n                    : null}\n                {this.state.logging_in ?\n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={this.hideLoginPad}\n                    /> : null}\n                        \n                <Content contentContainerStyle={{ marginTop: 30, paddingBottom: 30, alignSelf: 'center', flexDirection: 'row' }}>\n                    {Object.keys(this.props.class.teachers).map((teacher_id) => {\n                        return (\n                            <TouchableHighlight\n                                key={teacher_id}\n                                style={{ margin: 20 }}\n                                underlayColor='transparent'\n                                onPress={() => this.setState({ logging_in: true, teacher_id: teacher_id})}\n                            >\n                                <View style={styles.cardContainer}>\n                                    <Card>\n                                        <CardItem style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                // source={{ uri: this.props.class.students[student_id].profile_picture }}\n                                                style={styles.thumbnailImage}/>\n                                        </CardItem>\n                                        <CardItem\n                                            footer\n                                            style={{ justifyContent: 'center', backgroundColor: this.props.class.teachers[teacher_id].logged_in ? '#dcf3d0' : '#ffe1d0' }}>\n                                            <Text>{this.props.class.teachers[teacher_id].name}</Text>\n                                        </CardItem>\n                                    </Card>\n                                </View>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 119,\n        height: 150,\n        margin: 2,\n        marginBottom: -2\n    },\n    thumbnailImage: {\n        height: 80,\n        width: 80,\n        borderRadius: 40\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markTeacherLoggedIn, markTeacherLoggedOut, markStaffAttendanceFail, fetchAttendanceSuccess}, dispatch)\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherClockInOut)","import React from 'react'\nimport { \n    View, \n    Text,\n    TouchableHighlight,\n    Dimensions,\n    Platform } from 'react-native'\nimport DatePicker from 'react-datepicker'\nimport \"react-datepicker/dist/react-datepicker.css\"\n\nconst { width } = Dimensions.get('window')\n\nexport default class TimeModal extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            datetime: new Date(),\n            isLoading: true\n            // max_date: (new Date()).setDate((new Date()).getDate() + 7)\n        }\n    }\n\n    componentDidMount() {\n        const { start_date } = this.props\n        this.setState({\n            datetime: start_date,\n            isLoading: false\n        })\n    }\n\n    isIOS() {\n        if (Platform.OS === 'ios') {\n          return true\n        } else return false\n      }\n\n    setDate(datetime) {\n        if (this.isIOS()) {\n            this.iosSetDate(datetime)\n        } else {\n            this.androidSetDate(datetime)\n        }\n        // if (datetime !== undefined) {\n        //     this.setState({datetime})\n        // } else {\n        //     this.props.hideModal()\n        // }\n    }\n\n    iosSetDate(datetime) {\n        this.setState({datetime})\n    }\n\n    androidSetDate(datetime) {\n        if (datetime !== undefined) {\n            this.props.selectDatetimeConfirm(datetime)\n        //     this.props.hideModal()\n        } else {\n            this.props.hideModal()\n        }\n        // this.props.hideModal()\n    }\n\n    selectDatetimeConfirm(date) {\n        // const { datetime } = this.state\n        this.props.selectDatetimeConfirm(date)\n        this.props.hideModal()\n    }\n\n    onChange = date => {\n        console.log(date)\n    }\n    \n    isWeekday = date => {\n        const special_date = new Date('September 26, 2020')\n        const day = date.getDay()\n        return (day !== 0 && day !== 6) || date.toDateString() === special_date.toDateString();\n    };\n\n    render() {\n        const { datetime_type, minDatetime, maxDatetime, minTime, maxTime, paddingVertical } = this.props\n        const { datetime, isLoading } = this.state\n        if (isLoading) {\n            return null\n        }\n        return (\n            <TouchableHighlight\n                style={{ \n                    width: '100%',\n                    height: '100%', \n                    zIndex: 2,\n                    position: 'absolute',\n                    paddingVertical,\n                    // justifyContent: 'center', \n                    alignItems: 'center', \n                    backgroundColor: 'rgba(0,0,0,0.7)' \n                }}\n                // onPress={() => this.props.hideModal()}\n            >\n                <View style={{ }}>\n                    {datetime_type === 'date' &&\n                        <DatePicker\n                            onChange={(date) => this.selectDatetimeConfirm(date)}\n                            inline\n                            selected={datetime}\n                            minDate={new Date(minDatetime)}\n                            maxDate={new Date(maxDatetime)}\n                            onClickOutside={() => this.props.hideModal()}\n                            filterDate={this.isWeekday}\n                        />\n                    }\n\n                    {datetime_type === 'time' && \n                        <DatePicker\n                            onChange={(time) => this.selectDatetimeConfirm(time)}\n                            showTimeSelect\n                            showTimeSelectOnly\n                            timeIntervals={30}\n                            timeCaption=\"Time\"\n                            dateFormat=\"h:mm aa\"\n                            selected={datetime}\n                            minTime={minTime}\n                            maxTime={maxTime}\n                            onClickOutside={() => this.props.hideModal()}\n                        />\n                    }\n                </View>\n            </TouchableHighlight>\n        )\n    }\n}","import React from 'react'\nimport { Image, StyleSheet, View, Text, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatHourMinute, beautifyTime } from '../../util'\nimport TimeModal from '../../parent/timemodal'\n\nexport default class MedRequestModal extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state={\n            medicated_time: new Date(),\n            showTimePicker: false\n        }\n    }\n\n    selectDatetimeConfirm(time){\n        this.setState({\n            medicated_time: time,\n            showTimePicker: false\n        })\n    }\n\n    render() {\n        const { thumbnail, student_name, request } = this.props\n        const { medicated_time, showTimePicker } = this.state\n        const { administered, fever_entry, medication, note, student_id, teacher_id, timestamp } = request\n        const { before_meal, gel, other_type, powder, powder_refrigerated, syrup } = medication\n        // const { other_type, powder, powder_refrigerated, syrup, temperature } = fever_entry\n        const time = formatHourMinute(new Date(timestamp))\n        return (\n            <Card style={{ flex: 1, alignSelf: 'center', width: '100%' }}>\n\n                {showTimePicker ?\n                    <TimeModal\n                        start_date={medicated_time}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showTimePicker: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n\n                <View style={{ flex: 0.35, flexDirection: 'row' }}>\n                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                        <Image\n                            source={thumbnail === '' ?\n                                require('../../../assets/icon-thumbnail.png')\n                                : { uri: thumbnail }\n                            }\n                            style={styles.thumbnailImage}\n                        />\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'flex-start' }}>\n                        <Text style={{ fontSize: 70, fontWeight: 'bold' }}>{student_name}</Text>\n                        <Text style={{ fontSize: 70, fontWeight: 'bold' }}>{time} {before_meal === null ? null : before_meal ? '餐前' : '餐後'}</Text>\n                    </View>\n                </View>\n                <View style={{ flex: 0.65, paddingBottom: 20 }}>\n                    <View style={{ width: '100%', flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'space-evenly' }}>\n                        {powder &&\n                            <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', flexDirection: 'row', marginBottom: 15, marginHorizontal: 7}}>\n                                <Image\n                                    source={require('../../../assets/icon-medication-powder.png')}\n                                />\n                                <View>\n                                    <Text style={{ fontSize: 30 }}>藥粉</Text>\n                                    {powder_refrigerated && <Text style={{ fontSize: 30 }}>需冷藏</Text>}\n                                </View>\n                            </View>\n                        }\n                        {syrup.length !== 0 &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-syrup.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>藥水</Text>\n                                {syrup.map((entry, index) => {\n                                    return (\n                                        <View key={index} style={{ flexDirection: 'row' }}>\n                                            <Text style={{ fontSize: 20 }}>{entry.amount} c.c.</Text>\n                                            {entry.need_refrigerated && <Text style={{ fontSize: 20, marginLeft: 20 }}>需冷藏</Text>}\n                                        </View>\n                                    )\n                                })}\n                            </View>\n                        </View>\n                        }\n                        {gel &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-gel.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>藥膏</Text>\n                                <Text style={{ fontSize: 30 }}>{gel}</Text>\n                            </View>\n                        </View>\n                        }\n                        {other_type &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-pill.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>其他</Text>\n                                <Text style={{ fontSize: 30 }}>{other_type}</Text>\n                            </View>\n                        </View>\n                        }\n                    </View>\n                    <View style={{ width: '97%', marginHorizontal: 10, flexDirection: 'row', justifyContent: 'space-between' }}>\n                        <View style={{ width: '32%', aspectRatio: 1, backgroundColor: '#fff1b5' }}>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 30 }}>備註</Text>\n                            </View>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 25 }}>{note}</Text>\n                            </View>\n                        </View>\n\n                        <View style={{ width: '40%', backgroundColor: '#fa625f' }}>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 30, color: 'white' }}>發燒超過 {fever_entry.temperature}°C</Text>\n                            </View>\n                            <View style={{ padding: 10 }}>\n                                {fever_entry.powder &&\n                                    <Text style={{ fontSize: 25, color: 'white' }}>藥粉 {fever_entry.powder_refrigerated && '需冷藏'}</Text>\n                                }\n\n                                {fever_entry.syrup.length !== 0 &&\n                                    <View style={{ flexDirection: 'row'}}>\n                                        <Text style={{ fontSize: 25, color: 'white' }}>藥水    </Text>\n                                        {fever_entry.syrup.map((entry, index) => {\n                                            return (\n                                                <Text key={index} style={{ fontSize: 25, color: 'white' }}>{entry.amount} c.c. {entry.need_refrigerated && '需冷藏'}</Text>\n                                            )\n                                        })}\n                                    </View>\n                                }\n\n                                {fever_entry.other_type && \n                                    <Text style={{ fontSize: 25, color: 'white' }}>其他    {fever_entry.other_type}</Text>\n                                }\n                            </View>\n                        </View>\n\n                        <View style={{ width: '25%', justifyContent: 'space-between'}}>\n                            <TouchableHighlight \n                                style={{ \n                                    padding: 15, \n                                    backgroundColor: 'rgba(0,0,0,0.2)', \n                                    justifyContent: 'center', \n                                    alignItems: 'center' \n                                }}\n                                onPress={() => this.setState({ showTimePicker: true })}\n                            >\n                                <Text style={{ fontSize: 40 }}>{beautifyTime(medicated_time)}</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight\n                                style={{\n                                    padding: 15,\n                                    width: '100%',\n                                    backgroundColor: administered ? '#dcf3d0' : '#ffe1d0',\n                                    alignItems: 'center'\n                                }}\n                                onPress={() => this.props.showLoginNumberPad()}\n                            >\n                                <Text style={{ fontSize: 40 }}>完成</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnailImage: {\n        height: 180,\n        width: 180,\n        borderRadius: 90\n    }\n})","import React from 'react'\nimport { View, Text, RefreshControl, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport MedRequestModal from './medrequestmodal'\nimport { bindActionCreators } from 'redux';\nimport { initializeRequests, fillMedRequest } from '../../../redux/school/actions/index' \nimport Reloading from '../../reloading'\nimport { formatHourMinute } from '../../util'\nimport LoginNumberPad from '../loginnumberpad'\n\nclass TeacherMedicineLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            refreshing: false,\n            selected_request_id: '',\n            showLoginNumberPad: false\n        }\n        this.handleShowRequest = this.handleShowRequest.bind(this)\n        this.handleFulfillRequest = this.handleFulfillRequest.bind(this)\n    }\n\n    componentDidMount() {\n        // if not loaded, we fetch else do nothing(teacher can fetch new requests by refreshing page)\n        const { request_id } = this.props.route.params\n        if (request_id === null) {\n            this.setState({\n                isLoading: false\n            })\n            return\n        }\n        this.handleShowRequest(request_id)\n    }\n\n    handleShowRequest(request_id) {\n        this.setState({\n            selected_request_id: request_id,\n            isLoading: false\n        })\n    }\n\n    handleEnterPasscode(passcode) {\n        const teacher_id = this.props.class.passcodeTeacherId[passcode]\n        if (teacher_id === undefined) {\n            Alert.alert(\n                'Wrong password',\n                'Please try again',\n                [{text: 'OK'}]\n            )\n        } else {\n            this.setState({ showLoginNumberPad: false })\n            this.handleFulfillRequest(teacher_id)\n        }\n    }\n    \n    hideLoginPad() {\n        this.setState({\n            showLoginNumberPad: false\n        })\n    }\n\n    handleFulfillRequest(teacher_id) {\n        const { selected_request_id } = this.state\n        // console.log(this.props.requests)\n        const { student_id } = this.props.requests.requests[selected_request_id]\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/medicationrequest', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id: selected_request_id,\n                teacher_id,\n                student_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    Alert.alert(\n                        'Error, please try again',\n                        message,\n                        [{text: 'OK'}]\n                    )\n                    return\n                }\n                this.props.fillMedRequest(selected_request_id)\n                this.props.navigation.goBack()\n            })\n            .catch(err => {\n                Alert.alert(\n                    'Error, please try again',\n                    err.message,\n                    [{text: 'OK'}]\n                )\n            })\n    }\n\n    render() {\n        const { selected_request_id, isLoading, showLoginNumberPad } = this.state\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        const { requests } = this.props.requests\n        const { students } = this.props.class\n        const current_request = requests[selected_request_id]\n        // console.log('current_request: ', current_request)\n        // const { administered, fever_entry, medication, note, student_id, teacher_id, timestamp } = current_request\n        return (\n            <View style={{ flex: 1 }}>\n                {showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={this.hideLoginPad}\n                    /> : null\n                }\n                <ScrollView\n                    contentContainerStyle={{ flex: 1, padding: 10 }}\n                    refreshControl={\n                        <RefreshControl\n                            style={{backgroundColor: '#E0FFFF'}}\n                            refreshing={this.state.refreshing}\n                            onRefresh={this.fetchFromDB}\n                            tintColor=\"#ff0000\"\n                            title=\"Loading...\"\n                            titleColor=\"#00ff00\"\n                            colors={['#ff0000', '#00ff00', '#0000ff']}\n                            progressBackgroundColor=\"#ffff00\"\n                        />\n                    }\n                >\n                    <View style={{ flex: 3 }}>\n                        {selected_request_id === '' ?\n                            null\n                        :   \n                            <MedRequestModal\n                                thumbnail={students[current_request.student_id].profile_picture}\n                                student_name={students[current_request.student_id].name}\n                                request={current_request}\n                                showLoginNumberPad={() => this.setState({ showLoginNumberPad: true })}\n                            />\n                        }\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <ScrollView horizontal={true}>\n                            {Object.keys(requests).map((request_id) => {\n                                const { student_id } = requests[request_id]\n                                const { timestamp, administered } = requests[request_id]\n                                const time = formatHourMinute(new Date(timestamp))\n                                return (\n                                    <TouchableHighlight\n                                        key={request_id}\n                                        style={styles.cardContainer}\n                                        underlayColor='transparent'\n                                        onPress={() => this.handleShowRequest(request_id)}\n                                    >\n                                        <Card \n                                            style={{ \n                                                flex: 1,\n                                                backgroundColor: administered ? '#dcf3d0' : '#ffe1d0'\n                                            }}\n                                        >\n                                            <View\n                                                style={{ flex: 1, justifyContent: 'center' }}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>{time}</Text>\n                                            </View>\n                                            <View style={{ flex: 2, justifyContent: 'center', alignItems: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                        : { uri: students[student_id].profile_picture }}\n                                                    style={styles.thumbnailImage}\n                                                />\n                                            </View>\n                                            <View\n                                                style={{ flex: 1, justifyContent: 'center' }}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>{students[student_id].name}</Text>\n                                            </View>\n                                        </Card>\n                                    </TouchableHighlight>\n                                )\n                            })}\n                        </ScrollView>\n                    </View>\n                </ScrollView>\n            </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 170,\n        // backgroundColor: 'transparent',\n        paddingRight: 5\n    },\n    thumbnailImage: {\n        height: 110,\n        width: 110,\n        borderRadius: 55\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        requests: state.medicationrequests\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ initializeRequests, fillMedRequest }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherMedicineLog)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, KeyboardAvoidingView, ScrollView, Alert } from 'react-native'\nimport { Text, View, Button, Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    fetchClassWellnessData,\n    markPresent,\n    sendWellnessDataSuccess,\n    sendWellnessDataFail,\n    addWellnessRecord,\n    invalidateWellnessData\n} from '../../../redux/school/actions/index'\nimport { formatDate, fetchClassData, sendWellnessData } from '../../util';\nimport WellnessForm from '../wellnessform'\n\nclass WellnessLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            show_record: false\n        }\n        this.handleSend = this.handleSend.bind(this)\n        this.addRecord = this.addRecord.bind(this)\n    }\n\n    componentDidMount() {\n        const { record_id_for_update } = this.props.wellness\n        const { isConnected } = this.props.class\n        if (record_id_for_update.size === 0 && isConnected) {\n            this.fetchClassData()\n        }\n        else {\n            this.setState({\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n    }\n\n    async fetchClassData() {\n        const date = new Date()\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const wellnessData = await fetchClassData('wellness', this.props.class.class_id, start_date, end_date)\n        // console.log(wellnessData)\n        this.denormalize(wellnessData)\n        this.props.fetchClassWellnessData(wellnessData.data)\n        this.setState({\n            isLoading: false\n        })\n    }\n\n    denormalize(wellnessData) {\n        if (!Object.keys(wellnessData.data.records).length){\n            return\n        }\n        const { records } = wellnessData.data\n        for (var record_id in records) {\n            wellnessData.data.records[record_id].time = new Date(records[record_id].time)\n        }\n    }\n\n    hasUnsentRecord(record_id_list) {\n        const { record_id_for_update } = this.props.wellness\n        var has_unsent_record = false\n        for (var i = 0; i < record_id_list.length; i++) {\n            if (record_id_for_update.has(record_id_list[i])) {\n                has_unsent_record = true\n                break\n            }\n        }\n        return has_unsent_record\n    }\n\n    addRecord(student_id) {\n        const record_amount = this.props.wellness.by_student_id[student_id].length\n        if (record_amount === 2) {\n            Alert.alert(\n                '今天已經量了兩次體溫了',\n                '',\n                [{text: 'OK'}]\n            )\n            return\n        }\n        this.props.addWellnessRecord(student_id)\n    }\n\n    async handleSend() {\n        if (!this.wellnessDataValidated()) {\n            return\n        }\n        const { wellness } = this.props\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        const sendDataResult = await sendWellnessData(wellness, this.props.class.class_id, formatDate(new Date))\n        if (sendDataResult.success) {\n            sendDataResult.data.forEach(student_id => {\n                this.props.markPresent(student_id, new Date)\n            })\n            this.props.sendWellnessDataSuccess()\n            this.props.navigation.goBack()\n        } else {\n            this.props.sendWellnessDataFail(sendDataResult.message)\n        }\n    }\n\n    wellnessDataValidated() {\n        const { records, record_id_for_update } = this.props.wellness\n        let validated = true\n        record_id_for_update.forEach(record_id => {\n            if (records[record_id].temperature === '') {\n                this.props.invalidateWellnessData(record_id, 'Temperature is not filled out')\n                validated = false\n            } else if (records[record_id].status === '') {\n                this.props.invalidateWellnessData(record_id, 'Health status is not filled out')\n                validated = false\n            }\n        })\n        return validated\n    }\n\n    render() {\n        const { by_student_id, records } = this.props.wellness\n        const { teacher_id } = this.props.route.params\n        const date = this.state.date\n        console.log('wellness: ', this.props.wellness)\n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1\n                }}\n                // behavior='padding'\n                // keyboardVerticalOffset={100}\n                enabled\n            >\n                <View style={{ flexDirection: 'row', width: '90%', justifyContent: 'space-between', alignSelf: 'center', alignItems: 'center'}}>\n                    <Text style={{ fontSize: 40 }}>{formatDate(date)}</Text>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#dcf3d0', padding: 10  }}\n                        onPress={this.handleSend}>\n                        <Text style={{ fontSize: 40}}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n                <ScrollView contentContainerStyle={{ alignItems: 'center', marginBottom: 20 }}>\n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const record_id_list = by_student_id[student_id]\n                        return(\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card>\n                                    <CardItem style={{ flex: 1, flexDirection: 'row' }}>\n                                        <TouchableHighlight\n                                            style={styles.childThumbnail}\n                                            // onPress={() => this.addRecord(student_id)}\n                                        >\n                                            <Image\n                                                source={\n                                                    this.props.class.students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: this.props.class.students[student_id].profile_picture}\n                                                }\n                                                style={styles.thumbnailImage}\n                                            />\n                                        </TouchableHighlight>\n                                        <View style={{ flex: 3 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 10 }}>\n                                                <View style={{ flex: 1 }}>\n                                                    <Text style={{ fontSize: 25}}>{this.props.class.students[student_id].name}</Text>\n                                                </View>\n                                                <View style={{ flex: 1, alignItems: 'flex-end' }}>\n                                                    {this.hasUnsentRecord(record_id_list) ? \n                                                        <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                    : null}\n                                                </View>\n                                            </View>\n                                            {record_id_list.map((record_id, index) => {\n                                                return (\n                                                    <View style={{flex:1}} key={record_id}>\n                                                        { index === 0 ?\n                                                            <Text>早上</Text>\n                                                            : <Text>下午</Text>\n                                                        }\n                                                        <WellnessForm\n                                                            student_id={student_id}\n                                                            record_id={record_id}\n                                                            teacher_id={teacher_id}\n                                                        />\n                                                    </View>\n                                                )\n                                            })}\n                                        </View>\n                                    </CardItem>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        flex: 1,\n        backgroundColor: 'white',\n        marginLeft: -7,\n    },\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    },\n    subHeading: {\n        width: 355,\n        height: 45,\n        marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        wellness: state.healthstatus,\n        unmarked: state.attendance.unmarked\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            fetchClassWellnessData,\n            markPresent,\n            sendWellnessDataSuccess,\n            sendWellnessDataFail,\n            addWellnessRecord,\n            invalidateWellnessData\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (WellnessLog)","import React from \"react\"\nimport { View, Text } from \"react-native\"\n\n\nexport default class Header extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n    render() {\n        return (\n            <View style={{flexDirection: 'row'}}>\n                <Text style={{ fontSize: 30 }}>\n                    {this.props.title}\n                </Text>\n            </View>\n            \n        )\n    }\n}","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, TextInput, Text, View, KeyboardAvoidingView, Alert, Keyboard } from 'react-native'\nimport { Container, Content, Card, CardItem, Body, Button, Toast } from 'native-base'\nimport { connect } from 'react-redux';\nimport Header from '../../header'\nimport { bindActionCreators } from 'redux';\nimport {\n    rateAppetite,\n    clearRatings,\n    setAllRatingsToGreat,\n    fetchClassAppetiteData,\n    onSendAppetiteSuccess,\n    alertErrMessage,\n    markWaterDrank,\n    editFruitName,\n    clearAppetiteErrorMessage,\n    addStudentIdForUpdate\n} from '../../../redux/school/actions/index'\nimport { formatDate, fetchClassData } from '../../util'\n\nclass TeacherAppetiteLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            mealType: '',\n            selectedForCustomize: new Set(),\n            editingFruitType: false,\n            students_with_records: [],\n        }\n        this.handleRateFoodWellness = this.handleRateFoodWellness.bind(this)\n        this.handleSend = this.handleSend.bind(this)\n        this.handleClearAll = this.handleClearAll.bind(this)\n        this.handleSetAll = this.handleSetAll.bind(this)\n    }\n\n    componentDidMount() {\n        const { updatedStudents } = this.props.appetite\n        const { isConnected } = this.props.class\n        if (updatedStudents.size > 0 || !isConnected) {\n            this.setState({\n                isLoading: false\n            })\n        } else {\n            this.fetchClassData()\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n        // this.keyboardDidHideListener = Keyboard.addListener('keyboardDidHide', console.log('keyboard hid'))\n    }\n\n    async fetchClassData() {\n        const date = new Date()\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const appetiteData = await fetchClassData('appetite', this.props.class.class_id, start_date, end_date)\n        if (appetiteData.data[start_date] === undefined) {\n            return \n        }\n        const { fruit_name, ratings } = appetiteData.data[start_date]\n        this.props.fetchClassAppetiteData(fruit_name, ratings)\n        this.setState({\n            isLoading: false,\n            students_with_records: Object.keys(ratings)\n        })\n    }\n\n    editFruitName(fruit_name) {\n        this.props.editFruitName(fruit_name)\n    }\n\n    fruitNameEditorOnBlur() {\n        const { students_with_records } = this.state\n        this.setState({ editingFruitType: false })\n        if (this.props.appetite.fruit_name === '') {\n            this.props.editFruitName('水果')\n        }\n\n        if (students_with_records.length > 1) {\n            this.props.addStudentIdForUpdate(students_with_records)\n        }\n    }\n\n    handleRateFoodWellness(student_id, rating) {\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            const { selectedForCustomize } = this.state\n            const {teacher_id } = this.props.route.params\n            selectedForCustomize.delete(student_id)\n            this.setState({\n                selectedForCustomize\n            })\n            this.props.rateAppetite(student_id, this.state.mealType, rating, teacher_id)\n        }\n    }\n\n    onClickOther(student_id) {\n        const { mealType, selectedForCustomize } = this.state\n        const {teacher_id } = this.props.route.params\n        if (mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.setState({\n                selectedForCustomize: new Set([...selectedForCustomize, student_id])\n            })\n            this.props.rateAppetite(student_id, this.state.mealType, '', teacher_id)\n        }\n    }\n\n    isRatingCustomized(rating) {\n        const { mealType } = this.state\n        if (mealType === '') {\n            return false\n        } else if (rating === 'Awesome' || rating === 'Good' || rating === 'Ok' || rating === '') {\n            return false\n        }\n        return true\n    }\n\n    onCustomizeRating(student_id, customized_text) {\n        const {teacher_id } = this.props.route.params\n        this.props.rateAppetite(student_id, this.state.mealType, customized_text, teacher_id)\n    }\n\n    customizedRatingOnBlur(student_id) {\n        const { selectedForCustomize } = this.state\n        selectedForCustomize.delete(student_id)\n        this.setState({\n            selectedForCustomize\n        })\n    }\n\n    markWaterDrank(student_id) {\n        const {teacher_id } = this.props.route.params\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.props.markWaterDrank(student_id, this.state.mealType, teacher_id)\n        }\n    }\n\n    handleSetAll() {\n        const {teacher_id } = this.props.route.params\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.props.setAllRatingsToGreat(this.state.mealType, teacher_id)\n        }\n    }\n\n    handleClearAll() {\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.props.clearRatings(this.state.mealType)\n        }\n    }\n\n    handleSend() {\n        const { isConnected } = this.props.class\n        const {updatedStudents, fruit_name} = this.props.appetite\n        var data_objs = [],\n            appetite_log = this.props.appetite.ratings\n        \n        if (updatedStudents.size === 0) {\n            this.props.navigation.goBack()\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        updatedStudents.forEach(student_id => {\n            const ratings = appetite_log[student_id] // get ratings obj for student\n            const data = { // create query data and append to data_objs\n                student_id,\n                b_rating: ratings.Breakfast,\n                f_rating: ratings.Fruit,\n                l_rating: ratings.Lunch,\n                s_rating: ratings.Snack,\n                teacher_id: ratings.teacher_id\n            }\n            data_objs.push(data)\n        })\n        \n        const request_body = {\n            date: formatDate(new Date()),\n            fruit_name,\n            obj: data_objs\n        }\n\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/appetite', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        }).then(res => res.json())\n            .then(resJson => {\n                // console.log(resJson)\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    this.props.alertErrMessage(message)\n                } else {\n                    this.props.onSendAppetiteSuccess()\n                    this.props.navigation.goBack()\n                }\n            })\n            .catch(err => {\n                this.props.alertErrMessage(err)\n            })\n    }\n\n    // keyboardDidHide = () => {\n    //     Keyboard.dismiss();\n    // }\n\n    componentWillUnmount() {\n        // this.keyboardDidHideListener.remove()\n    }\n\n    render() {\n        if (this.props.appetite.err_message !== ''){\n            Alert.alert(\n                'Error!',\n                this.props.appetite.err_message,\n                [{text: 'OK', onPress: () => this.props.clearAppetiteErrorMessage()}]\n            )\n        }\n        const { mealType, selectedForCustomize, editingFruitType } = this.state\n        var date = new Date()\n        // console.log(this.props.appetite)\n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1,\n                    backgroundColor: mealType === 'Breakfast' ? '#ffe1d0'\n                                    : mealType === 'Fruit' ? '#ffddb7'\n                                    : mealType === 'Lunch' ? '#fff1b5'\n                                        : mealType === 'Snack' ? '#dcf3d0'\n                                    : 'transparent'\n                }}\n                // behavior='padding'\n                // keyboardVerticalOffset={120}\n                enabled\n            >\n                <View style={styles.subHeading}>\n                    <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#b5e9e9', padding: 10 }}\n                        onPress={this.handleSetAll}>\n                        <Text style={{ color: 'grey', fontSize: 40 }}>全讚</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#ffe1d0', padding: 10  }}\n                        onPress={this.handleClearAll}>\n                        <Text style={{ color: 'grey', fontSize: 40 }}>全部清除</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#dcf3d0', padding: 10  }}\n                        onPress={this.handleSend}>\n                        <Text style={{ color: 'grey', fontSize: 40 }}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n                <Content contentContainerStyle={{ alignItems: 'center' }}>\n                    <View style={styles.mealButtons}>\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: mealType === 'Breakfast' ? '#fa625f' : '#ffe1d0',\n                                width: '23%',\n                                height: 60,\n                                justifyContent: 'center',\n                                marginHorizontal: '1%',\n                                padding: 10\n                            }}\n                            underlayColor='#fa625f'\n                            onPress={() => this.setState({ mealType: 'Breakfast', editingFruitType: false })}\n                        >\n                            <Text style={styles.mealButtonText}>早餐</Text>\n                        </TouchableHighlight>\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: mealType === 'Fruit' ? '#ff8944' : '#ffddb7',\n                                width: '23%',\n                                height: 60,\n                                justifyContent: 'center',\n                                marginHorizontal: '1%',\n                                // padding: 10\n                            }}\n                            underlayColor='#ff8944'\n                            onPress={() => this.setState({ mealType: 'Fruit' })}\n                            onLongPress={() => this.setState({ mealType: 'Fruit', editingFruitType: true })}\n                        >\n                            {editingFruitType ?\n                                <View style={{ flex: 1 }}>\n                                    <Text style={{ paddingLeft: 5 }}>水果:</Text>\n                                    <TextInput\n                                        autoFocus={true}\n                                        selectTextOnFocus={true}\n                                        style={{ width: '95%', alignSelf: 'center', fontSize: 25, textAlign: 'center', color: 'grey', borderWidth: 1 }}\n                                        onChangeText={fruit_name => this.editFruitName(fruit_name)}\n                                        value={this.props.appetite.fruit_name}\n                                        onBlur={() => this.fruitNameEditorOnBlur()}\n                                    />\n                                </View>\n                            :   <Text style={styles.mealButtonText}>{this.props.appetite.fruit_name}</Text>\n                            }\n                        </TouchableHighlight>\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: mealType === 'Lunch' ? '#f4d41f' : '#fff1b5',\n                                width: '23%',\n                                height: 60,\n                                justifyContent: 'center',\n                                marginHorizontal: '1%',\n                                padding: 10\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.setState({ mealType: 'Lunch', editingFruitType: false })}\n                        >\n                            <Text style={styles.mealButtonText}>午餐</Text>\n                        </TouchableHighlight>\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: mealType === 'Snack' ? '#00c07f' : '#dcf3d0',\n                                width: '23%',\n                                height: 60,\n                                justifyContent: 'center',\n                                marginHorizontal: '1%',\n                                padding: 10\n                            }}\n                            underlayColor='#00c07f'\n                            onPress={() => this.setState({ mealType: 'Snack', editingFruitType: false })}\n                        >\n                            <Text style={styles.mealButtonText}>點心</Text>\n                        </TouchableHighlight>\n                    </View>\n                    \n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const meal_rating = mealType === '' ? '' : this.props.appetite.ratings[student_id][mealType].slice(0,-1)\n                        const water_drank = mealType === '' ? false : this.props.appetite.ratings[student_id][mealType].slice(-1) === '1'\n                        return (\n                            <View\n                                key={student_id}\n                                style={{ width: '98%' }}\n                            >\n                                <Card>\n                                    <CardItem>\n                                        <View style={styles.childThumbnail}>\n                                            <Image\n                                                source={\n                                                    this.props.class.students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: this.props.class.students[student_id].profile_picture}\n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View style={{ width: '75%' }}>\n                                            <View style={{ flex: 1 }}>\n                                                <View style={{ flex: 1, flexDirection: 'row' }}>\n                                                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                                                        <Text style={{ fontSize: 30, paddingLeft: 18, alignSelf: 'center' }}>\n                                                            {this.props.class.students[student_id].name}\n                                                        </Text>\n                                                    </View>\n                                                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: '80%',\n                                                                borderWidth: 2,\n                                                                borderColor: '#368cbf',\n                                                                padding: 10,\n                                                                justifyContent: 'center',\n                                                                backgroundColor: water_drank ? '#368cbf': 'white'\n                                                            }}\n                                                            onPress={() => this.markWaterDrank(student_id)}\n                                                        >\n                                                            <Text style={{\n                                                                textAlign: 'center',\n                                                                color: water_drank ? '#D3D3D3': 'grey',\n                                                                fontSize: 17\n                                                            }}>有喝水</Text>\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                    <View style={{ flex: 2, alignItems: 'flex-end'}}>\n                                                        {this.props.appetite.updatedStudents.has(student_id) ?\n                                                            <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                            : null\n                                                        }\n                                                    </View>\n                                                </View>\n                                                <View style={styles.cardBody}>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '22%',\n                                                            height: '100%',\n                                                            margin: 5,\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === 'Awesome' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 10\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, 'Awesome')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === 'Awesome' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            非常好\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '22%',\n                                                            height: '100%',\n                                                            margin: 5,\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === 'Good' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 10\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, 'Good')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === 'Good' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            還不錯\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '22%',\n                                                            height: '100%',\n                                                            margin: 5,\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === 'Ok' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 10\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, 'Ok')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === 'Ok' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            吃不多\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '22%',\n                                                            height: '100%',\n                                                            margin: 5,\n                                                            justifyContent: 'center',\n                                                            backgroundColor:\n                                                                this.isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ?\n                                                                    '#368cbf'\n                                                                    : '#b5e9e9',\n                                                            padding: 10\n                                                        }}\n                                                        onPress={() => this.onClickOther(student_id)}\n                                                    >\n                                                        {this.isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ?\n                                                            <TextInput\n                                                                style={{\n                                                                    textAlign: 'center',\n                                                                    color: '#D3D3D3',\n                                                                    fontSize: 20\n                                                                }}\n                                                                autoFocus={meal_rating === '' ? true : false}\n                                                                onChangeText={customized_text => this.onCustomizeRating(student_id, customized_text)}\n                                                                value={meal_rating}\n                                                                onBlur={() => this.customizedRatingOnBlur(student_id)}\n                                                            />\n                                                            : <Text\n                                                                style={{\n                                                                    textAlign: 'center',\n                                                                    color: this.isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ? '#D3D3D3' : 'grey',\n                                                                    fontSize: 20\n                                                                }}\n                                                            >\n                                                                Other\n                                                            </Text>\n                                                        }\n                                                    </TouchableHighlight>\n                                                </View>\n                                            </View>\n                                        </View>\n                                    </CardItem>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </Content>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        width: '25%',\n        // width: 100,\n        // height: '100%',\n        justifyContent: 'center',\n        alignItems: 'center'\n        // marginLeft: -7,\n    },\n    cardBody: {\n        flex: 1,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    foodButton: {\n        width: 70,\n        alignSelf: 'center',\n        margin: 5,\n        justifyContent: 'center',\n        backgroundColor: '#b5e9e9'\n    },\n    thumbnailImage: {\n        height: 130,\n        width: 130,\n        borderRadius: 65\n    },\n    subHeading: {\n        width: '99%',\n        // height: 45,\n        paddingHorizontal: '4%',\n        // marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        // backgroundColor: '#ccd2dd',\n        zIndex: 2\n    },\n    mealButtons: {\n        width: '99%',\n        // height: 45,\n        marginVertical: 15,\n        // marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        // zIndex: 1,\n        // position: 'absolute'\n    },\n    mealButtonText: {\n        fontSize: 30,\n        textAlign: 'center'\n    },\n    buttonText: {\n        color: 'grey',\n        textAlign: 'center'\n    }\n})\n\nconst mapStatesToProps = (state) => {\n    return {\n        class: state.classInfo,\n        appetite: state.appetite\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            rateAppetite,\n            clearRatings,\n            setAllRatingsToGreat,\n            fetchClassAppetiteData,\n            onSendAppetiteSuccess,\n            alertErrMessage,\n            markWaterDrank,\n            editFruitName,\n            clearAppetiteErrorMessage,\n            addStudentIdForUpdate\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStatesToProps, mapDispatchToProps) (TeacherAppetiteLog)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, Alert } from 'react-native'\nimport { Container, Content, Text, View, Card, Toast} from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    setSleepTime,\n    setWakeTime,\n    fetchClassSleepData,\n    clearPendingSleepUpdate,\n    createSleepRecordSuccess,\n    createSleepRecordFail,\n    editSleepRecordSuccess,\n    editSleepRecordFail,\n    removeSleepRecord,\n    removeSleepRecordSuccess,\n    removeSleepRecordFail,\n    alertSleeplogErrorMessage,\n    clearSleeplogErrorMessage,\n    removeWakeTime,\n    markRecordError,\n    markRecordCorrect\n} from '../../../redux/school/actions/index'\nimport { formatDate, formatTime, fetchClassData } from '../../util'\nimport Reloading from '../../reloading'\nimport TimeModal from '../../parent/timemodal'\n\n\nclass TeacherSleepLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            showIOSDatePicker: false,\n            student_id: '',\n            index: -1,\n            recordType: '',\n            teacher_id: '',\n            confirmDelete: false,\n            showDateTimeModal: false\n        }\n        this.handleOnClick = this.handleOnClick.bind(this)\n        this.handleSend = this.handleSend.bind(this)\n        this.updateReducerTime = this.updateReducerTime.bind(this)\n        this.setTime = this.setTime.bind(this)\n    }\n\n    componentDidMount() {\n        const { newDataForCreate, oldDataForEdit } = this.props.sleep\n        const { isConnected } = this.props.class\n        const { teacher_id } = this.props.route.params\n        this.setState({ teacher_id })\n        if ((newDataForCreate.size + oldDataForEdit.size === 0) && isConnected) {\n            this.fetchClassData()\n        }\n        else {\n            this.setState({\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n    }\n\n    async fetchClassData() {\n        const date = new Date()\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const sleepData = await fetchClassData('sleep', this.props.class.class_id, start_date, end_date)\n        this.denormalize(sleepData)\n        this.props.fetchClassSleepData(sleepData.data)\n        this.setState({\n            isLoading: false\n        })\n    }\n\n    denormalize(sleepData) {\n        if (!sleepData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = sleepData.data.records\n        for (var record_id in by_id) {\n            by_id[record_id].sleep_time = new Date(by_id[record_id].sleep_time)\n            by_id[record_id].wake_time = by_id[record_id].wake_time === null ? null : new Date(by_id[record_id].wake_time)\n        }\n        sleepData.data.records.by_id = by_id\n    }\n\n    hasUnsentRecord(student_id) {\n        const { newDataForCreate, oldDataForEdit, by_student_id } = this.props.sleep\n        record_id_array = by_student_id[student_id]\n        var hasUnsentRecord = false\n        for (var i = 0; i < record_id_array.length; i++) {\n            if (newDataForCreate.has(record_id_array[i]) || oldDataForEdit.has(record_id_array[i])) {\n                hasUnsentRecord = true\n                break\n            }\n        }\n        return hasUnsentRecord\n    }\n\n    handleOnClick(student_id) {\n        const record_id_array = this.props.sleep.by_student_id[student_id]\n        const records = this.props.sleep.records.by_id\n        const last_record = record_id_array.length > 0 ? records[record_id_array[record_id_array.length - 1]] : null\n        const current_wake_time = last_record ? last_record.wake_time : null\n\n        if (!record_id_array.length || current_wake_time) {\n            this.props.setSleepTime(student_id, null, new Date(), this.state.teacher_id)\n        } else {\n            this.props.setWakeTime(student_id, record_id_array.length - 1, new Date(), this.state.teacher_id)\n        }\n        this.checkLastRecord(student_id, records, record_id_array)\n    }\n\n    checkLastRecord(student_id, records, record_id_array) {\n        const n = record_id_array.length\n        const last_record_id = record_id_array[record_id_array.length - 1]\n        const last_record = records[last_record_id]\n        if (last_record.wake_time !== null && last_record.sleep_time.getTime() >= last_record.wake_time.getTime()) {\n            this.props.markRecordError([last_record_id])\n        } \n        \n        if (n > 1) {\n            const last_second_record_id = record_id_array[record_id_array.length - 2]\n            const last_second_record = records[last_second_record_id]\n            if (last_record.sleep_time >= last_second_record.sleep_time && last_record.sleep_time <= last_second_record.wake_time) {\n                this.props.markRecordError([last_record_id])\n            }\n        }\n    }\n\n    setTime(recordType, student_id, index, start_time) {\n        this.setState({\n            student_id,\n            index,\n            recordType,\n            showDateTimeModal: true,\n            start_time: start_time ? start_time : new Date()\n        })\n    }\n\n    updateReducerTime(index, time) {\n        this.setState({ showDateTimeModal: false })\n        if (this.state.recordType === 'sleep') {\n            this.props.setSleepTime(this.state.student_id, index, time, this.state.teacher_id)\n        } else {\n            this.props.setWakeTime(this.state.student_id, index, time, this.state.teacher_id)\n        }\n        this.checkRecord(this.state.student_id, index)\n    }\n\n    checkRecord(student_id, index) {\n        const record_id_array = this.props.sleep.by_student_id[student_id]\n        const records = this.props.sleep.records.by_id\n        const record_id = record_id_array[index]\n        const record = records[record_id]\n        const { records_with_error } = this.props.sleep\n        let prev_record_id = null\n        let next_record_id = null\n\n        if (index < 0 || index > record_id_array.length - 1) {\n            return\n        }\n\n        if (record.wake_time !== null) {\n            if(record.sleep_time.getTime() >= record.wake_time.getTime()) {\n                this.props.markRecordError([record_id])\n                return\n            }\n        }\n\n        if (index > 0) {\n            prev_record_id = record_id_array[index-1]\n            const prev_record = records[prev_record_id]\n            if (//record.sleep_time.getTime() >= prev_record.sleep_time.getTime() && \n                prev_record.wake_time !== null &&\n                record.sleep_time.getTime() <= prev_record.wake_time.getTime()) {\n                this.props.markRecordError([record_id])\n                return\n            }\n        }\n\n        if (index < record_id_array.length - 1) {\n            next_record_id = record_id_array[index+1]\n            const next_record = records[next_record_id]\n            if (record.wake_time >= next_record.sleep_time) {\n                this.props.markRecordError([record_id])\n                return\n            }\n        }\n\n        this.props.markRecordCorrect(record_id)\n\n        if (prev_record_id !== null && records_with_error.has(prev_record_id)) {\n            this.checkRecord(student_id, index-1)\n            // console.log('records_with_error.has(prev_record_id: ', records_with_error.has(prev_record_id))\n        }\n\n        if (next_record_id !== null && records_with_error.has(next_record_id)) {\n            // console.log('records_with_error.has(next_record_id: ', records_with_error.has(next_record_id))\n            this.checkRecord(student_id, index+1)\n        }\n    }\n\n    confirmToRemoveWakeTime(record_id, index, student_id) {\n        const record_id_array = this.props.sleep.by_student_id[student_id]\n        if (index !== record_id_array.length - 1) {\n            // cannot remove wake time if it is not the most recent record\n            this.props.alertSleeplogErrorMessage('這個睡眠記錄並不能刪除，只能改選')\n            return\n        }\n        Alert.alert(\n            '確定要刪除?',\n            '',\n            [\n                { text: 'Yes', onPress: () => this.props.removeWakeTime(record_id, this.state.teacher_id) },\n                { text: 'Cancel', style: 'cancel'}]\n        )\n    }\n\n    async handleSend() {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.setState({\n            isLoading: true\n        })\n        const { newDataForCreate, oldDataForEdit } = this.props.sleep\n        \n        if (newDataForCreate.size) {\n            const createSleepRecordRes = await this.createRecord()\n            if (createSleepRecordRes.success) {\n                // console.log('SUCCESS')\n                this.props.createSleepRecordSuccess()\n            } else {\n                this.props.createSleepRecordFail()\n                return\n            }\n        }\n\n        if (oldDataForEdit.size) {\n            const editSleepRecordRes = await this.editRecord()\n            if (editSleepRecordRes.success) {\n                this.props.editSleepRecordSuccess()\n            } else {\n                this.props.editSleepRecordFail()\n                return\n            }\n        }\n\n        this.props.navigation.goBack()\n    }\n\n    async createRecord() {\n        const { newDataForCreate, records } = this.props.sleep\n        \n        const data_objs = []\n        newDataForCreate.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n\n        this.normalize(data_objs)\n\n        var request_body = {\n            date: formatDate(this.state.date),\n            data_objs\n        }\n\n        const createSleepRecordRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('sleep resJson: ', resJson)\n                if (resJson['statusCode'] > 200) {\n                    return {\n                        success: false,\n                        status_code: resJson['statusCode'],\n                        data: resJson.message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return createSleepRecordRes\n    }\n\n    async editRecord() {\n        const { oldDataForEdit, records } = this.props.sleep\n        const data_objs = []\n        oldDataForEdit.forEach(record_id => {\n            data_objs.push({\n                record_id,\n                ...records.by_id[record_id]\n            })\n        })\n\n        this.normalize(data_objs)\n\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const editRecordRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        }).then(res => res.json())\n        .then(resJson => {\n            if (resJson['statusCode'] > 200) {\n                return {\n                    success: false,\n                    status_code: resJson['statusCode'],\n                    data: resJson.message\n                }\n            }\n            return {\n                success: true,\n                status_code: 200,\n                data: resJson\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                status_code: 500,\n                data: err\n            }\n        })\n        return editRecordRes\n    }\n\n    confirmToRemoveRecord(record_id, student_id) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'Yes', onPress: () => this.removeRecord(record_id, student_id) },\n                { text: 'Cancel', style: 'cancel' }\n            ]\n        )\n    }\n\n    removeRecord(record_id, student_id) {\n        const { newDataForCreate } = this.props.sleep\n        const { isConnected } = this.props.class\n\n        if (newDataForCreate.has(record_id)) {\n            this.props.removeSleepRecordSuccess(record_id, student_id)\n            return\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep`\n        fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                record_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    this.props.removeSleepRecordFail(message)\n                    return {\n                        success: false,\n                        statusCode,\n                        message\n                    }\n                }\n                this.props.removeSleepRecordSuccess(record_id, student_id)\n                return {\n                    success: true,\n                    statusCode,\n                    message\n                }\n            })\n            .catch(err => {\n                this.props.removeSleepRecordFail(err)\n                return {\n                    success: false,\n                    message: err\n            }\n        })\n    }\n\n    normalize(data_objs) {\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].sleep_time = formatTime(data_objs[i].sleep_time)\n            data_objs[i].wake_time = data_objs[i].wake_time === null ? null : formatTime(data_objs[i].wake_time)\n        }\n    }\n\n    render() {\n        if (this.props.sleep.errorMessage !== ''){\n            Alert.alert(\n                'Add new record fail',\n                this.props.sleep.errorMessage,\n                [{text: 'OK', onPress: () => this.props.clearSleeplogErrorMessage()}]\n            )\n        }\n        const { records_with_error } = this.props.sleep\n        const { showDateTimeModal, start_time, date } = this.state\n        // console.log('records_with_error: ', records_with_error)\n        // console.log('showDateTimeModal: ', showDateTimeModal)\n        if (this.state.isLoading) {\n            return <Reloading />\n        }\n        return (\n            <Container>\n                {showDateTimeModal ?\n                    <TimeModal\n                        start_date={start_time}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showDateTimeModal: false })}\n                        selectDatetimeConfirm={(time) => this.updateReducerTime(this.state.index, time)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n                <View style={styles.subHeading}>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                        <TouchableHighlight\n                            style={{ alignSelf: 'flex-end', backgroundColor: '#dcf3d0', padding: 10, marginRight: 50 }}\n                            onPress={this.handleSend}\n                            underlayColor=\"#00c07f\"\n                        >\n                            <Text style={{ fontSize: 40, color: 'grey' }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n                <Content contentContainerStyle={{ alignItems: 'center' }}>\n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const record_id_array = this.props.sleep.by_student_id[student_id] // [record_id, ...]\n                        const records = this.props.sleep.records.by_id\n                        const last_record = record_id_array.length > 0 ? records[record_id_array[record_id_array.length - 1]] : null\n                        const current_sleep_time = last_record ? last_record.sleep_time : null\n                        const current_wake_time = last_record ? last_record.wake_time : null\n                        return(\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, paddingVertical: 15 }}>\n                                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <TouchableHighlight\n                                                key={student_id}\n                                                style={styles.thumbnail}\n                                                onPress={() => this.handleOnClick(student_id)}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={{\n                                                        width: 140,\n                                                        height: 140,\n                                                        borderRadius: 70,\n                                                        borderWidth: 8,\n                                                        borderColor: current_sleep_time !== null ? (current_wake_time === null ? '#ffe1d0' : '#dcf3d0') : '#dcf3d0'\n                                                    }} />\n                                            </TouchableHighlight>\n                                        </View>\n                                        <View style={{ flex: 3 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row', padding: 10 }}>\n                                                <View style={{ flex: 1 }}>\n                                                    <Text style={{ fontSize: 30 }}>{this.props.class.students[student_id].name}</Text>\n                                                </View>\n                                                <View style={{ flex: 1, alignItems: 'flex-end' }}>\n                                                    {this.hasUnsentRecord(student_id) ? \n                                                        <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                    : null}\n                                                </View>\n                                            </View>\n                                            <View style={styles.cardBody}>\n                                                <View style={{ width: '40%', height: '100%', paddingLeft: 5 }}>\n                                                    <Text style={{ fontSize: 20 }}>從</Text>\n                                                </View>\n                                                <View style={{ width: '40%', height: '100%', paddingLeft: 5 }}>\n                                                    <Text style={{ fontSize: 20 }}>到</Text>\n                                                </View>\n                                            </View>\n                                            {record_id_array.map((record_id, index) => {\n                                                let { sleep_time, wake_time } = records[record_id]\n                                                return (\n                                                    <View key={record_id} style={{\n                                                        ...styles.cardBody, \n                                                        borderWidth: 2, \n                                                        borderColor: records_with_error.has(record_id) ? 'red' : 'white'\n                                                    }}>\n                                                        <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10}}\n                                                                onPress={() => this.setTime('sleep', student_id, index, sleep_time)}\n                                                            >\n                                                                {sleep_time === null ?\n                                                                    <Text style={{ fontSize: 30, textAlign: 'center' }}>選擇時間</Text> :\n                                                                    <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                        {sleep_time.getHours() + ':' + sleep_time.getMinutes()}\n                                                                    </Text>}\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                        <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10 }}\n                                                                onPress={() => this.setTime('wake', student_id, index, wake_time)}\n                                                                onLongPress={() => this.confirmToRemoveWakeTime(record_id, index, student_id)}\n                                                            >\n                                                                {wake_time === null ?\n                                                                    <Text style={{ fontSize: 30, textAlign: 'center' }}>選擇時間</Text> :\n                                                                    <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                        {wake_time.getHours() + ':' + wake_time.getMinutes()}\n                                                                    </Text>}\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                        <View style={{ width: '20%', marginRight: '4%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#ffe1d0', borderRadius: 10 }}\n                                                                onPress={() => this.confirmToRemoveRecord(record_id, student_id)}\n                                                            >\n                                                                <Text style={{ fontSize: 30, textAlign: 'center' }}>移除</Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                    </View>\n                                                )\n                                            })}\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </Content>\n                {/* {this.state.showIOSDatePicker ?\n                    <View style={{ height: 200, justifyContent: 'center'}}>\n                        <DatePickerIOS\n                            mode={'time'}\n                            date={new Date()}\n                            onDateChange={(time) => this.updateReducerTime(this.state.index, time)}\n                        />\n                    </View> : null} */}\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnail: {\n        // width: 100,\n        // height: 100,\n        // borderRadius: 50,\n        // backgroundColor: 'transparent',\n        // marginLeft: -7,\n    },\n    subHeading: {\n        // width: 355,\n        // height: 45,\n        // marginTop: 10,\n        // padding: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        // justifyContent: 'space-between',\n    },\n    cardBody: {\n        flex: 1,\n        flexDirection: 'row',\n        marginVertical: 6\n    },\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        sleep: state.sleep\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setSleepTime,\n            setWakeTime,\n            fetchClassSleepData,\n            clearPendingSleepUpdate,\n            createSleepRecordSuccess,\n            createSleepRecordFail,\n            editSleepRecordSuccess,\n            editSleepRecordFail,\n            removeSleepRecord,\n            removeSleepRecordSuccess,\n            removeSleepRecordFail,\n            alertSleeplogErrorMessage,\n            clearSleeplogErrorMessage,\n            removeWakeTime,\n            markRecordError,\n            markRecordCorrect\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherSleepLog)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, View, Text, TextInput, Alert} from 'react-native'\nimport { Container, Content, Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    editMilkAmount,\n    addMilkRecord,\n    fetchClassMilkData,\n    createDataSuccess,\n    createDataFail,\n    editDataSuccess,\n    editDataFail,\n    removeRecord,\n    removeMilkRecordSuccess,\n    removeMilkRecordFail,\n    editMilkTime\n} from '../../../redux/school/actions/index'\nimport { formatTime, formatDate, fetchClassData } from '../../util'\nimport Reloading from '../../reloading'\nimport TimeModal from '../../parent/timemodal'\n\nclass TeacherMilkLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            showDateTimeModal: false,\n            record_id: ''\n        }\n        this.handleSend = this.handleSend.bind(this)\n        this.handleOnAddRecord = this.handleOnAddRecord.bind(this)\n    }\n\n    componentDidMount() {\n        const { isConnected } = this.props.class\n        if (!this.props.milk.loaded && isConnected) {\n            this.fetchClassData()\n        }\n        else {\n            this.setState({\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n    }\n\n    checkUnsent(student_id) {\n        const { newDataForCreate, oldDataForEdit, dataForRemoval, by_student_id } = this.props.milk\n        const record_id_list = by_student_id[student_id]\n        var found = false\n        for (var i = 0; i < record_id_list.length; i++) {\n            const record_id = record_id_list[i]\n            if (newDataForCreate.has(record_id) || oldDataForEdit.has(record_id)) {\n                found = true\n                break\n            }\n        }\n        return found\n    }\n\n    async fetchClassData() {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        const date = new Date()\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const milkData = await fetchClassData('milkintake', this.props.class.class_id, start_date, end_date)\n        this.denormalize(milkData)\n        this.props.fetchClassMilkData(milkData.data)\n        this.setState({\n            isLoading: false\n        })\n    }\n\n    denormalize(milkData) {\n        if (!milkData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = milkData.data.records\n        for (const record_id in by_id) {\n            by_id[record_id].time = new Date(by_id[record_id].time)\n        }\n    }\n\n    handleEditMilkAmout(record_id, milk_amount) {\n        const { teacher_id } = this.props.route.params\n        this.props.editMilkAmount(record_id, milk_amount, teacher_id)\n    }\n\n    handleOnAddRecord(student_id) {\n        this.props.addMilkRecord(student_id)\n    }\n\n    confirmToRemoveRecord(student_id, record_id, index) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'Yes', onPress: () => this.handleRemoveRecord(student_id, record_id, index) },\n                { text: 'Cancel', style: 'cancel' }\n            ]\n        )\n    }\n\n    handleRemoveRecord(student_id, record_id, index) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.props.removeRecord(student_id, record_id, index)\n        this.handleRemove(record_id, student_id)\n    }\n\n    async handleSend() {\n        // this.setState({ isLoading: true })\n        const { newDataForCreate, oldDataForEdit, dataForRemoval } = this.props.milk\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        if (newDataForCreate.size) {\n            const handleCreateRes = await this.handleCreate()\n            // console.log('handleCreateRes: ', handleCreateRes)\n            if (handleCreateRes.success) {\n                this.props.createDataSuccess()\n            } else {\n                this.props.createDataFail(handleCreateRes.data)\n                return\n            }\n        }\n\n        if (oldDataForEdit.size) {\n            const handleEditRes = await this.handleEdit()\n            // console.log('handleEditRes: ', handleEditRes)\n            if (handleEditRes.success) {\n                this.props.editDataSuccess()\n            } else {\n                this.props.editDataFail(handleEditRes.data)\n                return\n            }\n        }\n        // this.setState({ isLoading: false })\n        this.props.navigation.goBack()\n    }\n\n    async handleCreate() {\n        const { newDataForCreate, records } = this.props.milk\n        const data_objs = []\n        newDataForCreate.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const createDataRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('milklog/resJson: ', resJson)\n                const {statusCode, errMessage, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: errMessage || message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return createDataRes\n    }\n\n    async handleEdit() {\n        const { oldDataForEdit, records } = this.props.milk\n        const data_objs = []\n        \n        oldDataForEdit.forEach(record_id => {\n            data_objs.push({\n                record_id,\n                ...records.by_id[record_id]\n            })\n        })\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const editDataRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const {statusCode, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return editDataRes\n    }\n\n    async handleRemove(record_id, student_id) {\n        const { dataForRemoval } = this.props.milk\n\n        if (!dataForRemoval.has(record_id)) {\n            return\n        }\n\n        var request_body = {\n            record_id_array: record_id,\n            student_id\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake`\n        const removeRes = await fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const {statusCode, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n\n        if (removeRes.success) {\n            this.props.removeMilkRecordSuccess()\n        } else {\n            this.props.removeMilkRecordFail()\n        }\n    }\n\n    normalize(data_objs) {\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].time = formatTime(data_objs[i].time)\n        }\n    }\n\n    selectDatetimeConfirm(time) {\n        const { teacher_id } = this.props.route.params\n        const { record_id } = this.state\n        this.setState({ record_id: '', showDateTimeModal: false })\n        this.props.editMilkTime(record_id, time, teacher_id)\n    }\n\n    render() {\n        if (this.state.isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n\n        const { date, showDateTimeModal } = this.state\n        return (\n            <Container>\n                {showDateTimeModal ?\n                    <TimeModal\n                        start_date={date}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showDateTimeModal: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n                <View style={styles.subHeading}>\n                    <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#dcf3d0', padding: 10 }}\n                        onPress={this.handleSend}\n                    >\n                        <Text style={{ fontSize: 40, color: 'grey' }}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n                <Content contentContainerStyle={{ alignItems: 'center' }}>\n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const record_id_array = this.props.milk.by_student_id[student_id]\n                        const records = this.props.milk.records.by_id\n                        return(\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, paddingVertical: 15 }}>\n                                    <View style={{ flex: 1, flexDirection: 'row'}}>\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <TouchableHighlight\n                                                style={styles.childThumbnail}\n                                                onPress={() => this.handleOnAddRecord(student_id)}\n                                                underlayColor=\"transparent\"\n                                            >\n                                                <Image\n                                                    // source={{uri: this.props.class.students[student_id].profile_picture }}\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={styles.thumbnailImage}/>\n                                            </TouchableHighlight>\n                                        </View>\n                                        <View style={{ flex: 3}}>\n                                            <View style={{ flexDirection: 'row'}}>\n                                                <View style={{ flex: 1 }}>\n                                                    <Text style={{ fontSize: 30, paddingLeft: 18 }}>{this.props.class.students[student_id].name}</Text>\n                                                </View>\n                                                <View style={{ flex: 1, paddingRight: 15 }}>\n                                                    {this.checkUnsent(student_id) ?\n                                                        <Text style={{ fontSize: 15, paddingLeft: 18, alignSelf: 'flex-end', color: 'red' }}>\n                                                            未送出\n                                                        </Text>\n                                                        : null\n                                                    }\n                                                </View>\n                                            </View>\n                                            {record_id_array.map((record_id, index) => {\n                                                const record = records[record_id]\n                                                return (\n                                                    <View key={record_id} style={styles.cardBody}>\n                                                        <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10 }}\n                                                                onPress={() => this.setState({ showDateTimeModal: true, record_id})}\n                                                            >\n                                                                <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                    {record.time.getHours() + ':' + record.time.getMinutes()}\n                                                                </Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                        <View style={{\n                                                            flexDirection: 'row',\n                                                            width: '35%',\n                                                            marginRight: '3%',\n                                                            alignItems: 'center',\n                                                            justifyContent: 'center',\n                                                            backgroundColor: '#fef6dd',\n                                                            height: '100%',\n                                                            borderRadius: 10\n                                                        }}>\n                                                            <TextInput\n                                                                style={{ flex: 2, fontSize: 35, textAlign: 'center' }}\n                                                                keyboardType='decimal-pad'\n                                                                placeholder=\"⽤量\"\n                                                                value={'' + record.amount}\n                                                                onChangeText={(milk_amount) => {this.handleEditMilkAmout(record_id, milk_amount)}}\n                                                            />\n                                                            <Text style={{ flex: 1, fontSize: 30, textAlign: 'center' }}>\n                                                                c.c.\n                                                            </Text>\n                                                        </View>\n                                                        <View style={{ width: '20%', marginRight: '4%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex:1, justifyContent: 'center', backgroundColor: '#ffe1d0', borderRadius: 10}}\n                                                                onPress={() => this.confirmToRemoveRecord(student_id, record_id, index)}\n                                                            >\n                                                                <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                    移除\n                                                                </Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                    </View>\n                                                )\n                                            })}\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        // width: 100,\n        // height: 100,\n        // backgroundColor: 'white',\n        // marginLeft: -7,\n    },\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    },\n    subHeading: {\n        width: '90%',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        alignSelf: 'center'\n    },\n    cardBody: {\n        // flex: 1,\n        flexDirection: 'row',\n        marginVertical: 6\n        // alignItems: 'center',\n        // justifyContent: 'center',\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        milk: state.milk\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            editMilkAmount,\n            addMilkRecord,\n            fetchClassMilkData,\n            createDataSuccess,\n            createDataFail,\n            editDataSuccess,\n            editDataFail,\n            removeRecord,\n            removeMilkRecordSuccess,\n            removeMilkRecordFail,\n            editMilkTime\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherMilkLog)","import React from 'react'\nimport { TextInput } from 'react-native'\n\nexport default class PooTextInput extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            other_option: '其他'\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            other_option: '其他'\n        }, () => {\n            console.log('mounted', this.refs.textRef.isFocused())\n        })\n    //    this.refs.textRef.focus()\n    //    console.log('mounted', this.refs.textRef.isFocused())\n    }\n\n    onBlur(other_option) {\n        console.log('onBlur')\n        this.setState({\n            other_option: ''\n        })\n        this.props.editPooCondition(other_option)\n    }\n\n    // componentWillUnmount() {\n        \n    // }\n\n    render() {\n        const { other_option } = this.state\n        console.log('other_option ===: ',other_option === '其他')\n        return (\n            <TextInput\n                ref={\"textRef\"}\n                autoFocus={other_option === '其他'}\n                selectTextOnFocus={true}\n                style={{ fontSize: 30, textAlign: 'center' }}\n                // keyboardType='default'\n                value={other_option}\n                onChangeText={(condition) => this.setState({ other_option: condition})}\n                onEndEditing={() => this.props.editPooCondition(other_option)}\n                onBlur={() => this.onBlur(other_option)}\n            />\n        )\n    }\n}","import React from 'react'\nimport { Card, Toast } from 'native-base'\nimport { View, ScrollView, Text, Image, TouchableHighlight, StyleSheet, TextInput, KeyboardAvoidingView, Alert } from 'react-native'\nimport DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, fetchClassData, beautifyDate } from '../../util'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n    updateDiaperAmount,\n    addDiaperRecord,\n    editDiaperTime,\n    switchPeeOrPoo,\n    editPooCondition,\n    removeDiaperRecordSuccess,\n    removeDiaperRecordFail,\n    fetchClassDiaperData,\n    createDiaperRecordSuccess,\n    createDiaperRecordFail,\n    editDiaperRecordSuccess,\n    editDiaperRecordFail,\n    editDiaperAmountSuccess,\n    editDiaperAmountFail,\n    clearDiaperlogErrorMessage\n} from '../../../redux/school/actions/index'\nimport PickerComponent from '../../picker'\nimport PooTextInput from './pootextinput'\n\nclass PooEntry extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            selected_other: false,\n            other_option: ''\n        }\n    }\n\n    componentDidMount() {\n       \n    }\n\n    editPooCondition(record_id, condition) {\n        // console.log('editPooCondition: ', record_id, condition, teacher_id)\n        const { teacher_id } = this.props\n        if (condition === '取消編輯') {\n            return \n        } else if (condition === '其他') {\n            this.setState({\n                selected_other: true,\n                other_option: ' '\n            })\n            \n        } else {\n            console.log('editPooCondition: ', record_id, condition, teacher_id)\n            this.setState({\n                selected_other: false,\n                other_option: condition\n            })\n            this.props.editPooCondition(record_id, condition, teacher_id)\n        }\n    }\n\n    render() {\n        // TODO: Provide some options for poo condition\n        // if (this.props.diaper_records.err_message !== ''){\n        //     Alert.alert(\n        //         'Error!',\n        //         this.props.diaper_records.err_message,\n        //         [{text: 'OK', onPress: () => this.props.clearDiaperlogErrorMessage()}]\n        //     )\n        // }\n        const { record_id, record } = this.props\n        const { selected_other,other_option } = this.state\n        // const { by_student_id, records } = this.props.diaper_records\n        // const { students } = this.props.class\n        // const date = this.state.date\n        // console.log('record_id: ', record_id)\n        return (\n            <View\n                style={{\n                    width: '23%',\n                    // marginRight: '3%',\n                    height: '100%',\n                    justifyContent: 'center',\n                    backgroundColor: '#fef6dd',\n                    borderRadius: 10\n                }}\n            >\n                {selected_other ?\n                    <TextInput\n                        style={{ fontSize: 30, textAlign: 'center' }}\n                        keyboardType='default'\n                        autoFocus={selected_other}\n                        // showSoftInputOnFocus={true}\n                        selectTextOnFocus={true}\n                        // scrollEnabled={false}\n                        value={other_option}\n                        onChangeText={(condition) => this.setState({ other_option: condition})}\n                        // onFocus={() => }\n                        onBlur={() => this.editPooCondition(record_id, other_option)}\n                    />\n\n                    // <PooTextInput\n                    //     editPooCondition={(other_option) => this.editPooCondition(record_id, other_option)}\n                    // />\n\n                    : <PickerComponent\n                        style={{\n                            // height: 20,\n                            // width: '50%',\n                            // marginLeft: 25\n                            alignItems: 'center',\n                            padding: 5\n                        }}\n                        selectedValue={other_option || record.poo_condition}\n                        options={[\n                            \"正常\",\n                            \"硬\",\n                            \"軟糊\",\n                            \"稀水\",\n                            \"其他\",\n                            \"取消編輯\"\n                        ]}\n                        textStyle={{ fontSize: 30 }}\n                        handleOnClick={() => { }}\n                        handleSelectValue={(condition) => this.editPooCondition(record_id, condition)}\n                    />\n                }\n            </View>\n        )\n    }\n}\n\n// const styles = StyleSheet.create({\n//     thumbnailImage: {\n//         width: 140,\n//         height: 140,\n//         borderRadius: 70\n//     }\n// })\n\nconst mapStateToProps = (state) => {\n    return {\n        diaper_records: state.diaper,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            editPooCondition\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (PooEntry)","import React from 'react'\nimport { Card, Toast } from 'native-base'\nimport { View, ScrollView, Text, Image, TouchableHighlight, StyleSheet, TextInput, KeyboardAvoidingView, Alert } from 'react-native'\nimport DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, fetchClassData, beautifyDate } from '../../util'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n    updateDiaperAmount,\n    addDiaperRecord,\n    editDiaperTime,\n    switchPeeOrPoo,\n    editPooCondition,\n    removeDiaperRecordSuccess,\n    removeDiaperRecordFail,\n    fetchClassDiaperData,\n    createDiaperRecordSuccess,\n    createDiaperRecordFail,\n    editDiaperRecordSuccess,\n    editDiaperRecordFail,\n    editDiaperAmountSuccess,\n    editDiaperAmountFail,\n    clearDiaperlogErrorMessage\n} from '../../../redux/school/actions/index'\nimport PickerComponent from '../../picker'\nimport PooEntry from './pooentry'\nimport PooTextInput from './pootextinput'\n\nclass DiaperLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            other_option: '',\n            show_time_picker: false,\n            record_id_for_edit: '',\n            cloth_diaper: false,\n            record_id: ''\n        }\n        this.handleSend = this.handleSend.bind(this)\n    }\n\n    componentDidMount() {\n        const { new_data_for_create, old_data_for_edit } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        if ((new_data_for_create.size + old_data_for_edit.size === 0) && isConnected) {\n            this.fetchClassData()\n        } else {\n            this.setState({\n                isLoading: false\n            })\n        }\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n    }\n\n    checkUnsent(student_id) {\n        const { new_data_for_create, old_data_for_edit, by_student_id, students_pending_amount_update } = this.props.diaper_records\n        const { records } = by_student_id[student_id]\n        var found = false\n        if (students_pending_amount_update.has(student_id)) {\n            return true\n        }\n        for (var i = 0; i < records.length; i++) {\n            if (new_data_for_create.has(records[i]) || old_data_for_edit.has(records[i])) {\n                found = true\n                break\n            }\n        }\n        return found\n    }\n\n    async fetchClassData() {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        const date = new Date()\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const diaperData = await fetchClassData('diaper', this.props.class.class_id, start_date, end_date)\n        this.denormalize(diaperData)\n        // console.log('diaperData: ', diaperData)\n        this.props.fetchClassDiaperData(diaperData.data)\n        this.setState({\n            isLoading: false\n        })\n        // console.log('this.props.diaper_records: ', this.props.diaper_records)\n    }\n\n    denormalize(diaperData) {\n        // console.log('denormalize: ', diaperData)\n        if (!diaperData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = diaperData.data.records\n        for (const record_id in by_id) {\n            by_id[record_id].time = new Date(by_id[record_id].time)\n        }\n    }\n\n    handleUpdateDiaperAmount(student_id, amount) {\n        this.props.updateDiaperAmount(student_id, amount)\n    }\n\n    addDiaperRecord(student_id) {\n        const { teacher_id } = this.props.route.params\n        this.props.addDiaperRecord(student_id, new Date(), this.state.cloth_diaper, teacher_id)\n    }\n\n    setTime(time) {\n        const { teacher_id } = this.props.route.params\n        const { record_id_for_edit } = this.state\n        if (time !== undefined) {\n            this.setState({ \n                show_time_picker: false,\n                record_id_for_edit: ''\n            })\n            this.props.editDiaperTime(record_id_for_edit, time, teacher_id)\n        } else {\n            this.setState({ \n                show_time_picker: false,\n                record_id_for_edit: ''\n            })\n        }\n    }\n\n    switchPeeOrPoo(record_id) {\n        const { teacher_id } = this.props.route.params\n        this.props.switchPeeOrPoo(record_id, teacher_id)\n    }\n\n    editPooCondition(record_id, condition) {\n        // console.log(record_id, condition)\n        const { teacher_id } = this.props.route.params\n        if (condition === '取消編輯') {\n            return \n        } else if (condition === '其他') {\n            this.setState({\n                record_id,\n                other_option: 'Please Fill Out'\n            })\n        } else {\n            // console.log('HERE')\n            this.setState({ other_option: '' })\n            this.props.editPooCondition(record_id, condition, teacher_id)\n        }\n    }\n\n    confirmRemove(student_id, record_id) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'OK', onPress: () => this.removeDiaperRecord(student_id, record_id) },\n                { text: 'Cancel', style: 'cancel'}\n            ]\n        )\n    }\n\n    removeDiaperRecord(student_id, record_id) {\n        const { new_data_for_create } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        \n        if (new_data_for_create.has(record_id)) {\n            this.props.removeDiaperRecordSuccess(student_id, record_id)\n            return\n        }\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper`\n        fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                record_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    this.props.removeDiaperRecordFail(message)\n                }\n                this.props.removeDiaperRecordSuccess(student_id, record_id)\n            })\n            .catch(err => {\n                this.props.removeDiaperRecordFail(err)\n            })\n    }\n\n    async handleSend() { // TODO: test function\n        const { new_data_for_create, old_data_for_edit, students_pending_amount_update } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        if (new_data_for_create.size || old_data_for_edit.size) {\n            const create_records_result = await this.createRecords()\n            if (create_records_result.success) {\n                // console.log(create_records_result)\n                this.props.createDiaperRecordSuccess()\n            } else {\n                this.props.createDiaperRecordFail(create_records_result.data)\n                return\n            }\n        }\n\n        if (students_pending_amount_update.size) {\n            const sendDiaperAmountDataResult = await this.sendDiaperAmountData()\n            if (sendDiaperAmountDataResult.success) {\n                this.props.editDiaperAmountSuccess()\n            } else {\n                this.props.editDiaperAmountFail(sendDiaperAmountDataResult.err_message)\n                return\n            }\n        }\n        \n        this.props.navigation.goBack()\n    }\n\n    async sendDiaperAmountData() {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        let url = 'https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper/'\n\n        const response = await Promise.all(\n            Array.from(this.props.diaper_records.students_pending_amount_update).map(student_id => {\n                return fetch(url + student_id, {\n                    method: 'PUT',\n                    body: JSON.stringify({\n                        amount: this.props.diaper_records.by_student_id[student_id].amount\n                    }),\n                    headers: {\n                        Accept: 'application/json',\n                        'Content-Type': 'application/json'\n                    }\n                })\n                .then(res => res.json())\n                .then(resJson => {\n                    return resJson\n                })\n                .catch(err => { throw err })\n            })\n        )\n        .then(result => {\n            return {\n                success: true,\n                status_code: 200,\n                data: result\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                status_code: 500,\n                err_message: 'error occured while sending diaper amount data: ' + err\n            }\n        })\n        return response\n    }\n\n    async createRecords() {\n        const { new_data_for_create, old_data_for_edit, records } = this.props.diaper_records\n        const data_objs = []\n        const all_record_id = [...new_data_for_create, ...old_data_for_edit]\n        // console.log('new_data_for_create: ', new_data_for_create)\n        all_record_id.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n        let url = 'https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper/'\n        const createRecordsRes =\n            await fetch(url, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(request_body)\n            })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log(\"resJson: \", resJson)\n                if (resJson.statusCode === 200) {\n                    return {\n                        success: true,\n                        status_code: 200,\n                        data: resJson\n                    }\n                }\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: resJson.message\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    err_message: err\n                }\n            })\n\n        return createRecordsRes\n    }\n\n    async editDiaperRecords() {\n        //TODO implement\n        return\n    }\n\n    normalize(data_objs) {\n        // console.log('data_objs: ', data_objs)\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].time = formatTime(data_objs[i].time)\n        }\n    }\n\n    render() {\n        // TODO: Provide some options for poo condition\n        if (this.props.diaper_records.err_message !== ''){\n            Alert.alert(\n                'Error!',\n                this.props.diaper_records.err_message,\n                [{text: 'OK', onPress: () => this.props.clearDiaperlogErrorMessage()}]\n            )\n        }\n        const { teacher_id } = this.props.route.params\n        const { show_time_picker, cloth_diaper } = this.state\n        const { by_student_id, records } = this.props.diaper_records\n        const { students } = this.props.class\n        const date = this.state.date\n        // console.log('this.props.diaper_records: ', this.props.diaper_records)\n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1,\n                    paddingBottom: 15\n                }}\n                // behavior='padding'\n                // keyboardVerticalOffset={100}\n                enabled\n            >\n                <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-evenly' }}>\n                    <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n                    <View style={{ flexDirection: 'row' }}>\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: cloth_diaper ? 'rgba(255,255,255,0.2)' : '#ffe1d0',\n                                padding: 10,\n                                marginRight: 20\n                            }}\n                            onPress={() => this.setState({ cloth_diaper: false })}\n                        >\n                            <Text style={{ fontSize: 40 }}>尿布</Text>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: cloth_diaper ? '#ffe1d0' : 'rgba(255,255,255,0.2)',\n                                padding: 10,\n                                marginRight: 20\n                            }}\n                            onPress={() => this.setState({ cloth_diaper: true })}\n                        >\n                            <Text style={{ fontSize: 40 }}>學習褲</Text>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={{ backgroundColor: '#dcf3d0', padding: 10 }}\n                            onPress={this.handleSend}\n                        >\n                            <Text style={{ fontSize: 40 }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n                <ScrollView \n                    contentContainerStyle={{ alignItems: 'center' }}\n                    keyboardShouldPersistTaps='handled'\n                >\n                    {Object.keys(students).map((student_id) => {\n                        if (by_student_id[student_id] === null) {\n                            return null\n                        }\n                        const record_id_list = by_student_id[student_id].records\n                        return (\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, flexDirection: 'row', paddingVertical: 15 }}>\n                                    <View style={{ width: '23%', alignItems: 'center', justifyContent: 'center' }}>\n                                        <TouchableHighlight\n                                            // style={styles.childThumbnail}\n                                            onPress={() => this.addDiaperRecord(student_id)}\n                                            underlayColor=\"transparent\"\n                                        >\n                                            <Image\n                                                source={\n                                                    students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: students[student_id].profile_picture}\n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </TouchableHighlight> \n                                    </View>\n                                    <View style={{ width: '77%' }}>\n                                        <View style={{ flex: 1 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                    <Text style={{ fontSize: 30 }}>\n                                                        {students[student_id].name}\n                                                    </Text>\n                                                    {this.checkUnsent(student_id) ? \n                                                        <Text style={{ fontSize: 15, color: 'red', marginLeft: 15}}>未送出</Text>\n                                                        : null\n                                                    }\n                                                </View>\n                                                <View style={{ flex: 1, alignItems: 'flex-end', paddingRight: 15 }}>\n                                                    {cloth_diaper ? \n                                                        null\n                                                        :\n                                                        <View style={{ width: '33%', aspectRatio: 1, backgroundColor: '#b5e9e9', alignItems: 'center', padding: 5 }}>\n                                                            <Text>尿布量</Text>\n                                                            <TextInput\n                                                                style={{ flex:1, fontSize: 37 }}\n                                                                value={\"\" + by_student_id[student_id].amount}\n                                                                onChangeText={amount => this.handleUpdateDiaperAmount(student_id, amount)}\n                                                            />\n                                                        </View>\n                                                    }\n                                                </View>\n                                            </View>\n                                            {record_id_list.map(record_id => {\n                                                const record = records.by_id[record_id]\n                                                if (record.cloth_diaper !== cloth_diaper) return null\n                                                return (\n                                                    <View key={record_id} style={{ flex: 1, flexDirection: 'row', marginVertical: 6, justifyContent: 'space-between', paddingRight: 15 }}>\n                                                        {/* TIME */}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: record.pee_or_poo === '大便' ? '23%' : '35%',\n                                                                // marginRight: '3%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#fef6dd',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.setState({ record_id_for_edit: record_id, show_time_picker: true })}\n                                                        >\n                                                            <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                {`${record.time.getHours()}:${record.time.getMinutes()}`}\n                                                            </Text>\n                                                        </TouchableHighlight>\n\n                                                        {/* PEE OR POO*/}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: record.pee_or_poo === '大便' ? '23%' : '35%',\n                                                                // marginRight: '3%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#fef6dd',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.switchPeeOrPoo(record_id)}\n                                                        >\n                                                            <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                {`${record.pee_or_poo}`}\n                                                            </Text>\n                                                        </TouchableHighlight>\n\n                                                        {/* POO CONDITION*/}\n                                                        {record.pee_or_poo === '大便' ?\n                                                            <PooEntry\n                                                                teacher_id={teacher_id}\n                                                                record_id={record_id}\n                                                                record={record}\n                                                            />\n                                                            // <View\n                                                            //     style={{\n                                                            //         width: '23%',\n                                                            //         // marginRight: '3%',\n                                                            //         height: '100%',\n                                                            //         justifyContent: 'center',\n                                                            //         backgroundColor: '#fef6dd',\n                                                            //         borderRadius: 10\n                                                            //     }}\n                                                            // >\n                                                            //     {this.state.other_option === '' && this.state.record_id != record_id ?\n                                                            //         <PickerComponent\n                                                            //             style={{\n                                                            //                 // height: 20,\n                                                            //                 // width: '50%',\n                                                            //                 // marginLeft: 25\n                                                            //                 alignItems: 'center',\n                                                            //                 padding: 5\n                                                            //             }}\n                                                            //             selectedValue={record.poo_condition}\n                                                            //             options={[\n                                                            //                 \"正常\",\n                                                            //                 \"硬\",\n                                                            //                 \"軟糊\",\n                                                            //                 \"稀水\",\n                                                            //                 \"其他\",\n                                                            //                 \"取消編輯\"\n                                                            //             ]}\n                                                            //             textStyle={{fontSize: 30}}\n                                                            //             handleOnClick={() => { }}\n                                                            //             handleSelectValue={(condition) => this.editPooCondition(record_id, condition)}\n                                                            //         />\n                                                            //         :\n                                                            //         <PooTextInput\n                                                            //             editPooCondition={(condition) => this.editPooCondition(record_id, condition)}\n                                                            //         />\n                                                            //     }\n                                                                    \n                                                            // </View>\n                                                            : null\n                                                        }\n\n                                                        {/* REMOVE RECORD*/}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: '20%',\n                                                                // marginRight: '2%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#ffe1d0',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.confirmRemove(student_id, record_id)}\n                                                        >\n                                                            <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                移除\n                                                            </Text>\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                )\n                                            })}\n                                            {show_time_picker &&\n                                                <DateTimePicker\n                                                    style={{ width: '100%'}}\n                                                    mode={'time'}\n                                                    display={'spinner'}\n                                                    value={new Date}\n                                                    onChange={(event, time) => this.setTime(time)}\n                                                    minimumDate={new Date()}\n                                                />\n                                            }\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        diaper_records: state.diaper,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            updateDiaperAmount,\n            addDiaperRecord,\n            editDiaperTime,\n            switchPeeOrPoo,\n            editPooCondition,\n            removeDiaperRecordSuccess,\n            removeDiaperRecordFail,\n            fetchClassDiaperData,\n            createDiaperRecordSuccess,\n            createDiaperRecordFail,\n            editDiaperRecordSuccess,\n            editDiaperRecordFail,\n            editDiaperAmountSuccess,\n            editDiaperAmountFail,\n            clearDiaperlogErrorMessage\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (DiaperLog)","import React from 'react'\nimport { View, Text, TouchableHighlight, StyleSheet, ScrollView, TouchableOpacity } from 'react-native'\nimport Header from '../../header'\n// import { TouchableOpacity } from 'react-native-gesture-handler'\n\nexport default class AdminHome extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  static navigationOptions = ({ navigation }) => {\n    return {\n      headerTitle: <Header title={'Admin Home'} />\n    }\n  }\n\n  componentDidMount() {\n\n  }\n\n  handleNavigate(pageName) {\n    // console.log(pageName)\n    const { school_name, school_id } = this.props.route.params\n    this.props.navigation.navigate(pageName, { school_name, school_id })\n\n    // this.props.navigation.push(pageName)\n  }\n\n  render() {\n    return (\n      <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('Registration')}\n          // onPress={()=> this.handleNavigate('Registration')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>新生註冊</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('Students')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>學生資料</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('Teachers')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>教師資料</Text>\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('DownloadPage')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>下載</Text>\n        </TouchableOpacity>\n      </ScrollView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    // flex: 1,\n    width: '80%',\n    padding: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#b5e9e9',\n    marginVertical: 20\n  },\n  button_text: {\n\n  }\n})","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\nimport PickerComponent from '../../picker'\n\nexport default class RegisterNewStudents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n      studentDataArray: [{\n        name: '',\n        class_id: '',\n        class_name: '',\n        profile_picture: '',\n        blood_type: ''\n      }],\n    }\n  }\n\n  addStudent() {\n    const { studentDataArray } = this.state\n    studentDataArray.push({\n      name: '',\n      class_id: '',\n      class_name: '',\n      profile_picture: '',\n      blood_type: ''\n    })\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  fillStudent() {\n    const { studentDataArray } = this.state\n    studentDataArray[0] = {\n        name: 'John Smith',\n        class_id: null,\n        profile_picture: '',\n        blood_type: 'AB'\n    }\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  setName(name, index) {\n    const { studentDataArray } = this.state\n    studentDataArray[index].name = name\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  setBloodType(type, index) {\n    const {studentDataArray} = this.state\n    studentDataArray[index].blood_type = type\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  removeStudent(index) {\n    const { studentDataArray} = this.state\n    studentDataArray.splice(index, 1)\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  handleSelectClass(class_name, index) {\n    // console.log(class_name)\n    const {classes } = this.props\n    const { studentDataArray } = this.state\n    var class_id = ''\n    for (var i = 0; i < Object.keys(classes).length; i++) {\n      const found_class_id = Object.keys(classes)[i]\n      if (classes[found_class_id].name === class_name) {\n        class_id = found_class_id\n        break\n      }\n    }\n    \n    studentDataArray[index].class_id = class_id\n    studentDataArray[index].class_name = class_name\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  getStudentDataArray() {\n    return this.state.studentDataArray\n  }\n\n  render() {\n    const { studentDataArray } = this.state\n    const { classes } = this.props\n    const options = Object.keys(classes).map(class_id => classes[class_id].name)\n    // console.log('studentDataArray: ', studentDataArray)\n    return (\n      <View style={{ width: '100%', padding: '5%', backgroundColor: '#368cbf' }}>\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingVertical: 5, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n            <Text style={{ fontSize: 60 }}>學生資料</Text>\n            <TouchableHighlight\n              style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n              onPress={() => this.addStudent()}\n            >\n              <Text style={{ fontSize: 35 }}>新增學生</Text>\n            </TouchableHighlight>\n\n            {/* <TouchableHighlight\n              style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n              onPress={() => this.fillStudent()}\n            >\n              <Text style={{ fontSize: 30 }}>Fill Student</Text>\n            </TouchableHighlight> */}\n          </View>\n          \n          {studentDataArray.map((student, index) => {\n            const { name, blood_type } = student\n            return (\n              <View key={index} style={{ width: '100%', padding: '5%', backgroundColor: '#f4d41f' }}>\n                <View\n                  style={{ flexDirection: 'row', padding: 10, backgroundColor: 'white', justifyContent: 'space-between' }}\n                >\n                  <View\n                    style={{\n                      width: '50%',\n                      padding: 10,\n                      backgroundColor: '#F5F5F5',\n                      borderRadius: 2,\n                      borderBottomWidth: 2,\n                      borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                  }}>\n                    <TextInput\n                      placeholder=\"全名\"\n                      value={name}\n                      style={{ fontSize: 30 }}\n                      onChangeText={(name) => this.setName(name, index)}\n                    />\n                  </View>\n\n                  <View\n                    style={{\n                      width: '20%',\n                      padding: 10,\n                      backgroundColor: '#F5F5F5',\n                      borderRadius: 2,\n                      borderBottomWidth: 2,\n                      borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                  }}>\n                    <TextInput\n                      placeholder=\"血型\"\n                      value={blood_type}\n                      style={{ fontSize: 30 }}\n                      onChangeText={(type) => this.setBloodType(type, index)}\n                    />\n                  </View>\n\n                  <TouchableHighlight\n                    style={{\n                      width: '20%',\n                      padding: 10,\n                      backgroundColor: '#fa625f',\n                      borderRadius: 2,\n                      // borderBottomWidth: 2,\n                      // borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                    }}\n                    onPress={() => this.removeStudent(index)}\n                  >\n                    <Text style={{ alignSelf: 'center', fontSize: 30 }}>移除</Text>\n                  </TouchableHighlight>\n                </View>\n\n                <View style={{ padding: 10, backgroundColor: 'white' }}>\n                  <PickerComponent\n                    style={{\n                      padding: 10, \n                      backgroundColor: '#b5e9e9'\n                    }}\n                    textStyle={{ fontSize: 30 }}\n                    selectedValue={studentDataArray[index].class_name || '選擇學生班級'}\n                    options={options}\n                    handleOnClick={() => { }}\n                    handleSelectValue={(class_name) => this.handleSelectClass(class_name, index)}\n                  />\n                </View>\n              </View>\n            )\n          })}\n          \n        </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput, Alert, Picker } from 'react-native'\nimport Auth from '@aws-amplify/auth'\n\nexport default class RegisterParents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n        parentDataArray: [{\n            name: '',\n            email: '', \n            username: '',\n            password: '',\n            role: '父',\n            mobile: '',\n            address: '',\n            work_phone: '',\n            transportation: ''\n        }],\n        parentSignUpStatus: [false],\n    }\n  }\n\n  addParent() {\n    const { parentDataArray, parentSignUpStatus } = this.state\n    parentDataArray.push({\n      name: '',\n      email: '', \n      username: '',\n      password: '',\n      role: '父',\n      mobile: '',\n      address: '',\n      work_phone: '',\n      transportation: ''\n    })\n\n    parentSignUpStatus.push(false)\n\n    this.setState({\n      parentDataArray,\n      parentSignUpStatus\n    })\n  }\n\n  fillParent() {\n    const { parentDataArray } = this.state\n    parentDataArray[0] = {\n      name: 'Jane Smith',\n      email: 'caleb7947@gmail.com', \n      username: 'abc123',\n      password: 'password',\n      role: 'parent#mother',\n      mobile: '061234567',\n      address: 'SOME ADDRESS',\n      work_phone: '061234567',\n      transportation: 'car'\n    }\n    this.setState({\n      parentDataArray\n    })\n  }\n\n  setName(name, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].name = name\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setRole(role, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].role = role\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setEmail(email, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].email = email\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setUsername(username, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].username = username\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  toLowerCase(event, index) {\n      const { text } = event.nativeEvent\n      const { parentDataArray } = this.state\n      const username = text.toLowerCase()\n      parentDataArray[index].username = username\n      this.setState({ parentDataArray })\n  }\n\n  setPassword(password, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].password = password\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  removeParent(index) {\n      const { parentDataArray, parentSignUpStatus } = this.state\n      parentDataArray.splice(index, 1)\n      parentSignUpStatus.splice(index, 1)\n      this.setState({\n          parentDataArray,\n          parentSignUpStatus\n      })\n  }\n\n  handleSignup(index) {\n    const { name, email, username, password } = this.state.parentDataArray[index]\n\n    Auth.signUp({\n      username,\n      password,\n      attributes: {\n          name,\n          email\n      }\n    })\n      .then(values => {\n        // console.log(values)\n        const { parentSignUpStatus } = this.state\n        parentSignUpStatus[index] = true\n        this.setState({\n          parentSignUpStatus\n        })\n      })\n      .catch(err => {\n        alert('註冊有問題!請與工程師聯繫\\n\\n' + err.message)\n    })\n  }\n\n  getParentSignUpStatus() {\n      return this.state.parentSignUpStatus\n  }\n\n  getParentDataArray() {\n      return this.state.parentDataArray\n  }\n\n  render() {\n    const { parentDataArray, parentSignUpStatus } = this.state\n    // console.log('parentDataArray: ', parentDataArray)\n    return (\n\n        <View style={{ width: '100%', padding: '5%', backgroundColor: '#f4d41f' }}>\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingVertical: 5, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n          <Text style={{ fontSize: 60 }}>家長資料</Text>\n          <TouchableHighlight\n            style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n            onPress={() => this.addParent()}\n          >\n            <Text style={{ fontSize: 35 }}>新增家長</Text>\n          </TouchableHighlight>\n\n          {/* <TouchableHighlight\n            style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n            onPress={() => this.fillParent()}\n          >\n            <Text style={{ fontSize: 20 }}>Fill Parent</Text>\n          </TouchableHighlight> */}\n        </View>\n        \n        {parentDataArray.map((parent, index) => {\n          const { name, email, username, password, role, mobile, address, work_phone, transportation } = parent\n          return (\n            <View\n              key={index}\n              style={{padding: 10, backgroundColor: 'white', marginBottom: 20 }}\n            >\n              {/* FIRST ROW */}\n              <View \n                style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}\n              >\n                <View\n                  style={{\n                    width: '50%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center',\n                }}>\n                  <TextInput\n                    placeholder=\"全名\"\n                    value={name}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(name) => this.setName(name, index)}\n                  />\n                </View>\n\n                <View\n                  style={{\n                    width: '20%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  {/* <TextInput\n                    placeholder=\"父/母\"\n                    value={role.charAt(role.length-1)}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(role) => this.setRole(role, index)}\n                  /> */}\n                  <Picker\n                    selectedValue={role}\n                    style={{ height: 50 }}\n                    onValueChange={(itemValue, itemIndex) => this.setRole(itemValue, index)}\n                  >\n                    <Picker.Item label=\"父\" value=\"父\" />\n                    <Picker.Item label=\"母\" value=\"母\" />\n                  </Picker>\n                </View>\n\n                <TouchableHighlight\n                  style={{\n                    width: '20%',\n                    padding: 10,\n                    backgroundColor: '#fa625f',\n                    borderRadius: 2,\n                    justifyContent: 'center'\n                  }}\n                  onPress={() => this.removeParent(index)}\n                >\n                  <Text style={{ alignSelf: 'center', fontSize: 30 }}>移除</Text>\n                </TouchableHighlight>\n\n              </View>\n\n              {/* SECOND ROW */}\n              <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}>\n\n                <View\n                  style={{\n                    width: '100%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    placeholder=\"Email\"\n                    autoCapitalize=\"none\"\n                    keyboardType=\"email-address\"\n                    value={email}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(email) => this.setEmail(email, index)}\n                  />\n                </View>\n              </View>\n\n              {/* THIRD ROW */}\n              <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}>\n                <View\n                  style={{\n                    width: '35%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    placeholder=\"帳號\"\n                    autoCapitalize=\"none\"\n                    value={username}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(username) => this.setUsername(username, index)}\n                    onEndEditing={(username) => this.toLowerCase(username, index)}\n                  />\n                </View>\n\n                <View\n                  style={{\n                    width: '35%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    secureTextEntry\n                    placeholder=\"密碼\"\n                    value={password}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(password) => this.setPassword(password, index)}\n                  />\n                </View>\n\n                <TouchableHighlight\n                  style={{\n                    width: '20%',\n                    padding: 5,\n                    backgroundColor: parentSignUpStatus[index] ? '#dcf3d0' : '#ffe1d0',\n                    justifyContent: 'center'\n                  }}\n                  onPress={() => this.handleSignup(index)}\n                  disable={parentSignUpStatus[index]}\n                >\n                  {parentSignUpStatus[index] ?\n                    <Text style={{ fontSize: 20 }}>SUCCESS</Text>\n                    : <Text style={{ fontSize: 35, alignSelf: 'center' }}>註冊</Text>\n                  }\n                </TouchableHighlight>\n              </View>\n            </View>\n          )\n        })}\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, TextInput, TouchableHighlight, Text, Alert, KeyboardAvoidingView } from 'react-native'\n// import Auth from '@aws-amplify/auth'\nimport Reloading from '../../reloading'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport RegisterNewStudents from './registernewstudents'\nimport RegisterParents from './registerparents'\nimport { ScrollView } from 'react-native-gesture-handler'\nimport { fetchStudentsSuccess } from '../../../redux/school/actions/index'\nimport { get } from '../../util'\n\n/*\n1. Page where we connect parents to amplify for their login:\n  Auth.signUp({\n    username: 'USERNAME',\n    password: 'PASSWORD',\n    attributes: {\n        given_name: 'John',\n        family_name: 'Smith',\n        email: 'EMAIL@email.com'\n    }\n  })\n\n2. Save their credential in database in table users:\n  -id: 'UUID',\n  -firstName: 'John',\n  -lastName: 'Smith',\n  -email: 'EMAIL@email.com',\n  -username: 'USERNAME',\n  -role: 'parent'\n\n3. And initialize child/ren's data in database including but not limited to \n  -first_name,\n  -last_name,\n  -profile_picture,\n  -class_id <<====== list all classes and assign a class_id to child/ren\n\n****Leave sign up confirmation to parent side of the app(first time sign in)****\n\n*/\nclass Registration extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      \n      \n      parentSignUpStatus: [false],\n      createFamilyProfileStatus: 'not_created'\n    }\n  }\n\n  componentDidMount() {\n    //  fetch class info for class assinment or get it from redux store\n  }\n\n  \n\n  createFamilyProfile() {\n    let all_parents_signed_up = true\n    let parentSignUpStatus = this.refs['parent'].getParentSignUpStatus()\n    parentSignUpStatus.forEach(status => {\n      all_parents_signed_up &= status\n    })\n\n    if (!all_parents_signed_up) {\n      alert('Error! We cannot create family profile until all parents have been signed up')\n      return\n    }\n\n    let parentDataArray = this.refs['parent'].getParentDataArray()\n    let studentDataArray = this.refs['student'].getStudentDataArray()\n\n    this.setState({\n      createFamilyProfileStatus: 'creating'\n    })\n\n    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/family/', {\n      method: 'POST',\n      headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        parentDataArray,  //name, email, username, role\n        studentDataArray  //name, class_id, profile_picture, blood_type\n      })\n    })\n    .then((response) => response.json())\n    .then((resJson) => {\n      // console.log(resJson)\n      if (resJson.statusCode > 200 || resJson.message === 'Internal server error') {\n        alert('Error!' + resJson.message)\n      } else {\n        this.fetchStudentData()\n        Alert.alert(\n          '註冊成功!',\n          '點選OK以離開頁面',\n          [\n              { text: 'OK', onPress: () => this.props.navigation.goBack()}\n          ]\n        )\n        this.setState({\n          createFamilyProfileStatus: 'created'\n        })\n      }\n    })\n    .catch((err) => {\n      console.error(err)\n    })\n  }\n\n  async fetchStudentData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/student`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {students, classes} = data\n    this.props.fetchStudentsSuccess(students, classes)\n  }\n\n  render() {\n    const { studentDataArray, parentDataArray, parentSignUpStatus, createFamilyProfileStatus } = this.state\n    // console.log(this.props.classes)\n    return (\n      <KeyboardAvoidingView style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <ScrollView style={{ width: '100%'}}>\n\n          <RegisterNewStudents \n            ref=\"student\"\n            classes={this.props.classes}\n          />\n\n          <RegisterParents ref=\"parent\" />\n\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-around' }}>\n            <TouchableHighlight\n              style={{\n                flex: 1,\n                padding: 20,\n                backgroundColor: createFamilyProfileStatus === 'not_created' ?\n                  '#b5e9e9'\n                  : createFamilyProfileStatus === 'creating' ?\n                    '#b5e9e9'\n                  : '#00c07f',\n                  justifyContent: 'center'\n              }}\n              onPress={() => this.createFamilyProfile()}\n            >\n              {createFamilyProfileStatus === 'not_created' ?\n                <Text style={{ fontSize: 50, textAlign: 'center' }}>完成</Text>\n                : createFamilyProfileStatus === 'creating' ?\n                  <Reloading />\n                : <Text style={{ fontSize: 50 }}>SUCCESS</Text>\n              }\n            </TouchableHighlight>\n\n            <TouchableHighlight\n              style={{ flex:1, padding: 20, backgroundColor: '#fa625f', justifyContent: 'center' }}\n              onPress={() => this.props.navigation.goBack()}\n            >\n              <Text style={{ fontSize: 50, textAlign: 'center'}}>返回</Text>\n            </TouchableHighlight>\n          </View>\n        </ScrollView>\n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({fetchStudentsSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Registration)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, Dimensions } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\n\nconst { width, height } = Dimensions.get('window')\n\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  render() {\n    // const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id } = this.props\n    const { show, component, modal_padding } = this.props\n    if (!show) {\n      return null\n    }\n    // console.log('student_id: ', student_id)\n    // const student = students[student_id]\n    // const { wellness } = this.props\n    // const record_id = wellness.by_student_id[student_id][0]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          // justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        // contentContainerStyle={{\n        //   justifyContent: 'center',\n        //   alignItems: 'center',\n        //   zIndex: 2,\n        //   position: 'absolute',\n        //   width: '100%',\n        //   height: '100%'\n        // }}\n        behavior='height'\n        // keyboardVerticalOffset={-80}\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            // opacity: 0.7,\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={() => this.props.hideModal()}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        <View style={{ flex: 1, marginTop: modal_padding, width: width/2, height, backgroundColor: 'white', zIndex: 3,\n            position: 'absolute' }}>\n                {component}\n        </View>\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, PushNotificationIOS } from 'react-native'\nimport { get, put } from '../../util'\nimport PickerComponent from '../../picker'\nimport Reloading from '../../reloading'\n\nexport default class EditStudentProfile extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            parents: [],\n            student: null,\n            isLoading: true\n        }\n    }\n\n    async componentDidMount() {\n        const { student_id, student } = this.props\n        const response = await get(`/student/${student_id}/family`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得家庭資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.setState({\n            parents: response.data,\n            student,\n            isLoading: false\n        })\n    }\n\n    addParent() {\n        const { parents } = this.state\n        if (parents.length === 3) {\n            alert('Sorry 一個寶貝只能註冊三位家長！')\n            return \n        }\n        this.props.addParent({\n            id: '',\n            name: '',\n            role: '',\n            username: '',\n            password: '',\n            mobile: '',\n            work_phone: '',\n            address: ''\n        })\n    }\n\n    async editStudentData() {\n        const { student_id } = this.props\n        const { student } = this.state\n        const { name, class_id } = student\n        const response = await put(`/student/${student_id}`, {\n            name,\n            class_id\n        })\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 編輯學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.props.hideModal()\n        const old_class_id = this.props.student.class_id\n        this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n    }\n\n    // getClassByStudentId() {\n    //     const { student_id, classes } = this.props\n    //     Object.keys(classes).forEach(class_id => {\n    //         const {students} = classes[class_id]\n    //         for(var i = 0; i < students.length; i++) {\n    //             if (student_id === students[i]) {\n    //                 return classes[class_id].name\n    //             }\n    //         }\n    //     })\n    //     return ''\n    // }\n\n    getClassNames() {\n        const { classes } = this.props\n        return Object.keys(classes).map(class_id => {\n            return classes[class_id].name\n        })\n    }\n    \n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            student: {\n                ...this.state.student,\n                class_id: class_id_found\n            }\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { student, parents, isLoading } = this.state\n        // console.log('student: ', student)\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 3, flexDirection: 'row', alignItems: 'center', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{  }}\n                            // onPress={() => }\n                        >\n                            <Image\n                                source={\n                                    student.profile_picture === '' ?\n                                        require('../../../assets/icon-thumbnail.png')\n                                        : {uri: student.profile_picture}\n                                }\n                                style={{\n                                    width: 200,\n                                    height: 200,\n                                    borderRadius: 100\n                                }}\n                            />\n                        </TouchableHighlight>\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                        <TextInput \n                            style={{ fontSize: 50 }}\n                            value={student.name}\n                            onChangeText={name => this.setState({\n                                student: {\n                                    ...this.state.student,\n                                    name\n                                }\n                            })}\n                        />\n                        {/* <Text style={{ fontSize: 50 }}>{classes[student.class_id].name}</Text> */}\n                        {/* <PickerComponent\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                            textStyle={{fontSize: 50}}\n                            selectedValue={classes[student.class_id].name}\n                            options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                            handleOnClick={() => { }}\n                            handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                        /> */}\n                        <TouchableHighlight\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                        >\n                            <Text style={{fontSize: 50}}>{classes[student.class_id].name}</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 5, backgroundColor: '#F5F5F5' }}>\n\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        {parents.map(parent => {\n                            return (\n                                <View key={parent.id} style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                    <TouchableHighlight\n                                        style={{ flex: 1, padding : 10, backgroundColor: '#b5e9e9', justifyContent: 'center' }}\n                                        onPress={() => this.props.addParent(parent)}\n                                    >\n                                        <View style={{ flex: 1, flexDirection: 'row' }}>\n                                            {/* <Text style={{ fontSize: 30, alignSelf: 'center' }}>{parent.role}</Text> */}\n                                            <View style={{ paddingRight: 10 }}>\n                                                <Text style={{ fontSize: 20 }}>{parent.role}</Text>\n                                            </View>\n                                            <View>\n                                                <View style={{ width: '100%', flexDirection:'row'}}>\n                                                    <Text style={{ fontSize: 20 }}>姓名: {parent.name}         </Text>\n                                                    <Text style={{ fontSize: 20 }}>帳號: {parent.username}         </Text>\n                                                </View>\n                                                <Text style={{ fontSize: 20 }}>手機: {parent.mobile}</Text>\n                                                <Text style={{ fontSize: 18 }}>工作/家用電話: {parent.work_phone}</Text>\n                                                <Text style={{ fontSize: 18 }}>地址: {parent.address}</Text>\n                                            </View>\n                                        </View>\n                                    </TouchableHighlight>\n                                </View>\n                            )\n                        })}\n                        {parents.length < 3 ?\n                            <View style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                <TouchableHighlight\n                                    style={{\n                                        flex: 1,\n                                        padding : 10,\n                                        backgroundColor: 'white',\n                                        justifyContent: 'center',\n                                        borderWidth: 5,\n                                        borderRadius: 1,\n                                        borderStyle: 'dashed'\n                                    }}\n                                    onPress={() => this.addParent()}\n                                >\n                                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>新增家長</Text>\n                                    </View>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                            onPress={() => this.props.hideModal()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                            onPress={() => this.editStudentData()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { Toast } from 'native-base'\nimport { post, get } from '../../util'\nimport Auth from '@aws-amplify/auth'\nimport { connect } from 'react-redux'\n\nclass AddParent extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            password: '',\n            qr_data: '',\n            name: ''\n        }\n    }\n\n    async componentDidMount() {\n        const { parent_data, isConnected } = this.props\n        this.setState({\n            ...this.state,\n            ...parent_data\n        })\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            return\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (parent_data.id != ''){\n            const response = await get(`/user/${parent_data.id}/qrcode`)\n            const { success, statusCode, message, data } = response\n            if (!success) {\n                alert('Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n                return \n            }\n            this.setState({\n                qr_data: data\n            })\n        }\n    }\n\n    async postParent() {\n        const { student_id, isConnected } = this.props\n        const { id, name, role, email, username, mobile, work_phone, address } = this.state\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (id === '') { // we register and then add parent to database\n            const response = await this.signUpParent()\n            if (!response.success) {\n                return\n            }\n        }\n        const body = {\n            student_id,\n            parent_data: {\n                id,\n                name, \n                role,\n                email,\n                username, \n                mobile, \n                work_phone, \n                address\n            }\n        }\n        const response = await post(`/student/${student_id}/family`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 新增家長時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n          }\n        this.props.goBack()\n    }\n\n    async signUpParent() {\n        const { username, password, name, email } = this.state\n        const response = await Auth.signUp({\n            username,\n            password,\n            attributes: {\n                name,\n                email\n            }\n          })\n            .then(values => {\n                return {\n                    success: true\n                }\n            })\n            .catch(err => {\n                alert('家長註冊有問題!請與工程師聯繫\\n\\n' + err.message)\n                return {\n                    success: false\n                }\n          })\n        return response\n    }\n\n    render() {\n        const { id, name, username, password, mobile, work_phone, address, role, email } = this.state\n        // console.log('this.state: ', this.state)\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '66%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>姓名</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={name}\n                                onChangeText={(name) => this.setState({ name })}\n                            />\n                        </View>\n\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '32%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>角色</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={role}\n                                onChangeText={(role) => this.setState({ role })}\n                            />\n                        </View>\n\n                        {/* <TouchableHighlight\n                            style={{\n                                width: '20%',\n                                padding: 15,\n                                backgroundColor: '#fa625f',\n                                justifyContent: 'center'\n                            }}\n                            // onPress={() => }\n                        >\n                            <Text style={{fontSize: 20, textAlign: 'center'}}>移除</Text>\n                        </TouchableHighlight> */}\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>Email</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                autoCapitalize={'none'}\n                                keyboardType={'email-address'}\n                                placeholder={''}\n                                value={email}\n                                onChangeText={(email) => this.setState({ email })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '49%',\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>帳號</Text>\n                            <TextInput\n                                editable={id === ''}\n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                autoCapitalize={'none'}\n                                value={username}\n                                onChangeText={(username) => this.setState({ username })}\n                            />\n                        </View>\n\n                        {id === '' ? \n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '49%',\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput\n                                    secureTextEntry={true}\n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={password}\n                                    onChangeText={(password) => this.setState({ password })}\n                                />\n                            </View>\n                        :   <TouchableHighlight\n                                style={{ backgroundColor: 'transparent', alignItems: 'center', justifyContent: 'center' }}\n                                onPress={() => this.props.viewQRCode(this.state.qr_data)}\n                            >\n                                <Image\n                                    source={require('../../../assets/icon-qr.png')}\n                                    style={{\n                                        width: 120,\n                                        height: 120,\n                                    }}\n                                />\n                            </TouchableHighlight>\n                        }\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>手機</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={mobile}\n                                onChangeText={(mobile) => this.setState({ mobile })}\n                            />\n                        </View>\n                    </View>\n                    \n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>工作/家用電話</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={work_phone}\n                                onChangeText={(work_phone) => this.setState({ work_phone })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>地址</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                placeholder={''}\n                                value={address}\n                                onChangeText={(address) => this.setState({ address })}\n                            />\n                        </View>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                onPress={() => this.props.goBack()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                            </TouchableHighlight>\n                        </View>\n                        {id !== '' ? \n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                    // onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                                onPress={() => this.postParent()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                    </ScrollView>\n                </View>\n\n                \n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      isConnected: state.school.isConnected\n    }\n}\n\nexport default connect(mapStateToProps, null) (AddParent)","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert } from 'react-native'\nimport QRCode from 'react-native-qrcode-svg'\n\nexport default class QRPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            // isLoading: true,\n            // data: ''\n        }\n    }\n    \n    render() {\n        const { name, role } = this.props.parent_data\n        const name_prefix = \n            role === '母' ? '媽媽'\n            : role === '父' ? '爸爸'\n            : role\n        return (\n            // <View\n            //     style={{\n            //         width: '100%',\n            //         height: '100%',\n            //         justifyContent: 'space-evenly',\n            //         alignItems: 'center'\n            //     }}\n            // >\n                <View style={{ flex: 1 }}>\n                    <View style={{ flex: 3, justifyContent: 'center', alignItems: 'center' }}>\n                        <Text style={{ fontSize: 65, }}>{this.props.student_name} {name_prefix}</Text>\n                        <QRCode\n                            value={this.props.qr_data}\n                            size={400}\n                        />\n                    </View>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{ padding: 15, backgroundColor: '#b5e9e9' }}\n                            onPress={() => this.props.goBack()}\n                        >\n                            <Text style={{ fontSize: 30 }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            // </View>\n        )\n    }\n}","import React from 'react'\nimport { View, TouchableHighlight, Image, Text, ScrollView, Platform, Alert, Dimensions } from 'react-native'\nimport { connect } from 'react-redux'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { bindActionCreators } from 'redux';\nimport { updateProfilePicture, fetchStudentsSuccess, editStudentSuccess } from '../../../redux/school/actions/index'\nimport { get, post, delete_by_id } from '../../util'\nimport Modal from './modal'\nimport EditStudentProfile from './editstudentprofile'\nimport AddParent from './addparent';\nimport QRPage from './qrpage';\n\nconst { width, height } = Dimensions.get('window')\n/* \nPage where we view/edit class information including:\n  -adding/removing class\n  -adding/removing/switching students\n  -adding/removing/switching teachers\n*/\n// const editStudent = \n//     <View>\n//       <Text>Student</Text>\n//     </View>\n\nclass Students extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: '',\n      student_id: '',\n      parent_data: {},\n      qr_data: '',\n      modal_padding: 0\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync();\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to make this work!');\n      }\n    }\n  };\n\n  _pickImage = async (student_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { base64 } = result\n        // this.setState({ image: result.uri });\n        this.getProfilePictureURL(base64, student_id, url)\n      }\n\n      // console.log(result);\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, student_id, url) {\n    const { school_name } = this.props.route.params\n    const { students } = this.props\n    const body = {\n      image,\n      url,\n      path: `${school_name}/profile_picture_${student_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await post(`/student/${student_id}/profile-picture`, body)\n    // console.log(response)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.updateProfilePicture(student_id, data.image_url)\n  }\n\n  getModalContent() {\n    const { students, classes } = this.props\n    const { showModal, modal_type, student_id, parent_data, qr_data } = this.state\n    // console.log('students: ', students)\n    if (!showModal) {\n      return null\n    } else if (modal_type === 'student') {\n      return <EditStudentProfile\n              student_id={student_id}\n              student={students[student_id]}\n              classes={classes}\n              addParent={(parent_data) => this.setState({\n                modal_type: 'add_parent',\n                parent_data\n              })}\n              editStudentSuccess={(student_id, name, old_class_id, class_id) => \n                this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n              }\n              hideModal={() => this.hideModal()}\n            />\n    } else if (modal_type === 'add_parent') {\n      return <AddParent\n              student_id={student_id}\n              parent_data={parent_data}\n              viewQRCode={(qr_data) => this.setState({\n                modal_type: 'qrpage',\n                qr_data\n              })}\n              goBack={() => this.setState({\n                modal_type: 'student'\n              })}\n            />\n    } else { // modal_type: 'qrpage'\n      return <QRPage\n              qr_data={qr_data}\n              student_name={students[student_id].name}\n              parent_data={parent_data}\n              goBack={() => this.setState({\n                modal_type: 'add_parent'\n              })}\n            />\n    }\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  confirmDeleteStudent(student_id) {\n    const {students} = this.props\n    Alert.alert(\n      `${students[student_id].name} 刪除確認`,\n      '刪除這個寶貝會將一切攸關資料(包誇父母)刪除',\n      [\n        { text: \"取消\", style: \"cancel\"},\n        { text: 'OK', onPress: () => this.deleteStudentById(student_id) }\n      ]\n    )\n  }\n\n  async deleteStudentById(student_id) {\n    const { students } = this.props\n    const response = await delete_by_id(`/student/${student_id}/`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.fetchStudentData()\n  }\n\n  async fetchStudentData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/student`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {students, classes} = data\n    this.props.fetchStudentsSuccess(students, classes)\n  }\n\n  render() {\n    const { students } = this.props\n    const { showModal, modal_padding } = this.state\n    // console.log('students: ', students)\n    return (\n      <View>\n        <Modal\n          modal_padding={modal_padding}\n          show={showModal}\n          component={this.getModalContent()}\n          hideModal={() => this.hideModal()}\n        />\n        <ScrollView>\n          {Object.keys(students).map((id, index) => {\n            const student = students[id]\n            return (\n              <View key={id} style={{ flex:1, backgroundColor: 'lightgrey', flexDirection: 'row', marginBottom: 10, padding: 15 }}>\n                {/* profile picture */}\n                <TouchableHighlight\n                  style={{ }}\n                  onPress={() => this._pickImage(id, student.profile_picture)}\n                >\n                  <Image\n                    source={\n                        student.profile_picture === '' ?\n                            require('../../../assets/icon-thumbnail.png')\n                            : {uri: student.profile_picture}\n                    }\n                    style={{\n                      width: 200,\n                      height: 200,\n                      borderRadius: 100\n                    }}\n                  />\n                </TouchableHighlight>\n                \n                <View style={{ flex: 5, paddingLeft: 15 }}>\n                  {/* Name */}\n                  <View>\n                    <Text style={{ fontSize: 50 }}>{student.name}</Text>\n                  </View>\n\n                  {/* Address */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>地址: {student.address}</Text>\n                  </View>\n\n                  {/* Father phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(父): {student.father_phone}</Text>\n                  </View>\n\n                  {/* Mother phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(母): {student.mother_phone}</Text>\n                  </View>\n                </View>\n\n                {/* Right */}\n                <View style={{ flex: 1, justifyContent: 'space-evenly' }}>\n                  <View style={{ backgroundColor: 'white' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={(event) => this.setState({ \n                        showModal: true, \n                        modal_type: 'student', \n                        student_id: id,\n                        modal_padding: Math.max(0, event.nativeEvent.pageY - height)\n                      })}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>編輯</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                  <View style={{ backgroundColor: '#fa625f' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.confirmDeleteStudent(id)}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>刪除</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                </View>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    students: state.school.students,\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      updateProfilePicture,\n      fetchStudentsSuccess,\n      editStudentSuccess,\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Students)","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class AddTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    async componentDidMount() {\n        // const { parent_data } = this.props\n        // this.setState({\n        //     ...this.state,\n        //     ...parent_data\n        // })\n        // if (parent_data.id != ''){\n        //     const response = await get(`/user/${parent_data.id}/qrcode`)\n        //     const { success, statusCode, message, data } = response\n        //     if (!success) {\n        //         Alert.alert(\n        //         `Sorry 取得家長QR Code時電腦出狀況了！`,\n        //         '請截圖和與工程師聯繫\\n\\n' + message,\n        //         [{ text: 'Ok' }]\n        //         )\n        //         return \n        //     }\n        //     this.setState({\n        //         qr_data: data\n        //     })\n        // }\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 新增教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(school_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     this.props.fetchTeachersSuccess(teachers, classes)\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { id, name, class_id, passcode, isAdmin } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        {/* <View\n                            style={{\n                                flex: 1,\n                                padding: 10\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>手機</Text>\n                                <TextInput \n                                    style={{ fontSize: 35 }}\n                                    keyboardType={'number-pad'}\n                                    placeholder={''}\n                                    value={mobile}\n                                    onChangeText={(mobile) => this.setState({ mobile })}\n                                />\n                            </View>\n                        </View> */}\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            {/* {id !== '' ? \n                                <View style={{ flex: 1, padding: 14 }}>\n                                    <TouchableHighlight\n                                        style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                        // onPress={() => this.props.goBack()}\n                                    >\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                    </TouchableHighlight>\n                                </View>\n                            : null\n                            } */}\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class EditTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    componentDidMount() {\n        const { teacher_id, teacher, classes } = this.props\n        const { name, profile_picture, passcode } = teacher\n        const class_id = this.getClassIdByTeacherId(teacher_id, classes)\n        this.setState({\n            id: teacher_id,\n            name,\n            profile_picture,\n            passcode,\n            class_id,\n            isAdmin: class_id !== '' && (classes[class_id].name === '管理員')\n        })\n        \n    }\n\n    getClassIdByTeacherId(teacher_id, classes) {\n        const class_id_list = Object.keys(classes)\n        for(var i = 0; i < class_id_list.length; i++) {\n            let class_id = class_id_list[i]\n            const { teachers } = classes[class_id]\n            for(var j = 0; j < teachers.length; j++) {\n                if (teacher_id === teachers[j]) {\n                    return class_id\n                }\n            }\n        }\n        return ''\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 更改教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(teacher_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     // this.setState({\n\n    //     // })\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes, teacher } = this.props\n        const { id, name, class_id, passcode } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess  } from '../../../redux/school/actions/index'\nimport Modal from './modal'\nimport AddTeacher from './addteacher';\nimport EditTeacher from './editteacher';\n\n/*\nPage where we view and edit Teacher profiles:\n  -creating teacher profile\n  -editing teacher profile\n  -removing teacher profile\n*/\n\nclass Teachers extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: '',\n      selected_teacher_id: ''\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync()\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert(`Sorry, we need camera roll permissions to make this work!`)\n        return \n      }\n    }\n  };\n\n  _pickImage = async (teacher_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { base64 } = result\n        this.getProfilePictureURL(base64, teacher_id, url)\n      }\n      // console.log(result);\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, teacher_id, url) {\n    const { school_name } = this.props.route.params\n    const { teachers } = this.props\n    const body = {\n      image,\n      url,\n      path: `${school_name}/teacher/profile_picture_${teacher_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await put(`/user/${teacher_id}/profile-picture`, body)\n    // console.log(response)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${teachers[teacher_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.updateTeacherProfilePicture(teacher_id, data.image_url)\n  }\n\n  async fetchTeacherData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/teacher`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得教師資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {admins, teachers, classes} = data\n    this.props.fetchTeachersSuccess(admins, teachers, classes)\n}\n\n  getModalContent() {\n    const { school_id } = this.props.route.params\n    const { classes, teachers } = this.props\n    const { modal_type, selected_teacher_id } = this.state\n    if (modal_type === 'add_teacher') {\n      return <AddTeacher\n                classes={classes}\n                school_id={school_id}\n                fetchTeacherData={() => this.fetchTeacherData()}\n                goBack={() => this.hideModal()}\n            />\n    } else if (modal_type === 'edit_teacher') {\n      return <EditTeacher\n                classes={classes}\n                teacher_id={selected_teacher_id}\n                teacher={teachers[selected_teacher_id]}\n                fetchTeacherData={() => this.fetchTeacherData()}\n                goBack={() => this.hideModal()}\n            />\n    }\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  confirmDeleteTeacher(teacher_id) {\n    const {teachers} = this.props\n    const confirmed = confirm(`${teachers[teacher_id].name} 刪除確認`)\n    if (confirmed) {\n      this.deleteTeacher(teacher_id)\n    }\n  }\n\n  async deleteTeacher(teacher_id) {\n    const response = await delete_by_id(`/user/${teacher_id}`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${teachers[teacher_id].name}刪除時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.fetchTeacherData()\n  }\n\n  render() {\n    const { teachers } = this.props\n    const { showModal } = this.state\n    return (\n      <View>\n        <Modal\n          show={showModal}\n          component={this.getModalContent()}\n          hideModal={() => this.hideModal()}\n        />\n        <ScrollView>\n          <View style={{ padding: 20 }}>\n            <TouchableHighlight\n              style={{ padding: 10, alignSelf: 'flex-end', backgroundColor: '#ffddb7' }}\n              onPress={() => this.setState({ showModal: true, modal_type: 'add_teacher' })}\n            >\n              <Text style={{ fontSize: 40 }}>新增教師</Text>\n            </TouchableHighlight>\n          </View>\n          {Object.keys(teachers).map((id, index) => {\n            const teacher = teachers[id]\n            return (\n              <View key={id} style={{ flex:1, backgroundColor: 'lightgrey', flexDirection: 'row', marginBottom: 10, padding: 15 }}>\n                {/* profile picture */}\n                <TouchableHighlight\n                  style={{ }}\n                  onPress={() => this._pickImage(id, teacher.profile_picture)}\n                >\n                  <Image\n                    source={\n                      teacher.profile_picture === '' ?\n                        require('../../../assets/icon-teacher-thumbnail.png')\n                        : {uri: teacher.profile_picture}\n                    }\n                    style={{\n                      width: 200,\n                      height: 200,\n                      borderRadius: 100\n                    }}\n                  />\n                </TouchableHighlight>\n                \n                <View style={{ flex: 5, paddingLeft: 15 }}>\n                  {/* Name */}\n                  <View>\n                    <Text style={{ fontSize: 50 }}>{teacher.name}</Text>\n                  </View>\n                </View>\n\n                {/* Right */}\n                <View style={{ flex: 1, justifyContent: 'space-evenly' }}>\n                  <View style={{ backgroundColor: 'white' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.setState({ showModal: true, modal_type: 'edit_teacher', selected_teacher_id: id })}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>編輯</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                  <View style={{ backgroundColor: '#fa625f' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.confirmDeleteTeacher(id)}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>刪除</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                </View>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    teachers: state.school.teachers,\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      updateTeacherProfilePicture,\n      fetchTeachersSuccess\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Teachers)","import React from 'react'\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableHighlight,\n  Image,\n  StyleSheet,\n  TextInput,\n  KeyboardAvoidingView,\n  Alert\n} from 'react-native'\nimport { Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n  writeToAll,\n  writeToOne,\n  remindItemsToBringToAll,\n  remindItemsToBringToOne,\n  recordActivitiesForAll,\n  recordActivitiesForOne,\n  writeItemToBringToAll,\n  writeItemToBringToOne,\n  writeActivityForAll,\n  writeActivityForOne,\n  fetchClassMessageData,\n  sendMessageOnSuccess\n} from '../../redux/school/actions/index'\nimport Reloading from '../reloading'\nimport { formatDate, fetchClassData } from '../util'\n\nclass MessageForParents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true,\n      to_all_message: '',\n      items_to_bring: ['母奶粉', '尿布', '水壺', '衣物'],\n      other_item: '其它',\n      items_to_bring_bool: [0, 0, 0, 0, 0],\n      activities_list: ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言'],\n      other_activity: '其它',\n      activities_bool: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n      message_by_student_id: {},\n      editingOtherItemToBring: false,\n      editingOtherItemForStudent: '',\n      editingOtherActivity: false,\n      editingOtherActivityForOne: ''\n    }\n    this.recordActivitiesForAll = this.recordActivitiesForAll.bind(this)\n  }\n\n  componentDidMount() {\n    const { student_id_for_update } = this.props.message\n    const { isConnected } = this.props.class\n    if (student_id_for_update.size > 0 || !isConnected) {\n      this.setState({\n        isLoading: false\n      })\n    } else {\n      this.fetchClassData()\n    }\n\n    if (!isConnected) {\n      Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n      })\n  }\n  }\n\n  async fetchClassData() {\n    const date = new Date()\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchClassData('message', this.props.class.class_id, start_date, end_date)\n    this.props.fetchClassMessageData(messageData.data)\n    this.setState({\n        isLoading: false\n    })\n  }\n\n  writeToAll(text) {\n    const { teacher_id } = this.props.route.params\n    this.setState({ to_all_message: text })\n    this.props.writeToAll(text, teacher_id)\n  }\n\n  writeToOne(text, student_id) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeToOne(text, student_id, teacher_id)\n  }\n\n  remindItemsToBringToOne(student_id, selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { message_by_student_id } = this.props.message\n    const things_to_bring = [...message_by_student_id[student_id].things_to_bring]\n    const new_bool = things_to_bring[selected_index] ? 0 : 1\n    things_to_bring.splice(selected_index, 1, new_bool)\n    this.props.remindItemsToBringToOne(student_id, things_to_bring, teacher_id)\n  }\n\n  remindItemsToBringToAll(selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { items_to_bring_bool } = this.state\n    const new_bool = items_to_bring_bool[selected_index] ? 0 : 1\n    items_to_bring_bool.splice(selected_index, 1, new_bool)\n    this.setState({\n      items_to_bring_bool\n    })\n    this.props.remindItemsToBringToAll(items_to_bring_bool, teacher_id)\n  }\n\n  otherItemForAllEditorOnBlur() {\n    const { other_item } = this.state\n    this.setState({\n      editingOtherItemToBring: false,\n      other_item: other_item === '' ? '其它' : other_item\n    })\n  }\n\n  writeItemToBringToAll(item_to_bring) {\n    const { teacher_id } = this.props.route.params\n    this.setState({\n      other_item: item_to_bring\n    })\n    this.props.writeItemToBringToAll(item_to_bring, teacher_id)\n  }\n\n  writeItemToBringToOne(student_id, item_to_bring) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeItemToBringToOne(student_id, item_to_bring, teacher_id)\n  }\n\n  editItemToBringToOneEditorOnBlur(student_id, other_item) {\n    this.setState({ editingOtherItemForStudent: '' })\n    if (other_item === '') {\n      this.props.writeItemToBringToOne(student_id, '其它')\n    }\n  }\n\n  recordActivitiesForOne(student_id, selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { message_by_student_id } = this.props.message\n    const activities = [...message_by_student_id[student_id].activities]\n    const new_bool = activities[selected_index] ? 0 : 1\n    activities.splice(selected_index, 1, new_bool)\n    this.props.recordActivitiesForOne(student_id, activities, teacher_id)\n  }\n\n  recordActivitiesForAll(selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { activities_bool } = this.state\n    const new_bool = activities_bool[selected_index] ? 0 : 1\n    activities_bool.splice(selected_index, 1, new_bool)\n    this.setState({\n      activities_bool\n    })\n    this.props.recordActivitiesForAll(activities_bool, teacher_id)\n  }\n\n  writeActivityForAll(other_activity) {\n    const { teacher_id } = this.props.route.params\n    this.setState({\n      other_activity\n    })\n    this.props.writeActivityForAll(other_activity, teacher_id)\n  }\n\n  otherActivityEditorOnBlur() {\n    const { other_activity } = this.state\n    this.setState({\n      editingOtherActivity: false,\n      other_activity: other_activity === '' ? '其它' : other_activity\n    })\n  }\n\n  writeActivityForOne(student_id, other_activity) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeActivityForOne(student_id, other_activity, teacher_id)\n  }\n  \n  activityForOneEditorOnBlur(student_id, other_activity) {\n    this.setState({ editingOtherActivityForOne: '' })\n    if (other_activity === '') {\n      this.props.writeActivityForOne(student_id, '其它')\n    }\n  }\n\n  handleSend() {\n    const { message_by_student_id } = this.props.message\n    const { isConnected } = this.props.class\n    if (!isConnected) {\n      Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n      })\n      return\n    }\n\n    const request_body = {\n      date: formatDate(new Date()),\n      data: this.normalize(message_by_student_id)\n    }\n\n    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/message', {\n      method: 'POST',\n      headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(request_body)\n    })\n      .then(res => res.json())\n      .then(resJson => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Error' + message)\n          return\n        }\n        this.props.sendMessageOnSuccess()\n        this.props.navigation.goBack()\n      })\n      .catch(err => {\n        alert('Error' + err.message)\n      })\n  }\n\n  normalize(data) {\n    const { student_id_for_update } = this.props.message\n    var normalized_data = []\n    student_id_for_update.forEach(student_id => {\n      normalized_data.push({\n        ...data[student_id],\n        student_id,\n      })\n    })\n    return normalized_data\n  }\n\n  render() {\n    const { student_id_for_update } = this.props.message\n    if (this.state.isLoading) {\n      return (\n        <Reloading />\n      )\n    }\n    const { students } = this.props.class\n    const { message_by_student_id } = this.props.message\n    const {\n      items_to_bring,\n      items_to_bring_bool,\n      activities_list,\n      activities_bool,\n      editingOtherItemToBring,\n      editingOtherItemForStudent,\n      editingOtherActivity,\n      editingOtherActivityForOne\n    } = this.state\n    const date = new Date()\n    // console.log('message_by_student_id: ', message_by_student_id)\n    return (\n      <KeyboardAvoidingView\n        style={{\n          flex: 1\n        }}\n        // behavior='padding'\n        // keyboardVerticalOffset={100}\n        enabled\n      >       \n        <View\n          style={{\n            padding: 10,\n            flexDirection: 'row',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n          }}\n        >\n          <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n          <TouchableHighlight\n            style={{ backgroundColor: '#dcf3d0' }}\n            onPress={() => this.handleSend()}\n          >\n            <Text style={{ fontSize: 40, padding: 5 }}>送出</Text>\n          </TouchableHighlight>\n        </View> \n        <ScrollView\n          contentContainerStyle={{ alignItems: 'center', marginBottom: 20 }}\n        >\n          <View style={{ width: '95%' }}>\n            <Card style={{padding: 10}}>\n              <View style={{ flex: 1 }}>\n                <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-evenly', paddingVertical: 10 }}>\n                  <View style={{\n                    width: '29%',\n                    backgroundColor: '#fff1b5',\n                    borderRadius: 10,\n                    marginRight: 5\n                  }}>\n                    <Text style={{ fontSize: 35, alignSelf: 'center' }}>家長準備</Text>\n                    <View\n                      style={{\n                        flex: 1,\n                        flexDirection: 'row',\n                        justifyContent: 'space-evenly',\n                        flexWrap: 'wrap'\n                      }}\n                    >\n                      {items_to_bring.map((item, index) => {\n                        return (\n                          <TouchableHighlight\n                            key={index}\n                            style={{\n                              backgroundColor: items_to_bring_bool[index] ? '#f4d41f' : '#fff7d6',\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                            }}\n                            onPress={() => this.remindItemsToBringToAll(index)}\n                          >\n                            <Text style={{fontSize: 20}}>{item}</Text>\n                          </TouchableHighlight>\n                        )\n                      })}\n                      <TouchableHighlight\n                            style={{\n                                backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6',\n                                justifyContent: 'center',\n                                borderRadius: 3,\n                                padding: 3,\n                                margin: 5\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.remindItemsToBringToAll(4)}\n                            onLongPress={() => this.setState({ editingOtherItemToBring: true })}\n                      >\n                        {editingOtherItemToBring ?\n                          <View style={{ flex: 1 }}>\n                            \n                            <TextInput\n                              autoFocus={true}\n                              selectTextOnFocus={true}\n                              value={this.state.other_item}\n                              style={{\n                                alignSelf: 'center',\n                                fontSize: 20,\n                                backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6'\n                              }}\n                              onChangeText={item_to_bring => this.writeItemToBringToAll(item_to_bring)}\n                              onBlur={() => this.otherItemForAllEditorOnBlur()}\n                            />\n\n                          </View>\n                          : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{this.state.other_item}</Text>\n                        }\n                      </TouchableHighlight>\n                    </View>\n                  </View>\n                  <View\n                    style={{\n                      width: '69%',\n                      backgroundColor: '#b5e9e9',\n                      borderRadius: 10,\n                      marginLeft: 5\n                    }}\n                  >\n                    <Text style={{ fontSize: 35, alignSelf: 'center' }}>今日活動</Text>\n                    <View style={{\n                      flexDirection: 'row',\n                      justifyContent: 'space-evenly',\n                      flexWrap: 'wrap'\n                    }}>\n                      {activities_list.map((activity, index) => {\n                        return (\n                          <TouchableHighlight\n                            key={index}\n                            style={{\n                              backgroundColor: activities_bool[index] ? '#368cbf' : '#eaf8f8',\n                              // borderColor: '#d6f2f2',\n                              // borderWidth: 2,\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                              // width: '13%'\n                            }}\n                            onPress={() => this.recordActivitiesForAll(index)}\n                          >\n                            <Text style={{fontSize: 20}}>{activity}</Text>\n                          </TouchableHighlight>\n                        )\n                      })}\n\n                      <TouchableHighlight\n                            style={{\n                                backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8',\n                                justifyContent: 'center',\n                                borderRadius: 3,\n                                padding: 3,\n                                margin: 5\n                            }}\n                            underlayColor='#368cbf'\n                            onPress={() => this.recordActivitiesForAll(8)}\n                            onLongPress={() => this.setState({ editingOtherActivity: true })}\n                      >\n                        {editingOtherActivity ?\n                          <View style={{ flex: 1 }}>\n                            \n                            <TextInput\n                              autoFocus={true}\n                              selectTextOnFocus={true}\n                              value={this.state.other_activity}\n                              style={{\n                                alignSelf: 'center',\n                                fontSize: 20,\n                                backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8'\n                              }}\n                              onChangeText={other_activity => this.writeActivityForAll(other_activity)}\n                              onBlur={() => this.otherActivityEditorOnBlur()}\n                            />\n\n                          </View>\n                          : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{this.state.other_activity}</Text>\n                        }\n                      </TouchableHighlight>\n                    </View>\n                  </View>\n                </View>\n                <TextInput\n                  value={this.state.to_all_message}\n                  style={{\n                    alignSelf: 'center',\n                    width: '100%',\n                    borderColor: 'gray',\n                    borderWidth: 2,\n                    borderRadius: 10,\n                    fontSize: 25,\n                    padding: 20\n                  }}\n                  multiline={true}\n                  maxLength={100}\n                  onChangeText={to_all_message => this.writeToAll(to_all_message)}\n                />\n              </View>\n            </Card>\n          </View>\n          {Object.keys(students).map(student_id => {\n            const {text, things_to_bring, activities, other_item, other_activity} = message_by_student_id[student_id]\n            return (\n              <View key={student_id} style={{ width: '95%' }}>\n                <Card style={{ padding: 10 }}>\n                  <View style={{ flex: 1, flexDirection: 'row'}}>\n                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                      <Image\n                        source={\n                          students[student_id].profile_picture === '' ?\n                            require('../../assets/icon-thumbnail.png')\n                            : {uri: students[student_id].profile_picture}\n                        }\n                        style={{ width: 100, height: 100, borderRadius: 50 }}\n                      />\n                      <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                    </View>\n                    <View style={{ flex: 4 }}>\n                      <View style={{ flex: 1, flexDirection: 'row', paddingBottom: 10 }}>\n                        <View\n                          style={{\n                            width: '29%',\n                            backgroundColor: '#fff1b5',\n                            borderRadius: 10,\n                            marginRight: 3\n                          }}\n                        >\n                          <Text style={{ fontSize: 28, alignSelf: 'center' }}>家長準備</Text>\n                          <View\n                              style={{\n                              flex: 1,\n                              flexDirection: 'row',\n                              justifyContent: 'space-evenly',\n                              flexWrap: 'wrap',\n                            }}\n                          >\n                            {items_to_bring.map((item, index) => {\n                              return (\n                                <TouchableHighlight\n                                  key={index}\n                                  style={{\n                                    backgroundColor: things_to_bring[index] ? '#f4d41f' : '#fff7d6',\n                                    borderRadius: 3,\n                                    padding: 4,\n                                    margin: 5\n                                  }}\n                                  onPress={() => this.remindItemsToBringToOne(student_id, index)}\n                                >\n                                  <Text style={{fontSize: 20}}>{item}</Text>\n                                </TouchableHighlight>\n                              )\n                            })}\n\n                            <TouchableHighlight\n                                  style={{\n                                      backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                      justifyContent: 'center',\n                                      borderRadius: 3,\n                                      padding: 3,\n                                      margin: 5\n                                  }}\n                                  underlayColor='#f4d41f'\n                                  onPress={() => this.remindItemsToBringToOne(student_id, 4)}\n                                  onLongPress={() => this.setState({ editingOtherItemForStudent: student_id })}\n                            >\n                              {editingOtherItemForStudent === student_id ?\n                                <View style={{ flex: 1 }}>\n                                  \n                                  <TextInput\n                                    autoFocus={true}\n                                    selectTextOnFocus={true}\n                                    value={other_item}\n                                    style={{\n                                      alignSelf: 'center',\n                                      fontSize: 20,\n                                      backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                    }}\n                                    onChangeText={item_to_bring => this.writeItemToBringToOne(student_id, item_to_bring)}\n                                    onBlur={() => this.editItemToBringToOneEditorOnBlur(student_id, other_item)}\n                                  />\n\n                                </View>\n                                : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_item}</Text>\n                              }\n                            </TouchableHighlight>\n                          </View>\n                        </View>\n                        <View style={{\n                          width: '70%',\n                          borderRadius: 10,\n                          marginLeft: 3,\n                          backgroundColor: '#b5e9e9'\n                        }}>\n                          <View style={{ flex:1, flexDirection: 'row' }}>\n                            <View style={{ flex: 2 }}>\n                              <Text style={{ fontSize: 28, alignSelf: 'flex-end' }}>今日活動</Text>\n                            </View>\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                              {student_id_for_update.has(student_id) ? \n                                <Text \n                                  style={{ fontSize: 15, alignSelf: 'flex-end', paddingRight: 10, color: 'red' }}\n                                >\n                                    未送出\n                                </Text>\n                                : null}\n                            </View>\n                          </View>\n                          <View style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            justifyContent: 'space-between',\n                            flexWrap: 'wrap'\n                          }}>\n                            {activities_list.map((activity, index) => {\n                              return (\n                                <TouchableHighlight\n                                  key={index}\n                                  style={{\n                                    backgroundColor: activities[index] ? '#368cbf' : '#d6f2f2',\n                                    borderRadius: 3,\n                                    padding: 4,\n                                    margin: 5\n                                  }}\n                                  onPress={() => this.recordActivitiesForOne(student_id, index)}\n                                >\n                                  <Text style={{fontSize: 20}}>{activity}</Text>\n                                </TouchableHighlight>\n                              )\n                            })}\n\n                            <TouchableHighlight\n                                  style={{\n                                      backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                      justifyContent: 'center',\n                                      borderRadius: 3,\n                                      padding: 3,\n                                      margin: 5\n                                  }}\n                                  underlayColor='#368cbf'\n                                  onPress={() => this.recordActivitiesForOne(student_id, 8)}\n                                  onLongPress={() => this.setState({ editingOtherActivityForOne: student_id })}\n                            >\n                              {editingOtherActivityForOne === student_id ?\n                                <View style={{ flex: 1 }}>\n                                  \n                                  <TextInput\n                                    autoFocus={true}\n                                    selectTextOnFocus={true}\n                                    value={other_activity}\n                                    style={{\n                                      alignSelf: 'center',\n                                      fontSize: 20,\n                                      backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                    }}\n                                    onChangeText={activity => this.writeActivityForOne(student_id, activity)}\n                                    onBlur={() => this.activityForOneEditorOnBlur(student_id, other_activity)}\n                                  />\n\n                                </View>\n                                : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_activity}</Text>\n                              }\n                            </TouchableHighlight>\n                          </View>\n                        </View>\n                      </View>\n                      <TextInput\n                        value={text}\n                        style={{ borderColor: 'gray', borderWidth: 2, borderRadius: 10, fontSize: 25, padding: 20 }}\n                        multiline={true}\n                        maxLength={100}\n                        onChangeText={text => this.writeToOne(text, student_id)}\n                      />\n                    </View>\n                  </View>\n                </Card>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  cardContainer: {\n      width: 119,\n      height: '100%',\n      backgroundColor: 'transparent'\n  },\n  thumbnailImage: {\n      height: 80,\n      width: 80,\n      borderRadius: 40\n  }\n})\n\n\nconst mapStateToProps = state => {\n  return {\n    class: state.classInfo,\n    message: state.message\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    ...bindActionCreators({\n      writeToAll,\n      writeToOne,\n      remindItemsToBringToAll,\n      remindItemsToBringToOne,\n      recordActivitiesForAll,\n      recordActivitiesForOne,\n      writeItemToBringToAll,\n      writeItemToBringToOne,\n      writeActivityForAll,\n      writeActivityForOne,\n      fetchClassMessageData,\n      sendMessageOnSuccess\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (MessageForParents)","import React from 'react'\nimport { View, ScrollView, Text, TouchableHighlight, Alert, Image } from 'react-native'\nimport { Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { get, formatDate } from '../util'\nimport { bindActionCreators } from 'redux'\nimport { fetchTeacherAttendanceSuccess, fetchStudentAttendanceSuccess } from '../../redux/school/actions/index'\nimport LoginNumberPad from './loginnumberpad'\nimport Modal from './modal'\n\nclass AttendancePage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            isLoading: true,\n            display_list: [],\n            students_or_teachers: 'students',\n            selected_class_id: 'all',\n            showLoginNumberPad: false,\n            showModal: false,\n            modalStudentId: '',\n            teacherClicked: '',\n            teacher_id: '',\n            pageClicked: ''\n        }\n    }\n\n    componentDidMount() {\n        const { students, teacherOnDuty, teachers } = this.props.school\n        const display_list = Object.keys(students)\n        this.setState({ display_list })\n        this.fetchTeacherAttendance()\n        this.fetchStudentAttendance()\n        // this.fetchTeacherWellness()\n        // this.fetchStudentWellness()\n        \n        if (teacherOnDuty !== '') {\n            const { name }= teachers[teacherOnDuty]\n            this.props.navigation.setOptions({ \n                headerRight: () => (\n                    <View style={{ paddingRight: 20 }}>\n                        <Text style={{ fontSize: 30 }}>{`值班老師：${name}`}</Text>\n                    </View>\n                )\n            })\n        }\n    }\n\n    selectPersonType(type) {\n        const { classes } = this.props.school\n        const { selected_class_id } = this.state\n        if (selected_class_id === 'all') {\n            this.setState({\n                display_list: Object.keys(this.props.school[type]),\n                students_or_teachers: type\n            })\n            return\n        }\n\n        this.setState({\n            display_list: classes[selected_class_id][type],\n            students_or_teachers: type\n        })\n    }\n\n    selectClass(class_id) {\n        const { classes } = this.props.school\n        const {students_or_teachers} = this.state\n        // console.log('classes[class_id][students_or_teachers]: ', classes[class_id][students_or_teachers])\n        this.setState({\n            display_list: classes[class_id][students_or_teachers],\n            selected_class_id: class_id\n        })\n    }\n\n    selectAttendanceType(attendanceType) {\n        const { classes } = this.props.school\n        const { students_or_teachers, selected_class_id } = this.state\n        var display_list = []\n        var all_id_list = []\n        if (selected_class_id === 'all') {\n            all_id_list = Object.keys(this.props.school[students_or_teachers])\n        } else {\n            all_id_list = classes[selected_class_id][students_or_teachers]\n        }\n        for (var i = 0; i < all_id_list.length; i++) {\n            if (this.props.school[`student_${attendanceType}`].has(all_id_list[i])\n                || this.props.school[`teacher_${attendanceType}`].has(all_id_list[i])) {\n                display_list.push(all_id_list[i])\n            }\n        }\n        this.setState({\n            display_list\n        })\n    }\n\n    async fetchTeacherAttendance() {\n        const { school_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/staff-attendance?school_id=${school_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得教師出席資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        // console.log('data: ', data)\n        const { attendance, teachers } = data\n        this.props.fetchTeacherAttendanceSuccess(attendance, teachers)\n    }\n\n    async fetchStudentAttendance() {\n        const { school_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/attendance?school_id=${school_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生出席資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const { attendance, students, present, absent } = data\n        // console.log('data: ', data)\n        this.props.fetchStudentAttendanceSuccess(attendance, students, present, absent)\n    }\n\n    handleOnClick(person_id) {\n        const { teacherOnDuty } = this.props\n        const { students_or_teachers } = this.state\n        // console.log('students_or_teachers: ', students_or_teachers)\n        if (students_or_teachers === 'students') {\n            if (teacherOnDuty === '') {\n                this.setState({ \n                    showLoginNumberPad: true,\n                    pageClicked: 'student_modal',\n                    modalStudentId: person_id,\n                    // showModal: true\n                })\n                return\n            }\n            this.showModal(person_id)\n        } else {\n            this.setState({ showLoginNumberPad: true, teacherClicked: person_id })\n        }\n    }\n\n    showModal(student_id) {\n        this.setState({\n            // showLoginNumberPad: true,\n            modalStudentId: student_id,\n            showModal: true\n        })\n    }\n\n    handleEnterPasscode(passcode) {\n        const { passcodeTeacherId } = this.props.school\n        const { passcodeAdminId, teachers } = this.props\n        const { pageClicked, teacherClicked } = this.state\n        const teacher_id = passcodeTeacherId[passcode]\n        const admin_id = passcodeAdminId[passcode]\n        if (admin_id !== undefined) {\n            this.setState({\n                teacher_id: admin_id,\n                pageClicked: '',\n                showModal: true,\n                showLoginNumberPad: false\n            })\n        } else if (pageClicked === 'student_modal' && teacher_id !== undefined) {\n            this.setState({\n                teacher_id,\n                pageClicked: '',\n                showModal: true,\n                showLoginNumberPad: false\n            })\n        } else if (teacher_id === undefined || teacher_id !== teacherClicked) {\n            Toast.show({\n                text: 'Wrong password!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 3000\n            })\n        } else {\n            this.setState({\n                showModal: true,\n                showLoginNumberPad: false,\n                // modalTeacherId: teacher_id\n            })\n        }\n    }\n\n    hideLoginPad() {\n        this.setState({ \n            showLoginNumberPad: false,\n            modalStudentId: ''\n        })\n    }\n\n    hideModal() {\n        this.setState({\n            showModal: false,\n            modalStudentId: '',\n            teacher_id: ''\n        })\n    }\n\n    render() {\n        const { school_id } = this.props.route.params\n        const { school, teacherOnDuty } = this.props\n        const { \n            student_present,\n            student_unmarked,\n            student_absent,\n            teacher_present,\n            teacher_unmarked,\n            teacher_absent\n        } = school\n        const { \n            display_list,\n            students_or_teachers,\n            selected_class_id,\n            modalStudentId,\n            teacherClicked,\n            teacher_id,\n            showLoginNumberPad\n        } = this.state\n        // console.log('school: ', school)\n        // console.log('attendance: ', school.attendance)\n        // console.log('student_present: ', student_present)\n        // console.log('student_absent: ', student_absent)\n        // console.log('teacherOnDuty: ', teacherOnDuty)\n        // console.log('teacher_id: ', teacher_id)\n        return (\n            <View style={{ flex: 1 }}>\n                {showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={() => this.hideLoginPad()}\n                    /> : null\n                }\n\n                <Modal\n                    show={this.state.showModal}\n                    student_id={modalStudentId}\n                    teacher_id={teacherClicked}\n                    teacherOnDuty={teacherOnDuty || teacher_id}\n                    class_id={selected_class_id}\n                    school_id={school_id}\n                    navigation={this.props.navigation}\n                    // unmarked={unmarked}\n                    // absent={absent}\n                    fetchStudentAttendance={() => this.fetchStudentAttendance()}\n                    fetchTeacherAttendance={() => this.fetchTeacherAttendance()}\n                    hideModal={() => this.hideModal()}\n                />\n                \n                {/*////////\n                STUDENT/TEACHER \n                ////////*/}\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ \n                                flex: 1, \n                                backgroundColor: students_or_teachers === 'students' ? 'lightgrey' : 'white', \n                                justifyContent: 'center' \n                            }}\n                            onPress={() => this.selectPersonType('students')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>學生</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ \n                                flex:1,\n                                backgroundColor: students_or_teachers === 'teachers' ? 'lightgrey' : 'white', \n                                justifyContent: 'center' \n                            }}\n                            onPress={() => this.selectPersonType('teachers')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>教師</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                {/*////////\n                CLASSES\n                ////////*/}\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                    {Object.keys(school.classes).map(class_id => {\n                        if (class_id === 'all') {\n                            return null\n                        }\n                        return (\n                            <View key={class_id} style={{ flex: 1, padding: 10 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        backgroundColor: selected_class_id === class_id ? 'lightgrey' : 'white', \n                                        justifyContent: 'center' \n                                    }}\n                                    onPress={() => this.selectClass(class_id)}\n                                >\n                                    <Text style={{ fontSize: 40, textAlign: 'center' }}>{school.classes[class_id].name}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        )\n                    })}\n                </View>\n\n                {/*////////\n                ATTENDANCE STATUS\n                ////////*/}\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex: 1, backgroundColor: '#ffe1d0', justifyContent: 'center' }}\n                            onPress={() => this.selectAttendanceType('absent')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>缺席</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, backgroundColor: '#fff1b5', justifyContent: 'center' }}\n                            onPress={() => this.selectAttendanceType('unmarked')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>未知</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, backgroundColor: '#dcf3d0', justifyContent: 'center' }}\n                            onPress={() => this.selectAttendanceType('present')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>出席</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                {/*////////\n                DISPLAY\n                ////////*/}\n                <View style={{ flex: 9, backgroundColor: 'lightgrey' }}>\n                    <ScrollView contentContainerStyle={{ flexDirection:'row', flexWrap: 'wrap', backgroundColor: 'transparent' }}>\n                        {display_list.map(person_id => {\n                            const person = school[students_or_teachers][person_id]\n                            return (\n                                <TouchableHighlight \n                                    key={person_id}\n                                    style={{ \n                                        height: 300, \n                                        width: '33.3%', \n                                        padding: 5,\n                                        // backgroundColor: this.props.attendance.unmarked.has(person_id) ? 'black' : 'white'\n                                    }}\n                                    onPress={() => this.handleOnClick(person_id)}\n                                >\n                                    {/* <View style={{ flex: 1, padding: 10, backgroundColor: 'white' }}> */}\n                                        <Card style={{ flex: 1, padding: 10, backgroundColor: 'white' }}>\n                                            <CardItem style={{ justifyContent: 'center' }}>\n                                                    <Image\n                                                        source={\n                                                            person.profile_picture === '' && students_or_teachers === 'students' ?\n                                                                require('../../assets/icon-thumbnail.png')\n                                                                : person.profile_picture === '' && students_or_teachers === 'teachers' ?\n                                                                    require('../../assets/icon-teacher-thumbnail.png')\n                                                                    : {uri: person.profile_picture}\n                                                        }\n                                                        style={{\n                                                            height: 200,\n                                                            width: 200,\n                                                            borderRadius: 100,\n                                                            borderWidth: 10,\n                                                            borderColor: \n                                                                student_present.has(person_id) || teacher_present.has(person_id) ? '#dcf3d0'\n                                                                    : student_unmarked.has(person_id) || teacher_unmarked.has(person_id) ? '#fff1b5'\n                                                                        : '#ffe1d0'\n                                                        }}\n                                                    />\n                                            </CardItem>\n                                            <CardItem\n                                                footer\n                                                style={{ justifyContent: 'center', marginTop: -5 }}\n                                            >\n                                                <Text style={{ marginTop: -10 }}>{person.name}</Text>\n                                            </CardItem>\n                                        </Card>\n                                    {/* </View> */}\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        school: state.school,\n        teacherOnDuty: state.school.teacherOnDuty,\n        teachers: state.school.teachers,\n        passcodeAdminId: state.school.passcodeAdminId,\n        attendance: state.attendance\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            fetchTeacherAttendanceSuccess,\n            fetchStudentAttendanceSuccess\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (AttendancePage)","import React from 'react'\nimport { View, Text, RefreshControl, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { connect } from 'react-redux'\n// import MedRequestModal from './medrequestmodal'\nimport { bindActionCreators } from 'redux';\n// import { initializeRequests, fillMedRequest } from '../../../redux/school/actions/index' \nimport Reloading from '../reloading'\nimport { formatHourMinute } from '../util'\nimport LoginNumberPad from './loginnumberpad'\n\nclass Inbox extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            refreshing: false,\n            selected_request_id: '',\n            showLoginNumberPad: false\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    render() {\n        const { messages, students } = this.props.route.params\n        // console.log(messages)\n        return (\n            <View style={{ flex: 1, padding: 40 }}>\n                <ScrollView>\n                    {messages.map((message, index) => {\n                        const { activities, items_to_bring, message_for_teacher, morning_reminder, other_activity, other_item, student_id, teacher_id, text } = message\n                        return (\n                            <View \n                                key={index}\n                                style={{\n                                    flexDirection: 'row',\n                                    backgroundColor: 'white',\n                                    borderWidth: 1,\n                                    borderColor: 'lightgrey',\n                                    marginBottom: 20,\n                                    padding: 20,\n\n                                }}\n                            >\n                                <View>\n                                    <Image\n                                        source={\n                                            students[student_id].profile_picture === '' ?\n                                                require('../../assets/icon-thumbnail.png')\n                                                : {uri: students[student_id].profile_picture} \n                                        }\n                                        style={styles.thumbnailImage}\n                                    />\n                                    <View style={{ justifyContent: 'center', alignItems: 'center', paddingTop: 20 }}>\n                                        <Text style={{ fontSize: 25 }}>\n                                            {students[student_id].name}\n                                        </Text>\n                                    </View>\n                                </View>\n                                \n                                <View style={{ flex:1, backgroundColor: '', marginLeft: 20 }}>\n\n                                    <View style={{}}>\n                                        <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                            老師的話:\n                                        </Text>\n                                        <Text style={{ fontSize: 20 }}>\n                                            {text && text + '\\n'}\n                                        </Text>\n                                    </View>\n\n                                    <View style={{}}>\n                                        <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                            家長回應:\n                                        </Text>\n                                        <Text style={{ fontSize: 20 }}>\n                                            {message_for_teacher && message_for_teacher + '\\n'}\n                                        </Text>\n                                    </View>\n\n                                    <View style={{}}>\n                                        <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                            早晨叮嚀:\n                                        </Text>\n                                        <Text style={{ fontSize: 20 }}>\n                                            {morning_reminder && morning_reminder + '\\n'}\n                                        </Text>\n                                    </View>\n\n                                </View>\n                            </View>\n                        )\n                    })}\n                </ScrollView>\n            </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 170,\n        paddingRight: 5\n    },\n    thumbnailImage: {\n        height: 160,\n        width: 160,\n        borderRadius: 80\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        requests: state.medicationrequests\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Inbox)","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess, deleteTeacher  } from '../../../redux/school/actions/index'\n\n\nexport default class DownloadPage extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: ''\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  handleNavigate(pageName) {\n    const { school_name, school_id } = this.props.route.params\n    this.props.navigation.navigate(pageName, { school_name, school_id })\n  }\n\n  render() {\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'space-around'}}>\n            <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('DownloadTeacherAttendance')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>學生出勤表</Text>\n            </TouchableHighlight>\n\n            <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('DownloadTeacherAttendance')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>教師出勤表</Text>\n            </TouchableHighlight>\n        </ScrollView>\n    )\n  }\n}","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess, deleteTeacher  } from '../../../redux/school/actions/index'\n\n\nexport default class DownloadTeacherAttendance extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: ''\n    }\n  }\n\n  componentDidMount() {\n    const { school_name, school_id } = this.props.route.params\n    console.log('school_name, school_id: ', school_name, school_id)\n\n  }\n\n  render() {\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n            {/* <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('Registration')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>教師出勤</Text>\n            </TouchableHighlight> */}\n        </ScrollView>\n    )\n  }\n}","import React from 'react'\nimport { View, TouchableHighlight, Text } from 'react-native'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport reducer from '../../redux/school/reducers/index'\nimport TeacherHome from './teacherhome'\nimport { NavigationContainer } from '@react-navigation/native'\nimport { createStackNavigator } from '@react-navigation/stack'\nimport SchoolHome from './schoolhome'\nimport TeacherClockInOut from './teacherclockinout';\n// import DismissChildQRScan from './dismisschildqrscan';\nimport TeacherMedicineLog from './logs/medicinelog';\nimport WellnessLog from './logs/wellnesslog';\nimport TeacherAppetiteLog from './logs/appetitelog';\nimport TeacherSleepLog from './logs/sleeplog';\nimport TeacherMilkLog from './logs/milklog';\nimport DiaperLog from './logs/diaperlog';\nimport AdminHome from './admin/adminhome'\nimport Registration from './admin/registration'\nimport Students from './admin/students'\nimport Teachers from './admin/teachers'\nimport MessageForParents from './messageforparents'\nimport AttendancePage from './attendancepage'\nimport PickupAlert from './pickupalert'\nimport Inbox from './inbox'\nimport DownloadPage from './admin/downloadpage'\nimport DownloadTeacherAttendance from './admin/downloadteacherattendance'\n\nconst store = createStore(reducer)\nconst Stack = createStackNavigator()\n\nexport default class SchoolApp extends React.Component {\n\n    render() {\n        return (\n            <Provider store={store}>\n                <NavigationContainer>\n                    <Stack.Navigator \n                        initialRouteName=\"SchoolHome\"\n                        screenOptions={{\n                            gestureEnabled: false,\n                            headerTitleStyle: {\n                                fontWeight: 'bold',\n                                fontSize: 30\n                            },\n                            // cardStyle: { backgroundColor: 'transparent' },\n                            // cardOverlayEnabled: true,\n                            // cardStyleInterpolator: ({ current: { progress } }) => ({\n                            //     cardStyle: {\n                            //         opacity: progress.interpolate({\n                            //         inputRange: [0, 0.5, 0.9, 1],\n                            //         outputRange: [0, 0.25, 0.7, 1],\n                            //         }),\n                            //     },\n                            //     overlayStyle: {\n                            //         opacity: progress.interpolate({\n                            //         inputRange: [0, 1],\n                            //         outputRange: [0, 0.5],\n                            //         extrapolate: 'clamp',\n                            //         }),\n                            //     },\n                            // }),\n                        }}\n                    >\n                        <Stack.Screen \n                            name=\"SchoolHome\"\n                            component={SchoolHome}\n                            initialParams={{\n                                school_id: this.props.school_id,\n                                school_name: this.props.school_name,\n                                loadAuth: this.props.loadAuth\n                            }}\n                            options={{ \n                                title: '',\n                                headerRight: () => (\n                                    <TouchableHighlight\n                                        style={{ padding: 10, marginRight: 20 }}\n                                        onPress={() => this.props.handleSignOut()}\n                                    >\n                                        <Text style={{ fontSize: 30 }}>登出</Text>\n                                    </TouchableHighlight>\n                                )\n                            }}\n                        />\n                        <Stack.Screen \n                            name=\"AdminHome\"\n                            component={AdminHome}\n                            options={{ gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Registration\"\n                            component={Registration}\n                            options={{ headerLeft: null, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Students\"\n                            component={Students}\n                            options={{ gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Teachers\"\n                            component={Teachers}\n                            options={{ gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"DownloadPage\"\n                            component={DownloadPage}\n                            options={{ gestureEnabled: true, title: '下載' }}\n                        />\n                        <Stack.Screen \n                            name=\"DownloadTeacherAttendance\"\n                            component={DownloadTeacherAttendance}\n                            options={{ gestureEnabled: true, title: '學生出勤下載' }}\n                        />\n                        <Stack.Screen \n                            name=\"AttendancePage\"\n                            component={AttendancePage}\n                            options={{\n                                title: '出席/打卡',\n                                headerRight: () => (\n                                    <View style={{ paddingRight: 20 }}>\n                                        <Text style={{ fontSize: 30 }}>{'值班老師：未登入'}</Text>\n                                    </View>\n                                )\n                            }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherHome\"\n                            component={TeacherHome}\n                            options={{ headerLeft: null, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Inbox\"\n                            component={Inbox}\n                            options={{gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen\n                            name=\"PickupAlert\"\n                            component={PickupAlert}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherClockInOut\"\n                            component={TeacherClockInOut}\n                            options={{ gestureEnabled: true, title: '打卡' }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherMedicineLog\"\n                            component={TeacherMedicineLog}\n                            options={{ gestureEnabled: true, title: '托藥單' }}\n                        />\n                        <Stack.Screen \n                            name=\"WellnessLog\"\n                            component={WellnessLog}\n                            options={{ gestureEnabled: true, title: '健康', headerLeft: null }}\n                        />\n                        <Stack.Screen \n                            name=\"MessageForParents\"\n                            component={MessageForParents}\n                            options={{ gestureEnabled: true, title: '老師留⾔', headerLeft: null }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherAppetiteLog\"   \n                            component={TeacherAppetiteLog}\n                            options={{ gestureEnabled: true, title: '飲食', headerLeft: null }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherSleepLog\"\n                            component={TeacherSleepLog}\n                            options={{ gestureEnabled: true, title: '睡眠', headerLeft: null }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherMilkLog\"\n                            component={TeacherMilkLog}\n                            options={{ gestureEnabled: true, title: '餵奶', headerLeft: null }}\n                        />\n                        <Stack.Screen \n                            name=\"DiaperLog\"\n                            component={DiaperLog}\n                            options={{ gestureEnabled: true, title: '如廁', headerLeft: null }}\n                        />\n                        \n                    </Stack.Navigator>\n                </NavigationContainer>\n            </Provider>\n        )\n    }\n}","import React from 'react'\nimport { StyleSheet, TextInput, Platform, KeyboardAvoidingView, TouchableHighlight, Image } from 'react-native'\nimport { View, Text } from 'native-base'\nimport Auth from '@aws-amplify/auth'\nimport Reloading from '../reloading'\n\nclass Signin extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            password: '',\n            errMessage: '',\n            user_type: '',\n            isLoading: false\n        }\n    }\n\n    componentDidMount() {\n        // this.props.clearState\n    }\n\n    handleSignIn() {\n        // invoke google auth with scopes, ask for school's authorization\n        // allow requests to googple photo api\n        this.setState({\n            isLoading: true\n        })\n        const { username, password } = this.state\n        Auth.signIn(username, password)\n            .then((user) => {\n                if (user.challengeName === 'NEW_PASSWORD_REQUIRED') {\n                    // const {requiredAttributes} = user.challengeParam\n                    this.completeNewPassword(user)\n                    return\n                }\n                this.setState({\n                    isLoading: false\n                })\n                this.props.loadAuth()\n            })\n            .catch((err) => {\n                if (err.code === 'UserNotConfirmedException') {\n                    this.props.changeAuthState('ConfirmSignUpPage', username)\n                } else {\n                    this.props.changeAuthState('signedout', username)\n                    this.setState({ \n                        errMessage: err.message,\n                        isLoading: false\n                    })\n                }\n            })\n    }\n\n    completeNewPassword(user) {\n        Auth.completeNewPassword(\n            user,\n            'barRoco',\n            { name: 'barroco' }\n        )\n        .then((user) => {\n            this.setState({\n                isLoading: false\n            })\n            this.props.loadAuth()\n        })\n        .catch((err) => {\n            this.setState({\n                errMessage: err.message,\n                isLoading: false\n            })\n        })\n    }\n\n    render () {\n        const { isLoading } = this.state\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        const keyboardVerticalOffset = Platform.OS === 'ios' ? 60 : 0\n        const errMessage = this.state.errMessage ? (\n            <Text style={{ color: 'red'}}>\n                {this.state.errMessage}\n            </Text>\n        ) : (\n            null\n        )\n\n        return (\n            <KeyboardAvoidingView \n                style={styles.container} \n                behavior={'padding'}\n                keyboardVerticalOffset={keyboardVerticalOffset} \n                enabled\n            >\n                <Image\n                    source={require('../../assets/app_logo.png')}\n                    style={{\n                        width: 200,\n                        height: 200,\n                    }}\n                />\n\n                <Text style={{ fontSize: 40 }}>請登入</Text>\n                {errMessage}\n                <TextInput\n                    placeholder=\"Email / 帳號\"\n                    keyboardType=\"email-address\"\n                    autoCapitalize=\"none\"\n                    style={styles.textInput}\n                    onChangeText={(username) => this.setState({ username })}\n                    value={this.state.username}\n                />\n\n                <TextInput\n                    secureTextEntry\n                    placeholder=\"密碼\"\n                    style={styles.textInput}\n                    onChangeText={(pass) => this.setState({ password: pass })}\n                    value={this.state.password}\n                />\n\n                <View style={{ marginTop: 20 }}>\n                    <TouchableHighlight\n                        style={{ backgroundColor: 'grey', padding: 20 }}\n                        onPress={() => this.handleSignIn()}\n                    >\n                        <Text style={{ fontSize: 30 }}>登入</Text>\n                    </TouchableHighlight>\n                </View>\n                \n                {/*<View style={{ width: '90%', margin: 10, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('','')}>\n                        <Text>Sign in</Text>\n                    </Button>\n                    <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.props.changeAuthState('SignupPage', '')}>\n                        <Text>No Account? Sign up here!</Text>\n                    </Button>\n                </View>\n                <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('abc123', 'password')}>\n                    <Text>我是家長</Text>\n                </Button>\n                <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('formosa', 'formosaADMIN')}>\n                    <Text>我是校方</Text>\n                </Button>*/}\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    textInput: {\n        height: 80,\n        width: '90%',\n        borderColor: 'gray',\n        borderWidth: 1,\n        marginTop: 20,\n        fontSize: 30,\n        padding: 10\n    }\n})\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n//         ...bindActionCreators({addUserType, clearState}, dispatch)\n//     }\n// }\n\n// function mapStateToProps(state) {\n//     return({\n//         user: state.user\n//     })\n// }\n\n// export default connect(mapStateToProps, mapDispatchToProps) (Signin)\nexport default Signin","import React from 'react'\n// import { db } from '../../configuration/db'\nimport { View, StyleSheet, Text, KeyboardAvoidingView, TextInput, AsyncStorage, TouchableHighlight } from 'react-native'\nimport { Button } from 'native-base'\n// import firebase from 'firebase'\n// import { addCurrentUser, addUserType } from '../../redux/actions/index'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons'\nimport Auth from '@aws-amplify/auth'\n\nclass Signup extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            name: '',\n            user_type: '',\n            email: '',\n            password: '',\n            errMessage: ''\n        }\n    }\n\n    handleSignup() {\n        const {username, password, name, email, user_type} = this.state\n        if (!this.state.user_type) {\n            this.setState({ errMessage: 'Please select user role'})\n        } else {\n            Auth.signUp({\n                username,\n                password,\n                attributes: {\n                    name,\n                    email\n                }\n            })\n                .then((data) => {\n                    // console.log(data)\n                    // switch to code input page\n                    // initialize user in database and recorde user id \n                    // for use later to switch to homepage upon successful code input\n                    console.log(this.state.user_type)\n\n                    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/user/' + username, {\n                        method: 'POST',\n                        headers: {\n                            Accept: 'application/json',\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            name,\n                            email,\n                            role: user_type\n                        })\n                    })\n                        .then((response) => response.json())\n                        .then((responseJson) => {\n                            console.log(responseJson)\n                            // this.props.navigation.navigate('ConfirmSignUpPage', {role: this.state.user_type})\n                            this.props.changeAuthState('ConfirmSignUpPage')\n                        })\n                        .catch((err) => {\n                            console.error(err)\n                        })\n                })\n                .catch((err) => {\n                    this.setState({ errMessage: err.message })\n                })            \n        }\n    }\n\n    setUserRole (role) {\n        this.setState({ user_type: role })\n    }\n\n    render () {\n        return (\n            <KeyboardAvoidingView style={styles.container} behavior=\"padding\" enabled>\n                <View style={{ width: '45%', marginBottom:20, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('teacher')}}>\n                        <Icon\n                            name='food-apple'\n                            size={80}\n                            color='#C93D1B'>\n                        </Icon>\n                        {/* <Text>Teacher</Text> */}\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('parent')}}>\n                        <Icon\n                            name='baby-buggy'\n                            size={80}\n                            color='#f8c43a'>\n                        </Icon>\n                        {/* <Text>Parent</Text> */}\n                    </TouchableHighlight>\n                </View>\n                <Text>{this.state.user_type} Sign Up</Text>\n                {this.state.errMessage === '' ?\n                    null \n                : <Text style={{ color: 'red' }}>\n                    {this.state.errMessage}\n                </Text>}\n\n                <TextInput\n                    placeholder=\"username\"\n                    style={styles.textInput}\n                    onChangeText={(username) => this.setState({ username })}\n                    value={this.state.username}\n                />\n                <TextInput\n                    secureTextEntry\n                    placeholder=\"password\"\n                    style={styles.textInput}\n                    onChangeText={(password) => this.setState({ password })}\n                    value={this.state.password}\n                />\n                <TextInput\n                    placeholder=\"Name\"\n                    style={styles.textInput}\n                    onChangeText={(name) => this.setState({ name })}\n                    value={this.state.name}\n                />\n                <TextInput\n                    placeholder=\"Email\"\n                    style={styles.textInput}\n                    onChangeText={(email) => this.setState({ email })}\n                    value={this.state.email}\n                />\n                \n                <View style={{ width: '90%', margin: 10, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={this.handleSignup.bind(this)}>\n                        <Text>Sign up</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={() => this.props.changeAuthState('signedout')}>\n                        <Text> Already have an account? Sign in here</Text>\n                    </TouchableHighlight>\n                </View>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    textInput: {\n        height: 40,\n        width: '90%',\n        borderColor: 'gray',\n        borderWidth: 1,\n        marginTop: 8\n    }\n})\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n//         ...bindActionCreators({ addCurrentUser, addUserType }, dispatch)\n//     }\n// }\n\n// function mapStateToProps(state) {\n//     return({\n//         user: state.user\n//     })\n// }\n\n// export default connect(mapStateToProps, mapDispatchToProps) (Signup)\nexport default Signup","import { combineReducers } from 'redux'\nimport parent from './parent'\nimport attendance from './attendance'\nimport inbox from './inbox'\n\nexport default combineReducers({\n    parent,\n    attendance,\n    inbox\n})","export default function parent(state = {\n    // first_name: '',\n    // last_name: '',\n    // id: '',\n    isConnected: true,\n    child_of_id: {\n        /*\n        {child_A_id}: {\n            first_name: \"\",\n            last_name: \"\",\n            class_id: SOME_ID,\n            profile_pic: \"\",\n            // teacher_ids: []\n        },\n        {child_B_id}: {\n            first_name: \"\",\n            last_name: \"\",\n            class_id: SOME_ID,\n            profile_pic: \"\"\n        }\n        */\n    },\n    med_requests: []\n    // teachers: {\n\n    // }\n}, action) {\n    switch (action.type) {\n        case 'SET_CONNECT_STATE': {\n            const { isConnected } = action\n            return {\n                ...state,\n                isConnected\n            }\n        }\n        case 'INITIALIZE_CHILDREN':\n            const { data } = action\n            data.forEach((child) => {\n                const { id, name, class_id, profile_picture, school_id } = child\n                state.child_of_id[id] = {\n                    name,\n                    class_id,\n                    profile_picture,\n                    school_id\n                }\n            })\n            return {\n                ...state\n            }\n\n        case 'MARK_PRESENT':\n            const { student_id } = action\n            state.child_of_id[student_id].present = true\n            return {\n                ...state\n            }\n\n        case 'GET_MED_REQUEST_SUCCESS': \n            const { med_requests } = action\n            return {\n                ...state,\n                med_requests\n            }\n    \n        case 'CLEAR_STATE': {\n            return {\n                isConnected: true,\n                child_of_id: {},\n                med_requests: []\n            }\n        }\n\n        default:\n            return state\n    }\n}","export default function attendance(state = {\n    days: {\n        1: [ // index representing day of week\n            // ex. id_4, ...\n        ],\n        2: [],\n        3: [],\n        4: [],\n        5: []\n    },\n    attendance: {\n        /*\n        {id_4}: {\n            student_id\n            in_time: '',\n            out_time: '',\n            excuse_type: ''\n        }, {...}\n        */\n    }\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_ATTENDANCE':\n        // initialize attendance status every morning to get any absence excuse(s) of the day\n            return {\n                ...state,\n                days: {\n                    ...state.days,\n                    [action.day]: [...state.days[action.day], action.attendance_id]\n                },\n                attendance: {\n                    ...state.attendance,\n                    [action.attendance_id]: action.attendance_obj\n                }\n            }\n        default:\n            return state\n    }\n}","export default function inbox(state = {\n  current_conversation_id: '',\n  conversations_by_id: {\n    // { conversation_id }: {\n    //   most_recently_read_message_id: 'MESSAGE_ID'\n    //   messages: [\n    //     {\n    //       message_id,\n    //       message_text,\n    //       created_at,\n    //       read_at,\n    //       sender_id\n    //     }, {...}\n    //   ]\n    // }\n  }\n}, action) {\n  switch (action.type) {\n    // case 'SET_READ_RECEIPT':\n    //   const {most_recently_read_message_id} = action\n    //   return {\n    //     ...state,\n    //     most_recently_read_message_id\n    //   }\n    case 'SET_MESSAGE_DATA':\n      const newState = { ...state }\n      const { messages, most_recently_read_message_id, conversation_id } = action\n      newState.conversations_by_id[conversation_id] = {\n        messages, \n        most_recently_read_message_id\n      }\n      newState.current_conversation_id = conversation_id\n      return newState\n\n    case 'SET_CURRENT_CONVERSATION_ID':\n      return {\n        ...state,\n        current_conversation_id: action.conversation_id\n      }\n\n    case 'CLEAR_CURRENT_CONVERSATION_ID':\n      return {\n        ...state,\n        current_conversation_id: ''\n      }\n\n    default:\n      return state\n  }\n}","\nexport const initializeChildren = (data) => {\n    return {\n        type: 'INITIALIZE_CHILDREN',\n        data\n    }\n}\n\nexport const setReadReceipt = (most_recently_read_message_id) => {\n    return {\n        type: 'SET_READ_RECEIPT',\n        most_recently_read_message_id\n\n    }\n}\n\nexport const setMessageDataParent = (messages, most_recently_read_message_id, conversation_id) => {\n    return {\n        type: 'SET_MESSAGE_DATA',\n        messages,\n        most_recently_read_message_id,\n        conversation_id\n    }\n}\n\nexport const clearCurrentConversationIdParent = () => {\n    return {\n        type: 'CLEAR_CURRENT_CONVERSATION_ID'\n    }\n}\n\nexport const clearState = () => {\n    return {\n        type: 'CLEAR_STATE'\n    }\n}\n\nexport const getMedRequestSuccess = (med_requests) => {\n    return {\n        type: 'GET_MED_REQUEST_SUCCESS',\n        med_requests\n    }\n}\n\nexport const markPresent = (student_id) => {\n    return {\n        type: 'MARK_PRESENT',\n        student_id\n    }\n}\n\nexport const setConnectState = (isConnected) => {\n    return {\n        type: 'SET_CONNECT_STATE',\n        isConnected\n    }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData } from '../util'\nimport Reloading from '../reloading'\n\nexport default class WellnessCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date());\n    }\n  }\n\n  async fetchData(child_id, date) {\n    // const date = new Date(datetime.getTime())\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const wellnessData = await fetchData('wellness', child_id, start_date, end_date)\n    this.setState({\n      wellnessData,\n      isLoading: false\n    }) \n    if (wellnessData && wellnessData[start_date]) {\n      this.props.updateTitleTemp(wellnessData[start_date][0][1])\n    } else {\n      this.props.updateTitleTemp('')\n    }\n  }\n\n  render() {\n    const { wellnessData, isLoading} = this.state\n    const date = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-wellness.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>健康</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : wellnessData && wellnessData[date] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row' }}\n                  >\n                    <View style={{ flex: 1, justifyContent: 'center', paddingBottom: 5 }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1, justifyContent: 'center'  }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>體溫</Text>\n                    </View>\n                    <View style={{ flex: 2, justifyContent: 'center'  }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>今日狀況</Text>\n                    </View>\n                  </View>\n                  {wellnessData[date].map((record, index) => {\n                    return (\n                      <View\n                        key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[0]}</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center'  }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[1]}°</Text>\n                        </View>\n                        <View style={{ flex: 2, justifyContent: 'center'  }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[2]}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, TextInput, Image } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { formatDate, fetchData, beautifyDate } from '../util'\nimport Reloading from '../reloading'\n\nexport default class AppetiteCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      // rankings: ['Ok', 'Good', 'Awesome!'],\n      fruit_name: null,\n      isLoading: true,\n      breakfast: null,\n      fruit: null,\n      lunch: null,\n      snack: null,\n      // rating: {\n      //   'Awesome': '滿滿一碗',\n      //   'Good': '７/8分滿',\n      //   'Ok': '半碗',\n      //   'Poor': '胃口不佳'\n      // }\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const appetiteData = await fetchData('appetite', child_id, start_date, end_date)\n    this.denormalizeAppetiteData(appetiteData.data, date)\n  }\n\n  denormalizeAppetiteData(appetiteData) {\n    const { date } = this.props\n    const today = formatDate(date)\n    if (appetiteData && appetiteData[today]){\n      const { fruit_name, breakfast_rating, fruit_rating, lunch_rating, snack_rating } = appetiteData[today]\n      // console.log('fruit_name: ', fruit_name)\n      const breakfast = this.parseData(breakfast_rating)\n      const fruit = this.parseData(fruit_rating)\n      const lunch = this.parseData(lunch_rating)\n      const snack = this.parseData(snack_rating)\n\n      this.setState({\n        fruit_name,\n        breakfast,\n        fruit,\n        lunch,\n        snack,\n        appetiteData,\n        isLoading: false\n      })\n    } else {\n      this.setState({\n      appetiteData,\n      isLoading: false\n    })\n    }\n  }\n\n  parseData(data_string) {\n    const rating = data_string.slice(0, -1)\n    const water_drunk = parseInt(data_string.slice(-1))\n    // const rating_icons = {\n    //   'Awesome': require('../../assets/icon-appetite-awesome.png'),\n    //   'Good': require('../../assets/icon-appetite-good.png'),\n    //   'Ok': require('../../assets/icon-appetite-ok.png')\n    // }\n    return {\n      // rating_icon: rating_icons[rating],\n      rating,\n      water_drunk\n    }\n  }\n\n  getEmoji() {\n\n  }\n\n  getWaterDrinkingStatus() {\n    \n  }\n\n  render() {\n    const { appetiteData, isLoading, breakfast, fruit, lunch, snack, rating, fruit_name } = this.state\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-appetite.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>飲食</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : appetiteData && appetiteData[today] ? \n                <View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {breakfast ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>早餐</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{breakfast.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {breakfast.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                  {fruit ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>{(fruit_name !== '水果' && `水果餐: ${fruit_name}`) || '水果'}</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{fruit.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {fruit.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n                  </View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {lunch ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>午餐</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{lunch.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {lunch.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n\n                    </View>\n                    : null\n                  }\n\n                  {snack ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>點心</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{snack.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {snack.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                </View>\n                </View>\n            : <View style={{ flex: 1, paddingVertical: 8 }}>\n                <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n              </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData, formatTime } from '../util';\nimport Reloading from '../reloading';\n\nexport default class MilkCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const milkIntakeData = await fetchData('milkintake', child_id, start_date, end_date)\n    this.setState({\n      milkIntakeData,\n      isLoading: false\n    })\n  }\n\n  render() {\n    const { milkIntakeData, isLoading } = this.state\n    // console.log('milkIntakeData: ', milkIntakeData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-milk.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>喝奶</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n            : milkIntakeData && milkIntakeData[today] ?\n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row', paddingBottom: 5 }}\n                  >\n                    <View style={{ width: '25%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ width: '28%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>量</Text>\n                    </View>\n                    <View style={{ width: '28%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>乳品</Text>\n                    </View>\n                    <View style={{ width: '19%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>老師</Text>\n                    </View>\n                  </View>\n                  {milkIntakeData[today].map((record, index) => {\n                    const { time, amount, milk_type, teacher_name } = record\n                    return (\n                      <View key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ width: '25%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ width: '28%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{amount} c.c.</Text>\n                        </View>\n                        <View style={{ width: '28%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{milk_type}</Text>\n                        </View>\n                        <View style={{ width: '19%' }}>\n                          <Text style={{fontSize: 20, textAlign: 'center', color: '#404040' }}>{teacher_name !== null && teacher_name.slice(1)}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n              : <View style={{ flex: 1, paddingVertical: 8  }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading'\n\nexport default class SleepCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const sleepData = await fetchData('sleep', child_id, start_date, end_date)\n    this.setState({\n      sleepData,\n      isLoading: false\n    })\n  }\n\n  render() {\n    const { sleepData, isLoading } = this.state\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-sleep.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>睡眠</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : sleepData && sleepData[today] ?\n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row', paddingBottom: 5 }}\n                  >\n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>從</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                    </View>\n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>到</Text>\n                    </View>\n                  </View>\n                  {sleepData[today].map((record, index) => {\n                    const { sleep_time, wake_time, hours, minutes } = record\n                    return (\n                      <View\n                        key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{sleep_time}</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center'}}>\n                          <Text style={{ fontSize: 15, textAlign: 'center', color: '#404040' }}>{hours}H {minutes}M</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{wake_time}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading';\n\nexport default class RestroomCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const diaperData = await fetchData('diaper', child_id, start_date, end_date)\n    this.setState({\n      isLoading: false,\n      diaperData\n    })\n  }\n\n  render() {\n    const { isLoading, diaperData } = this.state\n    // console.log('diaperData: ', diaperData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-diaper.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>如廁</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : diaperData && diaperData[today] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View style={{ flexDirection: 'row', paddingBottom: 5 }}>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>排泄</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>使用</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>狀況</Text>\n                    </View>\n                  </View>\n                  {diaperData[today].map((record, index) => {\n                    const { time, cloth_diaper, pee_or_poo, condition, teacher_id } = record\n                    return (\n                      <View key={index} style={{ flexDirection: 'row' }}>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{pee_or_poo}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{cloth_diaper ? '學習褲' : '尿布'}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{condition}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image, TextInput, TouchableOpacity, Alert } from 'react-native'\nimport { Card, Body } from 'native-base'\nimport { formatDate, fetchData, post, beautifyTime, formatTime, get } from '../util'\nimport Reloading from '../reloading'\n\nexport default class MessageCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      isLoading: true,\n      data_available: false,\n      items_to_bring: [],\n      activities: [],\n      text: '',\n      teacher_id: '',\n      message_id: null,\n      message_for_teacher: '',\n      isConnected: true,\n      scrollHeight: '100%',\n      message_read: false\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n    // this.fetchDiaperAmount(child_id)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n      this.fetchData(this.props.child_id, new Date());\n    } else if (this.props.isConnected != prevProps.isConnected) {\n      this.setState({\n        isConnected: this.props.isConnected\n      })\n    }\n  }\n\n  setScrollHeight(scrollHeight) {\n    this.setState({ scrollHeight })\n  }\n\n  async fetchData(child_id, propDate) {\n    let date = new Date(propDate.getTime())\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false,\n        message_for_teacher: '',\n        data_available: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchData('message', child_id, start_date, end_date)\n    if (messageData.data === undefined || messageData.data[start_date] === undefined) {\n      this.setState({\n        isLoading: false,\n        message_for_teacher: '',\n        data_available: false\n      })\n      return\n    }\n    this.denormalize(messageData.data[start_date])\n  }\n\n  denormalize(message_data) {\n    const items_list = ['母奶粉', '尿布', '水壺', '衣物']\n    const activities_list = ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言']\n    const items_to_bring = []\n    const activities = []\n    for (var i = 0; i < message_data.items_to_bring.length-1; i++) {\n      if (message_data.items_to_bring[i]) {\n        items_to_bring.push(items_list[i])\n      }\n    }\n\n    if (message_data.items_to_bring[message_data.items_to_bring.length-1]) {\n      items_to_bring.push(message_data.other_item)\n    }\n\n    for (var i = 0; i < message_data.activities.length - 1; i++) {\n      if (message_data.activities[i]) {\n        activities.push(activities_list[i])\n      }\n    }\n\n    if (message_data.activities[message_data.activities.length - 1]) {\n      activities.push(message_data.other_activity)\n    }\n\n    this.setState({\n      isLoading: false,\n      data_available: true,\n      message_id: message_data.message_id,\n      items_to_bring,\n      activities,\n      text: message_data.text,\n      teacher_id: message_data.teacher_id,\n      message_for_teacher: message_data.message_for_teacher,\n      message_read: message_data.message_read\n    })\n  }\n\n  async sendMessage() {\n    const { class_id, parent_id, date } = this.props\n    const { message_for_teacher, message_id, isConnected } = this.state\n    if (!this.editable() || message_for_teacher === '') return\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n\n    // const now = new Date()\n    const body = {\n      student_id: this.props.child_id,\n      parent_id,\n      message_id,\n      message_for_teacher,\n      timestamp: formatDate(date) + ' ' + formatTime(date)\n    }\n    const response = await post(`/message/class/${class_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry 傳送訊息時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    alert(`訊息傳達成功！`)\n    // const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  editable() {\n    const { date } = this.props\n    // console.log('date: ', date)\n    let threshold = new Date()\n    if (threshold.getDay() === 6) { // if today is saturday\n      threshold.setDate(threshold.getDate() - 1)\n    } else if (threshold.getDay() === 0) { // if today is sunday\n      threshold.setDate(threshold.getDate() - 2)\n    }\n    threshold.setHours(17, 0, 0, 0)\n    return date.getTime() >= threshold.getTime() || this.before4am()\n  }\n\n  before4am() {\n    const { date } = this.props\n    let today = new Date()\n    let prev_day = new Date() \n    if (today.getDay() === 1) { // if today is monday, prev_day is last friday\n      prev_day.setDate(prev_day.getDate() - 3)\n      return date.toDateString() === prev_day.toDateString() && today.getHours() < 4\n    } else if (today.getDay() > 1 && today.getDay() < 6) { // today is [ tues, fri ]\n      prev_day.setDate(prev_day.getDate() - 1)\n      return date.toDateString() === prev_day.toDateString() && today.getHours() < 4\n    }\n    return false\n  }\n\n  showMessageForTeacher(){\n    const { date } = this.props\n    let today = new Date()\n    today.setHours(0,0,0,1)\n\n    if (date.toDateString() === today.toDateString() && this.editable()) {\n      return true\n    } else if (date < today) {\n      return true\n    }\n    return false\n  }\n\n  render() {\n    const { items_to_bring, activities, text, teacher_id, isLoading, data_available, message_for_teacher, scrollHeight, message_read } = this.state\n    const { date } = this.props\n    // console.log(date.toDateString())\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, alignItems: 'center', justifyContent: 'center'}}>\n            <Image\n              source={require('../../assets/icon-message.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>訊息</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : data_available ? \n                <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                  <View style={{ padding: 5, marginBottom: 6, backgroundColor: '#F5F5F5' }}>\n                    <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>愛的小語</Text>\n                    <Text style={{ fontSize: 25, paddingVertical: 7 }}>{text}</Text>\n                  </View>\n                  <View\n                    style={{ flexDirection: 'row' }}\n                  >\n                    <View style={{ flex: 1, padding: 5, backgroundColor: '#F5F5F5', marginRight: 3 }}>\n                      <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>家長準備</Text>\n                      {items_to_bring.length ?\n                        <View style={{ alignItems: 'center', paddingVertical: 7}}>\n                          {items_to_bring.map((item, index) => {\n                            return(\n                              <Text \n                                key={index} \n                                style={{ \n                                  padding: 5, \n                                  backgroundColor: 'lightgrey', \n                                  marginBottom: 3,\n                                  fontSize: 25\n                                }}\n                              >\n                                {item}\n                              </Text>\n                            )\n                          })}\n                        </View>\n                        : null\n                      }\n                    </View>\n                    <View style={{ flex: 1, padding: 5, backgroundColor: '#F5F5F5', marginLeft: 3 }}>\n                      <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>今日活動</Text>\n                      {activities.length ?\n                        <View style={{ alignItems: 'center', paddingVertical: 7}}>\n                          {activities.map((activity, index) => {\n                            return(\n                              <Text \n                                key={index}\n                                style={{ \n                                  padding: 5, \n                                  backgroundColor: 'lightgrey', \n                                  marginBottom: 3,\n                                  fontSize: 25\n                                }}\n                              >\n                                {activity}\n                              </Text>\n                            )\n                          })}\n                        </View>\n                        : null\n                      }\n                    </View>\n                  </View>\n\n                  {/* message for teacher */}\n                  <View style={{ backgroundColor: '#ffddb7', marginTop: 5}}>\n                    <View style={{ padding: 5, flexDirection: 'row', justifyContent: 'space-between' }}>\n                      <Text style={{ fontSize: 15 }}>給老師的話</Text>\n                      {message_for_teacher !== '' && <Text style={{ fontSize: 15 }}>{message_read ? '已讀' : '未讀'}</Text>}\n                    </View>\n                    \n                    <TextInput\n                      editable={this.editable()}\n                      style={{\n                        // marginHorizontal: 15,\n                        height: scrollHeight,\n                        justifyContent: 'center',\n                        backgroundColor: 'rgba(255,255,255,0.7)',\n                        paddingTop: 10,\n                        padding: 10,\n                        fontSize: 25\n                      }}\n                      // textAlignVertical={\"top\"}\n                      placeholder={this.editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'}\n                      scrollEnabled={false}\n                      multiline={true}\n                      // blurOnSubmit={true}\n                      // maxLength={200}\n                      value={message_for_teacher}\n                      onChangeText={(message_for_teacher) => this.setState({ message_for_teacher })}\n                      onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                      onLayout={(event) => {\n                        const { scrollHeight } = event.nativeEvent.target\n                        this.setState({\n                            scrollHeight\n                        })\n                      }}\n                    />\n                    <TouchableOpacity\n                      disabled={!this.editable()}\n                      style={{ padding: 10, justifyContent: 'center' }}\n                      onClick={() => this.sendMessage()}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>送出</Text>\n                    </TouchableOpacity>\n                  </View>\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                  {/* message for teacher */}\n                  {this.showMessageForTeacher() && \n                  <View style={{ backgroundColor: '#ffddb7', marginTop: 5}}>\n                    <View style={{ padding: 5, flexDirection: 'row', justifyContent: 'space-between' }}>\n                      <Text style={{ fontSize: 15 }}>給老師的話</Text>\n                      {message_for_teacher !== '' && <Text style={{ fontSize: 15 }}>{message_read ? '已讀' : '未讀'}</Text>}\n                    </View>\n                    \n                    <TextInput\n                      editable={this.editable()}\n                      style={{\n                        // marginHorizontal: 15,\n                        height: scrollHeight,\n                        justifyContent: 'center',\n                        backgroundColor: 'rgba(255,255,255,0.7)',\n                        paddingTop: 10,\n                        padding: 10,\n                        fontSize: 25\n                      }}\n                      // textAlignVertical={\"top\"}\n                      placeholder={this.editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'}\n                      scrollEnabled={false}\n                      multiline={true}\n                      // blurOnSubmit={true}\n                      // maxLength={200}\n                      value={message_for_teacher}\n                      onChangeText={(message_for_teacher) => this.setState({ message_for_teacher })}\n                      onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                    />\n                    <TouchableOpacity\n                      disabled={!this.editable()}\n                      style={{ padding: 10, justifyContent: 'center' }}\n                      onClick={() => this.sendMessage()}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>送出</Text>\n                    </TouchableOpacity>\n                  </View>\n                  }\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, TouchableOpacity, Image, Text} from 'react-native'\nimport { Card } from 'native-base'\n\nexport default class ParentHomeTitle extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      temperature: '',\n      borderRadius: 0\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.temperature !== prevProps.temperature) {\n      this.setState({ temperature: this.props.temperature })\n    }\n  }\n\n  render() {\n    const { temperature, borderRadius } = this.state\n    const { student, student_name } = this.props\n    return (\n      <View style={{ width: '97%', marginLeft: '3%', alignSelf: 'flex-start', flexDirection: 'row'}}>\n        <Card style={{ flexDirection: 'row', width: '85%', alignItems: 'center', paddingVertical: 15 }}>\n          <View \n            style={{\n              flex: 1,\n              width: '50%',\n              alignItems: 'center'\n            }}\n            onLayout={(event) => {\n              var {width} = event.nativeEvent.layout\n              this.setState({ borderRadius: width/2})\n            }}\n          >\n            <Image\n                source={\n                    student.profile_picture === '' ?\n                        require('../../assets/icon-thumbnail.png')\n                        : { uri: student.profile_picture }\n                    }\n                style={\n                  student.profile_picture === '' ?\n                    { width: 130, height: 130 }\n                    : { width: 130, height: 130, borderRadius: 65 }\n                }\n            />\n          </View>\n          <View style={{ height: '90%', width: '50%', paddingLeft: 10 }}>\n            <View style={{ flex: 1}}>\n              <View style={{ height: '50%', alignItems: 'flex-start', justifyContent: 'flex-end' }}>\n                  <Text style={{ fontSize: 40 }}>{student_name}</Text>\n              </View>\n              <View style={{ flex: 1, flexDirection: 'row', paddingTop: 5 }}>\n                <View style={{ flex: 1, height: '100%', backgroundColor: '#F5F5F5', justifyContent: 'center' }}>\n                  <Text style={{ padding: 5 }}>早上體溫</Text>\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    {temperature === '' ? '未量' : `${temperature}°`}\n                  </Text>\n                </View>\n                <TouchableOpacity\n                  style={{ backgroundColor: '#F5F5F5', alignItems: 'center', justifyContent: 'center' }}\n                  onClick={() => this.props.viewQRCode()}\n                >\n                  <Image\n                    source={require('../../assets/icon-qr.png')}\n                    style={{\n                        width: 65,\n                        height: 65,\n                    }}\n                  />\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Card>\n        <Card style={{ width: '20%'}}>\n          <TouchableOpacity\n            style={{ flex: 1, justifyContent: 'center', paddingLeft: 5 }}\n            underlayColor='#F5F5F5'\n            onClick={() => this.props.selectOtherChildProfile()}\n          >\n            <Image\n              source={require('../../assets/icon-babies.png')}\n              style={{\n                width: 43,\n                height: 43,\n                opacity: 0.6\n              }}\n            />\n          </TouchableOpacity>\n        </Card>\n      </View>\n    )\n  }\n}\n","import React from 'react'\nimport { Animated, Dimensions, Image, TouchableHighlight } from 'react-native'\n\nexport default class ProfileSelector extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showSelector: false,\n      SlideInRight: new Animated.Value(0)\n    }\n  }\n\n  slideIn() {\n    this.setState({\n      showSelector: true\n    } , () => {\n      Animated.timing(\n        this.state.SlideInRight,\n        {\n            toValue: 1,\n            duration: 200,\n            useNativeDriver: true\n        }\n      ).start()\n    })\n  }\n\n  onSelectStudent(student_id) {\n    this.props.onSelectStudent(student_id)\n    Animated.timing(\n      this.state.SlideInRight,\n      {\n          toValue: 0,\n          duration: 500,\n          useNativeDriver: true\n      }\n    ).start()\n    this.setState({\n      showSelector: false\n    })\n  }\n\n  render() {\n    const windowWidth = Dimensions.get('window').width\n    const { showSelector, SlideInRight } = this.state\n    const { student_of_id } = this.props\n    if (!showSelector) {\n      return null\n    }\n    return (\n      <Animated.View\n        style={{\n          zIndex: 2,\n          width: '100%',\n          height: '100%',\n          position: 'absolute',\n          backgroundColor: 'rgba(0,0,0,0.7)',\n          transform: [\n            {\n                translateX: SlideInRight.interpolate({\n                    inputRange: [0,1],\n                    outputRange: [windowWidth, 0]\n                })\n            }\n          ],\n          alignItems: 'center',\n          // justifyContent: 'space-evenly'\n        }}\n      >\n        {Object.keys(student_of_id).map((student_id) => {\n          return (\n            <TouchableHighlight \n              key={student_id}\n              style={{ marginTop: windowWidth/4 }}\n              onPress={() => this.onSelectStudent(student_id)}\n              underlayColor='transparent'\n            >\n              <Image\n                    source={\n                      student_of_id[student_id].profile_picture === '' ?\n                        require('../../assets/icon-thumbnail.png')\n                        : { uri: student_of_id[student_id].profile_picture }\n                      }\n                    style={{\n                        width: 160,\n                        height: 160,\n                        borderRadius: 80,\n                        backgroundColor: 'rgba(255,255,255,0.6)'\n                    }}\n                />\n            </TouchableHighlight>\n          )\n        })}\n      </Animated.View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert, Dimensions } from 'react-native'\nimport QRCode from 'react-native-qrcode-svg'\nimport Reloading from '../reloading'\nimport { get } from '../util'\nimport { connect } from 'react-redux'\n\nconst { width, height } = Dimensions.get('window')\n\nclass QRPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            data: ''\n        }\n    }\n\n    async componentDidMount() {\n        const { parent_id, isConnected } = this.props\n        const response = await get(`/user/${parent_id}/qrcode`)\n        const { success, statusCode, message, data } = response\n\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n\n        if (!success) {\n            alert(`Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n            return \n        }\n\n        this.setState({\n            isLoading: false,\n            data\n        })\n    }\n    \n    render() {\n        return (\n            <View\n                style={{\n                    height,\n                    zIndex: 2,\n                    width: '100%',\n                    // height: '100%',\n                    position: 'absolute',\n                    backgroundColor: 'white',\n                    justifyContent: 'space-evenly',\n                    alignItems: 'center'\n                }}\n            >\n                <View style={{ flex: 1 }}>\n                    <View style={{ flex: 3, justifyContent: 'center', alignItems: 'center' }}>\n                        {this.state.isLoading ? \n                            <Reloading />\n                            :  <QRCode\n                                value={this.state.data}\n                                size={300}\n                                />\n                        }\n                    </View>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{ padding: 15, backgroundColor: '#b5e9e9' }}\n                            onPress={() => this.props.hideQRCode()}\n                        >\n                            <Text style={{ fontSize: 30 }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (QRPage)","import React from 'react'\nimport { View, Text, TextInput, Image, TouchableOpacity, ScrollView, Alert } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { formatDate, fetchData, beautifyTime } from '../util'\nimport Reloading from '../reloading'\nimport { connect } from 'react-redux'\nimport { bindActionCreators} from 'redux'\nimport { getMedRequestSuccess } from '../../redux/parent/actions/index'\nimport ENV from '../../variables'\n\nclass MedicationRequestCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true,\n      med_requests: [],\n      // date: new Date()\n    }\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      // const { date } = this.props\n      // console.log('this.props.date !== prevProps.date: ', this.props.date.toDateString())\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      // console.log('this.props.child_id !== prevProps.child_id')\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date());\n    }\n  }\n\n  afterFive() {\n    const { date } = this.props\n    return date.getHours() >= 17\n  }\n\n  async fetchData(student_id, date) {\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/student/${student_id}?date=${formatDate(date)}`\n    await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n          const {data} = resJson\n          const med_requests = this.get_todays_requests(data, date)\n          this.setState({\n            med_requests\n          })\n          this.setState({ isLoading: false })\n      })\n      .catch(err => {\n          alert('Sorry 取得今日托藥單時電腦出狀況了！請與工程師聯繫: error occurred when fetching medication request')\n      })\n  }\n\n  get_todays_requests(object_array, date) {\n    // const { date } = this.props\n    let med_requests = []\n    for (var i = 0; i < object_array.length; i++) {\n      const timestamp = new Date(object_array[i].title)\n      // console.log('timestamp: ', timestamp.toDateString())\n      // console.log('date: ', date.toDateString())\n      if (timestamp.toDateString() === (date).toDateString()) {\n        med_requests = object_array[i].data\n        for(var j = 0; j < med_requests.length; j++) {\n          med_requests[j].timestamp = new Date(med_requests[j].timestamp)\n        }\n        break\n      }\n    }\n    return med_requests\n  }\n\n  render() {\n    const { med_requests } = this.state\n    const { isLoading } = this.state\n    // console.log('med_requests: ', med_requests)\n    // console.log('med/this.props.date: ', this.props.date.toDateString())\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-medrequest.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>今日藥單</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : med_requests.length ? \n                <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  <ScrollView horizontal contentContainerStyle={{ paddingBottom: 10}}>\n                  {med_requests.map((request, index) => {\n                    return (\n                      <TouchableOpacity \n                        key={request.id}\n                        style={{\n                          padding: 10,\n                          backgroundColor: '#F5F5F5', \n                          marginRight: 15, \n                          justifyContent: 'center'\n                        }}\n                        underlayColor='#ff8944'\n                        onClick={() => this.props.viewMedRequest(index, med_requests)}\n                      >\n                        <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                          {this.afterFive() && request.administered ? \n                            <Image\n                              source={require('../../assets/icon-checked.png')}\n                              style={{\n                                  width: 20,\n                                  height: 20\n                              }}\n                            />\n                            : null\n                          }\n                          <Text style={{ alignSelf: 'center', fontSize: 25, color: 'rgba(0,0,0,0.8)' }}>{beautifyTime(request.timestamp)}</Text>\n                        </View>\n                      </TouchableOpacity>\n                    )\n                  })}\n                  </ScrollView>\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    med_requests: state.parent.med_requests\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({getMedRequestSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (MedicationRequestCard)","import React from 'react'\nimport { View, Text, Image, TextInput, TouchableOpacity, Alert } from 'react-native'\nimport { Card, Body } from 'native-base'\nimport { formatDate, fetchData, post, beautifyTime, formatTime } from '../util'\nimport Reloading from '../reloading'\nimport TimeModal from './timemodal'\nimport { debounce } from 'lodash'\n\nexport default class MorningReminderCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n        isLoading: true,\n        // present: false,\n        morning_reminder_id: null,\n        text: '',\n        reminder_read: false,\n        isConnected: true,\n        scrollHeight: '100%',\n        milk_timestamp: new Date(),\n        diaper_timestamp: new Date(),\n        milk_amount: '',\n        diaper_type: '小便',\n        showDateTimeModal: false,\n        showDateTimeModalType: '',\n        includeMilkIntake: false,\n        includeDiaper: false\n    }\n    this.fetchData = this.fetchData.bind(this)\n    this.onSendMessageDelay = debounce(this.sendMessage, 1000).bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      // console.log('this.props.date !== prevProps.date')\n      this.setState({ isLoading: true, text: '', scrollHeight: '100%', includeMilkIntake: false, milk_timestamp: new Date(), milk_amount: '', \n        includeDiaper: false, diaper_timestamp: new Date(), diaper_type: '小便' })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true, text: '', scrollHeight: '100%', includeMilkIntake: false, milk_timestamp: new Date(), milk_amount: '', \n        includeDiaper: false, diaper_timestamp: new Date(), diaper_type: '小便' })\n      this.fetchData(this.props.child_id, new Date());\n    // } else if (this.props.present !== prevProps.present) {\n    //     this.setState({ present: this.props.present })\n    } else if (this.props.isConnected != prevProps.isConnected) {\n      this.setState({\n        isConnected: this.props.isConnected\n      })\n    }\n  }\n\n  setScrollHeight(scrollHeight) {\n    // console.log('scrollHeight: ', scrollHeight)\n    this.setState({ scrollHeight })\n  }\n\n  async fetchData(child_id, date) {\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchData('morningreminder', child_id, start_date, end_date)\n    // console.log('messageData: ', messageData)\n    if (messageData.data === undefined || messageData.data[start_date] === undefined) {\n      this.setState({\n        isLoading: false,\n        morning_reminder_id: null,\n        text: '',\n        reminder_read: false\n      })\n      return\n    }\n    this.setState({\n        isLoading: false,\n        morning_reminder_id: messageData.data[start_date].morning_reminder_id,\n        text: messageData.data[start_date].text,\n        reminder_read: messageData.data[start_date].reminder_read\n    })\n  }\n\n  async sendMessage() {\n    const { class_id, date, parent_id } = this.props\n    const { text, morning_reminder_id, isConnected, \n      includeMilkIntake, milk_timestamp, milk_amount, includeDiaper, diaper_timestamp, diaper_type } = this.state\n    if (!this.editable() || (text === '' && !includeMilkIntake && !includeDiaper)) return\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n\n    let reminder = text\n    if(includeDiaper) {\n      reminder = `如廁: ${beautifyTime(diaper_timestamp)} ${diaper_type}\\n` + reminder\n    }\n    if (includeMilkIntake) {\n      reminder = `餵奶: ${beautifyTime(milk_timestamp)} ${milk_amount} c.c.\\n` + reminder\n    }\n\n    const body = {\n        morning_reminder_id,\n        student_id: this.props.child_id,\n        parent_id,\n        timestamp: formatDate(date) + ' ' + formatTime(date),\n        text: reminder\n    }\n    const response = await post(`/morningreminder/class/${class_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry 傳送訊息時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    alert(`訊息傳達成功！`)\n    this.setState({\n      includeMilkIntake: false,\n      milk_timestamp: new Date(),\n      milk_amount: '',\n      includeDiaper: false,\n      diaper_timestamp: new Date(),\n      diaper_type: '小便',\n      morning_reminder_id: ''\n    })\n\n    this.fetchData(this.props.child_id, new Date(this.props.date))\n  }\n\n  editable() {\n    const { date } = this.props\n    const threshold = new Date()\n    threshold.setHours(10, 0, 0)\n    return (date.toDateString() === (new Date).toDateString() && new Date() < threshold) || (date.toDateString() !== (new Date).toDateString() && date > (new Date()))\n    // return true\n  }\n\n  selectDatetimeConfirm(datetime) {\n    const { showDateTimeModalType } = this.state\n    if ( showDateTimeModalType === 'milkintake') {\n      this.setState({\n        milk_timestamp: datetime,\n        // showDateTimeModal: false\n      })\n    } else if (showDateTimeModalType === 'diaper') {\n      this.setState({\n        diaper_timestamp: datetime,\n        // showDateTimeModal: false\n      })\n    }\n  }\n\n  render() {\n    const { isLoading, text, scrollHeight, morning_reminder_id, reminder_read, \n      milk_timestamp, milk_amount, diaper_timestamp, diaper_type, showDateTimeModal, includeMilkIntake, includeDiaper } = this.state\n    // console.log('this.state: ', this.state)\n    return (\n      <Card style={{ width: '93%' }}>\n        {/* {showDateTimeModal &&\n          <TimeModal\n            start_date={new Date()}\n            datetime_type={'time'}\n            hideModal={() => this.setState({ showDateTimeModal: false })}\n            selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n            minDatetime={null}\n            maxDatetime={null}\n            minTime={null}\n            maxTime={null}\n          />\n        } */}\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-morningreminder.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8, flexDirection: 'row', justifyContent: 'space-between', paddingRight: 8 }}>\n              <Text style={{ fontSize: 20 }}>愛的叮嚀</Text>\n              {text !== '' && <Text style={{ fontSize: 20 }}>{reminder_read ? '已讀' : '未讀'}</Text>}\n            </View>\n            <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                {/* milk */}\n                <View style={{ flexDirection: 'row', alignItems: 'center', backgroundColor: includeMilkIntake ? '#dcf3d0' : 'transparent' }}>\n                  <TouchableOpacity\n                    disabled={true}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({ includeMilkIntake: !includeMilkIntake })\n                    }}\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: includeMilkIntake ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 20, marginLeft: 10, alignSelf: 'center' }}>餵奶: </Text>\n                    </View>\n                  </TouchableOpacity>\n\n                  <TouchableOpacity\n                    style={{ justifyContent: 'center', alignItems: 'center', padding: 10 }}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({\n                        showDateTimeModalType: 'milkintake',\n                        // showDateTimeModal: true,\n                        includeMilkIntake: true\n                      })\n                      this.props.showTimeModal()\n                    }}\n                  >\n                    <Text style={{ fontSize: 25 }}>{`${beautifyTime(milk_timestamp)}`}</Text>\n                  </TouchableOpacity>\n                  <TextInput\n                    editable={this.editable()}\n                    style={{ marginLeft: 15, width: 55, fontSize: 25 }}\n                    keyboardType=\"number-pad\"\n                    placeholder={'_____'}\n                    value={''+milk_amount}\n                    onChangeText={(milk_amount) => this.setState({ milk_amount })}\n                    onFocus={() => {\n                      if (!this.editable()) return\n                      this.setState({ includeMilkIntake: true })\n                    }}\n                  />\n                  <Text style={{ fontSize: 20 }}>  c.c.</Text>\n                </View>\n\n                {/* diaper */}\n                <View \n                  style={{ \n                    flexDirection: 'row', alignItems: 'center', \n                    marginTop: 10, backgroundColor: includeDiaper ? '#dcf3d0' : 'transparent'\n                  }}\n                >\n                  <TouchableOpacity\n                    disabled={true}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({ includeDiaper: !includeDiaper })\n                    }}\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: includeDiaper? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 20, marginLeft: 10, alignSelf: 'center' }}>如廁: </Text>\n                    </View>\n                  </TouchableOpacity>\n                  \n                  <TouchableOpacity\n                    style={{ justifyContent: 'center', alignItems: 'center', padding: 5 }}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({\n                        showDateTimeModalType: 'diaper',\n                        // showDateTimeModal: true,\n                        includeDiaper: true\n                      })\n                      this.props.showTimeModal()\n                    }}\n                  >\n                    <Text style={{ fontSize: 25, padding: 5 }}>{`${beautifyTime(diaper_timestamp)}`}</Text>\n                  </TouchableOpacity>\n\n                  <TouchableOpacity\n                    style={{ marginLeft: 15, justifyContent: 'center', alignItems: 'center', padding: 10 }}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({\n                        diaper_type: \n                          diaper_type === '小便' ? \n                            '大便'\n                            : diaper_type === '大便' ?\n                              '無排便'\n                              : '小便',\n                        includeDiaper: true\n                      })\n                    }}\n                  >\n                    <Text style={{ fontSize: 20 }}>{diaper_type}</Text>\n                  </TouchableOpacity>\n                </View>\n\n                {/* text */}\n                <TextInput\n                    key={morning_reminder_id}\n                    editable={this.editable()}\n                    style={{ width: '100%', height: scrollHeight, backgroundColor: '#dcf3d0', \n                      fontSize: 25, paddingTop: 10, padding: 10, marginTop: 10\n                    }}\n                    placeholder={\n                      this.editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'\n                    }\n                    value={text}\n                    multiline={true}\n                    scrollEnabled={false}\n                    // maxLength={200}\n                    onChangeText={(text) => this.setState({ text })}\n                    onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                    onLayout={(event) => {\n                      const { scrollHeight } = event.nativeEvent.target\n                      this.setState({\n                          scrollHeight\n                      })\n                    }}\n                />\n                <TouchableOpacity\n                    disabled={!this.editable()}\n                    style={{ backgroundColor: '#00c07f', padding: 10, justifyContent: 'center', alignItems: 'center' }}\n                    underlayColor=\"transparent\"\n                    onClick={this.onSendMessageDelay}\n                >\n                    <Text style={{ fontSize: 25}}>送出</Text>\n                </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image, ScrollView, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport { get, beautifyMonthDate } from '../util'\nimport { TouchableOpacity } from 'react-native'\n\nexport default class AnnouncementCard extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            announcements: []\n        }\n    }\n\n    componentDidMount () {\n        this.fetchAnnouncement()    \n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.date !== prevProps.date) {\n          this.setState({ isLoading: true })\n          this.fetchAnnouncement();\n        } else if (this.props.child_id !== prevProps.child_id) {\n          this.setState({ isLoading: true })\n          this.fetchAnnouncement();\n        }\n      }\n\n    async fetchAnnouncement () {\n        const { parent_id } = this.props\n        // console.log('parent_id: ', parent_id)\n        const response = await get(`/announcement/unread?parent_id=${parent_id}&page=0`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchAnnouncement/response: ', response)\n        if (success) {\n            this.setState({\n                announcements: data\n            })\n        }\n    }\n\n    render () {\n        /*\n            -if there are announcement unread, show on home page the date of the announcement\n            -only when parent click into it, we mark it read\n            -parent can also click next or previous depends on which announcement s/he is in\n            -when parent navigate back to home page, update announcement card status to show only the unread announcements\n            -should still show unread when parent changes date\n        */\n        const { announcements } = this.state\n        // console.log('announcements:', announcements)\n        if (announcements.length === 0) {\n            return null\n        }\n        return (\n            <Card style={{ width: '93%'}}>\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <TouchableOpacity \n                        style={{ \n                            width: 56, \n                            height: 56, \n                            justifyContent: 'center', \n                            alignItems: 'center'\n                        }}\n                        onClick={() => this.props.viewMore(announcements)}\n                    >\n                        <Image\n                            source={require('../../assets/icon-announcement.png')}\n                            style={{\n                                width: 38,\n                                height: 38\n                            }}\n                        />\n                    </TouchableOpacity>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingTop: 8 }}>\n                            <Text style={{ fontSize: 20 }}>新公告</Text>\n                        </View>\n                        <View style={{ flex: 1, paddingVertical: 8 }}>\n                            <ScrollView horizontal contentContainerStyle={{ paddingBottom: 10 }}>\n                                {announcements.map((announcement, index) => {\n                                    const date = new Date(announcement.timestamp)\n                                    // console.log('beautifyDate(date): ', beautifyDate(date))\n                                    return (\n                                        <TouchableOpacity\n                                            key={announcement.id}\n                                            style={{\n                                                padding: 10,\n                                                backgroundColor: '#F5F5F5',\n                                                marginRight: 15,\n                                                justifyContent: 'center'\n                                            }}\n                                            underlayColor={'#ff8944'}\n                                            onClick={() => this.props.viewAnnouncement(index, announcements)}\n                                        >\n                                            <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                {announcement.read ? \n                                                    <Image\n                                                        source={require('../../assets/icon-checked.png')}\n                                                        style={{\n                                                            width: 20,\n                                                            height: 20\n                                                        }}\n                                                    />\n                                                    : null\n                                                }\n                                                <Text\n                                                    style={{\n                                                        marginLeft: 3,\n                                                        alignSelf: 'center',\n                                                        fontSize: 25,\n                                                        color: 'rgba(0,0,0,0.8)'\n                                                    }}\n                                                >\n                                                    {beautifyMonthDate(date)}    \n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                    )\n                                })}\n                            </ScrollView>\n                        </View>\n                    </View>\n                </View>\n            </Card>\n        )\n    }\n}","import React from 'react'\nimport { StyleSheet, ScrollView, View, Text, RefreshControl, TouchableOpacity,\n    Alert, Dimensions, AppState,Image, KeyboardAvoidingView, Platform } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { setConnectState, initializeChildren, markPresent, clearState } from '../../redux/parent/actions/index'\nimport Reloading from '../reloading'\nimport WellnessCard from './wellnesscard';\nimport AppetiteCard from './appetitecard';\nimport MilkCard from './milkcard';\nimport SleepCard from './sleepcard';\nimport RestroomCard from './restroomcard';\nimport MessageCard from './messagecard'\nimport ParentHomeTitle from './parenthometitle'\nimport ProfileSelector from './profileselector'\nimport QRPage from './qrpage'\nimport { formatDate, beautifyDate, beautifyTime, get } from '../util'\nimport MedicationRequestCard from './medicinerequestcard'\nimport TimeModal from './timemodal'\nimport MorningReminderCard from './morningremindercard'\nimport AnnouncementCard from './announcementcard'\nimport ENV from '../../variables'\nconst { width } = Dimensions.get('window')\n\nclass ParentHome extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            child_id: '',\n            student_id_array: [],\n            message: '',\n            refreshing: false,\n            showQR: false,\n            temperature: '',\n            appState: '',\n            showDateTimeModal: false,\n            present: false,\n            showTimeModal: false\n        }\n        this.initializeChildren = this.initializeChildren.bind(this)\n    }\n\n    timer = () => setTimeout(() => {\n        this.poll(this.state.child_id)\n    }, 10000)\n\n    async poll(student_id) {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/family/updates?student_id=${student_id}`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('parenthome/poll: ')\n                const update_types = resJson.data\n                update_types.forEach(update_type => {\n                    // console.log(update_type)\n                    this.refs[update_type].fetchData(student_id, new Date(this.state.date))\n                })  \n            })\n            .catch(err => {\n                console.log('polling error: ', err)\n            })\n        this.timeoutId = this.timer()\n    }\n\n    componentDidMount() {\n        // this.setDate()\n        window.addEventListener('offline', (e) => {\n            // console.log('offline ', e)\n            this.props.setConnectState(false) \n        });\n        window.addEventListener('online', (e) => {\n            // console.log('online ', e)\n            this.props.setConnectState(true)\n        });\n        this.initializeChildren()\n        this.timeoutId = this.timer()\n        AppState.addEventListener(\"change\", this._handleAppStateChange);\n    }\n\n    // // SPECIAL DAY QUICK TEMP FIX\n    // isSpecialDate(date) {\n    //     const special_date = new Date()\n    //     special_date.setMonth(5,20)\n    //     return date.toDateString() === special_date.toDateString()\n    // }\n    \n    // goBackADay() {\n    //     const date = new Date(this.state.date.getTime())\n    //     const special_date = new Date()\n    //     special_date.setMonth(5,22)\n    //     if (date.getDay() === 1 && (date.toDateString() !== special_date.toDateString())) {\n    //         date.setDate(date.getDate() - 3)\n    //     } else if (date.toDateString() === special_date.toDateString()) {\n    //         date.setDate(date.getDate() - 2)\n    //     } else {\n    //         date.setDate(date.getDate() - 1)\n    //     }\n    //     this.selectDatetimeConfirm(date)\n    // }\n\n    // goForwardADay() {\n    //     const date = new Date(this.state.date.getTime())\n    //     if (date.getDay() === 5 && !this.tomorrowHasClass()) {\n    //         date.setDate(date.getDate() + 3)\n    //     } else if (date.getDay() === 6 && this.isSpecialDate(date)) {\n    //         date.setDate(date.getDate() + 2)\n    //     } else {\n    //         date.setDate(date.getDate() + 1)\n    //     }\n    //     this.selectDatetimeConfirm(date)\n    // }\n\n    // tomorrowHasClass() {\n    //     const date = new Date(this.state.date)\n    //     date.setDate(date.getDate() + 1)\n    //     const special_date = new Date()\n    //     special_date.setMonth(5, 20)\n    //     if (date.toDateString() === special_date.toDateString()) {\n    //         return true\n    //     }\n    //     return false\n    // }\n\n    \n    setDate() {\n        let date = new Date()\n        if (date.getDay() === 6) {  \n            date.setDate(date.getDate() - 1)\n        } else if (date.getDay() === 0) {\n            date.setDate(date.getDate() - 2)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    // // SPECIAL DAY QUICK TEMP FIX\n    // setDate() {\n    //     let date = new Date()\n    //     if (date.getDay() === 0) {\n    //         date.setDate(date.getDate() - 1)\n    //     }\n    //     this.selectDatetimeConfirm(date)\n    // }\n\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    initializeChildren() {\n        const { parent_id } = this.props.route.params\n\n        // this.setState({ child_id: '', date: new Date })\n        // this.setDate()\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/family/${parent_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.initializeChildren(data)\n                const student_id_array = Object.keys(this.props.parent.child_of_id)\n                this.setState({\n                    child_id: student_id_array[0],\n                    student_id_array\n                })\n                // this.checkStudentAttendance(student_id_array[0])\n                this.setDate()\n            })\n            .catch((err) => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when initializing student profiles')\n        })\n    }\n\n    _handleAppStateChange = nextAppState => {\n        if (\n            this.state.appState.match(/inactive|background/) &&\n            nextAppState === \"active\"\n        ) {\n            this.checkStudentAttendance(this.state.child_id)\n\n            if (this.state.date.toDateString() !== (new Date).toDateString() && (new Date).getHours() > 3) {\n                this.initializeChildren()\n            }\n        }\n        this.setState({ appState: nextAppState });\n    };\n\n    async checkStudentAttendance(student_id) {\n        if (this.state.date.toDateString() !== (new Date).toDateString()) {\n            return\n        }\n        const date = new Date()\n        const response = await get(`/attendance/${student_id}?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        // console.log('response: ', response)\n        if (success) {\n            const { in_time, out_time, excuse_type } = data\n            if ((in_time !== null && out_time !== null) || excuse_type !== null) {\n                let date = new Date()\n                date.setHours(18,0,0,0)\n                this.setState({\n                    date\n                })\n            }\n        }\n    }\n\n    onSelectStudent(child_id) {\n        this.setState({ child_id })\n    }\n\n    markPresent(temperature) {\n        const { date } = this.state\n        this.setState({\n            temperature,\n            present: temperature !== ''\n        })\n    }\n\n    selectDatetimeConfirm(date) {\n        const threshold = new Date()\n        threshold.setHours(0,0,0,0)\n        if (date.getTime() < threshold.getTime()) { // if selected date is before today\n            date.setHours(18)\n        } else if (date.toDateString() === (new Date()).toDateString()) { // if selected date is today\n            date.setTime(new Date())\n        } else { // if selected date is tomorrow\n            date.setHours(16, 0, 0)\n        }\n        this.setState({ date, showDateTimeModal: false }, () => this.checkStudentAttendance(this.state.child_id))\n    }\n\n    getDayDifference(startDate, endDate) {\n        let start = new Date(startDate)\n        let end = new Date(endDate)\n        start.setHours(0)\n        end.setHours(0)\n        const oneDay = 24 * 60 * 60 * 1000;\n        return Math.round((end - start) / (oneDay))\n    }\n\n    // SPECIAL DAY QUICK TEMP FIX\n    goBackADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 1) {\n            date.setDate(date.getDate() - 3)\n        } else {\n            date.setDate(date.getDate() - 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    goForwardADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 5) {\n            date.setDate(date.getDate() + 3)\n        } else {\n            date.setDate(date.getDate() + 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId)\n        AppState.removeEventListener(\"change\", this._handleAppStateChange);\n        this.props.clearState()\n    }\n\n    render() {\n        const { parent_id } = this.props.route.params\n        const { isConnected } = this.props\n        // console.log('isConnected: ', isConnected)\n        const { date, child_id, showQR, temperature, showDateTimeModal, present, showTimeModal } = this.state\n        // console.log('parenthome: ', date)\n        if (child_id === '') {\n            return (\n                <Reloading />\n            )\n        }\n        const selected_student = this.props.parent.child_of_id[child_id]\n        const day_difference = this.getDayDifference(date, new Date())\n        return (\n            <KeyboardAvoidingView\n                enabled\n                behavior={\"padding\"}\n                keyboardVerticalOffset={100}\n                style={{ flex: 1, zIndex: 1 }}\n            >\n                <ProfileSelector\n                    ref='profile_selector'\n                    student_of_id={this.props.parent.child_of_id}\n                    onSelectStudent={(student_id) => this.onSelectStudent(student_id)}\n                />\n                {showQR ? \n                    <QRPage\n                        hideQRCode={() => this.setState({\n                            showQR: false\n                        })}\n                        parent_id={parent_id}\n                    />\n                    : null\n                }\n\n                {showDateTimeModal ?\n                    <TimeModal\n                        start_date={date}\n                        datetime_type={'date'}\n                        hideModal={() => this.setState({ showDateTimeModal: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={(new Date()).setDate((new Date()).getDate() - 7)}\n                        maxDatetime={(new Date()).setDate((new Date()).getDate() + 1)}\n                        paddingVertical={100}\n                    />\n                    : null\n                }\n\n                {showTimeModal &&\n                    <TimeModal\n                        start_date={new Date()}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showTimeModal: false })}\n                        selectDatetimeConfirm={(time) => this.refs['morningreminder'].selectDatetimeConfirm(time)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                        minTime={null}\n                        maxTime={null}\n                        paddingVertical={400}\n                    />\n                }\n\n                {<ScrollView\n                    contentContainerStyle={{ alignItems: 'center', justifyContent: 'center', paddingBottom: 30 }}\n                    refreshControl={\n                        <RefreshControl\n                            style={{backgroundColor: 'transparent' }}\n                            refreshing={this.state.refreshing}\n                            onRefresh={this.initializeChildren}\n                            tintColor=\"#ff8944\"\n                            title=\"Loading...\"\n                            titleColor=\"#368cbf\"\n                            colors={['#ff8944', '#368cbf', '#0000ff']}\n                            progressBackgroundColor=\"#ffff00\"\n                        />\n                    }\n                >\n                    <View style={{ width: '100%', flexDirection: 'row', backgroundColor: 'white' }}> \n                        <View style={{ width: '15%'}}>\n                            {day_difference < 7 ?\n                                <TouchableOpacity\n                                    style={{ flex: 1, justifyContent: 'center', alignItems: 'center'}}\n                                    onClick={() => this.goBackADay()}\n                                >\n                                    <Image\n                                        source={require('../../assets/icon-back.png')}\n                                        style={{ width: 40, height: 40 }}\n                                    />\n                                </TouchableOpacity>\n                                : null\n                            }\n                        </View>\n                        <TouchableOpacity\n                            style={{ width: '70%', justifyContent: 'center'}}\n                            onClick={() => this.setState({ showDateTimeModal: true })}\n                        >\n\n                            <Text style={{ fontSize: width * 0.12, textAlign: 'center' }}>\n                                {beautifyDate(date)}\n                            </Text>\n                        </TouchableOpacity>\n                        <View style={{ width: '15%'}}>\n                            {day_difference >= 0 ?\n                                <TouchableOpacity\n                                    style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}\n                                    onClick={() => this.goForwardADay()}\n                                >\n                                    <Image\n                                        source={require('../../assets/icon-forward.png')}\n                                        style={{ width: 40, height: 40 }}\n                                    />\n                                </TouchableOpacity>\n                                : null\n                            }\n                        </View>\n                    </View>\n                    <ParentHomeTitle\n                        student={selected_student}\n                        students={this.props.parent.child_of_id}\n                        student_name={this.props.parent.child_of_id[child_id].name}\n                        selectOtherChildProfile={() => this.refs['profile_selector'].slideIn()}\n                        viewQRCode={() => this.setState({\n                            showQR: true\n                        })}\n                        temperature={temperature}\n                    />\n\n                    <View style={{ flex: 1, width: '93%', flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\n                        <TouchableOpacity\n                            style={{width: '30%', padding: 10, backgroundColor: '#ffe1d0'}}\n                            onClick={() => this.props.navigation.navigate('PickupRequest', {\n                                child_id,\n                                school_id: selected_student.school_id\n                            })}>\n                            <Text style={{ fontSize: width * 0.05, textAlign: 'center'}}>接回告知</Text>\n                        </TouchableOpacity>\n                        <TouchableOpacity\n                            style={{width: '30%', padding: 10, backgroundColor: '#fff1b5'}}\n                            onClick={() => this.props.navigation.push('MedicationRequestPage', {\n                                onGoBack: () => this.refs['med_request'].fetchData(child_id, new Date()),\n                                student_id: child_id,\n                                class_id: selected_student.class_id\n                            })}>\n                            <Text style={{ fontSize: width * 0.05, textAlign: 'center' }}>托藥單</Text>\n                        </TouchableOpacity>\n                        <TouchableOpacity\n                            style={{width: '30%', padding: 10, backgroundColor: '#b5e9e9'}}\n                            onClick={() => this.props.navigation.navigate('AbsenceExcusePage', {\n                                student_id: child_id,\n                                class_id: selected_student.class_id === null ? \"\" : selected_student.class_id,\n                                school_id: selected_student.school_id\n                            })}>\n                            <Text style={{ fontSize: width * 0.05, textAlign: 'center' }}>請假單</Text>\n                        </TouchableOpacity>\n                    </View>\n\n                    <AnnouncementCard \n                        child_id={child_id}\n                        date={date}\n                        parent_id={parent_id}\n                        ref=\"announcement\"\n                        viewAnnouncement={(index, data) => this.props.navigation.push('AnnouncementPage', {\n                            onGoBack: () => this.refs['announcement'].fetchAnnouncement(),\n                            index,\n                            data,\n                            parent_id\n                        })}\n                        viewMore={(announcements) => this.props.navigation.push('AnnouncementListPage', {\n                            announcements,\n                            parent_id,\n                            viewAnnouncement: (index, data) => this.props.navigation.push('AnnouncementPage', {\n                                onGoBack: () => this.refs['announcement'].fetchAnnouncement(),\n                                index,\n                                data,\n                                parent_id\n                            })\n                        })}\n                    />\n\n                    <MorningReminderCard\n                        child_id={child_id}\n                        date={date}\n                        class_id={selected_student.class_id}\n                        ref=\"morningreminder\"\n                        present={present}\n                        isConnected={isConnected}\n                        parent_id={parent_id}\n                        showTimeModal={() => this.setState({ showTimeModal: true })}\n                    />\n\n                    <MedicationRequestCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"med_request\"\n                        viewMedRequest={(index, data) => this.props.navigation.push('AddMedicationRequestPage', {\n                            onGoBack: () => this.refs['med_request'].fetchData(child_id, new Date()),\n                            student_id: child_id, \n                            class_id: selected_student.class_id === null ? \"\" : selected_student.class_id,\n                            index,\n                            data\n                        })}\n                    />\n\n                    <WellnessCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"wellness\"\n                        updateTitleTemp={(temperature) => this.markPresent(temperature)}\n                    />\n\n                    <MessageCard\n                        child_id={child_id}\n                        date={date}\n                        class_id={selected_student.class_id}\n                        ref=\"messages\"\n                        parent_id={parent_id}\n                    />\n\n                    <AppetiteCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"appetite\"\n                    />\n\n                    <MilkCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"milkintake\"\n                    />\n\n                    <SleepCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"sleep\"\n                    />\n\n                    <RestroomCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"diaper\"\n                    />\n\n                </ScrollView>}\n            </KeyboardAvoidingView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    button_text: {\n        fontSize: 18,\n        textAlign: 'center'\n    },\n    button: {\n        width: '30%',\n        padding: 20,\n        justifyContent: 'center',\n        // shadowColor: \"#000\",\n        // shadowOffset: {\n        //     width: 0,\n        //     height: 1,\n        // },\n        // shadowOpacity: 0.22,\n        // shadowRadius: 2.22,\n        // elevation: 3,\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        parent: state.parent,\n        isConnected: state.parent.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setConnectState,\n            initializeChildren,\n            markPresent,\n            clearState\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParentHome)\n","import React from 'react'\nimport { View, Text, TouchableHighlight, Dimensions } from 'react-native'\nconst { width } = Dimensions.get('window')\n\nexport default class MedicinePowderForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥粉: 0\n    }\n  }\n\n  componentDidMount() {\n    const { 藥粉 } = this.props\n    this.setState({\n      藥粉: parseInt(藥粉)\n    })\n  }\n\n  render() {\n    const { 藥粉 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                // backgroundColor: 'white',\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥粉</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n            <TouchableHighlight\n              style={{\n                backgroundColor: 'rgba(0,0,0,0.4)',\n                height: height*0.8,\n                aspectRatio: 1,\n                justifyContent: 'center',\n                borderRadius: height*0.4\n              }}\n              onPress={() => this.setState({\n                藥粉: 藥粉 === 0 ? 0 : 藥粉-1\n              })}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center', color: 'white' }}>-</Text>\n            </TouchableHighlight>\n\n            <Text style={{ fontSize: 40, paddingHorizontal: 15 }}>{藥粉} 包</Text>\n\n            <TouchableHighlight\n              style={{\n                backgroundColor: 'rgba(0,0,0,0.4)',\n                height: height*0.8,\n                aspectRatio: 1,\n                justifyContent: 'center',\n                borderRadius: height*0.4\n              }}\n              onPress={() => this.setState({\n                藥粉: 藥粉+1\n              })}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center', color: 'white' }}>+</Text>\n            </TouchableHighlight>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: width*0.12, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥粉)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\n\nexport default class MedicineSyrupForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥水: 0\n    }\n  }\n\n  componentDidMount() {\n    const { 藥水 } = this.props\n    this.setState({\n      藥水\n    })\n  }\n\n  render() {\n    const { 藥水 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥水</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', marginTop: -20 }}>\n            <View style={{ flexDirection: 'row', backgroundColor: 'rgba(255,255,255,0.4)', alignItems: 'center' }}>\n              <TextInput\n                style={{ fontSize: 40, padding: 10 }}\n                keyboardType='decimal-pad'\n                autoFocus\n                selectTextOnFocus\n                value={'' + 藥水}\n                onChangeText={(amount) => this.setState({ 藥水: amount })}\n              />\n              <Text style={{ paddingLeft: 10, fontSize: 40 }}>c.c.</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥水)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\n\nexport default class MedicineCreamForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥膏: ''\n    }\n  }\n\n  componentDidMount() {\n    const { 藥膏 } = this.props\n    this.setState({\n      藥膏\n    })\n  }\n\n  render() {\n    const { 藥膏 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥膏</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', marginTop: -20 }}>\n            <View style={{ flexDirection: 'row', backgroundColor: 'rgba(255,255,255,0.4)', alignItems: 'center' }}>\n              <TextInput\n                style={{ fontSize: 40, padding: 10 }}\n                placeholder='部位'\n                autoFocus\n                selectTextOnFocus\n                value={藥膏}\n                onChangeText={(area) => this.setState({ 藥膏: area })}\n              />\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥膏)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput, KeyboardAvoidingView, Alert, ScrollView, Platform } from 'react-native'\n// import DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, beautifyDate, beautifyTime }  from '../util'\nimport MedicinePowderForm from './medicinepowderform'\nimport MedicineSyrupForm from './medicinesyrupform'\nimport MedicineCreamForm from './medicinecreamform'\nimport ENV from '../../variables'\n\nexport default class MedicationRequestMain extends React.Component{\n  constructor(props) {\n    super(props) \n    this.state = {\n      optionButtonWidth: 0,\n      optionButtonHeight: 0,\n      show_date_picker: false,\n      show_time_picker: false,\n      date: new Date(),\n      time: new Date(),\n      show_editor: '',\n      藥粉: null,\n      need_refrigeration: false,\n      藥水: null,\n      藥膏: null,\n      note: '',\n      access_mode: 'create'\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  getHeader() {\n    const { access_mode, date, } = this.state\n    if (access_mode === 'read') {\n      if (formatDate(date) === formatDate(new Date)) {\n        return '今天托藥單'\n      }\n      const days_of_week = ['天', '一', '二', '三', '四', '五', '六']\n      const day = days_of_week[date.getDay()]\n      return `星期${day}`\n    } else if (access_mode === 'create') {\n      return '新增托藥單'\n    } else if (access_mode === 'edit') {\n      return '編輯中...'\n    }\n  }\n\n  fetchAccessMode() {\n    return this.state.access_mode\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.request !== this.props.request) {\n      const { request } = this.props\n      if (!request) {\n        this.setState({\n          date: new Date(),\n          time: new Date(),\n          藥粉: null,\n          need_refrigeration: false,\n          藥水: null,\n          藥膏: null,\n          note: '',\n          access_mode: 'create'\n        })\n        return\n      }\n\n      const { timestamp, medication, note } = request\n      const { 藥粉, need_refrigeration, 藥水, 藥膏 } = medication\n      this.setState({\n        date: timestamp,\n        time: timestamp,\n        藥粉,\n        need_refrigeration,\n        藥水,\n        藥膏,\n        note,\n        access_mode: 'read'\n      })\n    }\n  }\n\n  setDate(date) {\n    if (Platform.OS === 'ios') {\n      this.iosSetDate(date)\n    } else { // android\n      this.androidSetDate(date)\n    }\n  }\n\n  iosSetDate(date) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      date,\n      time: date\n    })\n  }\n\n  androidSetDate(date) {\n    if (date !== undefined) {\n      this.setState({\n        date,\n        time: date,\n        show_date_picker: false\n      })\n    } else {\n      this.setState({ show_date_picker: false })\n    }\n  }\n\n  setTime(time) {\n    if (Platform.OS === 'ios') {\n      this.iosSetTime(time)\n    } else { // android\n      this.androidSetTime(time)\n    }\n  }\n\n  iosSetTime(time) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      time\n    })\n  }\n\n  androidSetTime(time) {\n    if (time !== undefined) {\n      this.setState({\n        time,\n        show_time_picker: false\n      })\n    } else {\n      this.setState({ show_time_picker: false })\n    }\n  }\n\n  onFinishEdit(medicine_type, medicine_data) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: medicine_data\n    })\n  }\n\n  onCancelSelect(medicine_type) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: null\n    })\n  }\n\n  handleClickConfirmButton() {\n    const { access_mode } = this.state\n    if (access_mode === 'read') {\n      this.setState({\n        access_mode: 'edit'\n      })\n    } else if (access_mode === 'create') {\n      this.sendRequest(null)\n    } else if (access_mode === 'edit') {\n      const { id } = this.props.request\n      this.sendRequest(id)\n    }\n  }\n\n  sendRequest(request_id) {\n    const { date, time, 藥粉, need_refrigeration, 藥水, 藥膏, note  } = this.state\n    const {student_id, class_id} = this.props\n    const request_body = {\n      request_id,\n      timestamp: `${formatDate(date)} ${formatTime(time)}`,\n      class_id,\n      藥粉,\n      need_refrigeration,\n      藥水,\n      藥膏,\n      note\n    }\n\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/student/${student_id}`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onCreateRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending medication request')\n      })\n  }\n\n  deleteRequestConfirm() {\n    const confirmed = confirm('確定要刪除？')\n    if (confirmed) {\n      this.deleteRequest()\n    }\n  }\n\n  deleteRequest() {\n    const { request, class_id } = this.props\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request.id}`, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        class_id\n      })\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onDeleteRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n      })\n  }\n\n  render() {\n    const {\n      show_date_picker,\n      show_time_picker,\n      date,\n      time,\n      藥粉,\n      藥水,\n      藥膏,\n      note,\n      optionButtonWidth,\n      optionButtonHeight,\n      show_editor,\n      access_mode\n    } = this.state\n\n    // console.log(this.props.request)\n\n    if (show_date_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'date'}\n              value={date}\n              onChange={(event, date) => this.setDate(date)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_date_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    if (show_time_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'time'}\n              value={time}\n              onChange={(event, time) => this.setTime(time)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_time_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    return (\n      <KeyboardAvoidingView\n        style={{ flex: 1 }}\n        behavior='padding'\n        enabled\n      >\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n          <Text style={{ fontSize: 30, textAlign: 'center' }}>{this.getHeader()}</Text>\n        </View>\n        <View style={{ flex: 7 }}>\n\n          {/* DATE and TIME */}\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', paddingVertical: 10 }}>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_date_picker: !show_date_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyDate(date)}</Text>\n            </TouchableHighlight>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_time_picker: !show_time_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyTime(time)}</Text>\n            </TouchableHighlight>\n          </View>\n\n          {show_editor === '藥粉' ? \n            <MedicinePowderForm\n              藥粉={藥粉}\n              width={optionButtonWidth}\n              height={optionButtonHeight}\n              onFinishEdit={(powder_amount) => this.onFinishEdit('藥粉', powder_amount)}\n              onCancelSelect={() => this.onCancelSelect('藥粉')}\n            />\n            : show_editor === '藥水' ?\n              <MedicineSyrupForm\n                藥水={藥水}\n                width={optionButtonWidth}\n                height={optionButtonHeight}\n                onFinishEdit={(syrup_amount) => this.onFinishEdit('藥水', syrup_amount)}\n                onCancelSelect={() => this.onCancelSelect('藥水')}\n              />\n              : show_editor === '藥膏' ?\n                <MedicineCreamForm\n                  藥膏={藥膏}\n                  width={optionButtonWidth}\n                  height={optionButtonHeight}\n                  onFinishEdit={(cream_area) => this.onFinishEdit('藥膏', cream_area)}\n                  onCancelSelect={() => this.onCancelSelect('藥膏')}\n                />\n                :\n                <View style={{ flex: 4 }}>\n                  <View style={{ flex: 3, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* POWDER */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥粉 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 14,\n                          marginRight: 7,\n                          marginBottom: 7\n                        }}\n                        onLayout={(event) => {\n                          const { width, height } = event.nativeEvent.layout\n                          this.setState({\n                            optionButtonWidth: width,\n                            optionButtonHeight: height\n                          })\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ show_editor: '藥粉', 藥粉: 藥粉 || 1 })}\n                      >\n                        {藥粉 ? \n                          <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉: {藥粉} 包</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* REFRIGERATED */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: this.state.need_refrigeration ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 14,\n                          marginRight: 14,\n                          marginBottom: 7\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ need_refrigeration: !this.state.need_refrigeration})}\n                      >\n                        <Text style={{ fontSize: 25, textAlign: 'center' }}>藥品需冷藏</Text>\n                      </TouchableHighlight>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* SYRUP */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥水 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 7,\n                          marginRight: 7,\n                          marginBottom: 14\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥水', 藥水: 藥水 || 0 })}\n                      >\n                        {藥水 ?\n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥水: {藥水} c.c.</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥水</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* CREAM */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥膏 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 7,\n                          marginRight: 14,\n                          marginBottom: 14,\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥膏' })}\n                      >\n                        {藥膏 ? \n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥膏部位: {藥膏}</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥膏</Text>\n                        }\n                        \n                      </TouchableHighlight>\n                    </View>\n                  </View>\n\n              {/* NOTE */}\n                  <View\n                    style={{ backgroundColor: '#b5e9e9' }}\n                  >\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      placeholder='備註'\n                      placeholderTextColor='grey'\n                      value={note}\n                      style={{\n                        // height: '100%',\n                        backgroundColor: '#eaf8f8',\n                        borderRadius: 3,\n                        fontSize: 20,\n                        padding: 20,\n                      }}\n                      onChangeText={note => this.setState({ note })}\n                    />\n                  </View>\n                </View>\n\n          }\n\n          {/* Add Button */}\n          {this.props.request !== undefined && this.props.request.administered ?\n            <View\n              style={{ flex: 1, flexDirection: 'row', paddingVertical: 10, justifyContent: 'center', alignItems: 'center' }}\n            >\n              <Text style={{ fontSize: 30 }}>喂藥老師: {this.props.request.teacher_name}</Text>\n            </View>\n            :\n          <View\n            style={{ flex: 1, flexDirection: 'row', paddingVertical: 10 }}\n          >\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    // alignSelf: 'flex-start',\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.deleteRequestConfirm()}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>刪除</Text>\n                </TouchableHighlight>\n                : null\n              }              \n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.setState({ access_mode: 'read'})}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>取消編輯</Text>\n                </TouchableHighlight>\n                : null\n              }\n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              <TouchableHighlight\n                disabled={show_editor !== ''}\n                style={{\n                  height: '100%',\n                  padding: 10,\n                  justifyContent: 'center',\n                  backgroundColor: 'rgba(255,255,255,0.4)'\n                }}\n                onPress={() => this.handleClickConfirmButton()}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>\n                  {access_mode === 'read' ?\n                    '編輯'\n                    : access_mode === 'create' ?\n                      '新增'\n                      : access_mode === 'edit' ?\n                        '送出'\n                        : null\n                  }\n                </Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n          }\n        </View>\n      </KeyboardAvoidingView>\n    )\n  }\n}","import React from 'react'\nimport {\n    View, TouchableOpacity, Text, Animated, ScrollView, Alert, SectionList, Dimensions, Platform\n} from 'react-native'\nimport MedicationRequestMain from './medicationrequestmain'\nimport { formatDate, beautifyTime, beautifyDate, beautifyMonthDate, get } from '../util'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport { getMedRequestSuccess } from '../../redux/parent/actions/index'\nimport ENV from '../../variables'\n\n\nconst { width } = Dimensions.get('window')\n\nclass MedicationRequestPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            today: new Date(),\n            tomorrow: new Date(),\n            SlideInRight: new Animated.Value(0),\n            SlideInLeft: new Animated.Value(0),\n            total_height: 1,\n            total_width: 1,\n            height: 0,\n            width: 0,\n            left: 0,\n            top: 0,\n            requests: [],\n            day_of_week: ['天', '一', '二', '三', '四', '五', '六'],\n            selected_request_index: -1\n        }\n    }\n\n    componentDidMount() {\n        const { selected_request_index } = this.props.route.params\n        const { tomorrow } = this.state\n        tomorrow.setDate(tomorrow.getDate() + 1)\n        this.setState({\n            tomorrow\n        })\n        this.fetchMedicationRequest()\n        this.initializePage()\n        if (selected_request_index !== undefined) {\n            // console.log(selected_request_index)\n            this.selectRequest(selected_request_index)\n        }\n    }\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    async fetchMedicationRequest() {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        const {student_id, onGoBack} = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/medicationrequest/student/${student_id}?date=${date}`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchMedicationRequest: ', response)\n        if (!success) {\n            alert('Sorry 取得托藥單時電腦出狀況了！請稍後再試試或請截圖和與工程師聯繫\\n\\n' + message)\n            return\n        }\n        this.denormalize(data)\n        this.setState({ requests: data })\n        onGoBack()\n    }\n\n    denormalize(object_array) {\n        for (var i = 0; i < object_array.length; i++) {\n            object_array[i].title = new Date(object_array[i].title)\n            for (var j = 0; j < object_array[i].data.length; j++) {\n                object_array[i].data[j].timestamp = new Date(object_array[i].data[j].timestamp)\n            }\n        }\n    }\n\n    initializePage() {\n        Animated.sequence([\n            Animated.timing(\n                this.state.SlideInRight, \n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ),\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            )\n        ]).start()\n        \n    }\n\n    viewRequest() {\n        this.setState({\n            SlideInLeft: new Animated.Value(0)\n        }, () => {\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ).start()\n        })\n    }\n\n    selectRequest(index) {\n        const access_mode = this.refs['main'].fetchAccessMode()\n        if (access_mode === 'edit') {\n            alert('還在編輯中喔請完成再離開 多謝')\n            return\n        }\n        this.setState({ selected_request_index: index })\n    }\n\n    async onCreateRequestSuccess(request_id) {\n        await this.fetchMedicationRequest()\n        const { requests } = this.state\n        this.get_todays_requests(requests)\n        let new_request_index = -1\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id === request_id) {\n                new_request_index = i\n                break\n            }\n        }\n        this.setState({\n            selected_request_index: new_request_index\n        })\n    }\n\n    get_todays_requests(object_array) {\n        let med_requests = []\n        for (var i = 0; i < object_array.length; i++) {\n            const timestamp = new Date(object_array[i].timestamp)\n            if (timestamp.toDateString() === (new Date).toDateString()) {\n                object_array[i].timestamp = timestamp\n                med_requests.push(object_array[i])\n            } else break\n        }\n        this.props.getMedRequestSuccess(med_requests)\n    }\n\n    onDeleteRequestSuccess(deleted_request_id) {\n        const { requests } = this.state\n        const updated_requests = []\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id !== deleted_request_id) {\n                updated_requests.push(requests[i])\n            }\n        }\n        this.setState({\n            requests: updated_requests,\n            selected_request_index: 0\n        })\n        this.get_todays_requests(updated_requests)\n    }\n\n    deleteRequestConfirm(request_id) {\n        const confirmed = confirm('確定要刪除？')\n        if (confirmed) {\n            this.deleteRequest(request_id)\n        }\n    }\n\n    deleteRequest(request_id) {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        const { class_id } = this.props.route.params\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request_id}`, {\n          method: 'DELETE',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            class_id\n          })\n        })\n          .then((res) => res.json())\n          .then((resJson) => {\n            const { statusCode, message, data } = resJson\n            if (statusCode > 200 || message === 'Internal Server Error') {\n              alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n              return\n            }\n            this.fetchMedicationRequest()\n          })\n          .catch(err => {\n            alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n          })\n      }\n\n    render () {\n        const { SlideInRight, SlideInLeft, total_width, requests, today, tomorrow, day_of_week, selected_request_index } = this.state\n        const { student_id, class_id } = this.props.route.params\n        // const selected_request = requests[selected_request_index]\n        return (\n            <View\n                style={{\n                    flex: 1,\n                    paddingHorizontal: 20\n                }}\n            >\n                {requests.length === 0 && \n                    <View style={{ padding: 20, justifyContent: 'center', alignItems: 'center' }}>\n                        <Text style={{ fontSize: 50 }}>無托藥單</Text>\n                    </View>\n                }\n                <SectionList\n                    sections={requests}\n                    keyExtractor={(item, index) => item + index}\n                    renderItem={({ item, index, section }) => \n                        <View \n                            style={{ \n                                width: '100%', \n                                aspectRatio: 5, \n                                flexDirection: 'row', \n                                marginVertical: 7, \n                                justifyContent: 'space-between', \n                                alignItems: 'center'\n                            }}\n                        >\n                            <TouchableOpacity \n                                style={{ \n                                    width:'65%',\n                                    height: '100%',\n                                    padding: 20, \n                                    backgroundColor: '#368cbf',\n                                    borderRadius: 40,\n                                    justifyContent: 'center',\n                                    alignItems: 'center'\n                                }}\n                                onClick={() => this.props.navigation.push('AddMedicationRequestPage', {\n                                    onGoBack: () => this.fetchMedicationRequest(),\n                                    student_id,\n                                    class_id,\n                                    index,\n                                    data: section.data\n                                })}\n                            >\n                                <Text style={{ fontSize: 30 }}>{beautifyTime(item.timestamp)}</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity\n                                style={{ \n                                    width:'30%', \n                                    height: '100%',\n                                    padding: 20, \n                                    backgroundColor: '#fa625f', \n                                    justifyContent: 'center',\n                                    borderRadius: 40\n                                }}\n                                onClick={() => this.deleteRequestConfirm(item.id)}\n                            >\n                                <Text style={{ fontSize: width * 0.07, textAlign: 'center' }}>\n                                    刪除\n                                </Text>\n                            </TouchableOpacity>\n                        </View>\n                    }\n                    renderSectionHeader={({ section: { title } }) => (\n                        <View\n                            style={{ \n                                width: '100%', \n                                backgroundColor: 'rgba(0,0,0,0.5)', \n                                flexDirection: 'row', \n                                alignItems: 'center', \n                                justifyContent: 'space-between',\n                                padding: this.isIOS() ? 20 : 12,\n                                marginTop: 15,\n                                marginBottom: 7,\n                                borderRadius: 40\n                            }}\n                        >\n                            <Text style={{ fontSize: 30, color: 'white' }}>{`${beautifyMonthDate(title)}`}</Text>\n                            <Text style={{ fontSize: 30, color: 'white' }}>{`星期${day_of_week[title.getDay()]}`}</Text>\n                        </View>\n                    )}\n                />\n\n                <View style={{ width: '100%', paddingVertical: 10, justifyContent: 'center', backgroundColor: 'transparent' }}>\n                    <TouchableOpacity\n                        style={{ backgroundColor: '#f4d41f', padding: this.isIOS() ? 20 : 12, justifyContent: 'center', borderRadius: 40 }}\n                        onClick={() => this.props.navigation.push('AddMedicationRequestPage', {\n                            onGoBack: () => this.fetchMedicationRequest(),\n                            student_id, \n                            class_id,\n                            index: -1,\n                            data: null\n                        })}\n                    >\n                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>\n                            新增\n                        </Text>\n                    </TouchableOpacity>\n                </View>\n\n                \n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({getMedRequestSuccess}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MedicationRequestPage)","import React from 'react'\nimport { \n    View, \n    Text,\n    Platform,\n    StyleSheet,\n    TouchableOpacity,\n    TextInput,\n    Dimensions } from 'react-native'\nimport { formatDate, beautifyMonthDate } from '../util'\nimport PickerComponent from '../picker'\nimport TimeModal from './timemodal'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { width, height } = Dimensions.get('window')\n\nconst options = [\n    { value: \"感冒\", label: \"感冒\" },\n    { value: '流感', label: '流感' },\n    { value: '腸病毒', label: '腸病毒' },\n    { value: '水痘', label: '水痘' },\n    { value: '腸胃炎', label: '腸胃炎' },\n    { value: '其他', label: '其他' },\n    { value: 'Cancel', label: '返回' }\n]\n\nclass AbsenceExcuse extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            max_date: (new Date()).setDate((new Date()).getDate() + 30),\n            cached_date: null,\n            startDate: new Date(),\n            endDate: new Date(),\n            show_start_date_picker: false,\n            show_end_date_picker: false,\n            showSelect: false,\n            childIsSick: 0,\n            excuse_type: 'none-medical',\n            editing_other_option: false,\n            days: ['天', '一', '二', '三', '四', '五', '六'],\n            months: ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十', '十一', '十二'],\n            access_mode: 'create',\n            note: '',\n            absence_time: 'all_day',\n            scrollHeight: '100%',\n            request_id: ''\n        }\n        this.setStartDate = this.setStartDate.bind(this)\n        this.setEndDate = this.setEndDate.bind(this)\n        this.setChildNotSick = this.setChildNotSick.bind(this)\n        this.setChildSick = this.setChildSick.bind(this)\n        this.onValueChange = this.onValueChange.bind(this)\n        this.sendAbsenceNote = this.sendAbsenceNote.bind(this)\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.request !== this.props.request) {\n            const { request } = this.props\n            if (!request) {\n                this.setState({\n                    startDate: new Date(),\n                    endDate: new Date(),\n                    childIsSick: 0,\n                    excuse_type: 'none-medical',\n                    note: '',\n                    absence_time: 'all_day',\n                    access_mode: 'create',\n                    cached_date: null,\n                    scrollHeight: '100%',\n                    request_id: ''\n                })\n                return\n            }\n            const { id, date, excuse_type, note, absence_time } = request\n            this.setState({\n                startDate: date,\n                endDate: null,\n                childIsSick: excuse_type === 'none-medical' ? 0 : 1,\n                excuse_type,\n                note,\n                absence_time,\n                access_mode: 'read',\n                cached_date: null,\n                request_id: id\n            })\n        }\n    }\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    fetchAccessMode() {\n        return this.state.access_mode\n    }\n\n    showSelect() {\n        this.setState({ childIsSick: 1, showSelect: true })\n    }\n\n    setChildSick () {\n        this.setState({ childIsSick: 1 })\n    }\n    \n    setChildNotSick () {\n        const { access_mode } = this.state\n        if (access_mode === 'read') return\n        this.setState({ childIsSick: 0, excuse_type: 'none-medical' })\n    }\n\n    handleSelectStatus = (excuse_type) => {\n        if (excuse_type === 'Cancel') {\n            this.setState({\n                showSelect: false\n            })\n        } else if (excuse_type === '其他') {\n            this.setState({\n                editing_other_option: true,\n                excuse_type: '其他',\n                showSelect: false\n            })\n        } else {\n            this.setState({\n                excuse_type,\n                showSelect: false\n            })\n        }\n    }\n\n    editorOnBlur() {\n        const { excuse_type } = this.state\n        this.setState({\n            editing_other_option: false,\n            childIsSick: excuse_type === '' ? 0 : 1,\n            excuse_type: excuse_type === '' ? 'none-medical' : excuse_type\n        })\n    }\n\n    setStartDate(date) {\n        if (Platform.OS === 'ios') {\n            this.iosSetStartDate(date)\n        } else { //android\n            this.androidSetStartDate(date)\n        }\n    }\n\n    iosSetStartDate(date) {\n        const { endDate } = this.state\n        if (this.state.access_mode === 'edit') {\n            const { cached_date, startDate } = this.state\n            this.setState({\n                cached_date: cached_date === null ? startDate : cached_date,\n                startDate: date\n            })\n        } else {\n            this.setState({\n                startDate: date,\n                endDate: date < endDate ? endDate : date\n            })\n        }\n    }\n\n    androidSetStartDate(date) {\n        if (date !== undefined) {\n            const { endDate } = this.state\n            if (this.state.access_mode === 'edit') {\n                const { cached_date, startDate } = this.state\n                const { id } = this.props.request\n                this.setState({\n                    cached_date: cached_date === null ? startDate : cached_date,\n                    startDate: date,\n                    show_start_date_picker: false\n                })\n                this.props.checkUniqueStudentDate(id, date)\n            } else { // create\n                this.setState({\n                    startDate: date,\n                    endDate: date < endDate ? endDate : date,\n                    show_start_date_picker: false\n                })\n            }\n        } else {\n            this.setState({ show_start_date_picker: false })\n        }\n    }\n\n    onEndEditingStartDate() {\n        const {startDate } = this.state\n        if (this.state.access_mode === 'edit') {\n            const { id } = this.props.request\n            this.props.checkUniqueStudentDate(id, startDate)\n        }\n\n        this.setState({ show_start_date_picker: false })\n    }\n\n    duplicateDateFound() {\n        const { cached_date } = this.state\n        this.setState({\n            startDate: cached_date,\n            cached_date: null\n        })\n    }\n\n    setEndDate(date) {\n        if (Platform.OS === 'ios') {\n            this.iosSetEndDate(date)\n        } else { //android\n            this.androidSetEndDate(date)\n        }\n    }\n\n    iosSetEndDate (date) {\n        const { startDate } = this.state\n        this.setState({\n            startDate: date < startDate ? date : startDate,\n            endDate: date\n        })\n    }\n\n    androidSetEndDate(date) {\n        if (date !== undefined) {\n            const { startDate } = this.state\n            this.setState({\n                startDate: date < startDate ? date : startDate,\n                endDate: date,\n                show_end_date_picker: false\n            })\n        } else {\n            this.setState({ show_end_date_picker: false })\n        }\n    }\n\n    getDayDifference() {\n        const { startDate, endDate } = this.state\n        const oneDay = 24 * 60 * 60 * 1000;\n        return Math.round(Math.abs((endDate - startDate) / (oneDay))) + 1\n    }\n\n    onValueChange (value) {\n        this.setState({ excuse_type: value })\n    }\n\n    setScrollHeight(scrollHeight) {\n        this.setState({ scrollHeight })\n    }\n\n    handleClickConfirmButton() {\n        const { access_mode } = this.state\n        if (access_mode === 'read') {\n            this.setState({\n                access_mode: 'edit'\n            })\n        } else if (access_mode === 'create') {\n            this.sendAbsenceNote()\n        } else if (access_mode === 'edit') {\n            const { id } = this.props.request\n            this.editAbsenceNote(id)\n        }\n    }\n\n    sendAbsenceNote() {\n        const { excuse_type, note, absence_time } = this.state\n        const { student_id, class_id, school_id, isConnected } = this.props\n        const startDate = formatDate(this.state.startDate)\n        const endDate = formatDate(this.state.endDate)\n        const request_body = {\n            student_id,\n            class_id,\n            school_id,\n            startDate,\n            endDate,\n            excuse_type,\n            note,\n            absence_time\n        }\n\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！ 請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.onCreateRequestSuccess(data.id)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！ 請截圖和與工程師聯繫: error occurred when sending absence request')\n            })\n    }\n\n    editAbsenceNote(request_id) {\n        const { excuse_type, note, absence_time } = this.state\n        const { class_id } = this.props\n        const date = formatDate(this.state.startDate)\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id,\n                excuse_type,\n                note,\n                date,\n                class_id,\n                absence_time\n            })\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.onCreateRequestSuccess(request_id)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when editing absence request')\n            })\n    }\n\n    deleteRequestConfirm() {\n        const confirmed = confirm('確定要刪除？')\n        if (confirmed) {\n            this.deleteRequest()\n        }\n    }\n\n    deleteRequest() {\n        const { id } = this.props.request\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id: id\n            })\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.onDeleteRequestSuccess(id)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting absence request')\n            })\n    }\n\n    render() {\n        const {\n            max_date,\n            access_mode,\n            startDate,\n            endDate,\n            excuse_type,\n            editing_other_option,\n            note,\n            show_start_date_picker,\n            show_end_date_picker,\n            showSelect,\n            absence_time,\n            scrollHeight,\n            request_id } = this.state\n        if (show_start_date_picker) {\n            return (\n                <View style={{ height, marginTop: -120 }}>\n                    <TimeModal\n                        start_date={startDate}\n                        datetime_type={'date'}\n                        hideModal={() => this.setState({ show_start_date_picker: false })}\n                        selectDatetimeConfirm={(date) => this.setStartDate(date)}\n                        minDatetime={new Date()}\n                        maxDatetime={max_date}\n                        paddingVertical={100}\n                    />\n                </View>\n            )\n        }\n        if (show_end_date_picker) {\n            return (\n                <View style={{ height, marginTop: -120 }}>\n                    <TimeModal\n                        start_date={endDate}\n                        datetime_type={'date'}\n                        hideModal={() => this.setState({ show_end_date_picker: false })}\n                        selectDatetimeConfirm={(date) => this.setEndDate(date)}\n                        minDatetime={new Date()}\n                        maxDatetime={max_date}\n                        paddingVertical={100}\n                    />\n                </View>\n            )\n        }\n        if (showSelect) {\n            return (\n                <View style={{ padding: 30, height: '100%', alignItems: 'center' }}>\n                    {options.map((option, index) => {\n                        const { label, value } = option\n                        return (\n                            <TouchableOpacity\n                                key={index}\n                                style={{ width: '50%', padding: 15, backgroundColor: 'white', borderWidth: 1, borderColor: 'lightgrey' }}\n                                onClick={() => this.handleSelectStatus(value)}\n                            >\n                                <Text style={{ fontSize: 25 }}>{label}</Text>\n                            </TouchableOpacity>\n                        )\n                    })}\n                </View>\n            )\n        }\n        return (\n                    <View style={{ paddingHorizontal: 30, paddingVertical: 30, height: '100%' }}>\n\n                        <View\n                            style={{\n                                // flex: 1,\n                                flexDirection: 'row',\n                                // justifyContent: 'space-evenly',\n                                // alignItems: 'center',\n                            }}\n                        >\n                            <TouchableOpacity\n                                disabled={access_mode === 'read'}\n                                style={{\n                                    flex: 1,\n                                    padding: 15,\n                                    // height: '90%',\n                                    justifyContent: 'center',\n                                    backgroundColor: this.state.childIsSick === 0 ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                    borderTopLeftRadius: 30,\n                                    borderBottomLeftRadius: 30\n                                }}\n                                underlayColor='#368cbf'\n                                onClick={this.setChildNotSick}>\n                                <Text style={{ fontSize: 25, color: this.state.childIsSick === 0 ? 'white' : 'black', textAlign: 'center' }}>事假</Text>\n                            </TouchableOpacity>\n\n                            {editing_other_option ? \n                                <View\n                                    style={{\n                                        flex: 1,\n                                        padding: 15,\n                                        // height: '90%',\n                                        borderTopRightRadius: 30,\n                                        borderBottomRightRadius: 30,\n                                        justifyContent: 'center',\n                                        backgroundColor: this.state.childIsSick ? '#368cbf' : 'rgba(0,0,0,0.1)'\n                                    }}\n                                >\n                                    <TextInput \n                                        autoFocus={true}\n                                        selectTextOnFocus={true}\n                                        style={{ fontSize: 25, color: this.state.childIsSick ? 'white' : 'black', textAlign: 'center', paddingVertical: -1 }}\n                                        value={excuse_type}\n                                        onChangeText={excuse_type => this.setState({ excuse_type })}\n                                        onBlur={() => this.editorOnBlur()}\n                                    />\n                                </View>\n                                :\n                                <PickerComponent\n                                    style={{\n                                        flex: 1,\n                                        padding: 15,\n                                        // height: '90%',\n                                        borderTopRightRadius: 30,\n                                        borderBottomRightRadius: 30,\n                                        justifyContent: 'center',\n                                        backgroundColor: this.state.childIsSick === 0 ? 'rgba(0,0,0,0.1)' : '#368cbf'\n                                    }}\n                                    disabled={access_mode === 'read'}\n                                    textStyle={{ fontSize: 25, color: this.state.childIsSick ? 'white' : 'black', textAlign: 'center' }}\n                                    selectedValue={excuse_type === 'none-medical' ? '病假' : excuse_type}\n                                    showSelect={() => this.showSelect()}\n                                    // options={[\n                                    //     \"感冒\",\n                                    //     \"流感\",\n                                    //     \"腸病毒\",\n                                    //     \"水痘\",\n                                    //     \"腸胃炎\",\n                                    //     \"其他\",\n                                    //     \"Cancel\"\n                                    // ]}\n                                    handleOnClick={this.setChildSick}\n                                    handleSelectValue={(excuse_type) => this.handleSelectStatus(excuse_type)}\n                                />\n                            }\n                        </View>\n                        <View style={{ width: '100%' }}>\n                            {endDate === null ?\n                                <View\n                                    style={{\n                                        paddingVertical: 20,\n                                        width: '70%',\n                                        alignSelf: 'center'\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        disabled={access_mode === 'read'}\n                                        style={{ backgroundColor: 'rgba(0,0,0,0.4)' }}\n                                        onClick={() => {\n                                            if (access_mode === 'read') return\n                                            this.setState({ show_start_date_picker: true })\n                                        }}\n                                    >\n                                        <View style={{ padding: 15, justifyContent: 'center' }}>\n                                            <View style={{}}>\n                                                <Text style={{ color: 'white', fontSize: width*0.12, fontWeight: 'bold' }}>\n                                                    {startDate.getFullYear()}\n                                                </Text>\n                                            </View>\n                                            <View style={{}}>\n                                                <Text style={{ color: 'white', fontSize: width*0.12, fontWeight: 'bold' }}>\n                                                    {startDate.getMonth() + 1}/{startDate.getDate()}\n                                                </Text>\n                                            </View>\n                                            <View style={{}}>\n                                                <Text style={{ fontSize: width*0.12, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{this.state.days[startDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </View>\n                                    </TouchableOpacity>\n                                </View>\n                                :\n                                <View\n                                    style={{\n                                        // flexDirection: 'row',\n                                        alignItems: 'center',\n                                        paddingVertical: 15\n                                    }}\n                                >\n                                    <View style={{ width: '100%' }}>\n                                        <Text style={{ color: 'rgba(0,0,0,0.4)', fontSize: width*0.1 }}>開始</Text>\n                                        <TouchableOpacity\n                                            style={{ backgroundColor: 'rgba(0,0,0,0.4)', padding: 15 }}\n                                            onClick={() => this.setState({ show_start_date_picker: true })}\n                                        >\n                                            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                                                <Text style={{ color: 'white', fontSize: width*0.09, fontWeight: 'bold' }}>\n                                                    {beautifyMonthDate(startDate)}\n                                                </Text>\n                                                <Text style={{ fontSize: width*0.09, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{this.state.days[startDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                    </View>\n\n                                    <View style={{ width: '100%', alignItems: 'center', justifyContent: 'center', padding: 20 }}>\n                                        <Text style={{ fontSize: 25 }}>\n                                            總計 {this.getDayDifference()} 天\n                                        </Text>\n                                    </View>\n\n                                    <View style={{width: '100%' }}>\n                                        <TouchableOpacity\n                                            style={{ backgroundColor: 'rgba(0,0,0,0.4)', padding: 15 }}\n                                            onClick={() => this.setState({ show_end_date_picker: true })}\n                                        >\n                                            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                                                <Text style={{ color: 'white', fontSize: width*0.09, fontWeight: 'bold' }}>\n                                                    {beautifyMonthDate(endDate)}\n                                                </Text>\n                                                <Text style={{ fontSize: width*0.09, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{this.state.days[endDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                        <Text style={{ color: 'rgba(0,0,0,0.4)', fontSize: width*0.1, textAlign: 'right' }}>結束</Text>\n                                    </View>\n                                </View>\n                            }\n\n                            {/* NOTE */}\n                            <View\n                                style={{ flex: 1,width: '100%', alignItems: 'center' }}\n                            >\n                                <TextInput\n                                    key={request_id}\n                                    editable={access_mode !== 'read'}\n                                    placeholder='備註'\n                                    placeholderTextColor='grey'\n                                    multiline\n                                    // textAlignVertical='center'\n                                    scrollEnabled={false}\n                                    // blurOnSubmit={true}\n                                    value={note}\n                                    style={{\n                                        width: '100%',\n                                        height: scrollHeight,\n                                        backgroundColor: '#eaf8f8',\n                                        borderRadius: 3,\n                                        fontSize: 25,\n                                        paddingTop: 20,\n                                        paddingBottom: 20,\n                                        paddingHorizontal: 20,\n                                        textAlignVertical: 'center'\n                                    }}\n                                    onChangeText={note => this.setState({ note })}\n                                    onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                                    onLayout={(event) => {\n                                        const { scrollHeight } = event.nativeEvent.target\n                                        this.setState({\n                                            scrollHeight\n                                        })\n                                    }}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    flex: 1,\n                                    width: '100%',\n                                    alignItems: 'center',\n                                    flexDirection: 'row',\n                                    justifyContent: 'space-between'\n                                }}\n                            >\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 15,\n                                        justifyContent: 'center'\n                                    }}\n                                    underlayColor='transparent'\n                                    onClick={() => {\n                                        if (access_mode === 'read') return\n                                        this.setState({ absence_time: 'all_day' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'all_day' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'all_day' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        全天\n                                    </Text>\n                                </TouchableOpacity>\n\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 10,\n                                        justifyContent: 'center',\n                                        alignItems: 'center'\n                                    }}\n                                    underlayColor='transparent'\n                                    onClick={() => {\n                                        if (access_mode === 'read') return\n                                        this.setState({ absence_time: 'morning' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'morning' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'morning' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        早上\n                                    </Text>\n                                </TouchableOpacity>\n\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 10,\n                                        justifyContent: 'center',\n                                        alignItems: 'flex-end'\n                                    }}\n                                    underlayColor='transparent'\n                                    onClick={() => {\n                                        if (access_mode === 'read') return\n                                        this.setState({ absence_time: 'evening' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'evening' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'evening' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        下午\n                                    </Text>\n                                </TouchableOpacity>\n                            </View>\n                            \n                            <View\n                                style={{\n                                    marginVertical: 20,\n                                    width: '100%',\n                                    flexDirection: 'row',\n                                    // padding: 10,\n                                    alignItems: 'center',\n                                    justifyContent: 'center'\n                                }}\n                            >\n                                {access_mode !== 'edit' ?\n                                    <TouchableOpacity\n                                        style={{\n                                            // height: '80%',\n                                            width: '100%',\n                                            padding: 20,\n                                            justifyContent: 'center',\n                                            backgroundColor: 'rgba(0,0,0,0.1)'\n                                        }}\n                                        onClick={() => this.handleClickConfirmButton()}\n                                    >\n                                        <Text style={{ fontSize: 25, textAlign: 'center' }}>\n                                            {access_mode === 'read' ?\n                                                '編輯'\n                                                : access_mode === 'create' ?\n                                                    '新增'\n                                                    : null\n                                            }\n                                        </Text>\n                                    </TouchableOpacity>\n                                    : access_mode === 'edit' ?\n                                        <View style={{ width: '100%', flex: 1, flexDirection: 'row' }}>\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: '#fa625f'\n                                                }}\n                                                onClick={() => this.deleteRequestConfirm()}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>刪除</Text>\n                                            </TouchableOpacity>\n\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: 'rgba(0,0,0,0.1)'\n                                                }}\n                                                onClick={() => this.setState({ access_mode: 'read'})}\n                                            >\n                                                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消編輯</Text>\n                                            </TouchableOpacity>\n\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: '#00c07f'\n                                                }}\n                                                onClick={() => this.handleClickConfirmButton()}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>送出</Text>\n                                            </TouchableOpacity>\n                                        </View>\n                                        : null\n                                }\n                            </View>\n                        </View>\n                    </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    dateContainer: {\n        flex: 1,\n        width: '35%',\n        justifyContent: 'center'\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps, null, null, { forwardRef: true }) (AbsenceExcuse)","import React from 'react'\nimport {\n    View, TouchableOpacity, Text, Animated, ScrollView, Alert, KeyboardAvoidingView, Platform, Dimensions\n} from 'react-native'\nimport AbsenceExcuse from './absenceexcuse'\nimport { formatDate } from '../util'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { height } = Dimensions.get('window')\n\nclass AbsenceExcusePage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            todays_date: formatDate(new Date()),\n            SlideInRight: new Animated.Value(0),\n            SlideInLeft: new Animated.Value(0),\n            total_height: 1,\n            total_width: 1,\n            height: 0,\n            width: 0,\n            left: 0,\n            top: 0,\n            requests: [],\n            day_of_week: ['天', '一', '二', '三', '四', '五', '六'],\n            selected_request_index: -1\n        }\n    }\n\n    componentDidMount() {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        this.fetchAbsenceExcuse()\n        this.initializePage()\n    }\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    async fetchAbsenceExcuse() {\n        const { student_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse/student/${student_id}?date=${date}`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.denormalize(data)\n                this.setState({ requests: data })\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when fetching absence request')\n            })\n    }\n\n    denormalize(data) {\n        for (var i = 0; i < data.length; i++) {\n            data[i].date = new Date(data[i].date)\n        }\n    }\n\n    initializePage() {\n        Animated.sequence([\n            Animated.timing(\n                this.state.SlideInRight, \n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ),\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            )\n        ]).start()\n        \n    }\n\n    selectRequest(index) {\n        const access_mode = this.refs['main'].fetchAccessMode()\n        if (access_mode === 'edit') {\n            alert('還在編輯中喔請完成再離開 多謝')\n            return\n        }\n        this.setState({ selected_request_index: index })\n    }\n\n    async onCreateRequestSuccess(request_id) {\n        await this.fetchAbsenceExcuse()\n        const { requests } = this.state\n        let new_request_index = -1\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id === request_id) {\n                new_request_index = i\n                break\n            }\n        }\n        this.setState({\n            selected_request_index: new_request_index\n        })\n    }\n\n    onDeleteRequestSuccess(deleted_request_id) {\n        const { requests } = this.state\n        const updated_requests = []\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id !== deleted_request_id) {\n                updated_requests.push(requests[i])\n            }\n        }\n        this.setState({\n            requests: updated_requests,\n            selected_request_index: 0\n        })\n    }\n\n    checkUniqueStudentDate(id, date) {\n        const { requests } = this.state\n        var duplicateDateFound = false\n        for (var i = 0; i < requests.length; i++) {\n            if (id !== requests[i].id && formatDate(date) === formatDate(requests[i].date)) {\n                duplicateDateFound = true\n                break\n            }\n        }\n\n        if (!duplicateDateFound) {\n            return\n        }\n\n        alert('已經在這個日期請過假了')\n\n        this.refs['main'].duplicateDateFound()\n    }\n\n    render () {\n        const { SlideInRight, SlideInLeft, total_width, requests, todays_date, day_of_week, selected_request_index } = this.state\n        const { student_id, class_id, school_id } = this.props.route.params\n        const selected_request = requests[selected_request_index]\n        return (\n            <KeyboardAvoidingView\n                style={{flex: 1, width: '100%', alignItems: 'center' }}\n                behavior={'padding'}\n                keyboardVerticalOffset={85}\n                enabled\n            >\n                <ScrollView style={{ width: '100%'}}>\n                <View style={{ width: '100%' }}>\n                    <ScrollView\n                        horizontal\n                        showsHorizontalScrollIndicator={false}\n                    >\n                        {requests.map((request, index) => {\n                            const day = day_of_week[request.date.getDay()]\n                            const date = `${request.date.getMonth()+1}/${request.date.getDate()}`\n                            return (\n                                <Animated.View\n                                    key={request.id}\n                                    style={{\n                                        padding: 10,\n                                        transform: [\n                                            {\n                                                translateX: SlideInRight.interpolate({\n                                                    inputRange: [0,1],\n                                                    outputRange: [total_width, 0]\n                                                })\n                                            }\n                                        ]\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        style={{\n                                            height: 100,\n                                            width: 100,\n                                            padding: 10,\n                                            backgroundColor: selected_request_index === index ? '#368cbf' : 'rgba(0,0,0,0.2)',\n                                            borderRadius: 10\n                                        }}\n                                        underlayColor='#368cbf'\n                                        onClick={() => this.selectRequest(index)}\n                                    >\n                                        <View>\n                                            {formatDate(request.date) === todays_date ?\n                                                <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>今天</Text>\n                                                : <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>星期{day}</Text>\n                                            }\n                                            <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>{date}</Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                </Animated.View>\n                            )\n                        })}\n                        \n                        <Animated.View\n                            style={{\n                                padding: 10,\n                                transform: [\n                                    {\n                                        translateX: SlideInRight.interpolate({\n                                            inputRange: [0,1],\n                                            outputRange: [total_width, 0]\n                                        })\n                                    }\n                                ]\n                            }}\n                        >\n                            <TouchableOpacity\n                                style={{\n                                    height: 100,\n                                    width: 100,\n                                    padding: 10,\n                                    backgroundColor: selected_request_index === -1 ? '#368cbf' : 'rgba(0,0,0,0.2)',\n                                    borderRadius: 10\n                                }}\n                                underlayColor='#ff8944'\n                                ref={'welrnf'}\n                                onClick={() => this.selectRequest(-1)}\n                            >\n                                <View>\n                                    <Text style={{ fontSize: 20, color: selected_request_index === -1 ? 'white' : 'black' }}>新增</Text>\n                                </View>\n                            </TouchableOpacity>\n                        </Animated.View>\n                    </ScrollView>\n                </View>\n\n                <View\n                    style={{\n                        width: '100%',\n                        borderRadius: 40,\n                        backgroundColor: '#b5e9e9'\n                    }}  \n                >\n                    <AbsenceExcuse\n                        ref='main'\n                        student_id={student_id}\n                        class_id={class_id}\n                        school_id={school_id}\n                        request={selected_request}\n                        onCreateRequestSuccess={(request_id) => this.onCreateRequestSuccess(request_id)}\n                        onDeleteRequestSuccess={(deleted_request_id) => this.onDeleteRequestSuccess(deleted_request_id)}\n                        checkUniqueStudentDate={(id, date) => this.checkUniqueStudentDate(id, date)}\n                    />\n                </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (AbsenceExcusePage)","\nimport React from 'react'\nimport { View, Text, TouchableOpacity, TextInput, KeyboardAvoidingView, ScrollView, Alert, Dimensions } from 'react-native'\nimport { formatDate, formatTime } from '../util'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { width, height } = Dimensions.get('window')\n\nclass PickupRequest extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            time: null,\n            provided_times: ['5', '10', '15', '20', '25'],\n            colors: ['#ffe1d0', '#ffddb7', '#fff1b5', '#dcf3d0', '#b5e9e9'],\n            hightlighted_colors: ['#fa625f', '#ff8944', '#f4d41f', '#00c07f', '#368cbf'],\n            choose_other_option: false,\n            total_height: height - 55,\n            total_width: width\n        }\n        this.sendRequest = this.sendRequest.bind(this)\n    }\n\n    onBlur() {\n        const { time, choose_other_option, provided_times } = this.state\n        if (choose_other_option && (time === '' || provided_times.includes(time))) {\n            this.setState({ choose_other_option: false })\n        } \n    }\n\n    sendRequest() {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        const { child_id, school_id } = this.props.route.params\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/attendance/pickup-request`\n        const student_id = child_id\n        const arrival_time = new Date()\n        arrival_time.setMinutes(arrival_time.getMinutes() + parseInt(this.state.time))\n        const request_body = {\n            school_id,\n            student_id,\n            arrival_time: formatDate(arrival_time) + ' ' + formatTime(arrival_time)\n        }\n        fetch(query, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫 ' + message)\n                    return\n                }\n                this.props.navigation.goBack()\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending pickup request')\n            })\n    }\n\n    render() {\n        const { time, provided_times, colors, hightlighted_colors, choose_other_option, total_height, total_width } = this.state\n        return (\n            <KeyboardAvoidingView\n                style={{ flex: 1 }}\n                behavior=\"padding\"\n                keyboardVerticalOffset={100}\n                enabled\n            >\n                <ScrollView>\n                    <View\n                        style={{\n                            flex: 3,\n                            flexDirection: 'row',\n                            flexWrap: 'wrap',\n                            alignItems: 'center',\n                            justifyContent: 'center'\n                        }}\n                    >\n                        {provided_times.map((minute, index) => {\n                            return (\n                                <View\n                                    key={index}\n                                    style={{\n                                        width: '50%',\n                                        height: total_height*0.28,\n                                        // aspectRatio,\n                                        backgroundColor: time == minute ? hightlighted_colors[index] : colors[index],\n                                        alignItems: 'center',\n                                        justifyContent: 'center'\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        style={{\n                                            width: '90%',\n                                            height: '90%',\n                                            borderWidth: time == minute ? 5 : 0,\n                                            borderColor: 'white',\n                                            backgroundColor: time == minute ? hightlighted_colors[index] : colors[index]\n                                        }}\n                                        underlayColor={hightlighted_colors[index]}\n                                        onClick={() => this.setState({ time: minute, choose_other_option: false })}\n                                    >\n                                        <View style={{ flex:1, flexDirection:'row', justifyContent: 'center', alignItems: 'center' }}>\n                                            <Text style={{ fontSize: total_width*0.20 }}>{minute}</Text>\n                                            <Text style={{ fontSize: total_width*0.09 }}>分鐘</Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                </View>\n                            )\n                        })}\n                        \n                        \n                        <View\n                            style={{\n                                width: '50%',\n                                height: total_height*0.28,\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                backgroundColor: choose_other_option ? 'black' : 'white'\n                            }}\n                        >\n                            <TouchableOpacity\n                                    style={{\n                                        flexDirection: 'row',\n                                        width: '90%',\n                                        height: '90%',\n                                        backgroundColor: choose_other_option ? 'black' : 'white',\n                                        borderWidth: choose_other_option ? 5 : 0,\n                                        borderColor: 'white',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                    }}\n                                    onClick={() => this.setState({ choose_other_option: true, time: '' })}\n                            >\n                                {choose_other_option ?\n                                    <View\n                                        style={{\n                                            flexDirection: 'row',\n                                            justifyContent: 'center', \n                                            alignItems: 'center',\n                                            width: '100%'\n                                        }}\n                                    >\n                                        <TextInput\n                                            autoFocus={true}\n                                            selectTextOnFocus={true}\n                                            onBlur={() => this.onBlur()}\n                                            keyboardType='numeric'\n                                            value={time + ''}\n                                            style={{\n                                                fontSize: total_width*0.2,\n                                                color: 'white',\n                                                width: '100%'\n                                            }}\n                                            onChangeText={(time) => {\n                                                this.setState({ time })\n                                            }}\n                                        />\n                                            <Text style={{ fontSize: total_width*0.09, color: 'white' }}>分鐘</Text>                            \n                                    </View>\n                                    : <Text style={{ fontSize: 50 }}>其他</Text>\n                                }\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                    <View style={{ height: total_height*0.16 }}>\n                        <TouchableOpacity\n                            style={{\n                                flex: 1,\n                                backgroundColor: 'lightgrey',\n                                alignItems: 'center',\n                                justifyContent: 'center'\n                            }}\n                            onClick={() => this.sendRequest()}\n                        >\n                            <Text style={{ fontSize: 50 }}>送出</Text>\n                        </TouchableOpacity>\n                    </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (PickupRequest)","import React from 'react'\nimport { View, Text, TouchableOpacity, TextInput, ScrollView, Image,\n  KeyboardAvoidingView, Platform, Alert, Dimensions } from 'react-native'\nimport { formatDate, beautifyTime, beautifyMonthDate, post, formatTime } from '../util';\nimport TimeModal from './timemodal'\nimport Reloading from '../reloading'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { width } = Dimensions.get('window')\n\nclass AddMedicationRequestPage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n      isLoading: true,\n      request_id: null,\n      today: new Date(),\n      showDateTimeModal: false,\n      datetime_type: '',\n      // date: null,\n      time_array: [],\n      time_selected_index: null,\n      before_meal: null,\n      powder: false,\n      powder_refrigerated: false,\n      syrup: [],\n      gel: null,\n      other_type: null,\n      note: '',\n      administered: false,\n      teacher_name: '',\n      medicated_timestamp: null,\n      fever_entry: {\n        temperature: '',\n        powder: false,\n        powder_refrigerated: false,\n        syrup: [],\n        other_type: null\n      },\n      data: null,\n      index: -1,\n      access_mode: 'create',\n      scrollHeight: '100%',\n      date_array: [],\n      date_selected_index: null\n    }\n  }\n\n  componentDidMount() {\n    const { index, data } = this.props.route.params\n\n    if (data === null) {\n      this.setState({\n        date_array: [new Date()],\n        isLoading: false\n      })\n      return\n    }\n\n    this.switchRequest(index)\n  }\n\n  switchRequest(index) {\n    const { data } = this.props.route.params\n    const { id, timestamp, administered, fever_entry, medication, note, teacher_name, medicated_timestamp } = data[index]\n    // const { before_meal, powder, powder_refrigerated, syrup, gel, other_type } = medication\n    this.setState({\n      index,\n      data,\n      request_id: id,\n      date_array: [timestamp],\n      time_array: [timestamp],\n      ...medication,\n      note,\n      fever_entry,\n      administered,\n      teacher_name,\n      medicated_timestamp: medicated_timestamp !== null ? new Date(medicated_timestamp) : null,\n      access_mode: 'read',\n      isLoading: false\n    })\n  }\n\n  isIOS() {\n    if (Platform.OS === 'ios') {\n      return true\n    } else return false\n  }\n\n  selectDatetimeConfirm(datetime) {\n    const { datetime_type } = this.state\n    if (datetime_type === 'date') {\n      this.handleDateSelected(datetime)\n    } else {\n      this.handleTimeSelected(datetime)\n    }\n    // const { datetime_type, time_array, time_selected_index } = this.state\n    // if (datetime_type === 'date') {\n    //   this.setState({\n    //     date: datetime,\n    //     showDateTimeModal: false\n    //   })\n    // } else if (time_selected_index !== null){\n    //   const updated_time_array = []\n    //   for(var i = 0; i < time_array.length; i++) {\n    //     if(i !== time_selected_index) {\n    //       updated_time_array.push(time_array[i])\n    //     } else {\n    //       updated_time_array.push(datetime)\n    //     }\n    //   }\n    //   this.setState({\n    //     time_array: updated_time_array,\n    //     time_selected_index: null,\n    //     showDateTimeModal: false\n    //   })\n    // } else {\n    //   this.setState({\n    //     time_array: [...this.state.time_array, datetime],\n    //     showDateTimeModal: false\n    //   })\n    // }\n  }\n\n  handleDateSelected(date) {\n    const { date_array, date_selected_index } = this.state\n    if (date_selected_index !== null) {\n      let updated_date_array = []\n      for(var i = 0; i < date_array.length; i++) {\n        if(i !== date_selected_index) {\n          updated_date_array.push(date_array[i])\n        } else {\n          updated_date_array.push(date)\n        }\n      }\n      this.setState({\n        date_array: updated_date_array,\n        date_selected_index: null,\n        showDateTimeModal: false\n      })\n    } else {\n      this.setState({\n        date_array: [...date_array, date],\n        showDateTimeModal: false\n      })\n    }\n  }\n\n  handleTimeSelected(time) {\n    const { time_array, time_selected_index } = this.state\n    if (time_selected_index !== null){\n      let updated_time_array = []\n      for(var i = 0; i < time_array.length; i++) {\n        if(i !== time_selected_index) {\n          updated_time_array.push(time_array[i])\n        } else {\n          updated_time_array.push(time)\n        }\n      }\n      this.setState({\n        time_array: updated_time_array,\n        time_selected_index: null,\n        showDateTimeModal: false\n      })\n    } else {\n      this.setState({\n        time_array: [...time_array, time],\n        showDateTimeModal: false\n      })\n    }\n  }\n\n  removeDate(index) {\n    const { date_array } = this.state\n    date_array.splice(index, 1)\n    this.setState({\n      date_array\n    })\n  }\n\n  removeTime(index) {\n    const { time_array } = this.state\n    time_array.splice(index, 1)\n    this.setState({\n      time_array\n    })\n  }\n\n  onSelectSyrup() {\n    const { syrup } = this.state\n    this.setState({ \n      syrup: syrup.length ? []\n        : [{\n          amount: '',\n          need_refrigerated: false,\n          note: ''\n        }]\n    })\n  }\n\n  editSyrupAmountEntry(amount, index) {\n    const { syrup } = this.state\n    syrup[index].amount = amount\n    this.setState({\n      syrup\n    })\n  }\n\n  editSyrupNoteEntry(note, index) {\n    const { syrup } = this.state\n    syrup[index].note = note\n    this.setState({\n      syrup\n    })\n  }\n\n  editSyrupRefrigerationEntry(need_refrigerated, index) {\n    const { syrup } = this.state\n    syrup[index].need_refrigerated = need_refrigerated\n    this.setState({\n      syrup\n    })\n  }\n\n  removeSyrupEntry(index) {\n    const { syrup } = this.state\n    syrup.splice(index, 1)\n    this.setState({\n      syrup\n    })\n\n  }\n\n  onSelectFeverSyrup() {\n    const { fever_entry } = this.state\n    this.setState({\n      fever_entry: {\n        ...fever_entry,\n        syrup: fever_entry.syrup.length ? []\n          : [{\n            amount: '',\n            need_refrigerated: false\n          }]\n      }\n    })\n  }\n\n  editFeverSyrupAmountEntry(amount, index) {\n    const { fever_entry } = this.state\n    fever_entry.syrup[index].amount = amount\n    this.setState({\n      fever_entry\n    })\n  }\n\n  editFeverSyrupRefrigerationEntry(need_refrigerated, index) {\n    const { fever_entry } = this.state\n    fever_entry.syrup[index].need_refrigerated = need_refrigerated\n    this.setState({\n      fever_entry\n    })\n  }\n\n  removeFeverSyrupEntry(index) {\n    const { fever_entry } = this.state\n    fever_entry.syrup.splice(index, 1)\n    this.setState({\n      fever_entry\n    })\n\n  }\n\n  timeIsEmpty() {\n    const { time_array } = this.state\n    if (time_array.length === 0) {\n      alert('至少要選擇一個時間！')\n      return true\n    }\n    return false\n  }\n\n  async sendRequest() {\n    const { isConnected } = this.props\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n    const { student_id, onGoBack } = this.props.route.params\n    const body = this.normalizedData()\n    const response = await post(`/medicationrequest/student/${student_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert('Sorry 送出托藥單時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n      return \n    }\n    this.setState({\n      access_mode: 'read'\n    })\n    onGoBack()\n    this.props.navigation.goBack()\n  }\n\n  normalizedData() {\n    const { class_id } = this.props.route.params\n    const {\n      request_id, \n      date_array,\n      time_array,\n      before_meal ,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel,\n      other_type,\n      note,\n      fever_entry\n    } = this.state\n\n    return{\n      request_id,\n      class_id,\n      // date: formatDate(date), \n      date_array: date_array.map(date => formatDate(date)),\n      time_array: time_array.map(time => formatTime(time)), \n      before_meal,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel: gel === null ? gel : gel.trim(),\n      other_type: other_type === null ? other_type : other_type.trim(),\n      note: note.trim(),\n      fever_entry: {\n        temperature: fever_entry.temperature,\n        powder: fever_entry.powder,\n        powder_refrigerated: fever_entry.powder_refrigerated, \n        syrup: fever_entry.syrup, \n        other_type: fever_entry.other_type === null ? fever_entry.other_type : fever_entry.other_type.trim()\n      }\n    }\n  }\n\n  editable(){\n    const { date_array } = this.state\n    let date = date_array[0]\n    const threshold = new Date()\n    threshold.setHours(10,0,0,0)\n    const tomorrow = new Date()\n    tomorrow.setDate(tomorrow.getDate() + 1)\n    tomorrow.setHours(0,0,0,0)\n    return (date.toDateString() === (new Date).toDateString() && new Date() < threshold) || date.getTime() > tomorrow.getTime()\n  }\n\n  onClickConfirm() {\n    const { access_mode } = this.state\n    if (access_mode === 'create' || access_mode === 'edit') {\n      if (this.timeIsEmpty()) return\n      this.sendRequest()\n    } else {\n      this.setState({\n        access_mode: 'edit'\n      })\n    }\n  }\n\n  deleteRequestConfirm() {\n    const { request_id } = this.state\n    const confirmed = confirm('確定要刪除？')\n    if (confirmed) {\n      this.deleteRequest(request_id)  \n    }\n  }\n\n  deleteRequest(request_id) {\n    const { isConnected } = this.props\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n    const { class_id, onGoBack } = this.props.route.params\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request_id}`, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        class_id\n      })\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        onGoBack()\n        this.props.navigation.goBack()\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n      })\n  }\n\n  cancelEdit() {\n    const { index } = this.state\n    this.switchRequest(index)\n  }\n\n  render() {\n    const { \n      isLoading,\n      // date, \n      time_array, \n      showDateTimeModal, \n      datetime_type, \n      time_selected_index, \n      before_meal ,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel,\n      other_type,\n      note,\n      fever_entry,\n      administered,\n      teacher_name,\n      medicated_timestamp,\n      data,\n      access_mode,\n      scrollHeight,\n      date_array,\n      date_selected_index\n    } = this.state\n    \n    if(isLoading) {\n      return <Reloading />\n    }\n    return (\n      <KeyboardAvoidingView\n          style={{ flex: 1, width: '100%', alignItems: 'center' }}\n          behavior={'padding'}\n          // keyboardVerticalOffset={90}\n          enabled\n      >\n        {showDateTimeModal ?\n          <TimeModal\n            start_date={time_selected_index === null ? new Date() : time_array[time_selected_index]}\n            datetime_type={datetime_type}\n            hideModal={() => this.setState({ showDateTimeModal: false })}\n            selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n            minDatetime={new Date()}\n            maxDatetime={(new Date()).setDate((new Date()).getDate() + 7)}\n            minTime={new Date().setHours(7, 0, 0)}\n            maxTime={new Date().setHours(20, 0, 0)}\n            paddingVertical={100}\n          />\n          : null\n        }\n\n        <ScrollView style={{ width: '100%' }}>\n          \n          {data !== null && data.length > 1 &&\n            <View style={{ width: '100%' }}>\n                <ScrollView horizontal showsHorizontalScrollIndicator={false}>\n                  {data.map((request, index) => {\n                    return (\n                      <View key={index} style={{ padding: 10 }}>\n                        <TouchableOpacity\n                          key={request.id}\n                          style={{\n                            padding: 10,\n                            backgroundColor: this.state.index === index ? '#ffddb7' : 'rgba(0,0,0,0.5)',\n                            justifyContent: 'center',\n                            borderRadius: 30\n                          }}\n                          underlayColor='#ffddb7'\n                          onClick={() => this.switchRequest(index)}\n                        >\n                          <Text\n                            style={{ fontSize: 25, color: this.state.index === index ? 'grey' : 'white' }}\n                          >\n                            {beautifyTime(request.timestamp)}\n                          </Text>\n                        </TouchableOpacity>\n                      </View>\n                    )\n                  })}\n                </ScrollView>\n            </View>\n          }\n\n          <View style={{ backgroundColor: 'white', borderTopRightRadius: 30, borderTopLeftRadius: 30}}>\n            {administered &&\n              <View style={{ alignItems: 'center'}}>\n                {/* MEDICATED RESPONSE - BODY */}\n                <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n                  <Text style={{ fontSize: 25 }}>餵藥老師：{teacher_name}</Text>\n                  <Text style={{ fontSize: 25 }}>餵藥時間：{beautifyTime(medicated_timestamp)}</Text>\n                </View>\n              </View>}\n\n          {/* DATE */}\n          <View style={{ alignItems: 'center'}}>\n            <View\n              style={{ \n                width: '100%', \n                flexDirection: 'row', \n                alignItems: 'center',\n                justifyContent: 'center',\n                backgroundColor: '#ff8944',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n            >\n              <Text style={{ fontSize: 25 }}>日期 </Text>\n            </View>\n            {/* <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#ff8944',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              underlayColor='transparent'\n              onClick={() => {\n                if (access_mode === 'read') return\n                this.setState({ showDateTimeModal: true, datetime_type: 'date' })\n              }}\n            >\n              <Text style={{ fontSize: 30, alignSelf: 'center' }}>日期 {beautifyMonthDate(date)}</Text>\n            </TouchableOpacity> */}\n\n            {/* TIME */}\n            <View \n              style={{ \n                flex: 1,\n                flexDirection: 'row', \n                width: '100%', \n                backgroundColor: 'white', \n                padding: 20,\n                alignItems: 'flex-start'\n              }}\n            >\n\n            <View style={{ flex: 1, alignItems: 'center' }}>\n                <TouchableOpacity \n                  disabled={access_mode === 'read' || access_mode === 'edit'}\n                  style={{\n                    width: '80%',\n                    paddingBottom: 15\n                  }}\n                  underlayColor='transparent'\n                  onClick={() => {\n                    if (access_mode === 'read' || access_mode === 'edit') return\n                    this.setState({ showDateTimeModal: true, datetime_type: 'date' })\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <View style={{ flex: 1, paddingLeft: 15 }}>\n                      <Text style={{ fontSize: 25 }}>日期</Text>\n                    </View >\n                    {access_mode === 'create' &&\n                      <Image\n                        source={require('../../assets/icon-plus.png')}\n                        style={{ width: 32, height: 32, alignSelf: 'flex-end'}}\n                      />\n                    }\n                  </View>\n                </TouchableOpacity>\n                {date_array.map((date, index) => {\n                  return (\n                    <View key={index} \n                      style={{\n                        width: '90%',\n                        justifyContent: 'center',\n                        flexDirection: 'row',\n                        paddingBottom: 10\n                      }}\n                    >\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '70%',\n                          backgroundColor: '#ffddb7',\n                          borderTopLeftRadius: 15,\n                          borderBottomLeftRadius: 15,\n                          justifyContent: 'center'\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.setState({ showDateTimeModal: true, datetime_type: 'date', date_selected_index: index })\n                        }}\n                      >\n                        <Text style={{ fontSize: 25, alignSelf: 'center' }}>{beautifyMonthDate(date)}</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '30%',\n                          justifyContent: 'center',\n                          padding: 5,\n                          backgroundColor: '#ffddb7',\n                          borderBottomRightRadius: 15,\n                          borderTopRightRadius: 15\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.removeDate(index)\n                        }}\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                    </View>\n                  )\n                })}\n              </View>\n\n              <View style={{ flex: 1, alignItems: 'center' }}>\n                <TouchableOpacity \n                  disabled={access_mode === 'read' || access_mode === 'edit'}\n                  style={{\n                    width: '80%',\n                    paddingBottom: 15\n                  }}\n                  underlayColor='transparent'\n                  onClick={() => {\n                    if (access_mode === 'read' || access_mode === 'edit') return\n                    this.setState({ showDateTimeModal: true, datetime_type: 'time' })\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <View style={{ flex: 1, paddingLeft: 15 }}>\n                      <Text style={{ fontSize: 25 }}>時間</Text>\n                    </View >\n                    {access_mode === 'create' &&\n                      <Image\n                        source={require('../../assets/icon-plus.png')}\n                        style={{ width: 32, height: 32, alignSelf: 'flex-end'}}\n                      />\n                    }\n                  </View>\n                </TouchableOpacity>\n\n                {time_array.map((time, index) => {\n                  return (\n                    <View key={index} \n                      style={{\n                        width: '90%',\n                        justifyContent: 'center',\n                        flexDirection: 'row',\n                        paddingBottom: 10\n                      }}\n                    >\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '70%',\n                          backgroundColor: '#ffddb7',\n                          borderTopLeftRadius: 15,\n                          borderBottomLeftRadius: 15,\n                          justifyContent: 'center'\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.setState({ showDateTimeModal: true, datetime_type: 'time', time_selected_index: index })\n                        }}\n                      >\n                        <Text style={{ fontSize: 25, alignSelf: 'center' }}>{beautifyTime(time)}</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '30%',\n                          justifyContent: 'center',\n                          padding: 5,\n                          backgroundColor: '#ffddb7',\n                          borderBottomRightRadius: 15,\n                          borderTopRightRadius: 15\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.removeTime(index)\n                        }}\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                    </View>\n                  )\n                })}\n              </View>\n            </View>\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', paddingBottom: 20 }}>\n              <TouchableOpacity\n                disabled={access_mode === 'read'}\n                style={{ \n                  padding: 15,\n                  borderWidth: 1,\n                  borderColor: 'grey',\n                  backgroundColor: (before_meal !== null && before_meal) ? '#ffddb7' : 'white'\n                }}\n                underlayColor='#ff8944'\n                onClick={() => {\n                  if (access_mode === 'read') return\n                  this.setState({ before_meal: before_meal ? null : true })\n                }}\n              >\n                <Text style={{ fontSize: 25 }}>餐前</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                disabled={access_mode === 'read'}\n                style={{\n                  padding: 15,\n                  borderWidth: 1,\n                  borderLeftWidth: 0,\n                  borderColor: 'grey',\n                  backgroundColor: (before_meal !== null && !before_meal) ? '#ffddb7' : 'white'\n                }}\n                underlayColor='#ff8944'\n                onClick={() => {\n                  if (access_mode === 'read') return\n                  this.setState({ before_meal: before_meal === false ? null : false })\n                }}\n              >\n                <Text style={{ fontSize: 25 }}>餐後</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {/* MEDICATION TYPE - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#00c07f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onClick={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>藥物</Text>\n            </TouchableOpacity>\n\n            {/* MEDICATION TYPE - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', paddingHorizontal: 20 }}>\n\n              {/* POWDER */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingTop: 20, paddingBottom: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ powder: !powder })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: powder ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10, alignSelf: 'center' }}>藥粉    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  \n\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingTop: 20, paddingBottom: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ powder_refrigerated: !powder_refrigerated})\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            // flex: 1,\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: powder_refrigerated ? '#00c07f' : 'white'\n                          }}\n                        >\n                          \n                        </View>\n                      </View>\n                    \n                      <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n\n                    </View>\n\n                  </TouchableOpacity>\n                </View>\n                \n              </View>\n\n              {/* SYRUP */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.onSelectSyrup()\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: syrup.length ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10 }}>藥水    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  {syrup.length && access_mode !== 'read'? \n                    <TouchableOpacity\n                      style={{ padding: 10 }}\n                      onClick={() => this.setState({\n                        syrup: [...syrup, { amount: '', need_refrigerated: false, note: '' }]\n                      })}\n                      underlayColor='transparent'\n                    >\n                      <Image\n                        source={require('../../assets/icon-plus-green.png')}\n                        style={{ width: 32, height: 32 }}\n                      />\n                    </TouchableOpacity>\n                    : null\n                  }\n                </View>\n\n                {syrup.map((entry,index) => {\n                  return (\n                    <View key={index} style={{ flexDirection: 'row', alignItems: 'center', alignSelf: 'center', marginBottom: 20 }}>\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ width: 35, fontSize: 25, textAlign: 'center', marginHorizontal: 10 }}\n                        keyboardType=\"number-pad\"\n                        autoFocus={true}\n                        placeholder={'____'}\n                        value={entry.amount}\n                        onChangeText={(amount) => this.editSyrupAmountEntry(amount, index)}\n                      />\n\n                      <Text style={{ fontSize: 20, marginRight: 5 }}>c.c.</Text>\n\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{ padding: 5 }}\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.editSyrupRefrigerationEntry(!entry.need_refrigerated, index)\n                        }}\n                        underlayColor='transparent'\n                      >\n                        <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                          <View\n                            style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                          >\n                            <View \n                              style={{\n                                width: 16,\n                                height: 16,\n                                borderRadius: 8,\n                                backgroundColor: entry.need_refrigerated ? '#00c07f' : 'white'\n                              }}\n                            >\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n                        </View>\n\n                      </TouchableOpacity>\n\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ fontSize: 25, textAlign: 'center', marginHorizontal: 10, width: 60 }}\n                        // keyboardType=\"default\"\n                        // autoFocus={true}\n                        placeholder={'備註'}\n                        value={entry.note}\n                        onChangeText={(note) => this.editSyrupNoteEntry(note, index)}\n                      />\n\n                      {access_mode !== 'read' && <TouchableOpacity\n                        style={{ paddingHorizontal: 10 }}\n                        onClick={() => this.removeSyrupEntry(index)}\n                        underlayColor='transparent'\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                      }\n                    </View>\n                  )\n                })}\n                \n              </View>\n\n              {/* GEL */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ \n                        gel: gel === null ? '' : null\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: gel === null ? 'white' : '#00c07f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>藥膏</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {gel === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex: 1, fontSize: 25 }}\n                      autoFocus={true}\n                      placeholder={'部位'}\n                      value={gel}\n                      onChangeText={(gel) => this.setState({ gel })}\n                    />\n                  }\n                </View>\n                \n              </View>\n\n              {/* OTHER */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ \n                        other_type: other_type === null ? '' : null\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: other_type === null ? 'white' : '#00c07f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>其他</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {other_type === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex:1, fontSize: 22, paddingHorizontal: 10, paddingTop: 3, paddingBottom: 5, paddingLeft: 0 }}\n                      placeholder={'點擊我開始填寫...'}\n                      autoFocus={true}\n                      textAlignVertical={'top'}\n                      multiline={true}\n                      blurOnSubmit={true}\n                      scrollEnabled={false}\n                      value={other_type}\n                      onChangeText={(other_type) => this.setState({ other_type })} \n                    />\n                  }\n                </View>\n                \n              </View>\n\n            </View>\n          </View>\n\n          {/* NOTE - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#f4d41f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onClick={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>備註</Text>\n            </TouchableOpacity>\n\n            {/* NOTE - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n              <TextInput\n                editable={access_mode !== 'read'}\n                style={{ height: scrollHeight, padding: 15, fontSize: 25 }}\n                placeholder={'點擊填寫...'}\n                multiline={true}\n                blurOnSubmit={true}\n                scrollEnabled={false}\n                value={note}\n                onChangeText={(note) => this.setState({ note})}\n                onChange={(e) => this.setState({\n                  scrollHeight: e.target.scrollHeight\n                })}\n                onLayout={(event) => {\n                  const { scrollHeight } = event.nativeEvent.target\n                  this.setState({\n                      scrollHeight\n                  })\n                }}\n              />\n            </View>\n          </View>\n\n          {/* FEVER MEDS - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#fa625f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onClick={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>發燒餵藥</Text>\n            </TouchableOpacity>\n\n            {/* FEVER MEDS - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n              <View style={{ paddingVertical: 10 }}>\n                <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                  \n                  <Text style={{ fontSize: width * 0.06, marginHorizontal: 10 }}>發燒超過</Text>\n\n                  <TextInput\n                    editable={access_mode !== 'read'}\n                    style={{ width: 55, fontSize: 25 }}\n                    keyboardType='number-pad'\n                    value={fever_entry.temperature}\n                    onChangeText={(temperature) => this.setState({\n                      fever_entry: {\n                        ...fever_entry,\n                        temperature\n                      }\n                    })}\n                  />\n\n                  <Text style={{ fontSize: width * 0.06 }}>°C 以上才用藥</Text>\n                </View>\n\n                {/* POWDER */}\n                <View style={{ backgroundColor: '' }}>\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <TouchableOpacity\n                      disabled={access_mode === 'read'}\n                      style={{ paddingTop: 20, paddingBottom: 10 }}\n                      onClick={() => {\n                        if (access_mode === 'read') return\n                        this.setState({ \n                          fever_entry: {\n                            ...fever_entry,\n                            powder: !fever_entry.powder \n                          }\n                        })\n                      }}\n                      underlayColor='transparent'\n                    >\n                      <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                        <View\n                          style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                        >\n                          <View \n                            style={{\n                              width: 16,\n                              height: 16,\n                              borderRadius: 8,\n                              backgroundColor: fever_entry.powder ? '#fa625f' : 'white'\n                            }}\n                          >\n                          </View>\n                        </View>\n                        <Text style={{ fontSize: 25, marginLeft: 10 }}>藥粉    </Text>\n                      </View>\n                    </TouchableOpacity>\n                    \n\n                    <TouchableOpacity\n                      disabled={access_mode === 'read'}\n                      style={{ paddingTop: 20, paddingBottom: 10 }}\n                      onClick={() => {\n                        if (access_mode === 'read') return\n                        this.setState({\n                          fever_entry: {\n                            ...fever_entry,\n                            powder_refrigerated: !fever_entry.powder_refrigerated\n                          }\n                        })\n                      }}\n                      underlayColor='transparent'\n                    >\n                      <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                        <View\n                          style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                        >\n                          <View \n                            style={{\n                              // flex: 1,\n                              width: 16,\n                              height: 16,\n                              borderRadius: 8,\n                              backgroundColor: fever_entry.powder_refrigerated ? '#fa625f' : 'white'\n                            }}\n                          >\n                            \n                          </View>\n                        </View>\n                      \n                        <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n\n                      </View>\n\n                    </TouchableOpacity>\n                  </View>\n                  \n                </View>\n                \n                {/* SYRUP */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.onSelectFeverSyrup()\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: fever_entry.syrup.length ? '#fa625f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10 }}>藥水    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  {fever_entry.syrup.length && access_mode !== 'read'? \n                    <TouchableOpacity\n                      style={{ padding: 10 }}\n                      onClick={() => this.setState({\n                        fever_entry: {\n                          ...fever_entry,\n                          syrup: [...fever_entry.syrup, { amount: '', need_refrigerated: false }]\n                        }\n                      })}\n                      underlayColor='transparent'\n                    >\n                      <Image\n                        source={require('../../assets/icon-plus-red.png')}\n                        style={{ width: 32, height: 32 }}\n                      />\n                    </TouchableOpacity>\n                    : null\n                  }\n                </View>\n\n                {fever_entry.syrup.map((entry,index) => {\n                  return (\n                    <View key={index} style={{ flexDirection: 'row', alignItems: 'center', alignSelf: 'center', marginBottom: 20 }}>\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ width: 62, fontSize: 25 }}\n                        keyboardType=\"number-pad\"\n                        autoFocus={true}\n                        placeholder={'____'}\n                        value={entry.amount}\n                        onChangeText={(amount) => this.editFeverSyrupAmountEntry(amount, index)}\n                      />\n\n                      <Text style={{ fontSize: 25, marginRight: 5 }}>c.c.</Text>\n\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{ padding: 5 }}\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.editFeverSyrupRefrigerationEntry(!entry.need_refrigerated, index)\n                        }}\n                        underlayColor='transparent'\n                      >\n                        <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                          <View\n                            style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                          >\n                            <View \n                              style={{\n                                width: 16,\n                                height: 16,\n                                borderRadius: 8,\n                                backgroundColor: entry.need_refrigerated ? '#fa625f' : 'white'\n                              }}\n                            >\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n                        </View>\n\n                      </TouchableOpacity>\n\n                      {access_mode !== 'read' && \n                        <TouchableOpacity\n                          disabled={access_mode === 'read'}\n                          style={{ paddingHorizontal: 10 }}\n                          onClick={() => {\n                            if (access_mode === 'read') return\n                            this.removeFeverSyrupEntry(index)\n                          }}\n                          underlayColor='transparent'\n                        >\n                          <Image\n                            source={require('../../assets/icon-delete.png')}\n                            style={{ width: 32, height: 32 }}\n                          />\n                        </TouchableOpacity>\n                      }\n                    </View>\n                  )\n                })}\n                \n              </View>\n\n                {/* OTHER */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({\n                        fever_entry: {\n                          ...fever_entry,\n                          other_type: fever_entry.other_type === null ? '' : null\n                        }\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: fever_entry.other_type === null ? 'white' : '#fa625f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>其他</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {fever_entry.other_type === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex:1, fontSize: 22, paddingHorizontal: 10, paddingTop: 3, paddingBottom: 5, paddingLeft: 0 }}\n                      placeholder={'點擊我開始填寫...'}\n                      autoFocus={true}\n                      textAlignVertical={'top'}\n                      multiline={true}\n                      blurOnSubmit={true}\n                      scrollEnabled={false}\n                      value={fever_entry.other_type}\n                      onChangeText={(other_type) => this.setState({ \n                        fever_entry: {\n                          ...fever_entry,\n                          other_type\n                        }\n                      })} \n                    />\n                  }\n                </View>\n                \n              </View>\n                  \n              </View>\n            </View>\n          </View>\n          </View>\n        </ScrollView>\n\n        <View\n          style={{ height: 90, width: '100%', paddingHorizontal: 20 }}\n        >\n          {access_mode === 'read' ?\n            <TouchableOpacity \n              disabled={!this.editable()}\n              style={{ width: '100%', height: '70%', backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n              onClick={() => {\n                if (!this.editable()) return\n                this.onClickConfirm()\n              }}\n              underlayColor='transparent'\n            >\n              <Text style={{ fontSize: 40, textAlign: 'center', color: 'white' }}>\n                編輯\n              </Text>\n            </TouchableOpacity>\n            : access_mode === 'edit' ?\n              <View style={{ width: '100%', height: '70%', flexDirection: 'row' }}>\n                <TouchableOpacity \n                  style={{  flex:1, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                  onClick={() => this.deleteRequestConfirm()}\n                  underlayColor='transparent'\n                >\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    刪除\n                  </Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity \n                  style={{  flex:1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n                  onClick={() => this.cancelEdit()}\n                  underlayColor='transparent'\n                >\n                  <Text style={{ fontSize: width * 0.06, textAlign: 'center', color: 'white' }}>\n                    取消編輯\n                  </Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity \n                  style={{ flex:1, backgroundColor: '#00c07f', justifyContent: 'center' }}\n                  onClick={() => this.onClickConfirm()}\n                  underlayColor='transparent'\n                  >\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    送出\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            : // access_mode === 'create\n              <TouchableOpacity\n                style={{ width: '100%', height: '70%', backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n                onClick={() => this.onClickConfirm()}\n                underlayColor='transparent'\n              >\n                <Text style={{ fontSize: 30, textAlign: 'center', color: 'white' }}>\n                  送出\n                </Text>\n              </TouchableOpacity>\n          }\n        </View>\n        \n      </KeyboardAvoidingView>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      isConnected: state.parent.isConnected\n  }\n}\n\nexport default connect(mapStateToProps) (AddMedicationRequestPage)","import React from 'react'\nimport { View, Text, Image, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport Reloading from '../reloading'\nimport { beautifyDate, put, formatDate, formatTime } from '../util'\nimport * as WebBrowser from 'expo-web-browser'\nimport * as Sharing from 'expo-sharing'\nimport * as Linking from 'expo-linking'\n\nexport default class AnnouncementPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            index: -1,\n            data: []\n        }\n    }\n\n    componentDidMount() {\n        const { index, data } = this.props.route.params\n        // deal with default index(0) or selected index from announcement card\n        this.setState({\n            index,\n            data\n        })\n        this.markRead(data[index].id)   \n    }\n\n    async markRead(announcement_id) {\n        const { parent_id } = this.props.route.params\n        const timestamp = formatDate(new Date()) + ' ' + formatTime(new Date())\n        const response = await put(`/announcement/${announcement_id}/read`, {\n            'parent_id': parent_id,\n            'timestamp': timestamp\n        })\n        // console.log(response)\n        const { success, statusCode, message, data } = response\n\n    }\n\n    componentWillUnmount() {\n        const { onGoBack } = this.props.route.params\n        onGoBack()\n    }\n\n    render() {\n        const { index, data } = this.state\n        if (index < 0) {\n            return <Reloading />\n        }\n        const selected_announcement = data[index]\n        // console.log('selected_announcement: ', selected_announcement)\n        return (\n            <Card style={{ flex: 1 }}>\n                <View style={{ padding: 20, alignItems: 'center' }}>\n                    <Text style={{ fontSize: 25 }}>{selected_announcement.title}</Text>\n                    <Text>{beautifyDate(new Date(selected_announcement.timestamp))}</Text>\n                </View>\n                <View style={{ flex: 1, padding: 20,  }}>\n                    <Text>{selected_announcement.text}</Text>\n                    <View style={{ flexDirection: 'row', padding: 20,  }}>\n                    {selected_announcement.photo_url_arr.map((url, index) => {\n                        return (\n                            <TouchableHighlight\n                                key={index}\n                                // onPress={() => this.props.navigation.push('ViewImagePage', {\n                                //     url: url\n                                // })}\n                                onPress={async() => {\n                                    // Linking.openURL(url)\n                                    // if (!(await Sharing.isAvailableAsync())) {\n                                    //     alert(`Uh oh, sharing isn't available on your platform`);\n                                    //     return;\n                                    //   }\n                                  \n                                    //   await Sharing.shareAsync(url);\n                                    // let result = await WebBrowser.openBrowserAsync(url, {\n                                    //     windowFeatures: 'menubar=yes,toolbar=yes'\n                                    // })\n                                    let result = await WebBrowser.openBrowserAsync(url)\n                                    this.setState({ result })\n                                    // console.log(result)\n                                    // let windowRef = window.open()\n                                    // windowRef.location = url\n                                    // console.log('HERE?')\n                                }}\n                                // onLongPress={() => MediaLibrary.saveToLibraryAsync(url)}\n                            >\n                                <Image\n                                    source={{ uri: url }}\n                                    style={{\n                                        width: 150,\n                                        height: 150,\n                                        marginRight: 10\n                                    }}\n                                />\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n                </View>\n            </Card>\n        )\n    }\n}","import React, { useState, useEffect, } from 'react'\nimport { View, Text, TouchableOpacity, Image, Dimensions, ScrollView } from 'react-native'\nimport { Card } from 'native-base'\nimport { beautifyDate, get } from '../util'\n\nconst AnnouncementListPage = (props) => {\n    const { parent_id, viewAnnouncement } =  props.route.params\n    const [ announcements, setAnnouncements ] = useState(props.route.params.announcements)\n    const [ page, setPage ] = useState(0)\n    const [ endReached, setEndReached ] = useState(false)\n    // console.log('page: ', page)\n    // console.log('announcements: ', announcements)\n\n    useEffect(() => {\n        // console.log('useEffect')\n        if (page === 0) return\n        fetchAnnouncementByPage()\n    }, [page])\n\n    const fetchAnnouncementByPage = async() => {\n        const response = await get(`/announcement/unread?parent_id=${parent_id}&page=${page}`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchAnnouncementByPage/response: ', response)\n        if (success) {\n            setAnnouncements([...announcements, ...data])\n            if (data.length < 3) {\n                setEndReached(true)\n            }\n        }\n    }\n\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center' }}>\n            {announcements.map((announcement, index) => {\n                const date = beautifyDate(new Date(announcement.timestamp))\n                return (\n                    <TouchableOpacity\n                        key={announcement.id}\n                        style={{ width: '100%', alignItems: 'center' }}\n                        onClick={() => viewAnnouncement(index, announcements)}\n                    >\n                        <Card\n                            style={{\n                                padding: 20,\n                                width: '95%',\n                                height: 200,\n                                flexDirection: 'row'\n                            }}\n                        >\n                            <View style={{ width: '100%', overflow: 'hidden'}}>\n                                <View style={{ paddingBottom: 20 }}>\n                                    <Text style={{ fontSize: 25 }}>{announcement.title}</Text>\n                                    <Text style={{ fontSize: 15 }}>{date}</Text>\n                                </View>\n                                <View style={{ }}>\n                                    <Text style={{ fontSize: 18 }}>{announcement.text}</Text>\n                                </View>\n                            {/* <View style={{ width: '10%', justifyContent: 'flex-end' }}>\n                            </View> */}\n                            </View>\n                        </Card>\n                    </TouchableOpacity>\n                )\n            })}\n            {endReached ?\n                <View style={{ padding: 15 }}>\n                    <Text style={{ fontSize: 18 }}>無更多訊息</Text>\n                </View>\n            : <TouchableOpacity\n                style={{ width:'95%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', alignItems: 'center' }}\n                onClick={() => setPage(page+1)}\n            >\n                <Text style={{ fontSize: 20 }}>檢視更多</Text>\n            </TouchableOpacity>\n            }\n        </ScrollView>\n    )\n}\n\nexport default AnnouncementListPage","import React from 'react'\nimport { TouchableHighlight, Text } from 'react-native'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux';\nimport reducer from '../../redux/parent/reducers/index'\nimport { NavigationContainer } from '@react-navigation/native'\nimport { createStackNavigator } from '@react-navigation/stack'\nimport ParentHome from './parenthome'\nimport MedicationRequestPage from './medicationrequestpage'\nimport AbsenceExcusePage from './absenceexcusepage'\nimport PickupRequest from './pickuprequest'\nimport AddMedicationRequestPage from './addmedicationrequestpage'\nimport AnnouncementPage from './announcementpage'\nimport ViewImagePage from '../viewimagepage'\nimport AnnouncementListPage from './announcementlistpage';\n\nconst store = createStore(reducer)\nconst Stack = createStackNavigator()\n\nexport default class ParentApp extends React.Component {\n    render() {\n        return (\n            <Provider store={store}>\n                <NavigationContainer>\n                    <Stack.Navigator\n                        initialRouteName=\"ParentHome\"\n                        screenOptions={{\n                            gestureEnabled: true,\n                            headerTitleStyle: {\n                                fontWeight: 'bold',\n                                fontSize: 30\n                            }\n                        }}\n                    >\n                        <Stack.Screen\n                            name=\"ParentHome\"\n                            component={ParentHome}\n                            initialParams={{\n                                parent_id: this.props.parent_id,\n                                loadAuth: this.props.loadAuth\n                            }}\n                            options={{\n                                title: '家長首頁',\n                                headerRight: () => (\n                                    <TouchableHighlight\n                                        style={{ padding: 10, marginRight: 20 }}\n                                        onPress={() => this.props.handleSignOut()}\n                                    >\n                                        <Text>登出</Text>\n                                    </TouchableHighlight>\n                                )\n                            }}\n                        />\n                        {/* <Stack.Screen\n                            name=\"ViewImagePage\"\n                            component={ViewImagePage}\n                            options={{ \n                                title: '',\n                                headerRight: () => (\n                                    <TouchableHighlight\n                                        style={{ padding: 10, marginRight: 20 }}\n                                        // onPress={() => this.props.handleSignOut()}\n                                    >\n                                        <Text></Text>\n                                    </TouchableHighlight>\n                                )\n                        }}\n                        /> */}\n                        <Stack.Screen\n                            name=\"PickupRequest\"\n                            component={PickupRequest}\n                            options={{ title: '接回告知' }}\n                        />\n                        <Stack.Screen\n                            name=\"MedicationRequestPage\"\n                            component={MedicationRequestPage}\n                            options={{ title: '托藥單' }}\n                        />\n                        <Stack.Screen\n                            name=\"AddMedicationRequestPage\"\n                            component={AddMedicationRequestPage}\n                            options={{ title: '新增托藥單' }}\n                        />\n                        <Stack.Screen \n                            name=\"AbsenceExcusePage\"\n                            component={AbsenceExcusePage}\n                            options={{ title: '請假單' }}\n                        />\n                        <Stack.Screen\n                            name=\"AnnouncementPage\"\n                            component={AnnouncementPage}\n                            options={{ title: '公告' }}\n                        />\n                        <Stack.Screen\n                            name=\"AnnouncementListPage\"\n                            component={AnnouncementListPage}\n                            options={{ title: '公告' }}\n                        />\n                    </Stack.Navigator>\n                </NavigationContainer>\n            </Provider>\n        )\n    }\n}","import React from 'react'\nimport { View, TextInput, StyleSheet, Text, Alert } from 'react-native'\nimport { Container, Content, Card, Button} from 'native-base'\nimport Auth from '@aws-amplify/auth'\n\nclass ConfirmSignUp extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            code: ''\n        }\n        this.confirmCode = this.confirmCode.bind(this)\n    }\n\n    confirmCode() {\n        Auth.confirmSignUp(this.props.username, this.state.code)\n            .then(data => {\n                console.log('data: ', data)\n                // switch to homepage\n                // save often used ids into asyncstorage\n                // this.props.navigation.navigate('AuthLoadingPage')\n                this.props.getCurrentUser()\n            })\n            .catch((err) => {\n                Alert.alert(\n                    'Error!',\n                    err.message,\n                    [\n                        { text: 'OK', onPress: () => console.log('err occured when setting up account for parent(s): ', err)}\n                    ]\n                  )\n            })\n    }\n\n    render() {\n        console.log('this.state.code: ', this.state.code)\n        return (\n            <Container>\n                <Content keyboardShouldPersistTaps=\"always\">\n                    <View\n                        style={{\n                            paddingTop: '20%',\n                            flexDirection: 'row',\n                            justifyContent: 'space-around',\n                            paddingBottom: '15%'\n                        }}\n                    >\n                        <TextInput\n                            style={{ position: 'absolute', color: 'transparent'}}\n                            autoFocus={true}\n                            maxLength={6}\n                            caretHidden={true}\n                            keyboardType={'numeric'}\n                            onChangeText={(number) => {\n                                this.setState({ code: number })\n                            }}\n                        />\n                        {Array(6).fill(0).map((item, index) => {\n                            return (\n                                <Card key={index} style={{ width: 50, height: 50, backgroundColor: 'white', borderColor: 'black', justifyContent: 'center' }}>\n                                    {this.state.code.length > index ? \n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>{this.state.code.charAt(index)}</Text>\n                                        : <Text></Text>\n                                    }\n                                </Card>\n                            )\n                        })}\n                    </View>\n                    \n                    <Button rounded success style={{ alignSelf: 'center' }} onPress={this.confirmCode}>\n                        <Text style={{ paddingHorizontal: 5, color: 'white' }}>Confirm code</Text>\n                    </Button>\n                {/* }} */}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    input: {\n        borderColor: 'black',\n        borderWidth: 1\n    }\n})\n\nexport default ConfirmSignUp","import React from 'react'\nimport { View, Text, ActivityIndicator } from 'react-native'\nimport * as Font from 'expo-font'\nimport Auth from '@aws-amplify/auth'\nimport SchoolApp from '../teacher/schoolapp'\nimport Signin from './signin'\nimport Signup from './signup'\nimport ParentApp from '../parent/parentapp'\nimport ConfirmSignUp from './confirmsignup'\nimport Reloading from '../reloading'\nimport { YellowBox } from 'react-native';\nimport ENV from '../../variables'\n\nYellowBox.ignoreWarnings([\n    'Non-serializable values were found in the navigation state',\n]);\n\nclass AuthLoading extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            status: '',\n            id: '',\n            username: ''\n        }\n        this.getCurrentUser = this.getCurrentUser.bind(this)\n    }\n\n    async componentDidMount() {\n        await Font.loadAsync({\n            'Roboto': require('../../node_modules/native-base/Fonts/Roboto.ttf'),\n            'Roboto_medium': require('../../node_modules/native-base/Fonts/Roboto_medium.ttf'),\n        })\n        this.getCurrentUser()\n    }\n\n    getCurrentUser() {\n        this.setState({ status: 'loading' })\n        Auth.currentAuthenticatedUser()\n            .then(user => {\n                //user is authenticated\n                console.log(user.username)\n                fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/user?username=${user.username}`, {\n                    method: 'GET',\n                    headers: {\n                        Accept: 'application/json',\n                        'Content-Type': 'application/json'\n                    }\n                })\n                    .then((res) => res.json())\n                    .then((resJson) => {\n                        // get id, name, role of admin and parents\n                        const { statusCode, message, data } = resJson\n                        // console.log('resJson: ', resJson)\n                        if (statusCode === 200) {\n                            this.setState({\n                                status: data.role,\n                                id: data.id,\n                                username: user.username\n                            })\n                        } else {\n                            this.setState({\n                                status: 'signedout'\n                            })\n                        }\n                    })\n                    .catch((err) => {\n                        console.log('err: ', err)\n                        this.setState({ status: 'signedout' })\n                    })\n            })\n            .catch(err => {\n                if (err == 'not authenticated') {\n                    this.setState({ status: 'signedout' })\n                }\n                this.setState({ status: 'signedout' })\n            })\n    }\n\n    changeAuthState(state, username) {\n        this.setState({\n            status: state,\n            username\n        })\n    }\n\n    handleSignOut() {\n        Auth.signOut()\n            .then(() => {\n                this.getCurrentUser()\n            })\n            .catch(err => console.log(err))\n    }\n\n    render() {\n        console.log('ENV: ', ENV)\n        const { status, username } = this.state\n        console.log('status: ', status)\n        return (\n            <View style={{ flex: 1 }}>\n                {\n                    status.includes('parent') ?\n                        <ParentApp parent_id={this.state.id} handleSignOut={() => this.handleSignOut()}/>\n                        : status === 'school' ? \n                            <SchoolApp school_id={this.state.id} school_name={username} handleSignOut={() => this.handleSignOut()} />\n                            : status === 'ConfirmSignUpPage' ?\n                                <ConfirmSignUp getCurrentUser={this.getCurrentUser} username={this.state.username}/>\n                                : status === 'signedout' || status === 'school' ?\n                                    <Signin loadAuth={this.getCurrentUser} changeAuthState={(state,username) => this.changeAuthState(state, username)} />\n                                    :\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <Text>Loading...</Text>\n                                            <ActivityIndicator size=\"large\"></ActivityIndicator>\n                                        </View>\n                }\n            </View>\n        )\n    }\n}\n\n// const mapDispatchToProps = (dispatch) => {\n//     return ({\n//         ...bindActionCreators({ initializeClass }, dispatch)\n//     })\n// }\n\n// export default connect(null, mapDispatchToProps) (AuthLoading)\nexport default AuthLoading","const awsCognitoAuth = {\n    identityPooId: 'us-east-1:0a3c861f-48ca-4832-af57-28b4209e695e',\n    region: 'us-east-1',\n    userPoolId: 'us-east-1_QlbPkQ8Ds',\n    userPoolWebClientId: '6maqsbp3gi2vj0tid4akmoiat6'\n}\n\nexport default awsCognitoAuth","// import React from 'react';\n// import { StyleSheet, Text, View } from 'react-native';\n\n// export default function App() {\n//   return (\n//     <View style={styles.container}>\n//       <Text>Open up App.js to start working on your app!</Text>\n//     </View>\n//   );\n// }\n\n// const styles = StyleSheet.create({\n//   container: {\n//     flex: 1,\n//     backgroundColor: '#fff',\n//     alignItems: 'center',\n//     justifyContent: 'center',\n//   },\n// });\n\nimport React from 'react'\nimport AuthLoading from './components/auth/authloading'\nimport { View, Text, TextInput, Image } from 'react-native'\nimport { Root } from 'native-base'\nimport Amplify from 'aws-amplify'\nimport cognito_auth from './configuration/aws-cognito-auth'\nimport { AppLoading, SplashScreen } from 'expo'\nimport { Asset } from 'expo-asset'\n\nAmplify.configure(cognito_auth)\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isSplashReady: false,\n      isAppReady: false\n    }\n    SplashScreen.preventAutoHide()\n  }\n  \n\n  _cacheSplashResourcesAsync = async () => {\n    const gif = require('./assets/app-splash.gif');\n    return Asset.fromModule(gif).downloadAsync();\n  };\n\n  _cacheResourcesAsync = async () => {\n    SplashScreen.hide();\n    const images = [\n      require('./assets/app_logo.png')\n    ];\n\n    const cacheImages = images.map(image => {\n      return Asset.fromModule(image).downloadAsync();\n    });\n\n    await Promise.all(cacheImages);\n    this.setState({ isAppReady: true });\n  };\n\n  render() {\n    // console.log('isAppReady: ', isAppReady)\n    // const { isSplashReady, isAppReady } = this.state\n    // if (!isSplashReady) {\n    //   return (\n    //     <AppLoading\n    //       startAsync={this._cacheSplashResourcesAsync}\n    //       onFinish={() => this.setState({ isSplashReady: true })}\n    //       onError={console.warn}\n    //       autoHideSplash={false}\n    //     />\n    //   )\n    // }\n\n    // if (!isAppReady) {\n    //   return (\n    //     <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n    //       <Image\n    //         source={require('./assets/app-splash.gif')}\n    //         style={{ height: 200, aspectRatio: 1 }}\n    //         onLoad={this._cacheResourcesAsync}\n    //       />\n    //     </View>\n    //   )\n    // }\n\n    return (\n      // <Root>\n        <AuthLoading />\n      // </Root>\n    )\n  }\n}\n\nText.defaultProps = Text.defaultProps || {};\nText.defaultProps.allowFontScaling = false;\n\nTextInput.defaultProps = TextInput.defaultProps || {};\nTextInput.defaultProps.allowFontScaling = false;","module.exports = __webpack_public_path__ + \"static/media/icon-thumbnail.f8c9cedd.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-checked-box.add46308.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsSAAALEgHS3X78AAACN0lEQVR42u3dv28ScRzG8efbKkPLdcPE6OKPja2QuiqjCxCjf4FJdz0lcbrN0KK7iX/BxdTDoaOG0VK6uVWHpumikx4O1vBxqDFRcgmed9TA+zWXkjzv+wHLIQEAAAAAAGBeuCz+STkIC0teqenM6pJblXRR0vKMbTWUdCjZnpmir8NP0bvgzrdTD3DtyetbZgsbkl2es4P3vcke9v3a1qkEuB2GiwcHpbZJ9+f5EmKmTn/YaykIRmlev5D2jRn/5xHs5K8Vrz+e6hlwctlxL7iF/qa549+Icj8DykFYMHNt9h7ztByEhdwDLHmlpqQr7D3m0rJ3rp7/PcDUYOvEO3L+AZxUYelE1Wl8CjrPzoku/O0LzqR4k+Ikf7R9d3Wmlr35fC+zbTL5HoBsEIAABAABCAACEAAEIAAIQAAQgAAgAAFAAAKAAAQAAQgAAhAABCAACEAAEIAAIAABQAACgAAEAAEIAAIQAAQgAAhAABCAACAAAUAAAoAA/7c0z4yLNcGz0SZ8xtqMcZ+ncAa4I47bhGVkR1MIMBowdQLTbu4BzBSxdOIp0M09wGhl5aWkfdYeW/9DHH98lXuAwXr12GQtBv9jfhvdS/OTJqk+hvb92paZOsz+69LTfvug1k3z0tTfA/rDXkuyTdZ3Gztfeo/St/tHa503DUmbkq7O2fL7zsxPe+RnFkCSKs92zy7GcUNmdSdV7ORnrIozNnjspEOTBk6Kvnted7BePeYKAAAAAAAAgEn9AI63ihVnDPNHAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-medication-powder.ea8d7086.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-syrup.a7ee612b.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-gel.12878684.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-pill.b0c168c9.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-wellness.8e4dfdb5.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAC2UlEQVRo3u2Xv24TQRDGv9mzHdt3tmMHCiQiJNqYylBAwRMgurwBSoNooKG0y4gyosk78BRI0IQulihxEiRiXETIh2WMdygSoZx3cv98ZA/J293c7ml++30zuwesxmosNSjpAv5wu+LXnZ8A4LUHBADjwzssPbs/5lV6dDIRv9PfKvnwX4L5udcebKYFKCRdMHF5I/bcKloAvhrJH3SKPo/eAXiyrAIq6QJN1Iw9V6Elxcfl0dsskk8FwFTYWGauf7j5gIBnWdWASr6EW8vMZaJXaWovMwBFaKWdO+zf9AB6mmUXSmEhuhF7LoIFX9WVh2BUrAKA0Uzw+aBaSnWyPgeSA1D8NsoLNcDMd60DUAIFFII1QMAt6wBMSKCAUfAV+xYCxW+jREFY5qJ9AI5fA8Y5QJhkDVBILgCa4IsrwcWl7e8VYeEZRg2QzzlQoBeflXcXQt+sW8hrH+0C/Dra/tx1t456C4fgcQ6K+ByCmXpXi0S9xeQv2tIgFwAAULv3pSspQcTd83diD+5b/yML5LO9XZrVqtPLsWJhrUT7+zNx/kGn6JdHYwCloKIDunYFAAD1umfEnLF35W7d/zQD8DkXFgKAidauEZuRG97E+GNuABznt7HbDlQt1LOK3ucGgDTcOLEgoJMpQGEpAOV4rHnxthoKUH7zeDhTwTX8or5Ge3vT61dgrj0TSnnhW1ZoGLGzs4YVC82FZOeaQwGm9MtIduo4dgCI2RUUCLWQmikjWaXmdgBAwm5HKEBKN8zTW9lSQOhCFA6gQUaymsgOgIZpFykWBDSTpTlbUgDmbke1UWghWVsKgAW7RFiIhWQZWLcDIHccN6Ju1gUl7SjAggIMeBGVLyVrqwZIqgEv4gekIZwnlmoA5kEGCrcQC3Zha0Us28WL0C1PFkoDgPwAsNxx3P8GIJ2FUM+ThU6F8GnEmu9CeGjrKrFDwMml0DER7WS9ZjVW4x+OPysh2phhVbaOAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-milk.02c27d2c.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0UlEQVRo3u2YwQnCQBBF/wQL0GMwdmAFWoJ9iAUJbprJSTvwpBcFIVc7GC8iRBNBRbIJ753CJId5mRmYXQkAIBp8o50HuQdtu5JbUvnKNLs/zaP7uw25JV3vGgQQ+JFB49QHORVoswK2kjVV5fndv+PvOoIhRgABBBBAAAEEWOZqOBXlwmS55ONH8JBKks5FWV2s/hu/uGupY/pZBUwKleTbIzNT/k0LZRF1yoQhjhVrOvVc93ElOpzWnxZpIQQQ6OsqMVq/3s20CfdCCAAA9JIb9gROYBxbOFYAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-diaper.236e3240.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABvklEQVRo3u2ZO0sDQRSFv1lFfGBg7SysLC20T62CIFb+D8EmhWUsxf+hpYUEtRBMZyCFQewCihZGQuIjMdmZa2MKQx6smSVZMqe9LHPPnHP37OyAg4NDrKHCPiCZnSW0OUaxAczbbki+azSKBUz5FXTwLnClIZVI8zAwAcnsLGFMHliIYjflu0Y9f40EzfZSWQmrs4c8the8UCtocxxV8wCNYqFT8wC+eBx1KnghDbcRpZ9N+bWHPGwOTiACz//pUQe9ygkbBEYOjsCwMTlKzcylw+eSFQJB4SzcoivbzkJWFbC5o3GagReEHErlEJPDm7qNm4WmUfggPuBDc2FoCvQb4i4W84EkkEQpkP99HY/KEGdR3vpYDvGoKJBEzIXLAZfELomjVkCbZZTaA7LxPA9MejMIv8kZRwsJd63ItJDEbohdErszMbwAN6Au0frSKTAELAK7ILtMeP86D3Qk8HnQ4V0JfGXPBup2Nrnthng8CCh4j2KxPn+fK9YICFxFQcBUSr3KGWsENKSAsm0CzeJ9txuYNyTYt0YgkeZBCasoToGqNQVqH9Tz1+jSc8tOVeAECdbU1vkTDg4O44cfoDWTjXIjQSwAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-babies.a7fc62df.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAACTklEQVRo3u2Zz2sTQRzFPzO7KbSaUkOjUAwIFQsipDnlD6hEqQd/FEoPFSke9FSkXuJJ8NZDTHuu1EtCxYL2YH9Y2j/AWw+5LNaTEay/ohUvNrvroWlcY6KB3U1SMu+0OzM7M2/ee18WBhSaC+HHpKmFpYhmmWlskSg1bWBr9+5cv2y0PIHUwlJEM60tIFTR9UViRyfHR/Jerie9JqBZZhoICVi2zOJJiR0BVoGQhXjo9XqeEziwjcC+PXVj9N3k+Eje1OStUu8Fr5fT6xmUGJuIIGXaQiQEBA/aLw0P1/zm/cdPUSAPsLPzIdbX2wvQPZN5ZleOXV5Z+c0fvoPY1KWZXMvMG64zkBibiNhSq+bpfxLYK+79LBS+XisKoYV7ehYDut5Ra6yTgAMFYZnR9SeP37pTQMp0tc3/DwE90HE8HH7hwh3HbKmngFFXBEq2AWDmfpKzZ/rLfbPZ5574eD07V37OGdtMPZim3szIOjxW9rxz8wBHuzpdbz5YMce5gdPOitDtaxUaisdckQh2dTIUj/lfhWrhVN8Jbl692NRfCckhhyLQbOheTfTjfPyP9yMbr/4as2W8qfrt4EC/UqAhcHPSvhCotE2tvmp2OpQKqAyoDFTA6e16yqjKgMpAnXZqZAbaW4Fanm5kdWpvBfzwtFJAZUBlQCmgMqAy0FYKKAItT2D/zmofOWPb9w3ljNfO128ehFhsgn0FcN6cNAaCl64V0KWZBApNcMdnHe66JrCWmTeEZUZBLILYbcCx7yJ4qgsGV7OP8ii0OH4Bz96jqU9mE24AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-morningreminder.9cb15f85.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-announcement.b546f363.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABqUlEQVRo3u2Zu1LDMBBF7zJ0JC215Zq/YgYGjKHkzSQhEEogWG7gq+jjPq1My1IkgUxwg61dO4PvB3jO0eqxkoE2bdq0+XOYySRubKyLqn6KaoFP8zGACAADiLPDblL2cxvq8DZ/nsMvBrBSJTbVR56wCksE7DS7AjP4p6WRX87rZNqJmiswmzaPAOIi+Gza2UePPhsrEKYfIxCOJeDFd6HQ5g8MPpWCF61AkOQjaXixXSiw+T2Bz6ThRabQHP5cA967gLHuDsCFFrzXNWBSN9SG91YBk7ohGJfa8F4EjHW3AK7qgK88hUziBnXCV6qASdwAhOs64UtXILSu3wT4UgJh4noM3DQB3nMrQfq3u7JrILSuX1wFesumW3uaVRBYxLoSlcreBAnBg0xHQriVkJfwtnPUJaHUTstJKF5oZCREDh9NCbHTM0jyEVHRvdivRE3PKv4kxPsXaQn5BmzxtFj4OlddQqeD/HncjX1L6LxOE3F20DkBUPAjg3fD7XwNfnDMJGIwXlYNwHhv9hT6PZ2+fzER42gSdS3WKswUWGeD1O2jTZs2/ztfAkobJARJpfUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABwklEQVRo3u1ZQVLCQBDs4Rxz9UryBat8EQIJRakIeOUqImBhElT8kW9gveIR9sx4pYRAyiRbEyt93UrSne6ZnWyAEiVKFBqU9gZOuK6B6FKtrCYGtC2UACdc1wB6BVABsFDfVsO0iEpG5AGg5pzrOZipEAIIdLF3PePKifTMpIi/P4iZnEjPALQOrL4pz2qCiGUXsQARlXTyiZVntQEEB1br7lxP8o5TJb2H8SKYce1Geix6H0gSJwKmS//sVqYDSZwAbqrReizbgQROMPHky7M7sgWc7E48Vr59Jy9CibsTdZxgPZLtQBInmJ9Uy+7KFnA6TiPl2z15EUoep64T6qFsBxI5QY/Kt/oyHUjkBPfcSD/IFnBy7OC+G2wGsgXsfEwUo40eqoO5fgHD3zeHhkvPupddxDHk0xQxFZm8mRo4Sp5HacibGSXiyIsfJQyQz3ecjo9NpuM0mSQv/4PGMPlsu9CxTQqY5kE+OwdOkM/rRCIbB46OB3heelYHOYLy6zZmjhapyORTRciNdBhDPjBFPpUAZv4EsP3l57vyrLYp8qkEqJb9Aeb6joiFWpl785mhGm0a1XATmv61VKJEiX+CH053J36ap3UTAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-plus-green.128442cf.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-plus-red.4fa4cf94.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACBklEQVRoge2Yyy4EQRSGvyEZKxazE3GJEFsmsRMLtzXhgWx4AIvBM7jMA1jyEojLIFbuFkRGWFThzJjqS1XXTEJ9SSWnp8+p8/9d09NdA4FAIPBXGQEugHNg2FeTNl8TA4tAL9APLPlq4tNAXsQdvpr4NNAUgoFWEwy0mmCg1fwLAwPAJnAJVIGPBuMFWEnRd1XXNJqrqnttoJ7iTswBT4ZG9eO5rnZZnFsWn+d0bpI5H4GZKIFRKzAAbAOdkRYVr8Bagjy0sDVdE0cXsAP0JZy7hk1+rsQpMEXt+00cphWIIw9MA2eifj1F/TeXYoIpi3pbA19Mi/qKKSnqK9Qt4gMLAa7si7jHlBRloF3Eb85y0iN7tpuS/sVzII5B4Bg4AYoJ8os6t0IGW80sDMwDQygje0SbKOqcQdRP44Jr8ywM7AJ3Oi6gBI41yBvT5wr6+A7YyqC/EflEjKMI3Ir8W6AsjssNzif5uqXR4Fw8Ctzw+3WgftwD4540OBfHmUgj3laDc7HJRFrxLhqci+tN2Ih31eBWjLpJj4BDkt2wVhpyMcVJ8nwSq+FPv0q8izjNPiArZM93U1KUgWsRTzjLSc+kiK9sJtjg5wY6Q+1Nm7ESeWCW2h1ZyWaiftSmOsnm2+d4wHJPDOqqt9LEA2pr6UQfagkrmP8XynJUda8SDlc+EAgEmsMnirAThvyxHLsAAAAASUVORK5CYII=\""],"sourceRoot":""}