{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/teacher/modal.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Toast } from 'native-base';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport WellnessForm from \"./wellnessform\";\nimport { sendWellnessData, formatDate } from \"../util\";\nimport { markPresent, sendWellnessDataFail } from \"../../redux/school/actions/index\";\nimport StudentModal from \"./studentmodal\";\nimport TeacherModal from \"./teachermodal\";\n\nvar Modal = function (_React$Component) {\n  _inherits(Modal, _React$Component);\n\n  var _super = _createSuper(Modal);\n\n  function Modal(props) {\n    _classCallCheck(this, Modal);\n\n    return _super.call(this, props);\n  }\n\n  _createClass(Modal, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          show = _this$props.show,\n          student_id = _this$props.student_id,\n          teacher_id = _this$props.teacher_id,\n          students = _this$props.students,\n          unmarked = _this$props.unmarked,\n          absent = _this$props.absent,\n          teacherOnDuty = _this$props.teacherOnDuty,\n          class_id = _this$props.class_id,\n          school_id = _this$props.school_id;\n\n      if (!show) {\n        return null;\n      }\n\n      var student = students[student_id];\n      return React.createElement(KeyboardAvoidingView, {\n        style: {\n          backgroundColor: 'transparent',\n          justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        },\n        behavior: \"height\",\n        enabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 7\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          backgroundColor: 'rgba(0,0,0,0.8)',\n          width: '100%',\n          height: '100%'\n        },\n        onPress: this.props.hideModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      })), student_id !== '' ? React.createElement(StudentModal, {\n        student_id: student_id,\n        teacherOnDuty: teacherOnDuty,\n        class_id: class_id,\n        school_id: school_id,\n        fetchStudentAttendance: function fetchStudentAttendance() {\n          return _this.props.fetchStudentAttendance();\n        },\n        hideModal: this.props.hideModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }) : React.createElement(TeacherModal, {\n        teacher_id: teacher_id,\n        teacherOnDuty: teacherOnDuty,\n        navigation: this.props.navigation,\n        fetchTeacherAttendance: function fetchTeacherAttendance() {\n          return _this.props.fetchTeacherAttendance();\n        },\n        hideModal: this.props.hideModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }\n      }));\n    }\n  }]);\n\n  return Modal;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  thumbnailImage: {\n    width: 200,\n    height: 200,\n    borderRadius: 100\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    students: state.school.students,\n    isConnected: state.classInfo.isConnected\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return _objectSpread({}, bindActionCreators({\n    markPresent: markPresent,\n    sendWellnessDataFail: sendWellnessDataFail\n  }, dispatch));\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/modal.js"],"names":["React","Toast","connect","bindActionCreators","WellnessForm","sendWellnessData","formatDate","markPresent","sendWellnessDataFail","StudentModal","TeacherModal","Modal","props","show","student_id","teacher_id","students","unmarked","absent","teacherOnDuty","class_id","school_id","student","backgroundColor","justifyContent","alignItems","zIndex","position","width","height","hideModal","fetchStudentAttendance","navigation","fetchTeacherAttendance","Component","styles","StyleSheet","create","thumbnailImage","borderRadius","mapStateToProps","state","school","isConnected","classInfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate } from '../util'\nimport { markPresent, sendWellnessDataFail } from '../../redux/school/actions/index'\nimport StudentModal from './studentmodal'\nimport TeacherModal from './teachermodal'\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  // async handleSend(record_id) {\n  //   const { wellness, class_id, isConnected } = this.props\n  //   const { records } = wellness\n  //   const record = records[record_id]\n  //   if (record.temperature === '') {\n  //     Alert.alert(\n  //       '未填寫!',\n  //       '',\n  //       [{text: 'OK'}]\n  //     )\n  //     return\n  //   }\n\n  //   if (!isConnected) {\n  //       Toast.show({\n  //           text: '拍謝 網路連不到! 等一下再試試看',\n  //           buttonText: 'Okay',\n  //           position: \"top\",\n  //           type: \"warning\",\n  //           duration: 2000\n  //       })\n  //   }\n\n  //   const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n  //   if (sendDataResult.success) {\n  //     sendDataResult.data.forEach(student_id => {\n  //       this.props.markPresent(student_id, new Date)\n  //     })\n  //   } else {\n  //     this.props.sendWellnessDataFail(sendDataResult.message)\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id, school_id } = this.props\n    if (!show) {\n      return null\n    }\n    const student = students[student_id]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        behavior='height'\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={this.props.hideModal}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        {student_id !== '' ?\n          <StudentModal\n            student_id={student_id}\n            // teacher_id={teacher_id}\n            teacherOnDuty={teacherOnDuty}\n            class_id={class_id}\n            school_id={school_id}\n            // unmarked={unmarked}\n            // absent={absent}\n            fetchStudentAttendance={() => this.props.fetchStudentAttendance()}\n            hideModal={this.props.hideModal}\n          />\n          : <TeacherModal \n              teacher_id={teacher_id}\n              teacherOnDuty={teacherOnDuty}\n              navigation={this.props.navigation}\n              // class_id={class_id}\n              // unmarked={unmarked}\n              // absent={absent}\n              fetchTeacherAttendance={() => this.props.fetchTeacherAttendance()}\n              hideModal={this.props.hideModal}\n            />\n        }\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.classInfo.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)"]},"metadata":{},"sourceType":"module"}