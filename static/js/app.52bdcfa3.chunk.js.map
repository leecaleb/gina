{"version":3,"sources":["assets/app-splash.gif","assets/icon-bookmark.png","assets/icon-delete.png","assets/icon-teacher-thumbnail.png","assets/icon-back.png","assets/icon-forward.png","assets/icon-qr.png","assets/app_logo.png","assets/icon-checked.png","assets/icon-plus.png","redux/school/reducers/classInfo.js","redux/school/reducers/attendance.js","redux/school/reducers/appetite.js","redux/school/reducers/sleep.js","redux/school/reducers/healthstatus.js","redux/school/reducers/milk.js","redux/school/reducers/diaper.js","redux/school/reducers/message.js","redux/school/reducers/school.js","redux/school/reducers/index.js","redux/school/reducers/medicationrequests.js","redux/school/reducers/water.js","redux/school/actions/index.js","components/teacher/loginnumberpad.js","variables.js","components/util.js","components/teacher/attendancecard.js","components/teacher/medicationrequestcard.js","components/reloading.js","components/teacher/pickupalert.js","components/picker.js","components/teacher/wellnessform.js","components/teacher/studentmodal.js","components/teacher/teachermodal.js","components/teacher/modal.js","components/teacher/inboxcard.js","components/teacher/absencecard.js","components/parent/timemodal.js","components/teacher/teacherhome.js","components/teacher/schoolhome.js","components/teacher/teacherclockinout.js","components/teacher/logs/medrequestmodal.js","components/teacher/logs/medicinelog.js","components/teacher/logs/wellnesslog.js","components/header.js","components/teacher/logs/appetitelog.js","components/teacher/logs/sleeplog.js","components/teacher/logs/milklog.js","components/teacher/logs/pootextinput.js","components/teacher/logs/pooentry.js","components/teacher/logs/diaperlog.js","components/teacher/admin/adminhome.js","components/teacher/admin/announcement.js","components/teacher/admin/registernewstudents.js","components/teacher/admin/registerparents.js","components/teacher/admin/registration.js","components/teacher/admin/modal.js","components/teacher/admin/editstudentprofile.js","components/teacher/admin/addparent.js","components/teacher/admin/qrpage.js","components/teacher/admin/students.js","components/teacher/admin/addteacher.js","components/teacher/admin/editteacher.js","components/teacher/admin/teachers.js","components/modal.js","components/form.js","components/teacher/messageforparents.js","components/teacher/attendancepageW.js","components/teacher/inbox.js","components/teacher/admin/downloadpage.js","components/teacher/admin/downloadteacherattendance.js","components/teacher/admin/announcementhome.js","components/teacher/admin/addannouncementpage.js","redux/transforms.js","components/teacher/schoolapp.js","components/auth/signin.js","components/auth/signup.js","redux/parent/reducers/index.js","redux/parent/reducers/parent.js","redux/parent/reducers/attendance.js","redux/parent/reducers/inbox.js","redux/parent/actions/index.js","components/parent/wellnesscard.js","components/parent/appetitecard.js","components/parent/milkcard.js","components/parent/sleepcard.js","components/parent/restroomcard.js","components/parent/messagecard.js","components/parent/parenthometitle.js","components/parent/profileselector.js","components/parent/qrpage.js","components/parent/medicinerequestcard.js","components/parent/morningremindercard.js","components/parent/announcementcard.js","components/parent/attendancecard.js","components/parent/mainmenu/mainmenu.js","components/parent/parenthome.js","components/parent/medicinepowderform.js","components/parent/medicinesyrupform.js","components/parent/medicinecreamform.js","components/parent/medicationrequestmain.js","components/parent/medicationrequestpage.js","components/parent/absenceexcuse.js","components/parent/absenceexcusepage.js","components/parent/pickuprequest.js","components/parent/addmedicationrequestpage.js","components/parent/announcementpage.js","components/parent/parentapp.js","components/auth/confirmsignup.js","components/auth/authloading.js","configuration/aws-cognito-auth.js","App.js","assets/icon-checked-box.png","assets/icon-unchecked-box.png","assets/icon-thumbnail.png","assets/icon-medication-powder.png","assets/icon-medication-syrup.png","assets/icon-medication-gel.png","assets/icon-medication-pill.png","assets/icon-snowflake.png","assets/icon-wellness.png","assets/icon-appetite.png","assets/icon-milk.png","assets/icon-sleep.png","assets/icon-diaper.png","assets/icon-message.png","assets/icon-babies.png","assets/icon-medrequest.png","assets/icon-morningreminder.png","assets/icon-announcement.png","assets/icon-attendance.png","assets/icon-plus-green.png","assets/icon-plus-red.png","assets/icon-download.png"],"names":["module","exports","initial_state","class_id","passcodeTeacherId","teachers","students","isConnected","errMessage","initialized","present","Set","absent","unmarked","attendance","initialState","loaded","fruit_name","ratings","updatedStudents","err_message","data_dispatched","by_student_id","records","by_id","all_id","errorMessage","newDataForCreate","oldDataForEdit","records_with_error","record_id_for_update","dataForRemoval","all_dispatched","data_to_update","new_data_for_create","old_data_for_edit","message_by_student_id","for_all","text","student_id_for_update","parent_messages","classes","pick_up_request","admin_passcode","viewing_status","passcodeAdminId","teacherOnDuty","student_present","student_absent","student_unmarked","teacher_present","teacher_absent","teacher_unmarked","combineReducers","classInfo","state","action","newState","type","teacher_objs","forEach","teacher","name","passcode","logged_in","in_time","out_time","student","id","profile_picture","blood_type","address","home_phone","father_phone","mother_phone","conversation_id","data","attendance_obj","attendance_id","teacher_id","time","student_id","delete","excuse_type","medicationrequests","requests","unfinished","finished","new_unfinished","request_id","administered","i","length","push","appetite","Breakfast","Fruit","Lunch","Snack","mealType","rating","water_drank","slice","meal_type","student_id_array","Object","keys","add","students_to_display","newRatingObj","map","water","byId","includes","sleep","sleepData","index","sleep_time","record_id_array","record_id","setSeconds","removed","splice","found","has","new_record_id","size","wake_time","student_record_ids","removing_index","findIndex","element","healthstatus","len","temperature","status","wellnessData","student_id_list","record_id_list","new_id","Date","milk","milkData","amount","milk_type","milk_amount","date_time","record_id_index","indexOf","diaper","diaperData","cloth_diaper","pee_or_poo","condition","current_pee_or_poo","new_records","record","students_pending_amount_update","message","things_to_bring","other_item","activities","other_activity","message_data","items_to_bring_bool","item_to_bring","new_acitivities_bool","activity","messages","school","admins","updated_classes","admin_id","updated_teachers","attendance_array","total_minutes","updated_students","uri","old_class_id","new_class_id","new_student_id_array","image_url","initializeClass","rateAppetite","markPresent","markAbsent","initializeRequests","fillMedRequest","fetchAttendanceSuccess","markTeacherLoggedIn","markTeacherLoggedOut","clearRatings","setAllRatingsToGreat","setAllDrinkWater","addWellnessRecord","addHealthStatus","addTemperature","sendWellnessDataSuccess","sendWellnessDataFail","invalidateWellnessData","setSleepTime","removeSleepRecord","removeSleepRecordSuccess","removeSleepRecordFail","setWakeTime","removeWakeTime","editMilkAmount","editMilkTime","updateDiaperAmount","addDiaperRecord","editDiaperTime","switchPeeOrPoo","editPooCondition","removeDiaperRecordSuccess","removeDiaperRecordFail","clearDiaperlogErrorMessage","addMilkRecord","fetchClassAppetiteData","fetchClassWellnessData","fetchClassSleepData","clearPendingSleepUpdate","fetchClassMilkData","createDataSuccess","createDataFail","editDataSuccess","editDataFail","removeMilkRecordSuccess","removeMilkRecordFail","createSleepRecordSuccess","createSleepRecordFail","editSleepRecordSuccess","editSleepRecordFail","fetchClassDiaperData","createDiaperRecordSuccess","createDiaperRecordFail","editDiaperRecordSuccess","editDiaperRecordFail","editDiaperAmountSuccess","editDiaperAmountFail","removeRecord","clearState","setClassId","onSendAppetiteSuccess","alertErrMessage","clearAppetiteErrorMessage","addStudentIdForUpdate","markWaterDrank","markStaffAttendanceFail","writeToAll","writeToOne","remindItemsToBringToAll","remindItemsToBringToOne","recordActivitiesForAll","recordActivitiesForOne","writeItemToBringToAll","writeItemToBringToOne","writeActivityForAll","writeActivityForOne","fetchClassMessageData","alertSleeplogErrorMessage","clearSleeplogErrorMessage","editFruitName","fetchClassesSuccess","email","fetchTeachersSuccess","fetchStudentsSuccess","initializeStudentWellness","sendMessageOnSuccess","setConnectState","clearSchoolState","fetchTeacherAttendanceSuccess","fetchStudentAttendanceSuccess","editTeacherOnDuty","addPickupRequest","updateViewingStatus","updateProfilePicture","editStudentSuccess","updateTeacherProfilePicture","markRecordError","markRecordCorrect","getParentMessageSuccess","LoginNumberPad","props","number_array","handlePasscode","bind","num","this","setState","handleEnterPasscode","TouchableHighlight","style","backgroundColor","width","height","flex","justifyContent","alignItems","zIndex","position","underlayColor","onPress","hideLoginPad","borderRadius","flexDirection","margin","fontSize","fontWeight","paddingHorizontal","alignSelf","flexWrap","number","React","Component","connect","StyleSheet","create","button","minWidth","aspectRatio","class","dispatch","bindActionCreators","getEnvVars","env","undefined","Constants","manifest","releaseChannel","formatDate","date","getFullYear","getMonth","getDate","beautifyDate","beautifyMonthDate","formatTime","getHours","getMinutes","getSeconds","beautifyTime","formatHourMinute","get","endpoint","a","async","success","fetch","ENV","method","headers","Accept","then","res","json","resJson","statusCode","catch","err","result","post","body","JSON","stringify","put","delete_by_id","fetchData","child_id","start_date","end_date","query","console","log","fetchedData","fetchClassData","sendWellnessData","wellness_data","data_objs","normalize","request_body","fetchResult","AttendanceCard","selected_student_ids","attendance_type","key","showModal","Text","View","paddingLeft","paddingTop","onSelectAttendanceType","textAlign","adjustsFontSizeToFit","handleOnClick","styles","cardContainer","Image","source","require","borderWidth","borderColor","footer","marginTop","paddingVertical","thumbnailImage","forwardRef","card","button_text","color","navigate","useNavigate","useEffect","d","alert","medication_requests","padding","ScrollView","horizontal","timestamp","medication","note","Reloading","ActivityIndicator","PickupAlert","timer","setTimeout","timeoutId","requestQueue","isLoading","onConfirm","navigation","goBack","Alert","clearTimeout","request","arrival_time","marginRight","PickerComponent","selectedIndex","Platform","OS","options","ActionSheet","show","cancelButtonIndex","buttonIndex","handleSelectValue","selectedValue","textStyle","disabled","showSelect","WellnessForm","other_option","normalized_temperature","autoFocus","TextInput","outline","keyboardType","placeholder","value","onChangeText","temp","handleTempInput","handleSelectStatus","selectTextOnFocus","onBlur","Dimensions","StudentModal","getClassIdByStudentId","class_id_found","j","wellness","sendDataResult","fetchStudentAttendance","hideModal","school_id","startDate","endDate","response","handleSend","TeacherModal","clockout","clockin","Toast","buttonText","duration","fetchTeacherAttendance","setOptions","headerRight","paddingRight","editTemperature","Math","round","clock","Modal","KeyboardAvoidingView","behavior","enabled","InboxCard","ref","useState","denormalize","denormalized","message_for_teacher","viewing_previous","toDateString","onGoBack","items_to_bring","message_read","morning_reminder_read","messageIsRead","class_students","showLoginNumberPad","TimeModal","onChange","isWeekday","special_date","day","getDay","datetime","isIOS","iosSetDate","androidSetDate","selectDatetimeConfirm","datetime_type","minDatetime","maxDatetime","minTime","maxTime","inline","selected","minDate","maxDate","onClickOutside","showTimeSelect","showTimeSelectOnly","timeIntervals","timeCaption","dateFormat","button_row","marginVertical","record_button","wellness_dispatched","message_dispatched","appetite_dispatched","sleep_dispatched","milk_dispatched","diaper_dispatched","location","useLocation","refs","useRef","med_request","pageClicked","alertForPickup","pickupQueue","modalStudentId","modalTeacherId","isAdmin","appState","showDateTimeModal","initializeConnectionStatus","class_name","window","removeEventListener","navigator","onLine","setOnline","addEventListener","e","setOffline","poll","teacher_name","hasUnsentRecords","contentContainerStyle","paddingBottom","getTime","setDate","goBackADay","goForwardADay","fetchClassIdAndName","fetchTeacherData","fetchStudentData","class_data","getAdminId","teacher_id_array","school_name","loadAuth","Auth","signOut","handleSignOut","TeacherClockInOut","logging_in","fetchStaffAttendanceByClassId","clockOut","clockIn","staff_id","marginBottom","MedRequestModal","medicated_time","showTimePicker","thumbnail","student_name","fever_entry","before_meal","gel","other_type","powder","powder_refrigerated","syrup","marginHorizontal","entry","need_refrigerated","marginLeft","useParams","refreshing","selected_request_id","medicated_timestamp","handleShowRequest","handleFulfillRequest","current_request","refreshControl","RefreshControl","onRefresh","tintColor","title","titleColor","colors","progressBackgroundColor","need_refrigeration","needRefrigeration","Box","childThumbnail","subHeading","show_record","propsDate","hasUnsentRecord","has_unsent_record","keyboardVerticalOffset","cardBody","foodButton","mealButtons","mealButtonText","selectedForCustomize","editingFruitType","students_with_records","display_all_students","appetiteData","handleRateFoodWellness","isRatingCustomized","appetite_log","b_rating","f_rating","l_rating","s_rating","obj","onLongPress","fruitNameEditorOnBlur","new_students_to_display","addStudentToDisplayList","reverse","meal_rating","onClickOther","maxLength","customized_text","onCustomizeRating","customizedRatingOnBlur","showIOSDatePicker","recordType","confirmDelete","checkLastRecord","n","last_record_id","last_record","last_second_record","setTime","start_time","checkRecord","prev_record_id","next_record_id","prev_record","next_record","createRecord","status_code","createSleepRecordRes","editRecord","editRecordRes","updateReducerTime","current_sleep_time","current_wake_time","confirmToRemoveWakeTime","confirmToRemoveRecord","TeacherMilkLog","handleOnAddRecord","route","params","handleRemoveRecord","handleRemove","handleCreate","handleCreateRes","handleEdit","handleEditRes","createDataRes","editDataRes","checkUnsent","handleEditMilkAmout","textRef","isFocused","onEndEditing","PooEntry","selected_other","poo_condition","diaper_records","DiaperLog","show_time_picker","record_id_for_edit","removeDiaperRecord","createRecords","create_records_result","Promise","all","Array","from","createRecordsRes","keyboardShouldPersistTaps","confirmRemove","mode","display","event","minimumDate","AdminHome","handleNavigate","pageName","selected_all_classes","selected_classes","class_id_list","announcements","page_number","announcement_on_display","is_loading","unread_list","read_list","show_more","announcement","fetchMostRecentAnnouncement","fetchReadStatusByAnnouncementId","separateReadUnread","read_status","deleteAnnouncementById","confirm","overflow","links","link","WebBrowser","url","photo_url_arr","RegisterNewStudents","studentDataArray","found_class_id","addStudent","borderBottomWidth","borderBottomColor","setName","setBloodType","removeStudent","handleSelectClass","RegisterParents","parentDataArray","username","password","role","mobile","work_phone","transportation","parentSignUpStatus","nativeEvent","toLowerCase","signUp","attributes","values","addParent","parent","Picker","onValueChange","itemValue","itemIndex","setRole","Item","label","removeParent","autoCapitalize","setEmail","setUsername","secureTextEntry","setPassword","handleSignup","disable","Registration","createFamilyProfileStatus","all_parents_signed_up","getParentSignUpStatus","getParentDataArray","getStudentDataArray","error","createFamilyProfile","component","modal_padding","EditStudentProfile","parents","borderStyle","editStudentData","AddParent","qr_data","parent_data","signUpParent","editable","viewQRCode","postParent","QRPage","name_prefix","Students","getPermissionAsync","Permissions","_pickImage","ImagePicker","mediaTypes","All","allowsEditing","aspect","quality","base64","cancelled","getProfilePictureURL","modal_type","image","path","getMilliseconds","deleteStudentById","getModalContent","max","pageY","confirmDeleteStudent","AddTeacher","postTeacher","EditTeacher","getClassIdByTeacherId","Teachers","selected_teacher_id","deleteTeacher","confirmDeleteTeacher","content","Form","labelStyle","inputStyle","input","to_all_message","activities_list","activities_bool","editingOtherItemToBring","editingOtherItemForStudent","editingOtherActivity","editingOtherActivityForOne","growth_standard_by_student_id","show_growth_standard","dob_year","dob_month","dob_date","messageData","selected_index","new_bool","normalized_data","fetchParentPreviousDayMessage","handleEndEditing","weight","hc","sendGrowthStandardData","sendGrowthStandardDataRes","messate","weight_percentile","height_percentile","hc_percentile","head_circumference","showDOBModal","show_dob_modal","student_id_dob_edit","borderLeftWidth","editDOB","showGrowthStandard","item","trim","otherItemForAllEditorOnBlur","otherActivityEditorOnBlur","multiline","confirmRecord","editItemToBringToOneEditorOnBlur","activityForOneEditorOnBlur","borderTopWidth","borderRightWidth","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","display_list","students_or_teachers","selected_class_id","teacherClicked","selectPersonType","selectAttendanceType","attendanceType","all_id_list","selectClass","person_id","person","messages_read","showDateModal","sortMessages","bubbleDown","message_id","left_pointer","morning_reminder_id","refresh","morning_reminder","read","markRead","fetchAnnouncements","AddAnnouncementPage","images","sendLoading","new_selected_classes","update_page","selectAllClasses","handleChangeLinkText","handleChangeUrl","handleDeleteUrl","handleAddLink","removeImage","postAnnouncement","SetTransform","createTransform","inboundState","outboundState","whitelist","SetMessageTransform","SetAppetiteTransform","SetSleepTransform","persistConfig","storage","transforms","persistedReducer","persistReducer","reducer","store","createStore","persistor","persistStore","SchoolApp","loading","exact","Signin","user_type","signIn","user","challengeName","completeNewPassword","code","changeAuthState","container","textInput","pass","handleSignIn","responseJson","setUserRole","child_of_id","med_requests","child","days","1","2","3","4","5","inbox","current_conversation_id","conversations_by_id","most_recently_read_message_id","initializeChildren","getMedRequestSuccess","editProfilePicture","WellnessCard","prevProps","updateTitleTemp","AppetiteCard","breakfast","fruit","lunch","snack","denormalizeAppetiteData","today","breakfast_rating","fruit_rating","lunch_rating","snack_rating","parseData","data_string","water_drunk","parseInt","MilkCard","milkIntakeData","SleepCard","hours","minutes","RestroomCard","MessageCard","data_available","scrollHeight","fetchMessageData","setScrollHeight","propDate","items_list","sendMessage","parent_id","threshold","setHours","before4am","prev_day","scrollEnabled","target","onLayout","TouchableOpacity","showMessageForTeacher","ParentHomeTitle","replace","layout","selectOtherChildProfile","opacity","ProfileSelector","showSelector","SlideInRight","Animated","Value","useImperativeHandle","slideIn","timing","toValue","useNativeDriver","start","windowWidth","student_of_id","transform","translateX","interpolate","inputRange","outputRange","onSelectStudent","hideQRCode","MedicationRequestCard","get_todays_requests","object_array","viewMedRequest","afterFive","MorningReminderCard","reminder_read","milk_timestamp","diaper_timestamp","diaper_type","showDateTimeModalType","includeMilkIntake","includeDiaper","setIsLoading","fetchMorningRecordData","showTimeModal","onFocus","reminder","AnnouncementCard","fetchAnnouncement","onClick","viewMore","viewAnnouncement","inTime","setInTime","outTime","setOutTime","excuseType","setExcuseType","absenceTime","setAbsenceTime","fetchAttendanceByStudentId","absence_time","MainMenu","onItemClick","showQR","showMainMenu","checkAttendance","setCheckAttendance","setShowTimeModal","setShowDateTimeModal","AppState","currentState","morningReminderRef","profileSelector","_handleAppStateChange","checkStudentAttendance","tomorrowHasClass","setMonth","isSpecialDate","setDatetime","nextAppState","current","match","current_student","studentIsPickedUp","studentIsAbsentAllDay","selected_student","day_difference","end","getDayDifference","onMenuItemClick","onHide","MedicinePowderForm","藥粉","onCancelSelect","onFinishEdit","MedicineSyrupForm","藥水","MedicineCreamForm","藥膏","area","optionButtonWidth","optionButtonHeight","show_date_picker","show_editor","access_mode","iosSetTime","androidSetTime","medicine_type","medicine_data","sendRequest","onCreateRequestSuccess","deleteRequest","onDeleteRequestSuccess","getHeader","powder_amount","syrup_amount","cream_area","placeholderTextColor","deleteRequestConfirm","handleClickConfirmButton","tomorrow","SlideInLeft","total_height","total_width","left","top","day_of_week","selected_request_index","fetchMedicationRequest","SectionList","sections","keyExtractor","renderItem","section","renderSectionHeader","AbsenceExcuse","max_date","cached_date","childIsSick","editing_other_option","months","showStartDatePicker","setShowStartDatePicker","showEndDatePicker","setShowEndDatePicker","setShowSelect","fetchAccessMode","duplicateDateFound","iosSetStartDate","androidSetStartDate","checkUniqueStudentDate","iosSetEndDate","androidSetEndDate","sendAbsenceNote","editAbsenceNote","setStartDate","setEndDate","option","editorOnBlur","abs","textAlignVertical","dateContainer","absenceExcuse","todays_date","fetchAbsenceExcuse","selectRequest","selected_request","showsHorizontalScrollIndicator","new_request_index","deleted_request_id","updated_requests","provided_times","hightlighted_colors","choose_other_option","minute","setMinutes","time_array","time_selected_index","date_array","date_selected_index","switchRequest","handleDateSelected","updated_date_array","handleTimeSelected","updated_time_array","normalizedData","onClickConfirm","removeDate","removeTime","onSelectSyrup","editSyrupAmountEntry","editSyrupRefrigerationEntry","editSyrupNoteEntry","removeSyrupEntry","blurOnSubmit","onSelectFeverSyrup","editFeverSyrupAmountEntry","editFeverSyrupRefrigerationEntry","removeFeverSyrupEntry","cancelEdit","announcement_id","selected_announcement","ParentApp","basename","ConfirmSignUp","confirmCode","confirmSignUp","getCurrentUser","caretHidden","fill","charAt","rounded","YellowBox","ignoreWarnings","AuthLoading","Font","currentAuthenticatedUser","awsCognitoAuth","identityPooId","region","userPoolId","userPoolWebClientId","Amplify","configure","cognito_auth","App","_cacheSplashResourcesAsync","gif","Asset","fromModule","downloadAsync","_cacheResourcesAsync","cacheImages","isAppReady","isSplashReady","defaultProps","allowFontScaling"],"mappings":"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","file":"static/js/app.52bdcfa3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/app-splash.ed2a7dfb.gif\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsSAAALEgHS3X78AAACi0lEQVR42u3dsWsTYRjH8d97aRKJ6eDkIlXBScFFN3GzLnYNiBQjaSp0UJdi1+Cklg6KUi2xia0VJGPbRVcdHVx0ERRxcXIoSnqX3ONQERRbWk3Svtfv9w9ILve5e98ny51EREREREREtJtyvfqi1dHiMddWWaZBOR2StHeHnYtvMn1UoOcWB9VsrfY2EQBWKGSifG5KTmOSUp5cmG1J99N92XE3MxN5C2CFQibqzy1LOuPl+mB6kU5nz3UTIejm8Uf53JS3J3/t8hyMonDSyzvg55r/xqNlZ71aFsTHs9X5d17dAa7lRhNw8iWpz8Wpsn9LkLPB5AyLdtbHPWAgQeP6QR8B8gkC6PdyCiIAACAAACAAACAAACAAACAAACAAACAAACAAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACgt5lJS052WoFOSjavtUfOe1efZ8cbSvbMLHXzjxcsXGyODN8ILHVF0mVJe3z5QV17enpYKloHP25FUq0VtCZz1YXPG94a5fL+MG6NOdlVSfs6dQCZ2cduNwJ8MbkHmWx4x00//bqlNapU6o9cq+TMjZt0AICt9V7O7qXbwUNXrzf/a7NYe4vHeUkTko7uNICdtge8lnQ3vfJ9wTUaHdlUXaMRSpozaX515NJQYDYh6RSb8O8TzXIgu5WenXvZxc3O9Ki+KGkxLBdPKLZrkrugbX7JxHYuQetNND2rOTJ8ZLOTU5L2gE1PND27BTcxOSUB4J8nmp5BbDA5+QzQsYmmZxB/mZx8nIJexdLt7MDhJVepxD793f41OVUqT1Y/fRgKpOsiIiIiIiIiog70A/W73/uabAUFAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4UlEQVRo3u2YvUvDQBiHf++dGYuLoKJDB4sfuCnEDmprrX+0iikiqOAoOOioUKxLzeAHvTsXBZHY3CXvRcX7jcnl8jzJm+TNASEhISEhIZZJO/HKsBs3fM0/bDUX0k684nKMsB34uLe2RDCHUpvjdHdjmR2+GzekVD2CSdK99VXb48gWXih5BGD2fVPfkNipHZ5dscFrkwCYe990b6Tu1PYvLksLZMCDUyIDHi4SuSUUvUbPAF4yds2Q0UdlymkMPABo6AnFUkJPrY26kjoBUM/YXehO5MBbz0m2J+SU4IJ3EuCS4IR3FigrwQ1fSKCohA/4wgKuEr7gSwnYSmgyI1/wpQVyJQgDGGgA0z7gWQQs7gR8wbMJOEqw9lFsAh8SI6lPKLveYYAHkNjigndqp23yGplIGMhKrha3wMer0hBmxgybKtsAerkoOe95r8+B8ApvMADQ99GKswjkfmGF2FZKbgK49SVB3uA/txKt5oKUKgEw/ytaiSK9jS8JqgLepwRVBf9FosfV3Ikq4QFgsnd6owS1AdxxPNhUJfyP/NT7/BnhmDu3hGikxDfjSn9NJw/Or8eUk4AYSZ6lxfb6ohAi+ZNLixkSxAmfIRHZwjvH+/J6N264Lq+HhISEhPzvvAH4usfGrPqHIQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/icon-teacher-thumbnail.9b4e21e6.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABqUlEQVRo3u2Zu1LDMBBF7zJ0JC215Zq/YgYGjKHkzSQhEEogWG7gq+jjPq1My1IkgUxwg61dO4PvB3jO0eqxkoE2bdq0+XOYySRubKyLqn6KaoFP8zGACAADiLPDblL2cxvq8DZ/nsMvBrBSJTbVR56wCksE7DS7AjP4p6WRX87rZNqJmiswmzaPAOIi+Gza2UePPhsrEKYfIxCOJeDFd6HQ5g8MPpWCF61AkOQjaXixXSiw+T2Bz6ThRabQHP5cA967gLHuDsCFFrzXNWBSN9SG91YBk7ohGJfa8F4EjHW3AK7qgK88hUziBnXCV6qASdwAhOs64UtXILSu3wT4UgJh4noM3DQB3nMrQfq3u7JrILSuX1wFesumW3uaVRBYxLoSlcreBAnBg0xHQriVkJfwtnPUJaHUTstJKF5oZCREDh9NCbHTM0jyEVHRvdivRE3PKv4kxPsXaQn5BmzxtFj4OlddQqeD/HncjX1L6LxOE3F20DkBUPAjg3fD7XwNfnDMJGIwXlYNwHhv9hT6PZ2+fzER42gSdS3WKswUWGeD1O2jTZs2/ztfAkobJARJpfUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABwklEQVRo3u1ZQVLCQBDs4Rxz9UryBat8EQIJRakIeOUqImBhElT8kW9gveIR9sx4pYRAyiRbEyt93UrSne6ZnWyAEiVKFBqU9gZOuK6B6FKtrCYGtC2UACdc1wB6BVABsFDfVsO0iEpG5AGg5pzrOZipEAIIdLF3PePKifTMpIi/P4iZnEjPALQOrL4pz2qCiGUXsQARlXTyiZVntQEEB1br7lxP8o5TJb2H8SKYce1Geix6H0gSJwKmS//sVqYDSZwAbqrReizbgQROMPHky7M7sgWc7E48Vr59Jy9CibsTdZxgPZLtQBInmJ9Uy+7KFnA6TiPl2z15EUoep64T6qFsBxI5QY/Kt/oyHUjkBPfcSD/IFnBy7OC+G2wGsgXsfEwUo40eqoO5fgHD3zeHhkvPupddxDHk0xQxFZm8mRo4Sp5HacibGSXiyIsfJQyQz3ecjo9NpuM0mSQv/4PGMPlsu9CxTQqY5kE+OwdOkM/rRCIbB46OB3heelYHOYLy6zZmjhapyORTRciNdBhDPjBFPpUAZv4EsP3l57vyrLYp8qkEqJb9Aeb6joiFWpl785mhGm0a1XATmv61VKJEiX+CH053J36ap3UTAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVR42u1bbW7CMAx9TIhb7CKM/R87yI4y2BF2HWgvsgLHoPuTSihLGtv5aNP5SREsJHbixvZzYIBCoVAoFC5sAHwBuAHoK21XAEezFzaOFW/cbgeJAa5m8rbiU7x7OAlsDNarHaP7ePrvgU4NIJjzDqAjBJ4OwP5hXusY03g+bxLoy+Y7lMUM7cchz24Dzg99pwT6omOZbyJVoD0u9HdsMBatV2NAAhk+3+WejJ4oh6sveQwIbcA37sxkb7H6SC6wChjANcbu7z0y+4AOrnypvtF1pHCBxnrKuVFMX+os0FqL57pYlvWuCwbcreNJzrrWyEWExqK6K7jNjgjtjSLKYt4sfz2N6Ok9TFCqL5sBiparWg7PkAlKmVjI12PliJihxAB3z3tuFoAwn4/pfJnSN0P1PlVeK3yyxahwaDyE1JgqJ5a6Zw+CK4bRSsiZTRBcTBYIBUFuOcstb32xYnKCwq33OY3KIPsE+8jG0HLfAeqd4NRBkJq/Y+4AJbGiWBC8B8Y2Qga3Zcahaqo0btbQanAuMSD2uzpq/uZ+f9CmJmapr8So+ZvLEaLSYPLqSjBfGgOSGGC9IHdOfstMtWjLrP+lLpCbWUYfYeqRPAe4fujz6g2Q+oRSmWc2A/h+2TGFAWadBVx5OqavujTompeyr1g5fGHc7HQT1BIsSHjAB4BvAM+BcZ0ZO5anY/t2S6gGJz0hWg2qAfy4mdddxft7Na+in8sfsJx/mPiUGGBjjHCteOMXs/kNFAqFQqH4g1+9qDy6b2x6HAAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/app_logo.64014c13.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-checked.a824d7ff.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-plus.90bf87ac.png\";","const initial_state = {\n    class_id: '',\n    passcodeTeacherId: {},\n    teachers: {\n        /*\n        {teacher_id}: {\n            name: \"teacher_name\",\n            passcode: 33,\n            logged_in: false,\n            attendance_id: '',\n            in_time: '',\n            out_time: ''\n        }, {...}\n        */\n    },\n    students: {\n        /*\n        {student_id}: {\n            name: \"\",\n            profile_picture: \"\",\n            conversation_id; \"\",\n            blood_type: \"\",\n            address: \"\",\n            home_phone: \"\",\n            father_phone: \"\",\n            mother_phone: \"\"\n        }, {...}\n        */\n    },\n    isConnected: false,\n    errMessage: ''\n}\n\nexport default function classInfo(state = initial_state, action) {\n    const newState = { ...state }\n    switch (action.type) {\n        case 'SET_CONNECT_STATE': {\n            const { isConnected } = action\n            return {\n                ...state,\n                isConnected\n            }\n        }\n        case 'INITIALIZE_CLASS':\n            var teachers = {}, students = {}\n            action.teacher_objs.forEach(teacher => {\n                teachers[teacher[0]] = {\n                    name: teacher[1],\n                    passcode: teacher[2],\n                    logged_in: false,\n                    in_time: '',\n                    out_time: ''\n                }\n                state.passcodeTeacherId[teacher[2]] = teacher[0]\n            })\n            action.students.forEach(student => {\n                const { \n                    id,\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone, \n                    mother_phone, \n                    conversation_id } = student\n                students[id] = {\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone,\n                    mother_phone,\n                    conversation_id\n                }\n            })\n            \n            return {\n                ...state,\n                passcodeTeacherId: state.passcodeTeacherId,\n                teachers: teachers,\n                students: students\n            }\n        \n        case 'SET_CLASS_ID':\n            return {\n                ...state,\n                class_id: action.class_id\n            }\n    \n        case 'FETCH_ATTENDANCE_SUCCESS': {\n            const { data } = action\n            data.forEach(attendance_obj => {\n                const { attendance_id, teacher_id, in_time } = attendance_obj\n                newState.teachers[teacher_id] = {\n                    ...state.teachers[teacher_id],\n                    logged_in: true,\n                    attendance_id,\n                    in_time\n                }\n            })\n\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_IN':{\n            const { teacher_id, time, attendance_id } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: true,\n                in_time: time,\n                attendance_id\n            }\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_OUT':{\n            const { teacher_id, time } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: false,\n                out_time: time,\n                attendance_id: ''\n            }\n            return newState\n        }\n\n        case 'MARK_STAFF_ATTENDANCE_FAIL':\n            const {errMessage} = action\n            return {\n                errMessage\n            }\n        \n        case 'CLEAR_STATE':\n            return {\n                class_id: '',\n                passcodeTeacherId: {},\n                teachers: {},\n                students: {},\n                isConnected: false,\n                errMessage: ''\n            }\n        \n        default:\n            return state\n    }\n\n}","var initial_state = {\n    initialized: false,\n    present: new Set(),// student_A_id\n    absent: new Set(), // student_B_id\n    unmarked: new Set(),\n    attendance: {\n        /*\n        {student_A_id}: {\n            present: true,\n            in_time: [Date],\n            out_time: [Date]\n        },\n        {student_B_id}: {\n            present: false,\n            excuse_type: \"fever\"\n        }\n        */\n    }\n}\n\nexport default function attendance(state = initial_state, action) {\n    switch (action.type) {\n        // case 'INITIALIZE_CLASS':\n        //     var attendance = {}\n        //     var unmarked = new Set()\n        //     action.students.forEach(student => {\n        //         const { id } = student\n        //         unmarked.add(id)\n        //         attendance[id] = {\n        //             present: false\n        //         }\n        //     })\n        //     return {\n        //         ...state,\n        //         initialized: true,\n        //         unmarked: unmarked,\n        //         attendance: attendance\n        //     }\n\n        // case 'MARK_PRESENT':\n        //     // student_id, in_time\n        //     state.unmarked.delete(action.student_id)\n        //     return {\n        //         ...state,\n        //         present: new Set([...state.present, action.student_id]),\n        //         unmarked: state.unmarked,\n        //         attendance: {\n        //             ...state.attendance,\n        //             [action.student_id]: {\n        //                 present: true,\n        //                 in_time: action.in_time\n        //             }\n        //         }\n        //     }\n        \n        case 'MAKR_DISMISS':\n            return {\n                ...state,\n                attendance: {\n                    ...state.attendance,\n                    [action.student_id]: {\n                        ...state.attendance[action.student_id],\n                        present: false,\n                        out_time: action.out_time\n                    }\n                }\n            }\n        \n        case 'MARK_ABSENT':\n            // student_id, excuse_type\n            state.unmarked.delete(action.student_id)\n            return {\n                ...state,\n                absent: new Set([...state.absent, action.student_id]),\n                unmarked: state.unmarked,\n                attendance: {\n                    ...state.attendance,\n                    [action.student_id]: {\n                        ...state.attendance[action.student_id],\n                        excuse_type: action.excuse_type\n                    }\n                }\n            }\n    \n        case 'CLEAR_STATE':\n            return {\n                initialized: false,\n                present: new Set(),\n                absent: new Set(),\n                unmarked: new Set(),\n                attendance: {}\n            }\n        default:\n            return state\n    }\n}","var initialState = {\n    loaded: false,\n    fruit_name: '水果',\n    ratings: {\n        /*\n        {student_id}: { \n            Breakfast: 'Awesome0'\n            Fruit: 'Good0'\n            Lunch: 'Ok1',\n            Snack: 'Poor1',\n            teacher_id: ''\n        }, {...}\n        */\n    },\n    updatedStudents: new Set(),\n    err_message: '',\n    data_dispatched: true\n}\n\nexport default function appetite(state = initialState, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS': {\n            var ratings = {}\n            action.students.forEach(student => {\n                const { id } = student\n                ratings[id] = {\n                    Breakfast: '0',\n                    Fruit: '0',\n                    Lunch: '0',\n                    Snack: '0',\n                    teacher_id: ''\n                }\n            })\n\n            return {\n                ...state,\n                ratings\n            }\n        }\n        case 'FETCH_CLASS_APPETITE_DATA': {\n            const { fruit_name, ratings } = action\n            return {\n                ...state,\n                fruit_name,\n                ratings: {\n                    ...state.ratings,\n                    ...ratings\n                }\n            }\n        }\n\n        case 'EDIT_FRUIT_NAME': {\n            const { fruit_name } = action\n            return {\n                ...state,\n                fruit_name\n            }\n        }\n\n        case 'RATE_APPETITE':{\n            const { student_id, mealType, rating, teacher_id } = action\n            var { updatedStudents } = state\n            const water_drank = state.ratings[student_id][mealType].slice(-1)\n            if (rating !== '') {\n                updatedStudents = new Set([...state.updatedStudents, student_id])\n            }\n            return {\n                ...state,\n                ratings: {\n                    ...state.ratings,\n                    [student_id]: {\n                        ...state.ratings[student_id],\n                        [mealType]: rating + water_drank,\n                        teacher_id\n                    }\n                },\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n        \n        case 'CLEAR_RATINGS': {\n            const { meal_type } = action\n            const newState = { ...state }\n            const student_id_array = Object.keys(state.ratings)\n            const updatedStudents = new Set()\n            for (var i = 0; i < student_id_array.length; i++) {\n                const student_id = student_id_array[i]\n                if (state.ratings[student_id][meal_type] !== '0') {\n                    updatedStudents.add(student_id)\n                }\n                newState.ratings[student_id] = {\n                    ...state.ratings[student_id],\n                    [meal_type]: '0'\n                }\n            }\n            newState.updatedStudents = updatedStudents\n            newState.data_dispatched = false\n\n            return newState\n        }\n        case 'SET_ALL_RATINGS_TO_GREAT':{\n            const { students_to_display, mealType, teacher_id } = action\n            let updatedStudents = new Set([...state.updatedStudents])\n            var newRatingObj = {...state.ratings}\n            students_to_display.map((student_id) => {\n                updatedStudents.add(student_id)\n                const water_drank = state.ratings[student_id][mealType].slice(-1) === '1'\n                newRatingObj[student_id] = {\n                    ...state.ratings[student_id],\n                    [mealType]: water_drank ? '胃口佳1' : '胃口佳0',\n                    teacher_id\n                }\n            })\n            return {\n                ...state,\n                ratings: newRatingObj,\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n        \n        case 'MARK_WATER_DRANK': {\n            const { student_id, meal_type, teacher_id } = action\n            const updatedStudents = new Set([...state.updatedStudents, student_id])\n            const rating = state.ratings[student_id][meal_type]\n            const water_drank = rating.slice(-1) === '1'\n            return {\n                ...state,\n                ratings: {\n                    ...state.ratings,\n                    [student_id]: {\n                        ...state.ratings[student_id],\n                        [meal_type]: water_drank ? rating.slice(0, -1) + '0' : rating.slice(0, -1) + '1',\n                        teacher_id\n                    }\n                },\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n\n        case 'SET_ALL_DRINK_WATER': {\n            const { mealType, students_to_display, teacher_id } = action\n            const updatedStudents = new Set([...students_to_display])\n            var newRatingObj = {...state.ratings}\n            students_to_display.forEach(student_id => {\n                let rating = state.ratings[student_id][mealType].slice(0, -1)\n                rating = rating + '1'\n                newRatingObj[student_id] = {\n                    ...state.ratings[student_id],\n                    [mealType]: rating,\n                    teacher_id\n                }\n            })\n            return {\n                ...state,\n                ratings: newRatingObj,\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n\n        case 'CLEAR_UPDATED_STUDENTS':{ //NOT USED\n            return {\n                ...state,\n                updatedStudents: new Set()\n            }\n        }\n        case 'ON_SEND_APPETITE_SUCCESS':{\n            return {\n                ...state,\n                updatedStudents: new Set(),\n                data_dispatched: true\n            }\n        }    \n        case 'ALERT_ERR_MESSAGE': {\n            const { err_message } = action\n            return {\n                ...state,\n                err_message\n            }\n        }\n            \n        case 'CLEAR_ERR_MESSAGE': {\n            return {\n                ...state,\n                err_message: ''\n            }\n        }\n            \n        case 'ADD_STUDENT_ID_FOR_UPDATE': {\n            const { student_id_array } = action\n            return {\n                ...state,\n                updatedStudents: new Set([...state.updatedStudents, ...student_id_array]),\n                data_dispatched: false\n            }\n        }\n        \n        case 'CLEAR_STATE': {\n            return {\n                loaded: false,\n                fruit_name: '水果',\n                ratings: {},\n                updatedStudents: new Set(),\n                err_message: '',\n                data_dispatched: true\n            }\n        }\n        default:\n            return state\n    }\n}","var initial_state = {\n    by_student_id: {\n        /*\n        {student_id}: [{record_id}, {...}]\n        */\n    },\n    records: {\n        by_id: {\n            // { record_id }: {\n            //     student_id: '',\n            //     sleep_time: '',\n            //     wake_time: '',\n            //     teacher_id: ''\n            // }\n        },\n        all_id: new Set()\n    },\n    errorMessage: '',\n    newDataForCreate: new Set(),\n    oldDataForEdit: new Set(),\n    records_with_error: new Set(),\n    data_dispatched: true\n}\n\nexport default function sleep(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS':\n            let by_student_id = {}\n            action.students.forEach(student => {\n                const { id } = student\n                by_student_id[id] = []\n            })\n            return {\n                ...state,\n                by_student_id\n            }\n\n        case 'FETCH_CLASS_SLEEP_DATA': { // TODO\n            const { by_student_id, records } = action.sleepData\n            return {\n                ...state,\n                by_student_id: {\n                    // ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    by_id: {\n                        // ...state.records.by_id,\n                        ...records.by_id\n                    },\n                    all_id: new Set([\n                        // ...state.records.all_id,\n                        ...records.all_id\n                    ])\n                }\n            }\n        }\n\n        case 'SET_SLEEP_TIME': {\n            const newState = { ...state }\n            const { student_id, index, sleep_time, teacher_id } = action\n            const record_id_array = newState.by_student_id[student_id]\n            const record_id = record_id_array[index]\n            const records = newState.records.by_id\n            sleep_time.setSeconds(0, 0)\n            if (index !== null) { // if index is specified, we change data\n                if (index > 0 && sleep_time <= records[record_id_array[index - 1]].sleep_time) {\n                    const record_id_array = newState.by_student_id[student_id]\n                    const removed = record_id_array.splice(index, 1)\n                    let found = 0\n                    for(var i = 0; i < record_id_array.length-1; i++) {\n                        if (records[record_id_array[i]].sleep_time > sleep_time) {\n                            found = i // index of record\n                            break\n                        }\n                    }\n                    record_id_array.splice(found, 0, removed[0])\n                    newState.by_student_id[student_id] = record_id_array\n                }\n\n                newState.records.by_id[record_id].sleep_time = sleep_time\n                newState.records.by_id[record_id].teacher_id = teacher_id\n                \n                if (!newState.newDataForCreate.has(record_id)) {\n                    newState.oldDataForEdit.add(record_id)\n                }\n            } else { // if index not specified, we push new data\n                // const record_length = record_id_array.length\n                const new_record_id = newState.records.all_id.size\n\n                // if (record_length > 0 && sleep_time <= records[record_id_array[record_length - 1]].wake_time) {\n                //     //if sleep_time <= wake time of last record\n                //     // WARNING!!!!\n                //     newState.records_with_error = new Set([...state.records_with_error, new_record_id, record_length - 1])\n                // } \n                    newState.by_student_id[student_id].push(new_record_id)\n                    newState.records.by_id[new_record_id] = {\n                        student_id,\n                        sleep_time,\n                        wake_time: null,\n                        teacher_id\n                    }\n                    newState.records.all_id.add(new_record_id)\n                    newState.errorMessage = ''\n                    newState.newDataForCreate.add(new_record_id)\n                // }\n\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        case 'SET_WAKE_TIME': {\n            const newState = { ...state }\n            const { student_id, index, wake_time, teacher_id } = action\n            const record_id = newState.by_student_id[student_id][index]\n            // const next_record_id = index + 1 < newState.by_student_id[student_id].length ?\n            //     newState.by_student_id[student_id][index + 1]\n            //     : -1\n            // const records = newState.records.by_id\n            wake_time.setSeconds(0,0)\n\n            newState.records.by_id[record_id].wake_time = wake_time\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            newState.errorMessage = ''\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n            \n        case 'REMOVE_WAKE_TIME': {\n            const { record_id, teacher_id } = action\n            const newState = { ...state }\n            const records_with_error = new Set([...state.records_with_error])\n            records_with_error.delete(record_id)\n            newState.records_with_error = records_with_error\n            newState.records.by_id[record_id].wake_time = null\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n        \n        case 'CREATE_SLEEP_RECORD_SUCCESS': {\n            return {\n                ...state,\n                newDataForCreate: new Set(),\n                data_dispatched: true\n            }\n        }\n\n        case 'CREATE_SLEEP_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errMessage\n            }\n        }\n\n        case 'EDIT_SLEEP_RECORD_SUCCESS': {\n            return {\n                ...state,\n                oldDataForEdit: new Set(),\n                data_dispatched: true\n            }\n        }\n\n        case 'EDIT_SLEEP_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errMessage\n            }\n        }\n\n        case 'REMOVE_RECORD_SUCCESS': {\n            const { record_id, student_id } = action\n            const student_record_ids = state.by_student_id[student_id]\n            const removing_index = student_record_ids.findIndex(element => element === record_id)\n\n            const newDataForCreate = new Set([...state.newDataForCreate])\n            newDataForCreate.delete(record_id)\n\n            const oldDataForEdit = new Set([...state.oldDataForEdit])\n            oldDataForEdit.delete(record_id)\n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    [student_id]: [\n                        ...student_record_ids.slice(0, removing_index),\n                        ...student_record_ids.slice(removing_index+1)\n                    ]\n                },\n                newDataForCreate,\n                oldDataForEdit,\n                data_dispatched: (newDataForCreate.size + oldDataForEdit.size) === 0\n            }\n        }\n\n        case 'REMOVE_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errorMessage\n            }\n        }\n\n        case 'MARK_RECORD_ERROR': {\n            const { record_id_array } = action\n            return {\n                ...state,\n                records_with_error: new Set([...state.records_with_error, ...record_id_array])\n\n            }\n        }\n\n        case 'MARK_RECORD_CORRECT': {\n            const { record_id } = action\n            let records_with_error = new Set([...state.records_with_error])\n            records_with_error.delete(record_id)\n            return {\n                ...state,\n                records_with_error\n            }\n        }\n            \n        case 'ALERT_SLEEPLOG_ERROR_MESSAGE': {\n            const {err_message} = action\n            return {\n                ...state,\n                errorMessage: err_message\n            }\n        }\n            \n        case 'CLEAR_SLEEPLOG_ERROR_MESSAGE': {\n            return {\n                ...state,\n                errorMessage: ''\n            }\n        }\n\n        case 'CLEAR_STATE':\n            return {\n                by_student_id: {},\n                records: {\n                    by_id: {},\n                    all_id: new Set()\n                },\n                errorMessage: '',\n                newDataForCreate: new Set(),\n                oldDataForEdit: new Set(),\n                records_with_error: new Set(),\n                data_dispatched: true\n            }\n        \n        default:\n            return state \n    }\n}","var initial_state = {\n    // loaded: false,\n    by_student_id: {\n        /*\n        {student_id}: [{record_id}, {record_id}...]\n        */\n    },\n    records: {\n        // { record_id }: {\n        //     student_id\n        //     temperature: {INT_TYPE},\n        //     status: '',\n        //     time: '',\n        //     teacher_id: ''\n        // }, {...}\n    },\n    record_id_for_update: new Set(),\n    // record_id_for_edit: new Set()\n    errMessage: '',\n    records_with_error: new Set(),\n    data_dispatched: true\n}\n\nexport default function healthstatus(state = initial_state, action) {\n    // console.log('state: ', state)\n    switch (action.type) {\n        case 'INITIALIZE_STUDENT_WELLNESS': {\n            var by_student_id = {}\n            var records = {}\n            var len = 0\n            action.students.forEach(student_id => {\n                // const { id } = student\n                by_student_id[student_id] = [len, len+1]\n\n                records[len] = {\n                    temperature: '',\n                    status: '健康寶寶',\n                    time: null,\n                    teacher_id: ''\n                }\n\n                records[len+1] = {\n                    temperature: '',\n                    status: '健康寶寶',\n                    time: null,\n                    teacher_id: ''\n                }\n\n                len+=2\n            })\n\n            // console.log('initial_state: ', initial_state)\n\n            return {\n                ...state,\n                by_student_id,\n                records\n            }\n        }\n\n        case 'FETCH_CLASS_WELLNESS_DATA': {\n            const { by_student_id, records } = action.wellnessData\n            const student_id_list = Object.keys(by_student_id)\n            for (var i = 0; i < student_id_list.length; i++){\n                const student_id = student_id_list[i]\n                let record_id_list = by_student_id[student_id]\n                if (record_id_list.length === 1) {\n                    record_id_list.push(state.by_student_id[student_id][1])\n                    by_student_id[student_id] = record_id_list\n                }\n            }\n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    ...state.records,\n                    ...records\n                }\n            }\n        }\n\n        case 'ADD_RECORD': {\n            const {by_student_id, records} = state\n            const { student_id } = action\n            const new_id = Object.keys(state.records).length\n            return {\n                ...state,\n                by_student_id: {\n                    ...by_student_id,\n                    [student_id]: [...by_student_id[student_id], new_id]\n                },\n                records: {\n                    ...records,\n                    [new_id]: {\n                        temperature: '',\n                        status: '健康寶寶',\n                        time: null,\n                        teacher_id: ''\n                    }\n                }\n            }\n        }\n\n        case 'ADD_HEALTH_STATUS': {\n            const { student_id, record_id, status, teacher_id } = action\n            const record_id_for_update = new Set([...state.record_id_for_update, record_id])\n            const records = {\n                ...state.records,\n                [record_id]: {\n                    ...state.records[record_id],\n                    student_id,\n                    status,\n                    time: new Date(),\n                    teacher_id\n                }\n            }\n            return {\n                ...state,\n                records,\n                record_id_for_update,\n                data_dispatched: false\n            }\n        }\n        case 'ADD_TEMPERATURE': {\n            const { student_id, record_id, temperature, teacher_id } = action\n            const record_id_for_update = new Set([...state.record_id_for_update, record_id])\n            const records = {\n                ...state.records,\n                [record_id]: {\n                    ...state.records[record_id],\n                    student_id,\n                    temperature,\n                    time: new Date(),\n                    teacher_id\n                }\n            }\n            return {\n                ...state,\n                records,\n                record_id_for_update,\n                data_dispatched: false\n            }\n        }\n            \n        case 'INVALIDATE_WELLNESS_DATA': {\n            const { record_id, errMessage } = action\n            return {\n                ...state,\n                //TODO how do we efficiently match each errmessage to the wellness_form that contains the error\n                records_with_error: new Set([...state.records_with_error, record_id])\n            }\n        }\n            \n        case 'SEND_WELLNESS_DATA_SUCCESS': {\n            return {\n                ...state,\n                record_id_for_update: new Set(),\n                data_dispatched: true\n            }\n        }\n            \n        case 'SEND_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n\n        // case 'CLEAR_STATE': {\n        //     return {\n        //         by_student_id: {},\n        //         records: {},\n        //         record_id_for_update: new Set(),\n        //         errMessage: '',\n        //         records_with_error: new Set()\n        //     }\n        // }\n        \n        default:\n            return state\n    }\n}","var initial_state = {\n    /* TODO: flatten the structure like sleep record for better separation of post and put (?)\n            -why separate post and put instead of upsert in lambda?\n            -possible conflict: if using student_id/date/time as uniqueness delimeter,\n                                edited records with a new time set gets INSERTed into database\n            -solution: fetched data doesn't get added into newDataForCreate set\n            -problem#2: how do we treat initial rendering of page; will each student gets a placeholding, empty record\n    */\n    loaded: false,\n    by_student_id: {\n        // {student_id}: [{record_id}, {...}]\n    },\n    records: {\n        by_id: {\n            /*{ record_id }: {\n                student_id,\n                time,\n                amount,\n                milk_type,\n                teacher_id\n            }*/\n        },\n        all_id: new Set()\n    },\n    // pendingUpdates: new Set(),\n    newDataForCreate: new Set(),\n    oldDataForEdit: new Set(),\n    dataForRemoval: new Set(),\n    errMessage: '',\n    data_dispatched: true\n}\n\nexport default function milk(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS': {\n            var by_student_id = {}\n            action.students.forEach(student => {\n                const { id } = student\n                by_student_id[id] = []\n            })\n            // initial_state = {\n            //     ...state,\n            //     by_student_id\n            // }\n            return {\n                ...state,\n                by_student_id\n            }\n        }\n        \n        case 'FETCH_CLASS_MILK_DATA': {\n            const { by_student_id, records } = action.milkData\n            \n            return {\n                ...state,\n                by_student_id: {\n                    // ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    by_id: {\n                        // ...state.records.by_id,\n                        ...records.by_id\n                    },\n                    all_id: new Set([\n                        // ...state.records.all_id,\n                        ...records.all_id\n                    ])\n                }\n            }\n        }\n\n        case 'FETCH_CLASS_MILK_DATA_SUCCESS': {\n\n        } \n\n        case 'ADD_MILK_RECORD': {\n            const newState = { ...state }\n            const { student_id } = action\n            const record_id = state.newDataForCreate.size\n            newState.records.by_id[record_id] = {\n                student_id,\n                time: new Date,\n                amount: '',\n                milk_type: '配方奶',\n                teacher_id: ''\n            }\n            newState.by_student_id[student_id].push(record_id)\n            newState.newDataForCreate.add(record_id)\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        case 'EDIT_MILK_AMOUNT': {\n            const newState = { ...state }\n            const { record_id, milk_amount, teacher_id } = action\n            newState.records.by_id[record_id].amount = milk_amount\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        case 'EDIT_MILK_TYPE': {\n            const newState = {...state}\n            const { record_id, teacher_id } = action\n            const { milk_type } = state.records.by_id[record_id]\n            newState.records.by_id[record_id].milk_type = milk_type === '配方奶' ? '母奶' : '配方奶'\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        // case 'EDIT_ASSIST_TYPE': { TODO: IS THIS IMPORTANT?\n        //     const newState = {...state}\n        //     const { record_id, teacher_id } = action\n        //     const { teacher_id } = state.records.by_id[record_id]\n        //     newState.records.by_id[record_id].teacher_id = \n        // }\n\n        case 'EDIT_MILK_TIME': {\n            const newState = { ...state }\n            const { record_id, date_time, teacher_id } = action\n            newState.records.by_id[record_id].time = date_time\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n            \n        case 'CREATE_DATA_SUCCESS': {\n            return {\n                ...state,\n                newDataForCreate: new Set(),\n                data_dispatched: state.oldDataForEdit.size === 0\n            }\n        }\n            \n        case 'CREATE_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n            \n        case 'EDIT_DATA_SUCCESS': {\n            return {\n                ...state,\n                oldDataForEdit: new Set(),\n                data_dispatched: state.newDataForCreate.size === 0\n            }\n        }\n            \n        case 'EDIT_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n\n        case 'REMOVE_RECORD': {\n            const { student_id, record_id } = action\n            const newState = { ...state }\n            let record_id_index = state.by_student_id[student_id].indexOf(record_id)\n            if (record_id_index > -1) {\n                newState.by_student_id[student_id].splice(record_id_index, 1)\n            }\n\n            if (newState.oldDataForEdit.has(record_id)) {\n                newState.oldDataForEdit.delete(record_id)\n            }\n\n            if (newState.newDataForCreate.has(record_id)) {\n                newState.newDataForCreate.delete(record_id)\n            } else {\n                newState.dataForRemoval.add(record_id)\n            }\n\n            newState.data_dispatched = (newState.newDataForCreate.size + newState.oldDataForEdit.size) === 0\n            return newState\n        }\n            \n        case 'REMOVE_MILK_RECORD_SUCCESS':\n            return {\n                ...state,\n                dataForRemoval: new Set(),\n                data_dispatched: (state.newDataForCreate.size + state.oldDataForEdit.size) === 0\n            }\n        \n        case 'REMOVE_MILK_RECORD_FAIL':\n            return {\n                ...state,\n                errMessage: 'Error occured while removing milk record, please try again'\n            }\n        \n        case 'CLEAR_STATE':\n            return {\n                loaded: false,\n                by_student_id: {},\n                records: {\n                    by_id: {},\n                    all_id: new Set()\n                },\n                newDataForCreate: new Set(),\n                oldDataForEdit: new Set(),\n                dataForRemoval: new Set(),\n                errMessage: '',\n                data_dispatched: true\n            }\n\n        default:\n            return state\n    }\n}","var initial_state = {\n  by_student_id: {\n    /*\n    {student_id}: {\n      amount: 16,\n      records: [{record_id}, {...}]\n    }\n    */\n  },\n  records: {\n    by_id: {\n      /*\n      {record_id}: {\n        student_id,\n        time: {Datetime},\n        cloth_diaper: true/false,\n        pee_or_poo: {小便/大便},\n        condition: {varchar(4)}\n        teacher_id\n      }\n      */\n    },\n    all_id: []\n  },\n  all_dispatched: true,\n  // students_pending_amount_update: new Set(),\n  data_to_update: [],\n  new_data_for_create: new Set(),\n  old_data_for_edit: new Set(),\n  err_message: '',\n  data_dispatched: true\n}\n\nexport default function diaper(state = initial_state, action) {\n  switch (action.type) {\n    case 'INITIALIZE_CLASS': {\n      let by_student_id = {}\n      action.students.forEach(student => {\n        const { id } = student\n        by_student_id[id] = {\n          amount: '',\n          records: []\n        }\n      })\n      // initial_state = {\n      //   ...state,\n      //   by_student_id\n      // }\n      return {\n        ...state,\n        by_student_id\n      }\n    }\n    case 'FETCH_CLASS_DIAPER_DATA': { // TODO: fix bug\n      return {\n        ...state,\n        ...action.diaperData\n      }\n    }\n    case 'ADD_DIAPER_RECORD': {\n      const { student_id, time, cloth_diaper, teacher_id } = action\n      const newState = { ...state }\n      const id = newState.records.all_id.length\n      newState.by_student_id[student_id].records.push(id)\n      if (!cloth_diaper) {\n        newState.by_student_id[student_id].amount -= 1\n        // newState.students_pending_amount_update.add(student_id)\n      }\n\n      newState.records.by_id[id] = {\n        student_id,\n        time,\n        cloth_diaper,\n        pee_or_poo: '小便',\n        condition: cloth_diaper ? '有濕' : '',\n        teacher_id\n      }\n      newState.records.all_id.push(id)\n      newState.all_dispatched = false\n      newState.new_data_for_create.add(id)\n\n      newState.data_dispatched = false\n      return newState\n    }\n      \n    case 'EDIT_DIAPER_TIME': {\n      const { record_id, time, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n      newState.records.by_id[record_id].time = time\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n    \n    case 'SWITCH_PEE_OR_POO': {\n      const { record_id, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n      const current_pee_or_poo = newState.records.by_id[record_id].pee_or_poo\n      const cloth_diaper = newState.records.by_id[record_id].cloth_diaper\n      newState.records.by_id[record_id].pee_or_poo = \n        current_pee_or_poo === '小便' ? \n          '大便'\n          : current_pee_or_poo === '大便' ?\n            '洗澡'\n            : '小便'\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (current_pee_or_poo === '小便') {\n        newState.records.by_id[record_id].condition = '正常'\n      // } else if (current_pee_or_poo === '大便') {\n      //   newState.records.by_id[record_id].condition = ''\n      } else if (current_pee_or_poo === '大便' && !cloth_diaper) {\n        newState.records.by_id[record_id].condition = ''\n      } else if (current_pee_or_poo === '洗澡' && cloth_diaper) {\n        newState.records.by_id[record_id].condition = '有濕'\n      } else {\n        newState.records.by_id[record_id].condition = ''\n      }\n\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_CLOTH_DIAPER_CONDITION': {\n      const { record_id, teacher_id } = action\n      const newState = { ...state }\n      const { condition } = state.records.by_id[record_id]\n      newState.records.by_id[record_id].condition = condition === '有濕' ? '成功' : '有濕'\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!state.new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_DIAPER_PEE_CONDITION': {\n      const { record_id, teacher_id, student_id } = action\n      const newState = { ...state }\n      const { condition } = state.records.by_id[record_id]\n      if (condition === '') {\n        newState.records.by_id[record_id].condition = '檢查'\n        newState.by_student_id[student_id].amount += 1\n      } else {\n        newState.records.by_id[record_id].condition = ''\n        newState.by_student_id[student_id].amount -= 1\n      }\n      // newState.records.by_id[record_id].condition = condition === '' ? '檢查' : ''\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!state.new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_POO_CONDITION': {\n      const { record_id, condition, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n\n      newState.records.by_id[record_id].condition = condition\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_SHOWER_CONDITION': {\n      const { record_id } = action\n      const newState = {...state}\n      const { condition } = state.records.by_id[record_id]\n      if (condition === '') {\n        newState.records.by_id[record_id].condition = '大便'\n      } else {\n        newState.records.by_id[record_id].condition = ''\n      }\n\n      if (!state.new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n      \n    case 'REMOVE_DIAPER_RECORD_SUCCESS': {\n      const { student_id, record_id } = action\n      const newState = { ...state }\n      const new_records = []\n      \n      const records = state.by_student_id[student_id].records\n      const record = state.records.by_id[record_id]\n      if(!record.cloth_diaper) {\n        if (!(record.pee_or_poo === '小便' && record.condition === '檢查')) {\n          newState.by_student_id[student_id].amount += 1\n        }\n      }\n\n      for (var i = 0; i < records.length; i++){\n        if (records[i] !== record_id) {\n          new_records.push(records[i])\n        }\n      }\n      newState.by_student_id[student_id].records = new_records\n\n      const new_data_for_create = new Set([...state.new_data_for_create])\n      new_data_for_create.delete(record_id)\n      newState.new_data_for_create = new_data_for_create\n\n      const old_data_for_edit = new Set([...state.old_data_for_edit])\n      old_data_for_edit.delete(record_id)\n      newState.old_data_for_edit = old_data_for_edit\n\n      newState.data_dispatched = (new_data_for_create.size + old_data_for_edit.size) === 0\n      return newState\n    }\n    \n    case 'REMOVE_DIAPER_RECORD_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    // case 'UPDATE_DIAPER_AMOUNT': {\n    //   const { student_id, amount } = action\n    //   const students_pending_amount_update = new Set([...state.students_pending_amount_update, student_id])\n    //   return {\n    //     ...state,\n    //     by_student_id: {\n    //       ...state.by_student_id,\n    //       [student_id]: {\n    //         ...state.by_student_id[student_id],\n    //         amount\n    //       }\n    //     },\n    //     students_pending_amount_update,\n    //     data_dispatched: false\n    //   }\n    // }\n    \n    case 'CREATE_DIAPER_RECORD_SUCCESS': {\n      return {\n        ...state,\n        new_data_for_create: new Set(),\n        old_data_for_edit: new Set(),\n        data_dispatched: true\n      }\n    }\n      \n    case 'CREATE_DIAPER_RECORD_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    case 'EDIT_DIAPER_RECORD_SUCCESS': { // NOT USED\n      return {\n        ...state,\n        old_data_for_edit: new Set()\n      }\n    }\n\n    case 'EDIT_DIAPER_RECORD_FAIL': { // NOT USED\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    case 'EDIT_DIAPER_AMOUNT_SUCCESS': { // NOT USED\n      return {\n        ...state,\n        students_pending_amount_update: new Set(),\n        data_dispatched: (state.new_data_for_create.size + state.old_data_for_edit.size) === 0\n      }\n    }\n      \n    case 'EDIT_DIAPER_AMOUNT_FAIL': { // NOT USED\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n      \n    case 'CLEAR_ERR_MESSAGE': {\n      return {\n        ...state,\n        err_message: ''\n      }\n    }\n      \n    case 'CLEAR_STATE': {\n      return {\n        by_student_id: {},\n        records: {\n          by_id: {},\n          all_id: []\n        },\n        all_dispatched: true,\n        // students_pending_amount_update: new Set(),\n        data_to_update: [],\n        new_data_for_create: new Set(),\n        old_data_for_edit: new Set(),\n        err_message: '',\n        data_dispatched: true\n      }\n    }\n\n    default:\n      return state\n  }\n}","const initial_state = {\n  // TODO: parents can only write one response per message\n  // TODO: how do we incorporate reminders for things to bring\n  message_by_student_id: {\n    // { student_id }: {\n    //   text: '',\n    //   things_to_bring: [0,0,1,1,0,0,0],\n    //   other_item: ''\n    //   activities: [1,1,0,0,0,0,1],\n    //   other_activity: '',\n    //   teacher_id: ''\n    // }\n  },\n  for_all: {\n    text: '',\n    // things_to_bring: [0,0,1,1,0,0,0],\n    // other_item: '',\n    // activities: [1,1,0,0,0,0,1],\n    // other_activity: '',\n  },\n  student_id_for_update: new Set(),\n  data_dispatched: true,\n  parent_messages: {\n    /*\n      {studeny_id}: message_for_teacher\n    */\n  }\n}\n\nexport default function message(state = initial_state, action) {\n  switch (action.type) {\n    case 'INITIALIZE_CLASS': {\n      const message_by_student_id = {}\n      action.students.forEach(student => {\n        const { id } = student\n        message_by_student_id[id] = {\n          text: '',\n          things_to_bring: [0, 0, 0, 0, 0],\n          other_item: '其它',\n          activities: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n          other_activity: '其它',\n          teacher_id: ''\n        }\n      })\n      return {\n        ...state,\n        message_by_student_id\n      }\n    }\n      \n    case 'FETCH_CLASS_MESSAGE_DATA': {\n      const { message_data } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          ...message_data\n        },\n        for_all: {\n          text: ''\n        }\n      }\n    }\n\n    case 'WRITE_TO_ALL': {\n      const { text, teacher_id } = action\n      let message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        // message_by_student_id[student_id].text = text\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n\n      return {\n        ...state,\n        for_all: {\n          ...state.for_all,\n          text\n        },\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(state.message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'WRITE_TO_ONE': {\n      const { text, student_id, teacher_id } = action\n      const student_id_for_update = new Set([...state.student_id_for_update, student_id])\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            text,\n            teacher_id\n          }\n        },\n        student_id_for_update,\n        data_dispatched: false\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ALL': {\n      const { items_to_bring_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].things_to_bring = items_to_bring_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ONE': {\n      const { student_id, things_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].things_to_bring = things_to_bring\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ALL': {\n      const { item_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_item = item_to_bring === '' ? '其它' : item_to_bring\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ONE': {\n      const { student_id, item_to_bring, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_item: item_to_bring,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ALL': {\n      const { new_acitivities_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].activities = new_acitivities_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ONE': {\n      const { student_id, activities, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].activities = activities\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ALL': {\n      const { activity, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_activity = activity === '' ? '其它' : activity\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ONE': {\n      const { student_id, activity, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_activity: activity,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n\n    case 'SEND_MESSAGE_ON_SUCCESS': {\n      return {\n        ...state,\n        student_id_for_update: new Set(),\n        data_dispatched: true\n      }\n    }\n\n    case 'GET_PARENT_MESSAGE_SUCCESS': {\n      const { messages } = action\n      return {\n        ...state,\n        parent_messages: messages\n      }\n    }\n\n    case 'CLEAR_STATE': {\n      return {\n        message_by_student_id: {},\n        student_id_for_update: new Set(),\n        for_all: {\n          text: '',\n          // things_to_bring: [0,0,1,1,0,0,0],\n          // other_item: '',\n          // activities: [1,1,0,0,0,0,1],\n          // other_activity: '',\n        },\n        data_dispatched: true,\n        parent_messages: {}\n      }\n    }\n\n    default:\n      return state\n  }\n}","const initial_state = {\n  isConnected: true,\n  classes: {\n    /*\n    [id]: {\n      teachers: [],\n      students: [],\n      name: ''\n    }\n    */\n  },\n  pick_up_request: [],\n  admin_passcode: '',\n  viewing_status: '',\n  passcodeAdminId: {},\n  passcodeTeacherId: {},\n  teacherOnDuty: '',\n  teachers: {\n      /*\n      [id]: {\n          name: '',\n          profile_picture: '',\n          passcode: 33,\n          present: false,\n          attendance: [attendance_id, ...]\n      }, {...}\n      */\n  },\n  students: {\n      /*\n      [id]: {\n          name: '',\n          profile_picture: '',\n          present: true,\n          wellness_id: '',\n          address: '',\n          father_phone: '',\n          mother_phone: '',\n          attendance_id: ''\n      }, {...}\n      */\n  },\n  attendance: {\n    /*\n    [id]: {\n      in_time: '',\n      out_time: '',\n      excuse_type: ''\n    }\n    */\n  },\n  student_present: new Set(),\n  student_absent: new Set(),\n  student_unmarked: new Set(),\n  teacher_present: new Set(),\n  teacher_absent: new Set(),\n  teacher_unmarked: new Set()\n}\n\nexport default function school(state = initial_state, action) {\n  switch (action.type) {\n    case 'SET_CONNECT_STATE': {\n      const { isConnected } = action\n      return {\n          ...state,\n          isConnected\n      }\n    }\n    case 'FETCH_CLASSES_SUCCESS':\n      const { classes, admin_passcode } = action\n      // console.log('FETCH_CLASSES_SUCCESS / classes: ', classes)\n      return {\n        ...state,\n        classes,\n        admin_passcode\n      }\n    \n    case 'FETCH_TEACHERS_SUCCESS': {\n      const { admins, teachers, classes } = action\n      const updated_classes = {...state.classes}\n      const {passcodeAdminId, passcodeTeacherId} = state\n\n      // console.log('updated_classes: ', updated_classes)\n      Object.keys(classes).forEach(class_id => {\n        updated_classes[class_id].teachers = classes[class_id].teachers\n      })\n\n      Object.keys(admins).forEach(admin_id => {\n        passcodeAdminId[admins[admin_id].passcode] = admin_id\n      })\n\n      Object.keys(teachers).forEach(teacher_id => {\n        passcodeTeacherId[teachers[teacher_id].passcode] = teacher_id\n      })\n\n      return {\n        ...state,\n        passcodeAdminId,\n        passcodeTeacherId,\n        // admins,\n        teachers: {\n          ...teachers,\n          ...admins\n        },\n        classes: updated_classes,\n        teacher_unmarked: new Set(Object.keys(teachers))\n      }\n    }\n\n    case 'FETCH_STUDENTS_SUCCESS': {\n      const { students, classes } = action\n      const updated_classes = {...state.classes}\n\n      Object.keys(classes).forEach(class_id => {\n        updated_classes[class_id].students = classes[class_id].students\n      })\n      \n      return {\n        ...state,\n        students,\n        classes: updated_classes,\n        student_unmarked: new Set(Object.keys(students))\n      }\n    }\n\n    case 'FETCH_TEACHER_ATTENDANCE_SUCCESS': {\n      const { attendance, teachers } = action\n      const updated_teachers = {...state.teachers}\n      const teacher_unmarked = new Set(Object.keys(state.teachers))\n      const teacher_present = new Set()\n      const teacher_absent = new Set()\n      Object.keys(teachers).forEach(teacher_id => {\n        updated_teachers[teacher_id].attendance = teachers[teacher_id].attendance_array\n        updated_teachers[teacher_id].present = teachers[teacher_id].present\n        updated_teachers[teacher_id].total_minutes = teachers[teacher_id].total_minutes\n        if (teachers[teacher_id].present) {\n          teacher_present.add(teacher_id)\n        } else {\n          teacher_absent.add(teacher_id)\n        }\n        teacher_unmarked.delete(teacher_id)\n      })\n      return {\n        ...state,\n        teachers: updated_teachers,\n        attendance: {\n          ...state.attendance,\n          ...attendance\n        },\n        teacher_present,\n        teacher_absent,\n        teacher_unmarked\n      }\n    }\n\n    case 'FETCH_STUDENT_ATTENDANCE_SUCCESS': {\n      const { attendance, students, present, absent } = action\n      const updated_students = {...state.students}\n      const student_unmarked = new Set(Object.keys(state.students))\n      Object.keys(students).forEach(student_id => {\n        updated_students[student_id].attendance_id = students[student_id]\n\n        if (present.includes(student_id) || absent.includes(student_id)) {\n          student_unmarked.delete(student_id)\n        }\n      })\n      return {\n        ...state,\n        students: updated_students,\n        attendance: {\n          ...state.attendance,\n          ...attendance\n        },\n        student_present: new Set([...present]),\n        student_absent: new Set([...absent]),\n        student_unmarked\n      }\n    }\n\n    case 'EDIT_TEACHER_ON_DUTY': {\n      const {teacher_id} = action\n      return {\n        ...state,\n        teacherOnDuty: teacher_id\n      }\n    }\n    \n    case 'ADD_PICKUP_REQUEST': {\n      const { requests } = action\n      return {\n        ...state,\n        pick_up_request: requests\n      }\n    }\n\n    case 'UPDATE_VIEWING_STATUS': {\n      const { status } = action\n      return {\n        ...state,\n        viewing_status: status\n      }\n    }\n\n    case 'UPDATE_PROFILE_PICTURE': {\n      const { student_id, uri } = action\n      const students = {...state.students}\n      students[student_id].profile_picture = uri\n      return {\n        ...state,\n        students\n      }\n    }\n\n    case 'EDIT_STUDENT_SUCCESS': {\n      const { student_id, name, old_class_id, new_class_id } = action\n      const students = {...state.students}\n      const classes = {...state.classes}\n      students[student_id].name = name\n      students[student_id].class_id = new_class_id\n\n      // remove student id from old class[id].students\n      let student_id_array = classes[old_class_id].students\n      let new_student_id_array = []\n      for(var i = 0; i < student_id_array.length; i++) {\n        if (student_id_array[i] !== student_id) {\n          new_student_id_array.push(student_id)\n        }\n      }\n      classes[old_class_id].students = new_student_id_array\n\n      // add student id to new class[id].students\n      student_id_array = classes[new_class_id].students\n      student_id_array.push(student_id)\n      classes[new_class_id].students = student_id_array\n\n      return {\n        ...state,\n        students,\n        classes\n      }\n    }\n\n    case 'UPDATE_TEACHER_PROFILE_PICTURE': {\n      const { teacher_id, image_url } = action\n      const teachers = {...state.teachers}\n      teachers[teacher_id].profile_picture = image_url\n      return {\n        ...state,\n        teachers\n      }\n    }\n\n    case 'CLEAR_STATE': {\n      return {\n        ...state,\n        viewing_status: ''\n      }\n    }\n  \n    case 'CLEAR_SCHOOL_STATE': {\n      return {\n        isConnected: false,\n        classes: {},\n        pick_up_request: [],\n        passcodeAdminId: {},\n        passcodeTeacherId: {},\n        teacherOnDuty: '',\n        teachers: {},\n        students: {},\n        attendance: {},\n        student_present: new Set(),\n        student_absent: new Set(),\n        student_unmarked: new Set(),\n        teacher_present: new Set(),\n        teacher_absent: new Set(),\n        teacher_unmarked: new Set()\n      }\n    }\n    \n    default:\n        return state\n  }\n\n}","import { combineReducers } from 'redux'\nimport classInfo from './classInfo'\nimport attendance from './attendance'\nimport medicationrequests from './medicationrequests'\nimport appetite from './appetite'\nimport water from './water'\nimport sleep from './sleep'\nimport healthstatus from './healthstatus'\nimport milk from './milk'\nimport diaper from './diaper'\nimport inbox from './inbox'\nimport message from './message'\nimport school from './school'\n\nexport default combineReducers({\n    classInfo,\n    attendance,\n    medicationrequests,\n    appetite,\n    water,\n    sleep,\n    healthstatus,\n    milk,\n    diaper,\n    message,\n    school\n})","export default function medicationrequests(state = {\n    requests: {\n        // [request_id]: {\n        //     'student_id': student_id,\n        //     'timestamp': timestamp.strftime('%B %d, %Y %H:%M:%S'),\n        //     'medication': {\n        //         '藥粉': None if 藥粉 == 'None' else 藥粉,\n        //         'need_refrigeration': need_refrigeration == 'True',\n        //         '藥水': None if 藥水 == 'None' else 藥水,\n        //         '藥膏': None if 藥膏 == 'None' else 藥膏\n        //     },\n        //     'note': note,\n        //     'administered': administered,\n        //     'teacher_id': teacher_id\n        // }, {...}\n    },\n    unfinished: [],\n    finished: []\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_REQUESTS':{\n            const { requests, finished, unfinished} = action\n            return {\n                ...state,\n                requests,\n                finished,\n                unfinished\n            }\n        }\n        \n        case 'FILL_MED_REQUEST':{\n            const newState = { ...state }\n            const { unfinished } = state\n            var new_unfinished = []\n            newState.requests[action.request_id].administered = true\n            newState.finished = [...state.finished, action.request_id]\n\n            for (var i = 0; i < unfinished.length; i++) {\n                if (unfinished[i] !== action.request_id) {\n                    new_unfinished.push(unfinished[i])\n                }\n            }\n            newState.unfinished = new_unfinished\n            return newState\n        }\n        \n        case 'CLEAR_STATE': {\n            return {\n                requests: {},\n                unfinished: [],\n                finished: []\n            }\n        }\n\n        default:\n            return state\n    }\n}","export default function water(state = {\n    byId: {\n\n    }\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS':\n            var students = {}\n            action.students.forEach(student => {\n                students[student[0]] = []\n            })\n            return {\n                byId: students\n            }\n        \n        case 'ADD_WATER_RECORD':\n            // const d = action.date\n            // time = d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds()\n            // action.student_id_list.forEach(id => {\n            //     state.byId[id].push(time)\n            // })\n            if (!state.byId[action.student_id].includes(action.time)) {\n                state.byId[action.student_id].push(action.time)\n            }\n            return {\n                ...state\n            }\n        default:\n            return state\n    }\n}","\nexport const initializeClass = (teacher_objs, students) => {\n    return {\n        type: 'INITIALIZE_CLASS',\n        teacher_objs,\n        students\n    }\n}\n\nexport const rateAppetite = (student_id, mealType, rating, teacher_id) => {\n    return {\n        type: 'RATE_APPETITE',\n        student_id,\n        mealType,\n        rating,\n        teacher_id\n    }\n}\n\nexport const markPresent = (student_id, in_time) => {\n    return {\n        type: 'MARK_PRESENT',\n        student_id,\n        in_time\n    }\n}\n\nexport const markDismiss = (student_id, out_time) => {\n    return {\n        type: 'MARK_DISMISS',\n        student_id,\n        out_time\n    }\n}\n\nexport const markAbsent = (student_id, excuse_type) => {\n    return {\n        type: 'MARK_ABSENT',\n        student_id,\n        excuse_type\n    }\n}\n\nexport const initializeRequests = (requests, finished, unfinished) => {\n    return {\n        type: 'INITIALIZE_REQUESTS',\n        requests,\n        finished,\n        unfinished\n    }\n}\n\nexport const fillMedRequest = (request_id) => {\n    return {\n        type: 'FILL_MED_REQUEST',\n        request_id\n    }\n}\n\nexport const fetchAttendanceSuccess = (data) => {\n    return {\n        type: 'FETCH_ATTENDANCE_SUCCESS',\n        data\n    }\n}\n\nexport const markTeacherLoggedIn = (teacher_id, time, attendance_id) => {\n    return {\n        type: 'MARK_TEACHER_LOGGED_IN',\n        teacher_id,\n        time,\n        attendance_id\n    }\n}\n\nexport const markTeacherLoggedOut = (teacher_id, time) => {\n    return {\n        type: 'MARK_TEACHER_LOGGED_OUT',\n        teacher_id,\n        time\n    }\n}\n\nexport const clearRatings = (meal_type) => {\n    return {\n        type: 'CLEAR_RATINGS',\n        meal_type\n    }\n}\n\nexport const setAllRatingsToGreat = (mealType, students_to_display, teacher_id) => {\n    return {\n        type: 'SET_ALL_RATINGS_TO_GREAT',\n        mealType,\n        students_to_display,\n        teacher_id\n    }\n}\n\nexport const setAllDrinkWater = (mealType, students_to_display, teacher_id) => {\n    return {\n        type: 'SET_ALL_DRINK_WATER',\n        mealType,\n        students_to_display,\n        teacher_id\n    }\n}\n\nexport const addWaterRecord = (time, student_id) => {\n    return {\n        type: 'ADD_WATER_RECORD',\n        time,\n        student_id\n    }\n}\n\nexport const addWellnessRecord = (student_id) => {\n    return {\n        type: 'ADD_RECORD',\n        student_id\n    }\n}\n\nexport const addHealthStatus = (student_id, record_id, status, teacher_id) => {\n    return {\n        type: 'ADD_HEALTH_STATUS',\n        student_id,\n        record_id,\n        status,\n        teacher_id\n    }\n}\n\nexport const addTemperature = (student_id,record_id, temperature, teacher_id) => {\n    return {\n        type: 'ADD_TEMPERATURE',\n        student_id,\n        record_id,\n        temperature,\n        teacher_id\n    }\n}\n\nexport const sendWellnessDataSuccess = () => {\n    return {\n        type: 'SEND_WELLNESS_DATA_SUCCESS'\n    }\n}\n\nexport const sendWellnessDataFail = (errMessage) => {\n    return {\n        type: 'SEND_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const invalidateWellnessData = (record_id, errMessage) => {\n    return {\n        type: 'INVALIDATE_WELLNESS_DATA',\n        record_id,\n        errMessage\n    }\n}\n\nexport const setSleepTime = (student_id, index, sleep_time, teacher_id) => {\n    return {\n        type: 'SET_SLEEP_TIME',\n        student_id,\n        index,\n        sleep_time,\n        teacher_id\n    }\n}\n\nexport const removeSleepRecord = (record_id, student_id) => {\n    return {\n        type: 'REMOVE_RECORD',\n        record_id,\n        student_id\n    }\n}\n\nexport const removeSleepRecordSuccess = (record_id, student_id) => {\n    return {\n        type: 'REMOVE_RECORD_SUCCESS',\n        record_id,\n        student_id\n    }\n}\n\nexport const removeSleepRecordFail = (errorMessage) => {\n    return {\n        type: 'REMOVE_RECORD_FAIL',\n        errorMessage\n    }\n}\n\nexport const setWakeTime = (student_id, index, wake_time, teacher_id) => {\n    return {\n        type: 'SET_WAKE_TIME',\n        student_id,\n        index,\n        wake_time,\n        teacher_id\n    }\n}\n\nexport const removeWakeTime = (record_id, teacher_id) => {\n    return {\n        type: 'REMOVE_WAKE_TIME',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editMilkAmount = (record_id, milk_amount, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_AMOUNT',\n        record_id,\n        milk_amount,\n        teacher_id\n    }\n}\n\nexport const editMilkType = (record_id, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_TYPE',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editAssistType = (record_id, teacher_id) => {\n    return {\n        type: 'EDIT_ASSIST_TYPE',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editMilkTime = (record_id, date_time, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_TIME',\n        record_id, \n        date_time,\n        teacher_id\n    }\n}\n\nexport const updateDiaperAmount = (student_id, amount) => {\n    return {\n        type: 'UPDATE_DIAPER_AMOUNT',\n        student_id,\n        amount\n    }\n}\n\nexport const addDiaperRecord = (student_id, time, cloth_diaper, teacher_id) => {\n    return {\n        type: 'ADD_DIAPER_RECORD',\n        student_id,\n        time,\n        cloth_diaper,\n        teacher_id\n    }\n}\n\nexport const editDiaperTime = (record_id, time, teacher_id) => {\n    return {\n        type: 'EDIT_DIAPER_TIME',\n        record_id, \n        time,\n        teacher_id\n    }\n}\n\nexport const switchPeeOrPoo = (record_id, teacher_id) => {\n    return {\n        type: 'SWITCH_PEE_OR_POO',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editClothDiaperCondition = (record_id, teacher_id) => {\n    return { \n        type: 'EDIT_CLOTH_DIAPER_CONDITION',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editDiaperPeeCondition = (record_id, teacher_id, student_id) => {\n    return {\n        type: 'EDIT_DIAPER_PEE_CONDITION',\n        record_id,\n        teacher_id,\n        student_id\n    }\n}\n\nexport const editPooCondition = (record_id, condition, teacher_id) => {\n    return {\n        type: 'EDIT_POO_CONDITION',\n        record_id,\n        condition,\n        teacher_id\n    }\n}\n\nexport const editShowerCondition = (record_id) => {\n    return {\n        type: 'EDIT_SHOWER_CONDITION',\n        record_id\n    }\n}\n\nexport const removeDiaperRecordSuccess = (student_id, record_id) => {\n    return {\n        type: 'REMOVE_DIAPER_RECORD_SUCCESS',\n        student_id,\n        record_id\n    }\n}\n\nexport const removeDiaperRecordFail = (err_message) => {\n    return {\n        type: 'REMOVE_DIAPER_RECORD_FAIL',\n        err_message\n    }\n}\n\nexport const clearDiaperlogErrorMessage = () => {\n    return {\n        type: 'CLEAR_ERR_MESSAGE'\n    }\n}\n\nexport const addMilkRecord = (student_id) => {\n    return {\n        type: 'ADD_MILK_RECORD',\n        student_id\n    }\n}\n\nexport const clearUpdatedStudents = () => {\n    return {\n        type: 'CLEAR_UPDATED_STUDENTS'\n    }\n}\n\nexport const fetchClassAppetiteData = (fruit_name, ratings) => {\n    return {\n        type: 'FETCH_CLASS_APPETITE_DATA',\n        fruit_name,\n        ratings\n    }\n}\n\nexport const fetchClassWellnessData = (wellnessData) => {\n    return {\n        type: 'FETCH_CLASS_WELLNESS_DATA',\n        wellnessData\n    }\n}\n\nexport const fetchClassSleepData = (sleepData) => {\n    return {\n        type: 'FETCH_CLASS_SLEEP_DATA',\n        sleepData\n    }\n}\n\nexport const clearPendingSleepUpdate = () => {\n    return {\n        type: 'CLEAR_PENDNING_SLEEP_UPDATE'\n    }\n}\n\nexport const fetchClassMilkData = (milkData) => {\n    return {\n        type: 'FETCH_CLASS_MILK_DATA',\n        milkData\n    }\n}\n\n// TODO: specify create and edit for milk data\nexport const createDataSuccess = () => {\n    return {\n        type: 'CREATE_DATA_SUCCESS'\n    }\n}\n\nexport const createDataFail = (errMessage) => {\n    return {\n        type: 'CREATE_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const editDataSuccess = () => {\n    return {\n        type: 'EDIT_DATA_SUCCESS'\n    }\n}\n\nexport const editDataFail = (errMessage) => {\n    return {\n        type: 'EDIT_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const removeMilkRecordSuccess = () => {\n    return {\n        type: 'REMOVE_MILK_RECORD_SUCCESS'\n    }\n}\n\nexport const removeMilkRecordFail = () => {\n    return {\n        type: 'REMOVE_MILK_RECORD_FAIL'\n    }\n}\n\nexport const createSleepRecordSuccess = () => {\n    return {\n        type: 'CREATE_SLEEP_RECORD_SUCCESS'\n    }\n}\n\nexport const createSleepRecordFail = (errMessage) => {\n    return {\n        type: 'CREATE_SLEEP_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editSleepRecordSuccess = () => {\n    return {\n        type: 'EDIT_SLEEP_RECORD_SUCCESS'\n    }\n}\n\nexport const editSleepRecordFail = (errMessage) => {\n    return {\n        type: 'EDIT_SLEEP_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const fetchClassDiaperData = (diaperData) => {\n    return {\n        type: 'FETCH_CLASS_DIAPER_DATA',\n        diaperData\n    }\n}\n\nexport const createDiaperRecordSuccess = () => {\n    return {\n        type: 'CREATE_DIAPER_RECORD_SUCCESS'\n    }\n}\n\nexport const createDiaperRecordFail = (errMessage) => {\n    return {\n        type: 'CREATE_DIAPER_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editDiaperRecordSuccess = () => {\n    return {\n        type: 'EDIT_DIAPER_RECORD_SUCCESS'\n    }\n}\n\nexport const editDiaperRecordFail = (errMessage) => {\n    return {\n        type: 'EDIT_DIAPER_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editDiaperAmountSuccess = () => {\n    return {\n        type: 'EDIT_DIAPER_AMOUNT_SUCCESS'\n    }\n}\n\nexport const editDiaperAmountFail = (errMessage) => {\n    return {\n        type: 'EDIT_DIAPER_AMOUNT_FAIL',\n        errMessage\n    }\n}\n\nexport const removeRecord = (student_id, record_id, index) => {\n    return {\n        type: 'REMOVE_RECORD',\n        student_id,\n        record_id,\n        index\n    }\n}\n\nexport const clearState = () => {\n    return {\n        type: 'CLEAR_STATE'\n    }\n}\n\nexport const getConversations = (conversations, unread_conversation_list) => {\n    return {\n        type: 'GET_CONVERSATIONS',\n        conversations,\n        unread_conversation_list\n    }\n}\n\nexport const setMessageDataSchool = (messages, most_recently_read_message_id, conversation_id, student_id) => {\n    return {\n        type: 'SET_MESSAGE_DATA',\n        messages,\n        most_recently_read_message_id,\n        conversation_id,\n        student_id\n    }\n}\n\nexport const setCurrentConversationId = (conversation_id) => {\n    return {\n        type: 'SET_CURRENT_CONVERSATION_ID',\n        conversation_id\n    }\n}\n\nexport const clearCurrentConversationIdSchool = () => {\n    return {\n        type: 'CLEAR_CURRENT_CONVERSATION_ID'\n    }\n}\n\nexport const setClassId = (class_id) => {\n    return {\n        type: 'SET_CLASS_ID',\n        class_id\n    }\n}\n\nexport const onSendAppetiteSuccess = () => {\n    return {\n        type: 'ON_SEND_APPETITE_SUCCESS'\n    }\n}\n\nexport const alertErrMessage = (err_message) => {\n    return {\n        type: 'ALERT_ERR_MESSAGE',\n        err_message\n    }\n}\n\nexport const clearAppetiteErrorMessage = () => {\n    return {\n        type: 'CLEAR_ERR_MESSAGE'\n    }\n}\n\nexport const addStudentIdForUpdate = (student_id_array) => {\n    return {\n        type: 'ADD_STUDENT_ID_FOR_UPDATE',\n        student_id_array\n    }\n}\n\nexport const markWaterDrank = (student_id, meal_type, teacher_id) => {\n    return {\n        type: 'MARK_WATER_DRANK',\n        student_id,\n        meal_type,\n        teacher_id\n    }\n}\n\nexport const markStaffAttendanceFail = (errMessage) => {\n    return {\n        type: 'MARK_STAFF_ATTENDANCE_FAIL',\n        errMessage\n    }\n}\n\nexport const writeToAll = (text, teacher_id) => {\n    return {\n        type: 'WRITE_TO_ALL',\n        text,\n        teacher_id\n    }\n}\n\nexport const writeToOne = (text, student_id, teacher_id) => {\n    return {\n        type: 'WRITE_TO_ONE',\n        text,\n        student_id,\n        teacher_id\n    }\n}\n\nexport const remindItemsToBringToAll = (items_to_bring_bool, teacher_id) => {\n    return {\n        type: 'REMIND_ITEMS_TO_BRING_TO_ALL',\n        items_to_bring_bool,\n        teacher_id\n    }\n}\n\nexport const remindItemsToBringToOne = (student_id, things_to_bring, teacher_id) => {\n    return {\n        type: 'REMIND_ITEMS_TO_BRING_TO_ONE',\n        student_id,\n        things_to_bring,\n        teacher_id\n    }\n}\n\nexport const recordActivitiesForAll = (new_acitivities_bool, teacher_id) => {\n    return {\n        type: 'RECORD_ACTIVITIES_FOR_ALL',\n        new_acitivities_bool,\n        teacher_id\n    }\n}\n\nexport const recordActivitiesForOne = (student_id, activities, teacher_id) => {\n    return {\n        type: 'RECORD_ACTIVITIES_FOR_ONE',\n        student_id,\n        activities,\n        teacher_id\n    }\n}\n\nexport const writeItemToBringToAll = (item_to_bring, teacher_id) => {\n    return {\n        type: 'WRITE_ITEM_TO_BRING_TO_ALL',\n        item_to_bring,\n        teacher_id\n    }\n}\n\nexport const writeItemToBringToOne = (student_id, item_to_bring, teacher_id) => {\n    return {\n        type: 'WRITE_ITEM_TO_BRING_TO_ONE',\n        student_id,\n        item_to_bring,\n        teacher_id\n    }\n}\n\nexport const writeActivityForAll = (activity, teacher_id) => {\n    return {\n        type: 'WRITE_ACTIVITY_FOR_ALL',\n        activity,\n        teacher_id\n    }\n}\n\nexport const writeActivityForOne = (student_id, activity, teacher_id) => {\n    return {\n        type: 'WRITE_ACTIVITY_FOR_ONE',\n        student_id,\n        activity,\n        teacher_id\n    }\n}\n\nexport const fetchClassMessageData = (message_data) => {\n    return {\n        type: 'FETCH_CLASS_MESSAGE_DATA',\n        message_data\n    }\n}\n\nexport const alertSleeplogErrorMessage = (err_message) => {\n    return {\n        type: 'ALERT_SLEEPLOG_ERROR_MESSAGE',\n        err_message\n    }\n}\n\nexport const clearSleeplogErrorMessage = () => {\n    return {\n        type: 'CLEAR_SLEEPLOG_ERROR_MESSAGE'\n    }\n}\n\nexport const editFruitName = (fruit_name) => {\n    return {\n        type: 'EDIT_FRUIT_NAME',\n        fruit_name\n    }\n}\n\nexport const fetchClassesSuccess = (classes, admin_passcode, email) => {\n    return {\n        type: 'FETCH_CLASSES_SUCCESS',\n        classes,\n        admin_passcode,\n        email\n    }\n}\n\nexport const fetchTeachersSuccess = (admins, teachers, classes) => {\n    return {\n        type: 'FETCH_TEACHERS_SUCCESS',\n        admins,\n        teachers, \n        classes\n    }\n}\n\nexport const fetchStudentsSuccess = (students, classes) => {\n    return {\n        type: 'FETCH_STUDENTS_SUCCESS',\n        students,\n        classes\n    }\n}\n\nexport const initializeStudentWellness = (students) => {\n    return {\n        type: 'INITIALIZE_STUDENT_WELLNESS',\n        students\n    }\n}\n\nexport const sendMessageOnSuccess = () => {\n    return {\n        type: 'SEND_MESSAGE_ON_SUCCESS'\n    }\n}\n\nexport const setConnectState = (isConnected) => {\n    return {\n        type: 'SET_CONNECT_STATE',\n        isConnected\n    }\n}\n\nexport const clearSchoolState = () => {\n    return {\n        type: 'CLEAR_SCHOOL_STATE'\n    }\n}\n\nexport const fetchTeacherAttendanceSuccess = (attendance, teachers) => {\n    return {\n        type: 'FETCH_TEACHER_ATTENDANCE_SUCCESS',\n        attendance,\n        teachers\n    }\n}\n\nexport const fetchStudentAttendanceSuccess = (attendance, students, present, absent) => {\n    return {\n        type: 'FETCH_STUDENT_ATTENDANCE_SUCCESS',\n        attendance,\n        students,\n        present,\n        absent\n    }\n}\n\nexport const editTeacherOnDuty = (teacher_id) => {\n    return {\n        type: 'EDIT_TEACHER_ON_DUTY',\n        teacher_id\n    }\n}\n\nexport const addPickupRequest = (requests) => {\n    return {\n        type: 'ADD_PICKUP_REQUEST',\n        requests\n    }\n}\n\nexport const updateViewingStatus = (status) => {\n    return {\n        type: 'UPDATE_VIEWING_STATUS',\n        status\n    }\n}\n\nexport const updateProfilePicture = (student_id , uri) => {\n    return {\n        type: 'UPDATE_PROFILE_PICTURE',\n        student_id,\n        uri\n    }\n}\n\nexport const editStudentSuccess = (student_id, name, old_class_id, new_class_id) => {\n    return {\n        type: 'EDIT_STUDENT_SUCCESS',\n        student_id,\n        name,\n        old_class_id,\n        new_class_id\n    }\n}\n\nexport const updateTeacherProfilePicture = (teacher_id, image_url) => {\n    return {\n        type: 'UPDATE_TEACHER_PROFILE_PICTURE',\n        teacher_id,\n        image_url\n    }\n}\n\nexport const markRecordError = (record_id_array) => {\n    return {\n        type: 'MARK_RECORD_ERROR',\n        record_id_array\n    }\n}\n\nexport const markRecordCorrect = (record_id) => {\n    return {\n        type: 'MARK_RECORD_CORRECT',\n        record_id\n    }\n}\n\nexport const getParentMessageSuccess = (messages) => {\n    return {\n        type: 'GET_PARENT_MESSAGE_SUCCESS',\n        messages\n    }\n}","import React from 'react'\nimport { Container, View, Text, Card, CardItem, Item, Input, Button, Toast } from 'native-base'\nimport { TouchableHighlight, StyleSheet } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { markTeacherLoggedIn, markTeacherLoggedOut } from '../../redux/school/actions/index'\n\nclass LoginNumberPad extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            passcode: '',\n            err_message: '',\n            number_array: [1,2,3,4,5,6,7,8,9]\n        }\n        this.handlePasscode = this.handlePasscode.bind(this)\n    }\n\n    handlePasscode(num) {\n        this.setState({ passcode: this.state.passcode + num })\n    }\n\n    handleEnterPasscode() {\n        this.props.handleEnterPasscode(this.state.passcode)\n        this.setState({ passcode: '' })\n    }\n\n    render() {\n        const {passcode, number_array} = this.state\n        return (\n            <TouchableHighlight\n                style={{\n                    backgroundColor: 'rgba(0,0,0,0.5)',\n                    width: '100%',\n                    height: '100%',\n                    // // opacity: 0.5,\n                    flex: 1,\n                    justifyContent: 'flex-start',\n                    alignItems: 'center',\n                    zIndex: 2,\n                    position: 'absolute',\n                }}\n                underlayColor='transparent'\n                onPress={this.props.hideLoginPad}\n            >\n                <TouchableHighlight\n                    style={{ width: 350, height: 560, borderRadius: 25, zIndex: 3, position: 'absolute', backgroundColor: 'white' }}\n                    underlayColor='white'\n                    onPress={() => { }}\n                >\n                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                        <View style={{ flex: 1, flexDirection: 'row', width: 310, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#b5e9e9', justifyContent: 'center' }}>\n                            <Text style={{ width: 210, fontSize: 40, fontWeight: 'bold', paddingHorizontal: 20, alignSelf: 'center' }}>{passcode}</Text>\n                            <TouchableHighlight\n                                style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#ffe1d0', justifyContent: 'center', alignItems: 'center'  }}\n                                underlayColor='#fa625f'\n                                onPress={() => this.setState({ passcode: '' })}\n                            >\n                                <Text style={{ fontSize: 30 }} >Clear</Text>\n                            </TouchableHighlight>\n                        </View>\n                        <View style={{ flex: 3, flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'center' }}>\n                            {number_array.map(number => {\n                                return (\n                                    <TouchableHighlight\n                                        key={number}\n                                        style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#fff1b5', justifyContent: 'center', alignItems: 'center'  }}\n                                        underlayColor='#f4d41f'\n                                        onPress={() => this.handlePasscode(number)}\n                                    >\n                                        <Text style={{ fontSize: 30 }} >{number}</Text>\n                                    </TouchableHighlight>\n                                )\n                            })}\n                        </View>\n                        <View style={{ flex: 1, flexDirection: 'row' }}>\n                            <TouchableHighlight\n                                style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#fff1b5', justifyContent: 'center', alignItems: 'center' }}\n                                underlayColor='#f4d41f'\n                                onPress={() => this.handlePasscode(0)}\n                            >\n                                <Text style={{ fontSize: 30 }}>0</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight\n                                style={{ width: 210, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#dcf3d0', justifyContent: 'center', alignItems: 'center' }}\n                                underlayColor='#00c07f'\n                                onPress={() => this.handleEnterPasscode()}\n                            >\n                                <Text style={{ fontSize: 30 }}>Enter</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                </TouchableHighlight>\n            </TouchableHighlight>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    button: {\n        minWidth: '22%',\n        aspectRatio: 1,\n        margin: 5,\n        justifyContent: 'center'\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markTeacherLoggedIn, markTeacherLoggedOut}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (LoginNumberPad)","import Constants from 'expo-constants';\n\n// export const prodUrl = \"https://someapp.herokuapp.com\";\n\n// const ENV = {\n//   dev: {\n//     apiUrl: \"http://localhost:3000\"\n//   },\n//   staging: {\n//     apiUrl: prodUrl\n//   },\n//   prod: {\n//     apiUrl: prodUrl\n//   }\n// };\n\nfunction getEnvVars(env = \"\") {\n  if (env === null || env === undefined || env === \"\") return \"prod\";\n  if (env.indexOf(\"dev\") !== -1) return \"prod\";\n  if (env.indexOf(\"staging\") !== -1) return \"staging\";\n  if (env.indexOf(\"prod\") !== -1) return \"prod\";\n}\n\nexport default getEnvVars(Constants.manifest.releaseChannel);\n","// import { connect } from \"react-redux\"\nimport ENV from '../variables'\n\nexport const formatDate = (date) => {\n    return date.getFullYear() + '-' + ('0' + (date.getMonth()+ 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyDate = (date) => {\n    return date.getFullYear() + '/' + ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyMonthDate = (date) => {\n    return ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const formatTime = (date) => {\n    return date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\n}\n\nexport const beautifyTime = (date) => {\n    return date.getHours() + ':' + ('0' + date.getMinutes()).slice(-2)\n}\n\nexport const formatHourMinute = (date) => {\n    return date.getHours() + ':' + date.getMinutes()\n}\n\nexport const get = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log(resJson)\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const post = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const put = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const delete_by_id = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const fetchData = async (type, child_id, start_date, end_date) => {\n    // const date = formatDate(new Date());\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/${child_id}?start_date=${start_date}&end_date=${end_date}`\n\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    // console.log(`${type} util/fetchData/fetchedData: `, fetchedData)\n    return fetchedData\n}\n\nexport const fetchClassData = async (type, class_id, start_date, end_date) => {\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/class/${class_id}?start_date=${start_date}&end_date=${end_date}`\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            // console.log('fetchClassData/resJson: /', resJson)\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    return fetchedData\n}\n\nexport const fetchMessagesByConversationId = async (conversation_id, sender_id, recipient_id) => {\n    console.log('fetchMessageByConvId/recipient_id', recipient_id)\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const messageData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('fetchMessagesByConversationId/resJson: ', resJson)\n            const { messages, most_recently_read_message_id } = resJson.data\n            if (resJson.statusCode === 200) {\n                markRead(messages, sender_id, recipient_id)\n                return {\n                    success: true,\n                    data: resJson.data\n                }\n            } else {\n                return {\n                    sucess: false,\n                    data: resJson\n                }\n            }\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            return {\n                success: false,\n                data: err\n            }\n        })\n    return messageData\n}\n\nconst markRead = (message_array, sender_id, recipient_id) => {\n    // console.log('message_array: ', message_array)\n    // const { sender_id, recipient_id } = this.state\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message`\n\n    const most_recent_message = message_array[0] ? message_array[0] : null\n    if (most_recent_message === null || most_recent_message.sender_id === sender_id || most_recent_message.read_at !== null) {\n        return\n    }\n\n    fetch(query, {\n        method: 'PUT',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            most_recent_message_id: most_recent_message.message_id,\n            recipient_id\n        })\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('markRead/resJson: ', resJson)\n        })\n        .catch(err => console.log('err: ', err))\n}\n\nexport const fetchReadReceipt = async (conversation_id,  sender_id) => {\n    // const { conversation_id } = this.state.messageData\n    // const sender_id = this.props.child_id\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message/read-receipt?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const success = true\n    const message_id = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('parent/inboxcard/fetchReadReceipt/resJson: ', resJson)\n            return resJson.data\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            success = false\n            return `err: ${err}`\n        })\n    return {\n        success,\n        data: message_id\n    }\n}\n\nexport const sendWellnessData = async (wellness_data, class_id, date) => {\n    const { record_id_for_update} = wellness_data\n    var data_objs = []\n\n    if (record_id_for_update.size === 0) {\n        return {\n            success: true,\n            data: []\n        }\n    }\n\n    record_id_for_update.forEach((record_id) => {\n        data_objs.push({\n            record_id,\n            ...wellness_data.records[record_id]\n        })\n    })\n    normalize(data_objs)\n\n    var request_body = {\n        date,\n        class_id,\n        data_objs\n    }\n\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/wellness/`\n    \n    const fetchResult = await fetch(query, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n        .then((res) => res.json())\n        .then((resJson) => {\n            const { statusCode, message, data } = resJson\n            if (statusCode > 200 || statusCode === undefined) {\n                return {\n                    success: false,\n                    statusCode,\n                    message\n                }\n            }\n            return {\n                success: true,\n                statusCode,\n                message,\n                data\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                message: err\n            }\n        })\n    return fetchResult\n}\n\nfunction normalize(data_objs) {\n    for (var i = 0; i < data_objs.length; i++) {\n        data_objs[i].time = formatTime(data_objs[i].time)\n    }\n}","import React from 'react'\nimport { Card, CardItem, Toast } from 'native-base'\nimport { View, Text, StyleSheet, Image, TouchableHighlight } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { markAbsent, markPresent } from './../../redux/school/actions/index'\nimport { formatDate } from './../util'\n\nclass AttendanceCard extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            selected_student_ids: []\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    onSelectAttendanceType(attendance_type) {\n        const { attendance } = this.props\n        switch (attendance_type) {\n            case 'present': {\n                this.setState({\n                    selected_student_ids: [...attendance.present]\n                })\n                return\n            }\n            \n            case 'absent': {\n                this.setState({\n                    selected_student_ids: [...attendance.absent]\n                })\n                return \n            }\n                \n            case 'unmarked': {\n                this.setState({\n                    selected_student_ids: [...attendance.unmarked]\n                })\n                return\n            }\n        }\n    }\n\n    fetchData() {\n        const date = formatDate(new Date())\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance?date=${date}&class_id=${this.props.class.class_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then(res => res.json())\n        .then(resJson => {\n            for (var key in resJson) {\n                // {student_id}: [in_time, out_time, excuse_type]\n                if(resJson[key][0] !== null) {\n                    this.props.markPresent(key, resJson[key][0])\n                }\n                else if (resJson[key][2] !== null) {\n                    this.props.markAbsent(key, resJson[key][2])\n                }\n            }\n            this.setState({\n                selected_student_ids: [...this.props.attendance.unmarked]\n            })\n        })\n        .catch(err => console.log('err: ', err))\n    }\n\n    handleOnClick(student_id) {\n        this.props.showModal(student_id)\n    }\n\n    render() {\n        // TODO: on unmount, clear redux\n        // TODO: way to automatically update absent whenever parents send absense request\n        // TODO: what to display on homepage vs what to display in other pages after teachers\n        //          click into the attendance status(present, absent, or not yet)\n        // console.log(this.props.attendance)\n        // console.log(this.props.class.students)\n        return (\n            <Card style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                <CardItem>\n                    <Text style={{ fontSize: 30 }}>出席狀況</Text>\n                </CardItem>\n\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>出席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#dcf3d0'\n                            }}\n                            underlayColor='#00c07f'\n                            onPress={() => this.onSelectAttendanceType('present')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.present.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>缺席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#ffe1d0'\n                            }}\n                            underlayColor='#fa625f'\n                            onPress={() => this.onSelectAttendanceType('absent')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.absent.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>未知</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#fff1b5'\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.onSelectAttendanceType('unmarked')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.unmarked.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', flexWrap: 'wrap' }}>\n                    {this.state.selected_student_ids.map((student_id) => {\n                        const { present, unmarked, absent } = this.props.attendance\n                        return (\n                            <TouchableHighlight\n                                key={student_id}\n                                style={{ width: '31%', margin: '1%'}}\n                                underlayColor='transparent'\n                                onPress={() => this.handleOnClick(student_id)}\n                            >\n                                <View style={styles.cardContainer}>\n                                    <Card>\n                                        <CardItem style={{ justifyContent: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={{\n                                                        height: 200,\n                                                        width: 200,\n                                                        borderRadius: 100,\n                                                        borderWidth: 10,\n                                                        borderColor:\n                                                            present.has(student_id) ? '#dcf3d0'\n                                                                : unmarked.has(student_id) ? '#fff1b5'\n                                                                    : '#ffe1d0'\n                                                    }}\n                                                />\n                                        </CardItem>\n                                        <CardItem\n                                            footer\n                                            style={{ justifyContent: 'center', marginTop: -5 }}\n                                        >\n                                            <Text style={{ marginTop: -10 }}>{this.props.class.students[student_id].name}</Text>\n                                        </CardItem>\n                                    </Card>\n                                </View>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        paddingVertical: 5\n    },\n    thumbnailImage: {\n        height: 80,\n        width: 80,\n        borderRadius: 40\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        attendance: state.attendance,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markAbsent, markPresent}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (AttendanceCard)","import React, { useEffect, useState } from 'react'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { initializeRequests } from '../../redux/school/actions/index'\nimport { formatHourMinute } from '../util'\nimport { useNavigate } from 'react-router-dom'\n\nconst MedicationReqeustCard = (props) => {\n    const navigate = useNavigate()\n    useEffect(() => {\n        fetchData()\n    }, [])\n\n    const fetchData = () => {\n        const d = new Date()\n        const date = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate()\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/medicationrequest?date=' + date + '&class_id=' + props.class_id, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                const { requests, finished, unfinished } = data\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('托藥單取不完整，請和工程師聯繫' + message)\n                    return\n                }\n                props.initializeRequests(requests, finished, unfinished)\n            })\n            .catch(err => {\n                alert('Error, please try again 托藥單取不完整，請和工程師聯繫：' + err.message)\n            })\n    }\n    const { students } = props\n    const { requests, unfinished } = props.medication_requests\n    // console.log('props.medication_requests: ', props.medication_requests)\n    return (\n        <Card style={{ flex: 1, width: '90%'}}>\n            <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>托藥單</Text>\n                <TouchableHighlight\n                    style={{\n                        width: '25%',\n                        alignSelf: 'flex-end',\n                        position: 'absolute',\n                        padding: 5,\n                        backgroundColor: '#b5e9e9'\n                    }}\n                    onPress={() => {\n                        navigate('medication', { state: {\n                            request_id: null\n                        }})\n                    }}\n                >\n                    <Text style={styles.button_text}>查看</Text>\n                </TouchableHighlight>\n            </View>\n            <View style={{ }}>\n                <ScrollView horizontal={true}>\n                    {unfinished.map((request_id) => {\n                        const { student_id, timestamp, medication, note, administered, teacher_id } = requests[request_id]\n                        const time = formatHourMinute(new Date(timestamp))\n                        return (\n                            <TouchableHighlight\n                                key={request_id}\n                                style={{ flex: 1, margin: 3 }}\n                                onPress={() => {\n                                    navigate('medication', { state: {\n                                        request_id\n                                    }})\n                                }}\n                            >\n                                <Card style={{ flex:1, alignItems: 'center', paddingHorizontal: 15 }}>\n                                    <View style={{ justifyContent: 'center' }}>\n                                        <Text style={{ fontSize: 35 }}>{time}</Text>\n                                    </View>\n                                    <View style={{ justifyContent: 'center' }}>\n                                        <Image\n                                            source={\n                                                students[student_id].profile_picture === '' ?\n                                                    require('../../assets/icon-thumbnail.png')\n                                                    : {uri: students[student_id].profile_picture} \n                                            }\n                                            style={styles.thumbnailImage}/>\n                                    </View>\n                                    <View\n                                        style={{ justifyContent: 'center' }}\n                                    >\n                                        <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                                    </View>\n                                </Card>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </ScrollView>\n            </View>\n        </Card>\n    )\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\n// const mapStateToProps = (state) => {\n//     return {\n//         medication_requests: state.medicationrequests\n//     }\n// }\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ initializeRequests }, dispatch)\n    }\n}\n\nexport default connect(null, mapDispatchToProps) (MedicationReqeustCard)","import React from 'react'\nimport { View, Text, ActivityIndicator } from 'react-native'\n\nexport default class Reloading extends React.Component{\n    render() {\n        return (\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                <Text>Loading...</Text>\n                <ActivityIndicator size=\"large\"></ActivityIndicator>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { formatDate } from '../util'\nimport Reloading from '../reloading'\nimport { addPickupRequest } from '../../redux/school/actions/index'\nimport { bindActionCreators } from 'redux'\n\nclass PickupAlert extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            color: '#ffe1d0',\n            // alertForPickup: false,\n            requestQueue: [],\n            isLoading: true\n        }\n        this.onConfirm = this.onConfirm.bind(this)\n    }\n\n    componentDidMount() {\n        // const { requestQueue } = this.props.route.params\n        // if (requestQueue.length > 0) {\n        //     this.setState({\n        //         requestQueue,\n        //         isLoading: false\n        //     })\n            this.timeoutId = this.timer()\n        // } else {\n        //     this.props.navigation.goBack()\n        // }\n    }\n\n    timer = () => setTimeout(() => {\n        this.setState({ color: this.state.color === '#ffe1d0' ? '#fa625f' : '#ffe1d0' })\n        this.timeoutId = this.timer()\n        }, 2000\n    )\n\n    // fetchData() {\n    //     const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance/pickup-request?school_id=${this.props.school_id}`\n    //     fetch(query, {\n    //         method: 'GET',\n    //         headers: {\n    //             Accept: 'application/json',\n    //             'Content-Type': 'application/json'\n    //         }\n    //     })\n    //         .then(res => res.json())\n    //         .then(resJson => {\n    //             if (resJson.data.length > 0) {\n    //                 this.timeoutId = this.timer()\n    //             }\n    //             this.setState({\n    //                 alertForPickup: resJson.data.length === 0 ? false : true,\n    //                 requestQueue: resJson.data\n    //             })\n    //         })\n    //         .catch(err => {\n    //             console.log('err: ', err)\n    //         })\n    // }\n\n    onConfirm(request_id, index) {\n        const pick_up_request = [...this.props.pick_up_request]\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance/pickup-request?request_id=${request_id}`\n        fetch(query, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // TODO: error handling\n                const { statusCode, message } = resJson\n                if (statusCode === 200) {\n                    pick_up_request.splice(index, 1)\n                    this.props.addPickupRequest(pick_up_request)\n                    if (pick_up_request.length === 0) {\n                        // clearTimeout(this.timeoutId)\n                        this.props.navigation.goBack()\n                    }\n                } else {\n                    Alert.alert(\n                        'Sorry 取得接回通知資料時電腦出狀況了！',\n                        '請截圖和與工程師聯繫 ' + message,\n                        [{ text: 'Ok' }]\n                    )\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId)\n    }\n\n    render() {\n        const { pick_up_request, students } = this.props\n        // if (this.state.isLoading) {\n        //     return <Reloading />\n        // } else {\n            // const request = this.state.requestQueue[0]\n            // const student = this.props.students[request['student_id']]\n            return (\n                <View style={{\n                    flex: 1,\n                    flexDirection: 'row',\n                    // backgroundColor: 'transparent',\n                    justifyContent: 'space-evenly',\n                    alignItems: 'center',\n                    flexWrap: 'wrap'\n                    // zIndex: 2,\n                    // position: 'absolute',\n                    // width: '100%',\n                    // height: '100%'\n                }}>\n                    {pick_up_request.map((request, index) => {\n                        const { id, student_id, arrival_time } = request\n                        const student = students[student_id]\n                        return(\n                            <View\n                                key={index}\n                                style={{\n                                    // flex: 1,\n                                    width: '45%',\n                                    height: '45%',\n                                    marginTop: '5%',\n                                    backgroundColor: this.state.color,\n                                    // zIndex: 3,\n                                    // position: 'absolute'\n                                }}\n                            >\n                                <View style={{ flex: 2, alignItems: 'center', justifyContent: 'center' }}>\n                                    <Image\n                                        source={{uri: student.profile_picture }}\n                                        style={{\n                                            width: '80%',\n                                            aspectRatio: 1\n                                        }}\n                                    />\n                                </View>\n                                <View style={{ flex: 1 }}>\n                                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                                        <Text style={{ fontSize: 80, textAlign: 'center' }}>{arrival_time}</Text>\n                                    </View>\n                                    <View style={{ flex: 1 }}>\n                                        <TouchableHighlight\n                                            style={{\n                                                backgroundColor: 'grey',\n                                                padding: 15,\n                                                alignSelf: 'flex-end',\n                                                justifyContent: 'center',\n                                                marginRight: 15\n                                            }}\n                                            onPress={() => this.onConfirm(id, index)}\n                                        >\n                                            <Text style={{ fontSize: 35, textAlign: 'center', color: 'lightgrey' }}>確認</Text>\n                                        </TouchableHighlight>\n                                    </View>\n                                </View>\n                            </View>\n                        )\n                    })}\n                </View>\n            )\n        // }\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        students: state.school.students,\n        pick_up_request: state.school.pick_up_request\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ addPickupRequest }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (PickupAlert)","import React from 'react'\nimport { View, TouchableHighlight, Text, Platform, Picker, ActionSheetIOS } from 'react-native'\nimport { ActionSheet } from 'native-base'\n\nexport default class PickerComponent extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      selectedIndex: 0\n    }\n  }\n\n  isIOS() {\n    if (Platform.OS === 'ios') {\n      return true\n    } else return false\n  }\n\n  showActionSheet() {\n    // this.props.handleOnClick()\n    // if (this.isIOS()) {\n    //   this.iosShowActionSheet()\n    // } else { // android\n    //   this.androidShowActionSheet()\n    // }\n  }\n\n  iosShowActionSheet() {\n    const { options } = this.props\n    // ActionSheetIOS.showActionSheetWithOptions(\n    //   {\n    //     options,\n    //     cancelButtonIndex: options.length-1\n    //   },\n    //   (buttonIndex) => {\n    //     this.setState({\n    //       selectedIndex: buttonIndex\n    //     })\n    //     this.props.handleSelectValue(options[buttonIndex])\n    //   }\n    // )\n  }\n\n  androidShowActionSheet() {\n    const { options } = this.props\n    ActionSheet.show(\n      {\n        options,\n        cancelButtonIndex: options.length-1\n      },\n      buttonIndex => {\n        this.setState({ selectedIndex: buttonIndex })\n        this.props.handleSelectValue(options[buttonIndex])\n      }\n    )\n  }\n\n  isOtherSelected() {\n    const { selectedValue, options } = this.props\n    const index = options.indexOf(selectedValue)\n    if (index < 0) return true\n    return false\n  }\n\n  render() {\n    const { selectedValue, style, textStyle, disabled } = this.props\n    return (\n      <TouchableHighlight\n        disabled={disabled}\n        style={style}\n        onPress={() => this.props.showSelect()}\n      >\n        <Text style={textStyle}>{selectedValue}</Text>\n      </TouchableHighlight>\n    )\n  }\n}","import React from 'react'\nimport { View, TextInput, Text } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { addHealthStatus, addTemperature } from '../../redux/school/actions/index'\nimport PickerComponent from '../picker'\n\nclass WellnessForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      other_option: ''\n    }\n  }\n\n  handleSelectStatus(student_id, record_id, status) {\n    if (status === 'Cancel') {\n      return\n    } else if (status === '其他') {\n      this.setState({\n        other_option: '其他'\n      })\n    } else {\n      this.props.addHealthStatus(student_id, record_id, status, this.props.teacher_id)\n    }\n  }\n\n  handleTempInput(student_id, record_id, temperature) {\n    const normalized_temperature = \n      temperature.slice(-1) === '.' ?\n        temperature.slice(0,2)\n        :\n      temperature.length === 3 ? \n        temperature.slice(0,2) + '.' + temperature.slice(-1)\n        : temperature\n    this.props.addTemperature(student_id, record_id, normalized_temperature, this.props.teacher_id)\n  }\n\n  render() {\n    const { student_id, record_id, records, records_with_error, autoFocus } = this.props\n    const wellness_data = records[record_id]\n    return (\n      <View\n        style={{\n          flex: 1,\n          flexDirection: 'row',\n          alignItems: 'center',\n          justifyContent: 'center',\n          borderWidth: 2,\n          borderColor: records_with_error.has(record_id) ? 'red' : 'transparent'\n        }}\n      >\n        <View \n          style={{ \n            flex: 1, \n            flexDirection: 'row', \n            backgroundColor: 'rgba(255,255,255, 0.5)', \n            marginRight: '10%', \n            justifyContent: 'center',\n            padding: 5\n          }}\n        >\n          <TextInput\n            style={{ fontSize: 40, width: 100, outline: 'none' }}\n            autoFocus={autoFocus}\n            keyboardType='decimal-pad'\n            placeholder='體溫'\n            value={'' + wellness_data.temperature}\n            onChangeText={(temp) => { this.handleTempInput(student_id, record_id, temp) }}\n          />\n          {wellness_data.temperature === '' ? null : <Text style={{ fontSize: 30 }}>°</Text>}\n        </View>\n        <View style={{ flex: 2 }}>\n          {this.state.other_option === '' ? \n            <PickerComponent\n              style={{ \n                backgroundColor: 'rgba(255,255,255, 0.5)',\n                alignItems: 'center',\n                padding: 5\n              }}\n              textStyle={{fontSize: 40}}\n              selectedValue={wellness_data.status}\n              options={[\n                \"健康寶寶\",\n                \"發燒\",\n                \"喉嚨偏紅\",\n                \"咳嗽\",\n                \"流⿐涕\",\n                \"頭痛\",\n                \"活動⼒不佳\",\n                \"嘔吐\", \n                \"糞便帶有⾎絲\",\n                \"拉肚子\",\n                \"其他\",\n                \"Cancel\"\n              ]}\n              handleOnClick={() => { }}\n              handleSelectValue={(status) => this.handleSelectStatus(student_id, record_id, status)}\n            />\n          : <TextInput\n              style={{ \n                fontSize: 40,\n                backgroundColor: 'rgba(255,255,255, 0.5)',\n                alignItems: 'center',\n                padding: 2\n              }}\n              keyboardType='default'\n              autoFocus={this.state.other_option !== ''}\n              selectTextOnFocus={true}\n              // placeholder=''\n              value={wellness_data.status}\n              onChangeText={(status) => { this.handleSelectStatus(student_id, record_id, status) }}\n              onBlur={() => this.setState({ other_option: ''})}\n            />\n          }\n        </View>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      // class: state.classInfo,\n    records: state.healthstatus.records,\n    records_with_error: state.healthstatus.records_with_error\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      ...bindActionCreators({\n          addHealthStatus,\n          addTemperature,\n      }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (WellnessForm)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, Dimensions } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate, post } from '../util'\nimport { sendWellnessDataFail, sendWellnessDataSuccess } from '../../redux/school/actions/index'\n\nconst { width, height } = Dimensions.get('window');\n\nclass StudentModal extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n        class_id: ''\n    }\n  }\n\n  componentDidMount() {\n    const { class_id, student_id } = this.props\n    if (class_id === 'all') {\n      this.getClassIdByStudentId(student_id)\n    } else {\n      this.setState({ class_id })\n    }\n  }\n\n  getClassIdByStudentId(student_id) {\n      const { classes } = this.props\n      const id = Object.keys(classes)\n      var class_id_found = ''\n      for(var i = 0; i < id.length; i++) {\n          const {students} = classes[id[i]]\n          for(var j = 0; j < students.length; j++) {\n              if (students[j] === student_id) {\n                  class_id_found = id[i]\n              }\n          }\n      }\n\n      this.setState({\n          class_id: class_id_found\n      })\n  }\n\n  async handleSend(record_id) {\n    const { wellness, isConnected } = this.props\n    const { class_id } = this.state\n    const { records } = wellness\n    const record = records[record_id]\n    if (record.temperature === '') {\n      Alert.alert(\n        '未填寫!',\n        '',\n        [{text: 'OK'}]\n      )\n      return\n    }\n\n    if (!isConnected) {\n        alert('拍謝 網路連不到! 等一下再試試看')\n    }\n\n    const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n    if (sendDataResult.success) {\n        this.props.fetchStudentAttendance()\n        this.props.sendWellnessDataSuccess()\n        this.props.hideModal()\n    } else {\n      this.props.sendWellnessDataFail(sendDataResult.message)\n    }\n  }\n\n  async markAbsent() {\n    const { student_id, school_id } = this.props\n    const { class_id } = this.state\n    const body = {\n      student_id,\n      class_id,\n      school_id,\n      startDate: formatDate(new Date()),\n      endDate: formatDate(new Date()),\n      excuse_type: 'none-medical',\n      note: '校方填寫'\n    }\n    const response = await post('/absence-excuse', body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        Alert.alert(\n            'Sorry 標記學生缺席時電腦出狀況了！',\n            '請截圖和與工程師聯繫\\n\\n' + message,\n            [{ text: 'Ok' }]\n        )\n        return \n    }\n    this.props.fetchStudentAttendance()\n    this.props.hideModal()\n  }\n\n  render() {\n    const { show, student_id, teacher_id, students, student_unmarked, student_absent, teacherOnDuty } = this.props\n    const student = students[student_id]\n    const { wellness } = this.props\n    const record_id = wellness.by_student_id[student_id][0]\n    return (\n        <View\n          style={{\n            flex: 1,\n            width: '80%',\n            height: height * 0.7,\n            backgroundColor:\n                student_absent.has(student_id) ? '#ffe1d0'\n                : student_unmarked.has(student_id) ? '#fff1b5'\n                : '#dcf3d0',\n            zIndex: 3,\n            position: 'absolute'\n          }}\n        >\n          <View style={{ flex: 2, flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center' }}>\n            <View style={{ flex: 1, alignItems: 'center' }}>\n              <Image\n                source={\n                  student.profile_picture === '' ?\n                      require('../../assets/icon-thumbnail.png')\n                      : {uri: student.profile_picture }\n              }\n                style={styles.thumbnailImage}\n              />\n            </View>\n            <View style={{ flex: 1, alignItems: 'flex-start' }}>\n              <Text style={{ fontSize: 60 }}>{student.name}</Text>\n              <TouchableHighlight\n                style={{ padding: 10, backgroundColor: 'lightgrey', justifyContent: 'center' }}\n                onPress={() => this.markAbsent()}\n              >\n                <Text style={{ fontSize: 40 }}>缺席</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n          \n          <View style={{ flex: 2 }}>\n            <View style={{ flex: 3, alignItems: 'center' }}>\n              <Text style={{ fontSize: 20 }}>血型: {student.blood_type} </Text>\n              <Text style={{ fontSize: 20 }}>地址: {student.address}</Text>\n              <Text style={{ fontSize: 20 }}>家裡電話: {student.home_phone}</Text>\n              <Text style={{ fontSize: 20 }}>（父）手機: {student.father_phone}</Text>\n              <Text style={{ fontSize: 20 }}>（母）手機: {student.mother_phone}</Text>\n            </View>\n            <View style={{ flex: 1, flexDirection: 'row', paddingHorizontal: 30 }}>\n              {student_unmarked.has(student_id) ? \n                <WellnessForm\n                  student_id={student_id}\n                  teacher_id={teacherOnDuty}\n                  record_id={record_id}\n                  autoFocus={true}\n                />\n              : null}\n            </View>\n          </View>\n\n          <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n            {student_unmarked.has(student_id) ?\n              <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'red', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={this.props.hideModal}\n                >\n                  <Text style={{ fontSize: 30 }}>取消</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'grey', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={() => this.handleSend(record_id)}\n                >\n                  <Text style={{ fontSize: 30 }}>送出</Text>\n                </TouchableHighlight>\n              </View>\n              : null\n            }\n          </View>\n        </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    // school: state.school,\n    classes: state.school.classes,\n    student_absent: state.school.student_absent,\n    student_unmarked: state.school.student_unmarked,\n    students: state.school.students,\n    wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({ sendWellnessDataFail, sendWellnessDataSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (StudentModal)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, TextInput, Dimensions } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate, post, formatTime, put } from '../util'\nimport { markPresent, sendWellnessDataFail, editTeacherOnDuty } from '../../redux/school/actions/index'\n\nconst { width, height } = Dimensions.get('window');\n\nclass TeacherModal extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n        temperature: ''\n    }\n  }\n\n  editTemperature(temperature) {\n    const normalized_temperature = \n      temperature.slice(-1) === '.' ?\n        temperature.slice(0,2)\n        :\n      temperature.length === 3 ? \n        temperature.slice(0,2) + '.' + temperature.slice(-1)\n        : temperature\n      this.setState({ temperature: normalized_temperature })\n  }\n\n  clock() {\n    const { isConnected, teacher_id, teachers } = this.props\n    const teacher = teachers[teacher_id]\n\n    if (!isConnected) {\n      Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n      })\n      return\n    }\n\n    if (teacher.present) {\n      const attendance_id = teacher.attendance[teacher.attendance.length - 1]\n      this.clockout(attendance_id)\n    } else {\n      this.clockin()\n    }\n  }\n\n  async clockout(attendance_id) {\n    const response = await put(`/staff-attendance/${attendance_id}`, {\n      out_time: formatDate(new Date()) + ' ' + formatTime(new Date())\n  })\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      Alert.alert(\n        'Sorry 打卡時電腦出狀況了！',\n        '請截圖和與工程師聯繫\\n\\n' + message,\n        [{ text: 'Ok' }]\n      )\n    }\n\n    this.props.fetchTeacherAttendance()\n    this.props.hideModal()\n  }\n\n  async clockin() {\n    const { isConnected, teacher_id } = this.props\n    const { temperature } = this.state\n\n    if (!isConnected) {\n        Toast.show({\n            text: '拍謝 網路連不到! 等一下再試試看',\n            buttonText: 'Okay',\n            position: \"top\",\n            type: \"warning\",\n            duration: 2000\n        })\n    }\n\n    const response = await post('/staff-attendance', {\n        teacher_id,\n        in_time: formatDate(new Date()) + ' ' + formatTime(new Date()),\n        temperature: temperature ? temperature : 0\n    })\n\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        Alert.alert(\n            'Sorry 打卡時電腦出狀況了！',\n            '請截圖和與工程師聯繫\\n\\n' + message,\n            [{ text: 'Ok' }]\n        )\n        return \n    }\n    this.props.fetchTeacherAttendance()\n    this.props.hideModal()\n  }\n\n  editTeacherOnDuty(teacher_id) {\n    const { teacherOnDuty, teachers } = this.props\n    var name = '未登入'\n    if (teacherOnDuty === teacher_id) {\n      this.props.editTeacherOnDuty('')\n    } else {\n      this.props.editTeacherOnDuty(teacher_id)\n      name = teachers[teacher_id].name\n    }\n    \n    this.props.navigation.setOptions({ \n        headerRight: () => (\n            <View style={{ paddingRight: 20 }}>\n                <Text style={{ fontSize: 30 }}>{`值班老師：${name}`}</Text>\n            </View>\n        )\n    })\n  }\n\n  // getTotalTime(record) {\n  //   const { teacher_id, teachers, attendance } = this.props\n  //   let total_hour = 0\n  //   let total_min = 0\n  //   for(var i = 0; i < teachers[teacher_id].attendance.length; i++){\n  //     const { in_time, out_time } = attendance[teachers[teacher_id].attendance[i]]\n  //     total_hour += parseInt(in_time)\n  //     total_min +=\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, teachers, unmarked, absent, teacherOnDuty, attendance } = this.props\n    const { temperature } = this.state\n    const teacher = teachers[teacher_id]\n    // console.log('teacher: ', teacher)\n    // const { wellness } = this.props\n    // const record_id = wellness.by_student_id[student_id][0]\n    // TODO: temperature\n    return (\n        <View\n          style={{\n            flex: 1,\n            width: '80%',\n            height: height * 0.9,\n            backgroundColor:\n              absent.has(teacher_id) ? '#ffe1d0'\n                : unmarked.has(teacher_id) ? '#fff1b5'\n                : '#dcf3d0',\n            zIndex: 3,\n            position: 'absolute'\n          }}\n        >\n          <View style={{ flex: 2, flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center', backgroundColor: 'red' }}>\n            <View style={{ flex: 1, alignItems: 'center' }}>\n              <Image\n                source={\n                    teacher.profile_picture === '' ?\n                      require('../../assets/icon-teacher-thumbnail.png')\n                      : {uri: teacher.profile_picture }\n                }\n                style={styles.thumbnailImage}\n              />\n            </View>\n            <View style={{ flex: 1 }}>\n              <Text style={{ fontSize: 60 }}>{teacher.name}</Text>\n              <TouchableHighlight\n                onPress={() => this.editTeacherOnDuty(teacher_id)}\n                underlayColor='transparent'\n              >\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <Image\n                    source={teacherOnDuty === teacher_id ? \n                      require('../../assets/icon-checked-box.png')\n                    : require('../../assets/icon-unchecked-box.png')}\n                    style={{ width: 80, height: 80 }}\n                  />\n                  <Text style={{ fontSize: 40 }}>值班老師</Text>\n                </View>\n              </TouchableHighlight>\n            </View>\n          </View>\n\n          <View style={{ flex: 1, paddingHorizontal: 30, flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center' }}>\n            <View style={{ flex: 1, backgroundColor: 'lightgrey' }}>\n              <TextInput\n                style={{ fontSize: 50, textAlign: 'center' }}\n                keyboardType='decimal-pad'\n                placeholder='體溫'\n                value={'' + temperature}\n                onChangeText={(temperature) => this.editTemperature(temperature)}\n              />\n            </View>\n            <View style={{ flex: 1, backgroundColor: 'lightblue' }}>\n            </View>\n          </View>\n          \n          <View style={{ flex: 1, paddingHorizontal: 30, justifyContent: 'space-evenly', alignItems: 'center' }}>\n            {teacher.attendance && teacher.attendance.map((attendance_id) => {\n              const record = attendance[attendance_id]\n              return (\n                <View key={attendance_id} style={{ flex: 1, flexDirection: 'row', width: '60%', justifyContent: 'space-around' }}>\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 50 }}>{record.in_time}</Text>\n                  </View>\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 50 }}>{record.out_time}</Text>\n                  </View>\n                </View>\n              )\n            })}\n\n            <View style={{ flexDirection: 'row', alignSelf: 'flex-end',  backgroundColor: 'white', padding: 10 }}>\n              <Text style={{ fontSize: 25}}>今日總計: {Math.round(teacher.total_minutes*100) / 100}</Text>\n            </View>\n          </View>\n\n          <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n            {/* {unmarked.has(teacher_id) ? */}\n              <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'red', flex: 1, height: 80, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={this.props.hideModal}\n                >\n                  <Text style={{ fontSize: 40 }}>取消</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'grey', flex: 1, height: 80, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={() => this.clock()}\n                >\n                  <Text style={{ fontSize: 40 }}>打卡</Text>\n                </TouchableHighlight>\n              </View>\n              {/* : null\n            } */}\n          </View>\n        </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    attendance: state.school.attendance,\n    teachers: state.school.teachers,\n    teacherOnDuty: state.school.teacherOnDuty,\n    unmarked: state.school.teacher_unmarked,\n    absent: state.school.teacher_absent,\n    // wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail, editTeacherOnDuty}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherModal)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, Dimensions } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate } from '../util'\nimport { markPresent, sendWellnessDataFail } from '../../redux/school/actions/index'\nimport StudentModal from './studentmodal'\nimport TeacherModal from './teachermodal'\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  // async handleSend(record_id) {\n  //   const { wellness, class_id, isConnected } = this.props\n  //   const { records } = wellness\n  //   const record = records[record_id]\n  //   if (record.temperature === '') {\n  //     Alert.alert(\n  //       '未填寫!',\n  //       '',\n  //       [{text: 'OK'}]\n  //     )\n  //     return\n  //   }\n\n  //   if (!isConnected) {\n  //       Toast.show({\n  //           text: '拍謝 網路連不到! 等一下再試試看',\n  //           buttonText: 'Okay',\n  //           position: \"top\",\n  //           type: \"warning\",\n  //           duration: 2000\n  //       })\n  //   }\n\n  //   const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n  //   if (sendDataResult.success) {\n  //     sendDataResult.data.forEach(student_id => {\n  //       this.props.markPresent(student_id, new Date)\n  //     })\n  //   } else {\n  //     this.props.sendWellnessDataFail(sendDataResult.message)\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id, school_id } = this.props\n    if (!show) {\n      return null\n    }\n    const student = students[student_id]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          justifyContent: 'flex-start',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        behavior='height'\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={this.props.hideModal}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        {student_id !== '' ?\n          <StudentModal\n            student_id={student_id}\n            // teacher_id={teacher_id}\n            teacherOnDuty={teacherOnDuty}\n            class_id={class_id}\n            school_id={school_id}\n            // unmarked={unmarked}\n            // absent={absent}\n            fetchStudentAttendance={() => this.props.fetchStudentAttendance()}\n            hideModal={this.props.hideModal}\n          />\n          : <TeacherModal \n              teacher_id={teacher_id}\n              teacherOnDuty={teacherOnDuty}\n              navigation={this.props.navigation}\n              // class_id={class_id}\n              // unmarked={unmarked}\n              // absent={absent}\n              fetchTeacherAttendance={() => this.props.fetchTeacherAttendance()}\n              hideModal={this.props.hideModal}\n            />\n        }\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.classInfo.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)","import React, {useState, useEffect} from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card, CardItem, Button, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { getParentMessageSuccess } from '../../redux/school/actions/index'\nimport { formatHourMinute, get, formatDate } from '../util'\n\nconst InboxCard = React.forwardRef((props, ref) => {\n    const navigate = useNavigate()\n    const [state, setState] = useState({\n            messages: []\n        })\n\n    useEffect(() => {\n        const { date } = props\n        fetchData(new Date(date))\n    })\n\n    // componentDidUpdate(prevProps) {\n    //     if(prevProps.date !== props.date) {\n    //         const { date } = props\n    //         fetchData(new Date(date))\n    //     }\n    // }\n\n    const fetchData = async(date) => {\n        const { class_id } = props\n        // let yesterday = new Date()\n        // yesterday.setDate(yesterday.getDate() - 1)\n        // const date = new Date()\n        // console.log('date: ', date)\n        const { isConnected } = props.class\n        if (!isConnected) {\n            // Toast.show({\n            //     text: '網路連線連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     position: \"top\",\n            //     type: \"danger\",\n            //     duration: 4000\n            // })\n            alert('網路連線連不到! 等一下再試試看')\n            return\n        }\n\n        const response = await get(`/message/class/${class_id}/unread?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                `Sorry 取得家長訊息時電腦出狀況了！`,\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n            )\n            return \n        }\n        setState({ messages: data })\n        denormalize(data)\n    }\n\n    const denormalize = (messages) => {\n        let denormalized = {}\n        for(var i = 0; i < messages.length; i++) {\n            denormalized[messages[i].student_id] = messages[i].message_for_teacher\n        }\n        // console.log('denormalized: ', denormalized)\n        props.getParentMessageSuccess(denormalized)\n    }\n\n    const messageIsRead = (message_read, morning_reminder_read) => {\n        if (message_read !== null && !message_read) return false\n        if (morning_reminder_read !== null && !morning_reminder_read) return false\n        return true\n    }\n\n    const { students, class_id, date } = props\n    const { messages } = state\n    // const { requests, unfinished } = props.medication_requests\n    const viewing_previous = date.toDateString() !== (new Date()).toDateString()\n    return (\n        <Card style={{ flex: 1, width: '90%'}}>\n            <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>訊息</Text>\n                <TouchableHighlight\n                    style={{\n                        width: '25%',\n                        alignSelf: 'flex-end',\n                        position: 'absolute',\n                        padding: 5,\n                        backgroundColor: '#b5e9e9'\n                    }}\n                    onPress={() => {\n                        navigate('/class/inbox', { \n                            state: {\n                                messages,\n                                students,\n                                class_id,\n                                date,\n                                // onGoBack: (date) => fetchData(date)\n                            },\n                            data: {\n                                onGoBack: (date) => fetchData(date)\n                            }\n                        })\n                    }}\n                >\n                    <Text style={styles.button_text}>查看</Text>\n                </TouchableHighlight>\n            </View>\n            <View style={{ }}>\n                <ScrollView horizontal={true}>\n                    {messages.map((message, index) => {\n                        const { activities, items_to_bring, message_for_teacher, other_activity, other_item, \n                            student_id, teacher_id, text, message_read, morning_reminder_read  } = message\n                        if (messageIsRead(message_read, morning_reminder_read) && !viewing_previous) return null\n                        return (\n                            <TouchableHighlight\n                                key={index}\n                                style={{ flex: 1, margin: 3 }}\n                                onPress={() => {\n                                    navigate('/class/inbox', { state: {\n                                        messages,\n                                        students,\n                                        class_id,\n                                        date,\n                                        onGoBack: (date) => fetchData(date)\n                                    }})\n                                }}\n                            >\n                                <Card style={{ flex:1, alignItems: 'center', padding: 15 }}>\n                                    {/* <View style={{ justifyContent: 'center' }}>\n                                        <Text style={{ fontSize: 35 }}>{time}</Text>\n                                    </View> */}\n                                    <View style={{ justifyContent: 'center' }}>\n                                        <Image\n                                            source={\n                                                students[student_id].profile_picture === '' ?\n                                                    require('../../assets/icon-thumbnail.png')\n                                                    : {uri: students[student_id].profile_picture} \n                                            }\n                                            style={styles.thumbnailImage}/>\n                                    </View>\n                                    <View\n                                        style={{ justifyContent: 'center' }}\n                                    >\n                                        <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                                    </View>\n                                </Card>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </ScrollView>\n            </View>\n        </Card>\n    )\n})\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ getParentMessageSuccess }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (InboxCard)","import React from 'react'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { beautifyTime } from '../util'\nimport Reloading from '../reloading'\n\nconst AbsenceCard = (props) => {\n\n    console.log('this.props: ', props)\n    const { class_students, students, student_absent, student_unmarked } = props\n    console.log('student_absent: ', student_absent)\n    // console.log('[...student_absent]: ', [...student_absent])\n    console.log('student_unmarked: ', student_unmarked)\n    // console.log('[...student_unmarked]: ', [...student_unmarked])\n    if (typeof student_absent === 'object' || typeof student_unmarked === 'object' ) {\n        return (\n            <Reloading />\n        )\n    }\n    // console.log('this.props.medication_requests: ', this.props.medication_requests)\n    return (\n        <div style={{ flex: 1, width: '90%'}}>\n            <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>出席狀況</Text>\n            </View>\n            <View style={{ }}>\n                <ScrollView horizontal={true}>\n                    {[...student_unmarked].map((student_id) => {\n                        const student = class_students[student_id]\n                        if (student === undefined) return\n                        return (\n                            <TouchableHighlight\n                                key={student_id}\n                                style={{ flex: 1, margin: 3 }}\n                                onPress={() => {\n                                    props.showLoginNumberPad(student_id)\n                                }}\n                            >\n                                <div style={{ flex:1, alignItems: 'center', paddingHorizontal: 15, padding: 10, backgroundColor: '#fff1b5' }}>\n                                    <View style={{ justifyContent: 'center' }}>\n                                        <Image\n                                            source={\n                                                student.profile_picture === '' || student.profile_picture === null ?\n                                                    require('../../assets/icon-thumbnail.png')\n                                                    : {uri: student.profile_picture} \n                                            }\n                                            style={styles.thumbnailImage}/>\n                                    </View>\n                                    <View\n                                        style={{ justifyContent: 'center' }}\n                                    >\n                                        <Text style={{ fontSize: 25 }}>{student.name}</Text>\n                                    </View>\n                                </div>\n                            </TouchableHighlight>\n                        )\n                    })}\n\n                    {[...student_absent].map((student_id) => {\n                        const student = class_students[student_id]\n                        if (student === undefined) return\n                        return (\n                            <TouchableHighlight\n                                key={student_id}\n                                style={{ flex: 1, margin: 3 }}\n                                onPress={() => {\n                                    props.showLoginNumberPad(student_id)\n                                }}\n                            >\n                                <div style={{ flex:1, alignItems: 'center', paddingHorizontal: 15, padding: 10, backgroundColor: '#ffe1d0' }}>\n                                    <View style={{ justifyContent: 'center' }}>\n                                        <Image\n                                            source={\n                                                student.profile_picture === '' ?\n                                                    require('../../assets/icon-thumbnail.png')\n                                                    : {uri: student.profile_picture} \n                                            }\n                                            style={styles.thumbnailImage}/>\n                                    </View>\n                                    <View\n                                        style={{ justifyContent: 'center' }}\n                                    >\n                                        <Text style={{ fontSize: 25 }}>{student.name}</Text>\n                                    </View>\n                                </div>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </ScrollView>\n            </View>\n        </div>\n    )\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        attendance: state.school.attendance,\n        students: state.school.students,\n        student_absent: state.school.student_absent,\n        student_unmarked: state.school.student_unmarked\n    }\n}\n\nexport default connect(mapStateToProps, null) (AbsenceCard)","import React from 'react'\nimport { \n    View, \n    Text,\n    TouchableHighlight,\n    Dimensions,\n    Platform } from 'react-native'\nimport DatePicker from 'react-datepicker'\nimport \"react-datepicker/dist/react-datepicker.css\"\n\nconst { width } = Dimensions.get('window')\n\nexport default class TimeModal extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            datetime: new Date(),\n            isLoading: true\n            // max_date: (new Date()).setDate((new Date()).getDate() + 7)\n        }\n    }\n\n    componentDidMount() {\n        const { start_date } = this.props\n        this.setState({\n            datetime: start_date,\n            isLoading: false\n        })\n    }\n\n    isIOS() {\n        if (Platform.OS === 'ios') {\n          return true\n        } else return false\n      }\n\n    setDate(datetime) {\n        if (this.isIOS()) {\n            this.iosSetDate(datetime)\n        } else {\n            this.androidSetDate(datetime)\n        }\n        // if (datetime !== undefined) {\n        //     this.setState({datetime})\n        // } else {\n        //     this.props.hideModal()\n        // }\n    }\n\n    iosSetDate(datetime) {\n        this.setState({datetime})\n    }\n\n    androidSetDate(datetime) {\n        if (datetime !== undefined) {\n            this.props.selectDatetimeConfirm(datetime)\n        //     this.props.hideModal()\n        } else {\n            this.props.hideModal()\n        }\n        // this.props.hideModal()\n    }\n\n    selectDatetimeConfirm(date) {\n        // const { datetime } = this.state\n        this.props.selectDatetimeConfirm(date)\n        this.props.hideModal()\n    }\n\n    onChange = date => {\n        console.log(date)\n    }\n    \n    isWeekday = date => {\n        const special_date = new Date('September 26, 2020')\n        const day = date.getDay()\n        return (day !== 0 && day !== 6) || date.toDateString() === special_date.toDateString();\n    };\n\n    render() {\n        const { datetime_type, minDatetime, maxDatetime, minTime, maxTime, paddingVertical } = this.props\n        const { datetime, isLoading } = this.state\n        if (isLoading) {\n            return null\n        }\n        return (\n            <TouchableHighlight\n                style={{ \n                    width: '100%',\n                    height: '100%', \n                    zIndex: 2,\n                    position: 'absolute',\n                    paddingVertical,\n                    // justifyContent: 'center', \n                    alignItems: 'center', \n                    backgroundColor: 'rgba(0,0,0,0.7)' \n                }}\n                // onPress={() => this.props.hideModal()}\n            >\n                <View style={{ }}>\n                    {datetime_type === 'date' &&\n                        <DatePicker\n                            onChange={(date) => this.selectDatetimeConfirm(date)}\n                            inline\n                            selected={datetime}\n                            minDate={new Date(minDatetime)}\n                            maxDate={new Date(maxDatetime)}\n                            onClickOutside={() => this.props.hideModal()}\n                            // filterDate={this.isWeekday}\n                        />\n                    }\n\n                    {datetime_type === 'time' && \n                        <DatePicker\n                            onChange={(time) => this.selectDatetimeConfirm(time)}\n                            showTimeSelect\n                            showTimeSelectOnly\n                            timeIntervals={30}\n                            timeCaption=\"Time\"\n                            dateFormat=\"h:mm aa\"\n                            selected={datetime}\n                            minTime={minTime}\n                            maxTime={maxTime}\n                            onClickOutside={() => this.props.hideModal()}\n                        />\n                    }\n                </View>\n            </TouchableHighlight>\n        )\n    }\n}","import React, { useEffect, useState, useRef } from 'react'\nimport { Text, Button, Container, Content, Toast} from 'native-base'\nimport { StyleSheet, View, AppState, Alert, TouchableHighlight, Image } from 'react-native'\nimport { setConnectState, initializeClass, setClassId, fetchStudentAttendanceSuccess, clearState } from '../../redux/school/actions/index'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport LoginNumberPad from './loginnumberpad'\nimport AttendanceCard from './attendancecard'\nimport MedicationReqeustCard from './medicationrequestcard'\nimport Reloading from '../reloading'\nimport PickupAlert from './pickupalert'\nimport Modal from './modal'\nimport NetInfo from '@react-native-community/netinfo'\nimport InboxCard from './inboxcard'\nimport { beautifyDate, formatDate, get } from '../util'\nimport AbsenceCard from './absencecard'\nimport TimeModal from '../parent/timemodal'\nimport ENV from '../../variables'\nimport { useNavigate, useLocation } from 'react-router-dom'\n\n\n\n// -api ping tai ying yung cheng shi jie mien\n\nconst TeacherHome = (props) => {\n    let navigate = useNavigate()\n    const location = useLocation();\n    const refs = {\n        messages: useRef(null),\n        med_request: useRef(null)\n    }\n    const [state, setState] = useState({\n        date: new Date(),\n        isLoading: true,\n        showLoginNumberPad: false,\n        pageClicked: '',\n        alertForPickup: false,\n        pickupQueue: [],\n        showModal: false,\n        modalStudentId: '',\n        modalTeacherId: '',\n        isAdmin: false,\n        admin_id: '',\n        appState: '',\n        showDateTimeModal: false\n    })\n\n    useEffect(() => {\n        console.log('teacher home / useEffect')\n        initializeConnectionStatus()\n        const { class_name, isAdmin, admin_id } = props\n        const { class_id } = location?.state || {}\n        setState({ ...state, isAdmin, admin_id })\n        props.setClassId(class_id)\n        initializeClass(class_id)\n        const timeoutId = timer(class_id)\n        // props.navigation.setOptions({ \n        //     title: class_name\n        // })\n        fetchStudentAttendance()\n        // TODO: AppState.addEventListener(\"change\", _handleAppStateChange);\n\n        return () => {\n            console.log('unmounting')\n            clearTimeout(timeoutId)\n            // TODO: AppState.removeEventListener(\"change\", _handleAppStateChange);\n            window.removeEventListener('online', console.log('removing online listener'))\n            window.removeEventListener('offline', console.log('removing offline listener'))\n            // props.clearState()\n        }\n    }, [])\n\n    const initializeConnectionStatus = () => {\n        if (window.navigator.onLine) {\n            setOnline()\n            window.addEventListener('online', (e) => { \n                console.log('online');\n                setOnline()\n            });\n            window.addEventListener('offline', (e) => {\n                console.log('offline'); \n                setOffline()\n            });\n        } else {\n            setOffline()\n        }\n    }\n\n    const setOnline = () => {\n        props.setConnectState(true)\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n        //     )\n        // })\n    }\n\n    const setOffline = () => {\n        props.setConnectState(false)\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#fa625f', marginRight: 20 }} />\n        //     )\n        // })\n    }\n\n    const timer = (class_id) => setTimeout(() => {\n        poll(class_id)\n    }, 10000)\n\n    const poll = async(class_id) => {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/class/${class_id}/updates`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => { // TODO: make sure to disable this polling for admin log in\n                // console.log('teacherhome/poll/resJson: ', resJson)\n                const update_types = resJson.data\n                update_types.forEach(type => {\n                    // console.log('type: ', type)\n                    if (type === 'attendance') {\n                        fetchStudentAttendance()\n                    } else {\n                        refs[type].fetchData(state.date)\n                    }\n                })\n            })\n            .catch(err => {\n                console.log('teacherhome poll err: ', err)\n            })\n        const timeoutId = timer(class_id)\n    }\n\n    const initializeClass = (class_id) => {\n        console.log('initializeClass')\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/class/${class_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then((res) => res.json())\n            .then((resJson) => {\n                // console.log('teacherHome/resJson: ', resJson)\n                props.initializeClass(resJson.teachers, resJson.students)\n                setState({\n                    ...state,\n                    isLoading: false\n                })\n        }).catch(err => {\n            console.log('initializeClass err: ', err)\n        })\n    }\n\n    const _handleAppStateChange = nextAppState => {\n        if (\n            state.appState.match(/inactive|background/) &&\n            nextAppState === \"active\"\n        ) {\n            if (state.date.toDateString() !== (new Date).toDateString()) {\n                setState({ ...state, isLoading: true })\n                // console.log('state.date.toDateString() !== (new Date).toDateString()')\n                const { class_id } = location?.state || {}\n                props.clearState()\n                props.setClassId(class_id)\n                initializeClass(class_id)\n                unsubscribe = NetInfo.addEventListener(state => {\n                    const {isConnected} = state\n                    props.setConnectState(isConnected)\n                    // if (isConnected) {\n                    //     props.navigation.setOptions({ \n                    //         headerRight: () => (\n                    //             <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n                    //         )\n                    //     })\n                    // } else {\n                    //     props.navigation.setOptions({ \n                    //         headerRight: () => (\n                    //             <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#fa625f', marginRight: 20 }} />\n                    //         )\n                    //     })\n                    // }\n                });\n            }\n        }\n        setState({ ...state, appState: nextAppState, date: new Date() });\n    };\n\n    const handleEnterPasscode = (passcode) => {\n        const { date } = state\n        const { passcodeAdminId, passcodeTeacherId, teachers } = props\n        const teacher_id = passcodeTeacherId[passcode] || passcodeAdminId[passcode]\n        const isAdmin = passcodeAdminId[passcode] !== undefined\n\n        if (teacher_id === undefined) {\n            Toast.show({\n                text: '密碼不正確!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 3000\n            })\n        } else if (state.pageClicked === 'attendance_modal') {\n            setState({\n                ...state, \n                showModal: true,\n                showLoginNumberPad: false,\n                modalTeacherId: teacher_id\n            })\n        } else {\n            navigate(`${state.pageClicked}`, { state: {\n                teacher_id: teacher_id,\n                class: props.class,\n                date,\n                isAdmin,\n                teacher_name: teachers[teacher_id].name\n            }})\n            setState({ ...state, showLoginNumberPad: false })\n        }\n    }\n\n    const pageClicked = (pageClicked) => {\n        const { isAdmin, admin_id, date } = state\n        if (isAdmin) {\n            navigate(`/${pageClicked}`, { state: {\n                class: props.class,\n                teacher_id: admin_id,\n                date,\n                isAdmin,\n                teacher_name: props.teachers[admin_id].name\n            }})\n        } else {\n            setState({ ...state, showLoginNumberPad: true, pageClicked})\n        }\n    }\n\n    const hideLoginPad = () => {\n        setState({ ...state, showLoginNumberPad: false })\n    }\n\n    const onConfirmPickup = () => {\n        var newPickupQueue = state.pickupQueue.slice(1, state.pickupQueue.length)\n        setState({\n            ...state, \n            alertForPickup: newPickupQueue.length === 0 ? false : true,\n            pickupQueue: newPickupQueue\n        })\n    }\n\n    const handleShowModal = (student_id) => {\n        setState({\n            ...state, \n            showLoginNumberPad: true,\n            pageClicked: 'attendance_modal',\n            modalStudentId: student_id\n        })\n    }\n\n    const fetchStudentAttendance = async() => {\n        const { class_id } = location?.state || {}\n        const date = formatDate(state.date)\n        const response = await get(`/attendance/class?class_id=${class_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                'Sorry 取得學生出席資料時電腦出狀況了！',\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n            )\n            return \n        }\n        console.log('data: ', data)\n        const { attendance, students, present, absent } = data\n        props.fetchStudentAttendanceSuccess(attendance, students, present, absent)\n    }\n\n    const hideModal = () => {\n        setState({\n            ...state, \n            showModal: false\n        })\n    }\n\n    const selectDatetimeConfirm = (date) => {\n        const { isAdmin } = state\n        if (!isAdmin || hasUnsentRecords()) return\n        setState({\n            ...state, \n            date,\n            showDateTimeModal: false\n        })\n    }\n\n    const goBackADay = () => {\n        const date = new Date(state.date.getTime())\n        if (date.getDay() === 1) {\n            date.setDate(date.getDate() - 3)\n        } else {\n            date.setDate(date.getDate() - 1)\n        }\n        selectDatetimeConfirm(date)\n    }\n\n    const goForwardADay = () => {\n        const date = new Date(state.date.getTime())\n        if (date.getDay() === 5) {\n            date.setDate(date.getDate() + 3)\n        } else {\n            date.setDate(date.getDate() + 1)\n        }\n        selectDatetimeConfirm(date)\n    }\n\n    const hasUnsentRecords = () => {\n        const { wellness_dispatched, message_dispatched, appetite_dispatched, sleep_dispatched, milk_dispatched, diaper_dispatched } = props\n        const all_data_dispatched = wellness_dispatched && message_dispatched && appetite_dispatched && sleep_dispatched && milk_dispatched && diaper_dispatched\n        if (all_data_dispatched) {\n            return false\n        }\n        return true\n    }\n\n    const { school_id } = props\n    const { class_id } = location?.state || {}\n    const { isLoading, date, showModal, modalStudentId, modalTeacherId, showDateTimeModal, isAdmin } = state\n    const { wellness_dispatched, message_dispatched, appetite_dispatched, sleep_dispatched, milk_dispatched, diaper_dispatched } = props\n    console.log('isLoading: ', isLoading)\n    if (isLoading) {\n        return (\n            <Reloading />\n        )\n    }\n    return (\n        <Container style={{ flex: 1 }}>\n            {state.showLoginNumberPad ? \n                <LoginNumberPad\n                    handleEnterPasscode={(passcode) => handleEnterPasscode(passcode)}\n                    hideLoginPad={hideLoginPad}\n                /> : null\n            }\n            \n            {showDateTimeModal && <TimeModal\n                start_date={date}\n                datetime_type={'date'}\n                hideModal={() => setState({ ...state, showDateTimeModal: false })}\n                selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n                minDatetime={null}\n                maxDatetime={new Date()}\n            />}\n\n            <Modal\n                show={showModal}\n                student_id={modalStudentId}\n                teacher_id={null}\n                teacherOnDuty={modalTeacherId}\n                class_id={class_id}\n                school_id={school_id}\n                navigation={navigate}\n                // unmarked={unmarked}\n                // absent={absent}\n                fetchStudentAttendance={() => fetchStudentAttendance()}\n                fetchTeacherAttendance={() => {return null}}\n                hideModal={() => hideModal()}\n            />\n\n            <Content contentContainerStyle={{\n                marginTop: 30,\n                paddingBottom: 50,\n                alignItems: 'center',\n                justifyContent: 'center'\n            }}>\n                {/* <Button\n                    style={styles.button}\n                    onPress={() => {props.navigation.push('TeacherClockInOut')}}>\n                    <Text style={styles.button_text}>打卡</Text>\n                </Button> */}\n\n                {/* <View style={styles.card}>\n                    {props.attendance.initialized ? \n                        <AttendanceCard\n                            ref=\"attendance\"\n                            navigator={props.navigation}\n                            showModal={(student_id) => showModal(student_id)}\n                        />\n                    : <Reloading />\n                    }\n                </View> */}\n                <View style={{ flexDirection: 'row', justifyContent: 'space-between'}}>\n                    <View style={{ width: '15%'}}>\n                        <TouchableHighlight\n                            style={{ flex: 1, justifyContent: 'center', alignItems: 'center'}}\n                            onPress={() => goBackADay()}\n                        >\n                            <Image\n                                source={require('../../assets/icon-back.png')}\n                                style={{ width: 40, height: 40 }}\n                            />\n                        </TouchableHighlight>\n                    </View>\n\n                    <TouchableHighlight\n                        onPress={() => {\n                            if (!isAdmin || hasUnsentRecords()) return\n                            setState({ ...state, showDateTimeModal: true })\n                        }}\n                    >\n                        <Text style={{ fontSize: 50 }}>{beautifyDate(date)}</Text>\n                    </TouchableHighlight>\n\n                    <View style={{ width: '15%'}}>\n                        {date.toDateString() !== (new Date).toDateString() &&\n                            <TouchableHighlight\n                                style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}\n                                onPress={() => goForwardADay()}\n                            >\n                                <Image\n                                    source={require('../../assets/icon-forward.png')}\n                                    style={{ width: 40, height: 40 }}\n                                />\n                            </TouchableHighlight>\n                        }\n                    </View>\n                </View>\n\n                <InboxCard\n                    // ref={refs[\"messages\"]}\n                    class_id={class_id}\n                    students={props.class.students}\n                    navigation={navigate}\n                    date={date}\n                />\n\n                <MedicationReqeustCard //TODO: are we getting med requests real time? or was it slow internet?\n                    // ref={refs[\"med_request\"]}\n                    class_id={class_id}\n                    students={props.class.students}\n                    medication_requests={props.medication_requests}\n                    navigation={navigate}\n                    date={date}\n                />\n\n                <View style={styles.button_row}>\n                    <TouchableHighlight\n                        style={styles.record_button}\n                        onPress={() => pageClicked('wellness')}\n                    >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                            <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                {!wellness_dispatched ? \n                                    <Image\n                                        source={require('../../assets/icon-bookmark.png')}\n                                        style={{\n                                            width: 25,\n                                            height: 25,\n                                            marginTop: 3,\n                                            alignSelf: 'flex-end'\n                                        }}\n                                    /> \n                                : null}\n                            </View>\n                            <Text style={styles.button_text}>健康</Text>\n                        </View>\n                    </TouchableHighlight>\n\n                    <TouchableHighlight\n                        style={styles.record_button}\n                        onPress={() => pageClicked('message')}\n                    >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                            <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                {!message_dispatched ? \n                                    <Image\n                                        source={require('../../assets/icon-bookmark.png')}\n                                        style={{\n                                            width: 25,\n                                            height: 25,\n                                            marginTop: 3,\n                                            alignSelf: 'flex-end'\n                                        }}\n                                    /> \n                                : null}\n                            </View>\n                            <Text style={styles.button_text}>老師{\"\\n\"}留⾔</Text>\n                        </View>\n                    </TouchableHighlight>\n\n                    <TouchableHighlight\n                        style={styles.record_button}\n                        onPress={() => pageClicked('appetite')}\n                    >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                            <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                {!appetite_dispatched ? \n                                    <Image\n                                        source={require('../../assets/icon-bookmark.png')}\n                                        style={{\n                                            width: 25,\n                                            height: 25,\n                                            marginTop: 3,\n                                            alignSelf: 'flex-end'\n                                        }}\n                                    /> \n                                : null}\n                            </View>\n                            <Text style={styles.button_text}>飲食</Text>\n                        </View>\n                    </TouchableHighlight>\n                </View>\n                <View style={styles.button_row}>\n                    <TouchableHighlight\n                        style={styles.record_button}\n                        onPress={() => pageClicked('sleep')}\n                    >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                            <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                {!sleep_dispatched ? \n                                    <Image\n                                        source={require('../../assets/icon-bookmark.png')}\n                                        style={{\n                                            width: 25,\n                                            height: 25,\n                                            marginTop: 3,\n                                            alignSelf: 'flex-end'\n                                        }}\n                                    /> \n                                : null}\n                            </View>\n                            <Text style={styles.button_text}>睡眠</Text>\n                        </View>\n                    </TouchableHighlight>\n\n                    <TouchableHighlight\n                        style={styles.record_button}\n                        onPress={() => pageClicked('TeacherMilkLog')}\n                    >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                            <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                {!milk_dispatched ? \n                                    <Image\n                                        source={require('../../assets/icon-bookmark.png')}\n                                        style={{\n                                            width: 25,\n                                            height: 25,\n                                            marginTop: 3,\n                                            alignSelf: 'flex-end'\n                                        }}\n                                    /> \n                                : null}\n                            </View>\n                            <Text style={styles.button_text}>餵奶</Text>\n                        </View>\n                    </TouchableHighlight>\n\n                    <TouchableHighlight\n                        style={styles.record_button}\n                        onPress={() => pageClicked('DiaperLog')}\n                    >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                            <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                {!diaper_dispatched ? \n                                    <Image\n                                        source={require('../../assets/icon-bookmark.png')}\n                                        style={{\n                                            width: 25,\n                                            height: 25,\n                                            marginTop: 3,\n                                            alignSelf: 'flex-end'\n                                        }}\n                                    /> \n                                : null}\n                            </View>\n                            <Text style={styles.button_text}>換尿布</Text>\n                        </View>\n                    </TouchableHighlight>\n                </View>\n\n                <AbsenceCard\n                    class_students={props.class.students}\n                    showLoginNumberPad={(student_id) => setState({\n                        ...state,\n                        showLoginNumberPad: true,\n                        modalStudentId: student_id,\n                        pageClicked: 'attendance_modal'\n                    })}\n                />\n                <TouchableHighlight\n                    style={styles.button}\n                    onPress={() => navigate(-1)}>\n                    <Text style={styles.button_text}>返回</Text>\n                </TouchableHighlight>\n            </Content>\n        </Container>\n    )\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%'\n    },\n    button_row: {\n        width: '90%',\n        height: 100,\n        justifyContent: 'space-between',\n        flexDirection: 'row',\n        marginVertical: 7,\n        paddingHorizontal: 3\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 40\n    },\n    record_button: {\n        width: '30%',\n        height: '100%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        medication_requests: state.medicationrequests,\n        attendance: state.attendance,\n        teachers: state.school.teachers,\n        passcodeAdminId: state.school.passcodeAdminId,\n        passcodeTeacherId: state.school.passcodeTeacherId,\n        wellness_dispatched: state.healthstatus.data_dispatched,\n        message_dispatched: state.message.data_dispatched,\n        appetite_dispatched: state.appetite.data_dispatched,\n        sleep_dispatched: state.sleep.data_dispatched,\n        milk_dispatched: state.milk.data_dispatched,\n        diaper_dispatched: state.diaper.data_dispatched\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({setConnectState, initializeClass, setClassId, fetchStudentAttendanceSuccess, clearState}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherHome)","import React, { useState, useEffect } from 'react'\nimport { View, Text, TouchableHighlight, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport Auth from '@aws-amplify/auth'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { \n    setConnectState, \n    fetchClassesSuccess, \n    fetchTeachersSuccess, \n    fetchStudentsSuccess,\n    initializeStudentWellness,\n    clearSchoolState,\n    addPickupRequest,\n    updateViewingStatus,\n    fetchStudentAttendanceSuccess } from '../../redux/school/actions/index'\nimport { get, formatDate } from '../util'\nimport NetInfo from '@react-native-community/netinfo'\nimport LoginNumberPad from './loginnumberpad'\n// import PickupAlert from './pickupalert'\nimport ENV from '../../variables'\nimport { useNavigate } from \"react-router-dom\";\n\nconst SchoolHome = (props) => {\n    let navigate = useNavigate();\n    const [state, setState] = useState({\n        classes: [],\n        err_message: '',\n        showLoginNumberPad: false,\n        pageClicked: '',\n        class_id: '',\n        admin_id: ''\n    })\n\n    useEffect(() => {\n        console.log('useEffect')\n        window.addEventListener('offline', (e) => {\n            props.setConnectState(false) \n        });\n        window.addEventListener('online', () => {\n            props.setConnectState(true)\n        });\n        const { school_id } = props\n        async function fetchClass() {\n            await fetchClassIdAndName()\n            fetchTeacherData(school_id)\n            fetchStudentData(school_id)\n        }\n        fetchClass()\n\n        return () => {\n            console.log('school home / useEffect return ')\n            window.removeEventListener('offline', (e) => {\n                props.setConnectState(false) \n            });\n            window.removeEventListener('online', (e) => {\n                props.setConnectState(false) \n            });\n            // TODO: props.clearSchoolState()\n        }\n    },[])\n\n    const fetchClassIdAndName = async() => {\n        const { school_id } = props\n        await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/school/${school_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 取得教室資料時電腦出狀況了！請截圖和與工程師聯繫 ' + message)\n                    return\n                }\n                setState({\n                    ...state,\n                    classes: data.classes\n                })\n                const classes = {}\n                data.classes.forEach(class_data => {\n                    const {id, name } = class_data\n                    classes[id] = {\n                        teachers: [],\n                        students: [],\n                        name\n                    }\n                })\n                props.fetchClassesSuccess(classes, data.admin_passcode)\n            }).catch(err => {\n                alert('Sorry 取得教室資料時電腦出狀況了！請截圖和與工程師聯繫')\n            })\n    }\n\n    const fetchTeacherData = async(school_id) => {\n        const response = await get(`/school/${school_id}/teacher`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得教師資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        const {admins, teachers, classes} = data\n        // console.log('fetchTeacherData / data: ', data)\n        props.fetchTeachersSuccess(admins, teachers, classes)\n        getAdminId(teachers)\n    }\n\n    const getAdminId = (teachers) => {\n        const teacher_id_array = Object.keys(teachers)\n        for(var i = 0; i < teacher_id_array.length; i++) {\n            if (teachers[teacher_id_array[i]].name === '管理員') {\n                setState({\n                    ...state,\n                    admin_id: teacher_id_array[i]\n                })\n                return\n            }\n        }\n    }\n\n    const fetchStudentData = async(school_id) => {\n        const response = await get(`/school/${school_id}/student`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const {students, classes} = data\n        props.fetchStudentsSuccess(students, classes)\n        props.initializeStudentWellness(Object.keys(students))\n    }\n\n    const fetchPickupRequest = (school_id) => {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/attendance/pickup-request?school_id=${school_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                if (resJson.data.length > 0) {\n                    props.addPickupRequest(resJson.data)\n                    props.navigation.navigate('PickupAlert', {\n                    })\n                }\n            })\n            .catch(err => {\n                alert('Sorry 取得接回告知時電腦出狀況了！請截圖和與工程師聯繫')\n            })\n    }\n\n    const fetchStudentAttendance = async() => {\n        const { school_id } = props\n        const date = formatDate(new Date())\n        const response = await get(`/attendance?school_id=${school_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生出席資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const { attendance, students, present, absent } = data\n        props.fetchStudentAttendanceSuccess(attendance, students, present, absent)\n    }\n\n    const handleEnterPasscode = (passcode) => {\n        // console.log(passcode)\n        const { school_name, school_id } = props\n        const { passcodeAdminId, passcodeTeacherId, classes, teachers } = props\n        const { pageClicked, class_id } = state\n        const teacher_id = passcodeTeacherId[passcode]\n        const admin_id = passcodeAdminId[passcode]\n        // console.log(admin_id)\n\n\n        if (teacher_id === undefined && admin_id === undefined) {\n            alert('密碼不正確！請截圖和與工程師聯繫')\n        } else if (admin_id !== undefined) {\n            console.log('school home / class_id: ', class_id)\n            setState({ ...state, showLoginNumberPad: false })\n            navigate(`/${pageClicked}`, { state: {\n                school_name, \n                school_id,\n                class_id,\n                class_name: '管理員：' + teachers[admin_id].name,\n                isAdmin: true,\n                admin_id\n            }})\n        } else if (class_id !== '' && !classes[class_id].teachers.includes(teacher_id) || pageClicked === 'admin') {\n            alert('Sorry 權限不合！請截圖和與工程師聯繫')\n        } else { //pageClicked === 'TeacherHome'\n            setState({ ...state, showLoginNumberPad: false })\n            props.updateViewingStatus('teacher')\n            console.log('school home / class_id: ', class_id)\n            navigate('/class', {\n                class_id,\n                class_name: classes[class_id].name,\n                isAdmin: false\n            })\n        }\n    }\n\n    const hideLoginPad = () => {\n        setState({ ...state, showLoginNumberPad: false })\n    }\n\n    const handleSignOut = () => {\n        const {loadAuth} = props\n        Auth.signOut()\n            .then(() => {\n                loadAuth()\n            })\n            .catch(err => console.log(err))\n    }\n\n    const { classes, showLoginNumberPad } = state\n    const { school_id } = props\n    // console.log('props.classes: ', props.classes)\n\n    const test = {\n        me: new Set()\n    }\n\n    // console.log('test: ', test)\n    // console.log('everybody: ', {...test})\n    return (\n        <View style={{ flex: 1, flexDirection: 'column' }}>\n            {showLoginNumberPad ? \n                <LoginNumberPad\n                    handleEnterPasscode={(passcode) => handleEnterPasscode(passcode)}\n                    hideLoginPad={() => hideLoginPad()}\n                /> : null\n            }\n\n            <View style={{ flex: 1, flexDirection: 'row' }}>\n                <TouchableHighlight\n                    key='admin'\n                    style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                    onPress={() => setState({ ...state, showLoginNumberPad: true, pageClicked: 'admin' })}\n                >\n                    <Text style={{ fontSize: 50, textAlign: 'center' }}>行政管理</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                    key='child_dismissal'\n                    style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                    onPress={() => {\n                        props.updateViewingStatus('dismissal')\n                        props.navigation.push('DismissChildQRScan', {})\n                    }}\n                >\n                    <Text style={{ fontSize: 50, textAlign: 'center' }}>放學</Text>\n                </TouchableHighlight>\n            </View>\n            <TouchableHighlight\n                key='attendance_page'\n                style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                onPress={() => {\n                    navigate('/attendance', { school_id })\n                }}\n            >\n                <Text style={{ fontSize: 80, textAlign: 'center' }}>出席/打卡</Text>\n            </TouchableHighlight>\n            <View style={{ flex: 3 }}>\n                {classes.map((class_data) => {\n                    if (class_data.name === '管理員') return null\n                    return(\n                        <TouchableHighlight\n                            key={class_data.id}\n                            style={{ \n                                flex: 1,\n                                backgroundColor: '#74b987', \n                                margin: 10,\n                                justifyContent: 'center'\n                            }}\n                            onPress={() => setState({\n                                ...state,\n                                showLoginNumberPad: true,\n                                pageClicked: 'class',\n                                class_id: class_data.id\n                            })}\n                        >\n                            <Text style={{ fontSize: 80, textAlign: 'center' }}>{class_data.name}</Text>\n                        </TouchableHighlight>\n                    )\n                })}\n            </View>\n            <TouchableHighlight onPress={() => handleSignOut()}>\n                <Text>sign out</Text>\n            </TouchableHighlight>\n        </View>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        pick_up_request: state.school.pick_up_request,\n        passcodeAdminId: state.school.passcodeAdminId,\n        passcodeTeacherId: state.school.passcodeTeacherId,\n        classes: state.school.classes,\n        teachers: state.school.teachers,\n        viewing_status: state.school.viewing_status,\n        isConnected: state.school.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setConnectState,\n            fetchClassesSuccess, \n            fetchTeachersSuccess, \n            fetchStudentsSuccess,\n            initializeStudentWellness,\n            addPickupRequest,\n            clearSchoolState,\n            updateViewingStatus,\n            fetchStudentAttendanceSuccess\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (SchoolHome)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight } from 'react-native'\nimport { Container, Content, Text, View, Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport LoginNumberPad from './loginnumberpad'\nimport { bindActionCreators } from 'redux';\nimport { markTeacherLoggedIn, markTeacherLoggedOut, markStaffAttendanceFail, fetchAttendanceSuccess } from '../../redux/school/actions/index'\n\nclass TeacherClockInOut extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            logging_in: false,\n            teacher_id: ''\n        }\n        this.handleEnterPasscode = this.handleEnterPasscode.bind(this)\n        this.hideLoginPad = this.hideLoginPad.bind(this)\n    }\n\n    componentDidMount() {\n        this.fetchStaffAttendanceByClassId()\n    }\n\n    fetchStaffAttendanceByClassId() {\n        const { class_id, isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance?class_id=${class_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                this.props.fetchAttendanceSuccess(resJson.data)\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n\n    }\n\n    handleEnterPasscode(passcode) {\n        const teacher_id = this.props.class.passcodeTeacherId[passcode]\n        if (teacher_id === undefined || teacher_id !== this.state.teacher_id) {\n            Toast.show({\n                text: 'Wrong password!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 3000\n            })\n        } else {\n            const teacher = this.props.class.teachers[teacher_id]\n            const time = new Date()\n            if (teacher.logged_in) {\n                this.clockOut(teacher_id, time)\n            } else {\n                this.clockIn(teacher_id, time)\n            }\n            this.setState({ logging_in: false })\n        }\n        \n    }\n\n    clockIn(staff_id, time) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance`\n        fetch(query, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                staff_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if ( statusCode > 200 || resJson[\"message\"] === \"Internal server error\") {\n                    this.props.markStaffAttendanceFail(message)\n                } else {\n                    this.props.markTeacherLoggedIn(staff_id, time, data.attendance_id)\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    clockOut(staff_id, time) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n\n        const { attendance_id } = this.props.class.teachers[staff_id]\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance/${attendance_id}`\n        fetch(query, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === \"Internal server error\") {\n                    this.props.markStaffAttendanceFail(message)\n                }\n                else {\n                    this.props.markTeacherLoggedOut(staff_id, time)\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    hideLoginPad() {\n        this.setState({ logging_in: false })\n    }\n\n    render() {\n        const { errMessage } = this.props.class\n        return(\n            <Container>\n                {errMessage !== '' ?    \n                    <Text style={{ fontSize: 20, color: 'red' }}>{errMessage}</Text>\n                    : null}\n                {this.state.logging_in ?\n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={this.hideLoginPad}\n                    /> : null}\n                        \n                <Content contentContainerStyle={{ marginTop: 30, paddingBottom: 30, alignSelf: 'center', flexDirection: 'row' }}>\n                    {Object.keys(this.props.class.teachers).map((teacher_id) => {\n                        return (\n                            <TouchableHighlight\n                                key={teacher_id}\n                                style={{ margin: 20 }}\n                                underlayColor='transparent'\n                                onPress={() => this.setState({ logging_in: true, teacher_id: teacher_id})}\n                            >\n                                <View style={styles.cardContainer}>\n                                    <Card>\n                                        <CardItem style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                // source={{ uri: this.props.class.students[student_id].profile_picture }}\n                                                style={styles.thumbnailImage}/>\n                                        </CardItem>\n                                        <CardItem\n                                            footer\n                                            style={{ justifyContent: 'center', backgroundColor: this.props.class.teachers[teacher_id].logged_in ? '#dcf3d0' : '#ffe1d0' }}>\n                                            <Text>{this.props.class.teachers[teacher_id].name}</Text>\n                                        </CardItem>\n                                    </Card>\n                                </View>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 119,\n        height: 150,\n        margin: 2,\n        marginBottom: -2\n    },\n    thumbnailImage: {\n        height: 80,\n        width: 80,\n        borderRadius: 40\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markTeacherLoggedIn, markTeacherLoggedOut, markStaffAttendanceFail, fetchAttendanceSuccess}, dispatch)\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherClockInOut)","import React from 'react'\nimport { Image, StyleSheet, View, Text, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatHourMinute, beautifyTime } from '../../util'\nimport TimeModal from '../../parent/timemodal'\n\nexport default class MedRequestModal extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state={\n            medicated_time: new Date(),\n            showTimePicker: false\n        }\n    }\n\n    selectDatetimeConfirm(time){\n        this.setState({\n            medicated_time: time,\n            showTimePicker: false\n        })\n    }\n\n    render() {\n        const { thumbnail, student_name, request } = this.props\n        const { medicated_time, showTimePicker } = this.state\n        const { administered, fever_entry, medication, note, student_id, teacher_id, timestamp } = request\n        const { before_meal, gel, other_type, powder, powder_refrigerated, syrup } = medication\n        // const { other_type, powder, powder_refrigerated, syrup, temperature } = fever_entry\n        const time = formatHourMinute(new Date(timestamp))\n        return (\n            <Card style={{ flex: 1, alignSelf: 'center', width: '100%' }}>\n\n                {showTimePicker ?\n                    <TimeModal\n                        start_date={medicated_time}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showTimePicker: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n\n                <View style={{ flex: 0.35, flexDirection: 'row' }}>\n                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                        <Image\n                            source={thumbnail === '' ?\n                                require('../../../assets/icon-thumbnail.png')\n                                : { uri: thumbnail }\n                            }\n                            style={styles.thumbnailImage}\n                        />\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'flex-start' }}>\n                        <Text style={{ fontSize: 70, fontWeight: 'bold' }}>{student_name}</Text>\n                        <Text style={{ fontSize: 70, fontWeight: 'bold' }}>{time} {before_meal === null ? null : before_meal ? '餐前' : '餐後'}</Text>\n                    </View>\n                </View>\n                <View style={{ flex: 0.65, paddingBottom: 20 }}>\n                    <View style={{ width: '100%', flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'space-evenly' }}>\n                        {powder &&\n                            <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', flexDirection: 'row', marginBottom: 15, marginHorizontal: 7}}>\n                                <Image\n                                    source={require('../../../assets/icon-medication-powder.png')}\n                                />\n                                <View>\n                                    <Text style={{ fontSize: 30 }}>藥粉</Text>\n                                    {powder_refrigerated && <Text style={{ fontSize: 30 }}>需冷藏</Text>}\n                                </View>\n                            </View>\n                        }\n                        {syrup.length !== 0 &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-syrup.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>藥水</Text>\n                                {syrup.map((entry, index) => {\n                                    return (\n                                        <View key={index} style={{ flexDirection: 'row' }}>\n                                            <Text style={{ fontSize: 20 }}>{entry.amount} c.c.</Text>\n                                            {entry.need_refrigerated && <Text style={{ fontSize: 20, marginLeft: 20 }}>需冷藏</Text>}\n                                        </View>\n                                    )\n                                })}\n                            </View>\n                        </View>\n                        }\n                        {gel &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-gel.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>藥膏</Text>\n                                <Text style={{ fontSize: 30 }}>{gel}</Text>\n                            </View>\n                        </View>\n                        }\n                        {other_type &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-pill.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>其他</Text>\n                                <Text style={{ fontSize: 30 }}>{other_type}</Text>\n                            </View>\n                        </View>\n                        }\n                    </View>\n                    <View style={{ width: '97%', marginHorizontal: 10, flexDirection: 'row', justifyContent: 'space-between' }}>\n                        <View style={{ width: '32%', aspectRatio: 1, backgroundColor: '#fff1b5' }}>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 30 }}>備註</Text>\n                            </View>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 25 }}>{note}</Text>\n                            </View>\n                        </View>\n\n                        <View style={{ width: '40%', backgroundColor: '#fa625f' }}>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 30, color: 'white' }}>發燒超過 {fever_entry.temperature}°C</Text>\n                            </View>\n                            <View style={{ padding: 10 }}>\n                                {fever_entry.powder &&\n                                    <Text style={{ fontSize: 25, color: 'white' }}>藥粉 {fever_entry.powder_refrigerated && '需冷藏'}</Text>\n                                }\n\n                                {fever_entry.syrup.length !== 0 &&\n                                    <View style={{ flexDirection: 'row'}}>\n                                        <Text style={{ fontSize: 25, color: 'white' }}>藥水    </Text>\n                                        {fever_entry.syrup.map((entry, index) => {\n                                            return (\n                                                <Text key={index} style={{ fontSize: 25, color: 'white' }}>{entry.amount} c.c. {entry.need_refrigerated && '需冷藏'}</Text>\n                                            )\n                                        })}\n                                    </View>\n                                }\n\n                                {fever_entry.other_type && \n                                    <Text style={{ fontSize: 25, color: 'white' }}>其他    {fever_entry.other_type}</Text>\n                                }\n                            </View>\n                        </View>\n\n                        <View style={{ width: '25%', justifyContent: 'space-between'}}>\n                            <TouchableHighlight \n                                style={{ \n                                    padding: 15, \n                                    backgroundColor: 'rgba(0,0,0,0.2)', \n                                    justifyContent: 'center', \n                                    alignItems: 'center' \n                                }}\n                                onPress={() => this.setState({ showTimePicker: true })}\n                            >\n                                <Text style={{ fontSize: 40 }}>{beautifyTime(medicated_time)}</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight\n                                style={{\n                                    padding: 15,\n                                    width: '100%',\n                                    backgroundColor: administered ? '#dcf3d0' : '#ffe1d0',\n                                    alignItems: 'center'\n                                }}\n                                onPress={() => this.props.showLoginNumberPad()}\n                            >\n                                <Text style={{ fontSize: 40 }}>完成</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnailImage: {\n        height: 180,\n        width: 180,\n        borderRadius: 90\n    }\n})","import React, { useEffect, useState } from 'react'\nimport { View, Text, RefreshControl, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport MedRequestModal from './medrequestmodal'\nimport { bindActionCreators } from 'redux';\nimport { initializeRequests, fillMedRequest } from '../../../redux/school/actions/index' \nimport Reloading from '../../reloading'\nimport { formatHourMinute } from '../../util'\nimport { formatDate, formatTime, beautifyTime } from '../../util'\nimport LoginNumberPad from '../loginnumberpad'\nimport { useParams } from 'react-router-dom'\n\nconst TeacherMedicineLog = (props) => {\n    const { request_id } = useParams()\n    const [state, setState] = useState({\n        isLoading: true,\n        refreshing: false,\n        selected_request_id: '',\n        showLoginNumberPad: false,\n        medicated_timestamp: null\n    })\n\n    useEffect(() => {\n        // if not loaded, we fetch else do nothing(teacher can fetch new requests by refreshing page)\n        console.log('request_id: ', request_id)\n        if (request_id === null || request_id === undefined) {\n            setState({\n                ...state,\n                isLoading: false\n            })\n            return\n        }\n        handleShowRequest(request_id)\n    }, [])\n\n    const handleShowRequest = (request_id) => {\n        setState({\n            ...state,\n            selected_request_id: request_id,\n            isLoading: false\n        })\n    }\n\n    const handleEnterPasscode = (passcode) => {\n        const { passcodeAdminId } = props\n        const teacher_id = props.class.passcodeTeacherId[passcode] || passcodeAdminId[passcode]\n        if (teacher_id === undefined) {\n            Alert.alert(\n                'Wrong password',\n                'Please try again',\n                [{text: 'OK'}]\n            )\n        } else {\n            setState({ ...state, showLoginNumberPad: false })\n            handleFulfillRequest(teacher_id)\n        }\n    }\n    \n    const hideLoginPad = () => {\n        setState({\n            ...state,\n            showLoginNumberPad: false\n        })\n    }\n\n    const handleFulfillRequest = (teacher_id) => {\n        const { selected_request_id, medicated_timestamp } = state\n        // console.log(props.requests)\n        const { student_id } = props.requests.requests[selected_request_id]\n        const { isConnected } = props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/medicationrequest', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id: selected_request_id,\n                teacher_id,\n                student_id,\n                medicated_timestamp: formatDate(medicated_timestamp) + ' ' + formatTime(medicated_timestamp)\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    Alert.alert(\n                        'Error, please try again',\n                        message,\n                        [{text: 'OK'}]\n                    )\n                    return\n                }\n                props.fillMedRequest(selected_request_id)\n                props.navigation.goBack()\n            })\n            .catch(err => {\n                Alert.alert(\n                    'Error, please try again',\n                    err.message,\n                    [{text: 'OK'}]\n                )\n            })\n    }\n\n    const needRefrigeration = (medication) => {\n        // console.log('medication: ', medication)\n        const { powder_refrigerated, syrup } = medication\n        let need_refrigeration = false\n        syrup.forEach(entry => {\n            need_refrigeration |= entry.need_refrigerated\n        })\n        return powder_refrigerated || need_refrigeration\n    }\n\n    const { selected_request_id, isLoading, showLoginNumberPad } = state\n    if (isLoading) {\n        return (\n            <Reloading />\n        )\n    }\n    const { requests } = props.requests\n    const { students } = props.class\n    const current_request = requests[selected_request_id]\n    console.log('requests: ', requests)\n    console.log('selected_request_id: ', selected_request_id)\n    console.log('current_request: ', current_request)\n    // const { administered, fever_entry, medication, note, student_id, teacher_id, timestamp } = current_request\n    return (\n        <View style={{ flex: 1 }}>\n            {showLoginNumberPad ? \n                <LoginNumberPad\n                    handleEnterPasscode={(passcode) => handleEnterPasscode(passcode)}\n                    hideLoginPad={() => hideLoginPad()}\n                /> : null\n            }\n            <ScrollView\n                contentContainerStyle={{ flex: 1, padding: 10 }}\n                refreshControl={\n                    <RefreshControl\n                        style={{backgroundColor: '#E0FFFF'}}\n                        refreshing={state.refreshing}\n                        onRefresh={() => {}}\n                        tintColor=\"#ff0000\"\n                        title=\"Loading...\"\n                        titleColor=\"#00ff00\"\n                        colors={['#ff0000', '#00ff00', '#0000ff']}\n                        progressBackgroundColor=\"#ffff00\"\n                    />\n                }\n            >\n                <View style={{ flex: 3 }}>\n                    {selected_request_id === '' ?\n                        null\n                    :   \n                        <MedRequestModal\n                            thumbnail={students[current_request.student_id].profile_picture}\n                            student_name={students[current_request.student_id].name}\n                            teacher_name={current_request.teacher_id === null ? '' : teachers[current_request.teacher_id].name}\n                            request={current_request}\n                            showLoginNumberPad={(medicated_timestamp) => setState({ ...state, showLoginNumberPad: true, medicated_timestamp })}\n                        />\n                    }\n                </View>\n                <View style={{ flex: 1 }}>\n                    <ScrollView horizontal={true}>\n                        {Object.keys(requests).map((request_id) => {\n                            // console.log('requests[request_id]: ', requests[request_id])\n                            const { student_id } = requests[request_id]\n                            const { timestamp, administered } = requests[request_id]\n                            const time = beautifyTime(new Date(timestamp))\n                            const need_refrigeration = needRefrigeration(requests[request_id].medication)\n                            // console.log('need_refrigeration: ', need_refrigeration)\n                            return (\n                                <TouchableHighlight\n                                    key={request_id}\n                                    style={styles.cardContainer}\n                                    underlayColor='transparent'\n                                    onPress={() => handleShowRequest(request_id)}\n                                >\n                                    <Box \n                                        style={{ \n                                            flex: 1,\n                                            backgroundColor: administered ? '#dcf3d0' : '#ffe1d0'\n                                        }}\n                                    >\n                                        <View\n                                            style={{ flex: 1, flexDirection: 'row', alignItems: 'center', paddingHorizontal: 5 }}\n                                        >\n                                            <View style={{width: 24, height: 24 }}>\n                                                {need_refrigeration ? \n                                                    <Image\n                                                        style={{ width: 24, height: 24 }}\n                                                        source={require('../../../assets/icon-snowflake.png')}\n                                                    />\n                                                : null}\n                                            </View>\n                                            <Text style={{ fontSize: 25, textAlign: 'center' }}>{'   ' + time}</Text>\n                                        </View>\n                                        <View style={{ flex: 2, justifyContent: 'center', alignItems: 'center' }}>\n                                            <Image\n                                                source={\n                                                    props.class.students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                    : { uri: students[student_id].profile_picture }}\n                                                style={styles.thumbnailImage}\n                                            />\n                                        </View>\n                                        <View\n                                            style={{ flex: 1, justifyContent: 'center' }}\n                                        >\n                                            <Text style={{ fontSize: 25, textAlign: 'center' }}>{students[student_id].name}</Text>\n                                        </View>\n                                    </Box>\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </ScrollView>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 170,\n        // backgroundColor: 'transparent',\n        paddingRight: 5\n    },\n    thumbnailImage: {\n        height: 110,\n        width: 110,\n        borderRadius: 55\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        requests: state.medicationrequests,\n        teachers: state.school.teachers,\n        passcodeAdminId: state.school.passcodeAdminId\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ initializeRequests, fillMedRequest }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherMedicineLog)","import React, { useEffect, useState } from 'react'\nimport { StyleSheet, Image, TouchableHighlight, KeyboardAvoidingView, ScrollView, Alert } from 'react-native'\nimport { Text, View, Button, Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    fetchClassWellnessData,\n    markPresent,\n    sendWellnessDataSuccess,\n    sendWellnessDataFail,\n    addWellnessRecord,\n    invalidateWellnessData\n} from '../../../redux/school/actions/index'\nimport { formatDate, fetchClassData, sendWellnessData, beautifyDate } from '../../util';\nimport WellnessForm from '../wellnessform'\nimport TimeModal from '../../parent/timemodal'\nimport Reloading from '../../reloading'\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nconst WellnessLog = (props) => {\n    const navigate = useNavigate()\n    const location = useLocation()\n    const [ state, setState ] = useState({\n        isLoading: true,\n        date: new Date(),\n        show_record: false,\n        showDateTimeModal: false\n    })\n\n    useEffect(() => {\n        const { record_id_for_update } = props.wellness\n        const { isConnected } = props.class\n        const { date, teacher_name } = location?.state\n        if (record_id_for_update.size === 0 && isConnected) {\n            setState({\n                ...state,\n                date\n            })\n            fetchClassData(date)\n        }\n        else {\n            setState({\n                ...state,\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n        }\n\n        // props.navigation.setOptions({ \n        //     title: `健康 - ${teacher_name}`\n        // })\n    }, [])\n\n    const fetchClassData = async(propsDate) => {\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n        //     )\n        // })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const wellnessData = await fetchClassData('wellness', props.class.class_id, start_date, end_date)\n        // console.log(wellnessData)\n        denormalize(wellnessData)\n        props.fetchClassWellnessData(wellnessData.data)\n        setState({\n            ...state,\n            isLoading: false\n        })\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n        //     )\n        // })\n    }\n\n    const denormalize = (wellnessData) => {\n        if (!Object.keys(wellnessData.data.records).length){\n            return\n        }\n        const { records } = wellnessData.data\n        for (var record_id in records) {\n            wellnessData.data.records[record_id].time = new Date(records[record_id].time)\n        }\n    }\n\n    const hasUnsentRecord = (record_id_list) => {\n        const { record_id_for_update } = props.wellness\n        // console.log('props.wellness: ', props.wellness)\n        var has_unsent_record = false\n        for (var i = 0; i < record_id_list.length; i++) {\n            if (record_id_for_update.has(record_id_list[i])) {\n                has_unsent_record = true\n                break\n            }\n        }\n        return has_unsent_record\n    }\n\n    const handleSend = async() => {\n        // if (!wellnessDataValidated()) {\n        //     return\n        // }\n        const { wellness } = props\n        const { isConnected } = props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n            return\n        }\n        setState({ ...state, isLoading: true })\n        const sendDataResult = await sendWellnessData(wellness, props.class.class_id, formatDate(new Date))\n        if (sendDataResult.success) {\n            sendDataResult.data.forEach(student_id => {\n                props.markPresent(student_id, new Date)\n            })\n            props.sendWellnessDataSuccess()\n            navigate(-1)\n        } else {\n            props.sendWellnessDataFail(sendDataResult.message)\n            Alert.alert(\n                'Err',\n                sendDataResult.message,\n                [{text: 'OK'}]\n            )\n        }\n        setState({ ...state, isLoading: false })\n    }\n\n    const selectDatetimeConfirm = (date) => {\n        setState({\n            ...state,\n            date,\n            showDateTimeModal: false\n        })\n        fetchClassData(date)\n    }\n\n    const { by_student_id, records } = props.wellness\n    const { teacher_id, isAdmin } = location?.state\n    const { showDateTimeModal, date, isLoading } = state\n    \n    return (\n        <KeyboardAvoidingView\n            style={{\n                flex: 1\n            }}\n            behavior='height'\n            keyboardVerticalOffset={80}\n            enabled\n        >\n            {showDateTimeModal && <TimeModal\n                start_date={date}\n                datetime_type={'date'}\n                hideModal={() => setState({ showDateTimeModal: false })}\n                selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n                minDatetime={null}\n                maxDatetime={new Date()}\n            />}\n            <View style={{ flexDirection: 'row', width: '90%', justifyContent: 'space-between', alignSelf: 'center', alignItems: 'center'}}>\n                <TouchableHighlight\n                    onPress={() => {\n                        const { data_dispatched } = props.wellness\n                        if (!data_dispatched || !isAdmin) return\n                        setState({ showDateTimeModal: true })\n                    }}\n                >\n                    <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n                </TouchableHighlight>\n\n                <TouchableHighlight\n                    disabled={isLoading}\n                    style={{ \n                        backgroundColor: isLoading ? 'rgba(0,0,0,0.5)' : '#dcf3d0', \n                        padding: 10  \n                    }}\n                    onPress={handleSend}>\n                    <Text style={{ fontSize: 40}}>送出</Text>\n                </TouchableHighlight>\n            </View>\n            <ScrollView contentContainerStyle={{ alignItems: 'center', marginBottom: 20 }}>\n                {Object.keys(props.class.students).map((student_id) => {\n                    const record_id_list = by_student_id[student_id]\n                    return(\n                        <View key={student_id} style={{ width: '98%' }}>\n                            <View style={{ margin: 10, backgroundColor: '#fefefa' }}>\n                                <View style={{ flex: 1, flexDirection: 'row' }}>\n                                    <TouchableHighlight\n                                        style={styles.childThumbnail}\n                                        // onPress={() => addRecord(student_id)}\n                                    >\n                                        <Image\n                                            source={\n                                                props.class.students[student_id].profile_picture === '' ?\n                                                    require('../../../assets/icon-thumbnail.png')\n                                                    : {uri: props.class.students[student_id].profile_picture}\n                                            }\n                                            style={styles.thumbnailImage}\n                                        />\n                                    </TouchableHighlight>\n                                    <View style={{ flex: 3 }}>\n                                        <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 10 }}>\n                                            <View style={{ flex: 1 }}>\n                                                <Text style={{ fontSize: 25}}>{props.class.students[student_id].name}</Text>\n                                            </View>\n                                            <View style={{ flex: 1, alignItems: 'flex-end' }}>\n                                                {hasUnsentRecord(record_id_list) ? \n                                                    <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                : null}\n                                            </View>\n                                        </View>\n                                        {record_id_list.map((record_id, index) => {\n                                            return (\n                                                <View style={{flex:1}} key={record_id}>\n                                                    { index === 0 ?\n                                                        <Text>早上</Text>\n                                                        : index === 1 ?\n                                                        <Text>中午</Text> \n                                                        : <Text>下午</Text>\n                                                    }\n                                                    <WellnessForm\n                                                        student_id={student_id}\n                                                        record_id={record_id}\n                                                        teacher_id={teacher_id}\n                                                    />\n                                                </View>\n                                            )\n                                        })}\n                                    </View>\n                                </View>\n                            </View>\n                        </View>\n                    )\n                })}\n            </ScrollView>\n        </KeyboardAvoidingView>\n    )\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        flex: 1,\n        backgroundColor: 'white',\n        marginLeft: -7,\n    },\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    },\n    subHeading: {\n        width: 355,\n        height: 45,\n        marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        wellness: state.healthstatus,\n        unmarked: state.attendance.unmarked\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            fetchClassWellnessData,\n            markPresent,\n            sendWellnessDataSuccess,\n            sendWellnessDataFail,\n            addWellnessRecord,\n            invalidateWellnessData\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (WellnessLog)","import React from \"react\"\nimport { View, Text } from \"react-native\"\n\n\nexport default class Header extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n    render() {\n        return (\n            <View style={{flexDirection: 'row'}}>\n                <Text style={{ fontSize: 30 }}>\n                    {this.props.title}\n                </Text>\n            </View>\n            \n        )\n    }\n}","import React, { useEffect, useState } from 'react'\nimport { StyleSheet, Image, TouchableHighlight, TextInput, Text, View, KeyboardAvoidingView, Alert, Keyboard } from 'react-native'\nimport { Container, Content, Card, CardItem, Body, Button, Toast } from 'native-base'\nimport { connect } from 'react-redux';\nimport Header from '../../header'\nimport { bindActionCreators } from 'redux';\nimport {\n    rateAppetite,\n    clearRatings,\n    setAllRatingsToGreat,\n    setAllDrinkWater,\n    fetchClassAppetiteData,\n    onSendAppetiteSuccess,\n    alertErrMessage,\n    markWaterDrank,\n    editFruitName,\n    clearAppetiteErrorMessage,\n    addStudentIdForUpdate\n} from '../../../redux/school/actions/index'\nimport { formatDate, fetchClassData, beautifyDate } from '../../util'\nimport TimeModal from '../../parent/timemodal'\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst TeacherAppetiteLog = (props) => {\n    const location = useLocation()\n    const navigate = useNavigate()\n    const [state, setState] = useState({\n        date: new Date(),\n        isLoading: true,\n        mealType: '',\n        selectedForCustomize: new Set(),\n        editingFruitType: false,\n        students_with_records: [],\n        showDateTimeModal: false,\n        display_all_students: true,\n        students_to_display: new Set()\n    })\n\n    useEffect(() => {\n        const { date, teacher_name } = location?.state\n        const { updatedStudents } = props.appetite\n        const { isConnected, students } = props.class\n        // console.log('useEffect / students: ', new Set(Object.keys(students)))\n        // setState({\n        //     ...state,\n        //     students_to_display: new Set(Object.keys(students))\n        // })\n        if (updatedStudents.size > 0 || !isConnected) {\n            setState({\n                ...state,\n                students_to_display: new Set(Object.keys(students)),\n                isLoading: false\n            })\n        } else {\n            setState({\n                ...state,\n                date,\n                students_to_display: new Set(Object.keys(students)) \n            })\n            fetchClassAppetiteData(date)\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n        }\n        \n        // props.navigation.setOptions({ \n        //     title: `飲食 - ${teacher_name}`\n        // })\n    }, [])\n\n    const fetchClassAppetiteData = async(propsDate) => {\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n        //     )\n        // })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const appetiteData = await fetchClassData('appetite', props.class.class_id, start_date, end_date)\n        if (appetiteData.data[start_date] === undefined) {\n            // props.navigation.setOptions({ \n            //     headerRight: () => (\n            //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            //     )\n            // })\n            return \n        }\n        const { fruit_name, ratings } = appetiteData.data[start_date]\n        props.fetchClassAppetiteData(fruit_name, ratings)\n        setState({\n            ...state,\n            isLoading: false,\n            students_with_records: Object.keys(ratings)\n        })\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n        //     )\n        // })\n    }\n\n    const editFruitName = (fruit_name) => {\n        props.editFruitName(fruit_name)\n    }\n\n    const fruitNameEditorOnBlur = () => {\n        const { students_with_records } = state\n        setState({ ...state, editingFruitType: false })\n        if (props.appetite.fruit_name === '') {\n            props.editFruitName('水果')\n        }\n\n        if (students_with_records.length > 1) {\n            props.addStudentIdForUpdate(students_with_records)\n        }\n    }\n\n    const handleRateFoodWellness = (student_id, rating) => {\n        if (state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            const { selectedForCustomize } = state\n            const {teacher_id } = location?.state\n            selectedForCustomize.delete(student_id)\n            setState({\n                ...state,\n                selectedForCustomize\n            })\n            props.rateAppetite(student_id, state.mealType, rating, teacher_id)\n        }\n    }\n\n    const onClickOther = (student_id) => {\n        const { mealType, selectedForCustomize } = state\n        const {teacher_id } = location?.state\n        if (mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            setState({\n                ...state,\n                selectedForCustomize: new Set([...selectedForCustomize, student_id])\n            })\n            props.rateAppetite(student_id, state.mealType, '', teacher_id)\n        }\n    }\n\n    const isRatingCustomized = (rating) => {\n        const { mealType } = state\n        if (mealType === '') {\n            return false\n        } else if (rating === '胃口佳' || rating === '滿滿一碗' || rating === '７/8分滿' || rating === '半碗' || rating === '胃口不佳' || rating === '') {\n            return false\n        }\n        return true\n    }\n\n    const onCustomizeRating = (student_id, customized_text) => {\n        const {teacher_id } = location?.state\n        props.rateAppetite(student_id, state.mealType, customized_text, teacher_id)\n    }\n\n    const customizedRatingOnBlur = (student_id) => {\n        const { selectedForCustomize } = state\n        selectedForCustomize.delete(student_id)\n        setState({\n            ...state,\n            selectedForCustomize\n        })\n    }\n\n    const markWaterDrank = (student_id) => {\n        const {teacher_id } = location?.state\n        if (state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            props.markWaterDrank(student_id, state.mealType, teacher_id)\n        }\n    }\n\n    const handleSetAll = () => {\n        const { teacher_id } = location?.state\n        const { students_to_display } = state\n        if (state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            props.setAllRatingsToGreat(state.mealType, [...students_to_display], teacher_id)\n        }\n    }\n\n    const handleClearAll = () => {\n        if (state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            props.clearRatings(state.mealType)\n        }\n    }\n\n    const handleAllDrank = () => {\n        const {teacher_id } = location?.state\n        const { students_to_display } = state\n        if (state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            props.setAllDrinkWater(state.mealType, [...students_to_display], teacher_id)\n        }\n    }\n\n    const handleSend = () => {\n        const { isConnected } = props.class\n        const {updatedStudents, fruit_name} = props.appetite\n        var data_objs = [],\n            appetite_log = props.appetite.ratings\n        \n        if (updatedStudents.size === 0) {\n            navigate(-1)\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n            return\n        }\n\n        updatedStudents.forEach(student_id => {\n            const ratings = appetite_log[student_id] // get ratings obj for student\n            const data = { // create query data and append to data_objs\n                student_id,\n                b_rating: ratings.Breakfast,\n                f_rating: ratings.Fruit,\n                l_rating: ratings.Lunch,\n                s_rating: ratings.Snack,\n                teacher_id: ratings.teacher_id\n            }\n            data_objs.push(data)\n        })\n        \n        const request_body = {\n            date: formatDate(new Date()),\n            fruit_name,\n            obj: data_objs\n        }\n\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/appetite', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        }).then(res => res.json())\n            .then(resJson => {\n                // console.log(resJson)\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    props.alertErrMessage(message)\n                } else {\n                    props.onSendAppetiteSuccess()\n                    navigate(-1)\n                }\n            })\n            .catch(err => {\n                props.alertErrMessage(err)\n            })\n    }\n\n    const selectDatetimeConfirm = (date) => {\n        setState({\n            ...state,\n            date,\n            showDateTimeModal: false\n        })\n        fetchClassAppetiteData(date)\n    }\n\n    const addStudentToDisplayList = (student_id) => {\n        const { display_all_students, students_to_display } = state\n        if (display_all_students) {\n            setState({\n                ...state,\n                students_to_display: new Set([student_id]),\n                display_all_students: false\n            })\n        } else if (students_to_display.has(student_id)) {\n            let new_students_to_display = new Set([...students_to_display])\n            new_students_to_display.delete(student_id)\n            setState({ ...state, students_to_display: new_students_to_display })\n        } else {\n            let new_students_to_display = new Set([...students_to_display])\n            new_students_to_display.add(student_id)\n            setState({ ...state, students_to_display: new_students_to_display })\n        }\n\n    }\n\n\n    if (props.appetite.err_message !== ''){\n        Alert.alert(\n            'Error!',\n            props.appetite.err_message,\n            [{text: 'OK', onPress: () => props.clearAppetiteErrorMessage()}]\n        )\n    }\n    const { isAdmin } = location?.state\n    const { mealType, selectedForCustomize, editingFruitType, date, showDateTimeModal, display_all_students, students_to_display } = state\n    const { students } = props.class\n    console.log('students_to_display: ', students_to_display)\n        // console.log('props.appetite: ', props.appetite)\n        // console.log('students_to_display: ', students_to_display)\n        // console.log('props.appetite.updatedStudents', props.appetite.updatedStudents)\n    return (\n        <KeyboardAvoidingView\n            style={{\n                flex: 1,\n                backgroundColor: mealType === 'Breakfast' ? '#ffe1d0'\n                                : mealType === 'Fruit' ? '#ffddb7'\n                                : mealType === 'Lunch' ? '#fff1b5'\n                                : mealType === 'Snack' ? '#dcf3d0'\n                                : 'transparent'\n            }}\n            behavior='height'\n            keyboardVerticalOffset={80}\n            enabled\n        >\n            {showDateTimeModal && <TimeModal\n                start_date={date}\n                datetime_type={'date'}\n                hideModal={() => setState({ ...state, showDateTimeModal: false })}\n                selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n                minDatetime={null}\n                maxDatetime={new Date()}\n            />}\n            <View style={styles.subHeading}>\n                <TouchableHighlight\n                    onPress={() => {\n                        const { data_dispatched } = props.appetite\n                        if (!data_dispatched || !isAdmin) return\n                        setState({ ...state, showDateTimeModal: true })\n                    }}\n                >\n                    <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                    style={{ backgroundColor: '#b5e9e9', padding: 10 }}\n                    onPress={handleSetAll}>\n                    <Text style={{ color: 'grey', fontSize: 40 }}>全胃口佳</Text>\n                </TouchableHighlight>\n                {/* <TouchableHighlight\n                    style={{ backgroundColor: '#ffe1d0', padding: 10  }}\n                    onPress={handleClearAll}>\n                    <Text style={{ color: 'grey', fontSize: 40 }}>全部清除</Text>\n                </TouchableHighlight> */}\n                <TouchableHighlight\n                    style={{ backgroundColor: '#b5e9e9', padding: 10  }}\n                    onPress={handleAllDrank}\n                >\n                    <Text style={{ color: 'grey', fontSize: 40 }}>全喝水</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                    style={{ backgroundColor: '#dcf3d0', padding: 10  }}\n                    onPress={handleSend}>\n                    <Text style={{ color: 'grey', fontSize: 40 }}>送出</Text>\n                </TouchableHighlight>\n            </View>\n\n            <View style={styles.mealButtons}>\n                <TouchableHighlight\n                    style={{\n                        backgroundColor: mealType === 'Breakfast' ? '#fa625f' : '#ffe1d0',\n                        width: '23%',\n                        height: 60,\n                        justifyContent: 'center',\n                        marginHorizontal: '1%',\n                        padding: 10\n                    }}\n                    underlayColor='#fa625f'\n                    onPress={() => setState({ ...state, mealType: 'Breakfast', editingFruitType: false })}\n                >\n                    <Text style={styles.mealButtonText}>早餐</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                    style={{\n                        backgroundColor: mealType === 'Fruit' ? '#ff8944' : '#ffddb7',\n                        width: '23%',\n                        height: 60,\n                        justifyContent: 'center',\n                        marginHorizontal: '1%',\n                        // padding: 10\n                    }}\n                    underlayColor='#ff8944'\n                    onPress={() => setState({ ...state, mealType: 'Fruit' })}\n                    onLongPress={() => setState({ ...state, mealType: 'Fruit', editingFruitType: true })}\n                >\n                    {editingFruitType ?\n                        <View style={{ flex: 1 }}>\n                            <Text style={{ paddingLeft: 5 }}>水果:</Text>\n                            <TextInput\n                                autoFocus={true}\n                                selectTextOnFocus={true}\n                                style={{ width: '95%', alignSelf: 'center', fontSize: 25, textAlign: 'center', color: 'grey', borderWidth: 1 }}\n                                onChangeText={fruit_name => editFruitName(fruit_name)}\n                                value={props.appetite.fruit_name}\n                                onBlur={() => fruitNameEditorOnBlur()}\n                            />\n                        </View>\n                    :   <Text style={styles.mealButtonText}>{props.appetite.fruit_name}</Text>\n                    }\n                </TouchableHighlight>\n                <TouchableHighlight\n                    style={{\n                        backgroundColor: mealType === 'Lunch' ? '#f4d41f' : '#fff1b5',\n                        width: '23%',\n                        height: 60,\n                        justifyContent: 'center',\n                        marginHorizontal: '1%',\n                        padding: 10\n                    }}\n                    underlayColor='#f4d41f'\n                    onPress={() => setState({ ...state, mealType: 'Lunch', editingFruitType: false })}\n                >\n                    <Text style={styles.mealButtonText}>午餐</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                    style={{\n                        backgroundColor: mealType === 'Snack' ? '#00c07f' : '#dcf3d0',\n                        width: '23%',\n                        height: 60,\n                        justifyContent: 'center',\n                        marginHorizontal: '1%',\n                        padding: 10\n                    }}\n                    underlayColor='#00c07f'\n                    onPress={() => setState({ ...state, mealType: 'Snack', editingFruitType: false })}\n                >\n                    <Text style={styles.mealButtonText}>點心</Text>\n                </TouchableHighlight>\n            </View>\n\n            <View style={{ width: '98%', flexDirection: 'row', flexWrap: 'wrap', alignSelf: 'center', justifyContent: 'space-evenly' }}>\n                <TouchableHighlight\n                    style={{\n                        padding: 5,\n                        backgroundColor: display_all_students ? '#b5e9e9' : 'rgba(255,255,255,0.8)',\n                        marginRight: 3\n                    }}\n                    onPress={() => {\n                        setState({\n                            ...state,\n                            display_all_students: true,\n                            students_to_display: new Set(Object.keys(students))\n                        })\n                    }}\n                >\n                    <Text style={{ fontSize: 25 }}>全班</Text>\n                </TouchableHighlight>\n                {Object.keys(students).map((student_id) => {\n                    return (\n                        <TouchableHighlight\n                            key={student_id}\n                            style={{\n                                padding: 5,\n                                backgroundColor: students_to_display.has(student_id) && !display_all_students ? '#b5e9e9' : 'rgba(255,255,255,0.8)',\n                                marginRight: 3\n                            }}\n                            onPress={() => addStudentToDisplayList(student_id)}\n                        >\n                            <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                        </TouchableHighlight>\n                    )\n                })}\n            </View>\n            \n            <Content contentContainerStyle={{ alignItems: 'center' }}>\n                {[...students_to_display].reverse().map((student_id) => {\n                    const meal_rating = mealType === '' ? '' : props.appetite.ratings[student_id][mealType].slice(0,-1)\n                    const water_drank = mealType === '' ? false : props.appetite.ratings[student_id][mealType].slice(-1) === '1'\n                    return (\n                        <View\n                            key={student_id}\n                            style={{ width: '98%' }}\n                        >\n                            <Card>\n                                <CardItem>\n                                    <View style={styles.childThumbnail}>\n                                        <Image\n                                            source={\n                                                props.class.students[student_id].profile_picture === '' ?\n                                                    require('../../../assets/icon-thumbnail.png')\n                                                    : {uri: props.class.students[student_id].profile_picture}\n                                            }\n                                            style={styles.thumbnailImage}/>\n                                    </View>\n                                    <View style={{ width: '80%' }}>\n                                        <View style={{ flex: 1 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row' }}>\n                                                <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                                                    <Text style={{ fontSize: 30, paddingLeft: 18, alignSelf: 'center' }}>\n                                                        {props.class.students[student_id].name}\n                                                    </Text>\n                                                </View>\n                                                <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '80%',\n                                                            borderWidth: 2,\n                                                            borderColor: '#368cbf',\n                                                            padding: 10,\n                                                            justifyContent: 'center',\n                                                            backgroundColor: water_drank ? '#368cbf': 'white'\n                                                        }}\n                                                        onPress={() => markWaterDrank(student_id)}\n                                                    >\n                                                        <Text style={{\n                                                            textAlign: 'center',\n                                                            color: water_drank ? '#D3D3D3': 'grey',\n                                                            fontSize: 17\n                                                        }}>有喝水</Text>\n                                                    </TouchableHighlight>\n                                                </View>\n                                                <View style={{ flex: 2, alignItems: 'flex-end'}}>\n                                                    {props.appetite.updatedStudents.has(student_id) ?\n                                                        <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                        : null\n                                                    }\n                                                </View>\n                                            </View>\n                                            <View style={styles.cardBody}>\n                                                <TouchableHighlight\n                                                    style={{\n                                                        width: '30%',\n                                                        height: '100%',\n                                                        // marginRight: '3%',\n                                                        justifyContent: 'center',\n                                                        backgroundColor: meal_rating === '胃口佳' ? '#368cbf' : '#b5e9e9',\n                                                        padding: 15\n                                                    }}\n                                                    onPress={() => handleRateFoodWellness(student_id, '胃口佳')}\n                                                >\n                                                    <Text\n                                                        style={{\n                                                            textAlign: 'center',\n                                                            color: meal_rating === '胃口佳' ? '#D3D3D3' : 'grey',\n                                                            fontSize: 20\n                                                        }}\n                                                    >\n                                                        胃口佳\n                                                    </Text>\n                                                </TouchableHighlight>\n                                                <TouchableHighlight\n                                                    style={{\n                                                        width: '30%',\n                                                        height: '100%',\n                                                        // marginRight: '3%',\n                                                        justifyContent: 'center',\n                                                        backgroundColor: meal_rating === '滿滿一碗' ? '#368cbf' : '#b5e9e9',\n                                                        padding: 15\n                                                    }}\n                                                    onPress={() => handleRateFoodWellness(student_id, '滿滿一碗')}\n                                                >\n                                                    <Text\n                                                        style={{\n                                                            textAlign: 'center',\n                                                            color: meal_rating === '滿滿一碗' ? '#D3D3D3' : 'grey',\n                                                            fontSize: 20\n                                                        }}\n                                                    >\n                                                        滿滿一碗\n                                                    </Text>\n                                                </TouchableHighlight>\n                                                <TouchableHighlight\n                                                    style={{\n                                                        width: '30%',\n                                                        height: '100%',\n                                                        // marginRight: '3%',\n                                                        justifyContent: 'center',\n                                                        backgroundColor: meal_rating === '７/8分滿' ? '#368cbf' : '#b5e9e9',\n                                                        padding: 15\n                                                    }}\n                                                    onPress={() => handleRateFoodWellness(student_id, '７/8分滿')}\n                                                >\n                                                    <Text\n                                                        style={{\n                                                            textAlign: 'center',\n                                                            color: meal_rating === '７/8分滿' ? '#D3D3D3' : 'grey',\n                                                            fontSize: 20\n                                                        }}\n                                                    >\n                                                        ７/8分滿\n                                                    </Text>\n                                                </TouchableHighlight>\n                                            </View>\n                                            <View style={styles.cardBody}>\n                                                <TouchableHighlight\n                                                    style={{\n                                                        width: '30%',\n                                                        height: '100%',\n                                                        // margin: 5,\n                                                        justifyContent: 'center',\n                                                        backgroundColor: meal_rating === '半碗' ? '#368cbf' : '#b5e9e9',\n                                                        padding: 15\n                                                    }}\n                                                    onPress={() => handleRateFoodWellness(student_id, '半碗')}\n                                                >\n                                                    <Text\n                                                        style={{\n                                                            textAlign: 'center',\n                                                            color: meal_rating === '半碗' ? '#D3D3D3' : 'grey',\n                                                            fontSize: 20\n                                                        }}\n                                                    >\n                                                        半碗\n                                                    </Text>\n                                                </TouchableHighlight>\n                                                <TouchableHighlight\n                                                    style={{\n                                                        width: '30%',\n                                                        height: '100%',\n                                                        // margin: 5,\n                                                        justifyContent: 'center',\n                                                        backgroundColor: meal_rating === '胃口不佳' ? '#368cbf' : '#b5e9e9',\n                                                        padding: 15\n                                                    }}\n                                                    onPress={() => handleRateFoodWellness(student_id, '胃口不佳')}\n                                                >\n                                                    <Text\n                                                        style={{\n                                                            textAlign: 'center',\n                                                            color: meal_rating === '胃口不佳' ? '#D3D3D3' : 'grey',\n                                                            fontSize: 20\n                                                        }}\n                                                    >\n                                                        胃口不佳\n                                                    </Text>\n                                                </TouchableHighlight>\n                                                <TouchableHighlight\n                                                    style={{\n                                                        width: '30%',\n                                                        height: '100%',\n                                                        // margin: 5,\n                                                        justifyContent: 'center',\n                                                        backgroundColor:\n                                                            isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ?\n                                                                '#368cbf'\n                                                                : '#b5e9e9',\n                                                        padding: 15\n                                                    }}\n                                                    onPress={() => onClickOther(student_id)}\n                                                >\n                                                    {isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ?\n                                                        <TextInput\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: '#D3D3D3',\n                                                                fontSize: 20\n                                                            }}\n                                                            maxLength={6}\n                                                            autoFocus={meal_rating === '' ? true : false}\n                                                            onChangeText={customized_text => onCustomizeRating(student_id, customized_text)}\n                                                            value={meal_rating}\n                                                            onBlur={() => customizedRatingOnBlur(student_id)}\n                                                        />\n                                                        : <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            Other\n                                                        </Text>\n                                                    }\n                                                </TouchableHighlight>\n                                            </View>\n                                        </View>\n                                    </View>\n                                </CardItem>\n                            </Card>\n                        </View>\n                    )\n                })}\n            </Content>\n        </KeyboardAvoidingView>\n    )\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        width: '20%',\n        // width: 100,\n        // height: '100%',\n        justifyContent: 'center',\n        alignItems: 'center',\n        // marginLeft: -7,\n        // backgroundColor: 'red'\n    },\n    cardBody: {\n        flex: 1,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        marginTop: 10\n        // marginBottom: 15\n        // backgroundColor: 'lightblue'\n    },\n    foodButton: {\n        width: 70,\n        alignSelf: 'center',\n        margin: 5,\n        justifyContent: 'center',\n        backgroundColor: '#b5e9e9'\n    },\n    thumbnailImage: {\n        height: 130,\n        width: 130,\n        borderRadius: 65\n    },\n    subHeading: {\n        width: '99%',\n        // height: 45,\n        paddingHorizontal: '4%',\n        // marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        // backgroundColor: '#ccd2dd',\n        zIndex: 2\n    },\n    mealButtons: {\n        width: '99%',\n        // height: 45,\n        marginVertical: 15,\n        // marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        // zIndex: 1,\n        // position: 'absolute'\n    },\n    mealButtonText: {\n        fontSize: 30,\n        textAlign: 'center'\n    },\n    buttonText: {\n        color: 'grey',\n        textAlign: 'center'\n    }\n})\n\nconst mapStatesToProps = (state) => {\n    return {\n        class: state.classInfo,\n        appetite: state.appetite\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            rateAppetite,\n            clearRatings,\n            setAllRatingsToGreat,\n            setAllDrinkWater,\n            fetchClassAppetiteData,\n            onSendAppetiteSuccess,\n            alertErrMessage,\n            markWaterDrank,\n            editFruitName,\n            clearAppetiteErrorMessage,\n            addStudentIdForUpdate\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStatesToProps, mapDispatchToProps) (TeacherAppetiteLog)","import React, { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { StyleSheet, Image, TouchableHighlight, Alert } from 'react-native'\nimport { Container, Content, Text, View, Card, Toast} from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    setSleepTime,\n    setWakeTime,\n    fetchClassSleepData,\n    clearPendingSleepUpdate,\n    createSleepRecordSuccess,\n    createSleepRecordFail,\n    editSleepRecordSuccess,\n    editSleepRecordFail,\n    removeSleepRecord,\n    removeSleepRecordSuccess,\n    removeSleepRecordFail,\n    alertSleeplogErrorMessage,\n    clearSleeplogErrorMessage,\n    removeWakeTime,\n    markRecordError,\n    markRecordCorrect\n} from '../../../redux/school/actions/index'\nimport { formatDate, formatTime, fetchClassData } from '../../util'\nimport Reloading from '../../reloading'\nimport TimeModal from '../../parent/timemodal'\n\n\nconst TeacherSleepLog = (props) => {\n    const location = useLocation()\n    const [ state, setState ] = useState({\n        isLoading: true,\n        date: new Date(),\n        showIOSDatePicker: false,\n        student_id: '',\n        index: -1,\n        recordType: '',\n        teacher_id: '',\n        confirmDelete: false,\n        showDateTimeModal: false\n    })\n\n    useEffect(() => {\n        const { newDataForCreate, oldDataForEdit } = props.sleep\n        const { isConnected } = props.class\n        const { teacher_id, date, teacher_name } = location?.state\n        setState({ ...state, teacher_id })\n        if ((newDataForCreate.size + oldDataForEdit.size === 0) && isConnected) {\n            fetchClassSleepData(date)\n        }\n        else {\n            setState({\n                ...state,\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n\n        // props.navigation.setOptions({ \n        //     title: `睡眠 - ${teacher_name}`\n        // })\n    }, [])\n\n    const fetchClassSleepData = async(propsDate) => {\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n        //     )\n        // })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const sleepData = await fetchClassData('sleep', props.class.class_id, start_date, end_date)\n        denormalize(sleepData)\n        props.fetchClassSleepData(sleepData.data)\n        setState({\n            ...state,\n            isLoading: false\n        })\n        // props.navigation.setOptions({ \n        //     headerRight: () => (\n        //         <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n        //     )\n        // })\n    }\n\n    const denormalize = (sleepData) => {\n        if (!sleepData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = sleepData.data.records\n        for (var record_id in by_id) {\n            by_id[record_id].sleep_time = new Date(by_id[record_id].sleep_time)\n            by_id[record_id].wake_time = by_id[record_id].wake_time === null ? null : new Date(by_id[record_id].wake_time)\n        }\n        sleepData.data.records.by_id = by_id\n    }\n\n    const hasUnsentRecord = (student_id) => {\n        const { newDataForCreate, oldDataForEdit, by_student_id } = props.sleep\n        let record_id_array = by_student_id[student_id]\n        var hasUnsentRecord = false\n        for (var i = 0; i < record_id_array.length; i++) {\n            if (newDataForCreate.has(record_id_array[i]) || oldDataForEdit.has(record_id_array[i])) {\n                hasUnsentRecord = true\n                break\n            }\n        }\n        return hasUnsentRecord\n    }\n\n    const handleOnClick = (student_id) => {\n        const record_id_array = props.sleep.by_student_id[student_id]\n        const records = props.sleep.records.by_id\n        const last_record = record_id_array.length > 0 ? records[record_id_array[record_id_array.length - 1]] : null\n        const current_wake_time = last_record ? last_record.wake_time : null\n\n        if (!record_id_array.length || current_wake_time) {\n            props.setSleepTime(student_id, null, new Date(), state.teacher_id)\n        } else {\n            props.setWakeTime(student_id, record_id_array.length - 1, new Date(), state.teacher_id)\n        }\n        checkLastRecord(student_id, records, record_id_array)\n    }\n\n    const checkLastRecord = (student_id, records, record_id_array) => {\n        const n = record_id_array.length\n        const last_record_id = record_id_array[record_id_array.length - 1]\n        const last_record = records[last_record_id]\n        if (last_record.wake_time !== null && last_record.sleep_time.getTime() >= last_record.wake_time.getTime()) {\n            props.markRecordError([last_record_id])\n        } \n        \n        if (n > 1) {\n            const last_second_record_id = record_id_array[record_id_array.length - 2]\n            const last_second_record = records[last_second_record_id]\n            if (last_record.sleep_time >= last_second_record.sleep_time && last_record.sleep_time <= last_second_record.wake_time) {\n                props.markRecordError([last_record_id])\n            }\n        }\n    }\n\n    const setTime = (recordType, student_id, index, start_time) => {\n        setState({\n            ...state,\n            student_id,\n            index,\n            recordType,\n            showDateTimeModal: true,\n            start_time: start_time ? start_time : new Date()\n        })\n    }\n\n    const updateReducerTime = (index, time) => {\n        setState({ ...state, showDateTimeModal: false })\n        if (state.recordType === 'sleep') {\n            props.setSleepTime(state.student_id, index, time, state.teacher_id)\n        } else {\n            props.setWakeTime(state.student_id, index, time, state.teacher_id)\n        }\n        checkRecord(state.student_id, index)\n    }\n\n    const checkRecord = (student_id, index) => {\n        const record_id_array = props.sleep.by_student_id[student_id]\n        const records = props.sleep.records.by_id\n        const record_id = record_id_array[index]\n        const record = records[record_id]\n        const { records_with_error } = props.sleep\n        let prev_record_id = null\n        let next_record_id = null\n\n        if (index < 0 || index > record_id_array.length - 1) {\n            return\n        }\n\n        if (record.wake_time !== null) {\n            if(record.sleep_time.getTime() >= record.wake_time.getTime()) {\n                props.markRecordError([record_id])\n                return\n            }\n        }\n\n        if (index > 0) {\n            prev_record_id = record_id_array[index-1]\n            const prev_record = records[prev_record_id]\n            if (//record.sleep_time.getTime() >= prev_record.sleep_time.getTime() && \n                prev_record.wake_time !== null &&\n                record.sleep_time.getTime() <= prev_record.wake_time.getTime()) {\n                props.markRecordError([record_id])\n                return\n            }\n        }\n\n        if (index < record_id_array.length - 1) {\n            next_record_id = record_id_array[index+1]\n            const next_record = records[next_record_id]\n            if (record.wake_time >= next_record.sleep_time) {\n                props.markRecordError([record_id])\n                return\n            }\n        }\n\n        props.markRecordCorrect(record_id)\n\n        if (prev_record_id !== null && records_with_error.has(prev_record_id)) {\n            checkRecord(student_id, index-1)\n            // console.log('records_with_error.has(prev_record_id: ', records_with_error.has(prev_record_id))\n        }\n\n        if (next_record_id !== null && records_with_error.has(next_record_id)) {\n            // console.log('records_with_error.has(next_record_id: ', records_with_error.has(next_record_id))\n            checkRecord(student_id, index+1)\n        }\n    }\n\n    const confirmToRemoveWakeTime = (record_id, index, student_id) => {\n        const record_id_array = props.sleep.by_student_id[student_id]\n        if (index !== record_id_array.length - 1) {\n            // cannot remove wake time if it is not the most recent record\n            props.alertSleeplogErrorMessage('這個睡眠記錄並不能刪除，只能改選')\n            return\n        }\n        Alert.alert(\n            '確定要刪除?',\n            '',\n            [\n                { text: 'Yes', onPress: () => props.removeWakeTime(record_id, state.teacher_id) },\n                { text: 'Cancel', style: 'cancel'}]\n        )\n    }\n\n    const handleSend = async() => {\n        const { isConnected } = props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        setState({\n            ...state,\n            isLoading: true\n        })\n        const { newDataForCreate, oldDataForEdit } = props.sleep\n        \n        if (newDataForCreate.size) {\n            const createSleepRecordRes = await createRecord()\n            if (createSleepRecordRes.success) {\n                // console.log('SUCCESS')\n                props.createSleepRecordSuccess()\n            } else {\n                props.createSleepRecordFail()\n                return\n            }\n        }\n\n        if (oldDataForEdit.size) {\n            const editSleepRecordRes = await editRecord()\n            if (editSleepRecordRes.success) {\n                props.editSleepRecordSuccess()\n            } else {\n                props.editSleepRecordFail()\n                return\n            }\n        }\n\n        props.navigation.goBack()\n    }\n\n    const createRecord = async() => {\n        const { newDataForCreate, records } = props.sleep\n        \n        const data_objs = []\n        newDataForCreate.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n\n        normalize(data_objs)\n\n        var request_body = {\n            date: formatDate(state.date),\n            data_objs\n        }\n\n        const createSleepRecordRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('sleep resJson: ', resJson)\n                if (resJson['statusCode'] > 200) {\n                    return {\n                        success: false,\n                        status_code: resJson['statusCode'],\n                        data: resJson.message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return createSleepRecordRes\n    }\n\n    const editRecord = async() => {\n        const { oldDataForEdit, records } = props.sleep\n        const data_objs = []\n        oldDataForEdit.forEach(record_id => {\n            data_objs.push({\n                record_id,\n                ...records.by_id[record_id]\n            })\n        })\n\n        normalize(data_objs)\n\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const editRecordRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        }).then(res => res.json())\n        .then(resJson => {\n            if (resJson['statusCode'] > 200) {\n                return {\n                    success: false,\n                    status_code: resJson['statusCode'],\n                    data: resJson.message\n                }\n            }\n            return {\n                success: true,\n                status_code: 200,\n                data: resJson\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                status_code: 500,\n                data: err\n            }\n        })\n        return editRecordRes\n    }\n\n    const confirmToRemoveRecord = (record_id, student_id) => {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'Yes', onPress: () => removeRecord(record_id, student_id) },\n                { text: 'Cancel', style: 'cancel' }\n            ]\n        )\n    }\n\n    const removeRecord = (record_id, student_id) => {\n        const { newDataForCreate } = props.sleep\n        const { isConnected } = props.class\n\n        if (newDataForCreate.has(record_id)) {\n            props.removeSleepRecordSuccess(record_id, student_id)\n            return\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep`\n        fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                record_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    props.removeSleepRecordFail(message)\n                    return {\n                        success: false,\n                        statusCode,\n                        message\n                    }\n                }\n                props.removeSleepRecordSuccess(record_id, student_id)\n                return {\n                    success: true,\n                    statusCode,\n                    message\n                }\n            })\n            .catch(err => {\n                props.removeSleepRecordFail(err)\n                return {\n                    success: false,\n                    message: err\n            }\n        })\n    }\n\n    const normalize = (data_objs) => {\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].sleep_time = formatTime(data_objs[i].sleep_time)\n            data_objs[i].wake_time = data_objs[i].wake_time === null ? null : formatTime(data_objs[i].wake_time)\n        }\n    }\n\n\n    if (props.sleep.errorMessage !== ''){\n        Alert.alert(\n            'Add new record fail',\n            props.sleep.errorMessage,\n            [{text: 'OK', onPress: () => props.clearSleeplogErrorMessage()}]\n        )\n    }\n    const { records_with_error } = props.sleep\n    const { showDateTimeModal, start_time, date } = state\n    // console.log('records_with_error: ', records_with_error)\n    // console.log('showDateTimeModal: ', showDateTimeModal)\n    if (state.isLoading) {\n        return <Reloading />\n    }\n\n    return (\n        <Container>\n            {showDateTimeModal ?\n                <TimeModal\n                    start_date={start_time}\n                    datetime_type={'time'}\n                    hideModal={() => setState({ ...state, showDateTimeModal: false })}\n                    selectDatetimeConfirm={(time) => updateReducerTime(state.index, time)}\n                    minDatetime={null}\n                    maxDatetime={null}\n                />\n                : null\n            }\n            <View style={styles.subHeading}>\n                <View style={{ flex: 1, alignItems: 'center' }}>\n                    <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n                </View>\n                \n                <View style={{ flex: 1, justifyContent: 'center' }}>\n                    <TouchableHighlight\n                        style={{ alignSelf: 'flex-end', backgroundColor: '#dcf3d0', padding: 10, marginRight: 50 }}\n                        onPress={handleSend}\n                        underlayColor=\"#00c07f\"\n                    >\n                        <Text style={{ fontSize: 40, color: 'grey' }}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n            </View>\n            <Content contentContainerStyle={{ alignItems: 'center' }}>\n                {Object.keys(props.class.students).map((student_id) => {\n                    const record_id_array = props.sleep.by_student_id[student_id] // [record_id, ...]\n                    const records = props.sleep.records.by_id\n                    const last_record = record_id_array.length > 0 ? records[record_id_array[record_id_array.length - 1]] : null\n                    const current_sleep_time = last_record ? last_record.sleep_time : null\n                    const current_wake_time = last_record ? last_record.wake_time : null\n                    return(\n                        <View key={student_id} style={{ width: '98%' }}>\n                            <Card style={{ flex: 1, paddingVertical: 15 }}>\n                                <View style={{ flex: 1, flexDirection: 'row' }}>\n                                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                        <TouchableHighlight\n                                            key={student_id}\n                                            style={styles.thumbnail}\n                                            onPress={() => handleOnClick(student_id)}>\n                                            <Image\n                                                source={\n                                                    props.class.students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: props.class.students[student_id].profile_picture}\n                                                }\n                                                style={{\n                                                    width: 140,\n                                                    height: 140,\n                                                    borderRadius: 70,\n                                                    borderWidth: 8,\n                                                    borderColor: current_sleep_time !== null ? (current_wake_time === null ? '#ffe1d0' : '#dcf3d0') : '#dcf3d0'\n                                                }} />\n                                        </TouchableHighlight>\n                                    </View>\n                                    <View style={{ flex: 3 }}>\n                                        <View style={{ flex: 1, flexDirection: 'row', padding: 10 }}>\n                                            <View style={{ flex: 1 }}>\n                                                <Text style={{ fontSize: 30 }}>{props.class.students[student_id].name}</Text>\n                                            </View>\n                                            <View style={{ flex: 1, alignItems: 'flex-end' }}>\n                                                {hasUnsentRecord(student_id) ? \n                                                    <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                : null}\n                                            </View>\n                                        </View>\n                                        <View style={styles.cardBody}>\n                                            <View style={{ width: '40%', height: '100%', paddingLeft: 5 }}>\n                                                <Text style={{ fontSize: 20 }}>從</Text>\n                                            </View>\n                                            <View style={{ width: '40%', height: '100%', paddingLeft: 5 }}>\n                                                <Text style={{ fontSize: 20 }}>到</Text>\n                                            </View>\n                                        </View>\n                                        {record_id_array.map((record_id, index) => {\n                                            let { sleep_time, wake_time } = records[record_id]\n                                            return (\n                                                <View key={record_id} style={{\n                                                    flex: 1,\n                                                    flexDirection: 'row',\n                                                    marginVertical: 6,\n                                                    borderWidth: 2, \n                                                    borderColor: records_with_error.has(record_id) ? 'red' : 'white'\n                                                }}>\n                                                    <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                        <TouchableHighlight\n                                                            style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10}}\n                                                            onPress={() => setTime('sleep', student_id, index, sleep_time)}\n                                                        >\n                                                            {sleep_time === null ?\n                                                                <Text style={{ fontSize: 30, textAlign: 'center' }}>選擇時間</Text> :\n                                                                <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                    {sleep_time.getHours() + ':' + sleep_time.getMinutes()}\n                                                                </Text>}\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                    <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                        <TouchableHighlight\n                                                            style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10 }}\n                                                            onPress={() => setTime('wake', student_id, index, wake_time)}\n                                                            onLongPress={() => confirmToRemoveWakeTime(record_id, index, student_id)}\n                                                        >\n                                                            {wake_time === null ?\n                                                                <Text style={{ fontSize: 30, textAlign: 'center' }}>選擇時間</Text> :\n                                                                <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                    {wake_time.getHours() + ':' + wake_time.getMinutes()}\n                                                                </Text>}\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                    <View style={{ width: '20%', marginRight: '4%', height: '100%' }}>\n                                                        <TouchableHighlight\n                                                            style={{ flex: 1, justifyContent: 'center', backgroundColor: '#ffe1d0', borderRadius: 10 }}\n                                                            onPress={() => confirmToRemoveRecord(record_id, student_id)}\n                                                        >\n                                                            <Text style={{ fontSize: 30, textAlign: 'center' }}>移除</Text>\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                </View>\n                                            )\n                                        })}\n                                    </View>\n                                </View>\n                            </Card>\n                        </View>\n                    )\n                })}\n            </Content>\n            {/* {state.showIOSDatePicker ?\n                <View style={{ height: 200, justifyContent: 'center'}}>\n                    <DatePickerIOS\n                        mode={'time'}\n                        date={new Date()}\n                        onDateChange={(time) => updateReducerTime(state.index, time)}\n                    />\n                </View> : null} */}\n        </Container>\n    )\n}\n\nconst styles = StyleSheet.create({\n    thumbnail: {\n        // width: 100,\n        // height: 100,\n        // borderRadius: 50,\n        // backgroundColor: 'transparent',\n        // marginLeft: -7,\n    },\n    subHeading: {\n        // width: 355,\n        // height: 45,\n        // marginTop: 10,\n        // padding: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        // justifyContent: 'space-between',\n    },\n    cardBody: {\n        flex: 1,\n        flexDirection: 'row',\n        marginVertical: 6\n    },\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        sleep: state.sleep\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setSleepTime,\n            setWakeTime,\n            fetchClassSleepData,\n            clearPendingSleepUpdate,\n            createSleepRecordSuccess,\n            createSleepRecordFail,\n            editSleepRecordSuccess,\n            editSleepRecordFail,\n            removeSleepRecord,\n            removeSleepRecordSuccess,\n            removeSleepRecordFail,\n            alertSleeplogErrorMessage,\n            clearSleeplogErrorMessage,\n            removeWakeTime,\n            markRecordError,\n            markRecordCorrect\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherSleepLog)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, View, Text, TextInput, Alert} from 'react-native'\nimport { Container, Content, Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    editMilkAmount,\n    addMilkRecord,\n    fetchClassMilkData,\n    createDataSuccess,\n    createDataFail,\n    editDataSuccess,\n    editDataFail,\n    removeRecord,\n    removeMilkRecordSuccess,\n    removeMilkRecordFail,\n    editMilkTime\n} from '../../../redux/school/actions/index'\nimport { formatTime, formatDate, fetchClassData } from '../../util'\nimport Reloading from '../../reloading'\nimport TimeModal from '../../parent/timemodal'\n\nclass TeacherMilkLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            showDateTimeModal: false,\n            record_id: ''\n        }\n        this.handleSend = this.handleSend.bind(this)\n        this.handleOnAddRecord = this.handleOnAddRecord.bind(this)\n    }\n\n    componentDidMount() {\n        const { isConnected } = this.props.class\n        const { date, teacher_name } = this.props.route.params\n        if (!this.props.milk.loaded && isConnected) {\n            this.fetchClassData(date)\n        }\n        else {\n            this.setState({\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n\n        this.props.navigation.setOptions({ \n            title: `餵奶 - ${teacher_name}`\n        })\n    }\n\n    checkUnsent(student_id) {\n        const { newDataForCreate, oldDataForEdit, dataForRemoval, by_student_id } = this.props.milk\n        const record_id_list = by_student_id[student_id]\n        var found = false\n        for (var i = 0; i < record_id_list.length; i++) {\n            const record_id = record_id_list[i]\n            if (newDataForCreate.has(record_id) || oldDataForEdit.has(record_id)) {\n                found = true\n                break\n            }\n        }\n        return found\n    }\n\n    async fetchClassData(propsDate) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n            )\n        })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const milkData = await fetchClassData('milkintake', this.props.class.class_id, start_date, end_date)\n        this.denormalize(milkData)\n        this.props.fetchClassMilkData(milkData.data)\n        this.setState({\n            isLoading: false\n        })\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    denormalize(milkData) {\n        if (!milkData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = milkData.data.records\n        for (const record_id in by_id) {\n            by_id[record_id].time = new Date(by_id[record_id].time)\n        }\n    }\n\n    handleEditMilkAmout(record_id, milk_amount) {\n        const { teacher_id } = this.props.route.params\n        this.props.editMilkAmount(record_id, milk_amount, teacher_id)\n    }\n\n    handleOnAddRecord(student_id) {\n        this.props.addMilkRecord(student_id)\n    }\n\n    confirmToRemoveRecord(student_id, record_id, index) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'Yes', onPress: () => this.handleRemoveRecord(student_id, record_id, index) },\n                { text: 'Cancel', style: 'cancel' }\n            ]\n        )\n    }\n\n    handleRemoveRecord(student_id, record_id, index) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.props.removeRecord(student_id, record_id, index)\n        this.handleRemove(record_id, student_id)\n    }\n\n    async handleSend() {\n        // this.setState({ isLoading: true })\n        const { newDataForCreate, oldDataForEdit, dataForRemoval } = this.props.milk\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        if (newDataForCreate.size) {\n            const handleCreateRes = await this.handleCreate()\n            // console.log('handleCreateRes: ', handleCreateRes)\n            if (handleCreateRes.success) {\n                this.props.createDataSuccess()\n            } else {\n                this.props.createDataFail(handleCreateRes.data)\n                return\n            }\n        }\n\n        if (oldDataForEdit.size) {\n            const handleEditRes = await this.handleEdit()\n            // console.log('handleEditRes: ', handleEditRes)\n            if (handleEditRes.success) {\n                this.props.editDataSuccess()\n            } else {\n                this.props.editDataFail(handleEditRes.data)\n                return\n            }\n        }\n        // this.setState({ isLoading: false })\n        this.props.navigation.goBack()\n    }\n\n    async handleCreate() {\n        const { newDataForCreate, records } = this.props.milk\n        const data_objs = []\n        newDataForCreate.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const createDataRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('milklog/resJson: ', resJson)\n                const {statusCode, errMessage, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: errMessage || message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return createDataRes\n    }\n\n    async handleEdit() {\n        const { oldDataForEdit, records } = this.props.milk\n        const data_objs = []\n        \n        oldDataForEdit.forEach(record_id => {\n            data_objs.push({\n                record_id,\n                ...records.by_id[record_id]\n            })\n        })\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const editDataRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const {statusCode, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return editDataRes\n    }\n\n    async handleRemove(record_id, student_id) {\n        const { dataForRemoval } = this.props.milk\n\n        if (!dataForRemoval.has(record_id)) {\n            return\n        }\n\n        var request_body = {\n            record_id_array: record_id,\n            student_id\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake`\n        const removeRes = await fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const {statusCode, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n\n        if (removeRes.success) {\n            this.props.removeMilkRecordSuccess()\n        } else {\n            this.props.removeMilkRecordFail()\n        }\n    }\n\n    normalize(data_objs) {\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].time = formatTime(data_objs[i].time)\n        }\n    }\n\n    selectDatetimeConfirm(time) {\n        const { teacher_id } = this.props.route.params\n        const { record_id } = this.state\n        this.setState({ record_id: '', showDateTimeModal: false })\n        this.props.editMilkTime(record_id, time, teacher_id)\n    }\n\n    render() {\n        if (this.state.isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n\n        const { date, showDateTimeModal } = this.state\n        return (\n            <Container>\n                {showDateTimeModal ?\n                    <TimeModal\n                        start_date={date}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showDateTimeModal: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n                <View style={styles.subHeading}>\n                    <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#dcf3d0', padding: 10 }}\n                        onPress={this.handleSend}\n                    >\n                        <Text style={{ fontSize: 40, color: 'grey' }}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n                <Content contentContainerStyle={{ alignItems: 'center' }}>\n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const record_id_array = this.props.milk.by_student_id[student_id]\n                        const records = this.props.milk.records.by_id\n                        return(\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, paddingVertical: 15 }}>\n                                    <View style={{ flex: 1, flexDirection: 'row'}}>\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <TouchableHighlight\n                                                style={styles.childThumbnail}\n                                                onPress={() => this.handleOnAddRecord(student_id)}\n                                                underlayColor=\"transparent\"\n                                            >\n                                                <Image\n                                                    // source={{uri: this.props.class.students[student_id].profile_picture }}\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={styles.thumbnailImage}/>\n                                            </TouchableHighlight>\n                                        </View>\n                                        <View style={{ flex: 3}}>\n                                            <View style={{ flexDirection: 'row'}}>\n                                                <View style={{ flex: 1 }}>\n                                                    <Text style={{ fontSize: 30, paddingLeft: 18 }}>{this.props.class.students[student_id].name}</Text>\n                                                </View>\n                                                <View style={{ flex: 1, paddingRight: 15 }}>\n                                                    {this.checkUnsent(student_id) ?\n                                                        <Text style={{ fontSize: 15, paddingLeft: 18, alignSelf: 'flex-end', color: 'red' }}>\n                                                            未送出\n                                                        </Text>\n                                                        : null\n                                                    }\n                                                </View>\n                                            </View>\n                                            {record_id_array.map((record_id, index) => {\n                                                const record = records[record_id]\n                                                return (\n                                                    <View key={record_id} style={styles.cardBody}>\n                                                        <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10 }}\n                                                                onPress={() => this.setState({ showDateTimeModal: true, record_id})}\n                                                            >\n                                                                <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                    {record.time.getHours() + ':' + record.time.getMinutes()}\n                                                                </Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                        <View style={{\n                                                            flexDirection: 'row',\n                                                            width: '35%',\n                                                            marginRight: '3%',\n                                                            alignItems: 'center',\n                                                            justifyContent: 'center',\n                                                            backgroundColor: '#fef6dd',\n                                                            height: '100%',\n                                                            borderRadius: 10\n                                                        }}>\n                                                            <TextInput\n                                                                style={{ flex: 2, fontSize: 35, textAlign: 'center' }}\n                                                                keyboardType='decimal-pad'\n                                                                placeholder=\"⽤量\"\n                                                                value={'' + record.amount}\n                                                                onChangeText={(milk_amount) => {this.handleEditMilkAmout(record_id, milk_amount)}}\n                                                            />\n                                                            <Text style={{ flex: 1, fontSize: 30, textAlign: 'center' }}>\n                                                                c.c.\n                                                            </Text>\n                                                        </View>\n                                                        <View style={{ width: '20%', marginRight: '4%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex:1, justifyContent: 'center', backgroundColor: '#ffe1d0', borderRadius: 10}}\n                                                                onPress={() => this.confirmToRemoveRecord(student_id, record_id, index)}\n                                                            >\n                                                                <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                    移除\n                                                                </Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                    </View>\n                                                )\n                                            })}\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        // width: 100,\n        // height: 100,\n        // backgroundColor: 'white',\n        // marginLeft: -7,\n    },\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    },\n    subHeading: {\n        width: '90%',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        alignSelf: 'center'\n    },\n    cardBody: {\n        // flex: 1,\n        flexDirection: 'row',\n        marginVertical: 6\n        // alignItems: 'center',\n        // justifyContent: 'center',\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        milk: state.milk\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            editMilkAmount,\n            addMilkRecord,\n            fetchClassMilkData,\n            createDataSuccess,\n            createDataFail,\n            editDataSuccess,\n            editDataFail,\n            removeRecord,\n            removeMilkRecordSuccess,\n            removeMilkRecordFail,\n            editMilkTime\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherMilkLog)","import React from 'react'\nimport { TextInput } from 'react-native'\n\nexport default class PooTextInput extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            other_option: '其他'\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            other_option: '其他'\n        }, () => {\n            console.log('mounted', this.refs.textRef.isFocused())\n        })\n    //    this.refs.textRef.focus()\n    //    console.log('mounted', this.refs.textRef.isFocused())\n    }\n\n    onBlur(other_option) {\n        console.log('onBlur')\n        this.setState({\n            other_option: ''\n        })\n        this.props.editPooCondition(other_option)\n    }\n\n    // componentWillUnmount() {\n        \n    // }\n\n    render() {\n        const { other_option } = this.state\n        console.log('other_option ===: ',other_option === '其他')\n        return (\n            <TextInput\n                ref={\"textRef\"}\n                autoFocus={other_option === '其他'}\n                selectTextOnFocus={true}\n                style={{ fontSize: 30, textAlign: 'center' }}\n                // keyboardType='default'\n                value={other_option}\n                onChangeText={(condition) => this.setState({ other_option: condition})}\n                onEndEditing={() => this.props.editPooCondition(other_option)}\n                onBlur={() => this.onBlur(other_option)}\n            />\n        )\n    }\n}","import React from 'react'\nimport { Card, Toast } from 'native-base'\nimport { View, ScrollView, Text, Image, TouchableHighlight, StyleSheet, TextInput, KeyboardAvoidingView, Alert } from 'react-native'\nimport DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, fetchClassData, beautifyDate } from '../../util'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n    updateDiaperAmount,\n    addDiaperRecord,\n    editDiaperTime,\n    switchPeeOrPoo,\n    editPooCondition,\n    removeDiaperRecordSuccess,\n    removeDiaperRecordFail,\n    fetchClassDiaperData,\n    createDiaperRecordSuccess,\n    createDiaperRecordFail,\n    editDiaperRecordSuccess,\n    editDiaperRecordFail,\n    editDiaperAmountSuccess,\n    editDiaperAmountFail,\n    clearDiaperlogErrorMessage\n} from '../../../redux/school/actions/index'\nimport PickerComponent from '../../picker'\nimport PooTextInput from './pootextinput'\n\nclass PooEntry extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            selected_other: false,\n            other_option: ''\n        }\n    }\n\n    componentDidMount() {\n       \n    }\n\n    editPooCondition(record_id, condition) {\n        // console.log('editPooCondition: ', record_id, condition, teacher_id)\n        const { teacher_id } = this.props\n        if (condition === '取消編輯') {\n            return \n        } else if (condition === '其他') {\n            this.setState({\n                selected_other: true,\n                other_option: ' '\n            })\n            \n        } else {\n            console.log('editPooCondition: ', record_id, condition, teacher_id)\n            this.setState({\n                selected_other: false,\n                other_option: condition\n            })\n            this.props.editPooCondition(record_id, condition, teacher_id)\n        }\n    }\n\n    render() {\n        // TODO: Provide some options for poo condition\n        // if (this.props.diaper_records.err_message !== ''){\n        //     Alert.alert(\n        //         'Error!',\n        //         this.props.diaper_records.err_message,\n        //         [{text: 'OK', onPress: () => this.props.clearDiaperlogErrorMessage()}]\n        //     )\n        // }\n        const { record_id, record } = this.props\n        const { selected_other,other_option } = this.state\n        // const { by_student_id, records } = this.props.diaper_records\n        // const { students } = this.props.class\n        // const date = this.state.date\n        // console.log('record_id: ', record_id)\n        return (\n            <View\n                style={{\n                    width: '23%',\n                    // marginRight: '3%',\n                    height: '100%',\n                    justifyContent: 'center',\n                    backgroundColor: '#fef6dd',\n                    borderRadius: 10\n                }}\n            >\n                {selected_other ?\n                    <TextInput\n                        style={{ fontSize: 30, textAlign: 'center' }}\n                        keyboardType='default'\n                        autoFocus={selected_other}\n                        // showSoftInputOnFocus={true}\n                        selectTextOnFocus={true}\n                        // scrollEnabled={false}\n                        value={other_option}\n                        onChangeText={(condition) => this.setState({ other_option: condition})}\n                        // onFocus={() => }\n                        onBlur={() => this.editPooCondition(record_id, other_option)}\n                    />\n\n                    // <PooTextInput\n                    //     editPooCondition={(other_option) => this.editPooCondition(record_id, other_option)}\n                    // />\n\n                    : <PickerComponent\n                        style={{\n                            // height: 20,\n                            // width: '50%',\n                            // marginLeft: 25\n                            alignItems: 'center',\n                            padding: 5\n                        }}\n                        selectedValue={other_option || record.poo_condition}\n                        options={[\n                            \"正常\",\n                            \"硬\",\n                            \"軟糊\",\n                            \"稀水\",\n                            \"其他\",\n                            \"取消編輯\"\n                        ]}\n                        textStyle={{ fontSize: 30 }}\n                        handleOnClick={() => { }}\n                        handleSelectValue={(condition) => this.editPooCondition(record_id, condition)}\n                    />\n                }\n            </View>\n        )\n    }\n}\n\n// const styles = StyleSheet.create({\n//     thumbnailImage: {\n//         width: 140,\n//         height: 140,\n//         borderRadius: 70\n//     }\n// })\n\nconst mapStateToProps = (state) => {\n    return {\n        diaper_records: state.diaper,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            editPooCondition\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (PooEntry)","import React from 'react'\nimport { Card, Toast } from 'native-base'\nimport { View, ScrollView, Text, Image, TouchableHighlight, StyleSheet, TextInput, KeyboardAvoidingView, Alert } from 'react-native'\nimport DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, fetchClassData, beautifyDate } from '../../util'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n    updateDiaperAmount,\n    addDiaperRecord,\n    editDiaperTime,\n    switchPeeOrPoo,\n    editPooCondition,\n    removeDiaperRecordSuccess,\n    removeDiaperRecordFail,\n    fetchClassDiaperData,\n    createDiaperRecordSuccess,\n    createDiaperRecordFail,\n    editDiaperRecordSuccess,\n    editDiaperRecordFail,\n    editDiaperAmountSuccess,\n    editDiaperAmountFail,\n    clearDiaperlogErrorMessage\n} from '../../../redux/school/actions/index'\nimport PickerComponent from '../../picker'\nimport PooEntry from './pooentry'\nimport PooTextInput from './pootextinput'\n\nclass DiaperLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            other_option: '',\n            show_time_picker: false,\n            record_id_for_edit: '',\n            cloth_diaper: false,\n            record_id: ''\n        }\n        this.handleSend = this.handleSend.bind(this)\n    }\n\n    componentDidMount() {\n        const { date, teacher_name } = this.props.route.params\n        const { new_data_for_create, old_data_for_edit } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        if ((new_data_for_create.size + old_data_for_edit.size === 0) && isConnected) {\n            this.fetchClassData(date)\n        } else {\n            this.setState({\n                isLoading: false\n            })\n        }\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n        this.props.navigation.setOptions({ \n            title: `如廁 - ${teacher_name}`\n        })\n    }\n\n    checkUnsent(student_id) {\n        const { new_data_for_create, old_data_for_edit, by_student_id } = this.props.diaper_records\n        const { records } = by_student_id[student_id]\n        var found = false\n        // if (students_pending_amount_update.has(student_id)) {\n        //     return true\n        // }\n        for (var i = 0; i < records.length; i++) {\n            if (new_data_for_create.has(records[i]) || old_data_for_edit.has(records[i])) {\n                found = true\n                break\n            }\n        }\n        return found\n    }\n\n    async fetchClassData(propsDate) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n            )\n        })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const diaperData = await fetchClassData('diaper', this.props.class.class_id, start_date, end_date)\n        this.denormalize(diaperData)\n        this.props.fetchClassDiaperData(diaperData.data)\n        this.setState({\n            isLoading: false\n        })\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    denormalize(diaperData) {\n        // console.log('denormalize: ', diaperData)\n        if (!diaperData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = diaperData.data.records\n        for (const record_id in by_id) {\n            by_id[record_id].time = new Date(by_id[record_id].time)\n        }\n    }\n\n    handleUpdateDiaperAmount(student_id, amount) {\n        this.props.updateDiaperAmount(student_id, amount)\n    }\n\n    addDiaperRecord(student_id) {\n        const { teacher_id } = this.props.route.params\n        this.props.addDiaperRecord(student_id, new Date(), this.state.cloth_diaper, teacher_id)\n    }\n\n    setTime(time) {\n        const { teacher_id } = this.props.route.params\n        const { record_id_for_edit } = this.state\n        if (time !== undefined) {\n            this.setState({ \n                show_time_picker: false,\n                record_id_for_edit: ''\n            })\n            this.props.editDiaperTime(record_id_for_edit, time, teacher_id)\n        } else {\n            this.setState({ \n                show_time_picker: false,\n                record_id_for_edit: ''\n            })\n        }\n    }\n\n    switchPeeOrPoo(record_id) {\n        const { teacher_id } = this.props.route.params\n        this.props.switchPeeOrPoo(record_id, teacher_id)\n    }\n\n    editPooCondition(record_id, condition) {\n        // console.log(record_id, condition)\n        const { teacher_id } = this.props.route.params\n        if (condition === '取消編輯') {\n            return \n        } else if (condition === '其他') {\n            this.setState({\n                record_id,\n                other_option: 'Please Fill Out'\n            })\n        } else {\n            // console.log('HERE')\n            this.setState({ other_option: '' })\n            this.props.editPooCondition(record_id, condition, teacher_id)\n        }\n    }\n\n    confirmRemove(student_id, record_id) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'OK', onPress: () => this.removeDiaperRecord(student_id, record_id) },\n                { text: 'Cancel', style: 'cancel'}\n            ]\n        )\n    }\n\n    removeDiaperRecord(student_id, record_id) {\n        const { new_data_for_create } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        \n        if (new_data_for_create.has(record_id)) {\n            this.props.removeDiaperRecordSuccess(student_id, record_id)\n            return\n        }\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper`\n        fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                record_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    this.props.removeDiaperRecordFail(message)\n                }\n                this.props.removeDiaperRecordSuccess(student_id, record_id)\n            })\n            .catch(err => {\n                this.props.removeDiaperRecordFail(err)\n            })\n    }\n\n    async handleSend() { // TODO: test function\n        const { new_data_for_create, old_data_for_edit } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        if (new_data_for_create.size || old_data_for_edit.size) {\n            const create_records_result = await this.createRecords()\n            if (create_records_result.success) {\n                // console.log(create_records_result)\n                this.props.createDiaperRecordSuccess()\n            } else {\n                this.props.createDiaperRecordFail(create_records_result.data)\n                return\n            }\n        }\n\n        // if (students_pending_amount_update.size) {\n        //     const sendDiaperAmountDataResult = await this.sendDiaperAmountData()\n        //     if (sendDiaperAmountDataResult.success) {\n        //         this.props.editDiaperAmountSuccess()\n        //     } else {\n        //         this.props.editDiaperAmountFail(sendDiaperAmountDataResult.err_message)\n        //         return\n        //     }\n        // }\n        \n        this.props.navigation.goBack()\n    }\n\n    async sendDiaperAmountData() {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        let url = 'https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper/'\n\n        const response = await Promise.all(\n            Array.from(this.props.diaper_records.students_pending_amount_update).map(student_id => {\n                return fetch(url + student_id, {\n                    method: 'PUT',\n                    body: JSON.stringify({\n                        amount: this.props.diaper_records.by_student_id[student_id].amount\n                    }),\n                    headers: {\n                        Accept: 'application/json',\n                        'Content-Type': 'application/json'\n                    }\n                })\n                .then(res => res.json())\n                .then(resJson => {\n                    return resJson\n                })\n                .catch(err => { throw err })\n            })\n        )\n        .then(result => {\n            return {\n                success: true,\n                status_code: 200,\n                data: result\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                status_code: 500,\n                err_message: 'error occured while sending diaper amount data: ' + err\n            }\n        })\n        return response\n    }\n\n    async createRecords() {\n        const { new_data_for_create, old_data_for_edit, records } = this.props.diaper_records\n        const data_objs = []\n        const all_record_id = [...new_data_for_create, ...old_data_for_edit]\n        // console.log('new_data_for_create: ', new_data_for_create)\n        all_record_id.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n        let url = 'https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper/'\n        const createRecordsRes =\n            await fetch(url, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(request_body)\n            })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log(\"resJson: \", resJson)\n                if (resJson.statusCode === 200) {\n                    return {\n                        success: true,\n                        status_code: 200,\n                        data: resJson\n                    }\n                }\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: resJson.message\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    err_message: err\n                }\n            })\n\n        return createRecordsRes\n    }\n\n    async editDiaperRecords() {\n        //TODO implement\n        return\n    }\n\n    normalize(data_objs) {\n        // console.log('data_objs: ', data_objs)\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].time = formatTime(data_objs[i].time)\n        }\n    }\n\n    render() {\n        // TODO: Provide some options for poo condition\n        if (this.props.diaper_records.err_message !== ''){\n            Alert.alert(\n                'Error!',\n                this.props.diaper_records.err_message,\n                [{text: 'OK', onPress: () => this.props.clearDiaperlogErrorMessage()}]\n            )\n        }\n        const { teacher_id } = this.props.route.params\n        const { show_time_picker, cloth_diaper } = this.state\n        const { by_student_id, records } = this.props.diaper_records\n        const { students } = this.props.class\n        const date = this.state.date\n        // console.log('this.props.diaper_records: ', this.props.diaper_records)\n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1,\n                    paddingBottom: 15\n                }}\n                // behavior='padding'\n                // keyboardVerticalOffset={100}\n                enabled\n            >\n                <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-evenly' }}>\n                    <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n                    <View style={{ flexDirection: 'row' }}>\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: cloth_diaper ? 'rgba(255,255,255,0.2)' : '#ffe1d0',\n                                padding: 10,\n                                marginRight: 20\n                            }}\n                            onPress={() => this.setState({ cloth_diaper: false })}\n                        >\n                            <Text style={{ fontSize: 40 }}>尿布</Text>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: cloth_diaper ? '#ffe1d0' : 'rgba(255,255,255,0.2)',\n                                padding: 10,\n                                marginRight: 20\n                            }}\n                            onPress={() => this.setState({ cloth_diaper: true })}\n                        >\n                            <Text style={{ fontSize: 40 }}>學習褲</Text>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={{ backgroundColor: '#dcf3d0', padding: 10 }}\n                            onPress={this.handleSend}\n                        >\n                            <Text style={{ fontSize: 40 }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n                <ScrollView \n                    contentContainerStyle={{ alignItems: 'center' }}\n                    keyboardShouldPersistTaps='handled'\n                >\n                    {Object.keys(students).map((student_id) => {\n                        if (by_student_id[student_id] === null) {\n                            return null\n                        }\n                        const record_id_list = by_student_id[student_id].records\n                        return (\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, flexDirection: 'row', paddingVertical: 15 }}>\n                                    <View style={{ width: '23%', alignItems: 'center', justifyContent: 'center' }}>\n                                        <TouchableHighlight\n                                            // style={styles.childThumbnail}\n                                            onPress={() => this.addDiaperRecord(student_id)}\n                                            underlayColor=\"transparent\"\n                                        >\n                                            <Image\n                                                source={\n                                                    students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: students[student_id].profile_picture}\n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </TouchableHighlight> \n                                    </View>\n                                    <View style={{ width: '77%' }}>\n                                        <View style={{ flex: 1 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                    <Text style={{ fontSize: 30 }}>\n                                                        {students[student_id].name}\n                                                    </Text>\n                                                    {this.checkUnsent(student_id) ? \n                                                        <Text style={{ fontSize: 15, color: 'red', marginLeft: 15}}>未送出</Text>\n                                                        : null\n                                                    }\n                                                </View>\n                                            </View>\n                                            {record_id_list.map(record_id => {\n                                                const record = records.by_id[record_id]\n                                                if (record.cloth_diaper !== cloth_diaper) return null\n                                                return (\n                                                    <View key={record_id} style={{ flex: 1, flexDirection: 'row', marginVertical: 6, justifyContent: 'space-between', paddingRight: 15 }}>\n                                                        {/* TIME */}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: record.pee_or_poo === '大便' ? '23%' : '35%',\n                                                                // marginRight: '3%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#fef6dd',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.setState({ record_id_for_edit: record_id, show_time_picker: true })}\n                                                        >\n                                                            <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                {`${record.time.getHours()}:${record.time.getMinutes()}`}\n                                                            </Text>\n                                                        </TouchableHighlight>\n\n                                                        {/* PEE OR POO*/}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: record.pee_or_poo === '大便' ? '23%' : '35%',\n                                                                // marginRight: '3%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#fef6dd',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.switchPeeOrPoo(record_id)}\n                                                        >\n                                                            <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                {`${record.pee_or_poo}`}\n                                                            </Text>\n                                                        </TouchableHighlight>\n\n                                                        {/* POO CONDITION*/}\n                                                        {record.pee_or_poo === '大便' ?\n                                                            <PooEntry\n                                                                teacher_id={teacher_id}\n                                                                record_id={record_id}\n                                                                record={record}\n                                                            />\n                                                            // <View\n                                                            //     style={{\n                                                            //         width: '23%',\n                                                            //         // marginRight: '3%',\n                                                            //         height: '100%',\n                                                            //         justifyContent: 'center',\n                                                            //         backgroundColor: '#fef6dd',\n                                                            //         borderRadius: 10\n                                                            //     }}\n                                                            // >\n                                                            //     {this.state.other_option === '' && this.state.record_id != record_id ?\n                                                            //         <PickerComponent\n                                                            //             style={{\n                                                            //                 // height: 20,\n                                                            //                 // width: '50%',\n                                                            //                 // marginLeft: 25\n                                                            //                 alignItems: 'center',\n                                                            //                 padding: 5\n                                                            //             }}\n                                                            //             selectedValue={record.poo_condition}\n                                                            //             options={[\n                                                            //                 \"正常\",\n                                                            //                 \"硬\",\n                                                            //                 \"軟糊\",\n                                                            //                 \"稀水\",\n                                                            //                 \"其他\",\n                                                            //                 \"取消編輯\"\n                                                            //             ]}\n                                                            //             textStyle={{fontSize: 30}}\n                                                            //             handleOnClick={() => { }}\n                                                            //             handleSelectValue={(condition) => this.editPooCondition(record_id, condition)}\n                                                            //         />\n                                                            //         :\n                                                            //         <PooTextInput\n                                                            //             editPooCondition={(condition) => this.editPooCondition(record_id, condition)}\n                                                            //         />\n                                                            //     }\n                                                                    \n                                                            // </View>\n                                                            : null\n                                                        }\n\n                                                        {/* REMOVE RECORD*/}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: '20%',\n                                                                // marginRight: '2%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#ffe1d0',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.confirmRemove(student_id, record_id)}\n                                                        >\n                                                            <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                移除\n                                                            </Text>\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                )\n                                            })}\n                                            {show_time_picker &&\n                                                <DateTimePicker\n                                                    style={{ width: '100%'}}\n                                                    mode={'time'}\n                                                    display={'spinner'}\n                                                    value={new Date}\n                                                    onChange={(event, time) => this.setTime(time)}\n                                                    minimumDate={new Date()}\n                                                />\n                                            }\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        diaper_records: state.diaper,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            updateDiaperAmount,\n            addDiaperRecord,\n            editDiaperTime,\n            switchPeeOrPoo,\n            editPooCondition,\n            removeDiaperRecordSuccess,\n            removeDiaperRecordFail,\n            fetchClassDiaperData,\n            createDiaperRecordSuccess,\n            createDiaperRecordFail,\n            editDiaperRecordSuccess,\n            editDiaperRecordFail,\n            editDiaperAmountSuccess,\n            editDiaperAmountFail,\n            clearDiaperlogErrorMessage\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (DiaperLog)","import React from 'react'\nimport { View, Text, TouchableHighlight, StyleSheet, ScrollView } from 'react-native'\nimport Header from '../../header'\nimport { useNavigate, useLocation } from 'react-router-dom'\n\nconst AdminHome = (props) => {\n  const navigate = useNavigate()\n  const location = useLocation()\n  // static navigationOptions = ({ navigation }) => {\n  //   return {\n  //     headerTitle: <Header title={'Admin Home'} />\n  //   }\n  // }\n\n  const handleNavigate = (pageName) => {\n    // console.log(pageName)\n    const { school_name, school_id, email } = location?.state\n    navigate(pageName, { state: { \n        school_name,\n        school_id,\n        email\n      }}\n    )\n\n    // props.navigation.push(pageName)\n  }\n\n  return (\n    <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n      <TouchableHighlight\n        style={styles.button}\n        onPress={()=> handleNavigate('announcement')}\n        underlayColor=\"#368cbf\"\n      >\n        <Text style={{ fontSize: 70 }}>公告</Text>\n      </TouchableHighlight>\n      \n      <TouchableHighlight\n        style={styles.button}\n        onPress={()=> handleNavigate('Registration')}\n        underlayColor=\"#368cbf\"\n      >\n        <Text style={{ fontSize: 70 }}>新生註冊</Text>\n      </TouchableHighlight>\n      <TouchableHighlight\n        style={styles.button}\n        onPress={()=> handleNavigate('Students')}\n        underlayColor=\"#368cbf\"\n      >\n        <Text style={{ fontSize: 70 }}>學生資料</Text>\n      </TouchableHighlight>\n      <TouchableHighlight\n        style={styles.button}\n        onPress={()=> handleNavigate('Teachers')}\n        underlayColor=\"#368cbf\"\n      >\n        <Text style={{ fontSize: 70 }}>教師資料</Text>\n      </TouchableHighlight>\n\n      <TouchableHighlight\n        style={styles.button}\n        onPress={()=> handleNavigate('DownloadPage')}\n        underlayColor=\"#368cbf\"\n      >\n        <Text style={{ fontSize: 70 }}>下載</Text>\n      </TouchableHighlight>\n    </ScrollView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    // flex: 1,\n    width: '80%',\n    padding: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#b5e9e9',\n    marginVertical: 20\n  },\n  button_text: {\n\n  }\n})\n\nexport default AdminHome","import React, { useEffect, useState } from 'react'\nimport { View, Text, TextInput, TouchableHighlight, ScrollView, Image, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { connect } from 'react-redux'\nimport { get, post, formatDate, formatTime, beautifyDate, beautifyMonthDate, delete_by_id } from '../../util'\nimport * as WebBrowser from 'expo-web-browser'\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nconst Announcement = (props) => {\n    const location = useLocation()\n    const navigate = useNavigate()\n    const [ state, setState ] = useState({\n        date: new Date(),\n        selected_all_classes: true,\n        selected_classes: new Set(),\n        class_id_list: [],\n        text: '',\n        announcements: [],\n        page_number: 0,\n        announcement_on_display: {},\n        is_loading: true,\n        unread_list: [],\n        read_list: [],\n        show_more: false\n    })\n    \n    /*\n        1. text and be able to import pictures\n        2. be able to pick classes(include, exclude)\n        3. be able to see which parent has read or not read the announcement(ability to track past announcements)\n    */\n\n    useEffect(() => {\n        const { announcement } = location?.state\n        const { classes } = props\n        let class_id_list = []\n        Object.keys(classes).forEach((class_id) => {\n            if (classes[class_id].name !== '管理員' && !classes[class_id].name.includes('畢業生')) {\n                class_id_list.push(class_id)\n            }\n        })\n        setState({\n            ...state,\n            class_id_list,\n            selected_classes: new Set(class_id_list)\n        })\n        if(announcement === undefined) {\n            fetchMostRecentAnnouncement()\n        } else {\n            fetchReadStatusByAnnouncementId(announcement)\n        }\n    }, [])\n\n    // async componentDidMount() {\n    //     const { announcement } = props.route.params\n    //     const { classes } = props\n    //     let class_id_list = []\n    //     Object.keys(classes).forEach((class_id) => {\n    //         if (classes[class_id].name !== '管理員' && !classes[class_id].name.includes('畢業生')) {\n    //             class_id_list.push(class_id)\n    //         }\n    //     })\n    //     setState({\n    //         class_id_list,\n    //         selected_classes: new Set(class_id_list)\n    //     })\n    //     if(announcement === undefined) {\n    //         fetchMostRecentAnnouncement()\n    //     } else {\n    //         fetchReadStatusByAnnouncementId(announcement)\n    //     }\n    // }\n\n    const fetchMostRecentAnnouncement = async() => {\n        const { school_id } = location?.state\n        const response = await get(`/announcement/most-recent?school_id=${school_id}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            let [unread_list, read_list] = separateReadUnread(data.read_status)\n            setState({\n                ...state,\n                announcement_on_display: data,\n                is_loading: false,\n                unread_list,\n                read_list\n            })\n        }\n    }\n\n    const fetchReadStatusByAnnouncementId = async(announcement) => {\n        const response = await get(`/announcement/${announcement.id}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            let [unread_list, read_list] = separateReadUnread(data)\n            setState({\n                ...state,\n                announcement_on_display: announcement,\n                is_loading: false,\n                unread_list,\n                read_list\n            })\n        }\n    }\n\n    const separateReadUnread = (data) => {\n        let unread_list = [],\n            read_list = []\n        for (const student_id in data) {\n            if(data[student_id]) {\n                read_list.push(student_id)\n            } else {\n                unread_list.push(student_id)\n            }\n        }\n        return [unread_list, read_list]\n    }\n\n    const showConfirmDeleteDialog = () => {\n        // Alert.alert(\n        //     '確定要永久刪除此公告?',\n        //     '',\n        //     [\n        //         {\n        //             text: '返回',\n        //             style: 'cancel'\n        //         },\n        //         {\n        //             text: 'Ok',\n        //             onPress: () => deleteAnnouncementById()\n        //         }\n        //     ]\n        // )\n        const confirmed = confirm('確定要永久刪除此公告?')\n        if (confirmed) {\n            deleteAnnouncementById()\n        }\n    }\n\n    const deleteAnnouncementById = async() => {        \n        const { school_id } = location?.state\n        const announcement = state.announcement_on_display\n        const response = await delete_by_id(`/announcement/${announcement.id}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            navigate(-1)\n        }\n    }\n\n    const { students } = props\n    const { school_id, school_name } = location?.state\n    const {\n        announcement_on_display, \n        is_loading, \n        unread_list, \n        read_list,\n        show_more\n    } = state\n\n    return (\n        <View style={{ flex: 1 }}>\n            <View style={{ flexDirection: 'row', justifyContent: 'flex-end', paddingVertical: 7 }}>\n                <TouchableHighlight\n                    style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                    onPress={() => fetchReadStatusByAnnouncementId(announcement_on_display)}\n                >\n                    <Text style={{ fontSize: 20 }}>刷新</Text>\n                </TouchableHighlight>\n\n                <TouchableHighlight\n                    style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                    onPress={() => navigate(-1)}\n                >\n                    <Text style={{ fontSize: 20 }}>檢視全部</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                    style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                    onPress={() => navigate('/admin/announcement/new', {\n                        school_id,\n                        school_name\n                    })}\n                >\n                    <Text style={{ fontSize: 20 }}>新增</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                    style={{ padding: 10, backgroundColor: 'red', marginRight: 10 }}\n                    onPress={() => showConfirmDeleteDialog()}\n                >\n                    <Text style={{ fontSize: 20 }}>刪除</Text>\n                </TouchableHighlight>\n            </View>\n                {!is_loading &&\n                <View style={{ flex: 1 }}>\n                    <Card\n                        style={{\n                            flex: 1\n                        }}\n                    >\n                        <ScrollView>\n                            <View style={{ padding: 20 }}>\n                                <Text style={{ fontSize: 28 }}>{announcement_on_display.title}</Text>\n                                <Text style={{ fontSize: 18 }}>{beautifyDate(new Date(announcement_on_display.timestamp))}</Text>\n                            </View>\n                            <View \n                                style={{\n                                    paddingHorizontal: 20,\n                                    height: show_more ? -1 : 100,\n                                    overflow: 'hidden'\n                                }}\n                            >\n                                <Text style={{ fontSize: 20 }}>{announcement_on_display.text}</Text>\n                            </View>\n                            {show_more &&\n                                <View style={{ flex: 1, alignItems: 'flex-start', padding: 20 }}>\n                                    {announcement_on_display.links.map((link, index) => {\n                                        return (\n                                            <TouchableHighlight\n                                                key={index}\n                                                style={{ backgroundColor: 'lightblue', padding: 8, marginBottom: 15 }}\n                                                onPress={async() => {\n                                                    let result = await WebBrowser.openBrowserAsync(link.url)\n                                                }}\n                                            >\n                                                <Text style={{ fontSize: 18 }}>{link.text}</Text>\n                                            </TouchableHighlight>\n                                        )\n                                    })}\n                                </View>\n                            }\n\n                            {show_more &&\n                                <View style={{ flexDirection: 'row', paddingHorizontal: 20, flexWrap: 'wrap' }}>\n                                    {announcement_on_display.photo_url_arr.map((url, index) => {\n                                        return (\n                                            <TouchableHighlight\n                                                key={index}\n                                                onPress={async() => {\n                                                    let result = await WebBrowser.openBrowserAsync(url)\n                                                }}\n                                            >\n                                                <Image\n                                                    source={{ uri: url}}\n                                                    style={{\n                                                        width: 150,\n                                                        height: 150,\n                                                        marginRight: 10,\n                                                        marginTop: 10\n                                                    }}\n                                                />\n                                            </TouchableHighlight>\n                                        )\n                                    })}\n                                </View>\n                            }\n                            <View style={{ width: '100%', paddingHorizontal: 20 }}>\n                                <TouchableHighlight\n                                    style={{ padding: 10, alignSelf: 'flex-end', backgroundColor: 'lightblue' }}\n                                    onPress={() => setState({ ...state, show_more: !show_more })}\n                                >\n                                    <Text>{show_more ? '隱藏' : '更多'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                            <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\n\n                            \n                            {unread_list.map(id => {\n                                const student = students[id]\n                                if (!student) return null\n                                return (\n                                    <TouchableHighlight \n                                        key={id}\n                                        style={{ \n                                            height: 300, \n                                            width: '33.3%', \n                                            padding: 5\n                                        }}\n                                    >\n                                        <Card style={{ flex: 1, padding: 10, backgroundColor: '#ffe1d0' }}>\n                                            <CardItem style={{ justifyContent: 'center' }}>\n                                                    <Image\n                                                        source={\n                                                            student.profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                            : {uri: student.profile_picture}\n                                                        }\n                                                        style={{\n                                                            height: 200,\n                                                            width: 200,\n                                                            borderRadius: 100\n                                                        }}\n                                                    />\n                                            </CardItem>\n                                            <CardItem\n                                                footer\n                                                style={{ justifyContent: 'center', marginTop: -5 }}\n                                            >\n                                                <Text style={{ marginTop: -10 }}>{student.name}</Text>\n                                            </CardItem>\n                                        </Card>\n                                    </TouchableHighlight>\n                                )\n                            })}\n                            {read_list.map(id => {\n                                const student = students[id]\n                                if (!student) return null\n                                return (\n                                    <TouchableHighlight \n                                        key={id}\n                                        style={{ \n                                            height: 300, \n                                            width: '33.3%', \n                                            padding: 5\n                                        }}\n                                    >\n                                        <Card style={{ flex: 1, padding: 10, backgroundColor: '#dcf3d0' }}>\n                                            <CardItem style={{ justifyContent: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        student.profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: student.profile_picture}\n                                                    }\n                                                    style={{\n                                                        height: 200,\n                                                        width: 200,\n                                                        borderRadius: 100\n                                                    }}\n                                                />\n                                            </CardItem>\n                                            <CardItem\n                                                footer\n                                                style={{ justifyContent: 'center', marginTop: -5 }}\n                                            >\n                                                <Text style={{ marginTop: -10 }}>{student.name}</Text>\n                                            </CardItem>\n                                        </Card>\n                                    </TouchableHighlight>\n                                )\n                            })}\n                            </View>\n                        </ScrollView>\n                    </Card>\n                </View>\n            }\n        </View>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        classes: state.school.classes,\n        students: state.school.students\n    }\n}\n\nexport default connect(mapStateToProps) (Announcement)","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\nimport PickerComponent from '../../picker'\n\nexport default class RegisterNewStudents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n      studentDataArray: [{\n        name: '',\n        class_id: '',\n        class_name: '',\n        profile_picture: '',\n        blood_type: ''\n      }],\n    }\n  }\n\n  addStudent() {\n    const { studentDataArray } = this.state\n    studentDataArray.push({\n      name: '',\n      class_id: '',\n      class_name: '',\n      profile_picture: '',\n      blood_type: ''\n    })\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  fillStudent() {\n    const { studentDataArray } = this.state\n    studentDataArray[0] = {\n        name: 'John Smith',\n        class_id: null,\n        profile_picture: '',\n        blood_type: 'AB'\n    }\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  setName(name, index) {\n    const { studentDataArray } = this.state\n    studentDataArray[index].name = name\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  setBloodType(type, index) {\n    const {studentDataArray} = this.state\n    studentDataArray[index].blood_type = type\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  removeStudent(index) {\n    const { studentDataArray} = this.state\n    studentDataArray.splice(index, 1)\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  handleSelectClass(class_name, index) {\n    // console.log(class_name)\n    const {classes } = this.props\n    const { studentDataArray } = this.state\n    var class_id = ''\n    for (var i = 0; i < Object.keys(classes).length; i++) {\n      const found_class_id = Object.keys(classes)[i]\n      if (classes[found_class_id].name === class_name) {\n        class_id = found_class_id\n        break\n      }\n    }\n    \n    studentDataArray[index].class_id = class_id\n    studentDataArray[index].class_name = class_name\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  getStudentDataArray() {\n    return this.state.studentDataArray\n  }\n\n  render() {\n    const { studentDataArray } = this.state\n    const { classes } = this.props\n    const options = Object.keys(classes).map(class_id => classes[class_id].name)\n    // console.log('studentDataArray: ', studentDataArray)\n    return (\n      <View style={{ width: '100%', padding: '5%', backgroundColor: '#368cbf' }}>\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingVertical: 5, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n            <Text style={{ fontSize: 60 }}>學生資料</Text>\n            <TouchableHighlight\n              style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n              onPress={() => this.addStudent()}\n            >\n              <Text style={{ fontSize: 35 }}>新增學生</Text>\n            </TouchableHighlight>\n\n            {/* <TouchableHighlight\n              style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n              onPress={() => this.fillStudent()}\n            >\n              <Text style={{ fontSize: 30 }}>Fill Student</Text>\n            </TouchableHighlight> */}\n          </View>\n          \n          {studentDataArray.map((student, index) => {\n            const { name, blood_type } = student\n            return (\n              <View key={index} style={{ width: '100%', padding: '5%', backgroundColor: '#f4d41f' }}>\n                <View\n                  style={{ flexDirection: 'row', padding: 10, backgroundColor: 'white', justifyContent: 'space-between' }}\n                >\n                  <View\n                    style={{\n                      width: '50%',\n                      padding: 10,\n                      backgroundColor: '#F5F5F5',\n                      borderRadius: 2,\n                      borderBottomWidth: 2,\n                      borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                  }}>\n                    <TextInput\n                      placeholder=\"全名\"\n                      value={name}\n                      style={{ fontSize: 30 }}\n                      onChangeText={(name) => this.setName(name, index)}\n                    />\n                  </View>\n\n                  <View\n                    style={{\n                      width: '20%',\n                      padding: 10,\n                      backgroundColor: '#F5F5F5',\n                      borderRadius: 2,\n                      borderBottomWidth: 2,\n                      borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                  }}>\n                    <TextInput\n                      placeholder=\"血型\"\n                      value={blood_type}\n                      style={{ fontSize: 30 }}\n                      onChangeText={(type) => this.setBloodType(type, index)}\n                    />\n                  </View>\n\n                  <TouchableHighlight\n                    style={{\n                      width: '20%',\n                      padding: 10,\n                      backgroundColor: '#fa625f',\n                      borderRadius: 2,\n                      // borderBottomWidth: 2,\n                      // borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                    }}\n                    onPress={() => this.removeStudent(index)}\n                  >\n                    <Text style={{ alignSelf: 'center', fontSize: 30 }}>移除</Text>\n                  </TouchableHighlight>\n                </View>\n\n                <View style={{ padding: 10, backgroundColor: 'white' }}>\n                  <PickerComponent\n                    style={{\n                      padding: 10, \n                      backgroundColor: '#b5e9e9'\n                    }}\n                    textStyle={{ fontSize: 30 }}\n                    selectedValue={studentDataArray[index].class_name || '選擇學生班級'}\n                    options={options}\n                    handleOnClick={() => { }}\n                    handleSelectValue={(class_name) => this.handleSelectClass(class_name, index)}\n                  />\n                </View>\n              </View>\n            )\n          })}\n          \n        </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput, Alert, Picker } from 'react-native'\nimport Auth from '@aws-amplify/auth'\n\nexport default class RegisterParents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n        parentDataArray: [{\n            name: '',\n            email: '', \n            username: '',\n            password: '',\n            role: '父',\n            mobile: '',\n            address: '',\n            work_phone: '',\n            transportation: ''\n        }],\n        parentSignUpStatus: [false],\n    }\n  }\n\n  addParent() {\n    const { parentDataArray, parentSignUpStatus } = this.state\n    parentDataArray.push({\n      name: '',\n      email: '', \n      username: '',\n      password: '',\n      role: '父',\n      mobile: '',\n      address: '',\n      work_phone: '',\n      transportation: ''\n    })\n\n    parentSignUpStatus.push(false)\n\n    this.setState({\n      parentDataArray,\n      parentSignUpStatus\n    })\n  }\n\n  fillParent() {\n    const { parentDataArray } = this.state\n    parentDataArray[0] = {\n      name: 'Jane Smith',\n      email: 'caleb7947@gmail.com', \n      username: 'abc123',\n      password: 'password',\n      role: 'parent#mother',\n      mobile: '061234567',\n      address: 'SOME ADDRESS',\n      work_phone: '061234567',\n      transportation: 'car'\n    }\n    this.setState({\n      parentDataArray\n    })\n  }\n\n  setName(name, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].name = name\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setRole(role, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].role = role\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setEmail(email, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].email = email\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setUsername(username, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].username = username\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  toLowerCase(event, index) {\n      const { text } = event.nativeEvent\n      const { parentDataArray } = this.state\n      const username = text.toLowerCase()\n      parentDataArray[index].username = username\n      this.setState({ parentDataArray })\n  }\n\n  setPassword(password, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].password = password\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  removeParent(index) {\n      const { parentDataArray, parentSignUpStatus } = this.state\n      parentDataArray.splice(index, 1)\n      parentSignUpStatus.splice(index, 1)\n      this.setState({\n          parentDataArray,\n          parentSignUpStatus\n      })\n  }\n\n  handleSignup(index) {\n    const { name, email, username, password } = this.state.parentDataArray[index]\n\n    Auth.signUp({\n      username,\n      password,\n      attributes: {\n          name,\n          email\n      }\n    })\n      .then(values => {\n        // console.log(values)\n        const { parentSignUpStatus } = this.state\n        parentSignUpStatus[index] = true\n        this.setState({\n          parentSignUpStatus\n        })\n      })\n      .catch(err => {\n        alert('註冊有問題!請與工程師聯繫\\n\\n' + err.message)\n    })\n  }\n\n  getParentSignUpStatus() {\n      return this.state.parentSignUpStatus\n  }\n\n  getParentDataArray() {\n      return this.state.parentDataArray\n  }\n\n  render() {\n    const { parentDataArray, parentSignUpStatus } = this.state\n    // console.log('parentDataArray: ', parentDataArray)\n    return (\n\n        <View style={{ width: '100%', padding: '5%', backgroundColor: '#f4d41f' }}>\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingVertical: 5, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n          <Text style={{ fontSize: 60 }}>家長資料</Text>\n          <TouchableHighlight\n            style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n            onPress={() => this.addParent()}\n          >\n            <Text style={{ fontSize: 35 }}>新增家長</Text>\n          </TouchableHighlight>\n\n          {/* <TouchableHighlight\n            style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n            onPress={() => this.fillParent()}\n          >\n            <Text style={{ fontSize: 20 }}>Fill Parent</Text>\n          </TouchableHighlight> */}\n        </View>\n        \n        {parentDataArray.map((parent, index) => {\n          const { name, email, username, password, role, mobile, address, work_phone, transportation } = parent\n          return (\n            <View\n              key={index}\n              style={{padding: 10, backgroundColor: 'white', marginBottom: 20 }}\n            >\n              {/* FIRST ROW */}\n              <View \n                style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}\n              >\n                <View\n                  style={{\n                    width: '50%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center',\n                }}>\n                  <TextInput\n                    placeholder=\"全名\"\n                    value={name}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(name) => this.setName(name, index)}\n                  />\n                </View>\n\n                <View\n                  style={{\n                    width: '20%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  {/* <TextInput\n                    placeholder=\"父/母\"\n                    value={role.charAt(role.length-1)}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(role) => this.setRole(role, index)}\n                  /> */}\n                  <Picker\n                    selectedValue={role}\n                    style={{ height: 50 }}\n                    onValueChange={(itemValue, itemIndex) => this.setRole(itemValue, index)}\n                  >\n                    <Picker.Item label=\"父\" value=\"父\" />\n                    <Picker.Item label=\"母\" value=\"母\" />\n                  </Picker>\n                </View>\n\n                <TouchableHighlight\n                  style={{\n                    width: '20%',\n                    padding: 10,\n                    backgroundColor: '#fa625f',\n                    borderRadius: 2,\n                    justifyContent: 'center'\n                  }}\n                  onPress={() => this.removeParent(index)}\n                >\n                  <Text style={{ alignSelf: 'center', fontSize: 30 }}>移除</Text>\n                </TouchableHighlight>\n\n              </View>\n\n              {/* SECOND ROW */}\n              <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}>\n\n                <View\n                  style={{\n                    width: '100%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    placeholder=\"Email\"\n                    autoCapitalize=\"none\"\n                    keyboardType=\"email-address\"\n                    value={email}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(email) => this.setEmail(email, index)}\n                  />\n                </View>\n              </View>\n\n              {/* THIRD ROW */}\n              <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}>\n                <View\n                  style={{\n                    width: '35%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    placeholder=\"帳號\"\n                    autoCapitalize=\"none\"\n                    value={username}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(username) => this.setUsername(username, index)}\n                    onEndEditing={(username) => this.toLowerCase(username, index)}\n                  />\n                </View>\n\n                <View\n                  style={{\n                    width: '35%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    secureTextEntry\n                    placeholder=\"密碼\"\n                    value={password}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(password) => this.setPassword(password, index)}\n                  />\n                </View>\n\n                <TouchableHighlight\n                  style={{\n                    width: '20%',\n                    padding: 5,\n                    backgroundColor: parentSignUpStatus[index] ? '#dcf3d0' : '#ffe1d0',\n                    justifyContent: 'center'\n                  }}\n                  onPress={() => this.handleSignup(index)}\n                  disable={parentSignUpStatus[index]}\n                >\n                  {parentSignUpStatus[index] ?\n                    <Text style={{ fontSize: 20 }}>SUCCESS</Text>\n                    : <Text style={{ fontSize: 35, alignSelf: 'center' }}>註冊</Text>\n                  }\n                </TouchableHighlight>\n              </View>\n            </View>\n          )\n        })}\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, TextInput, TouchableHighlight, Text, Alert, KeyboardAvoidingView } from 'react-native'\n// import Auth from '@aws-amplify/auth'\nimport Reloading from '../../reloading'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport RegisterNewStudents from './registernewstudents'\nimport RegisterParents from './registerparents'\nimport { ScrollView } from 'react-native-gesture-handler'\nimport { fetchStudentsSuccess } from '../../../redux/school/actions/index'\nimport { get } from '../../util'\n\n/*\n1. Page where we connect parents to amplify for their login:\n  Auth.signUp({\n    username: 'USERNAME',\n    password: 'PASSWORD',\n    attributes: {\n        given_name: 'John',\n        family_name: 'Smith',\n        email: 'EMAIL@email.com'\n    }\n  })\n\n2. Save their credential in database in table users:\n  -id: 'UUID',\n  -firstName: 'John',\n  -lastName: 'Smith',\n  -email: 'EMAIL@email.com',\n  -username: 'USERNAME',\n  -role: 'parent'\n\n3. And initialize child/ren's data in database including but not limited to \n  -first_name,\n  -last_name,\n  -profile_picture,\n  -class_id <<====== list all classes and assign a class_id to child/ren\n\n****Leave sign up confirmation to parent side of the app(first time sign in)****\n\n*/\nclass Registration extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      \n      \n      parentSignUpStatus: [false],\n      createFamilyProfileStatus: 'not_created'\n    }\n  }\n\n  componentDidMount() {\n    //  fetch class info for class assinment or get it from redux store\n  }\n\n  \n\n  createFamilyProfile() {\n    let all_parents_signed_up = true\n    let parentSignUpStatus = this.refs['parent'].getParentSignUpStatus()\n    parentSignUpStatus.forEach(status => {\n      all_parents_signed_up &= status\n    })\n\n    if (!all_parents_signed_up) {\n      alert('Error! We cannot create family profile until all parents have been signed up')\n      return\n    }\n\n    let parentDataArray = this.refs['parent'].getParentDataArray()\n    let studentDataArray = this.refs['student'].getStudentDataArray()\n\n    this.setState({\n      createFamilyProfileStatus: 'creating'\n    })\n\n    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/family/', {\n      method: 'POST',\n      headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        parentDataArray,  //name, email, username, role\n        studentDataArray  //name, class_id, profile_picture, blood_type\n      })\n    })\n    .then((response) => response.json())\n    .then((resJson) => {\n      // console.log(resJson)\n      if (resJson.statusCode > 200 || resJson.message === 'Internal server error') {\n        alert('Error!' + resJson.message)\n      } else {\n        this.fetchStudentData()\n        Alert.alert(\n          '註冊成功!',\n          '點選OK以離開頁面',\n          [\n              { text: 'OK', onPress: () => this.props.navigation.goBack()}\n          ]\n        )\n        this.setState({\n          createFamilyProfileStatus: 'created'\n        })\n      }\n    })\n    .catch((err) => {\n      console.error(err)\n    })\n  }\n\n  async fetchStudentData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/student`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {students, classes} = data\n    this.props.fetchStudentsSuccess(students, classes)\n  }\n\n  render() {\n    const { studentDataArray, parentDataArray, parentSignUpStatus, createFamilyProfileStatus } = this.state\n    // console.log(this.props.classes)\n    return (\n      <KeyboardAvoidingView style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <ScrollView style={{ width: '100%'}}>\n\n          <RegisterNewStudents \n            ref=\"student\"\n            classes={this.props.classes}\n          />\n\n          <RegisterParents ref=\"parent\" />\n\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-around' }}>\n            <TouchableHighlight\n              style={{\n                flex: 1,\n                padding: 20,\n                backgroundColor: createFamilyProfileStatus === 'not_created' ?\n                  '#b5e9e9'\n                  : createFamilyProfileStatus === 'creating' ?\n                    '#b5e9e9'\n                  : '#00c07f',\n                  justifyContent: 'center'\n              }}\n              onPress={() => this.createFamilyProfile()}\n            >\n              {createFamilyProfileStatus === 'not_created' ?\n                <Text style={{ fontSize: 50, textAlign: 'center' }}>完成</Text>\n                : createFamilyProfileStatus === 'creating' ?\n                  <Reloading />\n                : <Text style={{ fontSize: 50 }}>SUCCESS</Text>\n              }\n            </TouchableHighlight>\n\n            <TouchableHighlight\n              style={{ flex:1, padding: 20, backgroundColor: '#fa625f', justifyContent: 'center' }}\n              onPress={() => this.props.navigation.goBack()}\n            >\n              <Text style={{ fontSize: 50, textAlign: 'center'}}>返回</Text>\n            </TouchableHighlight>\n          </View>\n        </ScrollView>\n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({fetchStudentsSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Registration)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, Dimensions } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\n\nconst { width, height } = Dimensions.get('window')\n\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  render() {\n    // const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id } = this.props\n    const { show, component, modal_padding } = this.props\n    if (!show) {\n      return null\n    }\n    // console.log('student_id: ', student_id)\n    // const student = students[student_id]\n    // const { wellness } = this.props\n    // const record_id = wellness.by_student_id[student_id][0]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          // justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        // contentContainerStyle={{\n        //   justifyContent: 'center',\n        //   alignItems: 'center',\n        //   zIndex: 2,\n        //   position: 'absolute',\n        //   width: '100%',\n        //   height: '100%'\n        // }}\n        behavior='height'\n        // keyboardVerticalOffset={-80}\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            // opacity: 0.7,\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={() => this.props.hideModal()}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        <View style={{ flex: 1, marginTop: modal_padding, width: width/2, height, backgroundColor: 'white', zIndex: 3,\n            position: 'absolute' }}>\n                {component}\n        </View>\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, PushNotificationIOS } from 'react-native'\nimport { get, put } from '../../util'\nimport PickerComponent from '../../picker'\nimport Reloading from '../../reloading'\n\nexport default class EditStudentProfile extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            parents: [],\n            student: null,\n            isLoading: true\n        }\n    }\n\n    async componentDidMount() {\n        const { student_id, student } = this.props\n        const response = await get(`/student/${student_id}/family`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得家庭資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.setState({\n            parents: response.data,\n            student,\n            isLoading: false\n        })\n    }\n\n    addParent() {\n        const { parents } = this.state\n        if (parents.length === 3) {\n            alert('Sorry 一個寶貝只能註冊三位家長！')\n            return \n        }\n        this.props.addParent({\n            id: '',\n            name: '',\n            role: '',\n            username: '',\n            password: '',\n            mobile: '',\n            work_phone: '',\n            address: ''\n        })\n    }\n\n    async editStudentData() {\n        const { student_id } = this.props\n        const { student } = this.state\n        const { name, class_id } = student\n        const response = await put(`/student/${student_id}`, {\n            name,\n            class_id\n        })\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 編輯學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.props.hideModal()\n        const old_class_id = this.props.student.class_id\n        this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n    }\n\n    // getClassByStudentId() {\n    //     const { student_id, classes } = this.props\n    //     Object.keys(classes).forEach(class_id => {\n    //         const {students} = classes[class_id]\n    //         for(var i = 0; i < students.length; i++) {\n    //             if (student_id === students[i]) {\n    //                 return classes[class_id].name\n    //             }\n    //         }\n    //     })\n    //     return ''\n    // }\n\n    getClassNames() {\n        const { classes } = this.props\n        return Object.keys(classes).map(class_id => {\n            return classes[class_id].name\n        })\n    }\n    \n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            student: {\n                ...this.state.student,\n                class_id: class_id_found\n            }\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { student, parents, isLoading } = this.state\n        // console.log('student: ', student)\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 3, flexDirection: 'row', alignItems: 'center', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{  }}\n                            // onPress={() => }\n                        >\n                            <Image\n                                source={\n                                    student.profile_picture === '' ?\n                                        require('../../../assets/icon-thumbnail.png')\n                                        : {uri: student.profile_picture}\n                                }\n                                style={{\n                                    width: 200,\n                                    height: 200,\n                                    borderRadius: 100\n                                }}\n                            />\n                        </TouchableHighlight>\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                        <TextInput \n                            style={{ fontSize: 50 }}\n                            value={student.name}\n                            onChangeText={name => this.setState({\n                                student: {\n                                    ...this.state.student,\n                                    name\n                                }\n                            })}\n                        />\n                        {/* <Text style={{ fontSize: 50 }}>{classes[student.class_id].name}</Text> */}\n                        {/* <PickerComponent\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                            textStyle={{fontSize: 50}}\n                            selectedValue={classes[student.class_id].name}\n                            options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                            handleOnClick={() => { }}\n                            handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                        /> */}\n                        <TouchableHighlight\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                        >\n                            <Text style={{fontSize: 50}}>{classes[student.class_id].name}</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 5, backgroundColor: '#F5F5F5' }}>\n\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        {parents.map(parent => {\n                            return (\n                                <View key={parent.id} style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                    <TouchableHighlight\n                                        style={{ flex: 1, padding : 10, backgroundColor: '#b5e9e9', justifyContent: 'center' }}\n                                        onPress={() => this.props.addParent(parent)}\n                                    >\n                                        <View style={{ flex: 1, flexDirection: 'row' }}>\n                                            {/* <Text style={{ fontSize: 30, alignSelf: 'center' }}>{parent.role}</Text> */}\n                                            <View style={{ paddingRight: 10 }}>\n                                                <Text style={{ fontSize: 20 }}>{parent.role}</Text>\n                                            </View>\n                                            <View>\n                                                <View style={{ width: '100%', flexDirection:'row'}}>\n                                                    <Text style={{ fontSize: 20 }}>姓名: {parent.name}         </Text>\n                                                    <Text style={{ fontSize: 20 }}>帳號: {parent.username}         </Text>\n                                                </View>\n                                                <Text style={{ fontSize: 20 }}>手機: {parent.mobile}</Text>\n                                                <Text style={{ fontSize: 18 }}>工作/家用電話: {parent.work_phone}</Text>\n                                                <Text style={{ fontSize: 18 }}>地址: {parent.address}</Text>\n                                            </View>\n                                        </View>\n                                    </TouchableHighlight>\n                                </View>\n                            )\n                        })}\n                        {parents.length < 3 ?\n                            <View style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                <TouchableHighlight\n                                    style={{\n                                        flex: 1,\n                                        padding : 10,\n                                        backgroundColor: 'white',\n                                        justifyContent: 'center',\n                                        borderWidth: 5,\n                                        borderRadius: 1,\n                                        borderStyle: 'dashed'\n                                    }}\n                                    onPress={() => this.addParent()}\n                                >\n                                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>新增家長</Text>\n                                    </View>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                            onPress={() => this.props.hideModal()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                            onPress={() => this.editStudentData()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { Toast } from 'native-base'\nimport { post, get } from '../../util'\nimport Auth from '@aws-amplify/auth'\nimport { connect } from 'react-redux'\n\nclass AddParent extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            password: '',\n            qr_data: '',\n            name: ''\n        }\n    }\n\n    async componentDidMount() {\n        const { parent_data, isConnected } = this.props\n        this.setState({\n            ...this.state,\n            ...parent_data\n        })\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            return\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (parent_data.id != ''){\n            const response = await get(`/user/${parent_data.id}/qrcode`)\n            const { success, statusCode, message, data } = response\n            if (!success) {\n                alert('Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n                return \n            }\n            this.setState({\n                qr_data: data\n            })\n        }\n    }\n\n    async postParent() {\n        const { student_id, isConnected } = this.props\n        const { id, name, role, email, username, mobile, work_phone, address } = this.state\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (id === '') { // we register and then add parent to database\n            const response = await this.signUpParent()\n            if (!response.success) {\n                return\n            }\n        }\n        const body = {\n            student_id,\n            parent_data: {\n                id,\n                name, \n                role,\n                email,\n                username, \n                mobile, \n                work_phone, \n                address\n            }\n        }\n        const response = await post(`/student/${student_id}/family`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 新增家長時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n          }\n        this.props.goBack()\n    }\n\n    async signUpParent() {\n        const { username, password, name, email } = this.state\n        const response = await Auth.signUp({\n            username,\n            password,\n            attributes: {\n                name,\n                email\n            }\n          })\n            .then(values => {\n                return {\n                    success: true\n                }\n            })\n            .catch(err => {\n                alert('家長註冊有問題!請與工程師聯繫\\n\\n' + err.message)\n                return {\n                    success: false\n                }\n          })\n        return response\n    }\n\n    render() {\n        const { id, name, username, password, mobile, work_phone, address, role, email } = this.state\n        // console.log('this.state: ', this.state)\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '66%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>姓名</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={name}\n                                onChangeText={(name) => this.setState({ name })}\n                            />\n                        </View>\n\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '32%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>角色</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={role}\n                                onChangeText={(role) => this.setState({ role })}\n                            />\n                        </View>\n\n                        {/* <TouchableHighlight\n                            style={{\n                                width: '20%',\n                                padding: 15,\n                                backgroundColor: '#fa625f',\n                                justifyContent: 'center'\n                            }}\n                            // onPress={() => }\n                        >\n                            <Text style={{fontSize: 20, textAlign: 'center'}}>移除</Text>\n                        </TouchableHighlight> */}\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>Email</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                autoCapitalize={'none'}\n                                keyboardType={'email-address'}\n                                placeholder={''}\n                                value={email}\n                                onChangeText={(email) => this.setState({ email })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '49%',\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>帳號</Text>\n                            <TextInput\n                                editable={id === ''}\n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                autoCapitalize={'none'}\n                                value={username}\n                                onChangeText={(username) => this.setState({ username })}\n                            />\n                        </View>\n\n                        {id === '' ? \n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '49%',\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput\n                                    secureTextEntry={true}\n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={password}\n                                    onChangeText={(password) => this.setState({ password })}\n                                />\n                            </View>\n                        :   <TouchableHighlight\n                                style={{ backgroundColor: 'transparent', alignItems: 'center', justifyContent: 'center' }}\n                                onPress={() => this.props.viewQRCode(this.state.qr_data)}\n                            >\n                                <Image\n                                    source={require('../../../assets/icon-qr.png')}\n                                    style={{\n                                        width: 120,\n                                        height: 120,\n                                    }}\n                                />\n                            </TouchableHighlight>\n                        }\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>手機</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={mobile}\n                                onChangeText={(mobile) => this.setState({ mobile })}\n                            />\n                        </View>\n                    </View>\n                    \n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>工作/家用電話</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={work_phone}\n                                onChangeText={(work_phone) => this.setState({ work_phone })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>地址</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                placeholder={''}\n                                value={address}\n                                onChangeText={(address) => this.setState({ address })}\n                            />\n                        </View>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                onPress={() => this.props.goBack()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                            </TouchableHighlight>\n                        </View>\n                        {id !== '' ? \n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                    // onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                                onPress={() => this.postParent()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                    </ScrollView>\n                </View>\n\n                \n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      isConnected: state.school.isConnected\n    }\n}\n\nexport default connect(mapStateToProps, null) (AddParent)","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert } from 'react-native'\nimport QRCode from 'react-native-qrcode-svg'\n\nexport default class QRPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            // isLoading: true,\n            // data: ''\n        }\n    }\n    \n    render() {\n        const { name, role } = this.props.parent_data\n        const name_prefix = \n            role === '母' ? '媽媽'\n            : role === '父' ? '爸爸'\n            : role\n        return (\n            // <View\n            //     style={{\n            //         width: '100%',\n            //         height: '100%',\n            //         justifyContent: 'space-evenly',\n            //         alignItems: 'center'\n            //     }}\n            // >\n                <View style={{ flex: 1 }}>\n                    <View style={{ flex: 3, justifyContent: 'center', alignItems: 'center' }}>\n                        <Text style={{ fontSize: 65, }}>{this.props.student_name} {name_prefix}</Text>\n                        <QRCode\n                            value={this.props.qr_data}\n                            size={400}\n                        />\n                    </View>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{ padding: 15, backgroundColor: '#b5e9e9' }}\n                            onPress={() => this.props.goBack()}\n                        >\n                            <Text style={{ fontSize: 30 }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            // </View>\n        )\n    }\n}","import React from 'react'\nimport { View, TouchableHighlight, Image, Text, ScrollView, Platform, Alert, Dimensions } from 'react-native'\nimport { connect } from 'react-redux'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { bindActionCreators } from 'redux';\nimport { updateProfilePicture, fetchStudentsSuccess, editStudentSuccess } from '../../../redux/school/actions/index'\nimport { get, post, delete_by_id } from '../../util'\nimport Modal from './modal'\nimport EditStudentProfile from './editstudentprofile'\nimport AddParent from './addparent';\nimport QRPage from './qrpage';\n\nconst { width, height } = Dimensions.get('window')\n/* \nPage where we view/edit class information including:\n  -adding/removing class\n  -adding/removing/switching students\n  -adding/removing/switching teachers\n*/\n// const editStudent = \n//     <View>\n//       <Text>Student</Text>\n//     </View>\n\nclass Students extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: '',\n      student_id: '',\n      parent_data: {},\n      qr_data: '',\n      modal_padding: 0\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync();\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to make this work!');\n      }\n    }\n  };\n\n  _pickImage = async (student_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { base64 } = result\n        // this.setState({ image: result.uri });\n        this.getProfilePictureURL(base64, student_id, url)\n      }\n\n      // console.log(result);\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, student_id, url) {\n    const { school_name } = this.props.route.params\n    const { students } = this.props\n    const body = {\n      image,\n      url,\n      path: `${school_name}/profile_picture_${student_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await post(`/student/${student_id}/profile-picture`, body)\n    // console.log(response)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.updateProfilePicture(student_id, data.image_url)\n  }\n\n  getModalContent() {\n    const { students, classes } = this.props\n    const { showModal, modal_type, student_id, parent_data, qr_data } = this.state\n    // console.log('students: ', students)\n    if (!showModal) {\n      return null\n    } else if (modal_type === 'student') {\n      return <EditStudentProfile\n              student_id={student_id}\n              student={students[student_id]}\n              classes={classes}\n              addParent={(parent_data) => this.setState({\n                modal_type: 'add_parent',\n                parent_data\n              })}\n              editStudentSuccess={(student_id, name, old_class_id, class_id) => \n                this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n              }\n              hideModal={() => this.hideModal()}\n            />\n    } else if (modal_type === 'add_parent') {\n      return <AddParent\n              student_id={student_id}\n              parent_data={parent_data}\n              viewQRCode={(qr_data) => this.setState({\n                modal_type: 'qrpage',\n                qr_data\n              })}\n              goBack={() => this.setState({\n                modal_type: 'student'\n              })}\n            />\n    } else { // modal_type: 'qrpage'\n      return <QRPage\n              qr_data={qr_data}\n              student_name={students[student_id].name}\n              parent_data={parent_data}\n              goBack={() => this.setState({\n                modal_type: 'add_parent'\n              })}\n            />\n    }\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  confirmDeleteStudent(student_id) {\n    const {students} = this.props\n    Alert.alert(\n      `${students[student_id].name} 刪除確認`,\n      '刪除這個寶貝會將一切攸關資料(包誇父母)刪除',\n      [\n        { text: \"取消\", style: \"cancel\"},\n        { text: 'OK', onPress: () => this.deleteStudentById(student_id) }\n      ]\n    )\n  }\n\n  async deleteStudentById(student_id) {\n    const { students } = this.props\n    const response = await delete_by_id(`/student/${student_id}/`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.fetchStudentData()\n  }\n\n  async fetchStudentData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/student`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {students, classes} = data\n    this.props.fetchStudentsSuccess(students, classes)\n  }\n\n  render() {\n    const { students } = this.props\n    const { showModal, modal_padding } = this.state\n    // console.log('students: ', students)\n    return (\n      <View>\n        <Modal\n          modal_padding={modal_padding}\n          show={showModal}\n          component={this.getModalContent()}\n          hideModal={() => this.hideModal()}\n        />\n        <ScrollView>\n          {Object.keys(students).map((id, index) => {\n            const student = students[id]\n            return (\n              <View key={id} style={{ flex:1, backgroundColor: 'lightgrey', flexDirection: 'row', marginBottom: 10, padding: 15 }}>\n                {/* profile picture */}\n                <TouchableHighlight\n                  style={{ }}\n                  onPress={() => this._pickImage(id, student.profile_picture)}\n                >\n                  <Image\n                    source={\n                        student.profile_picture === '' ?\n                            require('../../../assets/icon-thumbnail.png')\n                            : {uri: student.profile_picture}\n                    }\n                    style={{\n                      width: 200,\n                      height: 200,\n                      borderRadius: 100\n                    }}\n                  />\n                </TouchableHighlight>\n                \n                <View style={{ flex: 5, paddingLeft: 15 }}>\n                  {/* Name */}\n                  <View>\n                    <Text style={{ fontSize: 50 }}>{student.name}</Text>\n                  </View>\n\n                  {/* Address */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>地址: {student.address}</Text>\n                  </View>\n\n                  {/* Father phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(父): {student.father_phone}</Text>\n                  </View>\n\n                  {/* Mother phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(母): {student.mother_phone}</Text>\n                  </View>\n                </View>\n\n                {/* Right */}\n                <View style={{ flex: 1, justifyContent: 'space-evenly' }}>\n                  <View style={{ backgroundColor: 'white' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={(event) => this.setState({ \n                        showModal: true, \n                        modal_type: 'student', \n                        student_id: id,\n                        modal_padding: Math.max(0, event.nativeEvent.pageY - height)\n                      })}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>編輯</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                  <View style={{ backgroundColor: '#fa625f' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.confirmDeleteStudent(id)}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>刪除</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                </View>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    students: state.school.students,\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      updateProfilePicture,\n      fetchStudentsSuccess,\n      editStudentSuccess,\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Students)","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class AddTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    async componentDidMount() {\n        // const { parent_data } = this.props\n        // this.setState({\n        //     ...this.state,\n        //     ...parent_data\n        // })\n        // if (parent_data.id != ''){\n        //     const response = await get(`/user/${parent_data.id}/qrcode`)\n        //     const { success, statusCode, message, data } = response\n        //     if (!success) {\n        //         Alert.alert(\n        //         `Sorry 取得家長QR Code時電腦出狀況了！`,\n        //         '請截圖和與工程師聯繫\\n\\n' + message,\n        //         [{ text: 'Ok' }]\n        //         )\n        //         return \n        //     }\n        //     this.setState({\n        //         qr_data: data\n        //     })\n        // }\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 新增教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(school_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     this.props.fetchTeachersSuccess(teachers, classes)\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { id, name, class_id, passcode, isAdmin } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        {/* <View\n                            style={{\n                                flex: 1,\n                                padding: 10\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>手機</Text>\n                                <TextInput \n                                    style={{ fontSize: 35 }}\n                                    keyboardType={'number-pad'}\n                                    placeholder={''}\n                                    value={mobile}\n                                    onChangeText={(mobile) => this.setState({ mobile })}\n                                />\n                            </View>\n                        </View> */}\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            {/* {id !== '' ? \n                                <View style={{ flex: 1, padding: 14 }}>\n                                    <TouchableHighlight\n                                        style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                        // onPress={() => this.props.goBack()}\n                                    >\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                    </TouchableHighlight>\n                                </View>\n                            : null\n                            } */}\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class EditTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    componentDidMount() {\n        const { teacher_id, teacher, classes } = this.props\n        const { name, profile_picture, passcode } = teacher\n        const class_id = this.getClassIdByTeacherId(teacher_id, classes)\n        this.setState({\n            id: teacher_id,\n            name,\n            profile_picture,\n            passcode,\n            class_id,\n            isAdmin: class_id !== '' && (classes[class_id].name === '管理員')\n        })\n        \n    }\n\n    getClassIdByTeacherId(teacher_id, classes) {\n        const class_id_list = Object.keys(classes)\n        for(var i = 0; i < class_id_list.length; i++) {\n            let class_id = class_id_list[i]\n            const { teachers } = classes[class_id]\n            for(var j = 0; j < teachers.length; j++) {\n                if (teacher_id === teachers[j]) {\n                    return class_id\n                }\n            }\n        }\n        return ''\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 更改教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(teacher_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     // this.setState({\n\n    //     // })\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes, teacher } = this.props\n        const { id, name, class_id, passcode } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess  } from '../../../redux/school/actions/index'\nimport Modal from './modal'\nimport AddTeacher from './addteacher';\nimport EditTeacher from './editteacher';\n\n/*\nPage where we view and edit Teacher profiles:\n  -creating teacher profile\n  -editing teacher profile\n  -removing teacher profile\n*/\n\nclass Teachers extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: '',\n      selected_teacher_id: ''\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync()\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert(`Sorry, we need camera roll permissions to make this work!`)\n        return \n      }\n    }\n  };\n\n  _pickImage = async (teacher_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { base64 } = result\n        this.getProfilePictureURL(base64, teacher_id, url)\n      }\n      // console.log(result);\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, teacher_id, url) {\n    const { school_name } = this.props.route.params\n    const { teachers } = this.props\n    const body = {\n      image,\n      url,\n      path: `${school_name}/teacher/profile_picture_${teacher_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await put(`/user/${teacher_id}/profile-picture`, body)\n    // console.log(response)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${teachers[teacher_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.updateTeacherProfilePicture(teacher_id, data.image_url)\n  }\n\n  async fetchTeacherData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/teacher`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得教師資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {admins, teachers, classes} = data\n    this.props.fetchTeachersSuccess(admins, teachers, classes)\n}\n\n  getModalContent() {\n    const { school_id } = this.props.route.params\n    const { classes, teachers } = this.props\n    const { modal_type, selected_teacher_id } = this.state\n    if (modal_type === 'add_teacher') {\n      return <AddTeacher\n                classes={classes}\n                school_id={school_id}\n                fetchTeacherData={() => this.fetchTeacherData()}\n                goBack={() => this.hideModal()}\n            />\n    } else if (modal_type === 'edit_teacher') {\n      return <EditTeacher\n                classes={classes}\n                teacher_id={selected_teacher_id}\n                teacher={teachers[selected_teacher_id]}\n                fetchTeacherData={() => this.fetchTeacherData()}\n                goBack={() => this.hideModal()}\n            />\n    }\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  confirmDeleteTeacher(teacher_id) {\n    const {teachers} = this.props\n    const confirmed = confirm(`${teachers[teacher_id].name} 刪除確認`)\n    if (confirmed) {\n      this.deleteTeacher(teacher_id)\n    }\n  }\n\n  async deleteTeacher(teacher_id) {\n    const response = await delete_by_id(`/user/${teacher_id}`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${teachers[teacher_id].name}刪除時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.fetchTeacherData()\n  }\n\n  render() {\n    const { teachers } = this.props\n    const { showModal } = this.state\n    return (\n      <View>\n        <Modal\n          show={showModal}\n          component={this.getModalContent()}\n          hideModal={() => this.hideModal()}\n        />\n        <ScrollView>\n          <View style={{ padding: 20 }}>\n            <TouchableHighlight\n              style={{ padding: 10, alignSelf: 'flex-end', backgroundColor: '#ffddb7' }}\n              onPress={() => this.setState({ showModal: true, modal_type: 'add_teacher' })}\n            >\n              <Text style={{ fontSize: 40 }}>新增教師</Text>\n            </TouchableHighlight>\n          </View>\n          {Object.keys(teachers).map((id, index) => {\n            const teacher = teachers[id]\n            return (\n              <View key={id} style={{ flex:1, backgroundColor: 'lightgrey', flexDirection: 'row', marginBottom: 10, padding: 15 }}>\n                {/* profile picture */}\n                <TouchableHighlight\n                  style={{ }}\n                  onPress={() => this._pickImage(id, teacher.profile_picture)}\n                >\n                  <Image\n                    source={\n                      teacher.profile_picture === '' ?\n                        require('../../../assets/icon-teacher-thumbnail.png')\n                        : {uri: teacher.profile_picture}\n                    }\n                    style={{\n                      width: 200,\n                      height: 200,\n                      borderRadius: 100\n                    }}\n                  />\n                </TouchableHighlight>\n                \n                <View style={{ flex: 5, paddingLeft: 15 }}>\n                  {/* Name */}\n                  <View>\n                    <Text style={{ fontSize: 50 }}>{teacher.name}</Text>\n                  </View>\n                </View>\n\n                {/* Right */}\n                <View style={{ flex: 1, justifyContent: 'space-evenly' }}>\n                  <View style={{ backgroundColor: 'white' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.setState({ showModal: true, modal_type: 'edit_teacher', selected_teacher_id: id })}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>編輯</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                  <View style={{ backgroundColor: '#fa625f' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.confirmDeleteTeacher(id)}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>刪除</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                </View>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    teachers: state.school.teachers,\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      updateTeacherProfilePicture,\n      fetchTeachersSuccess\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Teachers)","import React from 'react'\nimport { View, Text, TouchableHighlight } from 'react-native'\n\nconst Modal = (props) => {\n    const { title, content, hideModal } = props\n    return (\n        <TouchableHighlight\n            style={{ \n                width: '100%',\n                height: '100%', \n                zIndex: 2,\n                position: 'absolute', \n                justifyContent: 'center', \n                alignItems: 'center', \n                backgroundColor: 'rgba(0,0,0,0.7)' \n            }}\n            onPress={() => hideModal()}\n        >\n            <View style={{ width: '80%', backgroundColor: 'white' }}>\n                <View style={{ padding: 10, fontSize: 30 }}>\n                    <Text>{title}</Text>\n                </View>\n                <View style={{ padding: 10 }}>\n                    {content}\n                </View>\n            </View>\n        </TouchableHighlight>\n    )\n}\n\nexport default Modal","import React from 'react'\nimport { View, Text, TextInput } from 'react-native'\n\nconst Form = (props) => {\n    const { label, value, keyboardType, onChangeText, labelStyle, inputStyle } = props\n    return (\n        <View style={{ flexDirection: 'row', padding: 5, width: '100%' }}>\n            <Text style={labelStyle}>\n                {`${label}: `}\n            </Text>\n            <TextInput \n                value={value}\n                keyboardType={keyboardType}\n                style={inputStyle}\n                onChangeText={(input) => onChangeText(input)}\n            />\n        </View>\n    )\n}\n\nexport default Form","import React, { useState, useEffect } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableHighlight,\n  Image,\n  StyleSheet,\n  TextInput,\n  KeyboardAvoidingView,\n  Alert\n} from 'react-native'\nimport { Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n  writeToAll,\n  writeToOne,\n  remindItemsToBringToAll,\n  remindItemsToBringToOne,\n  recordActivitiesForAll,\n  recordActivitiesForOne,\n  writeItemToBringToAll,\n  writeItemToBringToOne,\n  writeActivityForAll,\n  writeActivityForOne,\n  fetchClassMessageData,\n  sendMessageOnSuccess,\n  getParentMessageSuccess\n} from '../../redux/school/actions/index'\nimport Reloading from '../reloading'\nimport { formatDate, fetchClassData, beautifyDate, get, post, put } from '../util'\nimport TimeModal from '../parent/timemodal'\nimport Modal from '../modal'\nimport Form from '../form'\n\nconst MessageForParents = (props) => {\n  const location = useLocation();\n  const [state, setState] = useState({\n    date: new Date(),\n    isLoading: true,\n    to_all_message: '',\n    items_to_bring: ['母奶粉', '尿布', '水壺', '衣物'],\n    other_item: '其它',\n    items_to_bring_bool: [0, 0, 0, 0, 0],\n    activities_list: ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言'],\n    other_activity: '其它',\n    activities_bool: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n    message_by_student_id: {},\n    editingOtherItemToBring: false,\n    editingOtherItemForStudent: '',\n    editingOtherActivity: false,\n    editingOtherActivityForOne: '',\n    showDateTimeModal: false,\n    growth_standard_by_student_id: {},\n    show_growth_standard: false,\n    dob_year: '',\n    dob_month: '',\n    dob_date: ''\n  });\n\n  useEffect(() => {\n    const { date, teacher_name } = location?.state\n    const { student_id_for_update } = props.message\n    const { isConnected } = props.class\n    if (student_id_for_update.size > 0 || !isConnected) {\n      setState({\n        ...state,\n        date,\n        isLoading: false\n      })\n    } else {\n      setState({\n        ...state,\n        date\n      })\n      fetchClassMessageData(date)\n    }\n\n    if (!isConnected) {\n      Toast.show({\n          text: '網路連線連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"danger\",\n          duration: 4000\n      })\n    }\n\n    // props.navigation.setOptions({ \n    //   title: `老師留⾔ - ${teacher_name}`\n    // })\n  }, [])\n\n  const fetchClassMessageData = async(propsDate) => {\n    // props.navigation.setOptions({ \n    //   headerRight: () => (\n    //       <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n    //   )\n    // })\n    const date = new Date(propsDate)\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchClassData('message', props.class.class_id, start_date, end_date)\n    props.fetchClassMessageData(messageData.data)\n    setState({\n      ...state,\n      state,\n      isLoading: false\n    })\n    // props.navigation.setOptions({ \n    //   headerRight: () => (\n    //       <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n    //   )\n    // })\n  }\n\n  const writeToAll = (text) => {\n    const { teacher_id } = location?.state\n    // setState({ to_all_message: text })\n    props.writeToAll(text, teacher_id)\n  }\n\n  const writeToOne = (text, student_id) => {\n    const { teacher_id } = location?.state\n    props.writeToOne(text, student_id, teacher_id)\n  }\n\n  const remindItemsToBringToOne = (student_id, selected_index) => {\n    const { teacher_id } = location?.state\n    const { message_by_student_id } = props.message\n    const things_to_bring = [...message_by_student_id[student_id].things_to_bring]\n    const new_bool = things_to_bring[selected_index] ? 0 : 1\n    things_to_bring.splice(selected_index, 1, new_bool)\n    props.remindItemsToBringToOne(student_id, things_to_bring, teacher_id)\n  }\n\n  const remindItemsToBringToAll = (selected_index) => {\n    const { teacher_id } = location?.state\n    const { items_to_bring_bool } = state\n    const new_bool = items_to_bring_bool[selected_index] ? 0 : 1\n    items_to_bring_bool.splice(selected_index, 1, new_bool)\n    setState({\n      ...state,\n      items_to_bring_bool\n    })\n    props.remindItemsToBringToAll(items_to_bring_bool, teacher_id)\n  }\n\n  const otherItemForAllEditorOnBlur = () => {\n    const { other_item } = state\n    setState({\n      ...state,\n      editingOtherItemToBring: false,\n      other_item: other_item === '' ? '其它' : other_item\n    })\n  }\n\n  const writeItemToBringToAll = (item_to_bring) => {\n    const { teacher_id } = location?.state\n    setState({\n      ...state,\n      other_item: item_to_bring\n    })\n    props.writeItemToBringToAll(item_to_bring, teacher_id)\n  }\n\n  const writeItemToBringToOne = (student_id, item_to_bring) => {\n    const { teacher_id } = location?.state\n    props.writeItemToBringToOne(student_id, item_to_bring, teacher_id)\n  }\n\n  const editItemToBringToOneEditorOnBlur = (student_id, other_item) => {\n    setState({ ...state, editingOtherItemForStudent: '' })\n    if (other_item === '') {\n      props.writeItemToBringToOne(student_id, '其它')\n    }\n  }\n\n  const recordActivitiesForOne = (student_id, selected_index) => {\n    const { teacher_id } = location?.state\n    const { message_by_student_id } = props.message\n    const activities = [...message_by_student_id[student_id].activities]\n    const new_bool = activities[selected_index] ? 0 : 1\n    activities.splice(selected_index, 1, new_bool)\n    props.recordActivitiesForOne(student_id, activities, teacher_id)\n  }\n\n  const recordActivitiesForAll = (selected_index) => {\n    const { teacher_id } = location?.state\n    const { activities_bool } = state\n    const new_bool = activities_bool[selected_index] ? 0 : 1\n    activities_bool.splice(selected_index, 1, new_bool)\n    setState({\n      ...state,\n      activities_bool\n    })\n    props.recordActivitiesForAll(activities_bool, teacher_id)\n  }\n\n  const writeActivityForAll = (other_activity) => {\n    const { teacher_id } = location?.state\n    setState({\n      ...state,\n      other_activity\n    })\n    props.writeActivityForAll(other_activity, teacher_id)\n  }\n\n  const otherActivityEditorOnBlur = () => {\n    const { other_activity } = state\n    setState({\n      ...state,\n      editingOtherActivity: false,\n      other_activity: other_activity === '' ? '其它' : other_activity\n    })\n  }\n\n  const writeActivityForOne = (student_id, other_activity) => {\n    const { teacher_id } = location?.state\n    props.writeActivityForOne(student_id, other_activity, teacher_id)\n  }\n  \n  const activityForOneEditorOnBlur = (student_id, other_activity) => {\n    setState({ ...state, editingOtherActivityForOne: '' })\n    if (other_activity === '') {\n      props.writeActivityForOne(student_id, '其它')\n    }\n  }\n\n  const handleSend = () => {\n    const { message_by_student_id, student_id_for_update } = props.message\n    const { isConnected } = props.class\n\n    if (student_id_for_update.size === 0) { \n      props.navigation.goBack()\n      return\n    }\n\n    if (!isConnected) {\n      Toast.show({\n        text: '網路連線連不到! 等一下再試試看',\n        buttonText: 'Okay',\n        position: \"top\",\n        type: \"danger\",\n        duration: 4000\n      })\n      return\n    }\n\n    const request_body = {\n      date: formatDate(new Date()),\n      data: normalize(message_by_student_id)\n    }\n\n    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/message', {\n      method: 'POST',\n      headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(request_body)\n    })\n      .then(res => res.json())\n      .then(resJson => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          Alert.alert(\n            'Error',\n            message,\n            [{text: 'OK'}]\n          )\n          return\n        }\n        props.sendMessageOnSuccess()\n        props.navigation.goBack()\n      })\n      .catch(err => {\n        Alert.alert(\n          'Error',\n          err,\n          [{text: 'OK'}]\n        )\n      })\n  }\n\n  const normalize = (data) => {\n    const { student_id_for_update, for_all } = props.message\n    var normalized_data = []\n    student_id_for_update.forEach(student_id => {\n      normalized_data.push({\n        ...data[student_id],\n        text: for_all.text + ' \\n' + data[student_id].text,\n        student_id,\n      })\n    })\n    return normalized_data\n  }\n\n  const selectDatetimeConfirm = (date) => {\n    setState({\n      ...state,\n        date,\n        showDateTimeModal: false\n    })\n    fetchClassMessageData(date)\n    fetchParentPreviousDayMessage(date)\n  }\n\n  const fetchParentPreviousDayMessage = async(date) => {\n    const response = await get(`/message/class/${props.class.class_id}/previous-day?date=${formatDate(date)}`)\n    const { statusCode, message, data } = response\n    if (statusCode === 200) {\n      props.getParentMessageSuccess(data)\n    }\n  }\n\n  const showGrowthStandard = () => {\n    const { students } = props.class\n    const { show_growth_standard } = state\n    let growth_standard_by_student_id = {}\n    Object.keys(students).map(student_id => {\n      growth_standard_by_student_id[student_id] = {\n        weight: '',\n        height: '',\n        hc: ''\n      }\n    })\n    setState({\n      ...state,\n      growth_standard_by_student_id,\n      show_growth_standard: !show_growth_standard\n    })\n  }\n\n  const handleEndEditing = async(student_id) => {\n    \n    const { growth_standard_by_student_id } = state\n    \n    let record = growth_standard_by_student_id[student_id]\n    if (record.weight !== '' && record.height !== '' && record.hc !== '') {\n      const { weight, height, hc } = record\n      let sendGrowthStandardDataRes = await sendGrowthStandardData(student_id, weight, height, hc)\n      const { success, statusCode, messate, data } = sendGrowthStandardDataRes\n      if (success) {\n        const { weight_percentile, height_percentile, hc_percentile } = data\n        setState({\n          ...state,\n          growth_standard_by_student_id: {\n            ...growth_standard_by_student_id,\n            [student_id]: {\n              ...growth_standard_by_student_id[student_id],\n              weight_percentile,\n              height_percentile,\n              hc_percentile\n            }\n          }\n        })\n      }\n    }\n  }\n\n  const sendGrowthStandardData = async(student_id, weight, height, hc) => {\n    let response = await post(`/student/growth-standard-percentile`, {\n      student_id,\n      weight,\n      height,\n      head_circumference: hc,\n      date: formatDate(new Date())\n    })\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      const { students } = props.class\n      Alert.alert(\n        `${students[student_id].name}的體位表計算出差錯`,\n        message,\n        [\n          { text: 'OK' },\n          { text: '現在填入', onPress: () => showDOBModal(student_id) }\n        ]\n      )\n    }\n    return response\n  }\n\n  const confirmRecord = (student_id) => {\n    const { teacher_id } = location?.state\n    const { message_by_student_id } = props.message\n    let { text } = message_by_student_id[student_id]\n    const { growth_standard_by_student_id } = state\n    const { weight, height, hc, weight_percentile, height_percentile, hc_percentile } = growth_standard_by_student_id[student_id]\n    if (weight_percentile === null) {\n      Alert.alert(\n        '體重百分比還未計算出來',\n        '',\n        [{ text: 'OK' }]\n      )\n      return\n    }\n\n    if (height_percentile === null) {\n      Alert.alert(\n        '身高百分比還未計算出來',\n        '',\n        [{ text: 'OK' }]\n      )\n      return\n    }\n\n    if (hc_percentile === null) {\n      Alert.alert(\n        '頭圍百分比還未計算出來',\n        '',\n        [{ text: 'OK' }]\n      )\n      return\n    }\n\n    text += `\\n體重: ${weight} kg (${weight_percentile})\\n身高: ${height} cm (${height_percentile})\\n頭圍: ${hc} cm (${hc_percentile})`\n    props.writeToOne(text, student_id, teacher_id)\n  }\n\n  const showDOBModal = (student_id) => {\n    setState({\n      ...state,\n      show_dob_modal: true,\n      student_id_dob_edit: student_id\n    })\n  }\n\n  const editDOB = async() => {\n    const { student_id_dob_edit, dob_year, dob_month, dob_date, growth_standard_by_student_id } = state\n    const { weight, height, hc } = growth_standard_by_student_id[student_id_dob_edit]\n    const response = await put(`/student/${student_id_dob_edit}/dob`,{\n      'dob': `${dob_year}-${dob_month}-${dob_date}`\n    })\n    const { success, statusCode, message, data } = response\n    if (success) {\n      setState({\n        ...state,\n        show_dob_modal: false\n      })\n      Alert.alert(\n        '更改成功！',\n        '',\n        [{ text: 'OK', onPress: () => handleEndEditing(student_id_dob_edit) }]\n      )\n    } else {\n      Alert.alert(\n        '出生年月日更改未成功',\n        message,\n        [{ text: 'OK' }]\n      )\n    }\n  }\n\n\n  const { isAdmin } = location?.state\n  // const {  } = props.message\n  // if (state.isLoading) {\n  //   return (\n  //     <Reloading />\n  //   )\n  // }\n  const { teachers } = props\n  const { students } = props.class\n  const { message_by_student_id, for_all, data_dispatched, student_id_for_update, parent_messages } = props.message\n  const {\n    items_to_bring,\n    items_to_bring_bool,\n    activities_list,\n    activities_bool,\n    editingOtherItemToBring,\n    editingOtherItemForStudent,\n    editingOtherActivity,\n    editingOtherActivityForOne,\n    date,\n    showDateTimeModal,\n    growth_standard_by_student_id,\n    show_growth_standard,\n    show_dob_modal,\n    dob_year,\n    dob_month,\n    dob_date\n  } = state\n\n  return (\n    <KeyboardAvoidingView\n      style={{\n        flex: 1\n      }}\n      behavior='height'\n      keyboardVerticalOffset={80}\n      enabled\n    >\n      {showDateTimeModal && <TimeModal\n          start_date={date}\n          datetime_type={'date'}\n          hideModal={() => setState({ ...state, showDateTimeModal: false })}\n          selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n          minDatetime={null}\n          maxDatetime={new Date()}\n      />}\n\n      {show_dob_modal &&\n        <Modal\n          title={'寶貝出生年月日填入'}\n          content={\n            <View style={{ backgroundColor: 'rgba(0,0,0,0.2)' }}>\n              <Form\n                label={'年'}\n                value={dob_year}\n                keyboardType={'numeric'}\n                onChangeText={(dob_year) => setState({\n                  ...state,\n                  dob_year\n                })}\n                labelStyle={{\n                  padding: 15,\n                  fontSize: 20,\n                  backgroundColor: 'rgba(255,255,255,0.4)'\n                }}\n                inputStyle={{\n                  flex: 1,\n                  padding: 15,\n                  fontSize: 20,\n                  backgroundColor: 'rgba(255,255,255,0.4)',\n                  borderLeftWidth: 1,\n                  borderColor: 'white'\n                }}\n              />\n\n              <Form\n                label={'月'}\n                value={dob_month}\n                keyboardType={'numeric'}\n                onChangeText={(dob_month) => setState({\n                  ...state,\n                  dob_month\n                })}\n                labelStyle={{\n                  padding: 15,\n                  fontSize: 20,\n                  backgroundColor: 'rgba(255,255,255,0.4)'\n                }}\n                inputStyle={{\n                  flex: 1,\n                  padding: 15,\n                  fontSize: 20,\n                  backgroundColor: 'rgba(255,255,255,0.4)',\n                  borderLeftWidth: 1,\n                  borderColor: 'white'\n                }}\n              />\n\n              <Form\n                label={'日'}\n                value={dob_date}\n                keyboardType={'numeric'}\n                onChangeText={(dob_date) => setState({\n                  ...state,\n                  dob_date\n                })}\n                labelStyle={{\n                  padding: 15,\n                  fontSize: 20,\n                  backgroundColor: 'rgba(255,255,255,0.4)'\n                }}\n                inputStyle={{\n                  flex: 1,\n                  padding: 15,\n                  fontSize: 20,\n                  backgroundColor: 'rgba(255,255,255,0.4)',\n                  borderLeftWidth: 1,\n                  borderColor: 'white'\n                }}\n              />\n\n              <TouchableHighlight\n                onPress={() => editDOB()}\n              >\n                <Text style={{ fontSize: 20, padding: 15, backgroundColor: '#b5e9e9' }}>\n                  送出\n                </Text>\n              </TouchableHighlight>\n            </View>\n          }\n          hideModal={() => setState({\n            ...state,\n            show_dob_modal: false\n          })}\n        />\n      }\n      <View\n        style={{\n          padding: 10,\n          flexDirection: 'row',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <TouchableHighlight\n          onPress={() => {\n            if (!data_dispatched || !isAdmin) return\n            setState({ ...state, showDateTimeModal: true})\n          }}\n        >\n          <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n        </TouchableHighlight>\n\n        <TouchableHighlight\n          style={{\n            borderWidth: show_growth_standard ? 0 : 2,\n            borderColor: show_growth_standard ? 'transparent' : 'green',\n            backgroundColor: show_growth_standard ? '#dcf3d0' : 'transparent' \n          }}\n          onPress={() => showGrowthStandard()}\n        >\n          <Text style={{ fontSize: 40, padding: 5 }}>體位表</Text>\n        </TouchableHighlight>\n\n        <TouchableHighlight\n          style={{ backgroundColor: '#dcf3d0' }}\n          onPress={() => handleSend()}\n        >\n          <Text style={{ fontSize: 40, padding: 5 }}>送出</Text>\n        </TouchableHighlight>\n      </View> \n      <ScrollView\n        contentContainerStyle={{ alignItems: 'center', marginBottom: 20 }}\n      >\n        <View style={{ width: '95%' }}>\n          <Card style={{padding: 10}}>\n            <View style={{ flex: 1 }}>\n              <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-evenly', paddingVertical: 10 }}>\n                <View style={{\n                  width: '29%',\n                  backgroundColor: '#fff1b5',\n                  borderRadius: 10,\n                  marginRight: 5\n                }}>\n                  <Text style={{ fontSize: 35, alignSelf: 'center' }}>家長準備</Text>\n                  <View\n                    style={{\n                      flex: 1,\n                      flexDirection: 'row',\n                      justifyContent: 'space-evenly',\n                      flexWrap: 'wrap'\n                    }}\n                  >\n                    {items_to_bring.map((item, index) => {\n                      return (\n                        <TouchableHighlight\n                          key={index}\n                          style={{\n                            backgroundColor: items_to_bring_bool[index] ? '#f4d41f' : '#fff7d6',\n                            borderRadius: 3,\n                            padding: 3,\n                            margin: 5\n                          }}\n                          onPress={() => remindItemsToBringToAll(index)}\n                        >\n                          <Text style={{fontSize: 20}}>{item}</Text>\n                        </TouchableHighlight>\n                      )\n                    })}\n                    <TouchableHighlight\n                          style={{\n                              backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6',\n                              justifyContent: 'center',\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                          }}\n                          underlayColor='#f4d41f'\n                          onPress={() => remindItemsToBringToAll(4)}\n                          onLongPress={() => setState({ ...state, editingOtherItemToBring: true })}\n                    >\n                      {editingOtherItemToBring ?\n                        <View style={{ flex: 1 }}>\n                          \n                          <TextInput\n                            autoFocus={true}\n                            selectTextOnFocus={true}\n                            value={state.other_item}\n                            style={{\n                              alignSelf: 'center',\n                              fontSize: 20,\n                              backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6'\n                            }}\n                            onChangeText={item_to_bring => writeItemToBringToAll(item_to_bring.trim())}\n                            onBlur={() => otherItemForAllEditorOnBlur()}\n                          />\n\n                        </View>\n                        : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{state.other_item}</Text>\n                      }\n                    </TouchableHighlight>\n                  </View>\n                </View>\n                <View\n                  style={{\n                    width: '69%',\n                    backgroundColor: '#b5e9e9',\n                    borderRadius: 10,\n                    marginLeft: 5\n                  }}\n                >\n                  <Text style={{ fontSize: 35, alignSelf: 'center' }}>今日活動</Text>\n                  <View style={{\n                    flexDirection: 'row',\n                    justifyContent: 'space-evenly',\n                    flexWrap: 'wrap'\n                  }}>\n                    {activities_list.map((activity, index) => {\n                      return (\n                        <TouchableHighlight\n                          key={index}\n                          style={{\n                            backgroundColor: activities_bool[index] ? '#368cbf' : '#eaf8f8',\n                            // borderColor: '#d6f2f2',\n                            // borderWidth: 2,\n                            borderRadius: 3,\n                            padding: 3,\n                            margin: 5\n                            // width: '13%'\n                          }}\n                          onPress={() => recordActivitiesForAll(index)}\n                        >\n                          <Text style={{fontSize: 20}}>{activity}</Text>\n                        </TouchableHighlight>\n                      )\n                    })}\n\n                    <TouchableHighlight\n                          style={{\n                              backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8',\n                              justifyContent: 'center',\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                          }}\n                          underlayColor='#368cbf'\n                          onPress={() => recordActivitiesForAll(8)}\n                          onLongPress={() => setState({ ...state, editingOtherActivity: true })}\n                    >\n                      {editingOtherActivity ?\n                        <View style={{ flex: 1 }}>\n                          \n                          <TextInput\n                            autoFocus={true}\n                            selectTextOnFocus={true}\n                            value={state.other_activity}\n                            style={{\n                              alignSelf: 'center',\n                              fontSize: 20,\n                              backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8'\n                            }}\n                            onChangeText={other_activity => writeActivityForAll(other_activity.trim())}\n                            onBlur={() => otherActivityEditorOnBlur()}\n                          />\n\n                        </View>\n                        : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{state.other_activity}</Text>\n                      }\n                    </TouchableHighlight>\n                  </View>\n                </View>\n              </View>\n              <TextInput\n                value={for_all.text}\n                style={{\n                  alignSelf: 'center',\n                  width: '100%',\n                  borderColor: 'gray',\n                  borderWidth: 2,\n                  borderRadius: 10,\n                  fontSize: 25,\n                  padding: 20\n                }}\n                multiline={true}\n                // maxLength={100}\n                onChangeText={to_all_message => writeToAll(to_all_message)}\n                onEndEditing={() => writeToAll(for_all.text.trim())}\n              />\n            </View>\n          </Card>\n        </View>\n        {Object.keys(students).map(student_id => {\n          const {text, things_to_bring, activities, other_item, other_activity, teacher_id } = message_by_student_id[student_id]\n          const teacher = teachers[teacher_id] === undefined ?  '' : `- ${teachers[teacher_id].name}`\n          return (\n            <View key={student_id} style={{ width: '95%' }}>\n              <Card style={{ padding: 10 }}>\n                <View style={{ flex: 1, flexDirection: 'row'}}>\n                  <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                    <Image\n                      source={\n                        students[student_id].profile_picture === '' ?\n                          require('../../assets/icon-thumbnail.png')\n                          : {uri: students[student_id].profile_picture}\n                      }\n                      style={{ width: 100, height: 100, borderRadius: 50 }}\n                    />\n                    <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                  </View>\n                  <View style={{ flex: 4 }}>\n                    {/* Growth rate standard */}\n                    {show_growth_standard && \n                      <View style={{ flexDirection: 'row' }}>\n                        <View>\n                          <View style={{ flexDirection: 'row', paddingBottom: 15 }}>\n                            <Text style={{ fontSize: 20, paddingRight: 15 }}>\n                              體重: \n                            </Text>\n                            <TextInput\n                              value={growth_standard_by_student_id[student_id].weight}\n                              keyboardType={'numeric'}\n                              style={{\n                                fontSize: 20,\n                                borderBottomWidth: 1, \n                                paddingHorizontal: 10,\n                                paddingVertical: 1\n                              }}\n                              onChangeText={(weight) => {\n                                setState({\n                                  ...state,\n                                  growth_standard_by_student_id: {\n                                    ...growth_standard_by_student_id,\n                                    [student_id]: {\n                                      ...growth_standard_by_student_id[student_id],\n                                      weight\n                                    }\n                                  }\n                                })\n                              }}\n                              onBlur={() => handleEndEditing(student_id)}\n                            />\n                            <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                              kg\n                            </Text>\n                            <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                              {growth_standard_by_student_id[student_id].weight_percentile && `(${growth_standard_by_student_id[student_id].weight_percentile})`}\n                            </Text>\n                          </View>\n\n                          <View style={{ flexDirection: 'row', paddingBottom: 15}}>\n                            <Text style={{ fontSize: 20, paddingRight: 15 }}>\n                              身高:\n                            </Text>\n                            <TextInput\n                              value={growth_standard_by_student_id[student_id].height}\n                              keyboardType={'numeric'}\n                              style={{\n                                fontSize: 20,\n                                borderBottomWidth: 1, \n                                paddingHorizontal: 10,\n                                paddingVertical: 1\n                              }}\n                              onChangeText={(height) => {\n                                setState({\n                                  ...state,\n                                  growth_standard_by_student_id: {\n                                    ...growth_standard_by_student_id,\n                                    [student_id]: {\n                                      ...growth_standard_by_student_id[student_id],\n                                      height\n                                    }\n                                  }\n                                })\n                              }}\n                              onBlur={() => handleEndEditing(student_id)}\n                            />\n                            <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                              cm\n                            </Text>\n                            <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                              {growth_standard_by_student_id[student_id].height_percentile && `(${growth_standard_by_student_id[student_id].height_percentile})`}\n                            </Text>\n                          </View>\n\n                          <View style={{ flexDirection: 'row', paddingBottom: 15}}>\n                            <Text style={{ fontSize: 20, paddingRight: 15 }}>\n                              頭圍:\n                            </Text>\n                            <TextInput\n                              value={growth_standard_by_student_id[student_id].hc}\n                              keyboardType={'numeric'}\n                              style={{\n                                fontSize: 20,\n                                borderBottomWidth: 1, \n                                paddingHorizontal: 10,\n                                paddingVertical: 1\n                              }}\n                              onChangeText={(hc) => {\n                                setState({\n                                  ...state,\n                                  growth_standard_by_student_id: {\n                                    ...growth_standard_by_student_id,\n                                    [student_id]: {\n                                      ...growth_standard_by_student_id[student_id],\n                                      hc\n                                    }\n                                  }\n                                })\n                              }}\n                              onBlur={() => handleEndEditing(student_id)}\n                            />\n                            <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                              cm\n                            </Text>\n                            <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                              {growth_standard_by_student_id[student_id].hc_percentile && `(${growth_standard_by_student_id[student_id].hc_percentile})`}\n                            </Text>\n                          </View>\n                        </View>\n                        <View style={{ padding: 10 }}>\n                          <TouchableHighlight\n                            style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n                            underlayColor={'#368cbf'}\n                            onPress={() => confirmRecord(student_id)}\n                          >\n                            <Text style={{ fontSize: 20 }}>確認載入</Text>\n                          </TouchableHighlight>\n                        </View>\n                      </View>\n                    }\n                    <View style={{ flex: 1, paddingBottom: 10 }}>\n                      <View\n                        style={{\n                          // width: '29%',\n                          flexDirection: 'row',\n                          backgroundColor: '#fff1b5',\n                          borderRadius: 10,\n                          // marginRight: 3\n                        }}\n                      >\n                        <Text style={{ fontSize: 28 }}>家長準備</Text>\n                        <View\n                            style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            // justifyContent: 'space-around',\n                            flexWrap: 'wrap',\n                          }}\n                        >\n                          {items_to_bring.map((item, index) => {\n                            return (\n                              <TouchableHighlight\n                                key={index}\n                                style={{\n                                  backgroundColor: things_to_bring[index] ? '#f4d41f' : '#fff7d6',\n                                  borderRadius: 3,\n                                  padding: 4,\n                                  margin: 5\n                                }}\n                                onPress={() => remindItemsToBringToOne(student_id, index)}\n                              >\n                                <Text style={{fontSize: 20}}>{item}</Text>\n                              </TouchableHighlight>\n                            )\n                          })}\n\n                          <TouchableHighlight\n                                style={{\n                                    backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                    justifyContent: 'center',\n                                    borderRadius: 3,\n                                    padding: 3,\n                                    margin: 5\n                                }}\n                                underlayColor='#f4d41f'\n                                onPress={() => remindItemsToBringToOne(student_id, 4)}\n                                onLongPress={() => setState({ ...state, editingOtherItemForStudent: student_id })}\n                          >\n                            {editingOtherItemForStudent === student_id ?\n                              <View style={{ flex: 1 }}>\n                                \n                                <TextInput\n                                  autoFocus={true}\n                                  selectTextOnFocus={true}\n                                  value={other_item}\n                                  style={{\n                                    alignSelf: 'center',\n                                    fontSize: 20,\n                                    backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                  }}\n                                  onChangeText={item_to_bring => writeItemToBringToOne(student_id, item_to_bring.trim())}\n                                  onBlur={() => editItemToBringToOneEditorOnBlur(student_id, other_item)}\n                                />\n\n                              </View>\n                              : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_item}</Text>\n                            }\n                          </TouchableHighlight>\n                        </View>\n                      </View>\n                      <View style={{\n                        // width: '70%',\n                        borderRadius: 10,\n                        // marginLeft: 3,\n                        backgroundColor: '#b5e9e9'\n                      }}>\n                        <View style={{ flexDirection: 'row' }}>\n                          <View style={{ flex: 2 }}>\n                            <Text style={{ fontSize: 28 }}>今日活動</Text>\n                          </View>\n                          <View style={{ flex: 1 }}>\n                            {student_id_for_update.has(student_id) ? \n                              <Text \n                                style={{ fontSize: 15, alignSelf: 'flex-end', paddingRight: 10, color: 'red' }}\n                              >\n                                  未送出\n                              </Text>\n                              : null}\n                          </View>\n                        </View>\n                        <View style={{\n                          // flex: 1,\n                          flexDirection: 'row',\n                          // justifyContent: 'space-between',\n                          flexWrap: 'wrap'\n                        }}>\n                          {activities_list.map((activity, index) => {\n                            return (\n                              <TouchableHighlight\n                                key={index}\n                                style={{\n                                  backgroundColor: activities[index] ? '#368cbf' : '#d6f2f2',\n                                  borderRadius: 3,\n                                  padding: 4,\n                                  margin: 5\n                                }}\n                                onPress={() => recordActivitiesForOne(student_id, index)}\n                              >\n                                <Text style={{fontSize: 20}}>{activity}</Text>\n                              </TouchableHighlight>\n                            )\n                          })}\n\n                          <TouchableHighlight\n                                style={{\n                                    backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                    justifyContent: 'center',\n                                    borderRadius: 3,\n                                    padding: 3,\n                                    margin: 5\n                                }}\n                                underlayColor='#368cbf'\n                                onPress={() => recordActivitiesForOne(student_id, 8)}\n                                onLongPress={() => setState({ ...state, editingOtherActivityForOne: student_id })}\n                          >\n                            {editingOtherActivityForOne === student_id ?\n                              <View style={{ flex: 1 }}>\n                                \n                                <TextInput\n                                  autoFocus={true}\n                                  selectTextOnFocus={true}\n                                  value={other_activity}\n                                  style={{\n                                    alignSelf: 'center',\n                                    fontSize: 20,\n                                    backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                  }}\n                                  onChangeText={activity => writeActivityForOne(student_id, activity.trim())}\n                                  onBlur={() => activityForOneEditorOnBlur(student_id, other_activity)}\n                                />\n\n                              </View>\n                              : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_activity}</Text>\n                            }\n                          </TouchableHighlight>\n                        </View>\n                      </View>\n                    </View>\n\n                    {/* parent's message from previous day */}\n                    {parent_messages[student_id] !== undefined &&\n                      <Text\n                        style={{\n                          fontSize: 20, \n                          padding: 20\n                        }}\n                      >\n                        {parent_messages[student_id]}\n                      </Text>\n                    }\n\n                    {for_all.text !== '' && <TextInput\n                      editable={false}\n                      value={for_all.text}\n                      style={{ \n                        borderColor: 'gray',\n                        borderTopWidth: 2,\n                        borderLeftWidth: 2,\n                        borderRightWidth: 2,\n                        borderTopLeftRadius: 10,\n                        borderTopRightRadius: 10,\n                        fontSize: 25, \n                        padding: 20,\n                        backgroundColor: '#F5F5F5'\n                      }}\n                      multiline={true}\n                      // maxLength={100}\n                      // onChangeText={text => writeToOne(text, student_id)}\n                    />}\n                    <TextInput\n                      value={text}\n                      style={{ \n                        borderColor: 'gray', \n                        borderBottomWidth: 2,\n                        borderLeftWidth: 2,\n                        borderRightWidth: 2,\n                        borderTopWidth: for_all.text !== '' ? 0 : 2,\n                        borderBottomLeftRadius: 10, \n                        borderBottomRightRadius: 10,\n                        borderTopLeftRadius:  for_all.text !== '' ? 0 : 10,\n                        borderTopRightRadius:  for_all.text !== '' ? 0 : 10,\n                        fontSize: 25, \n                        padding: 20 \n                      }}\n                      multiline={true}\n                      // maxLength={100}\n                      onChangeText={text => writeToOne(text, student_id)}\n                      onEndEditing={() => writeToOne(text.trim(), student_id)}\n                    />\n                    <Text style={{ fontSize: 25, alignSelf: 'flex-end' }}>{teacher}</Text>\n                  </View>\n                </View>\n              </Card>\n            </View>\n          )\n        })}\n      </ScrollView>\n    </KeyboardAvoidingView>\n  )\n}\n\nconst styles = StyleSheet.create({\n  cardContainer: {\n      width: 119,\n      height: '100%',\n      backgroundColor: 'transparent'\n  },\n  thumbnailImage: {\n      height: 80,\n      width: 80,\n      borderRadius: 40\n  }\n})\n\n\nconst mapStateToProps = state => {\n  return {\n    class: state.classInfo,\n    message: state.message,\n    teachers: state.school.teachers\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    ...bindActionCreators({\n      writeToAll,\n      writeToOne,\n      remindItemsToBringToAll,\n      remindItemsToBringToOne,\n      recordActivitiesForAll,\n      recordActivitiesForOne,\n      writeItemToBringToAll,\n      writeItemToBringToOne,\n      writeActivityForAll,\n      writeActivityForOne,\n      fetchClassMessageData,\n      sendMessageOnSuccess,\n      getParentMessageSuccess\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (MessageForParents)","import React, { useState } from 'react'\nimport { View, ScrollView, Text, TouchableHighlight, Alert, Image } from 'react-native'\nimport { connect } from 'react-redux'\nimport { get, formatDate } from '../util'\nimport { bindActionCreators } from 'redux'\nimport { fetchTeacherAttendanceSuccess, fetchStudentAttendanceSuccess } from '../../redux/school/actions/index'\nimport LoginNumberPad from './loginnumberpad'\nimport Modal from './modal'\n\nconst AttendanceScreen = (props) => {\n    const [ state, setState ] = useState({\n        isLoading: true,\n        display_list: [],\n        students_or_teachers: 'students',\n        selected_class_id: 'all',\n        showLoginNumberPad: false,\n        showModal: false,\n        modalStudentId: '',\n        teacherClicked: '',\n        teacher_id: '',\n        pageClicked: ''\n    })\n\n    const selectPersonType = (type) => {\n        const { classes } = props.school\n        // console.log('props: ', props)\n        // console.log('classes ', classes)\n        const { selected_class_id } = state\n        if (selected_class_id === 'all') {\n            setState({\n                ...state,\n                display_list: Object.keys(props.school[type]),\n                students_or_teachers: type\n            })\n            return\n        }\n\n        setState({\n            ...state,\n            display_list: classes[selected_class_id][type],\n            students_or_teachers: type\n        })\n    }\n\n    const selectClass = (class_id) => {\n        const { classes } = props.school\n        const {students_or_teachers} = state\n        // console.log('classes[class_id][students_or_teachers]: ', classes[class_id][students_or_teachers])\n        setState({\n            ...state,\n            display_list: classes[class_id][students_or_teachers],\n            selected_class_id: class_id\n        })\n    }\n\n    const selectAttendanceType = (attendanceType) => {\n        const { classes } = props.school\n        const { students_or_teachers, selected_class_id } = state\n        var display_list = []\n        var all_id_list = []\n        if (selected_class_id === 'all') {\n            all_id_list = Object.keys(props.school[students_or_teachers])\n        } else {\n            all_id_list = classes[selected_class_id][students_or_teachers]\n        }\n        for (var i = 0; i < all_id_list.length; i++) {\n            if (props.school[`student_${attendanceType}`].has(all_id_list[i])\n                || props.school[`teacher_${attendanceType}`].has(all_id_list[i])) {\n                display_list.push(all_id_list[i])\n            }\n        }\n        setState({\n            ...state,\n            display_list\n        })\n    }\n\n    const handleOnClick = (person_id) => {\n        const { teacherOnDuty } = props\n        const { students_or_teachers } = state\n        // console.log('students_or_teachers: ', students_or_teachers)\n        if (students_or_teachers === 'students') {\n            if (teacherOnDuty === '') {\n                setState({ \n                    ...state,\n                    showLoginNumberPad: true,\n                    pageClicked: 'student_modal',\n                    modalStudentId: person_id,\n                    // showModal: true\n                })\n                return\n            }\n            showModal(person_id)\n        } else {\n            setState({\n                ...state,\n                showLoginNumberPad: true,\n                teacherClicked: person_id\n            })\n        }\n    }\n\n    const showModal = (student_id) => {\n        setState({\n            // showLoginNumberPad: true,\n            ...state,\n            modalStudentId: student_id,\n            showModal: true\n        })\n    }\n\n    const handleEnterPasscode = (passcode) => {\n        const { passcodeTeacherId } = props.school\n        const { passcodeAdminId, teachers } = props\n        const { pageClicked, teacherClicked } = state\n        const teacher_id = passcodeTeacherId[passcode]\n        const admin_id = passcodeAdminId[passcode]\n        if (admin_id !== undefined) {\n            setState({\n                ...state,\n                teacher_id: admin_id,\n                pageClicked: '',\n                showModal: true,\n                showLoginNumberPad: false\n            })\n        } else if (pageClicked === 'student_modal' && teacher_id !== undefined) {\n            setState({\n                ...state,\n                teacher_id,\n                pageClicked: '',\n                showModal: true,\n                showLoginNumberPad: false\n            })\n        } else if (teacher_id === undefined || teacher_id !== teacherClicked) {\n            alert('密碼錯誤!')\n        } else {\n            setState({\n                ...state,\n                showModal: true,\n                showLoginNumberPad: false,\n                // modalTeacherId: teacher_id\n            })\n        }\n    }\n\n    const hideLoginPad = () => {\n        setState({\n            ...state,\n            showLoginNumberPad: false,\n            modalStudentId: ''\n        })\n    }\n\n    const hideModal = () => {\n        setState({\n            ...state,\n            showModal: false,\n            modalStudentId: '',\n            teacher_id: ''\n        })\n    }\n    const { \n        display_list,\n        students_or_teachers,\n        selected_class_id,\n        modalStudentId,\n        teacherClicked,\n        teacher_id,\n        showLoginNumberPad\n    } = state\n\n    const { school_id, school, teacherOnDuty } = props\n    const { \n        student_present,\n        student_unmarked,\n        student_absent,\n        teacher_present,\n        teacher_unmarked,\n        teacher_absent\n    } = school\n\n    // console.log('display_list ', display_list)\n    return (\n        <div>\n            {showLoginNumberPad ? \n                <LoginNumberPad\n                    handleEnterPasscode={(passcode) => handleEnterPasscode(passcode)}\n                    hideLoginPad={() => hideLoginPad()}\n                /> : null\n            }\n\n            <Modal\n                show={state.showModal}\n                student_id={modalStudentId}\n                teacher_id={teacherClicked}\n                teacherOnDuty={teacherOnDuty || teacher_id}\n                class_id={selected_class_id}\n                school_id={school_id}\n                navigation={props.navigation}\n                // unmarked={unmarked}\n                // absent={absent}\n                fetchStudentAttendance={() => fetchStudentAttendance()}\n                fetchTeacherAttendance={() => fetchTeacherAttendance()}\n                hideModal={() => hideModal()}\n            />\n\n            {/*////////\n            STUDENT/TEACHER \n            ////////*/}\n            <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                <View style={{ flex: 1, padding: 10 }}>\n                    <TouchableHighlight\n                        style={{ \n                            flex: 1, \n                            backgroundColor: students_or_teachers === 'students' ? 'lightgrey' : 'white', \n                            justifyContent: 'center' \n                        }}\n                        onPress={() => selectPersonType('students')}\n                    >\n                        <Text style={{ fontSize: 40, textAlign: 'center' }}>學生</Text>\n                    </TouchableHighlight>\n                </View>\n                <View style={{ flex: 1, padding: 10 }}>\n                    <TouchableHighlight\n                        style={{ \n                            flex:1,\n                            backgroundColor: students_or_teachers === 'teachers' ? 'lightgrey' : 'white', \n                            justifyContent: 'center' \n                        }}\n                        onPress={() => selectPersonType('teachers')}\n                    >\n                        <Text style={{ fontSize: 40, textAlign: 'center' }}>教師</Text>\n                    </TouchableHighlight>\n                </View>\n            </View>\n\n            {/*////////\n            CLASSES\n            ////////*/}\n            <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                {Object.keys(school.classes).map(class_id => {\n                    if (class_id === 'all') {\n                        return null\n                    }\n                    return (\n                        <View key={class_id} style={{ flex: 1, padding: 10 }}>\n                            <TouchableHighlight\n                                style={{ \n                                    flex: 1, \n                                    backgroundColor: selected_class_id === class_id ? 'lightgrey' : 'white', \n                                    justifyContent: 'center' \n                                }}\n                                onPress={() => selectClass(class_id)}\n                            >\n                                <Text style={{ fontSize: 40, textAlign: 'center' }}>{school.classes[class_id].name}</Text>\n                            </TouchableHighlight>\n                        </View>\n                    )\n                })}\n            </View>\n\n            {/*////////\n            ATTENDANCE STATUS\n            ////////*/}\n            <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                <View style={{ flex: 1, padding: 10 }}>\n                    <TouchableHighlight\n                        style={{ flex: 1, backgroundColor: '#ffe1d0', justifyContent: 'center' }}\n                        onPress={() => selectAttendanceType('absent')}\n                    >\n                        <Text style={{ fontSize: 40, textAlign: 'center' }}>缺席</Text>\n                    </TouchableHighlight>\n                </View>\n                <View style={{ flex: 1, padding: 10 }}>\n                    <TouchableHighlight\n                        style={{ flex:1, backgroundColor: '#fff1b5', justifyContent: 'center' }}\n                        onPress={() => selectAttendanceType('unmarked')}\n                    >\n                        <Text style={{ fontSize: 40, textAlign: 'center' }}>未知</Text>\n                    </TouchableHighlight>\n                </View>\n                <View style={{ flex: 1, padding: 10 }}>\n                    <TouchableHighlight\n                        style={{ flex:1, backgroundColor: '#dcf3d0', justifyContent: 'center' }}\n                        onPress={() => selectAttendanceType('present')}\n                    >\n                        <Text style={{ fontSize: 40, textAlign: 'center' }}>出席</Text>\n                    </TouchableHighlight>\n                </View>\n            </View>\n\n            {/*////////\n            DISPLAY\n            ////////*/}\n            <View style={{ flex: 9, backgroundColor: 'lightgrey' }}>\n                <ScrollView contentContainerStyle={{ flexDirection:'row', flexWrap: 'wrap', backgroundColor: 'transparent' }}>\n                    {display_list.map(person_id => {\n                        const person = school[students_or_teachers][person_id]\n                        return (\n                            <TouchableHighlight \n                                key={person_id}\n                                style={{ \n                                    height: 200, \n                                    width: '25%', \n                                    padding: 5,\n                                    // backgroundColor: this.props.attendance.unmarked.has(person_id) ? 'black' : 'white'\n                                }}\n                                onPress={() => handleOnClick(person_id)}\n                            >\n                                {/* <View style={{ flex: 1, padding: 10, backgroundColor: 'white' }}> */}\n                                    <View style={{ flex: 1, padding: 10, backgroundColor: 'white' }}>\n                                        <View style={{ justifyContent: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        person.profile_picture === '' && students_or_teachers === 'students' ?\n                                                            require('../../assets/icon-thumbnail.png')\n                                                            : person.profile_picture === '' && students_or_teachers === 'teachers' ?\n                                                                require('../../assets/icon-teacher-thumbnail.png')\n                                                                : {uri: person.profile_picture}\n                                                    }\n                                                    style={{\n                                                        height: 150,\n                                                        width: 150,\n                                                        borderRadius: 75,\n                                                        borderWidth: 10,\n                                                        borderColor: \n                                                            student_present.has(person_id) || teacher_present.has(person_id) ? '#dcf3d0'\n                                                                : student_unmarked.has(person_id) || teacher_unmarked.has(person_id) ? '#fff1b5'\n                                                                    : '#ffe1d0'\n                                                    }}\n                                                />\n                                        </View>\n                                        <View\n                                            footer\n                                            style={{ justifyContent: 'center', marginTop: -5 }}\n                                        >\n                                            <Text style={{ marginTop: -10 }}>{person.name}</Text>\n                                        </View>\n                                    </View>\n                                {/* </View> */}\n                            </TouchableHighlight>\n                        )\n                    })}\n                </ScrollView>\n            </View>\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        school: state.school,\n        teacherOnDuty: state.school.teacherOnDuty,\n        teachers: state.school.teachers,\n        passcodeAdminId: state.school.passcodeAdminId,\n        attendance: state.attendance\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            fetchTeacherAttendanceSuccess,\n            fetchStudentAttendanceSuccess\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (AttendanceScreen)","import React, { useState, useEffect } from 'react'\nimport { View, Text, RefreshControl, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { connect } from 'react-redux'\n// import MedRequestModal from './medrequestmodal'\nimport { bindActionCreators } from 'redux';\n// import { initializeRequests, fillMedRequest } from '../../../redux/school/actions/index' \nimport Reloading from '../reloading'\nimport { formatDate, put, get, beautifyDate } from '../util'\nimport LoginNumberPad from './loginnumberpad'\nimport TimeModal from '../parent/timemodal'\nimport { useLocation } from 'react-router-dom'\n\nconst Inbox = (props) => {\n    \n    const location = useLocation()\n    const [state, setState] = useState({\n        date: new Date(),\n        isLoading: true,\n        refreshing: false,\n        selected_request_id: '',\n        showLoginNumberPad: false,\n        messages: [],\n        messages_read: new Set(),\n        showDateModal: false\n    })\n\n    useEffect(() => {\n        console.log('location?.state: ', location)\n        const { messages=[], date } = location?.state || {}\n        setState({\n            ...state,\n            date,\n            messages: sortMessages(messages)\n        })\n\n        // return () => {\n        //     const { date } = location?.state || {}\n        //     const { onGoBack } = location?.data || {}\n        //     onGoBack(date)\n        // }\n    }, [])\n\n    const markRead = async(message_id, morning_reminder_id, student_id, index) => {\n        const response = await put(`/message/read`, {\n            'message_id': message_id,\n            'morning_reminder_id': morning_reminder_id,\n            student_id\n        })\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                `Sorry 標記已讀訊息時電腦出狀況了！`,\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n              )\n              return \n        }\n        bubbleDown(index)\n        let messages_read = new Set([...state.messages_read])\n        if (message_id !== null) messages_read.add(message_id)\n        if (morning_reminder_id !== null) messages_read.add(morning_reminder_id)\n        setState({\n            ...state,\n            messages_read\n        })\n    }\n\n    const bubbleDown = (index) => {\n        const { messages, messages_read } = state\n        const n = messages.length\n        while (index < n-1) {\n            const { message_id } = messages[index+1]\n            if (!messages_read.has(message_id)) {\n                var temp = messages[index]\n                messages[index] = messages[index+1]\n                messages[index+1] = temp \n            }\n            index+=1\n        }\n        setState({\n            ...state,\n            messages\n        })\n    }\n\n    const sortMessages = (data) => {\n        let messages = data\n        let left_pointer = 0\n        let messages_read = new Set()\n        for(var i = 0; i < messages.length; i++) {\n            const { message_id, morning_reminder_id, message_read, morning_reminder_read } = messages[i]\n            if ((message_read !== null && !message_read) || \n                (morning_reminder_read !== null && !morning_reminder_read)) {\n                var temp = messages[left_pointer]\n                messages[left_pointer] = messages[i]\n                messages[i] = temp\n                left_pointer+=1\n            } else {\n                if (message_id !== null) messages_read.add(message_id)\n                if (morning_reminder_id !== null) messages_read.add(morning_reminder_id)\n            }\n        }\n        setState({\n            ...state,\n            messages_read\n        })\n        return messages\n    }\n\n    const refresh = async(date) => {\n        const { class_id } = location?.state || {}\n        const response = await get(`/message/class/${class_id}/unread?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                `Sorry 取得家長訊息時電腦出狀況了！`,\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n              )\n              return \n        }\n        setState({ ...state, messages: sortMessages(data) })\n    }\n\n    const selectDatetimeConfirm = (date) => {\n        setState({\n            ...state,\n            date,\n            showDateModal: false\n        })\n        refresh(date)\n    }\n\n    const goBackADay = () => {\n        const date = new Date(state.date.getTime())\n        if (date.getDay() === 1) {\n            date.setDate(date.getDate() - 3)\n        } else {\n            date.setDate(date.getDate() - 1)\n        }\n        selectDatetimeConfirm(date)\n    }\n\n    const goForwardADay = () => {\n        const date = new Date(state.date.getTime())\n        if (date.getDay() === 5) {\n            date.setDate(date.getDate() + 3)\n        } else {\n            date.setDate(date.getDate() + 1)\n        }\n        selectDatetimeConfirm(date)\n    }\n\n    const { students } = location?.state || {}\n    const { messages, messages_read, date, showDateModal } = state\n    return (\n        <View style={{ flex: 1, paddingBottom: 40 }}>\n            {showDateModal &&\n                <TimeModal\n                    start_date={date}\n                    datetime_type={'date'}\n                    hideModal={() => setState({ ...state, showDateModal: false })}\n                    selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n                    minDatetime={null}\n                    maxDatetime={new Date()}\n                />\n            }\n            <View style={{ flexDirection: 'row', justifyContent: 'space-between'}}>\n                <View style={{ width: '15%'}}>\n                    <TouchableHighlight\n                        style={{ flex: 1, justifyContent: 'center', alignItems: 'center'}}\n                        onPress={() => goBackADay()}\n                    >\n                        <Image\n                            source={require('../../assets/icon-back.png')}\n                            style={{ width: 40, height: 40 }}\n                        />\n                    </TouchableHighlight>\n                </View>\n\n                <TouchableHighlight\n                    style={{ alignSelf: 'center', padding: 10 }}\n                    onPress={() => setState({ ...state, showDateModal: true })}\n                >\n                    <Text style={{ fontSize: 50 }}>{beautifyDate(date)}</Text>\n                </TouchableHighlight>\n\n                <View style={{ width: '15%'}}>\n                    {date.toDateString() !== (new Date).toDateString() &&\n                        <TouchableHighlight\n                            style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}\n                            onPress={() => goForwardADay()}\n                        >\n                            <Image\n                                source={require('../../assets/icon-forward.png')}\n                                style={{ width: 40, height: 40 }}\n                            />\n                        </TouchableHighlight>\n                    }\n                </View>\n            </View>\n            \n            <ScrollView>\n                {messages.map((message, index) => {\n                    const {\n                        message_id,\n                        morning_reminder_id,\n                        activities, \n                        items_to_bring, \n                        message_for_teacher,  \n                        morning_reminder, \n                        other_activity, \n                        other_item, \n                        student_id, \n                        teacher_id, \n                        text,\n                        message_read,\n                        morning_reminder_read\n                    } = message\n                    const read = messages_read.has(message_id) || messages_read.has(morning_reminder_id)\n                    return (\n                        <View \n                            key={index}\n                            style={{\n                                flexDirection: 'row',\n                                backgroundColor: 'white',\n                                borderWidth: 1,\n                                borderColor: 'lightgrey',\n                                marginBottom: 20,\n                                padding: 20,\n\n                            }}\n                        >\n                            <View>\n                                <Image\n                                    source={\n                                        students[student_id].profile_picture === '' ?\n                                            require('../../assets/icon-thumbnail.png')\n                                            : {uri: students[student_id].profile_picture}\n                                    }\n                                    style={styles.thumbnailImage}\n                                />\n                                <View style={{ justifyContent: 'center', alignItems: 'center', paddingTop: 20 }}>\n                                    <Text style={{ fontSize: 25 }}>\n                                        {students[student_id].name}\n                                    </Text>\n                                </View>\n                                <TouchableHighlight\n                                    disabled={read}\n                                    style={{\n                                        justifyContent: 'center', \n                                            justifyContent: 'center', \n                                        justifyContent: 'center', \n                                        alignItems: 'center', \n                                            alignItems: 'center', \n                                        alignItems: 'center', \n                                        marginTop: 20, \n                                        padding: 15,\n                                        backgroundColor: read ? '#dcf3d0' : '#ffe1d0'\n                                    }}\n                                    onPress={() => markRead(message_id, morning_reminder_id, student_id, index)}\n                                >\n                                    <Text style={{ fontSize: 25 }}>{read ? '已讀' : '未讀'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                            \n                            <View style={{ flex:1, marginLeft: 20 }}>\n\n                                <View style={{}}>\n                                    <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                        老師的話:\n                                    </Text>\n                                    <Text style={{ fontSize: 20 }}>\n                                        {text && text + '\\n'}\n                                    </Text>\n                                </View>\n\n                                <View style={{}}>\n                                    <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                        家長回應:\n                                    </Text>\n                                    <Text style={{ fontSize: 20 }}>\n                                        {message_for_teacher && message_for_teacher + '\\n'}\n                                    </Text>\n                                </View>\n\n                                <View style={{}}>\n                                    <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                        早晨叮嚀:\n                                    </Text>\n                                    <Text style={{ fontSize: 20 }}>\n                                        {morning_reminder && morning_reminder + '\\n'}\n                                    </Text>\n                                </View>\n\n                            </View>\n                        </View>\n                    )\n                })}\n            </ScrollView>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 170,\n        paddingRight: 5\n    },\n    thumbnailImage: {\n        height: 160,\n        width: 160,\n        borderRadius: 80\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        requests: state.medicationrequests\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Inbox)","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess, deleteTeacher  } from '../../../redux/school/actions/index'\n\n\nexport default class DownloadPage extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: ''\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  handleNavigate(pageName) {\n    const { school_name, school_id } = this.props.route.params\n    this.props.navigation.navigate(pageName, { school_name, school_id })\n  }\n\n  render() {\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'space-around'}}>\n            <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('DownloadTeacherAttendance')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>學生出勤表</Text>\n            </TouchableHighlight>\n\n            <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('DownloadTeacherAttendance')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>教師出勤表</Text>\n            </TouchableHighlight>\n        </ScrollView>\n    )\n  }\n}","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess, deleteTeacher  } from '../../../redux/school/actions/index'\n\n\nexport default class DownloadTeacherAttendance extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: ''\n    }\n  }\n\n  componentDidMount() {\n    const { school_name, school_id } = this.props.route.params\n    console.log('school_name, school_id: ', school_name, school_id)\n\n  }\n\n  render() {\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n            {/* <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('Registration')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>教師出勤</Text>\n            </TouchableHighlight> */}\n        </ScrollView>\n    )\n  }\n}","import React, { useEffect, useState } from 'react'\nimport { View, Text, TextInput, TouchableHighlight, ScrollView, Image, KeyboardAvoidingView } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { connect } from 'react-redux'\nimport { get, post, formatDate, formatTime, beautifyDate, beautifyMonthDate } from '../../util'\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nconst AnnouncementHome = (props) => {\n    const location = useLocation()\n    const navigate = useNavigate()\n    const [state, setState] = useState({\n            date: new Date(),\n            selected_all_classes: true,\n            selected_classes: new Set(),\n            class_id_list: [],\n            text: '',\n            announcements: [],\n            page_number: 0,\n            is_loading: true\n    })\n    \n    /*\n        1. text and be able to import pictures\n        2. be able to pick classes(include, exclude)\n        3. be able to see which parent has read or not read the announcement(ability to track past announcements)\n    */\n\n    useEffect(() => {\n        // TODO\n        // unsubscribe = props.navigation.addListener('focus', async () => {\n        //     // console.log('focused!!!!')\n        //     await fetchAnnouncements()\n        // })\n        fetchAnnouncements()\n    }, [])\n\n    // async componentDidMount() {\n    //     unsubscribe = props.navigation.addListener('focus', async () => {\n    //         // console.log('focused!!!!')\n    //         await fetchAnnouncements()\n    //     })\n    //     // await fetchAnnouncements()\n    // }\n\n    const fetchAnnouncements = async() => {\n        const { school_id } = location?.state\n        const { page_number } = state\n        const response = await get(`/announcement?school_id=${school_id}&page=${page_number}`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchAnnouncements/response: ', response)\n        if (success) {\n            setState({\n                ...state,\n                announcements: data\n            })\n        }\n    }\n\n    // async fetchReadStatusByAnnouncementId(announcement_id) {\n    //     const response = await get(`/announcement/${announcement_id}`)\n    //     console.log(response)\n    // }\n    // componentWillUnmount() {\n    //     unsubscribe()\n    // }\n\n    const { school_id, school_name } = location?.state\n    const { classes, students } = props\n    const { announcements } = state\n    \n    return (\n        <View style={{ flex: 1 }}>\n            <View style={{ flexDirection: 'row', justifyContent: 'flex-end', paddingVertical: 7 }}>\n                <TouchableHighlight\n                    style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                    onPress={() => navigate('new', {\n                        school_id,\n                        school_name\n                    })}\n                >\n                    <Text style={{ fontSize: 20 }}>新增</Text>\n                </TouchableHighlight>\n            </View>\n            <ScrollView contentContainerStyle={{ alignItems: 'center' }}>\n                {announcements.map((announcement, index) => {\n                    const { id } = announcement\n                    const date = beautifyDate(new Date(announcement.timestamp))\n                    return (\n                        <TouchableHighlight\n                            key={id}\n                            style={{ width: '90%' }}\n                            onPress={() => navigate(`${id}`, { state: { \n                                school_id,\n                                announcement,\n                                school_name\n                            }})}\n                        >\n                            <Card\n                                style={{\n                                    padding: 20,\n                                    width: '95%',\n                                    height: 200,\n                                    flexDirection: 'row'\n                                }}\n                            >\n                                <View style={{ width: '100%', overflow: 'hidden'}}>\n                                    <View style={{ paddingBottom: 20 }}>\n                                        <Text style={{ fontSize: 25 }}>{announcement.title}</Text>\n                                        <Text style={{ fontSize: 15 }}>{date}</Text>\n                                    </View>\n                                    <View style={{ }}>\n                                        <Text style={{ fontSize: 18 }}>{announcement.text}</Text>\n                                    </View>\n                                </View>\n                            </Card>\n                        </TouchableHighlight>\n                    )\n                })}\n            </ScrollView>\n        </View>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        classes: state.school.classes,\n        students: state.school.students\n    }\n}\n\nexport default connect(mapStateToProps) (AnnouncementHome)","import React from 'react'\nimport { View, Text, TextInput, TouchableHighlight, KeyboardAvoidingView, ScrollView, Alert, Image, Platform } from 'react-native'\nimport { connect } from 'react-redux'\nimport { formatDate, formatTime, post } from '../../util'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\n// import s3 from '../../../configuration/s3';\nimport Reloading from '../../reloading'\n\nclass AddAnnouncementPage extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            selected_all_classes: true,\n            selected_classes: new Set(),\n            class_id_list: [],\n            text: '',\n            title: '',\n            images: [],\n            sendLoading: false,\n            links: []\n        }\n    }\n\n    componentDidMount () {\n        this.getPermissionAsync()\n        const { classes } = this.props\n        let class_id_list = []\n        Object.keys(classes).forEach((class_id) => {\n            // if (classes[class_id].name !== '管理員' && !classes[class_id].name.includes('畢業')) {\n                class_id_list.push(class_id)\n            // }\n        })\n        this.setState({\n            class_id_list,\n            selected_classes: new Set(class_id_list)\n        })\n    }\n\n    selectClass (class_id) {\n        const { selected_classes, class_id_list } = this.state\n        let new_selected_classes = new Set([...selected_classes])\n        if ( new_selected_classes.has(class_id) ) {\n            new_selected_classes.delete(class_id)\n        } else {\n            new_selected_classes.add(class_id)\n        }\n        this.setState({\n            selected_classes: new_selected_classes,\n            selected_all_classes: new_selected_classes.size === class_id_list.length ? true : false\n        })\n    }\n\n    selectAllClasses() {\n        const { selected_all_classes } = this.state\n        this.setState({\n            selected_all_classes: !selected_all_classes,\n            selected_classes: selected_all_classes ? new Set() : new Set(this.state.class_id_list)\n        })\n    }\n\n    async postAnnouncement() {\n        const { school_id, school_name } = this.props.route.params\n        const { text, date, selected_classes, title, images, links } = this.state\n        if (selected_classes.size === 0) {\n            // Alert.alert(\n            //     '請選擇班級',\n            //     '',\n            //     [\n            //         { text: 'Ok' }\n            //     ]\n            // )\n            alert('請選擇班級')\n            return\n        }\n\n        if (title === '') {\n            // Alert.alert(\n            //     'Title 未填',\n            //     '',\n            //     [\n            //         { text: 'Ok' }\n            //     ]\n            // )\n            alert('Title 未填')\n            return\n        }\n\n        this.setState({ sendLoading: true })\n\n        const response = await post(`/announcement`, {\n            'school_id': school_id,\n            'title': title,\n            'text': text,\n            'timestamp': `${formatDate(date)} ${formatTime(date)}`,\n            'class_id_list': [...selected_classes],\n            'images': images,\n            'school_name': school_name,\n            'links': links\n        })\n        const { success, statusCode, message, data } = response\n        if ( success ) {\n            this.props.navigation.navigate('AnnouncementHome', {\n                school_id,\n                school_name,\n                update_page: true\n            })\n        } else {\n            // Alert.alert(\n            //     '送出訊息時出狀況',\n            //     message,\n            //     [\n            //         { text: 'Ok' }\n            //     ]\n            // )\n            alert('送出訊息時出狀況')\n            return\n        }\n    }\n\n    getPermissionAsync = async () => {\n        if (Platform.OS === 'ios') {\n            const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n            if (status !== 'granted') {\n                alert('Sorry, we need camera roll permissions to make this work!');\n            }\n        }\n    };\n    \n    _pickImage = async () => {\n        try {\n            let result = await ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: false,\n                quality: 0.4,\n                base64: true\n            });\n            if (!result.cancelled) {\n                const { base64 } = result\n                this.setState({\n                    images: [...this.state.images, base64]\n                })\n                // this.setState({ image: result.uri });\n                // this.getProfilePictureURL(base64, student_id, url)\n            }\n        \n            // console.log(result);\n        } catch (E) {\n            console.log(E);\n        }\n    };\n\n    removeImage(index) {\n        const { images } = this.state\n        images.splice(index, 1)\n        this.setState({\n            images\n        })\n    }\n\n    handleAddLink() {\n        const { links } = this.state\n        links.push({\n            text: '',\n            url: ''\n        })\n        this.setState({\n            links\n        })\n    }\n\n    handleChangeLinkText(text, index) {\n        const { links } = this.state\n        links[index].text = text\n        this.setState({\n            links\n        })\n    }\n\n    handleChangeUrl(url, index) {\n        const { links } = this.state\n        links[index].url = url\n        this.setState({\n            links\n        })\n    }\n\n    handleDeleteUrl(index) {\n        const { links } = this.state\n        links.splice(index, 1)\n        this.setState({\n            links\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { selected_all_classes, class_id_list, selected_classes, text, title, images, sendLoading, links } = this.state\n        \n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1\n                }}\n                behavior='height'\n                keyboardVerticalOffset={80}\n                enabled\n            >   \n                <ScrollView contentContainerStyle={{ }} keyboardShouldPersistTaps='never'>\n                    <View style={{ padding: 15, flexDirection: 'row', alignItems: 'center', flexWrap: 'wrap' }}>\n                        <Text style={{ fontSize: 25 }}>班級:</Text>\n                        {class_id_list.map((class_id) => { \n                            return (\n                                <TouchableHighlight\n                                    key={class_id}\n                                    style={{ \n                                        backgroundColor: selected_classes.has(class_id) ? '#368cbf' : 'rgba(0, 0, 0, 0.1)',\n                                        marginLeft: 15\n                                    }}\n                                    underlayColor={'#368cbf'}\n                                    onPress={() => this.selectClass(class_id)}\n                                >\n                                    <Text \n                                        style={{ \n                                            padding: 10,\n                                            fontSize: 25,\n                                            color: selected_classes.has(class_id) ? 'rgba(255,255,255,0.6)' : 'rgba(0, 0, 0, 0.5)'\n                                        }}\n                                    >\n                                        {classes[class_id].name}\n                                    </Text>\n                                </TouchableHighlight>\n                            )\n                        })}\n                        <TouchableHighlight \n                            style={{\n                                backgroundColor: selected_all_classes ? '#368cbf' : 'rgba(0, 0, 0, 0.1)',\n                                marginLeft: 15\n                            }}\n                            underlayColor={'#368cbf'}\n                            onPress={() => this.selectAllClasses()}\n                        >\n                            <Text style={{ padding: 10, fontSize: 25, color: selected_all_classes ? 'rgba(255,255,255,0.6)' : 'rgba(0, 0, 0, 0.5)' }}>\n                                所有\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ padding: 15, backgroundColor: 'lightgrey' }}>\n                        <View style={{ flexDirection: 'row', width: '100%' }}>\n                            <Text style={{ fontSize: 25 }}>標題: </Text>\n                            <TextInput\n                                value={title}\n                                placeholder={'必填'}\n                                style={{\n                                    // width: '100%',\n                                    flex: 1,\n                                    fontSize: 25,\n                                    borderBottomWidth: 1,\n                                    borderBottomColor: 'gray'\n                                }}\n                                onChangeText={title => this.setState({\n                                    title\n                                })}\n                            />\n                        </View>\n                        <TextInput\n                            value={text}\n                            style={{\n                                backgroundColor: 'white',\n                                alignSelf: 'center',\n                                width: '100%',\n                                borderColor: 'gray',\n                                borderWidth: 2,\n                                borderRadius: 10,\n                                fontSize: 25,\n                                padding: 20,\n                                paddingTop: 20,\n                                marginVertical: 15\n                            }}\n                            multiline={true}\n                            // maxLength={100}\n                            onChangeText={text => this.setState({\n                                text\n                            })}\n                            // onEndEditing={() => this.writeToAll(for_all.text.trim())}\n                        />\n                        <View style={{ }}>\n                            <Text style={{ fontSize: 20, marginRight: 20 }}>連結</Text>\n                            {links.map((link,index) => {\n                                return (\n                                    <View\n                                        key={index} \n                                        style={{ flex: 1, flexDirection: 'row', marginTop: 15 }}\n                                    >\n                                        <View\n                                            style={{ \n                                                flex: 7,\n                                                backgroundColor: 'rgba(255,255,255,0.7)', \n                                                padding: 8, \n                                                borderRadius: 7\n                                            }}\n                                        >\n                                            <Text style={{ }}>顯示文字</Text>\n                                            <TextInput\n                                                value={link.text}\n                                                style={{ padding: 5, borderBottomWidth: 1 }}\n                                                onChangeText={(text) => this.handleChangeLinkText(text, index)}\n                                            />\n\n                                            <Text style={{ marginTop: 10 }}>連結</Text>\n                                            <TextInput\n                                                value={link.url}\n                                                style={{ padding: 5, borderBottomWidth: 1 }}\n                                                onChangeText={(url) => this.handleChangeUrl(url, index)}\n                                            />\n                                        </View>\n                                        <View style={{ flex: 1, backgroundColor: 'grey' }}>\n                                            <TouchableHighlight\n                                                style={{ \n                                                    flex: 1, \n                                                    padding: 10, \n                                                    backgroundColor: '#ffe1d0', \n                                                    alignItems: 'center', \n                                                    justifyContent: 'center' \n                                                }}\n                                                onPress={() => this.handleDeleteUrl(index)}\n                                            >\n                                                <Text>\n                                                    刪除\n                                                </Text>\n                                            </TouchableHighlight>\n                                        </View>\n                                    </View>\n                                )\n                            })}\n\n                            <View style={{ flexDirection: 'row', alignItems: 'center', marginVertical: 15 }}>\n                                <TouchableHighlight \n                                    style={{\n                                        backgroundColor: 'rgba(255,255,255,0.7)', \n                                        paddingVertical: 10, \n                                        paddingHorizontal: 20,\n                                        borderWidth: 2,\n                                        borderRadius: 10,\n                                        borderStyle: 'dashed' \n                                    }}\n                                    onPress={() => this.handleAddLink()}\n                                >\n                                    <Text>\n                                        新增\n                                    </Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                        <View>\n                            <Text style={{ fontSize: 20 }}>相片</Text>\n                            <View style={{ flexDirection: 'row', marginTop: 20 }}>\n                                <View style={{ flex: 1, flexDirection: 'row' }}>\n                                    {images.map((base64, index) => {\n                                        return (\n                                            <TouchableHighlight \n                                                key={index}\n                                                onPress={() => this.removeImage(index)}\n                                            >\n                                                <Image\n                                                    style={{ width: 100, height: 100, marginRight: 10, borderRadius: 10 }}\n                                                    source={{ uri: `data:image/png;base64,${base64}` }}\n                                                />\n                                            </TouchableHighlight>\n                                        )\n                                    })}\n                                    <TouchableHighlight\n                                        style={{\n                                            // padding: 10,\n                                            backgroundColor: 'rgba(255,255,255,0.7)',\n                                            width: 100,\n                                            height: 100,\n                                            justifyContent: 'center',\n                                            alignItems: 'center',\n                                            borderWidth: 2,\n                                            borderRadius: 10,\n                                            borderStyle: 'dashed'\n                                        }}\n                                        onPress={() => this._pickImage() }\n                                    >\n                                        <Text>新增</Text>\n                                    </TouchableHighlight>\n                                </View>\n                                <TouchableHighlight\n                                    disabled={sendLoading}\n                                    style={{\n                                        // width: '10%',\n                                        backgroundColor: 'lightblue',\n                                        padding: 10,\n                                        alignSelf: 'flex-end'\n                                    }}\n                                    onPress={() => this.postAnnouncement()}\n                                >\n                                    {sendLoading ? \n                                        <Reloading />\n                                    : <Text style={{ fontSize: 25 }}>送出</Text>}\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                        \n                    </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        classes: state.school.classes\n    }\n}\n\nexport default connect(mapStateToProps) (AddAnnouncementPage)","import { createTransform } from 'redux-persist';\n\nexport const SetTransform = createTransform(\n  // transform state on its way to being serialized and persisted.\n  (inboundState, key) => {\n    // convert mySet to an Array.\n    console.log('inboundState: ', inboundState)\n    return { \n      ...inboundState,\n      record_id_for_update: [...inboundState.record_id_for_update],\n      records_with_error: [...inboundState.records_with_error],\n      // student_id_for_update: [...inboundState.student_id_for_update]\n    };\n  },\n  // transform state being rehydrated\n  (outboundState, key) => {\n    // convert mySet back to a Set.\n    return {\n      ...outboundState,\n      record_id_for_update: new Set(outboundState.record_id_for_update),\n      records_with_error: new Set(outboundState.records_with_error),\n      // student_id_for_update: new Set(outboundState.student_id_for_update)\n    };\n  },\n  // define which reducers this transform gets called for.\n  { whitelist: ['healthstatus'] }\n);\n\nexport const SetMessageTransform = createTransform(\n  // transform state on its way to being serialized and persisted.\n  (inboundState, key) => {\n    // convert mySet to an Array.\n    return { \n      ...inboundState,\n      student_id_for_update: [...inboundState.student_id_for_update]\n    };\n  },\n  // transform state being rehydrated\n  (outboundState, key) => {\n    // convert mySet back to a Set.\n    return {\n      ...outboundState,\n      student_id_for_update: new Set(outboundState.student_id_for_update)\n    };\n  },\n  // define which reducers this transform gets called for.\n  { whitelist: ['message'] }\n);\n\nexport const SetAppetiteTransform = createTransform(\n  // transform state on its way to being serialized and persisted.\n  (inboundState, key) => {\n    // convert mySet to an Array.\n    return { \n      ...inboundState,\n      updatedStudents: [...inboundState.updatedStudents]\n    };\n  },\n  // transform state being rehydrated\n  (outboundState, key) => {\n    // convert mySet back to a Set.\n    return {\n      ...outboundState,\n      updatedStudents: new Set(outboundState.updatedStudents)\n    };\n  },\n  // define which reducers this transform gets called for.\n  { whitelist: ['appetite'] }\n);\n\nexport const SetSleepTransform = createTransform(\n  // transform state on its way to being serialized and persisted.\n  (inboundState, key) => {\n    // convert mySet to an Array.\n    return { \n      ...inboundState,\n      records: {...inboundState.records, all_id: [...inboundState.records.all_id]},\n      newDataForCreate: [...inboundState.newDataForCreate],\n      oldDataForEdit: [...inboundState.oldDataForEdit],\n      records_with_error: [...inboundState.records_with_error],\n    };\n  },\n  // transform state being rehydrated\n  (outboundState, key) => {\n    // convert mySet back to a Set.\n    return {\n      ...outboundState,\n      records: {...outboundState.records, all_id: new Set(outboundState.records.all_id)},\n      newDataForCreate: new Set(...outboundState.newDataForCreate),\n      oldDataForEdit: new Set(...outboundState.oldDataForEdit),\n      records_with_error: new Set(...outboundState.records_with_error)\n    };\n  },\n  // define which reducers this transform gets called for.\n  { whitelist: ['sleep'] }\n);\n// export default SetTransform;\n\n","import React from 'react'\nimport { View, TouchableHighlight, Text } from 'react-native'\nimport {\n    BrowserRouter,\n    Routes,\n    Route,\n  } from \"react-router-dom\";\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport reducer from '../../redux/school/reducers/index'\nimport TeacherHome from './teacherhome'\nimport { NavigationContainer } from '@react-navigation/native'\nimport { createStackNavigator } from '@react-navigation/stack'\nimport SchoolHome from './schoolhome'\nimport TeacherClockInOut from './teacherclockinout';\n// import DismissChildQRScan from './dismisschildqrscan';\nimport TeacherMedicineLog from './logs/medicinelog';\nimport WellnessLog from './logs/wellnesslog';\nimport TeacherAppetiteLog from './logs/appetitelog';\nimport TeacherSleepLog from './logs/sleeplog';\nimport TeacherMilkLog from './logs/milklog';\nimport DiaperLog from './logs/diaperlog';\nimport AdminHome from './admin/adminhome'\nimport Announcement from './admin/announcement'\nimport Registration from './admin/registration'\nimport Students from './admin/students'\nimport Teachers from './admin/teachers'\nimport MessageForParents from './messageforparents'\nimport AttendancePage from './attendancepageW'\nimport PickupAlert from './pickupalert'\nimport Inbox from './inbox'\nimport DownloadPage from './admin/downloadpage'\nimport DownloadTeacherAttendance from './admin/downloadteacherattendance'\nimport AnnouncementHome from './admin/announcementhome'\nimport AddAnnouncementPage from './admin/addannouncementpage'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport { SetTransform, SetMessageTransform, SetAppetiteTransform, SetSleepTransform } from '../../redux/transforms'\n// import SetMessageTransform from '../../redux/transforms'\n\nconst persistConfig = {\n    key: 'root',\n    storage,\n    transforms: [SetTransform, SetMessageTransform, SetAppetiteTransform, SetSleepTransform]\n}\n  \nconst persistedReducer = persistReducer(persistConfig, reducer)\n\nconst store = createStore(persistedReducer)\n// const store = createStore(reducer)\nlet persistor = persistStore(store)\n// console.log('persistedReducer: ', persistedReducer)\n// console.log('store.getState(): ', store.getState())\nconst SchoolApp = (props) => {\n    return (\n        <Provider store={store}>\n            <PersistGate loading={null} persistor={persistor}>\n                <BrowserRouter>\n                    <Routes>\n                        <Route exact path=\"/\" element={<SchoolHome {...props} />} />\n                        <Route path=\"/class\" element={<TeacherHome />} />\n                        <Route path=\"/class/inbox\" element={<Inbox />} />\n                        <Route path=\"/class/medication\" element={<TeacherMedicineLog />} />\n                        <Route path=\"/class/wellness\" element={<WellnessLog />} />\n                        <Route path=\"/class/message\" element={<MessageForParents />} />\n                        <Route path=\"/class/appetite\" element={<TeacherAppetiteLog />} />\n                        <Route path=\"/class/sleep\" element={<TeacherSleepLog />} />\n                        <Route path=\"/admin\" element={<AdminHome />} />\n                        <Route path=\"/admin/announcement\" element={<AnnouncementHome />} />\n                        <Route path=\"/admin/announcement/:id\" element={<Announcement />} />\n                        <Route path=\"/admin/announcement/new\" element={<AddAnnouncementPage />} />\n                        <Route path=\"/attendance\" element={<AttendancePage />} />\n                    </Routes>\n                </BrowserRouter>\n            </PersistGate>\n            {/* \n                    <Stack.Screen \n                        name=\"AdminHome\"\n                        component={AdminHome}\n                        options={{ gestureEnabled: true, title: '' }}\n                    />\n                    <Stack.Screen \n                        name=\"Announcement\"\n                        component={Announcement}\n                        options={{ gestureEnabled: true, title: '公告' }}\n                    />\n                    <Stack.Screen\n                        name=\"AnnouncementHome\"\n                        component={AnnouncementHome}\n                        options={{ gestureEnabled: true, title: '公告首頁' }}\n                    />\n                    <Stack.Screen\n                        name=\"AddAnnouncementPage\"\n                        component={AddAnnouncementPage}\n                        options={{ gestureEnabled: true, title: '新增公告' }}\n                    />\n                    <Stack.Screen \n                        name=\"Registration\"\n                        component={Registration}\n                        options={{ headerLeft: null, title: '' }}\n                    />\n                    <Stack.Screen \n                        name=\"Students\"\n                        component={Students}\n                        options={{ gestureEnabled: true, title: '' }}\n                    />\n                    <Stack.Screen \n                        name=\"Teachers\"\n                        component={Teachers}\n                        options={{ gestureEnabled: true, title: '' }}\n                    />\n                    <Stack.Screen \n                        name=\"DownloadPage\"\n                        component={DownloadPage}\n                        options={{ gestureEnabled: true, title: '下載' }}\n                    />\n                    <Stack.Screen \n                        name=\"DownloadTeacherAttendance\"\n                        component={DownloadTeacherAttendance}\n                        options={{ gestureEnabled: true, title: '學生出勤下載' }}\n                    />\n                    <Stack.Screen \n                        name=\"AttendancePage\"\n                        component={AttendancePage}\n                        options={{\n                            title: '出席/打卡',\n                            headerRight: () => (\n                                <View style={{ paddingRight: 20 }}>\n                                    <Text style={{ fontSize: 30 }}>{'值班老師：未登入'}</Text>\n                                </View>\n                            )\n                        }}\n                    />\n                    <Stack.Screen \n                        name=\"TeacherHome\"\n                        component={TeacherHome}\n                        options={{ headerLeft: null, title: '' }}\n                    />\n                    <Stack.Screen \n                        name=\"Inbox\"\n                        component={Inbox}\n                        options={{gestureEnabled: true, title: '' }}\n                    />\n                    <Stack.Screen\n                        name=\"PickupAlert\"\n                        component={PickupAlert}\n                    />\n                    <Stack.Screen \n                        name=\"TeacherClockInOut\"\n                        component={TeacherClockInOut}\n                        options={{ gestureEnabled: true, title: '打卡' }}\n                    />\n                    <Stack.Screen \n                        name=\"TeacherMedicineLog\"\n                        component={TeacherMedicineLog}\n                        options={{ gestureEnabled: true, title: '托藥單' }}\n                    />\n                    <Stack.Screen \n                        name=\"WellnessLog\"\n                        component={WellnessLog}\n                        options={{ gestureEnabled: true, title: '健康' }}\n                    />\n                    <Stack.Screen \n                        name=\"MessageForParents\"\n                        component={MessageForParents}\n                        options={{ gestureEnabled: true, title: '老師留⾔' }}\n                    />\n                    <Stack.Screen \n                        name=\"TeacherAppetiteLog\"   \n                        component={TeacherAppetiteLog}\n                        options={{ gestureEnabled: true, title: '飲食' }}\n                    />\n                    <Stack.Screen \n                        name=\"TeacherSleepLog\"\n                        component={TeacherSleepLog}\n                        options={{ gestureEnabled: true, title: '睡眠' }}\n                    />\n                    <Stack.Screen \n                        name=\"TeacherMilkLog\"\n                        component={TeacherMilkLog}\n                        options={{ gestureEnabled: true, title: '餵奶' }}\n                    />\n                    <Stack.Screen \n                        name=\"DiaperLog\"\n                        component={DiaperLog}\n                        options={{ gestureEnabled: true, title: '如廁' }}\n                    />\n                    \n                </Stack.Navigator>\n            </NavigationContainer> */}\n        </Provider>\n    )\n}\n\nexport default SchoolApp","import React from 'react'\nimport { StyleSheet, TextInput, Platform, KeyboardAvoidingView, TouchableHighlight, Image } from 'react-native'\nimport { View, Text } from 'native-base'\nimport Auth from '@aws-amplify/auth'\nimport Reloading from '../reloading'\n\nclass Signin extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            password: '',\n            errMessage: '',\n            user_type: '',\n            isLoading: false\n        }\n    }\n\n    componentDidMount() {\n        // this.props.clearState\n    }\n\n    handleSignIn() {\n        // invoke google auth with scopes, ask for school's authorization\n        // allow requests to googple photo api\n        this.setState({\n            isLoading: true\n        })\n        const { username, password } = this.state\n        Auth.signIn(username, password)\n            .then((user) => {\n                console.log('user: ', user)\n                if (user.challengeName === 'NEW_PASSWORD_REQUIRED') {\n                    // const {requiredAttributes} = user.challengeParam\n                    this.completeNewPassword(user)\n                    return\n                }\n                this.setState({\n                    isLoading: false\n                })\n                this.props.loadAuth()\n            })\n            .catch((err) => {\n                console.log('err.code: ', err.code)\n                if (err.code === 'UserNotConfirmedException') {\n                    this.props.changeAuthState('ConfirmSignUpPage', username)\n                } else {\n                    this.props.changeAuthState('signedout', username)\n                    this.setState({ \n                        errMessage: err.message,\n                        isLoading: false\n                    })\n                }\n            })\n    }\n\n    completeNewPassword(user) {\n        Auth.completeNewPassword(\n            user,\n            'barRoco',\n            { name: 'barroco' }\n        )\n        .then((user) => {\n            this.setState({\n                isLoading: false\n            })\n            this.props.loadAuth()\n        })\n        .catch((err) => {\n            this.setState({\n                errMessage: err.message,\n                isLoading: false\n            })\n        })\n    }\n\n    render () {\n        const { isLoading } = this.state\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        const keyboardVerticalOffset = Platform.OS === 'ios' ? 60 : 0\n        const errMessage = this.state.errMessage ? (\n            <Text style={{ color: 'red'}}>\n                {this.state.errMessage}\n            </Text>\n        ) : (\n            null\n        )\n\n        return (\n            <KeyboardAvoidingView \n                style={styles.container} \n                behavior={'padding'}\n                keyboardVerticalOffset={keyboardVerticalOffset} \n                enabled\n            >\n                <Image\n                    source={require('../../assets/app_logo.png')}\n                    style={{\n                        width: 200,\n                        height: 200,\n                    }}\n                />\n\n                <Text style={{ fontSize: 40 }}>請登入</Text>\n                {errMessage}\n                <TextInput\n                    placeholder=\"Email / 帳號\"\n                    keyboardType=\"email-address\"\n                    autoCapitalize=\"none\"\n                    style={styles.textInput}\n                    onChangeText={(username) => this.setState({ username })}\n                    value={this.state.username}\n                />\n\n                <TextInput\n                    secureTextEntry\n                    placeholder=\"密碼\"\n                    style={styles.textInput}\n                    onChangeText={(pass) => this.setState({ password: pass })}\n                    value={this.state.password}\n                />\n\n                <View style={{ marginTop: 20 }}>\n                    <TouchableHighlight\n                        style={{ backgroundColor: 'grey', padding: 20 }}\n                        onPress={() => this.handleSignIn()}\n                    >\n                        <Text style={{ fontSize: 30 }}>登入</Text>\n                    </TouchableHighlight>\n                </View>\n                \n                {/*<View style={{ width: '90%', margin: 10, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('','')}>\n                        <Text>Sign in</Text>\n                    </Button>\n                    <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.props.changeAuthState('SignupPage', '')}>\n                        <Text>No Account? Sign up here!</Text>\n                    </Button>\n                </View>\n                <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('abc123', 'password')}>\n                    <Text>我是家長</Text>\n                </Button>\n                <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('formosa', 'formosaADMIN')}>\n                    <Text>我是校方</Text>\n                </Button>*/}\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    textInput: {\n        height: 80,\n        width: '90%',\n        borderColor: 'gray',\n        borderWidth: 1,\n        marginTop: 20,\n        fontSize: 30,\n        padding: 10\n    }\n})\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n//         ...bindActionCreators({addUserType, clearState}, dispatch)\n//     }\n// }\n\n// function mapStateToProps(state) {\n//     return({\n//         user: state.user\n//     })\n// }\n\n// export default connect(mapStateToProps, mapDispatchToProps) (Signin)\nexport default Signin","import React from 'react'\n// import { db } from '../../configuration/db'\nimport { View, StyleSheet, Text, KeyboardAvoidingView, TextInput, AsyncStorage, TouchableHighlight } from 'react-native'\nimport { Button } from 'native-base'\n// import firebase from 'firebase'\n// import { addCurrentUser, addUserType } from '../../redux/actions/index'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons'\nimport Auth from '@aws-amplify/auth'\n\nclass Signup extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            name: '',\n            user_type: '',\n            email: '',\n            password: '',\n            errMessage: ''\n        }\n    }\n\n    handleSignup() {\n        const {username, password, name, email, user_type} = this.state\n        if (!this.state.user_type) {\n            this.setState({ errMessage: 'Please select user role'})\n        } else {\n            Auth.signUp({\n                username,\n                password,\n                attributes: {\n                    name,\n                    email\n                }\n            })\n                .then((data) => {\n                    // console.log(data)\n                    // switch to code input page\n                    // initialize user in database and recorde user id \n                    // for use later to switch to homepage upon successful code input\n                    console.log(this.state.user_type)\n\n                    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/user/' + username, {\n                        method: 'POST',\n                        headers: {\n                            Accept: 'application/json',\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            name,\n                            email,\n                            role: user_type\n                        })\n                    })\n                        .then((response) => response.json())\n                        .then((responseJson) => {\n                            console.log(responseJson)\n                            // this.props.navigation.navigate('ConfirmSignUpPage', {role: this.state.user_type})\n                            this.props.changeAuthState('ConfirmSignUpPage')\n                        })\n                        .catch((err) => {\n                            console.error(err)\n                        })\n                })\n                .catch((err) => {\n                    this.setState({ errMessage: err.message })\n                })            \n        }\n    }\n\n    setUserRole (role) {\n        this.setState({ user_type: role })\n    }\n\n    render () {\n        return (\n            <KeyboardAvoidingView style={styles.container} behavior=\"padding\" enabled>\n                <View style={{ width: '45%', marginBottom:20, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('teacher')}}>\n                        <Icon\n                            name='food-apple'\n                            size={80}\n                            color='#C93D1B'>\n                        </Icon>\n                        {/* <Text>Teacher</Text> */}\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('parent')}}>\n                        <Icon\n                            name='baby-buggy'\n                            size={80}\n                            color='#f8c43a'>\n                        </Icon>\n                        {/* <Text>Parent</Text> */}\n                    </TouchableHighlight>\n                </View>\n                <Text>{this.state.user_type} Sign Up</Text>\n                {this.state.errMessage === '' ?\n                    null \n                : <Text style={{ color: 'red' }}>\n                    {this.state.errMessage}\n                </Text>}\n\n                <TextInput\n                    placeholder=\"username\"\n                    style={styles.textInput}\n                    onChangeText={(username) => this.setState({ username })}\n                    value={this.state.username}\n                />\n                <TextInput\n                    secureTextEntry\n                    placeholder=\"password\"\n                    style={styles.textInput}\n                    onChangeText={(password) => this.setState({ password })}\n                    value={this.state.password}\n                />\n                <TextInput\n                    placeholder=\"Name\"\n                    style={styles.textInput}\n                    onChangeText={(name) => this.setState({ name })}\n                    value={this.state.name}\n                />\n                <TextInput\n                    placeholder=\"Email\"\n                    style={styles.textInput}\n                    onChangeText={(email) => this.setState({ email })}\n                    value={this.state.email}\n                />\n                \n                <View style={{ width: '90%', margin: 10, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={this.handleSignup.bind(this)}>\n                        <Text>Sign up</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={() => this.props.changeAuthState('signedout')}>\n                        <Text> Already have an account? Sign in here</Text>\n                    </TouchableHighlight>\n                </View>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    textInput: {\n        height: 40,\n        width: '90%',\n        borderColor: 'gray',\n        borderWidth: 1,\n        marginTop: 8\n    }\n})\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n//         ...bindActionCreators({ addCurrentUser, addUserType }, dispatch)\n//     }\n// }\n\n// function mapStateToProps(state) {\n//     return({\n//         user: state.user\n//     })\n// }\n\n// export default connect(mapStateToProps, mapDispatchToProps) (Signup)\nexport default Signup","import { combineReducers } from 'redux'\nimport parent from './parent'\nimport attendance from './attendance'\nimport inbox from './inbox'\n\nexport default combineReducers({\n    parent,\n    attendance,\n    inbox\n})","export default function parent(state = {\n    // first_name: '',\n    // last_name: '',\n    // id: '',\n    isConnected: true,\n    child_of_id: {\n        /*\n        {child_A_id}: {\n            first_name: \"\",\n            last_name: \"\",\n            class_id: SOME_ID,\n            profile_pic: \"\",\n            // teacher_ids: []\n        },\n        {child_B_id}: {\n            first_name: \"\",\n            last_name: \"\",\n            class_id: SOME_ID,\n            profile_pic: \"\"\n        }\n        */\n    },\n    med_requests: []\n    // teachers: {\n\n    // }\n}, action) {\n    switch (action.type) {\n        case 'SET_CONNECT_STATE': {\n            const { isConnected } = action\n            return {\n                ...state,\n                isConnected\n            }\n        }\n        case 'INITIALIZE_CHILDREN':\n            const { data } = action\n            data.forEach((child) => {\n                const { id, name, class_id, profile_picture, school_id, school_name } = child\n                state.child_of_id[id] = {\n                    name,\n                    class_id,\n                    profile_picture,\n                    school_id,\n                    school_name\n                }\n            })\n            return {\n                ...state\n            }\n\n        case 'MARK_PRESENT':\n            const { student_id } = action\n            state.child_of_id[student_id].present = true\n            return {\n                ...state\n            }\n\n        case 'GET_MED_REQUEST_SUCCESS': \n            const { med_requests } = action\n            return {\n                ...state,\n                med_requests\n            }\n        \n        case 'EDIT_PROFILE_PICTURE': {\n            const { student_id, image_url } = action\n            return {\n                ...state,\n                child_of_id: {\n                    ...state.child_of_id,\n                    [student_id]: {\n                        ...state.child_of_id[student_id],\n                        profile_picture: image_url\n                    }\n                }\n            }\n        }\n    \n        case 'CLEAR_STATE': {\n            return {\n                isConnected: true,\n                child_of_id: {},\n                med_requests: []\n            }\n        }\n\n        default:\n            return state\n    }\n}","export default function attendance(state = {\n    days: {\n        1: [ // index representing day of week\n            // ex. id_4, ...\n        ],\n        2: [],\n        3: [],\n        4: [],\n        5: []\n    },\n    attendance: {\n        /*\n        {id_4}: {\n            student_id\n            in_time: '',\n            out_time: '',\n            excuse_type: ''\n        }, {...}\n        */\n    }\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_ATTENDANCE':\n        // initialize attendance status every morning to get any absence excuse(s) of the day\n            return {\n                ...state,\n                days: {\n                    ...state.days,\n                    [action.day]: [...state.days[action.day], action.attendance_id]\n                },\n                attendance: {\n                    ...state.attendance,\n                    [action.attendance_id]: action.attendance_obj\n                }\n            }\n        default:\n            return state\n    }\n}","export default function inbox(state = {\n  current_conversation_id: '',\n  conversations_by_id: {\n    // { conversation_id }: {\n    //   most_recently_read_message_id: 'MESSAGE_ID'\n    //   messages: [\n    //     {\n    //       message_id,\n    //       message_text,\n    //       created_at,\n    //       read_at,\n    //       sender_id\n    //     }, {...}\n    //   ]\n    // }\n  }\n}, action) {\n  switch (action.type) {\n    // case 'SET_READ_RECEIPT':\n    //   const {most_recently_read_message_id} = action\n    //   return {\n    //     ...state,\n    //     most_recently_read_message_id\n    //   }\n    case 'SET_MESSAGE_DATA':\n      const newState = { ...state }\n      const { messages, most_recently_read_message_id, conversation_id } = action\n      newState.conversations_by_id[conversation_id] = {\n        messages, \n        most_recently_read_message_id\n      }\n      newState.current_conversation_id = conversation_id\n      return newState\n\n    case 'SET_CURRENT_CONVERSATION_ID':\n      return {\n        ...state,\n        current_conversation_id: action.conversation_id\n      }\n\n    case 'CLEAR_CURRENT_CONVERSATION_ID':\n      return {\n        ...state,\n        current_conversation_id: ''\n      }\n\n    default:\n      return state\n  }\n}","\nexport const initializeChildren = (data) => {\n    return {\n        type: 'INITIALIZE_CHILDREN',\n        data\n    }\n}\n\nexport const setReadReceipt = (most_recently_read_message_id) => {\n    return {\n        type: 'SET_READ_RECEIPT',\n        most_recently_read_message_id\n\n    }\n}\n\nexport const setMessageDataParent = (messages, most_recently_read_message_id, conversation_id) => {\n    return {\n        type: 'SET_MESSAGE_DATA',\n        messages,\n        most_recently_read_message_id,\n        conversation_id\n    }\n}\n\nexport const clearCurrentConversationIdParent = () => {\n    return {\n        type: 'CLEAR_CURRENT_CONVERSATION_ID'\n    }\n}\n\nexport const clearState = () => {\n    return {\n        type: 'CLEAR_STATE'\n    }\n}\n\nexport const getMedRequestSuccess = (med_requests) => {\n    return {\n        type: 'GET_MED_REQUEST_SUCCESS',\n        med_requests\n    }\n}\n\nexport const markPresent = (student_id) => {\n    return {\n        type: 'MARK_PRESENT',\n        student_id\n    }\n}\n\nexport const setConnectState = (isConnected) => {\n    return {\n        type: 'SET_CONNECT_STATE',\n        isConnected\n    }\n}\n\nexport const editProfilePicture = (student_id, image_url) => {\n    return {\n        type: 'EDIT_PROFILE_PICTURE',\n        student_id,\n        image_url\n    }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData } from '../util'\nimport Reloading from '../reloading'\n\nexport default class WellnessCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date());\n    }\n  }\n\n  async fetchData(child_id, date) {\n    console.log('WellnessCard / fetchData / date: ', date)\n    // const date = new Date(datetime.getTime())\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const wellnessData = await fetchData('wellness', child_id, start_date, end_date)\n    this.setState({\n      wellnessData,\n      isLoading: false\n    }) \n    if (wellnessData && wellnessData[start_date]) {\n      this.props.updateTitleTemp(wellnessData[start_date][0][1])\n    } else {\n      this.props.updateTitleTemp('')\n    }\n  }\n\n  render() {\n    const { wellnessData, isLoading} = this.state\n    const date = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-wellness.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>健康</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : wellnessData && wellnessData[date] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row' }}\n                  >\n                    <View style={{ flex: 1, justifyContent: 'center', paddingBottom: 5 }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1, justifyContent: 'center'  }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>體溫</Text>\n                    </View>\n                    <View style={{ flex: 2, justifyContent: 'center'  }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>今日狀況</Text>\n                    </View>\n                  </View>\n                  {wellnessData[date].map((record, index) => {\n                    return (\n                      <View\n                        key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[0]}</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center'  }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[1]}°</Text>\n                        </View>\n                        <View style={{ flex: 2, justifyContent: 'center'  }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[2]}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, TextInput, Image } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { formatDate, fetchData, beautifyDate } from '../util'\nimport Reloading from '../reloading'\n\nexport default class AppetiteCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      // rankings: ['Ok', 'Good', 'Awesome!'],\n      fruit_name: null,\n      isLoading: true,\n      breakfast: null,\n      fruit: null,\n      lunch: null,\n      snack: null,\n      // rating: {\n      //   'Awesome': '滿滿一碗',\n      //   'Good': '７/8分滿',\n      //   'Ok': '半碗',\n      //   'Poor': '胃口不佳'\n      // }\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const appetiteData = await fetchData('appetite', child_id, start_date, end_date)\n    this.denormalizeAppetiteData(appetiteData.data, date)\n  }\n\n  denormalizeAppetiteData(appetiteData) {\n    const { date } = this.props\n    const today = formatDate(date)\n    if (appetiteData && appetiteData[today]){\n      const { fruit_name, breakfast_rating, fruit_rating, lunch_rating, snack_rating } = appetiteData[today]\n      // console.log('fruit_name: ', fruit_name)\n      const breakfast = this.parseData(breakfast_rating)\n      const fruit = this.parseData(fruit_rating)\n      const lunch = this.parseData(lunch_rating)\n      const snack = this.parseData(snack_rating)\n\n      this.setState({\n        fruit_name,\n        breakfast,\n        fruit,\n        lunch,\n        snack,\n        appetiteData,\n        isLoading: false\n      })\n    } else {\n      this.setState({\n      appetiteData,\n      isLoading: false\n    })\n    }\n  }\n\n  parseData(data_string) {\n    const rating = data_string.slice(0, -1)\n    const water_drunk = parseInt(data_string.slice(-1))\n    // const rating_icons = {\n    //   'Awesome': require('../../assets/icon-appetite-awesome.png'),\n    //   'Good': require('../../assets/icon-appetite-good.png'),\n    //   'Ok': require('../../assets/icon-appetite-ok.png')\n    // }\n    return {\n      // rating_icon: rating_icons[rating],\n      rating,\n      water_drunk\n    }\n  }\n\n  getEmoji() {\n\n  }\n\n  getWaterDrinkingStatus() {\n    \n  }\n\n  render() {\n    const { appetiteData, isLoading, breakfast, fruit, lunch, snack, rating, fruit_name } = this.state\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-appetite.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>飲食</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : appetiteData && appetiteData[today] ? \n                <View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {breakfast ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>早餐</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{breakfast.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {breakfast.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                  {fruit ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>{(fruit_name !== '水果' && `水果餐: ${fruit_name}`) || '水果'}</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{fruit.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {fruit.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n                  </View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {lunch ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>午餐</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{lunch.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {lunch.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n\n                    </View>\n                    : null\n                  }\n\n                  {snack ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>點心</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{snack.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {snack.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                </View>\n                </View>\n            : <View style={{ flex: 1, paddingVertical: 8 }}>\n                <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n              </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData, formatTime } from '../util';\nimport Reloading from '../reloading';\n\nexport default class MilkCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const milkIntakeData = await fetchData('milkintake', child_id, start_date, end_date)\n    this.setState({\n      milkIntakeData,\n      isLoading: false\n    })\n  }\n\n  render() {\n    const { milkIntakeData, isLoading } = this.state\n    // console.log('milkIntakeData: ', milkIntakeData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-milk.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>喝奶</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n            : milkIntakeData && milkIntakeData[today] ?\n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row', paddingBottom: 5 }}\n                  >\n                    <View style={{ width: '25%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ width: '28%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>量</Text>\n                    </View>\n                    <View style={{ width: '28%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>乳品</Text>\n                    </View>\n                    <View style={{ width: '19%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>老師</Text>\n                    </View>\n                  </View>\n                  {milkIntakeData[today].map((record, index) => {\n                    const { time, amount, milk_type, teacher_name } = record\n                    return (\n                      <View key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ width: '25%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ width: '28%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{amount} c.c.</Text>\n                        </View>\n                        <View style={{ width: '28%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{milk_type}</Text>\n                        </View>\n                        <View style={{ width: '19%' }}>\n                          <Text style={{fontSize: 20, textAlign: 'center', color: '#404040' }}>{teacher_name !== null && teacher_name.slice(1)}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n              : <View style={{ flex: 1, paddingVertical: 8  }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading'\n\nexport default class SleepCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const sleepData = await fetchData('sleep', child_id, start_date, end_date)\n    this.setState({\n      sleepData,\n      isLoading: false\n    })\n  }\n\n  render() {\n    const { sleepData, isLoading } = this.state\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-sleep.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>睡眠</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : sleepData && sleepData[today] ?\n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row', paddingBottom: 5 }}\n                  >\n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>從</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                    </View>\n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>到</Text>\n                    </View>\n                  </View>\n                  {sleepData[today].map((record, index) => {\n                    const { sleep_time, wake_time, hours, minutes } = record\n                    return (\n                      <View\n                        key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{sleep_time}</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center'}}>\n                          <Text style={{ fontSize: 15, textAlign: 'center', color: '#404040' }}>{hours}H {minutes}M</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{wake_time}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading';\n\nexport default class RestroomCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const diaperData = await fetchData('diaper', child_id, start_date, end_date)\n    this.setState({\n      isLoading: false,\n      diaperData\n    })\n  }\n\n  render() {\n    const { isLoading, diaperData } = this.state\n    // console.log('diaperData: ', diaperData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-diaper.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>如廁</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : diaperData && diaperData[today] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View style={{ flexDirection: 'row', paddingBottom: 5 }}>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>排泄</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>使用</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>狀況</Text>\n                    </View>\n                  </View>\n                  {diaperData[today].map((record, index) => {\n                    const { time, cloth_diaper, pee_or_poo, condition, teacher_id } = record\n                    return (\n                      <View key={index} style={{ flexDirection: 'row' }}>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{pee_or_poo}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{cloth_diaper ? '學習褲' : '尿布'}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{condition}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React, { useEffect, useState } from 'react'\nimport { View, Text, Image, TextInput, TouchableOpacity, Alert } from 'react-native'\nimport { Card, Body } from 'native-base'\nimport { formatDate, fetchData, post, beautifyTime, formatTime, get } from '../util'\nimport Reloading from '../reloading'\n\nconst MessageCard = (props) => {\n  const [state, setState] = useState({\n    child_id: props.child_id,\n    isLoading: true,\n    data_available: false,\n    items_to_bring: [],\n    activities: [],\n    text: '',\n    teacher_id: '',\n    message_id: null,\n    message_for_teacher: '',\n    isConnected: true,\n    scrollHeight: '100%',\n    message_read: false\n  })\n\n  useEffect(() => {\n    const { date } = props\n    fetchMessageData(state.child_id, new Date(date.getTime()))\n  }, [])\n\n  // componentDidUpdate(prevProps) {\n  //   if (props.date !== prevProps.date) {\n  //     setState({ isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n  //     fetchMessageData(props.child_id, new Date(props.date.getTime()));\n  //   } else if (props.child_id !== prevProps.child_id) {\n  //     setState({ isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n  //     fetchMessageData(props.child_id, new Date());\n  //   } else if (props.isConnected != prevProps.isConnected) {\n  //     setState({\n  //       isConnected: props.isConnected\n  //     })\n  //   }\n  // }\n\n\n  useEffect(() => {\n    setState({ ...state, isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n    fetchMessageData(props.child_id, new Date(props.date.getTime()));\n  }, [props.date])\n\n  useEffect(() => {\n    setState({ isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n    fetchMessageData(props.child_id, new Date());\n  }, [props.child_id])\n\n\n  const setScrollHeight = (scrollHeight) => {\n    setState({ ...state, scrollHeight })\n  }\n\n  const fetchMessageData = async(child_id, propDate) => {\n    console.log(`fetchMessageData / propDate: ${propDate}`)\n    let date = new Date(propDate.getTime())\n    if (date.getHours() < 17) {\n      setState({\n        ...state,\n        isLoading: false,\n        message_for_teacher: '',\n        data_available: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchData('message', child_id, start_date, end_date)\n    if (messageData.data === undefined || messageData.data[start_date] === undefined) {\n      setState({\n        ...state,\n        isLoading: false,\n        message_for_teacher: '',\n        data_available: false\n      })\n      return\n    }\n    denormalize(messageData.data[start_date])\n  }\n\n  const denormalize = (message_data) => {\n    const items_list = ['母奶粉', '尿布', '水壺', '衣物']\n    const activities_list = ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言']\n    const items_to_bring = []\n    const activities = []\n    for (var i = 0; i < message_data.items_to_bring.length-1; i++) {\n      if (message_data.items_to_bring[i]) {\n        items_to_bring.push(items_list[i])\n      }\n    }\n\n    if (message_data.items_to_bring[message_data.items_to_bring.length-1]) {\n      items_to_bring.push(message_data.other_item)\n    }\n\n    for (var i = 0; i < message_data.activities.length - 1; i++) {\n      if (message_data.activities[i]) {\n        activities.push(activities_list[i])\n      }\n    }\n\n    if (message_data.activities[message_data.activities.length - 1]) {\n      activities.push(message_data.other_activity)\n    }\n\n    setState({\n      ...state,\n      isLoading: false,\n      data_available: true,\n      message_id: message_data.message_id,\n      items_to_bring,\n      activities,\n      text: message_data.text,\n      teacher_id: message_data.teacher_id,\n      message_for_teacher: message_data.message_for_teacher,\n      message_read: message_data.message_read\n    })\n  }\n\n  const sendMessage = async() => {\n    const { class_id, parent_id, date } = props\n    const { message_for_teacher, message_id, isConnected } = state\n    if (!editable() || message_for_teacher === '') return\n    // if (!isConnected) {\n    //   alert('網路連不到! 請稍後再試試看')\n    //   return\n    // }\n\n    // const now = new Date()\n    const body = {\n      student_id: props.child_id,\n      parent_id,\n      message_id,\n      message_for_teacher,\n      timestamp: formatDate(date) + ' ' + formatTime(date)\n    }\n    const response = await post(`/message/class/${class_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry 傳送訊息時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    alert(`訊息傳達成功！`)\n    fetchMessageData(state.child_id, new Date(date.getTime()))\n  }\n\n  const editable = () => {\n    const { date } = props\n    // console.log('date: ', date)\n    let threshold = new Date()\n    if (threshold.getDay() === 6) { // if today is saturday\n      threshold.setDate(threshold.getDate() - 1)\n    } else if (threshold.getDay() === 0) { // if today is sunday\n      threshold.setDate(threshold.getDate() - 2)\n    }\n    threshold.setHours(17, 0, 0, 0)\n    return date.getTime() >= threshold.getTime() || before4am()\n  }\n\n  const before4am = () => {\n    const { date } = props\n    let today = new Date()\n    let prev_day = new Date() \n    if (today.getDay() === 1) { // if today is monday, prev_day is last friday\n      prev_day.setDate(prev_day.getDate() - 3)\n      return date.toDateString() === prev_day.toDateString() && today.getHours() < 4\n    } else if (today.getDay() > 1 && today.getDay() < 6) { // today is [ tues, fri ]\n      prev_day.setDate(prev_day.getDate() - 1)\n      return date.toDateString() === prev_day.toDateString() && today.getHours() < 4\n    }\n    return false\n  }\n\n  const showMessageForTeacher = () => {\n    const { date } = props\n    let today = new Date()\n    today.setHours(0,0,0,1)\n\n    if (date.toDateString() === today.toDateString() && editable()) {\n      return true\n    } else if (date < today) {\n      return true\n    }\n    return false\n  }\n\n    const { items_to_bring, activities, text, teacher_id, isLoading, data_available, message_for_teacher, scrollHeight, message_read } = state\n    const { date } = props\n    // console.log(date.toDateString())\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, alignItems: 'center', justifyContent: 'center'}}>\n            <Image\n              source={require('../../assets/icon-message.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>訊息</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : data_available ? \n                <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                  <View style={{ padding: 5, marginBottom: 6, backgroundColor: '#F5F5F5' }}>\n                    <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>愛的小語</Text>\n                    <Text style={{ fontSize: 25, paddingVertical: 7 }}>{text}</Text>\n                  </View>\n                  <View\n                    style={{ flexDirection: 'row' }}\n                  >\n                    <View style={{ flex: 1, padding: 5, backgroundColor: '#F5F5F5', marginRight: 3 }}>\n                      <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>家長準備</Text>\n                      {items_to_bring.length ?\n                        <View style={{ alignItems: 'center', paddingVertical: 7}}>\n                          {items_to_bring.map((item, index) => {\n                            return(\n                              <Text \n                                key={index} \n                                style={{ \n                                  padding: 5, \n                                  backgroundColor: 'lightgrey', \n                                  marginBottom: 3,\n                                  fontSize: 25\n                                }}\n                              >\n                                {item}\n                              </Text>\n                            )\n                          })}\n                        </View>\n                        : null\n                      }\n                    </View>\n                    <View style={{ flex: 1, padding: 5, backgroundColor: '#F5F5F5', marginLeft: 3 }}>\n                      <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>今日活動</Text>\n                      {activities.length ?\n                        <View style={{ alignItems: 'center', paddingVertical: 7}}>\n                          {activities.map((activity, index) => {\n                            return(\n                              <Text \n                                key={index}\n                                style={{ \n                                  padding: 5, \n                                  backgroundColor: 'lightgrey', \n                                  marginBottom: 3,\n                                  fontSize: 25\n                                }}\n                              >\n                                {activity}\n                              </Text>\n                            )\n                          })}\n                        </View>\n                        : null\n                      }\n                    </View>\n                  </View>\n\n                  {/* message for teacher */}\n                  <View style={{ backgroundColor: '#ffddb7', marginTop: 5}}>\n                    <View style={{ padding: 5, flexDirection: 'row', justifyContent: 'space-between' }}>\n                      <Text style={{ fontSize: 15 }}>給老師的話</Text>\n                      {message_for_teacher !== '' && <Text style={{ fontSize: 15 }}>{message_read ? '已讀' : '未讀'}</Text>}\n                    </View>\n                    \n                    <TextInput\n                      editable={editable()}\n                      style={{\n                        // marginHorizontal: 15,\n                        height: scrollHeight,\n                        justifyContent: 'center',\n                        backgroundColor: 'rgba(255,255,255,0.7)',\n                        paddingTop: 10,\n                        padding: 10,\n                        fontSize: 25\n                      }}\n                      // textAlignVertical={\"top\"}\n                      placeholder={editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'}\n                      scrollEnabled={false}\n                      multiline={true}\n                      // blurOnSubmit={true}\n                      // maxLength={200}\n                      value={message_for_teacher}\n                      onChangeText={(message_for_teacher) => setState({ ...state, message_for_teacher })}\n                      onChange={(e) => setScrollHeight(e.target.scrollHeight)}\n                      onLayout={(event) => {\n                        const { scrollHeight } = event.nativeEvent.target\n                        setState({\n                          ...state,\n                          scrollHeight\n                        })\n                      }}\n                    />\n                    <TouchableOpacity\n                      disabled={!editable()}\n                      style={{ padding: 10, justifyContent: 'center' }}\n                      onPress={() => sendMessage()}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>送出</Text>\n                    </TouchableOpacity>\n                  </View>\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                  {/* message for teacher */}\n                  {showMessageForTeacher() && \n                  <View style={{ backgroundColor: '#ffddb7', marginTop: 5}}>\n                    <View style={{ padding: 5, flexDirection: 'row', justifyContent: 'space-between' }}>\n                      <Text style={{ fontSize: 15 }}>給老師的話</Text>\n                      {message_for_teacher !== '' && <Text style={{ fontSize: 15 }}>{message_read ? '已讀' : '未讀'}</Text>}\n                    </View>\n                    \n                    <TextInput\n                      editable={editable()}\n                      style={{\n                        // marginHorizontal: 15,\n                        height: scrollHeight,\n                        justifyContent: 'center',\n                        backgroundColor: 'rgba(255,255,255,0.7)',\n                        paddingTop: 10,\n                        padding: 10,\n                        fontSize: 25\n                      }}\n                      // textAlignVertical={\"top\"}\n                      placeholder={editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'}\n                      scrollEnabled={false}\n                      multiline={true}\n                      // blurOnSubmit={true}\n                      // maxLength={200}\n                      value={message_for_teacher}\n                      onChangeText={(message_for_teacher) => setState({ ...state, message_for_teacher })}\n                      onChange={(e) => setScrollHeight(e.target.scrollHeight)}\n                    />\n                    <TouchableOpacity\n                      disabled={!editable()}\n                      style={{ padding: 10, justifyContent: 'center' }}\n                      onPress={() => sendMessage()}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>送出</Text>\n                    </TouchableOpacity>\n                  </View>\n                  }\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n}\n\nexport default MessageCard","import React from 'react'\nimport { View, TouchableOpacity, Image, Text, TouchableHighlight, Platform} from 'react-native'\nimport { Card } from 'native-base'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { post } from '../util';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux'\nimport { editProfilePicture } from '../../redux/parent/actions/index'\n\nclass ParentHomeTitle extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      temperature: '',\n      borderRadius: 0\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync();\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to make this work!');\n      }\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.temperature !== prevProps.temperature) {\n      this.setState({ temperature: this.props.temperature })\n    }\n  }\n\n  _pickImage = async (student_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { uri } = result\n        this.getProfilePictureURL(uri.replace(/^data:image\\/\\w+;base64,/, \"\"), student_id, url)\n      }\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, student_id, url) {\n    const { student_name, student } = this.props\n    const body = {\n      image: image,\n      url: url,\n      path: `${student.school_name}/profile_picture_${student_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await post(`/student/${student_id}/profile-picture`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${student_name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.editProfilePicture(student_id, data.image_url)\n  }\n\n  render() {\n    const { temperature, borderRadius } = this.state\n    const { student_id, student, student_name } = this.props\n    return (\n      <View style={{ width: '97%', marginLeft: '3%', alignSelf: 'flex-start', flexDirection: 'row'}}>\n        <Card style={{ flexDirection: 'row', width: '85%', alignItems: 'center', paddingVertical: 15 }}>\n          <TouchableHighlight \n            style={{\n              flex: 1,\n              width: '50%',\n              alignItems: 'center'\n            }}\n            onLayout={(event) => {\n              var {width} = event.nativeEvent.layout\n              this.setState({ borderRadius: width/2})\n            }}\n            onPress={() => this._pickImage(student_id, student.profile_picture)}\n          >\n            <Image\n                source={\n                    student.profile_picture === '' ?\n                        require('../../assets/icon-thumbnail.png')\n                        : { uri: student.profile_picture }\n                    }\n                style={\n                  student.profile_picture === '' ?\n                    { width: 130, height: 130 }\n                    : { width: 130, height: 130, borderRadius: 65 }\n                }\n                \n            />\n          </TouchableHighlight>\n          <View style={{ height: '90%', width: '50%', paddingLeft: 10 }}>\n            <View style={{ flex: 1}}>\n              <View style={{ height: '50%', alignItems: 'flex-start', justifyContent: 'flex-end' }}>\n                  <Text style={{ fontSize: 40 }}>{student_name}</Text>\n              </View>\n              <View style={{ flex: 1, flexDirection: 'row', paddingTop: 5 }}>\n                <View style={{ flex: 1, height: '100%', backgroundColor: '#F5F5F5', justifyContent: 'center' }}>\n                  <Text style={{ padding: 5 }}>早上體溫</Text>\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    {temperature === '' ? '未量' : `${temperature}°`}\n                  </Text>\n                </View>\n                <TouchableOpacity\n                  style={{ backgroundColor: '#F5F5F5', alignItems: 'center', justifyContent: 'center' }}\n                  onPress={() => this.props.viewQRCode()}\n                >\n                  <Image\n                    source={require('../../assets/icon-qr.png')}\n                    style={{\n                        width: 65,\n                        height: 65,\n                    }}\n                  />\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Card>\n        <Card style={{ width: '20%'}}>\n          <TouchableOpacity\n            style={{ flex: 1, justifyContent: 'center', paddingLeft: 5 }}\n            underlayColor='#F5F5F5'\n            onPress={() => this.props.selectOtherChildProfile()}\n          >\n            <Image\n              source={require('../../assets/icon-babies.png')}\n              style={{\n                width: 43,\n                height: 43,\n                opacity: 0.6\n              }}\n            />\n          </TouchableOpacity>\n        </Card>\n      </View>\n    )\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      editProfilePicture\n    }, dispatch)\n  }\n}\n\nexport default connect(null, mapDispatchToProps) (ParentHomeTitle)","import React, {useState, forwardRef, useImperativeHandle} from 'react'\nimport { Animated, Dimensions, Image, TouchableHighlight } from 'react-native'\n\nconst ProfileSelector = forwardRef((props, ref) => {\n  // constructor(props) {\n  //   super(props)\n  //   this.state = {\n  //     showSelector: false,\n  //     SlideInRight: new Animated.Value(0)\n  //   }\n  // }\n\n  const [state, setState] = useState({\n    showSelector: false,\n    SlideInRight: new Animated.Value(0)\n  })\n\n  useImperativeHandle(ref, () => ({    \n    slideIn() {\n      setState({\n        ...state,\n        showSelector: true\n      })\n\n      Animated.timing(\n        state.SlideInRight,\n        {\n            toValue: 1,\n            duration: 200,\n            useNativeDriver: true\n        }\n      ).start()\n    }\n  }));\n\n  // slideIn() {\n  //   this.setState({\n  //     showSelector: true\n  //   } , () => {\n  //     Animated.timing(\n  //       this.state.SlideInRight,\n  //       {\n  //           toValue: 1,\n  //           duration: 200,\n  //           useNativeDriver: true\n  //       }\n  //     ).start()\n  //   })\n  // }\n\n  const onSelectStudent = (student_id) => {\n    props.onSelectStudent(student_id)\n    Animated.timing(\n      state.SlideInRight,\n      {\n          toValue: 0,\n          duration: 500,\n          useNativeDriver: true\n      }\n    ).start()\n    setState({\n      ...state,\n      showSelector: false\n    })\n  }\n\n    const windowWidth = Dimensions.get('window').width\n    const { showSelector, SlideInRight } = state\n    const { student_of_id } = props\n    if (!showSelector) {\n      return null\n    }\n    return (\n      <Animated.View\n        style={{\n          zIndex: 2,\n          width: '100%',\n          height: '100%',\n          position: 'absolute',\n          backgroundColor: 'rgba(0,0,0,0.7)',\n          transform: [\n            {\n                translateX: SlideInRight.interpolate({\n                    inputRange: [0,1],\n                    outputRange: [windowWidth, 0]\n                })\n            }\n          ],\n          alignItems: 'center',\n          // justifyContent: 'space-evenly'\n        }}\n      >\n        {Object.keys(student_of_id).map((student_id) => {\n          return (\n            <TouchableHighlight \n              key={student_id}\n              style={{ marginTop: windowWidth/4 }}\n              onPress={() => onSelectStudent(student_id)}\n              underlayColor='transparent'\n            >\n              <Image\n                    source={\n                      student_of_id[student_id].profile_picture === '' ?\n                        require('../../assets/icon-thumbnail.png')\n                        : { uri: student_of_id[student_id].profile_picture }\n                      }\n                    style={{\n                        width: 160,\n                        height: 160,\n                        borderRadius: 80,\n                        backgroundColor: 'rgba(255,255,255,0.6)'\n                    }}\n                />\n            </TouchableHighlight>\n          )\n        })}\n      </Animated.View>\n    )\n})\n\nexport default ProfileSelector","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert, Dimensions } from 'react-native'\nimport QRCode from 'react-native-qrcode-svg'\nimport Reloading from '../reloading'\nimport { get } from '../util'\nimport { connect } from 'react-redux'\n\nconst { width, height } = Dimensions.get('window')\n\nclass QRPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            data: ''\n        }\n    }\n\n    async componentDidMount() {\n        const { parent_id, isConnected } = this.props\n        const response = await get(`/user/${parent_id}/qrcode`)\n        const { success, statusCode, message, data } = response\n\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n\n        if (!success) {\n            alert(`Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n            return \n        }\n\n        this.setState({\n            isLoading: false,\n            data\n        })\n    }\n    \n    render() {\n        return (\n            <View\n                style={{\n                    height,\n                    zIndex: 2,\n                    width: '100%',\n                    // height: '100%',\n                    position: 'absolute',\n                    backgroundColor: 'white',\n                    justifyContent: 'space-evenly',\n                    alignItems: 'center'\n                }}\n            >\n                <View style={{ flex: 1 }}>\n                    <View style={{ flex: 3, justifyContent: 'center', alignItems: 'center' }}>\n                        {this.state.isLoading ? \n                            <Reloading />\n                            :  <QRCode\n                                value={this.state.data}\n                                size={300}\n                                />\n                        }\n                    </View>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{ padding: 15, backgroundColor: '#b5e9e9' }}\n                            onPress={() => this.props.hideQRCode()}\n                        >\n                            <Text style={{ fontSize: 30 }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (QRPage)","import React from 'react'\nimport { View, Text, TextInput, Image, TouchableOpacity, ScrollView, Alert } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { formatDate, fetchData, beautifyTime } from '../util'\nimport Reloading from '../reloading'\nimport { connect } from 'react-redux'\nimport { bindActionCreators} from 'redux'\nimport { getMedRequestSuccess } from '../../redux/parent/actions/index'\nimport ENV from '../../variables'\n\nclass MedicationRequestCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true,\n      med_requests: [],\n      // date: new Date()\n    }\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      // const { date } = this.props\n      // console.log('this.props.date !== prevProps.date: ', this.props.date.toDateString())\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      // console.log('this.props.child_id !== prevProps.child_id')\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date());\n    }\n  }\n\n  afterFive() {\n    const { date } = this.props\n    return date.getHours() >= 17\n  }\n\n  async fetchData(student_id, date) {\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/student/${student_id}?date=${formatDate(date)}`\n    await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n          const {data} = resJson\n          const med_requests = this.get_todays_requests(data, date)\n          this.setState({\n            med_requests\n          })\n          this.setState({ isLoading: false })\n      })\n      .catch(err => {\n          alert('Sorry 取得今日托藥單時電腦出狀況了！請與工程師聯繫: error occurred when fetching medication request')\n      })\n  }\n\n  get_todays_requests(object_array, date) {\n    // const { date } = this.props\n    let med_requests = []\n    for (var i = 0; i < object_array.length; i++) {\n      const timestamp = new Date(object_array[i].title)\n      // console.log('timestamp: ', timestamp.toDateString())\n      // console.log('date: ', date.toDateString())\n      if (timestamp.toDateString() === (date).toDateString()) {\n        med_requests = object_array[i].data\n        for(var j = 0; j < med_requests.length; j++) {\n          med_requests[j].timestamp = new Date(med_requests[j].timestamp)\n        }\n        break\n      }\n    }\n    return med_requests\n  }\n\n  render() {\n    const { med_requests } = this.state\n    const { isLoading } = this.state\n    // console.log('med_requests: ', med_requests)\n    // console.log('med/this.props.date: ', this.props.date.toDateString())\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-medrequest.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>今日藥單</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : med_requests.length ? \n                <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  <ScrollView horizontal contentContainerStyle={{ paddingBottom: 10}}>\n                  {med_requests.map((request, index) => {\n                    return (\n                      <TouchableOpacity \n                        key={request.id}\n                        style={{\n                          padding: 10,\n                          backgroundColor: '#F5F5F5', \n                          marginRight: 15, \n                          justifyContent: 'center'\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.props.viewMedRequest(index, med_requests)}\n                      >\n                        <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                          {this.afterFive() && request.administered ? \n                            <Image\n                              source={require('../../assets/icon-checked.png')}\n                              style={{\n                                  width: 20,\n                                  height: 20\n                              }}\n                            />\n                            : null\n                          }\n                          <Text style={{ alignSelf: 'center', fontSize: 25, color: 'rgba(0,0,0,0.8)' }}>{beautifyTime(request.timestamp)}</Text>\n                        </View>\n                      </TouchableOpacity>\n                    )\n                  })}\n                  </ScrollView>\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    med_requests: state.parent.med_requests\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({getMedRequestSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (MedicationRequestCard)","import React, { useEffect, useState, forwardRef, useImperativeHandle, useCallback } from 'react'\nimport { View, Text, Image, TextInput, TouchableOpacity, Alert } from 'react-native'\nimport { Card, Body } from 'native-base'\nimport { formatDate, fetchData, post, beautifyTime, formatTime } from '../util'\nimport Reloading from '../reloading'\nimport TimeModal from './timemodal'\nimport { debounce } from 'lodash'\n\nconst MorningReminderCard = forwardRef((props, ref) => {\n  const [state, setState] = useState({\n        // present: false,\n        morning_reminder_id: null,\n        text: '',\n        reminder_read: false,\n        isConnected: true,\n        // scrollHeight: '100%',\n        milk_timestamp: new Date(),\n        diaper_timestamp: new Date(),\n        milk_amount: '',\n        diaper_type: '小便',\n        showDateTimeModal: false,\n        showDateTimeModalType: '',\n        includeMilkIntake: false,\n        includeDiaper: false\n  })\n\n  const [isLoading, setIsLoading] = useState(true)\n  const [scrollHeight, setScrollHeight] = useState('100%')\n\n  // const onSendMessageDelay = useCallback(debounce(sendMessage, 2000), [])\n\n  useImperativeHandle(ref, () => ({    \n    selectDatetimeConfirm(datetime) {\n      const { showDateTimeModalType } = state\n      if ( showDateTimeModalType === 'milkintake') {\n        setState({\n          ...state,\n          milk_timestamp: datetime,\n          // showDateTimeModal: false\n        })\n      } else if (showDateTimeModalType === 'diaper') {\n        setState({\n          ...state,\n          diaper_timestamp: datetime,\n          // showDateTimeModal: false\n        })\n      }\n    }\n  }));\n\n  useEffect(() => {\n    const { date } = props\n    fetchMorningRecordData(props.student_id, new Date(date.getTime()))\n  }, [])\n\n//   useEffect(() => {\n//     const { date } = props\n//     fetchMorningRecordData(props.student_id, new Date(date.getTime()))\n// }, [props.date, props.student_id])\n\n\n  // componentDidUpdate(prevProps) {\n  //   if (this.props.date !== prevProps.date) {\n  //     // console.log('this.props.date !== prevProps.date')\n  //     this.setState({ isLoading: true, text: '', scrollHeight: '100%', includeMilkIntake: false, milk_timestamp: new Date(), milk_amount: '', \n  //       includeDiaper: false, diaper_timestamp: new Date(), diaper_type: '小便' })\n  //     fetchMorningRecordData(this.props.child_id, new Date(this.props.date.getTime()));\n  //   } else if (this.props.child_id !== prevProps.child_id) {\n  //     this.setState({ isLoading: true, text: '', scrollHeight: '100%', includeMilkIntake: false, milk_timestamp: new Date(), milk_amount: '', \n  //       includeDiaper: false, diaper_timestamp: new Date(), diaper_type: '小便' })\n  //     fetchMorningRecordData(this.props.child_id, new Date());\n  //   // } else if (this.props.present !== prevProps.present) {\n  //   //     this.setState({ present: this.props.present })\n  //   } else if (this.props.isConnected != prevProps.isConnected) {\n  //     this.setState({\n  //       isConnected: this.props.isConnected\n  //     })\n  //   }\n  // }\n\n  useEffect(() => {\n    setState({\n      ...state,\n      text: '',\n      includeMilkIntake: false, \n      milk_timestamp: new Date(), \n      milk_amount: '', \n      includeDiaper: false, \n      diaper_timestamp: new Date(), \n      diaper_type: '小便'\n    })\n    setIsLoading(true)\n    setScrollHeight('100%')\n    fetchMorningRecordData(props.student_id, new Date(props.date.getTime()));\n  }, [props.date])\n\n  useEffect(() => {\n    setState({ \n      ...state,\n      text: '',\n      includeMilkIntake: false, \n      milk_timestamp: new Date(), \n      milk_amount: '', \n      includeDiaper: false, \n      diaper_timestamp: new Date(), \n      diaper_type: '小便' \n    })\n    setIsLoading(true)\n    setScrollHeight('100%')\n    fetchMorningRecordData(props.student_id, new Date());\n  }, [props.student_id])\n\n\n\n  // const setScrollHeight = (scrollHeight) => {\n  //   // console.log('scrollHeight: ', scrollHeight)\n  //   setState({\n  //     ...state,\n  //     scrollHeight\n  //   })\n  // }\n\n  const fetchMorningRecordData = async(child_id, date) => {\n    // console.log(`fetchMorningRecordData / child_id: ${child_id} / date: ${date}`)\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchData('morningreminder', child_id, start_date, end_date)\n    // console.log('messageData: ', messageData)\n    if (messageData.data === undefined || messageData.data[start_date] === undefined) {\n      setState({\n        ...state,\n        morning_reminder_id: null,\n        text: '',\n        reminder_read: false\n      })\n      setIsLoading(false)\n      return\n    }\n    setState({\n      ...state,\n      morning_reminder_id: messageData.data[start_date].morning_reminder_id,\n      text: messageData.data[start_date].text,\n      reminder_read: messageData.data[start_date].reminder_read\n    })\n    setIsLoading(false)\n  }\n\n  const sendMessage = async() => {\n    console.log('sendMessage')\n    setIsLoading(true)\n    const { class_id, date, parent_id } = props\n    const { text, morning_reminder_id, isConnected, \n      includeMilkIntake, milk_timestamp, milk_amount, includeDiaper, diaper_timestamp, diaper_type } = state\n    if (!editable() || (text === '' && !includeMilkIntake && !includeDiaper)) return\n    // if (!isConnected) {\n    //   alert('網路連不到! 請稍後再試試看')\n    //   return\n    // }\n\n    let reminder = text\n    if(includeDiaper) {\n      reminder = `如廁: ${beautifyTime(diaper_timestamp)} ${diaper_type}\\n` + reminder\n    }\n    if (includeMilkIntake) {\n      reminder = `餵奶: ${beautifyTime(milk_timestamp)} ${milk_amount} c.c.\\n` + reminder\n    }\n\n    const body = {\n        morning_reminder_id,\n        student_id: props.student_id,\n        parent_id,\n        timestamp: formatDate(date) + ' ' + formatTime(date),\n        text: reminder\n    }\n    const response = await post(`/morningreminder/class/${class_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry 傳送訊息時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    alert(`訊息傳達成功！`)\n    setState({\n      ...state,\n      includeMilkIntake: false,\n      milk_timestamp: new Date(),\n      milk_amount: '',\n      includeDiaper: false,\n      diaper_timestamp: new Date(),\n      diaper_type: '小便',\n      morning_reminder_id: ''\n    })\n\n    fetchMorningRecordData(props.student_id, new Date(props.date))\n  }\n\n  const editable = () => {\n    const { date } = props\n    const threshold = new Date()\n    threshold.setHours(17, 0, 0)\n    return (date.toDateString() === (new Date).toDateString() && new Date() < threshold) || (date.toDateString() !== (new Date).toDateString() && date > (new Date()))\n    // return true\n  }\n\n  // const selectDatetimeConfirm = (datetime) => {\n  //   const { showDateTimeModalType } = state\n  //   if ( showDateTimeModalType === 'milkintake') {\n  //     setState({\n  //       ...state,\n  //       milk_timestamp: datetime,\n  //       // showDateTimeModal: false\n  //     })\n  //   } else if (showDateTimeModalType === 'diaper') {\n  //     setState({\n  //       ...state,\n  //       diaper_timestamp: datetime,\n  //       // showDateTimeModal: false\n  //     })\n  //   }\n  // }\n\n  const { text, morning_reminder_id, reminder_read, \n    milk_timestamp, milk_amount, diaper_timestamp, diaper_type, showDateTimeModal, includeMilkIntake, includeDiaper } = state\n  // console.log('this.state: ', this.state)\n  return (\n    <Card style={{ width: '93%' }}>\n      {/* {showDateTimeModal &&\n        <TimeModal\n          start_date={new Date()}\n          datetime_type={'time'}\n          hideModal={() => this.setState({ ...state, showDateTimeModal: false })}\n          selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n          minDatetime={null}\n          maxDatetime={null}\n          minTime={null}\n          maxTime={null}\n        />\n      } */}\n      <View style={{ flex: 1, flexDirection: 'row' }}>\n        <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n          <Image\n            source={require('../../assets/icon-morningreminder.png')}\n            style={{\n                width: 48,\n                height: 48\n            }}\n          />\n        </View>\n        <View style={{ flex: 1 }}>\n          <View style={{ paddingTop: 8, flexDirection: 'row', justifyContent: 'space-between', paddingRight: 8 }}>\n            <Text style={{ fontSize: 20 }}>愛的叮嚀</Text>\n            {text !== '' && <Text style={{ fontSize: 20 }}>{reminder_read ? '已讀' : '未讀'}</Text>}\n          </View>\n          <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n              {/* milk */}\n              <View style={{ flexDirection: 'row', alignItems: 'center', backgroundColor: includeMilkIntake ? '#dcf3d0' : 'transparent' }}>\n                <TouchableOpacity\n                  // disabled={true}\n                  onPress={() => {\n                    if (!editable()) return\n                    setState({\n                      ...state,\n                      includeMilkIntake: !includeMilkIntake\n                    })\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                    <View\n                      style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                    >\n                      <View \n                        style={{\n                          width: 16,\n                          height: 16,\n                          borderRadius: 8,\n                          backgroundColor: includeMilkIntake ? '#00c07f' : 'white'\n                        }}\n                      >\n                      </View>\n                    </View>\n                    <Text style={{ fontSize: 20, marginLeft: 10, alignSelf: 'center' }}>餵奶: </Text>\n                  </View>\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                  style={{ justifyContent: 'center', alignItems: 'center', padding: 10 }}\n                  onPress={() => {\n                    if (!editable()) return\n                    setState({\n                      ...state,\n                      showDateTimeModalType: 'milkintake',\n                      // showDateTimeModal: true,\n                      includeMilkIntake: true\n                    })\n                    props.showTimeModal()\n                  }}\n                >\n                  <Text style={{ fontSize: 25 }}>{`${beautifyTime(milk_timestamp)}`}</Text>\n                </TouchableOpacity>\n                <TextInput\n                  editable={editable()}\n                  style={{ marginLeft: 15, width: 55, fontSize: 25 }}\n                  keyboardType=\"decimal-pad\"\n                  placeholder={'_____'}\n                  value={''+milk_amount}\n                  onChangeText={(milk_amount) => setState({ ...state, milk_amount })}\n                  onFocus={() => {\n                    if (!editable()) return\n                    setState({ ...state, includeMilkIntake: true })\n                  }}\n                />\n                <Text style={{ fontSize: 20 }}>  c.c.</Text>\n              </View>\n\n              {/* diaper */}\n              <View \n                style={{ \n                  flexDirection: 'row', alignItems: 'center', \n                  marginTop: 10, backgroundColor: includeDiaper ? '#dcf3d0' : 'transparent'\n                }}\n              >\n                <TouchableOpacity\n                  // disabled={true}\n                  onPress={() => {\n                    if (!editable()) return\n                    setState({ ...state, includeDiaper: !includeDiaper })\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                    <View\n                      style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                    >\n                      <View \n                        style={{\n                          width: 16,\n                          height: 16,\n                          borderRadius: 8,\n                          backgroundColor: includeDiaper? '#00c07f' : 'white'\n                        }}\n                      >\n                      </View>\n                    </View>\n                    <Text style={{ fontSize: 20, marginLeft: 10, alignSelf: 'center' }}>如廁: </Text>\n                  </View>\n                </TouchableOpacity>\n                \n                <TouchableOpacity\n                  style={{ justifyContent: 'center', alignItems: 'center', padding: 5 }}\n                  onPress={() => {\n                    if (!editable()) return\n                    setState({\n                      ...state,\n                      showDateTimeModalType: 'diaper',\n                      // showDateTimeModal: true,\n                      includeDiaper: true\n                    })\n                    props.showTimeModal()\n                  }}\n                >\n                  <Text style={{ fontSize: 25, padding: 5 }}>{`${beautifyTime(diaper_timestamp)}`}</Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                  style={{ marginLeft: 15, justifyContent: 'center', alignItems: 'center', padding: 10 }}\n                  onPress={() => {\n                    if (!editable()) return\n                    setState({\n                      ...state,\n                      diaper_type: \n                        diaper_type === '小便' ? \n                          '大便'\n                          : diaper_type === '大便' ?\n                            '無排便'\n                            : '小便',\n                      includeDiaper: true\n                    })\n                  }}\n                >\n                  <Text style={{ fontSize: 20 }}>{diaper_type}</Text>\n                </TouchableOpacity>\n              </View>\n\n              {/* text */}\n              <TextInput\n                  key={morning_reminder_id}\n                  editable={editable()}\n                  style={{ width: '100%', height: scrollHeight, backgroundColor: '#dcf3d0', \n                    fontSize: 25, paddingTop: 10, padding: 10, marginTop: 10\n                  }}\n                  placeholder={\n                    editable() ? \n                      '點擊我開始填寫...' \n                      : isLoading ?\n                        '下載中...'\n                        :'已不能填寫'\n                  }\n                  value={text}\n                  multiline={true}\n                  scrollEnabled={false}\n                  // maxLength={200}\n                  onChangeText={(text) => setState({ ...state, text })}\n                  onChange={(e) => setScrollHeight(e.target.scrollHeight)}\n                  onLayout={(event) => {\n                    const { scrollHeight } = event.nativeEvent.target\n                    setScrollHeight(scrollHeight)\n                  }}\n              />\n              <TouchableOpacity\n                  disabled={!editable()}\n                  style={{ backgroundColor: '#00c07f', padding: 10, justifyContent: 'center', alignItems: 'center' }}\n                  underlayColor=\"transparent\"\n                  onPress={() => sendMessage()}\n              >\n                  <Text style={{ fontSize: 25}}>送出</Text>\n              </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Card>\n  );\n})\n\nexport default MorningReminderCard","import React, { useEffect, useState } from 'react'\nimport { View, Text, Image, ScrollView, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport { get, beautifyMonthDate } from '../util'\nimport { TouchableOpacity } from 'react-native'\n\nconst AnnouncementCard = (props) => {\n    const [state, setState] = useState({\n        announcements: []\n    })\n\n    useEffect(() => {\n        fetchAnnouncement()\n    }, [])\n\n    // componentDidUpdate(prevProps) {\n    //     if (this.props.date !== prevProps.date) {\n    //       this.setState({ isLoading: true })\n    //       this.fetchAnnouncement();\n    //     } else if (this.props.child_id !== prevProps.child_id) {\n    //       this.setState({ isLoading: true })\n    //       this.fetchAnnouncement();\n    //     }\n    //   }\n\n    const fetchAnnouncement = async() => {\n        const { parent_id } = props\n        // console.log('parent_id: ', parent_id)\n        const response = await get(`/announcement/unread?parent_id=${parent_id}&page=0`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchAnnouncement/response: ', response)\n        if (success) {\n            setState({\n                ...state,\n                announcements: data\n            })\n        }\n    }\n\n    /*\n        -if there are announcement unread, show on home page the date of the announcement\n        -only when parent click into it, we mark it read\n        -parent can also click next or previous depends on which announcement s/he is in\n        -when parent navigate back to home page, update announcement card status to show only the unread announcements\n        -should still show unread when parent changes date\n    */\n    const { announcements } = state\n    // console.log('announcements:', announcements)\n    if (announcements.length === 0) {\n        return null\n    }\n    return (\n        <Card style={{ width: '93%'}}>\n            <View style={{ flex: 1, flexDirection: 'row' }}>\n                <TouchableOpacity \n                    style={{ \n                        width: 56, \n                        height: 56, \n                        justifyContent: 'center', \n                        alignItems: 'center'\n                    }}\n                    onClick={() => props.viewMore(announcements)}\n                >\n                    <Image\n                        source={require('../../assets/icon-announcement.png')}\n                        style={{\n                            width: 38,\n                            height: 38\n                        }}\n                    />\n                </TouchableOpacity>\n                <View style={{ flex: 1 }}>\n                    <View style={{ paddingTop: 8 }}>\n                        <Text style={{ fontSize: 20 }}>新公告</Text>\n                    </View>\n                    <View style={{ flex: 1, paddingVertical: 8 }}>\n                        <ScrollView horizontal contentContainerStyle={{ paddingBottom: 10 }}>\n                            {announcements.map((announcement, index) => {\n                                const date = new Date(announcement.timestamp)\n                                // console.log('beautifyDate(date): ', beautifyDate(date))\n                                return (\n                                    <TouchableOpacity\n                                        key={announcement.id}\n                                        style={{\n                                            padding: 10,\n                                            backgroundColor: '#F5F5F5',\n                                            marginRight: 15,\n                                            justifyContent: 'center'\n                                        }}\n                                        underlayColor={'#ff8944'}\n                                        onClick={() => props.viewAnnouncement(index, announcements)}\n                                    >\n                                        <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                            {announcement.read ? \n                                                <Image\n                                                    source={require('../../assets/icon-checked.png')}\n                                                    style={{\n                                                        width: 20,\n                                                        height: 20\n                                                    }}\n                                                />\n                                                : null\n                                            }\n                                            <Text\n                                                style={{\n                                                    marginLeft: 3,\n                                                    alignSelf: 'center',\n                                                    fontSize: 25,\n                                                    color: 'rgba(0,0,0,0.8)'\n                                                }}\n                                            >\n                                                {beautifyMonthDate(date)}    \n                                            </Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                )\n                            })}\n                        </ScrollView>\n                    </View>\n                </View>\n            </View>\n        </Card>\n    )\n\n}\n\nexport default AnnouncementCard","import React, { useState, useEffect } from 'react'\nimport { Card } from 'native-base'\nimport { View, Image, Text, } from 'react-native'\nimport Reloading from '../reloading'\nimport { formatDate, get } from '../util'\n\nconst AttendanceCard = (props) => {\n    const { student_id } = props\n    const [ isLoading, setIsLoading ] = useState(true)\n    const [ inTime, setInTime ] = useState(null)\n    const [ outTime, setOutTime ] = useState(null)\n    const [ excuseType, setExcuseType ] = useState(null)\n    const [ absenceTime, setAbsenceTime ] = useState(null)\n    const time = {\n        'morning': '早上',\n        'evening': '下午',\n        'all_day': '全天'\n    }\n\n    // useEffect(() => {\n    //     const { date } = props\n    //     fetchAttendanceByStudentId(date)\n    // }, [])\n    \n    useEffect(() => {\n        const { date } = props\n        fetchAttendanceByStudentId(date)\n    }, [props.date, props.student_id])\n\n    const fetchAttendanceByStudentId = async(date) => {\n        console.log('fetchAttendanceByStudentId')\n        const response = await get(`/attendance/${student_id}?date=${formatDate((date))}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            console.log('fetchAttendanceByStudentId / response: ', response)\n            let { in_time, out_time, excuse_type, absence_time } = data\n            if (excuse_type === 'none-medical') {\n                excuse_type = '事假'\n            }\n            setInTime(in_time)\n            setOutTime(out_time)\n            setExcuseType(excuse_type)\n            setAbsenceTime(absence_time)\n            setIsLoading(false)\n        } else if (statusCode === 400) {\n            setInTime(null)\n            setOutTime(null)\n            setExcuseType(null)\n            setAbsenceTime(null)\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <Card style={{ width: '93%' }}>\n            <View style={{ flex: 1, flexDirection: 'row' }}>\n                <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n                    <Image\n                        source={require('../../assets/icon-attendance.png')}\n                        style={{\n                            width: 48,\n                            height: 48\n                        }}\n                    />\n                </View>\n                <View style={{ flex: 1 }}>\n                    <View style={{ paddingTop: 8 }}>\n                        <Text style={{ fontSize: 20 }}>出勤</Text>\n                    </View>\n                    {isLoading ? \n                        <Reloading />\n                        : inTime !== null || outTime !== null || excuseType !== null ? \n                            <View style={{ flex: 1, paddingVertical: 8, alignItems: 'center' }}>\n                                {excuseType !== null && \n                                    <View style={{ flex: 1, paddingBottom: 8 }}>\n                                        <Text style={{ fontSize: 25 }}>\n                                            {`請假: ${excuseType} (${time[absenceTime]})`}\n                                        </Text>\n                                    </View>\n                                }\n                                <View style={{ flex: 1, width: '100%', flexDirection: 'row' }}>\n                                    <View style={{ flex: 1, alignItems: 'center' }}>\n                                        <Text>到校</Text>\n                                        {inTime !== null && <Text style={{ fontSize: 25, alignSelf: 'center' }}>{inTime}</Text>}\n                                    </View>\n                                    {/* <Text style={{ fontSize: 25 }}> ~ </Text> */}\n                                    <View style={{ flex: 1, alignItems: 'center' }}>\n                                        <Text>離校</Text>\n                                        {outTime !== null && <Text style={{ fontSize: 25, alignSelf: 'center' }}>{outTime}</Text>}\n                                    </View>\n                                </View>\n                            </View>\n                            : \n                                <View style={{ flex: 1, paddingVertical: 8 }}>\n                                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                                </View>\n                    }\n                </View>\n            </View>\n        </Card>\n    )\n}\n\nexport default AttendanceCard","import React from 'react'\nimport { View, Text, TouchableOpacity } from 'react-native'\n\nconst MainMenu = (props) => {\n    return (\n        <View\n            style={{\n                zIndex: 2,\n                width: '100%',\n                height: '100%',\n                position: 'absolute',\n                backgroundColor: 'rgba(0,0,0,1)',\n                alignItems: 'center',\n                // justifyContent: 'center'\n            }}\n        >\n            <TouchableOpacity \n                style={{\n                    // textAlign: 'center',\n                    paddingTop: 30,\n                    paddingBottom: 15,\n                    borderBottomWidth: 2,\n                    borderBottomColor: 'grey'\n                }}\n                onClick={() => props.onItemClick('DownloadPage')}\n            >\n                <Text style={{ fontSize: 25, color: 'grey', fontWeight: 'bold' }}> 下載 </Text>\n            </TouchableOpacity>\n        </View>\n    )\n}\n\nexport default MainMenu","import React, { useState, useEffect, useRef } from 'react'\nimport { StyleSheet, ScrollView, View, Text, RefreshControl, TouchableOpacity,\n    Alert, Dimensions, AppState, Image, KeyboardAvoidingView, Platform, TouchableHighlight} from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { setConnectState, initializeChildren, markPresent, clearState } from '../../redux/parent/actions/index'\nimport Reloading from '../reloading'\nimport WellnessCard from './wellnesscard';\nimport AppetiteCard from './appetitecard';\nimport MilkCard from './milkcard';\nimport SleepCard from './sleepcard';\nimport RestroomCard from './restroomcard';\nimport MessageCard from './messagecard'\nimport ParentHomeTitle from './parenthometitle'\nimport ProfileSelector from './profileselector'\nimport QRPage from './qrpage'\nimport { formatDate, beautifyDate, beautifyTime, get } from '../util'\nimport MedicationRequestCard from './medicinerequestcard'\nimport TimeModal from './timemodal'\nimport MorningReminderCard from './morningremindercard'\nimport AnnouncementCard from './announcementcard'\nimport AttendanceCard from './attendancecard'\nimport ENV from '../../variables'\nimport MainMenu from './mainmenu/mainmenu'\nimport { useNavigate } from \"react-router-dom\";\n\nconst { width } = Dimensions.get('window')\n\nconst ParentHome = (props) => {\n    let navigate = useNavigate();\n    const [state, setState] = useState({\n        date: null,\n        child_id: '',\n        student_id_array: [],\n        message: '',\n        refreshing: false,\n        showQR: false,\n        temperature: '',\n        present: false,\n        showMainMenu: false,\n    })\n\n    const [checkAttendance, setCheckAttendance] = useState(false)\n    const [showTimeModal, setShowTimeModal] = useState(false)\n    const [showDateTimeModal, setShowDateTimeModal] = useState(false)\n\n    const appState = useRef(AppState.currentState);\n\n    const morningReminderRef = useRef();\n    const profileSelector = useRef()\n    \n    const timer = () => setTimeout(() => {\n        poll(state.child_id)\n    }, 10000)\n\n    const poll = async(student_id) => {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/family/updates?student_id=${student_id}`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('parenthome/poll: ')\n                const update_types = resJson.data\n                // TODO\n                // update_types.forEach(update_type => {\n                //     // console.log(update_type)\n                //     this.refs[update_type].fetchData(student_id, new Date(state.date))\n                // })  \n            })\n            .catch(err => {\n                console.log('polling error: ', err)\n            })\n        // this.timeoutId = timer()\n    }\n\n    useEffect(() => {\n        // this.setDate()\n        window.addEventListener('offline', (e) => {\n            // console.log('offline ', e)\n            props.setConnectState(false) \n        });\n        window.addEventListener('online', (e) => {\n            // console.log('online ', e)\n            props.setConnectState(true)\n        });\n        async function fetchChildren() {\n            initializeChildren()\n        }\n        fetchChildren()\n        // this.timeoutId = timer()\n        AppState.addEventListener(\"change\", _handleAppStateChange);\n        // props.navigation.setOptions({\n        //     headerLeft: () => (\n        //         <TouchableOpacity\n        //             style={{ padding: 15 }}\n        //             onClick={() => setState({ showMainMenu: ! state.showMainMenu })}\n        //         >\n        //             <Image\n        //                 source={require('../../assets/icon-menu.png')}\n        //                 style={{ width: 20, height: 20 }}\n        //             />\n        //         </TouchableOpacity>\n        //     )\n        // })\n\n        return () => {\n            // clearTimeout(this.timeoutId)\n            AppState.removeEventListener(\"change\", _handleAppStateChange);\n            props.clearState()\n        }\n    }, [])\n\n    useEffect(() => {\n        if (checkAttendance) {\n            checkStudentAttendance(state.child_id)\n        }\n    }, [checkAttendance])\n\n    // SPECIAL DAY QUICK TEMP FIX\n    const isSpecialDate = (date) => {\n        const special_date = new Date()\n        special_date.setMonth(2,25)\n        return date.toDateString() === special_date.toDateString()\n    }\n    \n    const goBackADay = () => {\n        const date = new Date(state.date.getTime())\n        const special_date = new Date()\n        special_date.setMonth(2,27)\n        \n        if (date.getDay() === 1 && (date.toDateString() !== special_date.toDateString())) {\n            date.setDate(date.getDate() - 3)\n        } else if (date.toDateString() === special_date.toDateString()) {\n            date.setDate(date.getDate() - 2)\n        } else {\n            date.setDate(date.getDate() - 1)\n        }\n        selectDatetimeConfirm(date)\n    }\n\n    const goForwardADay = () => {\n        const date = new Date(state.date.getTime())\n        console.log('date: ', date)\n        if (date.getDay() === 5 && !tomorrowHasClass()) {\n            date.setDate(date.getDate() + 3)\n        } else if (date.getDay() === 6 && isSpecialDate(date)) {\n            date.setDate(date.getDate() + 2)\n        } else {\n            date.setDate(date.getDate() + 1)\n        }\n        selectDatetimeConfirm(date)\n    }\n\n    const tomorrowHasClass = () => {\n        const date = new Date(state.date)\n        date.setDate(date.getDate() + 1)\n        const special_date = new Date()\n        special_date.setMonth(2, 25)\n\n        if (date.toDateString() === special_date.toDateString()) {\n            return true\n        }\n        return false\n    }\n    // SPECIAL DAY QUICK TEMP FIX\n\n    // const setDatetime = () => {\n    //     const date = new Date()\n    //     if (date.getDay() === 6) {  \n    //         date.setDate(date.getDate() - 1)\n    //     } else if (date.getDay() === 0) {\n    //         date.setDate(date.getDate() - 2)\n    //     }\n\n    //     const threshold = new Date()\n    //     threshold.setHours(0,0,0,0)\n    //     if (date.getTime() < threshold.getTime()) { // if selected date is before today\n    //         date.setHours(18)\n    //     } else if (date.toDateString() === (new Date()).toDateString()) { // if selected date is today\n    //         date.setTime(new Date())\n    //     } else { // if selected date is tomorrow\n    //         date.setHours(16, 0, 0)\n    //     }\n    //     return date\n    //     // selectDatetimeConfirm(date)\n    // }\n\n    // SPECIAL DAY QUICK TEMP FIX\n    const setDatetime = () => {\n        let date = new Date()\n        if (date.getDay() === 0) {\n            date.setDate(date.getDate() - 1)\n        }\n\n        const threshold = new Date()\n        threshold.setHours(0,0,0,0)\n        if (date.getTime() < threshold.getTime()) { // if selected date is before today\n            date.setHours(18)\n        } else if (date.toDateString() === (new Date()).toDateString()) { // if selected date is today\n            date.setTime(new Date())\n        } else { // if selected date is tomorrow\n            date.setHours(16, 0, 0)\n        }\n        return date\n    }\n    // SPECIAL DAY QUICK TEMP FIX\n\n    const isIOS = () => {\n        return Platform.OS === 'ios'\n    }\n\n    const initializeChildren = () => {\n        // console.log('initializeChildren')\n        const { parent_id } = props\n        // this.setState({ child_id: '', date: new Date })\n        // this.setDate()\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/family/${parent_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                props.initializeChildren(data)\n                const student_id_array = Object.keys(props.parent.child_of_id)\n                // console.log('student_id_array: ', student_id_array)\n                setState({\n                    ...state,\n                    child_id: student_id_array[0],\n                    student_id_array,\n                    date: setDatetime()\n                })\n                setCheckAttendance(true)\n                // setDate()\n            })\n            .catch((err) => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when initializing student profiles')\n        })\n    }\n\n    const _handleAppStateChange = (nextAppState) => {\n        if (\n            appState.current.match(/inactive|background/) &&\n            nextAppState === \"active\"\n        ) {\n            setCheckAttendance(true)\n            // TODO: if (state.date.toDateString() !== (new Date).toDateString() && (new Date).getHours() > 3) {\n            //     initializeChildren()\n            // }\n        }\n        appState.current = nextAppState\n    };\n\n    const checkStudentAttendance = async(student_id) => {\n        // console.log('checkStudentAttendance')\n        // console.log('state.date.toDateString(): ', state.date.toDateString())\n        // console.log('(new Date).toDateString(): ', (new Date).toDateString())\n        const date = state.date || new Date()\n        // console.log(`state: `, state)\n        const current_student = student_id || state.child_id\n        // console.log(`current_student: ${current_student}`)\n        if (current_student === \"\") return\n        if (date.toDateString() !== (new Date).toDateString()) {\n            return\n        }\n           \n        const response = await get(`/attendance/${current_student}?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        // console.log('response: ', response)\n        if (success) {\n            // console.log('data: ', data)\n            const { in_time, out_time, excuse_type, absence_time } = data\n            if (studentIsPickedUp(in_time, out_time, excuse_type) || studentIsAbsentAllDay(absence_time)) {\n                // if student has checked in and out or if s/he has submit an absence excuse for the day,\n                // then we set time to 18:00 so parents can edit messages for next day\n                let date = new Date()\n                date.setHours(18,0,0,0)\n                setState({\n                    ...state, \n                    date\n                })\n            }\n        }\n        setCheckAttendance(false)\n    }\n\n    const studentIsPickedUp = (in_time, out_time, excuse_type) => {\n        return in_time !== null && out_time !== null;\n    }\n\n    const studentIsAbsentAllDay = (absence_time) => {\n        return absence_time !== null && absence_time === 'all_day'\n    }\n\n    const studentIsAbsentMorning = (absence_time) => {\n        return absence_time === 'morning';\n    }\n\n    const studentIsAbsentEvening = (absence_time) => {\n        return absence_time === 'evening';\n    }\n\n    const onSelectStudent = (child_id) => {\n        // console.log('onSelectStudent')\n        setState({ ...state, child_id })\n    }\n\n    const markPresent = (temperature) => {\n        const { date } = state\n        setState({\n            ...state,\n            temperature,\n            present: temperature !== ''\n        })\n    }\n\n    const selectDatetimeConfirm = (date) => {\n        // console.log('selectDatetimeConfirm: ', date)\n        const threshold = new Date()\n        threshold.setHours(0,0,0,0)\n        if (date.getTime() < threshold.getTime()) { // if selected date is before today\n            date.setHours(18)\n        } else if (date.toDateString() === (new Date()).toDateString()) { // if selected date is today\n            date.setTime(new Date())\n        } else { // if selected date is tomorrow\n            date.setHours(16, 0, 0)\n        }\n        setState({\n            ...state,\n            date,\n        })\n        setShowDateTimeModal(false)\n        setCheckAttendance(true)\n    }\n\n    const getDayDifference = (startDate, endDate) => {\n        let start = new Date(startDate)\n        let end = new Date(endDate)\n        start.setHours(0)\n        end.setHours(0)\n        const oneDay = 24 * 60 * 60 * 1000;\n        return Math.round((end - start) / (oneDay))\n    }\n\n    // // SPECIAL DAY QUICK TEMP FIX\n    // const goBackADay = () => {\n    //     const date = new Date(state.date.getTime())\n    //     if (date.getDay() === 1) {\n    //         date.setDate(date.getDate() - 3)\n    //     } else {\n    //         date.setDate(date.getDate() - 1)\n    //     }\n    //     selectDatetimeConfirm(date)\n    // }\n\n    // const goForwardADay = () => {\n    //     // console.log('goForwardADay')\n    //     const date = new Date(state.date.getTime())\n    //     if (date.getDay() === 5) {\n    //         date.setDate(date.getDate() + 3)\n    //     } else {\n    //         date.setDate(date.getDate() + 1)\n    //     }\n    //     selectDatetimeConfirm(date)\n    // }\n\n    const onMenuItemClick = (item) => {\n        const { child_id } = state\n        setState({ ...state, showMainMenu: false })\n        navigate(item, {\n            student_id: child_id,\n            students: props.parent.child_of_id\n        })\n    }\n\n    const { parent_id } = props\n    const { isConnected } = props\n    // console.log('isConnected: ', isConnected)\n    const { date, child_id, showQR, temperature, present, showMainMenu } = state\n    // console.log(`parenthome / child_id ${child_id} / date ${date}`)\n    // console.log(`appState.current: ${appState.current}`)\n    if (child_id === '' || date === null) {\n        return (\n            <Reloading />\n        )\n    }\n    const selected_student = props.parent.child_of_id[child_id]\n    const day_difference = getDayDifference(date, new Date())\n    return (\n        <KeyboardAvoidingView\n            enabled\n            behavior={\"padding\"}\n            keyboardVerticalOffset={100}\n            style={{ flex: 1, zIndex: 1 }}\n        >\n            <ProfileSelector\n                ref={profileSelector}\n                student_of_id={props.parent.child_of_id}\n                onSelectStudent={(student_id) => onSelectStudent(student_id)}\n            />\n            {showQR ? \n                <QRPage\n                    hideQRCode={() => {\n                        setState({\n                            ...state,\n                            showQR: false\n                        })\n                        setCheckAttendance(true)\n                    }}\n                    parent_id={parent_id}\n                />\n                : null\n            }\n\n            {showDateTimeModal ?\n                <TimeModal\n                    start_date={date}\n                    datetime_type={'date'}\n                    hideModal={() => setShowDateTimeModal(false)}\n                    selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n                    minDatetime={(new Date()).setDate((new Date()).getDate() - 30)}\n                    maxDatetime={(new Date()).setDate((new Date()).getDate() + 1)}\n                    paddingVertical={100}\n                />\n                : null\n            }\n\n            {showTimeModal &&\n                <TimeModal\n                    start_date={new Date()}\n                    datetime_type={'time'}\n                    hideModal={() => setShowTimeModal(false)}\n                    selectDatetimeConfirm={(time) => morningReminderRef.current.selectDatetimeConfirm(time)}\n                    minDatetime={null}\n                    maxDatetime={null}\n                    minTime={null}\n                    maxTime={null}\n                    paddingVertical={400}\n                />\n            }\n\n            {showMainMenu && \n                <MainMenu\n                    onItemClick={(item) => onMenuItemClick(item)}\n                    onHide={() => setState({ ...state, showMainMenu: false})}\n                />\n            }\n\n            {<ScrollView\n                contentContainerStyle={{ alignItems: 'center', justifyContent: 'center', paddingBottom: 30 }}\n                refreshControl={\n                    <RefreshControl\n                        style={{backgroundColor: 'transparent' }}\n                        refreshing={state.refreshing}\n                        onRefresh={initializeChildren}\n                        tintColor=\"#ff8944\"\n                        title=\"Loading...\"\n                        titleColor=\"#368cbf\"\n                        colors={['#ff8944', '#368cbf', '#0000ff']}\n                        progressBackgroundColor=\"#ffff00\"\n                    />\n                }\n            >\n                <View style={{ width: '100%', flexDirection: 'row', backgroundColor: 'white' }}> \n                    <View style={{ width: '15%'}}>\n                        {day_difference < 30 ?\n                            <TouchableOpacity\n                                style={{ flex: 1, justifyContent: 'center', alignItems: 'center'}}\n                                onPress={() => goBackADay()}\n                            >\n                                <Image\n                                    source={require('../../assets/icon-back.png')}\n                                    style={{ width: 40, height: 40 }}\n                                />\n                            </TouchableOpacity>\n                            : null\n                        }\n                    </View>\n                    <TouchableOpacity\n                        style={{ width: '70%', justifyContent: 'center'}}\n                        onPress={() => setShowDateTimeModal(true)}\n                    >\n                        <Text style={{ fontSize: width * 0.12, textAlign: 'center' }}>\n                            {beautifyDate(date)}\n                        </Text>\n                    </TouchableOpacity>\n                    <View style={{ width: '15%'}}>\n                        {day_difference >= 0 ?\n                            <TouchableHighlight\n                                style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}\n                                onPress={() => goForwardADay()}\n                            >\n                                <Image\n                                    source={require('../../assets/icon-forward.png')}\n                                    style={{ width: 40, height: 40 }}\n                                />\n                            </TouchableHighlight>\n                            : null\n                        }\n                    </View>\n                </View>\n                <ParentHomeTitle\n                    student_id={child_id}\n                    student={selected_student}\n                    students={props.parent.child_of_id}\n                    student_name={props.parent.child_of_id[child_id].name}\n                    selectOtherChildProfile={() => profileSelector.current.slideIn()}\n                    viewQRCode={() => setState({\n                        ...state, \n                        showQR: true\n                    })}\n                    temperature={temperature}\n                />\n\n                <View style={{ flex: 1, width: '93%', flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\n                    <TouchableHighlight\n                        style={{width: '30%', padding: 10, backgroundColor: '#ffe1d0'}}\n                        onPress={() => navigate('/pickup', {\n                            state: {\n                                child_id,\n                                school_id: selected_student.school_id\n                            }\n                        })}>\n                        <Text style={{ fontSize: width * 0.05, textAlign: 'center'}}>接回告知</Text>\n                    </TouchableHighlight>\n                    <TouchableOpacity\n                        style={{width: '30%', padding: 10, backgroundColor: '#fff1b5'}}\n                        onPress={() => navigate('/med-request', {\n                            state: {\n                                student_id: child_id,\n                                class_id: selected_student.class_id\n                            }\n                            // onGoBack: () => this.refs['med_request'].fetchData(child_id, new Date()),\n                            \n                        })}>\n                        <Text style={{ fontSize: width * 0.05, textAlign: 'center' }}>托藥單</Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                        style={{width: '30%', padding: 10, backgroundColor: '#b5e9e9'}}\n                        onPress={() => navigate('/absence-request', {\n                            state: {\n                                student_id: child_id,\n                                class_id: selected_student.class_id === null ? \"\" : selected_student.class_id,\n                                school_id: selected_student.school_id\n                            }\n                        })}>\n                        <Text style={{ fontSize: width * 0.05, textAlign: 'center' }}>請假單</Text>\n                    </TouchableOpacity>\n                </View>\n\n                <AnnouncementCard \n                    child_id={child_id}\n                    date={date}\n                    parent_id={parent_id}\n                    // ref=\"announcement\"\n                    viewAnnouncement={(index, data) => navigate('AnnouncementPage', {\n                        // onGoBack: () => this.refs['announcement'].fetchAnnouncement(),\n                        index,\n                        data,\n                        parent_id\n                    })}\n                    viewMore={(announcements) => navigate('AnnouncementListPage', {\n                        announcements,\n                        parent_id,\n                        viewAnnouncement: (index, data) => navigate('AnnouncementPage', {\n                            // onGoBack: () => this.refs['announcement'].fetchAnnouncement(),\n                            index,\n                            data,\n                            parent_id\n                        })\n                    })}\n                />\n\n                <MorningReminderCard\n                    student_id={child_id}\n                    date={date}\n                    class_id={selected_student.class_id}\n                    ref={morningReminderRef}\n                    present={present}\n                    isConnected={isConnected}\n                    parent_id={parent_id}\n                    showTimeModal={() => setShowTimeModal(true)}\n                />\n\n                <AttendanceCard\n                    student_id={child_id}\n                    date={date}\n                    // ref=\"attendance\"\n                />\n\n                <MedicationRequestCard\n                    child_id={child_id}\n                    date={date}\n                    // ref=\"med_request\"\n                    viewMedRequest={(index, data) => navigate('/add-med-request', {\n                        state: {\n                            // onGoBack: () => this.refs['med_request'].fetchData(child_id, new Date()),\n                            student_id: child_id, \n                            class_id: selected_student.class_id === null ? \"\" : selected_student.class_id,\n                            index,\n                            data\n                        }\n                    })}\n                />\n\n                <WellnessCard\n                    child_id={child_id}\n                    date={date}\n                    updateTitleTemp={(temperature) => markPresent(temperature)}\n                />\n\n                <MessageCard\n                    child_id={child_id}\n                    date={date}\n                    class_id={selected_student.class_id}\n                    parent_id={parent_id}\n                />\n\n                <AppetiteCard\n                    child_id={child_id}\n                    date={date}\n                    // ref=\"appetite\"\n                />\n\n                <MilkCard\n                    child_id={child_id}\n                    date={date}\n                    // ref=\"milkintake\"\n                />\n\n                <SleepCard\n                    child_id={child_id}\n                    date={date}\n                    // ref=\"sleep\"\n                />\n\n                <RestroomCard\n                    child_id={child_id}\n                    date={date}\n                    // ref=\"diaper\"\n                />\n\n            </ScrollView>}\n        </KeyboardAvoidingView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    button_text: {\n        fontSize: 18,\n        textAlign: 'center'\n    },\n    button: {\n        width: '30%',\n        padding: 20,\n        justifyContent: 'center',\n        // shadowColor: \"#000\",\n        // shadowOffset: {\n        //     width: 0,\n        //     height: 1,\n        // },\n        // shadowOpacity: 0.22,\n        // shadowRadius: 2.22,\n        // elevation: 3,\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        parent: state.parent,\n        isConnected: state.parent.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setConnectState,\n            initializeChildren,\n            markPresent,\n            clearState\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParentHome)\n","import React from 'react'\nimport { View, Text, TouchableHighlight, Dimensions } from 'react-native'\nconst { width } = Dimensions.get('window')\n\nexport default class MedicinePowderForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥粉: 0\n    }\n  }\n\n  componentDidMount() {\n    const { 藥粉 } = this.props\n    this.setState({\n      藥粉: parseInt(藥粉)\n    })\n  }\n\n  render() {\n    const { 藥粉 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                // backgroundColor: 'white',\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥粉</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n            <TouchableHighlight\n              style={{\n                backgroundColor: 'rgba(0,0,0,0.4)',\n                height: height*0.8,\n                aspectRatio: 1,\n                justifyContent: 'center',\n                borderRadius: height*0.4\n              }}\n              onPress={() => this.setState({\n                藥粉: 藥粉 === 0 ? 0 : 藥粉-1\n              })}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center', color: 'white' }}>-</Text>\n            </TouchableHighlight>\n\n            <Text style={{ fontSize: 40, paddingHorizontal: 15 }}>{藥粉} 包</Text>\n\n            <TouchableHighlight\n              style={{\n                backgroundColor: 'rgba(0,0,0,0.4)',\n                height: height*0.8,\n                aspectRatio: 1,\n                justifyContent: 'center',\n                borderRadius: height*0.4\n              }}\n              onPress={() => this.setState({\n                藥粉: 藥粉+1\n              })}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center', color: 'white' }}>+</Text>\n            </TouchableHighlight>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: width*0.12, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥粉)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\n\nexport default class MedicineSyrupForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥水: 0\n    }\n  }\n\n  componentDidMount() {\n    const { 藥水 } = this.props\n    this.setState({\n      藥水\n    })\n  }\n\n  render() {\n    const { 藥水 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥水</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', marginTop: -20 }}>\n            <View style={{ flexDirection: 'row', backgroundColor: 'rgba(255,255,255,0.4)', alignItems: 'center' }}>\n              <TextInput\n                style={{ fontSize: 40, padding: 10 }}\n                keyboardType='decimal-pad'\n                autoFocus\n                selectTextOnFocus\n                value={'' + 藥水}\n                onChangeText={(amount) => this.setState({ 藥水: amount })}\n              />\n              <Text style={{ paddingLeft: 10, fontSize: 40 }}>c.c.</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥水)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\n\nexport default class MedicineCreamForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥膏: ''\n    }\n  }\n\n  componentDidMount() {\n    const { 藥膏 } = this.props\n    this.setState({\n      藥膏\n    })\n  }\n\n  render() {\n    const { 藥膏 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥膏</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', marginTop: -20 }}>\n            <View style={{ flexDirection: 'row', backgroundColor: 'rgba(255,255,255,0.4)', alignItems: 'center' }}>\n              <TextInput\n                style={{ fontSize: 40, padding: 10 }}\n                placeholder='部位'\n                autoFocus\n                selectTextOnFocus\n                value={藥膏}\n                onChangeText={(area) => this.setState({ 藥膏: area })}\n              />\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥膏)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput, KeyboardAvoidingView, Alert, ScrollView, Platform } from 'react-native'\n// import DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, beautifyDate, beautifyTime }  from '../util'\nimport MedicinePowderForm from './medicinepowderform'\nimport MedicineSyrupForm from './medicinesyrupform'\nimport MedicineCreamForm from './medicinecreamform'\nimport ENV from '../../variables'\n\nexport default class MedicationRequestMain extends React.Component{\n  constructor(props) {\n    super(props) \n    this.state = {\n      optionButtonWidth: 0,\n      optionButtonHeight: 0,\n      show_date_picker: false,\n      show_time_picker: false,\n      date: new Date(),\n      time: new Date(),\n      show_editor: '',\n      藥粉: null,\n      need_refrigeration: false,\n      藥水: null,\n      藥膏: null,\n      note: '',\n      access_mode: 'create'\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  getHeader() {\n    const { access_mode, date, } = this.state\n    if (access_mode === 'read') {\n      if (formatDate(date) === formatDate(new Date)) {\n        return '今天托藥單'\n      }\n      const days_of_week = ['天', '一', '二', '三', '四', '五', '六']\n      const day = days_of_week[date.getDay()]\n      return `星期${day}`\n    } else if (access_mode === 'create') {\n      return '新增托藥單'\n    } else if (access_mode === 'edit') {\n      return '編輯中...'\n    }\n  }\n\n  fetchAccessMode() {\n    return this.state.access_mode\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.request !== this.props.request) {\n      const { request } = this.props\n      if (!request) {\n        this.setState({\n          date: new Date(),\n          time: new Date(),\n          藥粉: null,\n          need_refrigeration: false,\n          藥水: null,\n          藥膏: null,\n          note: '',\n          access_mode: 'create'\n        })\n        return\n      }\n\n      const { timestamp, medication, note } = request\n      const { 藥粉, need_refrigeration, 藥水, 藥膏 } = medication\n      this.setState({\n        date: timestamp,\n        time: timestamp,\n        藥粉,\n        need_refrigeration,\n        藥水,\n        藥膏,\n        note,\n        access_mode: 'read'\n      })\n    }\n  }\n\n  setDate(date) {\n    if (Platform.OS === 'ios') {\n      this.iosSetDate(date)\n    } else { // android\n      this.androidSetDate(date)\n    }\n  }\n\n  iosSetDate(date) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      date,\n      time: date\n    })\n  }\n\n  androidSetDate(date) {\n    if (date !== undefined) {\n      this.setState({\n        date,\n        time: date,\n        show_date_picker: false\n      })\n    } else {\n      this.setState({ show_date_picker: false })\n    }\n  }\n\n  setTime(time) {\n    if (Platform.OS === 'ios') {\n      this.iosSetTime(time)\n    } else { // android\n      this.androidSetTime(time)\n    }\n  }\n\n  iosSetTime(time) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      time\n    })\n  }\n\n  androidSetTime(time) {\n    if (time !== undefined) {\n      this.setState({\n        time,\n        show_time_picker: false\n      })\n    } else {\n      this.setState({ show_time_picker: false })\n    }\n  }\n\n  onFinishEdit(medicine_type, medicine_data) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: medicine_data\n    })\n  }\n\n  onCancelSelect(medicine_type) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: null\n    })\n  }\n\n  handleClickConfirmButton() {\n    const { access_mode } = this.state\n    if (access_mode === 'read') {\n      this.setState({\n        access_mode: 'edit'\n      })\n    } else if (access_mode === 'create') {\n      this.sendRequest(null)\n    } else if (access_mode === 'edit') {\n      const { id } = this.props.request\n      this.sendRequest(id)\n    }\n  }\n\n  sendRequest(request_id) {\n    const { date, time, 藥粉, need_refrigeration, 藥水, 藥膏, note  } = this.state\n    const {student_id, class_id} = this.props\n    const request_body = {\n      request_id,\n      timestamp: `${formatDate(date)} ${formatTime(time)}`,\n      class_id,\n      藥粉,\n      need_refrigeration,\n      藥水,\n      藥膏,\n      note\n    }\n\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/student/${student_id}`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onCreateRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending medication request')\n      })\n  }\n\n  deleteRequestConfirm() {\n    const confirmed = confirm('確定要刪除？')\n    if (confirmed) {\n      this.deleteRequest()\n    }\n  }\n\n  deleteRequest() {\n    const { request, class_id } = this.props\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request.id}`, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        class_id\n      })\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onDeleteRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n      })\n  }\n\n  render() {\n    const {\n      show_date_picker,\n      show_time_picker,\n      date,\n      time,\n      藥粉,\n      藥水,\n      藥膏,\n      note,\n      optionButtonWidth,\n      optionButtonHeight,\n      show_editor,\n      access_mode\n    } = this.state\n\n    // console.log(this.props.request)\n\n    if (show_date_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'date'}\n              value={date}\n              onChange={(event, date) => this.setDate(date)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_date_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    if (show_time_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'time'}\n              value={time}\n              onChange={(event, time) => this.setTime(time)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_time_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    return (\n      <KeyboardAvoidingView\n        style={{ flex: 1 }}\n        behavior='padding'\n        enabled\n      >\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n          <Text style={{ fontSize: 30, textAlign: 'center' }}>{this.getHeader()}</Text>\n        </View>\n        <View style={{ flex: 7 }}>\n\n          {/* DATE and TIME */}\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', paddingVertical: 10 }}>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_date_picker: !show_date_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyDate(date)}</Text>\n            </TouchableHighlight>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_time_picker: !show_time_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyTime(time)}</Text>\n            </TouchableHighlight>\n          </View>\n\n          {show_editor === '藥粉' ? \n            <MedicinePowderForm\n              藥粉={藥粉}\n              width={optionButtonWidth}\n              height={optionButtonHeight}\n              onFinishEdit={(powder_amount) => this.onFinishEdit('藥粉', powder_amount)}\n              onCancelSelect={() => this.onCancelSelect('藥粉')}\n            />\n            : show_editor === '藥水' ?\n              <MedicineSyrupForm\n                藥水={藥水}\n                width={optionButtonWidth}\n                height={optionButtonHeight}\n                onFinishEdit={(syrup_amount) => this.onFinishEdit('藥水', syrup_amount)}\n                onCancelSelect={() => this.onCancelSelect('藥水')}\n              />\n              : show_editor === '藥膏' ?\n                <MedicineCreamForm\n                  藥膏={藥膏}\n                  width={optionButtonWidth}\n                  height={optionButtonHeight}\n                  onFinishEdit={(cream_area) => this.onFinishEdit('藥膏', cream_area)}\n                  onCancelSelect={() => this.onCancelSelect('藥膏')}\n                />\n                :\n                <View style={{ flex: 4 }}>\n                  <View style={{ flex: 3, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* POWDER */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥粉 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 14,\n                          marginRight: 7,\n                          marginBottom: 7\n                        }}\n                        onLayout={(event) => {\n                          const { width, height } = event.nativeEvent.layout\n                          this.setState({\n                            optionButtonWidth: width,\n                            optionButtonHeight: height\n                          })\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ show_editor: '藥粉', 藥粉: 藥粉 || 1 })}\n                      >\n                        {藥粉 ? \n                          <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉: {藥粉} 包</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* REFRIGERATED */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: this.state.need_refrigeration ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 14,\n                          marginRight: 14,\n                          marginBottom: 7\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ need_refrigeration: !this.state.need_refrigeration})}\n                      >\n                        <Text style={{ fontSize: 25, textAlign: 'center' }}>藥品需冷藏</Text>\n                      </TouchableHighlight>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* SYRUP */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥水 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 7,\n                          marginRight: 7,\n                          marginBottom: 14\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥水', 藥水: 藥水 || 0 })}\n                      >\n                        {藥水 ?\n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥水: {藥水} c.c.</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥水</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* CREAM */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥膏 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 7,\n                          marginRight: 14,\n                          marginBottom: 14,\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥膏' })}\n                      >\n                        {藥膏 ? \n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥膏部位: {藥膏}</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥膏</Text>\n                        }\n                        \n                      </TouchableHighlight>\n                    </View>\n                  </View>\n\n              {/* NOTE */}\n                  <View\n                    style={{ backgroundColor: '#b5e9e9' }}\n                  >\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      placeholder='備註'\n                      placeholderTextColor='grey'\n                      value={note}\n                      style={{\n                        // height: '100%',\n                        backgroundColor: '#eaf8f8',\n                        borderRadius: 3,\n                        fontSize: 20,\n                        padding: 20,\n                      }}\n                      onChangeText={note => this.setState({ note })}\n                    />\n                  </View>\n                </View>\n\n          }\n\n          {/* Add Button */}\n          {this.props.request !== undefined && this.props.request.administered ?\n            <View\n              style={{ flex: 1, flexDirection: 'row', paddingVertical: 10, justifyContent: 'center', alignItems: 'center' }}\n            >\n              <Text style={{ fontSize: 30 }}>喂藥老師: {this.props.request.teacher_name}</Text>\n            </View>\n            :\n          <View\n            style={{ flex: 1, flexDirection: 'row', paddingVertical: 10 }}\n          >\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    // alignSelf: 'flex-start',\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.deleteRequestConfirm()}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>刪除</Text>\n                </TouchableHighlight>\n                : null\n              }              \n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.setState({ access_mode: 'read'})}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>取消編輯</Text>\n                </TouchableHighlight>\n                : null\n              }\n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              <TouchableHighlight\n                disabled={show_editor !== ''}\n                style={{\n                  height: '100%',\n                  padding: 10,\n                  justifyContent: 'center',\n                  backgroundColor: 'rgba(255,255,255,0.4)'\n                }}\n                onPress={() => this.handleClickConfirmButton()}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>\n                  {access_mode === 'read' ?\n                    '編輯'\n                    : access_mode === 'create' ?\n                      '新增'\n                      : access_mode === 'edit' ?\n                        '送出'\n                        : null\n                  }\n                </Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n          }\n        </View>\n      </KeyboardAvoidingView>\n    )\n  }\n}","import React, {useEffect, useState} from 'react'\nimport {\n    View, TouchableOpacity, Text, Animated, ScrollView, Alert, SectionList, Dimensions, Platform\n} from 'react-native'\nimport MedicationRequestMain from './medicationrequestmain'\nimport { formatDate, beautifyTime, beautifyDate, beautifyMonthDate, get } from '../util'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport { getMedRequestSuccess } from '../../redux/parent/actions/index'\nimport ENV from '../../variables'\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nconst { width } = Dimensions.get('window')\n\nconst MedicationRequestPage = (props) => {\n    const location = useLocation();\n    let navigate = useNavigate();\n\n    const [state, setState] = useState({\n        today: new Date(),\n        tomorrow: new Date(),\n        SlideInRight: new Animated.Value(0),\n        SlideInLeft: new Animated.Value(0),\n        total_height: 1,\n        total_width: 1,\n        height: 0,\n        width: 0,\n        left: 0,\n        top: 0,\n        requests: [],\n        day_of_week: ['天', '一', '二', '三', '四', '五', '六'],\n        selected_request_index: -1\n    })\n\n    useEffect(() => {\n        console.log('init')\n        // const { selected_request_index } = this.props.route.params\n        const { tomorrow } = state\n        tomorrow.setDate(tomorrow.getDate() + 1)\n        setState({\n            ...state,\n            tomorrow\n        })\n        fetchMedicationRequest()\n        // initializePage()\n        // if (selected_request_index !== undefined) {\n        //     // console.log(selected_request_index)\n        //     this.selectRequest(selected_request_index)\n        // }\n        // console.log('location.state, ', location.state)\n    }, [])\n\n    const isIOS = () => {\n        return Platform.OS === 'ios'\n    }\n\n    const fetchMedicationRequest = async() => {\n        // const { isConnected } = props\n        // if (!isConnected) {\n        //     alert('網路連不到! 請稍後再試試看')\n        //     return\n        // }\n        const {student_id} = location.state\n        const date = formatDate(new Date())\n        const response = await get(`/medicationrequest/student/${student_id}?date=${date}`)\n        const { success, statusCode, message, data } = response\n        console.log('fetchMedicationRequest: ', response)\n        if (!success) {\n            alert('Sorry 取得托藥單時電腦出狀況了！請稍後再試試或請截圖和與工程師聯繫\\n\\n' + message)\n            return\n        }\n        denormalize(data)\n        setState({ ...state, requests: data })\n        // onGoBack()\n    }\n\n    const denormalize = (object_array) => {\n        for (var i = 0; i < object_array.length; i++) {\n            object_array[i].title = new Date(object_array[i].title)\n            for (var j = 0; j < object_array[i].data.length; j++) {\n                object_array[i].data[j].timestamp = new Date(object_array[i].data[j].timestamp)\n            }\n        }\n    }\n\n    const initializePage = () => {\n        Animated.sequence([\n            Animated.timing(\n                this.state.SlideInRight, \n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ),\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            )\n        ]).start()\n        \n    }\n\n    const viewRequest = () => {\n        this.setState({\n            SlideInLeft: new Animated.Value(0)\n        }, () => {\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ).start()\n        })\n    }\n\n    const selectRequest = (index) => {\n        const access_mode = this.refs['main'].fetchAccessMode()\n        if (access_mode === 'edit') {\n            alert('還在編輯中喔請完成再離開 多謝')\n            return\n        }\n        setState({ ...state, selected_request_index: index })\n    }\n\n    const onCreateRequestSuccess = async(request_id) => {\n        await fetchMedicationRequest()\n        const { requests } = state\n        get_todays_requests(requests)\n        let new_request_index = -1\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id === request_id) {\n                new_request_index = i\n                break\n            }\n        }\n        setState({\n            ...state,\n            selected_request_index: new_request_index\n        })\n    }\n\n    const get_todays_requests = (object_array) => {\n        let med_requests = []\n        for (var i = 0; i < object_array.length; i++) {\n            const timestamp = new Date(object_array[i].timestamp)\n            if (timestamp.toDateString() === (new Date).toDateString()) {\n                object_array[i].timestamp = timestamp\n                med_requests.push(object_array[i])\n            } else break\n        }\n        props.getMedRequestSuccess(med_requests)\n    }\n\n    const onDeleteRequestSuccess = (deleted_request_id) => {\n        const { requests } = state\n        const updated_requests = []\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id !== deleted_request_id) {\n                updated_requests.push(requests[i])\n            }\n        }\n        setState({\n            ...state,\n            requests: updated_requests,\n            selected_request_index: 0\n        })\n        get_todays_requests(updated_requests)\n    }\n\n    const deleteRequestConfirm = (request_id) => {\n        const confirmed = confirm('確定要刪除？')\n        if (confirmed) {\n            deleteRequest(request_id)\n        }\n    }\n\n    const deleteRequest = (request_id) => {\n        // const { isConnected } = props\n        // if (!isConnected) {\n        //     alert('網路連不到! 請稍後再試試看')\n        //     return\n        // }\n        const { class_id } = location.state\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request_id}`, {\n          method: 'DELETE',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            class_id\n          })\n        })\n          .then((res) => res.json())\n          .then((resJson) => {\n            const { statusCode, message, data } = resJson\n            if (statusCode > 200 || message === 'Internal Server Error') {\n              alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n              return\n            }\n            fetchMedicationRequest()\n          })\n          .catch(err => {\n            alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n          })\n      }\n\n\n        const { SlideInRight, SlideInLeft, total_width, requests, today, tomorrow, day_of_week, selected_request_index } = state\n        const { student_id, class_id } = location.state\n        const selected_request = requests[selected_request_index]\n        return (\n            <View\n                style={{\n                    flex: 1,\n                    paddingHorizontal: 20\n                }}\n            >\n                {requests.length === 0 && \n                    <View style={{ padding: 20, justifyContent: 'center', alignItems: 'center' }}>\n                        <Text style={{ fontSize: 50 }}>無托藥單</Text>\n                    </View>\n                }\n                <SectionList\n                    sections={requests}\n                    keyExtractor={(item, index) => item + index}\n                    renderItem={({ item, index, section }) => \n                        <View \n                            style={{ \n                                width: '100%', \n                                aspectRatio: 5, \n                                flexDirection: 'row', \n                                marginVertical: 7, \n                                justifyContent: 'space-between', \n                                alignItems: 'center'\n                            }}\n                        >\n                            <TouchableOpacity \n                                style={{ \n                                    width:'65%',\n                                    height: '100%',\n                                    padding: 20, \n                                    backgroundColor: '#368cbf',\n                                    borderRadius: 40,\n                                    justifyContent: 'center',\n                                    alignItems: 'center'\n                                }}\n                                onPress={() => navigate('/add-med-request', {\n                                    state: {\n                                        // onGoBack: () => fetchMedicationRequest(),\n                                        student_id,\n                                        class_id,\n                                        index,\n                                        data: section.data\n                                    }\n                                })}\n                            >\n                                <Text style={{ fontSize: 30 }}>{beautifyTime(item.timestamp)}</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity\n                                style={{ \n                                    width:'30%', \n                                    height: '100%',\n                                    padding: 20, \n                                    backgroundColor: '#fa625f', \n                                    justifyContent: 'center',\n                                    borderRadius: 40\n                                }}\n                                onPress={() => deleteRequestConfirm(item.id)}\n                            >\n                                <Text style={{ fontSize: width * 0.07, textAlign: 'center' }}>\n                                    刪除\n                                </Text>\n                            </TouchableOpacity>\n                        </View>\n                    }\n                    renderSectionHeader={({ section: { title } }) => (\n                        <View\n                            style={{ \n                                width: '100%', \n                                backgroundColor: 'rgba(0,0,0,0.5)', \n                                flexDirection: 'row', \n                                alignItems: 'center', \n                                justifyContent: 'space-between',\n                                padding: isIOS() ? 20 : 12,\n                                marginTop: 15,\n                                marginBottom: 7,\n                                borderRadius: 40\n                            }}\n                        >\n                            <Text style={{ fontSize: 30, color: 'white' }}>{`${beautifyMonthDate(title)}`}</Text>\n                            <Text style={{ fontSize: 30, color: 'white' }}>{`星期${day_of_week[title.getDay()]}`}</Text>\n                        </View>\n                    )}\n                />\n\n                <View style={{ width: '100%', paddingVertical: 10, justifyContent: 'center', backgroundColor: 'transparent' }}>\n                    <TouchableOpacity\n                        style={{ backgroundColor: '#f4d41f', padding: isIOS() ? 20 : 12, justifyContent: 'center', borderRadius: 40 }}\n                        onPress={() => navigate('/add-med-request', {\n                            state: {\n                                // onGoBack: () => fetchMedicationRequest(),\n                                student_id, \n                                class_id,\n                                index: -1,\n                                data: null\n                            }\n                        })}\n                    >\n                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>\n                            新增\n                        </Text>\n                    </TouchableOpacity>\n                </View>\n\n                \n            </View>\n        )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({getMedRequestSuccess}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MedicationRequestPage)","import React, { forwardRef, useState, useImperativeHandle, useEffect } from 'react'\nimport { \n    View, \n    Text,\n    Platform,\n    StyleSheet,\n    TouchableOpacity,\n    TextInput,\n    Dimensions } from 'react-native'\nimport { formatDate, beautifyMonthDate } from '../util'\nimport PickerComponent from '../picker'\nimport Modal from '../modal'\nimport TimeModal from './timemodal'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\nimport { useNavigate } from 'react-router-dom'\n\nconst { width, height } = Dimensions.get('window')\n\nconst options = [\n    { value: \"感冒\", label: \"感冒\" },\n    { value: '流感', label: '流感' },\n    { value: '腸病毒', label: '腸病毒' },\n    { value: '水痘', label: '水痘' },\n    { value: '腸胃炎', label: '腸胃炎' },\n    { value: '其他', label: '其他' },\n    { value: 'Cancel', label: '返回' }\n]\n\nconst AbsenceExcuse = forwardRef((props, ref) => {\n    const navigate = useNavigate()\n\n    const [state, setState] = useState({\n        max_date: (new Date()).setDate((new Date()).getDate() + 30),\n        cached_date: null,\n        startDate: new Date(),\n        endDate: new Date(),\n        childIsSick: 0,\n        excuse_type: 'none-medical',\n        editing_other_option: false,\n        days: ['天', '一', '二', '三', '四', '五', '六'],\n        months: ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十', '十一', '十二'],\n        access_mode: 'create',\n        note: '',\n        absence_time: 'all_day',\n        scrollHeight: '100%',\n        request_id: ''\n            \n    })\n\n    const [showStartDatePicker, setShowStartDatePicker] = useState(false)\n    const [showEndDatePicker, setShowEndDatePicker] = useState(false)\n    const [showSelect, setShowSelect] = useState(false)\n\n    useImperativeHandle(ref, () => ({\n        fetchAccessMode() {\n            return state.access_mode\n        },\n        duplicateDateFound() {\n            const { cached_date } = state\n            setState({\n                ...state,\n                startDate: cached_date,\n                cached_date: null\n            })\n        }\n    }))\n\n    useEffect(() => {\n        const { request } = props\n        if (!request) {\n            setState({\n                ...state,\n                startDate: new Date(),\n                endDate: new Date(),\n                childIsSick: 0,\n                excuse_type: 'none-medical',\n                note: '',\n                absence_time: 'all_day',\n                access_mode: 'create',\n                cached_date: null,\n                scrollHeight: '100%',\n                request_id: ''\n            })\n            return\n        }\n        const { id, date, excuse_type, note, absence_time } = request\n        setState({\n            ...state,\n            startDate: date,\n            endDate: null,\n            childIsSick: excuse_type === 'none-medical' ? 0 : 1,\n            excuse_type,\n            note,\n            absence_time,\n            access_mode: 'read',\n            cached_date: null,\n            request_id: id\n        })\n    }, [props.request])\n\n    const isIOS = () => {\n        return Platform.OS === 'ios'\n    }\n\n    const showSelectOption = () => {\n        setState({ ...state, childIsSick: 1 })\n        setShowSelect(true)\n    }\n\n    const setChildSick = () => {\n        setState({ ...state, childIsSick: 1 })\n    }\n    \n    const setChildNotSick = () => {\n        const { access_mode } = state\n        if (access_mode === 'read') return\n        setState({ ...state, childIsSick: 0, excuse_type: 'none-medical' })\n    }\n\n    const handleSelectStatus = (excuse_type) => {\n        if (excuse_type === 'Cancel') {\n            setShowSelect(false)\n        } else if (excuse_type === '其他') {\n            setState({\n                ...state,\n                editing_other_option: true,\n                excuse_type: '其他'\n            })\n            setShowSelect(false)\n        } else {\n            setState({\n                ...state,\n                excuse_type\n            })\n            setShowSelect(false)\n        }\n    }\n\n    const editorOnBlur = () => {\n        const { excuse_type } = state\n        setState({\n            ...state,\n            editing_other_option: false,\n            childIsSick: excuse_type === '' ? 0 : 1,\n            excuse_type: excuse_type === '' ? 'none-medical' : excuse_type\n        })\n    }\n\n    const setStartDate = (date) => {\n        if (Platform.OS === 'ios') {\n            iosSetStartDate(date)\n        } else { //android\n            androidSetStartDate(date)\n        }\n    }\n\n    const iosSetStartDate = (date) => {\n        const { endDate } = state\n        if (state.access_mode === 'edit') {\n            const { cached_date, startDate } = state\n            setState({\n                ...state,\n                cached_date: cached_date === null ? startDate : cached_date,\n                startDate: date\n            })\n        } else {\n            setState({\n                ...state,\n                startDate: date,\n                endDate: date < endDate ? endDate : date\n            })\n        }\n    }\n\n    const androidSetStartDate = (date) => {\n        if (date !== undefined) {\n            const { endDate } = state\n            if (state.access_mode === 'edit') {\n                const { cached_date, startDate } = state\n                const { id } = props.request\n                setState({\n                    ...state,\n                    cached_date: cached_date === null ? startDate : cached_date,\n                    startDate: date\n                })\n                setShowStartDatePicker(false)\n                props.checkUniqueStudentDate(id, date)\n            } else { // create\n                setState({\n                    ...state,\n                    startDate: date,\n                    endDate: date < endDate ? endDate : date\n                })\n                setShowStartDatePicker(false)\n            }\n        } else {\n            setShowStartDatePicker(false)\n        }\n    }\n\n    const onEndEditingStartDate = () => {\n        const {startDate } = state\n        if (state.access_mode === 'edit') {\n            const { id } = props.request\n            props.checkUniqueStudentDate(id, startDate)\n        }\n        setShowStartDatePicker\n    }\n\n    const setEndDate = (date) => {\n        if (Platform.OS === 'ios') {\n            iosSetEndDate(date)\n        } else { //android\n            androidSetEndDate(date)\n        }\n    }\n\n    const iosSetEndDate = (date) => {\n        const { startDate } = state\n        setState({\n            ...state,\n            startDate: date < startDate ? date : startDate,\n            endDate: date\n        })\n    }\n\n    const androidSetEndDate = (date) => {\n        if (date !== undefined) {\n            const { startDate } = state\n            setState({\n                ...state,\n                startDate: date < startDate ? date : startDate,\n                endDate: date\n            })\n        } else {\n            setShowEndDatePicker(false)\n        }\n    }\n\n    const getDayDifference = () => {\n        const { startDate, endDate } = state\n        const oneDay = 24 * 60 * 60 * 1000;\n        return Math.round(Math.abs((endDate - startDate) / (oneDay))) + 1\n    }\n\n    const onValueChange = (value) => {\n        setState({ ...state, excuse_type: value })\n    }\n\n    const setScrollHeight = (scrollHeight) => {\n        setState({ ...state, scrollHeight })\n    }\n\n    const handleClickConfirmButton = () => {\n        const { access_mode } = state\n        if (access_mode === 'read') {\n            setState({\n                ...state,\n                access_mode: 'edit'\n            })\n        } else if (access_mode === 'create') {\n            sendAbsenceNote()\n        } else if (access_mode === 'edit') {\n            const { id } = props.request\n            editAbsenceNote(id)\n        }\n    }\n\n    const sendAbsenceNote = () => {\n        const { excuse_type, note, absence_time } = state\n        const { student_id, class_id, school_id, isConnected } = props\n        const startDate = formatDate(state.startDate)\n        const endDate = formatDate(state.endDate)\n        const request_body = {\n            student_id,\n            class_id,\n            school_id,\n            startDate,\n            endDate,\n            excuse_type,\n            note,\n            absence_time\n        }\n\n        // if (!isConnected) {\n        //     alert('網路連不到! 請稍後再試試看')\n        //     return\n        // }\n\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！ 請截圖和與工程師聯繫' + message)\n                    return\n                }\n                props.onCreateRequestSuccess(data.id)\n                navigate(-1)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！ 請截圖和與工程師聯繫: error occurred when sending absence request')\n            })\n    }\n\n    const editAbsenceNote = (request_id) => {\n        const { excuse_type, note, absence_time } = state\n        const { class_id } = props\n        const date = formatDate(state.startDate)\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id,\n                excuse_type,\n                note,\n                date,\n                class_id,\n                absence_time\n            })\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                props.onCreateRequestSuccess(request_id)\n                navigate(-1)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when editing absence request')\n            })\n    }\n\n    const deleteRequestConfirm = () => {\n        const confirmed = confirm('確定要刪除？')\n        if (confirmed) {\n            deleteRequest()\n        }\n    }\n\n    const deleteRequest = () => {\n        const { id } = props.request\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id: id\n            })\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                props.onDeleteRequestSuccess(id)\n                navigate(-1)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting absence request')\n            })\n    }\n\n        const {\n            max_date,\n            access_mode,\n            startDate,\n            endDate,\n            excuse_type,\n            editing_other_option,\n            note,\n            absence_time,\n            scrollHeight,\n            request_id } = state\n        if (showStartDatePicker) {\n            return (\n                <View style={{ height, marginTop: -120 }}>\n                    <TimeModal\n                        start_date={startDate}\n                        datetime_type={'date'}\n                        hideModal={() => setShowStartDatePicker(false)}\n                        selectDatetimeConfirm={(date) => setStartDate(date)}\n                        minDatetime={new Date()}\n                        maxDatetime={max_date}\n                        paddingVertical={100}\n                    />\n                </View>\n            )\n        }\n        if (showEndDatePicker) {\n            return (\n                <View style={{ height, marginTop: -120 }}>\n                    <TimeModal\n                        start_date={endDate}\n                        datetime_type={'date'}\n                        hideModal={() => setShowEndDatePicker(false)}\n                        selectDatetimeConfirm={(date) => setEndDate(date)}\n                        minDatetime={new Date()}\n                        maxDatetime={max_date}\n                        paddingVertical={100}\n                    />\n                </View>\n            )\n        }\n        if (showSelect) {\n            return (\n                <View style={{ padding: 30, height: '100%', alignItems: 'center' }}>\n                    {options.map((option, index) => {\n                        const { label, value } = option\n                        return (\n                            <TouchableOpacity\n                                key={index}\n                                style={{ width: '50%', padding: 15, backgroundColor: 'white', borderWidth: 1, borderColor: 'lightgrey' }}\n                                onPress={() => handleSelectStatus(value)}\n                            >\n                                <Text style={{ fontSize: 25 }}>{label}</Text>\n                            </TouchableOpacity>\n                        )\n                    })}\n                </View>\n            )\n        }\n        return (\n                    <View style={{ paddingHorizontal: 30, paddingVertical: 30, height: '100%' }}>\n\n                        <View\n                            style={{\n                                // flex: 1,\n                                flexDirection: 'row',\n                                // justifyContent: 'space-evenly',\n                                // alignItems: 'center',\n                            }}\n                        >\n                            <TouchableOpacity\n                                disabled={access_mode === 'read'}\n                                style={{\n                                    flex: 1,\n                                    padding: 15,\n                                    // height: '90%',\n                                    justifyContent: 'center',\n                                    backgroundColor: state.childIsSick === 0 ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                    borderTopLeftRadius: 30,\n                                    borderBottomLeftRadius: 30\n                                }}\n                                underlayColor='#368cbf'\n                                onPress={() => setChildNotSick()}>\n                                <Text style={{ fontSize: 25, color: state.childIsSick === 0 ? 'white' : 'black', textAlign: 'center' }}>事假</Text>\n                            </TouchableOpacity>\n\n                            {editing_other_option ? \n                                <View\n                                    style={{\n                                        flex: 1,\n                                        padding: 15,\n                                        // height: '90%',\n                                        borderTopRightRadius: 30,\n                                        borderBottomRightRadius: 30,\n                                        justifyContent: 'center',\n                                        backgroundColor: state.childIsSick ? '#368cbf' : 'rgba(0,0,0,0.1)'\n                                    }}\n                                >\n                                    <TextInput \n                                        autoFocus={true}\n                                        selectTextOnFocus={true}\n                                        style={{ fontSize: 25, color: state.childIsSick ? 'white' : 'black', textAlign: 'center', paddingVertical: -1 }}\n                                        value={excuse_type}\n                                        onChangeText={excuse_type => setState({ ...state, excuse_type })}\n                                        onBlur={() => editorOnBlur()}\n                                    />\n                                </View>\n                                :\n                                <PickerComponent\n                                    style={{\n                                        flex: 1,\n                                        padding: 15,\n                                        // height: '90%',\n                                        borderTopRightRadius: 30,\n                                        borderBottomRightRadius: 30,\n                                        justifyContent: 'center',\n                                        backgroundColor: state.childIsSick === 0 ? 'rgba(0,0,0,0.1)' : '#368cbf'\n                                    }}\n                                    disabled={access_mode === 'read'}\n                                    textStyle={{ fontSize: 25, color: state.childIsSick ? 'white' : 'black', textAlign: 'center' }}\n                                    selectedValue={excuse_type === 'none-medical' ? '病假' : excuse_type}\n                                    showSelect={() => showSelectOption()}\n                                    // options={[\n                                    //     \"感冒\",\n                                    //     \"流感\",\n                                    //     \"腸病毒\",\n                                    //     \"水痘\",\n                                    //     \"腸胃炎\",\n                                    //     \"其他\",\n                                    //     \"Cancel\"\n                                    // ]}\n                                    handleOnClick={() => setChildSick()}\n                                    handleSelectValue={(excuse_type) => handleSelectStatus(excuse_type)}\n                                />\n                            }\n                        </View>\n                        <View style={{ width: '100%' }}>\n                            {endDate === null ?\n                                <View\n                                    style={{\n                                        paddingVertical: 20,\n                                        width: '70%',\n                                        alignSelf: 'center'\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        disabled={access_mode === 'read'}\n                                        style={{ backgroundColor: 'rgba(0,0,0,0.4)' }}\n                                        onPress={() => {\n                                            if (access_mode === 'read') return\n                                            setShowStartDatePicker(true)\n                                        }}\n                                    >\n                                        <View style={{ padding: 15, justifyContent: 'center' }}>\n                                            <View style={{}}>\n                                                <Text style={{ color: 'white', fontSize: width*0.12, fontWeight: 'bold' }}>\n                                                    {startDate.getFullYear()}\n                                                </Text>\n                                            </View>\n                                            <View style={{}}>\n                                                <Text style={{ color: 'white', fontSize: width*0.12, fontWeight: 'bold' }}>\n                                                    {startDate.getMonth() + 1}/{startDate.getDate()}\n                                                </Text>\n                                            </View>\n                                            <View style={{}}>\n                                                <Text style={{ fontSize: width*0.12, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{state.days[startDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </View>\n                                    </TouchableOpacity>\n                                </View>\n                                :\n                                <View\n                                    style={{\n                                        // flexDirection: 'row',\n                                        alignItems: 'center',\n                                        paddingVertical: 15\n                                    }}\n                                >\n                                    <View style={{ width: '100%' }}>\n                                        <Text style={{ color: 'rgba(0,0,0,0.4)', fontSize: width*0.1 }}>開始</Text>\n                                        <TouchableOpacity\n                                            style={{ backgroundColor: 'rgba(0,0,0,0.4)', padding: 15 }}\n                                            onPress={() => setShowStartDatePicker(true)}\n                                        >\n                                            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                                                <Text style={{ color: 'white', fontSize: width*0.09, fontWeight: 'bold' }}>\n                                                    {beautifyMonthDate(startDate)}\n                                                </Text>\n                                                <Text style={{ fontSize: width*0.09, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{state.days[startDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                    </View>\n\n                                    <View style={{ width: '100%', alignItems: 'center', justifyContent: 'center', padding: 20 }}>\n                                        <Text style={{ fontSize: 25 }}>\n                                            總計 {getDayDifference()} 天\n                                        </Text>\n                                    </View>\n\n                                    <View style={{width: '100%' }}>\n                                        <TouchableOpacity\n                                            style={{ backgroundColor: 'rgba(0,0,0,0.4)', padding: 15 }}\n                                            onPress={() => setShowEndDatePicker(true)}\n                                        >\n                                            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                                                <Text style={{ color: 'white', fontSize: width*0.09, fontWeight: 'bold' }}>\n                                                    {beautifyMonthDate(endDate)}\n                                                </Text>\n                                                <Text style={{ fontSize: width*0.09, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{state.days[endDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                        <Text style={{ color: 'rgba(0,0,0,0.4)', fontSize: width*0.1, textAlign: 'right' }}>結束</Text>\n                                    </View>\n                                </View>\n                            }\n\n                            {/* NOTE */}\n                            <View\n                                style={{ flex: 1,width: '100%', alignItems: 'center' }}\n                            >\n                                <TextInput\n                                    key={request_id}\n                                    editable={access_mode !== 'read'}\n                                    placeholder='備註'\n                                    placeholderTextColor='grey'\n                                    multiline\n                                    // textAlignVertical='center'\n                                    scrollEnabled={false}\n                                    // blurOnSubmit={true}\n                                    value={note}\n                                    style={{\n                                        width: '100%',\n                                        height: scrollHeight,\n                                        backgroundColor: '#eaf8f8',\n                                        borderRadius: 3,\n                                        fontSize: 25,\n                                        paddingTop: 20,\n                                        paddingBottom: 20,\n                                        paddingHorizontal: 20,\n                                        textAlignVertical: 'center'\n                                    }}\n                                    onChangeText={note => setState({ ...state, note })}\n                                    onChange={(e) => setScrollHeight(e.target.scrollHeight)}\n                                    onLayout={(event) => {\n                                        const { scrollHeight } = event.nativeEvent.target\n                                        setState({\n                                            ...state,\n                                            scrollHeight\n                                        })\n                                    }}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    flex: 1,\n                                    width: '100%',\n                                    alignItems: 'center',\n                                    flexDirection: 'row',\n                                    justifyContent: 'space-between'\n                                }}\n                            >\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 15,\n                                        justifyContent: 'center'\n                                    }}\n                                    underlayColor='transparent'\n                                    onPress={() => {\n                                        if (access_mode === 'read') return\n                                        setState({ ...state, absence_time: 'all_day' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'all_day' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'all_day' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        全天\n                                    </Text>\n                                </TouchableOpacity>\n\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 10,\n                                        justifyContent: 'center',\n                                        alignItems: 'center'\n                                    }}\n                                    underlayColor='transparent'\n                                    onPress={() => {\n                                        if (access_mode === 'read') return\n                                        setState({ ...state, absence_time: 'morning' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'morning' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'morning' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        早上\n                                    </Text>\n                                </TouchableOpacity>\n\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 10,\n                                        justifyContent: 'center',\n                                        alignItems: 'flex-end'\n                                    }}\n                                    underlayColor='transparent'\n                                    onPress={() => {\n                                        if (access_mode === 'read') return\n                                        setState({ ...state, absence_time: 'evening' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'evening' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'evening' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        下午\n                                    </Text>\n                                </TouchableOpacity>\n                            </View>\n                            \n                            <View\n                                style={{\n                                    marginVertical: 20,\n                                    width: '100%',\n                                    flexDirection: 'row',\n                                    // padding: 10,\n                                    alignItems: 'center',\n                                    justifyContent: 'center'\n                                }}\n                            >\n                                {access_mode !== 'edit' ?\n                                    <TouchableOpacity\n                                        style={{\n                                            // height: '80%',\n                                            width: '100%',\n                                            padding: 20,\n                                            justifyContent: 'center',\n                                            backgroundColor: 'rgba(0,0,0,0.1)'\n                                        }}\n                                        onPress={() => handleClickConfirmButton()}\n                                    >\n                                        <Text style={{ fontSize: 25, textAlign: 'center' }}>\n                                            {access_mode === 'read' ?\n                                                '編輯'\n                                                : access_mode === 'create' ?\n                                                    '新增'\n                                                    : null\n                                            }\n                                        </Text>\n                                    </TouchableOpacity>\n                                    : access_mode === 'edit' ?\n                                        <View style={{ width: '100%', flex: 1, flexDirection: 'row' }}>\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: '#fa625f'\n                                                }}\n                                                onPress={() => deleteRequestConfirm()}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>刪除</Text>\n                                            </TouchableOpacity>\n\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: 'rgba(0,0,0,0.1)'\n                                                }}\n                                                onPress={() => setState({ ...state, access_mode: 'read'})}\n                                            >\n                                                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消編輯</Text>\n                                            </TouchableOpacity>\n\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: '#00c07f'\n                                                }}\n                                                onPress={() => handleClickConfirmButton()}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>送出</Text>\n                                            </TouchableOpacity>\n                                        </View>\n                                        : null\n                                }\n                            </View>\n                        </View>\n                    </View>\n        )\n})\n\nconst styles = StyleSheet.create({\n    dateContainer: {\n        flex: 1,\n        width: '35%',\n        justifyContent: 'center'\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\n// export default connect(mapStateToProps, null) (AbsenceExcuse)\nexport default AbsenceExcuse","import React, { useEffect, useState, useRef } from 'react'\nimport {\n    View, TouchableOpacity, Text, Animated, ScrollView, Alert, KeyboardAvoidingView, Platform, Dimensions\n} from 'react-native'\nimport AbsenceExcuse from './absenceexcuse'\nimport { formatDate } from '../util'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\nimport { useLocation } from 'react-router-dom'\n\nconst { height } = Dimensions.get('window')\n\nconst AbsenceExcusePage = (props) => {\n\n    const location = useLocation()\n    const absenceExcuse = useRef()\n\n    const [state, setState] = useState({\n        todays_date: formatDate(new Date()),\n        SlideInRight: new Animated.Value(0),\n        SlideInLeft: new Animated.Value(0),\n        total_height: 1,\n        total_width: 1,\n        height: 0,\n        width: 0,\n        left: 0,\n        top: 0,\n        requests: [],\n        day_of_week: ['天', '一', '二', '三', '四', '五', '六'],\n        selected_request_index: -1\n    })\n\n    useEffect(() => {\n        // const { isConnected } = this.props\n        // if (!isConnected) {\n        //     alert('網路連不到! 請稍後再試試看')\n        //     return\n        // }\n        fetchAbsenceExcuse()\n        // initializePage()\n    }, [])\n\n    const isIOS = () => {\n        return Platform.OS === 'ios'\n    }\n\n    const fetchAbsenceExcuse = async() => {\n        const { student_id } = location.state\n        const date = formatDate(new Date())\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse/student/${student_id}?date=${date}`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                denormalize(data)\n                setState({ ...state, requests: data })\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when fetching absence request')\n            })\n    }\n\n    const denormalize = (data) => {\n        for (var i = 0; i < data.length; i++) {\n            data[i].date = new Date(data[i].date)\n        }\n    }\n\n    const initializePage = () => {\n        Animated.sequence([\n            Animated.timing(\n                state.SlideInRight, \n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ),\n            Animated.timing(\n                state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            )\n        ]).start()\n        \n    }\n\n    const selectRequest = (index) => {\n        const access_mode = absenceExcuse.current.fetchAccessMode()\n        if (access_mode === 'edit') {\n            alert('還在編輯中喔請完成再離開 多謝')\n            return\n        }\n        setState({ ...state, selected_request_index: index })\n    }\n\n    const onCreateRequestSuccess = async(request_id) => {\n        await fetchAbsenceExcuse()\n        const { requests } = state\n        let new_request_index = -1\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id === request_id) {\n                new_request_index = i\n                break\n            }\n        }\n        setState({\n            ...state,\n            selected_request_index: new_request_index\n        })\n    }\n\n    const onDeleteRequestSuccess = (deleted_request_id) => {\n        const { requests } = state\n        const updated_requests = []\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id !== deleted_request_id) {\n                updated_requests.push(requests[i])\n            }\n        }\n        setState({\n            ...state,\n            requests: updated_requests,\n            selected_request_index: 0\n        })\n    }\n\n    const checkUniqueStudentDate = (id, date) => {\n        const { requests } = state\n        var duplicateDateFound = false\n        for (var i = 0; i < requests.length; i++) {\n            if (id !== requests[i].id && formatDate(date) === formatDate(requests[i].date)) {\n                duplicateDateFound = true\n                break\n            }\n        }\n\n        if (!duplicateDateFound) {\n            return\n        }\n\n        alert('已經在這個日期請過假了')\n\n        absenceExcuse.current.duplicateDateFound()\n    }\n\n        const { SlideInRight, SlideInLeft, total_width, requests, todays_date, day_of_week, selected_request_index } = state\n        const { student_id, class_id, school_id } = location.state\n        const selected_request = requests[selected_request_index]\n        console.log('requests: ', requests)\n        console.log('selected_request: ', selected_request)\n        console.log('selected_request_index: ', selected_request_index)\n\n        return (\n            <KeyboardAvoidingView\n                style={{flex: 1, width: '100%', alignItems: 'center' }}\n                behavior={'padding'}\n                keyboardVerticalOffset={85}\n                enabled\n            >\n                <ScrollView style={{ width: '100%'}}>\n                <View style={{ width: '100%' }}>\n                    <ScrollView\n                        horizontal\n                        showsHorizontalScrollIndicator={false}\n                    >\n                        {requests.map((request, index) => {\n                            const day = day_of_week[request.date.getDay()]\n                            const date = `${request.date.getMonth()+1}/${request.date.getDate()}`\n                            return (\n                                <Animated.View\n                                    key={request.id}\n                                    style={{\n                                        padding: 10,\n                                        transform: [\n                                            {\n                                                translateX: SlideInRight.interpolate({\n                                                    inputRange: [0,1],\n                                                    outputRange: [total_width, 0]\n                                                })\n                                            }\n                                        ]\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        style={{\n                                            height: 100,\n                                            width: 100,\n                                            padding: 10,\n                                            backgroundColor: selected_request_index === index ? '#368cbf' : 'rgba(0,0,0,0.2)',\n                                            borderRadius: 10\n                                        }}\n                                        underlayColor='#368cbf'\n                                        onPress={() => selectRequest(index)}\n                                    >\n                                        <View>\n                                            {formatDate(request.date) === todays_date ?\n                                                <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>今天</Text>\n                                                : <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>星期{day}</Text>\n                                            }\n                                            <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>{date}</Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                </Animated.View>\n                            )\n                        })}\n                        \n                        <Animated.View\n                            style={{\n                                padding: 10,\n                                transform: [\n                                    {\n                                        translateX: SlideInRight.interpolate({\n                                            inputRange: [0,1],\n                                            outputRange: [total_width, 0]\n                                        })\n                                    }\n                                ]\n                            }}\n                        >\n                            <TouchableOpacity\n                                style={{\n                                    height: 100,\n                                    width: 100,\n                                    padding: 10,\n                                    backgroundColor: selected_request_index === -1 ? '#368cbf' : 'rgba(0,0,0,0.2)',\n                                    borderRadius: 10\n                                }}\n                                underlayColor='#ff8944'\n                                // ref={'welrnf'}\n                                onPress={() => selectRequest(-1)}\n                            >\n                                <View>\n                                    <Text style={{ fontSize: 20, color: selected_request_index === -1 ? 'white' : 'black' }}>新增</Text>\n                                </View>\n                            </TouchableOpacity>\n                        </Animated.View>\n                    </ScrollView>\n                </View>\n\n                <View\n                    style={{\n                        width: '100%',\n                        borderRadius: 40,\n                        backgroundColor: '#b5e9e9'\n                    }}  \n                >\n                    <AbsenceExcuse\n                        ref={absenceExcuse}\n                        student_id={student_id}\n                        class_id={class_id}\n                        school_id={school_id}\n                        request={selected_request}\n                        onCreateRequestSuccess={(request_id) => onCreateRequestSuccess(request_id)}\n                        onDeleteRequestSuccess={(deleted_request_id) => onDeleteRequestSuccess(deleted_request_id)}\n                        checkUniqueStudentDate={(id, date) => checkUniqueStudentDate(id, date)}\n                    />\n                </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps, null) (AbsenceExcusePage)","\nimport React, { useState } from 'react'\nimport { View, Text, TouchableOpacity, TextInput, KeyboardAvoidingView, ScrollView, Alert, Dimensions } from 'react-native'\nimport { formatDate, formatTime } from '../util'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\nimport { useLocation, useNavigate } from 'react-router-dom'\n\nconst { width, height } = Dimensions.get('window')\n\nconst PickupRequest = (props) => {\n    const location = useLocation()\n    const navigate = useNavigate()\n    const [state, setState] = useState({\n        time: null,\n        provided_times: ['5', '10', '15', '20', '25'],\n        colors: ['#ffe1d0', '#ffddb7', '#fff1b5', '#dcf3d0', '#b5e9e9'],\n        hightlighted_colors: ['#fa625f', '#ff8944', '#f4d41f', '#00c07f', '#368cbf'],\n        choose_other_option: false,\n        total_height: height - 55,\n        total_width: width\n    })\n\n    const onBlur = () => {\n        const { time, choose_other_option, provided_times } = state\n        if (choose_other_option && (time === '' || provided_times.includes(time))) {\n            setState({ ...state, choose_other_option: false })\n        } \n    }\n\n    const sendRequest = () => {\n        const { isConnected } = props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        const { child_id, school_id } = location.state\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/attendance/pickup-request`\n        const student_id = child_id\n        const arrival_time = new Date()\n        arrival_time.setMinutes(arrival_time.getMinutes() + parseInt(state.time))\n        const request_body = {\n            school_id,\n            student_id,\n            arrival_time: formatDate(arrival_time) + ' ' + formatTime(arrival_time)\n        }\n        fetch(query, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫 ' + message)\n                    return\n                }\n                navigate(-1)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending pickup request')\n            })\n    }\n\n        const { time, provided_times, colors, hightlighted_colors, choose_other_option, total_height, total_width } = state\n        return (\n            <KeyboardAvoidingView\n                style={{ flex: 1 }}\n                behavior=\"padding\"\n                keyboardVerticalOffset={100}\n                enabled\n            >\n                <ScrollView>\n                    <View\n                        style={{\n                            flex: 3,\n                            flexDirection: 'row',\n                            flexWrap: 'wrap',\n                            alignItems: 'center',\n                            justifyContent: 'center'\n                        }}\n                    >\n                        {provided_times.map((minute, index) => {\n                            return (\n                                <View\n                                    key={index}\n                                    style={{\n                                        width: '50%',\n                                        height: total_height*0.28,\n                                        // aspectRatio,\n                                        backgroundColor: time == minute ? hightlighted_colors[index] : colors[index],\n                                        alignItems: 'center',\n                                        justifyContent: 'center'\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        style={{\n                                            width: '90%',\n                                            height: '90%',\n                                            borderWidth: time == minute ? 5 : 0,\n                                            borderColor: 'white',\n                                            backgroundColor: time == minute ? hightlighted_colors[index] : colors[index]\n                                        }}\n                                        underlayColor={hightlighted_colors[index]}\n                                        onPress={() => setState({ ...state, time: minute, choose_other_option: false })}\n                                    >\n                                        <View style={{ flex:1, flexDirection:'row', justifyContent: 'center', alignItems: 'center' }}>\n                                            <Text style={{ fontSize: total_width*0.20 }}>{minute}</Text>\n                                            <Text style={{ fontSize: total_width*0.09 }}>分鐘</Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                </View>\n                            )\n                        })}\n                        \n                        \n                        <View\n                            style={{\n                                width: '50%',\n                                height: total_height*0.28,\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                backgroundColor: choose_other_option ? 'black' : 'white'\n                            }}\n                        >\n                            <TouchableOpacity\n                                    style={{\n                                        flexDirection: 'row',\n                                        width: '90%',\n                                        height: '90%',\n                                        backgroundColor: choose_other_option ? 'black' : 'white',\n                                        borderWidth: choose_other_option ? 5 : 0,\n                                        borderColor: 'white',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                    }}\n                                    onPress={() => setState({ ...state, choose_other_option: true, time: '' })}\n                            >\n                                {choose_other_option ?\n                                    <View\n                                        style={{\n                                            flexDirection: 'row',\n                                            justifyContent: 'center', \n                                            alignItems: 'center',\n                                            width: '100%'\n                                        }}\n                                    >\n                                        <TextInput\n                                            autoFocus={true}\n                                            selectTextOnFocus={true}\n                                            onBlur={() => onBlur()}\n                                            keyboardType='numeric'\n                                            value={time + ''}\n                                            style={{\n                                                fontSize: total_width*0.2,\n                                                color: 'white',\n                                                width: '100%'\n                                            }}\n                                            onChangeText={(time) => {\n                                                setState({ ...state, time })\n                                            }}\n                                        />\n                                            <Text style={{ fontSize: total_width*0.09, color: 'white' }}>分鐘</Text>                            \n                                    </View>\n                                    : <Text style={{ fontSize: 50 }}>其他</Text>\n                                }\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                    <View style={{ height: total_height*0.16 }}>\n                        <TouchableOpacity\n                            style={{\n                                flex: 1,\n                                backgroundColor: 'lightgrey',\n                                alignItems: 'center',\n                                justifyContent: 'center'\n                            }}\n                            onPress={() => sendRequest()}\n                        >\n                            <Text style={{ fontSize: 50 }}>送出</Text>\n                        </TouchableOpacity>\n                    </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (PickupRequest)","import React, {useEffect, useState} from 'react'\nimport { View, Text, TouchableOpacity, TextInput, ScrollView, Image,\n  KeyboardAvoidingView, Platform, Alert, Dimensions } from 'react-native'\nimport { formatDate, beautifyTime, beautifyMonthDate, post, formatTime } from '../util';\nimport TimeModal from './timemodal'\nimport Reloading from '../reloading'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst { width } = Dimensions.get('window')\n\nconst AddMedicationRequestPage = (props) => {\n\n  const location = useLocation()\n  const navigate = useNavigate()\n\n  const [state, setState] = useState({\n        isLoading: true,\n        request_id: null,\n        today: new Date(),\n        datetime_type: '',\n        // date: null,\n        time_array: [],\n        time_selected_index: null,\n        before_meal: null,\n        powder: false,\n        powder_refrigerated: false,\n        syrup: [],\n        gel: null,\n        other_type: null,\n        note: '',\n        administered: false,\n        teacher_name: '',\n        medicated_timestamp: null,\n        fever_entry: {\n          temperature: '',\n          powder: false,\n          powder_refrigerated: false,\n          syrup: [],\n          other_type: null\n        },\n        data: null,\n        index: -1,\n        access_mode: 'create',\n        scrollHeight: '100%',\n        date_array: [],\n        date_selected_index: null\n    })\n\n    const [showDateTimeModal, setShowDateTimeModal] = useState(false)\n\n  useEffect(() => {\n    const { index, data } = location.state\n\n    if (data === null) {\n      setState({\n        ...state,\n        date_array: [new Date()],\n        isLoading: false\n      })\n      return\n    }\n\n    switchRequest(index)\n  }, [])\n\n  const switchRequest = (index) => {\n    const { data } = location.state\n    const { id, timestamp, administered, fever_entry, medication, note, teacher_name, medicated_timestamp } = data[index]\n    // const { before_meal, powder, powder_refrigerated, syrup, gel, other_type } = medication\n    setState({\n      ...state,\n      index,\n      data,\n      request_id: id,\n      date_array: [timestamp],\n      time_array: [timestamp],\n      ...medication,\n      note,\n      fever_entry,\n      administered,\n      teacher_name,\n      medicated_timestamp: medicated_timestamp !== null ? new Date(medicated_timestamp) : null,\n      access_mode: 'read',\n      isLoading: false\n    })\n  }\n\n  const isIOS = () => {\n    if (Platform.OS === 'ios') {\n      return true\n    } else return false\n  }\n\n  const selectDatetimeConfirm = (datetime) => {\n    const { datetime_type } = state\n    if (datetime_type === 'date') {\n      handleDateSelected(datetime)\n    } else {\n      handleTimeSelected(datetime)\n    }\n    // const { datetime_type, time_array, time_selected_index } = this.state\n    // if (datetime_type === 'date') {\n    //   setState({\n    //     date: datetime,\n    //     showDateTimeModal: false\n    //   })\n    // } else if (time_selected_index !== null){\n    //   const updated_time_array = []\n    //   for(var i = 0; i < time_array.length; i++) {\n    //     if(i !== time_selected_index) {\n    //       updated_time_array.push(time_array[i])\n    //     } else {\n    //       updated_time_array.push(datetime)\n    //     }\n    //   }\n    //   setState({\n    //     time_array: updated_time_array,\n    //     time_selected_index: null,\n    //     showDateTimeModal: false\n    //   })\n    // } else {\n    //   setState({\n    //     time_array: [...this.state.time_array, datetime],\n    //     showDateTimeModal: false\n    //   })\n    // }\n  }\n\n  const handleDateSelected = (date) => {\n    const { date_array, date_selected_index } = state\n    if (date_selected_index !== null) {\n      let updated_date_array = []\n      for(var i = 0; i < date_array.length; i++) {\n        if(i !== date_selected_index) {\n          updated_date_array.push(date_array[i])\n        } else {\n          updated_date_array.push(date)\n        }\n      }\n      setState({\n        ...state,\n        date_array: updated_date_array,\n        date_selected_index: null\n      })\n      setShowDateTimeModal(false)\n    } else {\n      setState({\n        ...state,\n        date_array: [...date_array, date]\n      })\n      setShowDateTimeModal(false)\n    }\n  }\n\n  const handleTimeSelected = (time) => {\n    const { time_array, time_selected_index } = state\n    if (time_selected_index !== null){\n      let updated_time_array = []\n      for(var i = 0; i < time_array.length; i++) {\n        if(i !== time_selected_index) {\n          updated_time_array.push(time_array[i])\n        } else {\n          updated_time_array.push(time)\n        }\n      }\n      setState({\n        ...state,\n        time_array: updated_time_array,\n        time_selected_index: null\n      })\n      setShowDateTimeModal(false)\n    } else {\n      setState({\n        ...state,\n        time_array: [...time_array, time]\n      })\n      setShowDateTimeModal(false)\n    }\n  }\n\n  const removeDate = (index) => {\n    const { date_array } = state\n    date_array.splice(index, 1)\n    setState({\n      ...state,\n      date_array\n    })\n  }\n\n  const removeTime = (index) => {\n    const { time_array } = state\n    time_array.splice(index, 1)\n    setState({\n      ...state,\n      time_array\n    })\n  }\n\n  const onSelectSyrup = () => {\n    const { syrup } = state\n    setState({ \n      ...state,\n      syrup: syrup.length ? []\n        : [{\n          amount: '',\n          need_refrigerated: false,\n          note: ''\n        }]\n    })\n  }\n\n  const editSyrupAmountEntry = (amount, index) => {\n    const { syrup } = state\n    syrup[index].amount = amount\n    setState({\n      ...state,\n      syrup\n    })\n  }\n\n  const editSyrupNoteEntry = (note, index) => {\n    const { syrup } = state\n    syrup[index].note = note\n    setState({\n      ...state,\n      syrup\n    })\n  }\n\n  const editSyrupRefrigerationEntry = (need_refrigerated, index) => {\n    const { syrup } = state\n    syrup[index].need_refrigerated = need_refrigerated\n    setState({\n      ...state,\n      syrup\n    })\n  }\n\n  const removeSyrupEntry = (index) => {\n    const { syrup } = state\n    syrup.splice(index, 1)\n    setState({\n      ...state,\n      syrup\n    })\n\n  }\n\n  const onSelectFeverSyrup = () => {\n    const { fever_entry } = state\n    setState({\n      ...state,\n      fever_entry: {\n        ...fever_entry,\n        syrup: fever_entry.syrup.length ? []\n          : [{\n            amount: '',\n            need_refrigerated: false\n          }]\n      }\n    })\n  }\n\n  const editFeverSyrupAmountEntry = (amount, index) => {\n    const { fever_entry } = state\n    fever_entry.syrup[index].amount = amount\n    setState({\n      ...state,\n      fever_entry\n    })\n  }\n\n  const editFeverSyrupRefrigerationEntry = (need_refrigerated, index) => {\n    const { fever_entry } = state\n    fever_entry.syrup[index].need_refrigerated = need_refrigerated\n    setState({\n      ...state,\n      fever_entry\n    })\n  }\n\n  const removeFeverSyrupEntry = (index) => {\n    const { fever_entry } = state\n    fever_entry.syrup.splice(index, 1)\n    setState({\n      ...state,\n      fever_entry\n    })\n\n  }\n\n  const timeIsEmpty = () => {\n    const { time_array } = state\n    if (time_array.length === 0) {\n      alert('至少要選擇一個時間！')\n      return true\n    }\n    return false\n  }\n\n  const sendRequest = async() => {\n    const { isConnected } = props\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n    const { student_id } = location.state\n    const body = normalizedData()\n    const response = await post(`/medicationrequest/student/${student_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert('Sorry 送出托藥單時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n      return \n    }\n    setState({\n      ...state,\n      access_mode: 'read'\n    })\n    // onGoBack()\n    navigate(-1)\n  }\n\n  const normalizedData = () => {\n    const { class_id } = location.state\n    const {\n      request_id, \n      date_array,\n      time_array,\n      before_meal ,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel,\n      other_type,\n      note,\n      fever_entry\n    } = state\n\n    return{\n      request_id,\n      class_id,\n      // date: formatDate(date), \n      date_array: date_array.map(date => formatDate(date)),\n      time_array: time_array.map(time => formatTime(time)), \n      before_meal,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel: gel === null ? gel : gel.trim(),\n      other_type: other_type === null ? other_type : other_type.trim(),\n      note: note.trim(),\n      fever_entry: {\n        temperature: fever_entry.temperature,\n        powder: fever_entry.powder,\n        powder_refrigerated: fever_entry.powder_refrigerated, \n        syrup: fever_entry.syrup, \n        other_type: fever_entry.other_type === null ? fever_entry.other_type : fever_entry.other_type.trim()\n      }\n    }\n  }\n\n  const editable = () => {\n    const { date_array } = state\n    let date = date_array[0]\n    const threshold = new Date()\n    threshold.setHours(10,0,0,0)\n    const tomorrow = new Date()\n    tomorrow.setDate(tomorrow.getDate() + 1)\n    tomorrow.setHours(0,0,0,0)\n    return (date.toDateString() === (new Date).toDateString() && new Date() < threshold) || date.getTime() > tomorrow.getTime()\n  }\n\n  const onClickConfirm = () => {\n    const { access_mode } = state\n    if (access_mode === 'create' || access_mode === 'edit') {\n      if (timeIsEmpty()) return\n      sendRequest()\n    } else {\n      setState({\n        ...state,\n        access_mode: 'edit'\n      })\n    }\n  }\n\n  const deleteRequestConfirm = () => {\n    const { request_id } = state\n    const confirmed = confirm('確定要刪除？')\n    if (confirmed) {\n      deleteRequest(request_id)  \n    }\n  }\n\n  const deleteRequest = (request_id) => {\n    const { isConnected } = props\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n    const { class_id } = location.state\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request_id}`, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        class_id\n      })\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        // onGoBack()\n        navigate(-1)\n        \n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n      })\n  }\n\n  const cancelEdit = () => {\n    const { index } = state\n    switchRequest(index)\n  }\n\n\n    const { \n      isLoading,\n      // date, \n      time_array,\n      datetime_type, \n      time_selected_index, \n      before_meal ,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel,\n      other_type,\n      note,\n      fever_entry,\n      administered,\n      teacher_name,\n      medicated_timestamp,\n      data,\n      access_mode,\n      scrollHeight,\n      date_array,\n      date_selected_index\n    } = state\n    \n    if(isLoading) {\n      return <Reloading />\n    }\n    return (\n      <KeyboardAvoidingView\n          style={{ flex: 1, width: '100%', alignItems: 'center' }}\n          behavior={'padding'}\n          // keyboardVerticalOffset={90}\n          enabled\n      >\n        {showDateTimeModal ?\n          <TimeModal\n            start_date={time_selected_index === null ? new Date() : time_array[time_selected_index]}\n            datetime_type={datetime_type}\n            hideModal={() => setShowDateTimeModal(false)}\n            selectDatetimeConfirm={(datetime) => selectDatetimeConfirm(datetime)}\n            minDatetime={new Date()}\n            maxDatetime={(new Date()).setDate((new Date()).getDate() + 7)}\n            minTime={new Date().setHours(7, 0, 0)}\n            maxTime={new Date().setHours(20, 0, 0)}\n            paddingVertical={100}\n          />\n          : null\n        }\n\n        <ScrollView style={{ width: '100%' }}>\n          \n          {data !== null && data.length > 1 &&\n            <View style={{ width: '100%' }}>\n                <ScrollView horizontal showsHorizontalScrollIndicator={false}>\n                  {data.map((request, index) => {\n                    return (\n                      <View key={index} style={{ padding: 10 }}>\n                        <TouchableOpacity\n                          key={request.id}\n                          style={{\n                            padding: 10,\n                            backgroundColor: state.index === index ? '#ffddb7' : 'rgba(0,0,0,0.5)',\n                            justifyContent: 'center',\n                            borderRadius: 30\n                          }}\n                          underlayColor='#ffddb7'\n                          onPress={() => switchRequest(index)}\n                        >\n                          <Text\n                            style={{ fontSize: 25, color: state.index === index ? 'grey' : 'white' }}\n                          >\n                            {beautifyTime(request.timestamp)}\n                          </Text>\n                        </TouchableOpacity>\n                      </View>\n                    )\n                  })}\n                </ScrollView>\n            </View>\n          }\n\n          <View style={{ backgroundColor: 'white', borderTopRightRadius: 30, borderTopLeftRadius: 30}}>\n            {administered &&\n              <View style={{ alignItems: 'center'}}>\n                {/* MEDICATED RESPONSE - BODY */}\n                <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n                  <Text style={{ fontSize: 25 }}>餵藥老師：{teacher_name}</Text>\n                  <Text style={{ fontSize: 25 }}>餵藥時間：{beautifyTime(medicated_timestamp)}</Text>\n                </View>\n              </View>}\n\n          {/* DATE */}\n          <View style={{ alignItems: 'center'}}>\n            <View\n              style={{ \n                width: '100%', \n                flexDirection: 'row', \n                alignItems: 'center',\n                justifyContent: 'center',\n                backgroundColor: '#ff8944',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n            >\n              <Text style={{ fontSize: 25 }}>日期 </Text>\n            </View>\n            {/* <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#ff8944',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              underlayColor='transparent'\n              onPress={() => {\n                if (access_mode === 'read') return\n                setState({ showDateTimeModal: true, datetime_type: 'date' })\n              }}\n            >\n              <Text style={{ fontSize: 30, alignSelf: 'center' }}>日期 {beautifyMonthDate(date)}</Text>\n            </TouchableOpacity> */}\n\n            {/* TIME */}\n            <View \n              style={{ \n                flex: 1,\n                flexDirection: 'row', \n                width: '100%', \n                backgroundColor: 'white', \n                padding: 20,\n                alignItems: 'flex-start'\n              }}\n            >\n\n            <View style={{ flex: 1, alignItems: 'center' }}>\n                <TouchableOpacity \n                  disabled={access_mode === 'read' || access_mode === 'edit'}\n                  style={{\n                    width: '80%',\n                    paddingBottom: 15\n                  }}\n                  underlayColor='transparent'\n                  onPress={() => {\n                    if (access_mode === 'read' || access_mode === 'edit') return\n                    setState({ ...state, datetime_type: 'date' })\n                    setShowDateTimeModal(true)\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <View style={{ flex: 1, paddingLeft: 15 }}>\n                      <Text style={{ fontSize: 25 }}>日期</Text>\n                    </View >\n                    {access_mode === 'create' &&\n                      <Image\n                        source={require('../../assets/icon-plus.png')}\n                        style={{ width: 32, height: 32, alignSelf: 'flex-end'}}\n                      />\n                    }\n                  </View>\n                </TouchableOpacity>\n                {date_array.map((date, index) => {\n                  return (\n                    <View key={index} \n                      style={{\n                        width: '90%',\n                        justifyContent: 'center',\n                        flexDirection: 'row',\n                        paddingBottom: 10\n                      }}\n                    >\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '70%',\n                          backgroundColor: '#ffddb7',\n                          borderTopLeftRadius: 15,\n                          borderBottomLeftRadius: 15,\n                          justifyContent: 'center'\n                        }}\n                        underlayColor='transparent'\n                        onPress={() => {\n                          if (access_mode === 'read') return\n                          setState({ ...state, datetime_type: 'date', date_selected_index: index })\n                          setShowDateTimeModal(true)\n                        }}\n                      >\n                        <Text style={{ fontSize: 25, alignSelf: 'center' }}>{beautifyMonthDate(date)}</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '30%',\n                          justifyContent: 'center',\n                          padding: 5,\n                          backgroundColor: '#ffddb7',\n                          borderBottomRightRadius: 15,\n                          borderTopRightRadius: 15\n                        }}\n                        underlayColor='transparent'\n                        onPress={() => {\n                          if (access_mode === 'read') return\n                          removeDate(index)\n                        }}\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                    </View>\n                  )\n                })}\n              </View>\n\n              <View style={{ flex: 1, alignItems: 'center' }}>\n                <TouchableOpacity \n                  disabled={access_mode === 'read' || access_mode === 'edit'}\n                  style={{\n                    width: '80%',\n                    paddingBottom: 15\n                  }}\n                  underlayColor='transparent'\n                  onPress={() => {\n                    if (access_mode === 'read' || access_mode === 'edit') return\n                    setState({ ...state, datetime_type: 'time' })\n                    setShowDateTimeModal(true)\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <View style={{ flex: 1, paddingLeft: 15 }}>\n                      <Text style={{ fontSize: 25 }}>時間</Text>\n                    </View >\n                    {access_mode === 'create' &&\n                      <Image\n                        source={require('../../assets/icon-plus.png')}\n                        style={{ width: 32, height: 32, alignSelf: 'flex-end'}}\n                      />\n                    }\n                  </View>\n                </TouchableOpacity>\n\n                {time_array.map((time, index) => {\n                  return (\n                    <View key={index} \n                      style={{\n                        width: '90%',\n                        justifyContent: 'center',\n                        flexDirection: 'row',\n                        paddingBottom: 10\n                      }}\n                    >\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '70%',\n                          backgroundColor: '#ffddb7',\n                          borderTopLeftRadius: 15,\n                          borderBottomLeftRadius: 15,\n                          justifyContent: 'center'\n                        }}\n                        underlayColor='transparent'\n                        onPress={() => {\n                          if (access_mode === 'read') return\n                          setState({ ...state, datetime_type: 'time', time_selected_index: index })\n                          setShowDateTimeModal(true)\n                        }}\n                      >\n                        <Text style={{ fontSize: 25, alignSelf: 'center' }}>{beautifyTime(time)}</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '30%',\n                          justifyContent: 'center',\n                          padding: 5,\n                          backgroundColor: '#ffddb7',\n                          borderBottomRightRadius: 15,\n                          borderTopRightRadius: 15\n                        }}\n                        underlayColor='transparent'\n                        onPress={() => {\n                          if (access_mode === 'read') return\n                          removeTime(index)\n                        }}\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                    </View>\n                  )\n                })}\n              </View>\n            </View>\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', paddingBottom: 20 }}>\n              <TouchableOpacity\n                disabled={access_mode === 'read'}\n                style={{ \n                  padding: 15,\n                  borderWidth: 1,\n                  borderColor: 'grey',\n                  backgroundColor: (before_meal !== null && before_meal) ? '#ffddb7' : 'white'\n                }}\n                underlayColor='#ff8944'\n                onPress={() => {\n                  if (access_mode === 'read') return\n                  setState({ ...state, before_meal: before_meal ? null : true })\n                }}\n              >\n                <Text style={{ fontSize: 25 }}>餐前</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                disabled={access_mode === 'read'}\n                style={{\n                  padding: 15,\n                  borderWidth: 1,\n                  borderLeftWidth: 0,\n                  borderColor: 'grey',\n                  backgroundColor: (before_meal !== null && !before_meal) ? '#ffddb7' : 'white'\n                }}\n                underlayColor='#ff8944'\n                onPress={() => {\n                  if (access_mode === 'read') return\n                  setState({ ...state, before_meal: before_meal === false ? null : false })\n                }}\n              >\n                <Text style={{ fontSize: 25 }}>餐後</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {/* MEDICATION TYPE - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#00c07f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onPress={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>藥物</Text>\n            </TouchableOpacity>\n\n            {/* MEDICATION TYPE - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', paddingHorizontal: 20 }}>\n\n              {/* POWDER */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingTop: 20, paddingBottom: 10 }}\n                    onPress={() => {\n                      if (access_mode === 'read') return\n                      setState({ ...state, powder: !powder })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: powder ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10, alignSelf: 'center' }}>藥粉    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  \n\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingTop: 20, paddingBottom: 10 }}\n                    onPress={() => {\n                      if (access_mode === 'read') return\n                      setState({ ...state, powder_refrigerated: !powder_refrigerated})\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            // flex: 1,\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: powder_refrigerated ? '#00c07f' : 'white'\n                          }}\n                        >\n                          \n                        </View>\n                      </View>\n                    \n                      <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n\n                    </View>\n\n                  </TouchableOpacity>\n                </View>\n                \n              </View>\n\n              {/* SYRUP */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onPress={() => {\n                      if (access_mode === 'read') return\n                      onSelectSyrup()\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: syrup.length ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10 }}>藥水    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  {syrup.length && access_mode !== 'read'? \n                    <TouchableOpacity\n                      style={{ padding: 10 }}\n                      onPress={() => setState({\n                        ...state, syrup: [...syrup, { amount: '', need_refrigerated: false, note: '' }]\n                      })}\n                      underlayColor='transparent'\n                    >\n                      <Image\n                        source={require('../../assets/icon-plus-green.png')}\n                        style={{ width: 32, height: 32 }}\n                      />\n                    </TouchableOpacity>\n                    : null\n                  }\n                </View>\n\n                {syrup.map((entry,index) => {\n                  return (\n                    <View key={index} style={{ flexDirection: 'row', alignItems: 'center', alignSelf: 'center', marginBottom: 20 }}>\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ width: 35, fontSize: 25, textAlign: 'center', marginHorizontal: 10 }}\n                        keyboardType=\"decimal-pad\"\n                        autoFocus={true}\n                        placeholder={'____'}\n                        value={entry.amount}\n                        onChangeText={(amount) => editSyrupAmountEntry(amount, index)}\n                      />\n\n                      <Text style={{ fontSize: 20, marginRight: 5 }}>c.c.</Text>\n\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{ padding: 5 }}\n                        onPress={() => {\n                          if (access_mode === 'read') return\n                          editSyrupRefrigerationEntry(!entry.need_refrigerated, index)\n                        }}\n                        underlayColor='transparent'\n                      >\n                        <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                          <View\n                            style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                          >\n                            <View \n                              style={{\n                                width: 16,\n                                height: 16,\n                                borderRadius: 8,\n                                backgroundColor: entry.need_refrigerated ? '#00c07f' : 'white'\n                              }}\n                            >\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n                        </View>\n\n                      </TouchableOpacity>\n\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ fontSize: 25, textAlign: 'center', marginHorizontal: 10, width: 60 }}\n                        // keyboardType=\"default\"\n                        // autoFocus={true}\n                        placeholder={'備註'}\n                        value={entry.note}\n                        onChangeText={(note) => editSyrupNoteEntry(note, index)}\n                      />\n\n                      {access_mode !== 'read' && <TouchableOpacity\n                        style={{ paddingHorizontal: 10 }}\n                        onPress={() => removeSyrupEntry(index)}\n                        underlayColor='transparent'\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                      }\n                    </View>\n                  )\n                })}\n                \n              </View>\n\n              {/* GEL */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onPress={() => {\n                      if (access_mode === 'read') return\n                      setState({ \n                        ...state, gel: gel === null ? '' : null\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: gel === null ? 'white' : '#00c07f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>藥膏</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {gel === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex: 1, fontSize: 25 }}\n                      autoFocus={true}\n                      placeholder={'部位'}\n                      value={gel}\n                      onChangeText={(gel) => setState({ ...state, gel })}\n                    />\n                  }\n                </View>\n                \n              </View>\n\n              {/* OTHER */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onPress={() => {\n                      if (access_mode === 'read') return\n                      setState({ \n                        ...state, other_type: other_type === null ? '' : null\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: other_type === null ? 'white' : '#00c07f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>其他</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {other_type === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex:1, fontSize: 22, paddingHorizontal: 10, paddingTop: 3, paddingBottom: 5, paddingLeft: 0 }}\n                      placeholder={'點擊我開始填寫...'}\n                      autoFocus={true}\n                      textAlignVertical={'top'}\n                      multiline={true}\n                      blurOnSubmit={true}\n                      scrollEnabled={false}\n                      value={other_type}\n                      onChangeText={(other_type) => setState({ ...state, other_type })} \n                    />\n                  }\n                </View>\n                \n              </View>\n\n            </View>\n          </View>\n\n          {/* NOTE - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#f4d41f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onPress={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>備註</Text>\n            </TouchableOpacity>\n\n            {/* NOTE - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n              <TextInput\n                editable={access_mode !== 'read'}\n                style={{ height: scrollHeight, padding: 15, fontSize: 25 }}\n                placeholder={'點擊填寫...'}\n                multiline={true}\n                blurOnSubmit={true}\n                scrollEnabled={false}\n                value={note}\n                onChangeText={(note) => setState({ ...state, note })}\n                onChange={(e) => setState({\n                  ...state, \n                  scrollHeight: e.target.scrollHeight\n                })}\n                onLayout={(event) => {\n                  const { scrollHeight } = event.nativeEvent.target\n                  setState({\n                    ...state, \n                    scrollHeight\n                  })\n                }}\n              />\n            </View>\n          </View>\n\n          {/* FEVER MEDS - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#fa625f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onPress={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>發燒餵藥</Text>\n            </TouchableOpacity>\n\n            {/* FEVER MEDS - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n              <View style={{ paddingVertical: 10 }}>\n                <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                  \n                  <Text style={{ fontSize: width * 0.06, marginHorizontal: 10 }}>發燒超過</Text>\n\n                  <TextInput\n                    editable={access_mode !== 'read'}\n                    style={{ width: 55, fontSize: 25 }}\n                    keyboardType='decimal-pad'\n                    value={fever_entry.temperature}\n                    onChangeText={(temperature) => setState({\n                      ...state,\n                      fever_entry: {\n                        ...fever_entry,\n                        temperature\n                      }\n                    })}\n                  />\n\n                  <Text style={{ fontSize: width * 0.06 }}>°C 以上才用藥</Text>\n                </View>\n\n                {/* POWDER */}\n                <View style={{ backgroundColor: '' }}>\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <TouchableOpacity\n                      disabled={access_mode === 'read'}\n                      style={{ paddingTop: 20, paddingBottom: 10 }}\n                      onPress={() => {\n                        if (access_mode === 'read') return\n                        setState({\n                          ...state,\n                          fever_entry: {\n                            ...fever_entry,\n                            powder: !fever_entry.powder \n                          }\n                        })\n                      }}\n                      underlayColor='transparent'\n                    >\n                      <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                        <View\n                          style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                        >\n                          <View \n                            style={{\n                              width: 16,\n                              height: 16,\n                              borderRadius: 8,\n                              backgroundColor: fever_entry.powder ? '#fa625f' : 'white'\n                            }}\n                          >\n                          </View>\n                        </View>\n                        <Text style={{ fontSize: 25, marginLeft: 10 }}>藥粉    </Text>\n                      </View>\n                    </TouchableOpacity>\n                    \n\n                    <TouchableOpacity\n                      disabled={access_mode === 'read'}\n                      style={{ paddingTop: 20, paddingBottom: 10 }}\n                      onPress={() => {\n                        if (access_mode === 'read') return\n                        setState({\n                          ...state, \n                          fever_entry: {\n                            ...fever_entry,\n                            powder_refrigerated: !fever_entry.powder_refrigerated\n                          }\n                        })\n                      }}\n                      underlayColor='transparent'\n                    >\n                      <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                        <View\n                          style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                        >\n                          <View \n                            style={{\n                              // flex: 1,\n                              width: 16,\n                              height: 16,\n                              borderRadius: 8,\n                              backgroundColor: fever_entry.powder_refrigerated ? '#fa625f' : 'white'\n                            }}\n                          >\n                            \n                          </View>\n                        </View>\n                      \n                        <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n\n                      </View>\n\n                    </TouchableOpacity>\n                  </View>\n                  \n                </View>\n                \n                {/* SYRUP */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onPress={() => {\n                      if (access_mode === 'read') return\n                      onSelectFeverSyrup()\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: fever_entry.syrup.length ? '#fa625f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10 }}>藥水    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  {fever_entry.syrup.length && access_mode !== 'read'? \n                    <TouchableOpacity\n                      style={{ padding: 10 }}\n                      onPress={() => setState({\n                        ...state, \n                        fever_entry: {\n                          ...fever_entry,\n                          syrup: [...fever_entry.syrup, { amount: '', need_refrigerated: false }]\n                        }\n                      })}\n                      underlayColor='transparent'\n                    >\n                      <Image\n                        source={require('../../assets/icon-plus-red.png')}\n                        style={{ width: 32, height: 32 }}\n                      />\n                    </TouchableOpacity>\n                    : null\n                  }\n                </View>\n\n                {fever_entry.syrup.map((entry,index) => {\n                  return (\n                    <View key={index} style={{ flexDirection: 'row', alignItems: 'center', alignSelf: 'center', marginBottom: 20 }}>\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ width: 62, fontSize: 25 }}\n                        keyboardType=\"decimal-pad\"\n                        autoFocus={true}\n                        placeholder={'____'}\n                        value={entry.amount}\n                        onChangeText={(amount) => editFeverSyrupAmountEntry(amount, index)}\n                      />\n\n                      <Text style={{ fontSize: 25, marginRight: 5 }}>c.c.</Text>\n\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{ padding: 5 }}\n                        onPress={() => {\n                          if (access_mode === 'read') return\n                          editFeverSyrupRefrigerationEntry(!entry.need_refrigerated, index)\n                        }}\n                        underlayColor='transparent'\n                      >\n                        <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                          <View\n                            style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                          >\n                            <View \n                              style={{\n                                width: 16,\n                                height: 16,\n                                borderRadius: 8,\n                                backgroundColor: entry.need_refrigerated ? '#fa625f' : 'white'\n                              }}\n                            >\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n                        </View>\n\n                      </TouchableOpacity>\n\n                      {access_mode !== 'read' && \n                        <TouchableOpacity\n                          disabled={access_mode === 'read'}\n                          style={{ paddingHorizontal: 10 }}\n                          onPress={() => {\n                            if (access_mode === 'read') return\n                            removeFeverSyrupEntry(index)\n                          }}\n                          underlayColor='transparent'\n                        >\n                          <Image\n                            source={require('../../assets/icon-delete.png')}\n                            style={{ width: 32, height: 32 }}\n                          />\n                        </TouchableOpacity>\n                      }\n                    </View>\n                  )\n                })}\n                \n              </View>\n\n                {/* OTHER */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onPress={() => {\n                      if (access_mode === 'read') return\n                      setState({\n                        ...state, \n                        fever_entry: {\n                          ...fever_entry,\n                          other_type: fever_entry.other_type === null ? '' : null\n                        }\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: fever_entry.other_type === null ? 'white' : '#fa625f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>其他</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {fever_entry.other_type === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex:1, fontSize: 22, paddingHorizontal: 10, paddingTop: 3, paddingBottom: 5, paddingLeft: 0 }}\n                      placeholder={'點擊我開始填寫...'}\n                      autoFocus={true}\n                      textAlignVertical={'top'}\n                      multiline={true}\n                      blurOnSubmit={true}\n                      scrollEnabled={false}\n                      value={fever_entry.other_type}\n                      onChangeText={(other_type) => setState({\n                        ...state,\n                        fever_entry: {\n                          ...fever_entry,\n                          other_type\n                        }\n                      })} \n                    />\n                  }\n                </View>\n                \n              </View>\n                  \n              </View>\n            </View>\n          </View>\n          </View>\n        </ScrollView>\n\n        <View\n          style={{ height: 90, width: '100%', paddingHorizontal: 20 }}\n        >\n          {access_mode === 'read' ?\n            <TouchableOpacity \n              disabled={!editable()}\n              style={{ width: '100%', height: '70%', backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n              onPress={() => {\n                if (!editable()) return\n                onClickConfirm()\n              }}\n              underlayColor='transparent'\n            >\n              <Text style={{ fontSize: 40, textAlign: 'center', color: 'white' }}>\n                編輯\n              </Text>\n            </TouchableOpacity>\n            : access_mode === 'edit' ?\n              <View style={{ width: '100%', height: '70%', flexDirection: 'row' }}>\n                <TouchableOpacity \n                  style={{  flex:1, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                  onPress={() => deleteRequestConfirm()}\n                  underlayColor='transparent'\n                >\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    刪除\n                  </Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity \n                  style={{  flex:1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n                  onPress={() => cancelEdit()}\n                  underlayColor='transparent'\n                >\n                  <Text style={{ fontSize: width * 0.06, textAlign: 'center', color: 'white' }}>\n                    取消編輯\n                  </Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity \n                  style={{ flex:1, backgroundColor: '#00c07f', justifyContent: 'center' }}\n                  onPress={() => onClickConfirm()}\n                  underlayColor='transparent'\n                  >\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    送出\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            : // access_mode === 'create\n              <TouchableOpacity\n                style={{ width: '100%', height: '70%', backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n                onPress={() => onClickConfirm()}\n                underlayColor='transparent'\n              >\n                <Text style={{ fontSize: 30, textAlign: 'center', color: 'white' }}>\n                  送出\n                </Text>\n              </TouchableOpacity>\n          }\n        </View>\n        \n      </KeyboardAvoidingView>\n    );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      isConnected: state.parent.isConnected\n  }\n}\n\nexport default connect(mapStateToProps) (AddMedicationRequestPage)","import React from 'react'\nimport { View, Text, Image, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport Reloading from '../reloading'\nimport { beautifyDate, put, formatDate, formatTime } from '../util'\nimport * as WebBrowser from 'expo-web-browser'\nimport * as Sharing from 'expo-sharing'\nimport * as Linking from 'expo-linking'\nimport { TouchableOpacity } from 'react-native'\n\nexport default class AnnouncementPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            index: -1,\n            data: []\n        }\n    }\n\n    componentDidMount() {\n        const { index, data } = this.props.route.params\n        // deal with default index(0) or selected index from announcement card\n        this.setState({\n            index,\n            data\n        })\n        this.markRead(data[index].id)   \n    }\n\n    async markRead(announcement_id) {\n        const { parent_id } = this.props.route.params\n        const timestamp = formatDate(new Date()) + ' ' + formatTime(new Date())\n        const response = await put(`/announcement/${announcement_id}/read`, {\n            'parent_id': parent_id,\n            'timestamp': timestamp\n        })\n        // console.log(response)\n        const { success, statusCode, message, data } = response\n\n    }\n\n    componentWillUnmount() {\n        const { onGoBack } = this.props.route.params\n        onGoBack()\n    }\n\n    render() {\n        const { index, data } = this.state\n        if (index < 0) {\n            return <Reloading />\n        }\n        const selected_announcement = data[index]\n        // console.log('selected_announcement: ', selected_announcement)\n        return (\n            <Card style={{ flex: 1 }}>\n                <View style={{ padding: 20, alignItems: 'center' }}>\n                    <Text style={{ fontSize: 25 }}>{selected_announcement.title}</Text>\n                    <Text>{beautifyDate(new Date(selected_announcement.timestamp))}</Text>\n                </View>\n                <View style={{ flex: 1, padding: 20,  }}>\n                    <Text>{selected_announcement.text}</Text>\n                    <View style={{ paddingTop: 50, alignItems: 'flex-start' }}>\n                        {selected_announcement.links.map((link,index) => {\n                            return (\n                                <TouchableOpacity\n                                    key={index}\n                                    style={{ padding: 8, backgroundColor: 'lightblue' }}\n                                    onClick={async() => {\n                                        let result = await WebBrowser.openBrowserAsync(link.url)\n                                    }}\n                                >\n                                    <Text>{link.text}</Text>\n                                </TouchableOpacity>\n                            )\n                        })}\n                    </View>\n                    <View style={{ flexDirection: 'row', paddingTop: 50, flexWrap: 'wrap' }}>\n                    {selected_announcement.photo_url_arr.map((url, index) => {\n                        return (\n                            <TouchableHighlight\n                                key={index}\n                                onPress={async() => {\n                                    let result = await WebBrowser.openBrowserAsync(url)\n                                    this.setState({ result })\n                                }}\n                            >\n                                <Image\n                                    source={{ uri: url }}\n                                    style={{\n                                        width: 150,\n                                        height: 150,\n                                        marginRight: 10,\n                                        marginTop: 10\n                                    }}\n                                />\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n                </View>\n            </Card>\n        )\n    }\n}","import React from 'react'\nimport { TouchableHighlight, Text, TouchableOpacity } from 'react-native'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux';\nimport reducer from '../../redux/parent/reducers/index'\nimport {\n    BrowserRouter,\n    Routes,\n    Route,\n  } from \"react-router-dom\";\nimport { NavigationContainer } from '@react-navigation/native'\nimport { createStackNavigator } from '@react-navigation/stack'\nimport ParentHome from './parenthome'\nimport MedicationRequestPage from './medicationrequestpage'\nimport AbsenceExcusePage from './absenceexcusepage'\nimport PickupRequest from './pickuprequest'\nimport AddMedicationRequestPage from './addmedicationrequestpage'\nimport AnnouncementPage from './announcementpage'\nimport ViewImagePage from '../viewimagepage'\nimport AnnouncementListPage from './announcementlistpage';\nimport ParentDownloadPage from './mainmenu/downloadpage'\nimport storage from 'redux-persist/lib/storage'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport { PersistGate } from 'redux-persist/integration/react'\n\n\n// const store = createStore(reducer)\n// const Stack = createStackNavigator()\n\nconst persistConfig = {\n    key: 'root',\n    storage,\n    transforms: []\n}\n  \nconst persistedReducer = persistReducer(persistConfig, reducer)\n\nconst store = createStore(persistedReducer)\nlet persistor = persistStore(store)\n\nconst ParentApp = (props) => {\n    // props.handleSignOut()\n    return (\n        <Provider store={store}>\n            <PersistGate loading={null} persistor={persistor}>\n                <BrowserRouter basename=\"/gina_web_app\">\n                    <Routes>\n                        <Route exact path=\"/\" element={<ParentHome {...props} />} />\n                        <Route path=\"/pickup\" element={<PickupRequest />} />\n                        <Route path=\"/med-request\" element={<MedicationRequestPage />} />\n                        <Route path=\"/absence-request\" element={<AbsenceExcusePage />} />\n                        <Route path=\"/add-med-request\" element={<AddMedicationRequestPage />} />\n                        {/* <Route path=\"/class/inbox\" element={<Inbox />} />\n                        <Route path=\"/class/medication\" element={<TeacherMedicineLog />} />\n                        <Route path=\"/class/wellness\" element={<WellnessLog />} />\n                        <Route path=\"/class/message\" element={<MessageForParents />} />\n                        <Route path=\"/class/appetite\" element={<TeacherAppetiteLog />} />\n                        <Route path=\"/class/sleep\" element={<TeacherSleepLog />} />\n                        <Route path=\"/admin\" element={<AdminHome />} />\n                        <Route path=\"/admin/announcement\" element={<AnnouncementHome />} />\n                        <Route path=\"/admin/announcement/:id\" element={<Announcement />} />\n                        <Route path=\"/admin/announcement/new\" element={<AddAnnouncementPage />} />\n                        <Route path=\"/attendance\" element={<AttendancePage />} /> */}\n                    </Routes>\n                </BrowserRouter>\n            </PersistGate>\n        </Provider>\n    )\n    // render() {\n    //     return (\n    //         <Provider store={store}>\n    //             <NavigationContainer>\n    //                 <Stack.Navigator\n    //                     initialRouteName=\"ParentHome\"\n    //                     screenOptions={{\n    //                         gestureEnabled: true,\n    //                         headerTitleStyle: {\n    //                             fontWeight: 'bold',\n    //                             fontSize: 30\n    //                         }\n    //                     }}\n    //                 >\n    //                     <Stack.Screen\n    //                         name=\"ParentHome\"\n    //                         component={ParentHome}\n    //                         initialParams={{\n    //                             parent_id: this.props.parent_id,\n    //                             loadAuth: this.props.loadAuth\n    //                         }}\n    //                         options={{\n    //                             title: '家長首頁',\n    //                             headerRight: () => (\n    //                                 <TouchableHighlight\n    //                                     style={{ padding: 10, marginRight: 20 }}\n    //                                     onPress={() => this.props.handleSignOut()}\n    //                                 >\n    //                                     <Text>登出</Text>\n    //                                 </TouchableHighlight>\n    //                             ),\n    //                             headerLeft: null\n    //                         }}\n    //                     />\n    //                     {/* <Stack.Screen\n    //                         name=\"ViewImagePage\"\n    //                         component={ViewImagePage}\n    //                         options={{ \n    //                             title: '',\n    //                             headerRight: () => (\n    //                                 <TouchableHighlight\n    //                                     style={{ padding: 10, marginRight: 20 }}\n    //                                     // onPress={() => this.props.handleSignOut()}\n    //                                 >\n    //                                     <Text></Text>\n    //                                 </TouchableHighlight>\n    //                             )\n    //                     }}\n    //                     /> */}\n    //                     <Stack.Screen\n    //                         name=\"DownloadPage\"\n    //                         component={ParentDownloadPage}\n    //                         options={{ title: '資料下載' }}\n    //                     />\n    //                     <Stack.Screen\n    //                         name=\"PickupRequest\"\n    //                         component={PickupRequest}\n    //                         options={{ title: '接回告知' }}\n    //                     />\n    //                     <Stack.Screen\n    //                         name=\"MedicationRequestPage\"\n    //                         component={MedicationRequestPage}\n    //                         options={{ title: '托藥單' }}\n    //                     />\n    //                     <Stack.Screen\n    //                         name=\"AddMedicationRequestPage\"\n    //                         component={AddMedicationRequestPage}\n    //                         options={{ title: '新增托藥單' }}\n    //                     />\n    //                     <Stack.Screen \n    //                         name=\"AbsenceExcusePage\"\n    //                         component={AbsenceExcusePage}\n    //                         options={{ title: '請假單' }}\n    //                     />\n    //                     <Stack.Screen\n    //                         name=\"AnnouncementPage\"\n    //                         component={AnnouncementPage}\n    //                         options={{ title: '公告' }}\n    //                     />\n    //                     <Stack.Screen\n    //                         name=\"AnnouncementListPage\"\n    //                         component={AnnouncementListPage}\n    //                         options={{ title: '公告' }}\n    //                     />\n    //                 </Stack.Navigator>\n    //             </NavigationContainer>\n    //         </Provider>\n    //     )\n    // }\n}\n\nexport default ParentApp","import React from 'react'\nimport { View, TextInput, StyleSheet, Text, Alert } from 'react-native'\nimport { Container, Content, Card, Button} from 'native-base'\nimport Auth from '@aws-amplify/auth'\n\nclass ConfirmSignUp extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            code: ''\n        }\n        this.confirmCode = this.confirmCode.bind(this)\n    }\n\n    confirmCode() {\n        Auth.confirmSignUp(this.props.username, this.state.code)\n            .then(data => {\n                console.log('data: ', data)\n                // switch to homepage\n                // save often used ids into asyncstorage\n                // this.props.navigation.navigate('AuthLoadingPage')\n                this.props.getCurrentUser()\n            })\n            .catch((err) => {\n                Alert.alert(\n                    'Error!',\n                    err.message,\n                    [\n                        { text: 'OK', onPress: () => console.log('err occured when setting up account for parent(s): ', err)}\n                    ]\n                  )\n            })\n    }\n\n    render() {\n        console.log('this.state.code: ', this.state.code)\n        return (\n            <Container>\n                <Content keyboardShouldPersistTaps=\"always\">\n                    <View\n                        style={{\n                            paddingTop: '20%',\n                            flexDirection: 'row',\n                            justifyContent: 'space-around',\n                            paddingBottom: '15%'\n                        }}\n                    >\n                        <TextInput\n                            style={{ position: 'absolute', color: 'transparent'}}\n                            autoFocus={true}\n                            maxLength={6}\n                            caretHidden={true}\n                            keyboardType={'numeric'}\n                            onChangeText={(number) => {\n                                this.setState({ code: number })\n                            }}\n                        />\n                        {Array(6).fill(0).map((item, index) => {\n                            return (\n                                <Card key={index} style={{ width: 50, height: 50, backgroundColor: 'white', borderColor: 'black', justifyContent: 'center' }}>\n                                    {this.state.code.length > index ? \n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>{this.state.code.charAt(index)}</Text>\n                                        : <Text></Text>\n                                    }\n                                </Card>\n                            )\n                        })}\n                    </View>\n                    \n                    <Button rounded success style={{ alignSelf: 'center' }} onPress={this.confirmCode}>\n                        <Text style={{ paddingHorizontal: 5, color: 'white' }}>Confirm code</Text>\n                    </Button>\n                {/* }} */}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    input: {\n        borderColor: 'black',\n        borderWidth: 1\n    }\n})\n\nexport default ConfirmSignUp","import React from 'react'\nimport { View, Text, ActivityIndicator } from 'react-native'\nimport * as Font from 'expo-font'\nimport Auth from '@aws-amplify/auth'\nimport SchoolApp from '../teacher/schoolapp'\nimport Signin from './signin'\nimport Signup from './signup'\nimport ParentApp from '../parent/parentapp'\nimport ConfirmSignUp from './confirmsignup'\nimport Reloading from '../reloading'\nimport { YellowBox } from 'react-native';\nimport ENV from '../../variables'\n\nYellowBox.ignoreWarnings([\n    'Non-serializable values were found in the navigation state',\n]);\n\nclass AuthLoading extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            status: '',\n            id: '',\n            username: ''\n        }\n        this.getCurrentUser = this.getCurrentUser.bind(this)\n    }\n\n    async componentDidMount() {\n        await Font.loadAsync({\n            'Roboto': require('../../node_modules/native-base/Fonts/Roboto.ttf'),\n            'Roboto_medium': require('../../node_modules/native-base/Fonts/Roboto_medium.ttf'),\n        })\n        this.getCurrentUser()\n    }\n\n    getCurrentUser() {\n        this.setState({ status: 'loading' })\n        // console.log('loadAuth')\n        Auth.currentAuthenticatedUser()\n            .then(user => {\n                //user is authenticated\n                console.log(user.username)\n                fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/user?username=${user.username}`, {\n                    method: 'GET',\n                    headers: {\n                        Accept: 'application/json',\n                        'Content-Type': 'application/json'\n                    }\n                })\n                    .then((res) => res.json())\n                    .then((resJson) => {\n                        // get id, name, role of admin and parents\n                        const { statusCode, message, data } = resJson\n                        // console.log('resJson: ', resJson)\n                        if (statusCode === 200) {\n                            this.setState({\n                                status: data.role,\n                                id: data.id,\n                                username: user.username\n                            })\n                        } else {\n                            this.setState({\n                                status: 'signedout'\n                            })\n                        }\n                    })\n                    .catch((err) => {\n                        console.log('err: ', err)\n                        this.setState({ status: 'signedout' })\n                    })\n            })\n            .catch(err => {\n                if (err == 'not authenticated') {\n                    this.setState({ status: 'signedout' })\n                }\n                this.setState({ status: 'signedout' })\n            })\n    }\n\n    changeAuthState(state, username) {\n        this.setState({\n            status: state,\n            username\n        })\n    }\n\n    handleSignOut() {\n        Auth.signOut()\n            .then(() => {\n                this.getCurrentUser()\n            })\n            .catch(err => console.log(err))\n    }\n\n    render() {\n        console.log('ENV: ', ENV)\n        const { status, username } = this.state\n        console.log('status: ', status)\n        return (\n            <View style={{ flex: 1 }}>\n                {\n                    status.includes('parent') ?\n                        <ParentApp parent_id={this.state.id} handleSignOut={() => this.handleSignOut()}/>\n                        : status === 'school' ? \n                            <SchoolApp school_id={this.state.id} school_name={username} handleSignOut={() => this.handleSignOut()} />\n                            : status === 'ConfirmSignUpPage' ?\n                                <ConfirmSignUp getCurrentUser={this.getCurrentUser} username={this.state.username}/>\n                                : status === 'signedout' || status === 'school' ?\n                                    <Signin loadAuth={this.getCurrentUser} changeAuthState={(state,username) => this.changeAuthState(state, username)} />\n                                    :\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <Text>Loading...</Text>\n                                            <ActivityIndicator size=\"large\"></ActivityIndicator>\n                                        </View>\n                }\n            </View>\n        )\n    }\n}\n\n// const mapDispatchToProps = (dispatch) => {\n//     return ({\n//         ...bindActionCreators({ initializeClass }, dispatch)\n//     })\n// }\n\n// export default connect(null, mapDispatchToProps) (AuthLoading)\nexport default AuthLoading","const awsCognitoAuth = {\n    identityPooId: 'us-east-1:0a3c861f-48ca-4832-af57-28b4209e695e',\n    region: 'us-east-1',\n    userPoolId: 'us-east-1_QlbPkQ8Ds',\n    userPoolWebClientId: '6maqsbp3gi2vj0tid4akmoiat6'\n}\n\nexport default awsCognitoAuth","// import React from 'react';\n// import { StyleSheet, Text, View } from 'react-native';\n\n// export default function App() {\n//   return (\n//     <View style={styles.container}>\n//       <Text>Open up App.js to start working on your app!</Text>\n//     </View>\n//   );\n// }\n\n// const styles = StyleSheet.create({\n//   container: {\n//     flex: 1,\n//     backgroundColor: '#fff',\n//     alignItems: 'center',\n//     justifyContent: 'center',\n//   },\n// });\n\nimport React from 'react'\nimport AuthLoading from './components/auth/authloading'\nimport { View, Text, TextInput, Image } from 'react-native'\nimport { Root } from 'native-base'\nimport Amplify from 'aws-amplify'\nimport cognito_auth from './configuration/aws-cognito-auth'\nimport { AppLoading, SplashScreen } from 'expo'\nimport { Asset } from 'expo-asset'\n\nAmplify.configure(cognito_auth)\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isSplashReady: false,\n      isAppReady: false\n    }\n    // SplashScreen.preventAutoHide()\n  }\n  \n\n  _cacheSplashResourcesAsync = async () => {\n    const gif = require('./assets/app-splash.gif');\n    return Asset.fromModule(gif).downloadAsync();\n  };\n\n  _cacheResourcesAsync = async () => {\n    // SplashScreen.hide();\n    const images = [\n      require('./assets/app_logo.png')\n    ];\n\n    const cacheImages = images.map(image => {\n      return Asset.fromModule(image).downloadAsync();\n    });\n\n    await Promise.all(cacheImages);\n    this.setState({ isAppReady: true });\n  };\n\n  render() {\n    // console.log('isAppReady: ', isAppReady)\n    // const { isSplashReady, isAppReady } = this.state\n    // if (!isSplashReady) {\n    //   return (\n    //     <AppLoading\n    //       startAsync={this._cacheSplashResourcesAsync}\n    //       onFinish={() => this.setState({ isSplashReady: true })}\n    //       onError={console.warn}\n    //       autoHideSplash={false}\n    //     />\n    //   )\n    // }\n\n    // if (!isAppReady) {\n    //   return (\n    //     <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n    //       <Image\n    //         source={require('./assets/app-splash.gif')}\n    //         style={{ height: 200, aspectRatio: 1 }}\n    //         onLoad={this._cacheResourcesAsync}\n    //       />\n    //     </View>\n    //   )\n    // }\n\n    return (\n      // <Root>\n        <AuthLoading />\n      // </Root>\n    )\n  }\n}\n\nText.defaultProps = Text.defaultProps || {};\nText.defaultProps.allowFontScaling = false;\n\nTextInput.defaultProps = TextInput.defaultProps || {};\nTextInput.defaultProps.allowFontScaling = false;","module.exports = __webpack_public_path__ + \"static/media/icon-checked-box.aa9eb83a.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsSAAALEgHS3X78AAACN0lEQVR42u3dv28ScRzG8efbKkPLdcPE6OKPja2QuiqjCxCjf4FJdz0lcbrN0KK7iX/BxdTDoaOG0VK6uVWHpumikx4O1vBxqDFRcgmed9TA+zWXkjzv+wHLIQEAAAAAAGBeuCz+STkIC0teqenM6pJblXRR0vKMbTWUdCjZnpmir8NP0bvgzrdTD3DtyetbZgsbkl2es4P3vcke9v3a1qkEuB2GiwcHpbZJ9+f5EmKmTn/YaykIRmlev5D2jRn/5xHs5K8Vrz+e6hlwctlxL7iF/qa549+Icj8DykFYMHNt9h7ztByEhdwDLHmlpqQr7D3m0rJ3rp7/PcDUYOvEO3L+AZxUYelE1Wl8CjrPzoku/O0LzqR4k+Ikf7R9d3Wmlr35fC+zbTL5HoBsEIAABAABCAACEAAEIAAIQAAQgAAgAAFAAAKAAAQAAQgAAhAABCAACEAAEIAAIAABQAACgAAEAAEIAAIQAAQgAAhAABCAACAAAUAAAoAA/7c0z4yLNcGz0SZ8xtqMcZ+ncAa4I47bhGVkR1MIMBowdQLTbu4BzBSxdOIp0M09wGhl5aWkfdYeW/9DHH98lXuAwXr12GQtBv9jfhvdS/OTJqk+hvb92paZOsz+69LTfvug1k3z0tTfA/rDXkuyTdZ3Gztfeo/St/tHa503DUmbkq7O2fL7zsxPe+RnFkCSKs92zy7GcUNmdSdV7ORnrIozNnjspEOTBk6Kvnted7BePeYKAAAAAAAAgEn9AI63ihVnDPNHAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-thumbnail.f43c1b7d.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-powder.faee4a4a.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-syrup.a136c9bb.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-gel.6faabb6e.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-pill.30288641.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-snowflake.2a93c038.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-wellness.250aefe7.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAC2UlEQVRo3u2Xv24TQRDGv9mzHdt3tmMHCiQiJNqYylBAwRMgurwBSoNooKG0y4gyosk78BRI0IQulihxEiRiXETIh2WMdygSoZx3cv98ZA/J293c7ml++30zuwesxmosNSjpAv5wu+LXnZ8A4LUHBADjwzssPbs/5lV6dDIRv9PfKvnwX4L5udcebKYFKCRdMHF5I/bcKloAvhrJH3SKPo/eAXiyrAIq6QJN1Iw9V6Elxcfl0dsskk8FwFTYWGauf7j5gIBnWdWASr6EW8vMZaJXaWovMwBFaKWdO+zf9AB6mmUXSmEhuhF7LoIFX9WVh2BUrAKA0Uzw+aBaSnWyPgeSA1D8NsoLNcDMd60DUAIFFII1QMAt6wBMSKCAUfAV+xYCxW+jREFY5qJ9AI5fA8Y5QJhkDVBILgCa4IsrwcWl7e8VYeEZRg2QzzlQoBeflXcXQt+sW8hrH+0C/Dra/tx1t456C4fgcQ6K+ByCmXpXi0S9xeQv2tIgFwAAULv3pSspQcTd83diD+5b/yML5LO9XZrVqtPLsWJhrUT7+zNx/kGn6JdHYwCloKIDunYFAAD1umfEnLF35W7d/zQD8DkXFgKAidauEZuRG97E+GNuABznt7HbDlQt1LOK3ucGgDTcOLEgoJMpQGEpAOV4rHnxthoKUH7zeDhTwTX8or5Ge3vT61dgrj0TSnnhW1ZoGLGzs4YVC82FZOeaQwGm9MtIduo4dgCI2RUUCLWQmikjWaXmdgBAwm5HKEBKN8zTW9lSQOhCFA6gQUaymsgOgIZpFykWBDSTpTlbUgDmbke1UWghWVsKgAW7RFiIhWQZWLcDIHccN6Ju1gUl7SjAggIMeBGVLyVrqwZIqgEv4gekIZwnlmoA5kEGCrcQC3Zha0Us28WL0C1PFkoDgPwAsNxx3P8GIJ2FUM+ThU6F8GnEmu9CeGjrKrFDwMml0DER7WS9ZjVW4x+OPysh2phhVbaOAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-milk.c4e5b66a.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0UlEQVRo3u2YwQnCQBBF/wQL0GMwdmAFWoJ9iAUJbprJSTvwpBcFIVc7GC8iRBNBRbIJ753CJId5mRmYXQkAIBp8o50HuQdtu5JbUvnKNLs/zaP7uw25JV3vGgQQ+JFB49QHORVoswK2kjVV5fndv+PvOoIhRgABBBBAAAEEWOZqOBXlwmS55ONH8JBKks5FWV2s/hu/uGupY/pZBUwKleTbIzNT/k0LZRF1yoQhjhVrOvVc93ElOpzWnxZpIQQQ6OsqMVq/3s20CfdCCAAA9JIb9gROYBxbOFYAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-diaper.5b00e1fa.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABvklEQVRo3u2ZO0sDQRSFv1lFfGBg7SysLC20T62CIFb+D8EmhWUsxf+hpYUEtRBMZyCFQewCihZGQuIjMdmZa2MKQx6smSVZMqe9LHPPnHP37OyAg4NDrKHCPiCZnSW0OUaxAczbbki+azSKBUz5FXTwLnClIZVI8zAwAcnsLGFMHliIYjflu0Y9f40EzfZSWQmrs4c8the8UCtocxxV8wCNYqFT8wC+eBx1KnghDbcRpZ9N+bWHPGwOTiACz//pUQe9ygkbBEYOjsCwMTlKzcylw+eSFQJB4SzcoivbzkJWFbC5o3GagReEHErlEJPDm7qNm4WmUfggPuBDc2FoCvQb4i4W84EkkEQpkP99HY/KEGdR3vpYDvGoKJBEzIXLAZfELomjVkCbZZTaA7LxPA9MejMIv8kZRwsJd63ItJDEbohdErszMbwAN6Au0frSKTAELAK7ILtMeP86D3Qk8HnQ4V0JfGXPBup2Nrnthng8CCh4j2KxPn+fK9YICFxFQcBUSr3KGWsENKSAsm0CzeJ9txuYNyTYt0YgkeZBCasoToGqNQVqH9Tz1+jSc8tOVeAECdbU1vkTDg4O44cfoDWTjXIjQSwAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-babies.313b1ac6.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAACTklEQVRo3u2Zz2sTQRzFPzO7KbSaUkOjUAwIFQsipDnlD6hEqQd/FEoPFSke9FSkXuJJ8NZDTHuu1EtCxYL2YH9Y2j/AWw+5LNaTEay/ohUvNrvroWlcY6KB3U1SMu+0OzM7M2/ee18WBhSaC+HHpKmFpYhmmWlskSg1bWBr9+5cv2y0PIHUwlJEM60tIFTR9UViRyfHR/Jerie9JqBZZhoICVi2zOJJiR0BVoGQhXjo9XqeEziwjcC+PXVj9N3k+Eje1OStUu8Fr5fT6xmUGJuIIGXaQiQEBA/aLw0P1/zm/cdPUSAPsLPzIdbX2wvQPZN5ZleOXV5Z+c0fvoPY1KWZXMvMG64zkBibiNhSq+bpfxLYK+79LBS+XisKoYV7ehYDut5Ra6yTgAMFYZnR9SeP37pTQMp0tc3/DwE90HE8HH7hwh3HbKmngFFXBEq2AWDmfpKzZ/rLfbPZ5574eD07V37OGdtMPZim3szIOjxW9rxz8wBHuzpdbz5YMce5gdPOitDtaxUaisdckQh2dTIUj/lfhWrhVN8Jbl692NRfCckhhyLQbOheTfTjfPyP9yMbr/4as2W8qfrt4EC/UqAhcHPSvhCotE2tvmp2OpQKqAyoDFTA6e16yqjKgMpAnXZqZAbaW4Fanm5kdWpvBfzwtFJAZUBlQCmgMqAy0FYKKAItT2D/zmofOWPb9w3ljNfO128ehFhsgn0FcN6cNAaCl64V0KWZBApNcMdnHe66JrCWmTeEZUZBLILYbcCx7yJ4qgsGV7OP8ii0OH4Bz96jqU9mE24AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-morningreminder.49ff255d.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-announcement.cf2640d0.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-attendance.0eadec86.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-plus-green.800f9d00.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-plus-red.d8af4a19.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACBklEQVRoge2Yyy4EQRSGvyEZKxazE3GJEFsmsRMLtzXhgWx4AIvBM7jMA1jyEojLIFbuFkRGWFThzJjqS1XXTEJ9SSWnp8+p8/9d09NdA4FAIPBXGQEugHNg2FeTNl8TA4tAL9APLPlq4tNAXsQdvpr4NNAUgoFWEwy0mmCg1fwLAwPAJnAJVIGPBuMFWEnRd1XXNJqrqnttoJ7iTswBT4ZG9eO5rnZZnFsWn+d0bpI5H4GZKIFRKzAAbAOdkRYVr8Bagjy0sDVdE0cXsAP0JZy7hk1+rsQpMEXt+00cphWIIw9MA2eifj1F/TeXYoIpi3pbA19Mi/qKKSnqK9Qt4gMLAa7si7jHlBRloF3Eb85y0iN7tpuS/sVzII5B4Bg4AYoJ8os6t0IGW80sDMwDQygje0SbKOqcQdRP44Jr8ywM7AJ3Oi6gBI41yBvT5wr6+A7YyqC/EflEjKMI3Ir8W6AsjssNzif5uqXR4Fw8Ctzw+3WgftwD4540OBfHmUgj3laDc7HJRFrxLhqci+tN2Ih31eBWjLpJj4BDkt2wVhpyMcVJ8nwSq+FPv0q8izjNPiArZM93U1KUgWsRTzjLSc+kiK9sJtjg5wY6Q+1Nm7ESeWCW2h1ZyWaiftSmOsnm2+d4wHJPDOqqt9LEA2pr6UQfagkrmP8XynJUda8SDlc+EAgEmsMnirAThvyxHLsAAAAASUVORK5CYII=\""],"sourceRoot":""}