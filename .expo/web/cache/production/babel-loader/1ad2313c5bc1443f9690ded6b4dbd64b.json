{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import View from\"react-native-web/dist/exports/View\";import Image from\"react-native-web/dist/exports/Image\";import Text from\"react-native-web/dist/exports/Text\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import Alert from\"react-native-web/dist/exports/Alert\";import{Toast}from'native-base';import{connect}from'react-redux';import{bindActionCreators}from'redux';import WellnessForm from\"./wellnessform\";import{sendWellnessData,formatDate}from\"../util\";import{markPresent,sendWellnessDataFail}from\"../../redux/school/actions/index\";import StudentModal from\"./studentmodal\";import TeacherModal from\"./teachermodal\";var Modal=function(_React$Component){_inherits(Modal,_React$Component);var _super=_createSuper(Modal);function Modal(props){_classCallCheck(this,Modal);return _super.call(this,props);}_createClass(Modal,[{key:\"render\",value:function render(){var _this=this;var _this$props=this.props,show=_this$props.show,student_id=_this$props.student_id,teacher_id=_this$props.teacher_id,students=_this$props.students,unmarked=_this$props.unmarked,absent=_this$props.absent,teacherOnDuty=_this$props.teacherOnDuty,class_id=_this$props.class_id,school_id=_this$props.school_id;if(!show){return null;}var student=students[student_id];return React.createElement(KeyboardAvoidingView,{style:{backgroundColor:'transparent',justifyContent:'center',alignItems:'center',zIndex:2,position:'absolute',width:'100%',height:'100%'},behavior:\"height\",enabled:true},React.createElement(TouchableHighlight,{style:{backgroundColor:'rgba(0,0,0,0.8)',width:'100%',height:'100%'},onPress:this.props.hideModal},React.createElement(View,null)),student_id!==''?React.createElement(StudentModal,{student_id:student_id,teacherOnDuty:teacherOnDuty,class_id:class_id,school_id:school_id,fetchStudentAttendance:function fetchStudentAttendance(){return _this.props.fetchStudentAttendance();},hideModal:this.props.hideModal}):React.createElement(TeacherModal,{teacher_id:teacher_id,teacherOnDuty:teacherOnDuty,navigation:this.props.navigation,fetchTeacherAttendance:function fetchTeacherAttendance(){return _this.props.fetchTeacherAttendance();},hideModal:this.props.hideModal}));}}]);return Modal;}(React.Component);var styles=StyleSheet.create({thumbnailImage:{width:200,height:200,borderRadius:100}});var mapStateToProps=function mapStateToProps(state){return{students:state.school.students,isConnected:state.classInfo.isConnected};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return _objectSpread({},bindActionCreators({markPresent:markPresent,sendWellnessDataFail:sendWellnessDataFail},dispatch));};export default connect(mapStateToProps,mapDispatchToProps)(Modal);","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/modal.js"],"names":["React","Toast","connect","bindActionCreators","WellnessForm","sendWellnessData","formatDate","markPresent","sendWellnessDataFail","StudentModal","TeacherModal","Modal","props","show","student_id","teacher_id","students","unmarked","absent","teacherOnDuty","class_id","school_id","student","backgroundColor","justifyContent","alignItems","zIndex","position","width","height","hideModal","fetchStudentAttendance","navigation","fetchTeacherAttendance","Component","styles","StyleSheet","create","thumbnailImage","borderRadius","mapStateToProps","state","school","isConnected","classInfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate } from '../util'\nimport { markPresent, sendWellnessDataFail } from '../../redux/school/actions/index'\nimport StudentModal from './studentmodal'\nimport TeacherModal from './teachermodal'\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  // async handleSend(record_id) {\n  //   const { wellness, class_id, isConnected } = this.props\n  //   const { records } = wellness\n  //   const record = records[record_id]\n  //   if (record.temperature === '') {\n  //     Alert.alert(\n  //       '未填寫!',\n  //       '',\n  //       [{text: 'OK'}]\n  //     )\n  //     return\n  //   }\n\n  //   if (!isConnected) {\n  //       Toast.show({\n  //           text: '拍謝 網路連不到! 等一下再試試看',\n  //           buttonText: 'Okay',\n  //           position: \"top\",\n  //           type: \"warning\",\n  //           duration: 2000\n  //       })\n  //   }\n\n  //   const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n  //   if (sendDataResult.success) {\n  //     sendDataResult.data.forEach(student_id => {\n  //       this.props.markPresent(student_id, new Date)\n  //     })\n  //   } else {\n  //     this.props.sendWellnessDataFail(sendDataResult.message)\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id, school_id } = this.props\n    if (!show) {\n      return null\n    }\n    const student = students[student_id]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        behavior='height'\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={this.props.hideModal}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        {student_id !== '' ?\n          <StudentModal\n            student_id={student_id}\n            // teacher_id={teacher_id}\n            teacherOnDuty={teacherOnDuty}\n            class_id={class_id}\n            school_id={school_id}\n            // unmarked={unmarked}\n            // absent={absent}\n            fetchStudentAttendance={() => this.props.fetchStudentAttendance()}\n            hideModal={this.props.hideModal}\n          />\n          : <TeacherModal \n              teacher_id={teacher_id}\n              teacherOnDuty={teacherOnDuty}\n              navigation={this.props.navigation}\n              // class_id={class_id}\n              // unmarked={unmarked}\n              // absent={absent}\n              fetchTeacherAttendance={() => this.props.fetchTeacherAttendance()}\n              hideModal={this.props.hideModal}\n            />\n        }\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.classInfo.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)"]},"metadata":{},"sourceType":"module"}