{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/teacher/admin/students.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { connect } from 'react-redux';\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { bindActionCreators } from 'redux';\nimport { updateProfilePicture, fetchStudentsSuccess, editStudentSuccess } from \"../../../redux/school/actions/index\";\nimport { get, post, delete_by_id } from \"../../util\";\nimport Modal from \"./modal\";\nimport EditStudentProfile from \"./editstudentprofile\";\nimport AddParent from \"./addparent\";\nimport QRPage from \"./qrpage\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar Students = function (_React$Component) {\n  _inherits(Students, _React$Component);\n\n  var _super = _createSuper(Students);\n\n  function Students(props) {\n    var _this;\n\n    _classCallCheck(this, Students);\n\n    _this = _super.call(this, props);\n\n    _this.getPermissionAsync = function _callee() {\n      var _await$Permissions$as, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(Platform.OS === 'ios')) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n            case 3:\n              _await$Permissions$as = _context.sent;\n              status = _await$Permissions$as.status;\n\n              if (status !== 'granted') {\n                alert('Sorry, we need camera roll permissions to make this work!');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this._pickImage = function _callee2(student_id, url) {\n      var result, base64;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: true,\n                aspect: [1, 1],\n                quality: 0.4,\n                base64: true\n              }));\n\n            case 3:\n              result = _context2.sent;\n\n              if (!result.cancelled) {\n                base64 = result.base64;\n\n                _this.getProfilePictureURL(base64, student_id, url);\n              }\n\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    };\n\n    _this.state = {\n      showModal: false,\n      modal_type: '',\n      student_id: '',\n      parent_data: {},\n      qr_data: '',\n      modal_padding: 0\n    };\n    return _this;\n  }\n\n  _createClass(Students, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getPermissionAsync();\n    }\n  }, {\n    key: \"getProfilePictureURL\",\n    value: function getProfilePictureURL(image, student_id, url) {\n      var school_name, students, body, response, success, statusCode, message, data;\n      return _regeneratorRuntime.async(function getProfilePictureURL$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              school_name = this.props.route.params.school_name;\n              students = this.props.students;\n              body = {\n                image: image,\n                url: url,\n                path: school_name + \"/profile_picture_\" + student_id + \"_\" + new Date().getMilliseconds() + \".jpg\"\n              };\n              _context3.next = 5;\n              return _regeneratorRuntime.awrap(post(\"/student/\" + student_id + \"/profile-picture\", body));\n\n            case 5:\n              response = _context3.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context3.next = 10;\n                break;\n              }\n\n              alert(\"Sorry \" + students[student_id].name + \"\\u7167\\u7247\\u4E0A\\u50B3\\u6642\\u96FB\\u8166\\u51FA\\u72C0\\u6CC1\\u4E86\\uFF01\\u8ACB\\u622A\\u5716\\u548C\\u8207\\u5DE5\\u7A0B\\u5E2B\\u806F\\u7E6B\\n\\n\" + message);\n              return _context3.abrupt(\"return\");\n\n            case 10:\n              this.props.updateProfilePicture(student_id, data.image_url);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getModalContent\",\n    value: function getModalContent() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          students = _this$props.students,\n          classes = _this$props.classes;\n      var _this$state = this.state,\n          showModal = _this$state.showModal,\n          modal_type = _this$state.modal_type,\n          student_id = _this$state.student_id,\n          parent_data = _this$state.parent_data,\n          qr_data = _this$state.qr_data;\n\n      if (!showModal) {\n        return null;\n      } else if (modal_type === 'student') {\n        return React.createElement(EditStudentProfile, {\n          student_id: student_id,\n          student: students[student_id],\n          classes: classes,\n          addParent: function addParent(parent_data) {\n            return _this2.setState({\n              modal_type: 'add_parent',\n              parent_data: parent_data\n            });\n          },\n          editStudentSuccess: function editStudentSuccess(student_id, name, old_class_id, class_id) {\n            return _this2.props.editStudentSuccess(student_id, name, old_class_id, class_id);\n          },\n          hideModal: function hideModal() {\n            return _this2.hideModal();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 14\n          }\n        });\n      } else if (modal_type === 'add_parent') {\n        return React.createElement(AddParent, {\n          student_id: student_id,\n          parent_data: parent_data,\n          viewQRCode: function viewQRCode(qr_data) {\n            return _this2.setState({\n              modal_type: 'qrpage',\n              qr_data: qr_data\n            });\n          },\n          goBack: function goBack() {\n            return _this2.setState({\n              modal_type: 'student'\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 14\n          }\n        });\n      } else {\n        return React.createElement(QRPage, {\n          qr_data: qr_data,\n          student_name: students[student_id].name,\n          parent_data: parent_data,\n          goBack: function goBack() {\n            return _this2.setState({\n              modal_type: 'add_parent'\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 14\n          }\n        });\n      }\n    }\n  }, {\n    key: \"hideModal\",\n    value: function hideModal() {\n      this.setState({\n        showModal: false\n      });\n    }\n  }, {\n    key: \"confirmDeleteStudent\",\n    value: function confirmDeleteStudent(student_id) {\n      var _this3 = this;\n\n      var students = this.props.students;\n      Alert.alert(students[student_id].name + \" \\u522A\\u9664\\u78BA\\u8A8D\", '刪除這個寶貝會將一切攸關資料(包誇父母)刪除', [{\n        text: \"取消\",\n        style: \"cancel\"\n      }, {\n        text: 'OK',\n        onPress: function onPress() {\n          return _this3.deleteStudentById(student_id);\n        }\n      }]);\n    }\n  }, {\n    key: \"deleteStudentById\",\n    value: function deleteStudentById(student_id) {\n      var students, response, success, statusCode, message, data;\n      return _regeneratorRuntime.async(function deleteStudentById$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              students = this.props.students;\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(delete_by_id(\"/student/\" + student_id + \"/\"));\n\n            case 3:\n              response = _context4.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context4.next = 8;\n                break;\n              }\n\n              alert(\"Sorry \" + students[student_id].name + \"\\u7167\\u7247\\u4E0A\\u50B3\\u6642\\u96FB\\u8166\\u51FA\\u72C0\\u6CC1\\u4E86\\uFF01\\u8ACB\\u622A\\u5716\\u548C\\u8207\\u5DE5\\u7A0B\\u5E2B\\u806F\\u7E6B\\n\\n\" + message);\n              return _context4.abrupt(\"return\");\n\n            case 8:\n              this.fetchStudentData();\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"fetchStudentData\",\n    value: function fetchStudentData() {\n      var school_id, response, success, statusCode, message, data, students, classes;\n      return _regeneratorRuntime.async(function fetchStudentData$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              school_id = this.props.route.params.school_id;\n              _context5.next = 3;\n              return _regeneratorRuntime.awrap(get(\"/school/\" + school_id + \"/student\"));\n\n            case 3:\n              response = _context5.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context5.next = 8;\n                break;\n              }\n\n              alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message);\n              return _context5.abrupt(\"return\");\n\n            case 8:\n              students = data.students, classes = data.classes;\n              this.props.fetchStudentsSuccess(students, classes);\n\n            case 10:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var students = this.props.students;\n      var _this$state2 = this.state,\n          showModal = _this$state2.showModal,\n          modal_padding = _this$state2.modal_padding;\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 7\n        }\n      }, React.createElement(Modal, {\n        modal_padding: modal_padding,\n        show: showModal,\n        component: this.getModalContent(),\n        hideModal: function hideModal() {\n          return _this4.hideModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 9\n        }\n      }), React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 9\n        }\n      }, Object.keys(students).map(function (id, index) {\n        var student = students[id];\n        return React.createElement(View, {\n          key: id,\n          style: {\n            flex: 1,\n            backgroundColor: 'lightgrey',\n            flexDirection: 'row',\n            marginBottom: 10,\n            padding: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }\n        }, React.createElement(TouchableHighlight, {\n          style: {},\n          onPress: function onPress() {\n            return _this4._pickImage(id, student.profile_picture);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 17\n          }\n        }, React.createElement(Image, {\n          source: student.profile_picture === '' ? require(\"../../../assets/icon-thumbnail.png\") : {\n            uri: student.profile_picture\n          },\n          style: {\n            width: 200,\n            height: 200,\n            borderRadius: 100\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 19\n          }\n        })), React.createElement(View, {\n          style: {\n            flex: 5,\n            paddingLeft: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }\n        }, React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 19\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 50\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 21\n          }\n        }, student.name)), React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 19\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 21\n          }\n        }, \"\\u5730\\u5740: \", student.address)), React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 19\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 21\n          }\n        }, \"\\u624B\\u6A5F(\\u7236): \", student.father_phone)), React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 19\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 21\n          }\n        }, \"\\u624B\\u6A5F(\\u6BCD): \", student.mother_phone))), React.createElement(View, {\n          style: {\n            flex: 1,\n            justifyContent: 'space-evenly'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 17\n          }\n        }, React.createElement(View, {\n          style: {\n            backgroundColor: 'white'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 19\n          }\n        }, React.createElement(TouchableHighlight, {\n          style: {\n            padding: 15,\n            justifyContent: 'center'\n          },\n          onPress: function onPress(event) {\n            return _this4.setState({\n              showModal: true,\n              modal_type: 'student',\n              student_id: id,\n              modal_padding: Math.max(0, event.nativeEvent.pageY - height)\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 21\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 25,\n            alignSelf: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 23\n          }\n        }, \"\\u7DE8\\u8F2F\"))), React.createElement(View, {\n          style: {\n            backgroundColor: '#fa625f'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 19\n          }\n        }, React.createElement(TouchableHighlight, {\n          style: {\n            padding: 15,\n            justifyContent: 'center'\n          },\n          onPress: function onPress() {\n            return _this4.confirmDeleteStudent(id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 21\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 25,\n            alignSelf: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 23\n          }\n        }, \"\\u522A\\u9664\")))));\n      })));\n    }\n  }]);\n\n  return Students;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    students: state.school.students,\n    classes: state.school.classes\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return _objectSpread({}, bindActionCreators({\n    updateProfilePicture: updateProfilePicture,\n    fetchStudentsSuccess: fetchStudentsSuccess,\n    editStudentSuccess: editStudentSuccess\n  }, dispatch));\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Students);","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/admin/students.js"],"names":["React","connect","ImagePicker","Permissions","bindActionCreators","updateProfilePicture","fetchStudentsSuccess","editStudentSuccess","get","post","delete_by_id","Modal","EditStudentProfile","AddParent","QRPage","Dimensions","width","height","Students","props","getPermissionAsync","Platform","OS","askAsync","CAMERA_ROLL","status","alert","_pickImage","student_id","url","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","base64","result","cancelled","getProfilePictureURL","console","log","state","showModal","modal_type","parent_data","qr_data","modal_padding","image","school_name","route","params","students","body","path","Date","getMilliseconds","response","success","statusCode","message","data","name","image_url","classes","setState","old_class_id","class_id","hideModal","Alert","text","style","onPress","deleteStudentById","fetchStudentData","school_id","getModalContent","Object","keys","map","id","index","student","flex","backgroundColor","flexDirection","marginBottom","padding","profile_picture","require","uri","borderRadius","paddingLeft","fontSize","address","father_phone","mother_phone","justifyContent","event","Math","max","nativeEvent","pageY","alignSelf","confirmDeleteStudent","Component","mapStateToProps","school","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, TouchableHighlight, Image, Text, ScrollView, Platform, Alert, Dimensions } from 'react-native'\nimport { connect } from 'react-redux'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { bindActionCreators } from 'redux';\nimport { updateProfilePicture, fetchStudentsSuccess, editStudentSuccess } from '../../../redux/school/actions/index'\nimport { get, post, delete_by_id } from '../../util'\nimport Modal from './modal'\nimport EditStudentProfile from './editstudentprofile'\nimport AddParent from './addparent';\nimport QRPage from './qrpage';\n\nconst { width, height } = Dimensions.get('window')\n/* \nPage where we view/edit class information including:\n  -adding/removing class\n  -adding/removing/switching students\n  -adding/removing/switching teachers\n*/\n// const editStudent = \n//     <View>\n//       <Text>Student</Text>\n//     </View>\n\nclass Students extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: '',\n      student_id: '',\n      parent_data: {},\n      qr_data: '',\n      modal_padding: 0\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync();\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to make this work!');\n      }\n    }\n  };\n\n  _pickImage = async (student_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { base64 } = result\n        // this.setState({ image: result.uri });\n        this.getProfilePictureURL(base64, student_id, url)\n      }\n\n      // console.log(result);\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, student_id, url) {\n    const { school_name } = this.props.route.params\n    const { students } = this.props\n    const body = {\n      image,\n      url,\n      path: `${school_name}/profile_picture_${student_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await post(`/student/${student_id}/profile-picture`, body)\n    // console.log(response)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.updateProfilePicture(student_id, data.image_url)\n  }\n\n  getModalContent() {\n    const { students, classes } = this.props\n    const { showModal, modal_type, student_id, parent_data, qr_data } = this.state\n    // console.log('students: ', students)\n    if (!showModal) {\n      return null\n    } else if (modal_type === 'student') {\n      return <EditStudentProfile\n              student_id={student_id}\n              student={students[student_id]}\n              classes={classes}\n              addParent={(parent_data) => this.setState({\n                modal_type: 'add_parent',\n                parent_data\n              })}\n              editStudentSuccess={(student_id, name, old_class_id, class_id) => \n                this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n              }\n              hideModal={() => this.hideModal()}\n            />\n    } else if (modal_type === 'add_parent') {\n      return <AddParent\n              student_id={student_id}\n              parent_data={parent_data}\n              viewQRCode={(qr_data) => this.setState({\n                modal_type: 'qrpage',\n                qr_data\n              })}\n              goBack={() => this.setState({\n                modal_type: 'student'\n              })}\n            />\n    } else { // modal_type: 'qrpage'\n      return <QRPage\n              qr_data={qr_data}\n              student_name={students[student_id].name}\n              parent_data={parent_data}\n              goBack={() => this.setState({\n                modal_type: 'add_parent'\n              })}\n            />\n    }\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  confirmDeleteStudent(student_id) {\n    const {students} = this.props\n    Alert.alert(\n      `${students[student_id].name} 刪除確認`,\n      '刪除這個寶貝會將一切攸關資料(包誇父母)刪除',\n      [\n        { text: \"取消\", style: \"cancel\"},\n        { text: 'OK', onPress: () => this.deleteStudentById(student_id) }\n      ]\n    )\n  }\n\n  async deleteStudentById(student_id) {\n    const { students } = this.props\n    const response = await delete_by_id(`/student/${student_id}/`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.fetchStudentData()\n  }\n\n  async fetchStudentData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/student`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {students, classes} = data\n    this.props.fetchStudentsSuccess(students, classes)\n  }\n\n  render() {\n    const { students } = this.props\n    const { showModal, modal_padding } = this.state\n    // console.log('students: ', students)\n    return (\n      <View>\n        <Modal\n          modal_padding={modal_padding}\n          show={showModal}\n          component={this.getModalContent()}\n          hideModal={() => this.hideModal()}\n        />\n        <ScrollView>\n          {Object.keys(students).map((id, index) => {\n            const student = students[id]\n            return (\n              <View key={id} style={{ flex:1, backgroundColor: 'lightgrey', flexDirection: 'row', marginBottom: 10, padding: 15 }}>\n                {/* profile picture */}\n                <TouchableHighlight\n                  style={{ }}\n                  onPress={() => this._pickImage(id, student.profile_picture)}\n                >\n                  <Image\n                    source={\n                        student.profile_picture === '' ?\n                            require('../../../assets/icon-thumbnail.png')\n                            : {uri: student.profile_picture}\n                    }\n                    style={{\n                      width: 200,\n                      height: 200,\n                      borderRadius: 100\n                    }}\n                  />\n                </TouchableHighlight>\n                \n                <View style={{ flex: 5, paddingLeft: 15 }}>\n                  {/* Name */}\n                  <View>\n                    <Text style={{ fontSize: 50 }}>{student.name}</Text>\n                  </View>\n\n                  {/* Address */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>地址: {student.address}</Text>\n                  </View>\n\n                  {/* Father phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(父): {student.father_phone}</Text>\n                  </View>\n\n                  {/* Mother phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(母): {student.mother_phone}</Text>\n                  </View>\n                </View>\n\n                {/* Right */}\n                <View style={{ flex: 1, justifyContent: 'space-evenly' }}>\n                  <View style={{ backgroundColor: 'white' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={(event) => this.setState({ \n                        showModal: true, \n                        modal_type: 'student', \n                        student_id: id,\n                        modal_padding: Math.max(0, event.nativeEvent.pageY - height)\n                      })}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>編輯</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                  <View style={{ backgroundColor: '#fa625f' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.confirmDeleteStudent(id)}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>刪除</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                </View>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    students: state.school.students,\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      updateProfilePicture,\n      fetchStudentsSuccess,\n      editStudentSuccess,\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Students)"]},"metadata":{},"sourceType":"module"}