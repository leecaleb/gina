{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var initial_state={message_by_student_id:{},student_id_for_update:new Set()};export default function message(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initial_state;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case'INITIALIZE_CLASS':{var message_by_student_id={};action.students.forEach(function(student){var id=student.id;message_by_student_id[id]={text:'',things_to_bring:[0,0,0,0,0],other_item:'其它',activities:[0,0,0,0,0,0,0,0,0],other_activity:'其它',teacher_id:''};});return _objectSpread(_objectSpread({},state),{},{message_by_student_id:message_by_student_id});}case'FETCH_CLASS_MESSAGE_DATA':{var message_data=action.message_data;return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_objectSpread(_objectSpread({},state.message_by_student_id),message_data)});}case'WRITE_TO_ALL':{var text=action.text,teacher_id=action.teacher_id;var _message_by_student_id=_objectSpread({},state.message_by_student_id);Object.keys(_message_by_student_id).forEach(function(student_id){_message_by_student_id[student_id].text=text;_message_by_student_id[student_id].teacher_id=teacher_id;});return _objectSpread(_objectSpread(_objectSpread({},state),_message_by_student_id),{},{student_id_for_update:new Set(Object.keys(_message_by_student_id))});}case'WRITE_TO_ONE':{var _text=action.text,student_id=action.student_id,_teacher_id=action.teacher_id;var student_id_for_update=new Set([].concat(_toConsumableArray(state.student_id_for_update),[student_id]));return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_objectSpread(_objectSpread({},state.message_by_student_id),{},_defineProperty({},student_id,_objectSpread(_objectSpread({},state.message_by_student_id[student_id]),{},{text:_text,teacher_id:_teacher_id}))),student_id_for_update:student_id_for_update});}case'REMIND_ITEMS_TO_BRING_TO_ALL':{var items_to_bring_bool=action.items_to_bring_bool,_teacher_id2=action.teacher_id;var _message_by_student_id2=_objectSpread({},state.message_by_student_id);Object.keys(_message_by_student_id2).forEach(function(student_id){_message_by_student_id2[student_id].things_to_bring=items_to_bring_bool;_message_by_student_id2[student_id].teacher_id=_teacher_id2;});return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_message_by_student_id2,student_id_for_update:new Set(Object.keys(_message_by_student_id2))});}case'REMIND_ITEMS_TO_BRING_TO_ONE':{var _student_id=action.student_id,things_to_bring=action.things_to_bring,_teacher_id3=action.teacher_id;var _message_by_student_id3=_objectSpread({},state.message_by_student_id);_message_by_student_id3[_student_id].things_to_bring=things_to_bring;_message_by_student_id3[_student_id].teacher_id=_teacher_id3;return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_message_by_student_id3,student_id_for_update:new Set([].concat(_toConsumableArray(state.student_id_for_update),[_student_id]))});}case'WRITE_ITEM_TO_BRING_TO_ALL':{var item_to_bring=action.item_to_bring,_teacher_id4=action.teacher_id;var _message_by_student_id4=_objectSpread({},state.message_by_student_id);Object.keys(_message_by_student_id4).forEach(function(student_id){_message_by_student_id4[student_id].other_item=item_to_bring===''?'其它':item_to_bring;_message_by_student_id4[student_id].teacher_id=_teacher_id4;});return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_message_by_student_id4,student_id_for_update:new Set(Object.keys(_message_by_student_id4))});}case'WRITE_ITEM_TO_BRING_TO_ONE':{var _student_id2=action.student_id,_item_to_bring=action.item_to_bring,_teacher_id5=action.teacher_id;return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_objectSpread(_objectSpread({},state.message_by_student_id),{},_defineProperty({},_student_id2,_objectSpread(_objectSpread({},state.message_by_student_id[_student_id2]),{},{other_item:_item_to_bring,teacher_id:_teacher_id5}))),student_id_for_update:new Set([].concat(_toConsumableArray(state.student_id_for_update),[_student_id2]))});}case'RECORD_ACTIVITIES_FOR_ALL':{var new_acitivities_bool=action.new_acitivities_bool,_teacher_id6=action.teacher_id;var _message_by_student_id5=_objectSpread({},state.message_by_student_id);Object.keys(_message_by_student_id5).forEach(function(student_id){_message_by_student_id5[student_id].activities=new_acitivities_bool;_message_by_student_id5[student_id].teacher_id=_teacher_id6;});return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_message_by_student_id5,student_id_for_update:new Set(Object.keys(_message_by_student_id5))});}case'RECORD_ACTIVITIES_FOR_ONE':{var _student_id3=action.student_id,activities=action.activities,_teacher_id7=action.teacher_id;var _message_by_student_id6=_objectSpread({},state.message_by_student_id);_message_by_student_id6[_student_id3].activities=activities;_message_by_student_id6[_student_id3].teacher_id=_teacher_id7;return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_message_by_student_id6,student_id_for_update:new Set([].concat(_toConsumableArray(state.student_id_for_update),[_student_id3]))});}case'WRITE_ACTIVITY_FOR_ALL':{var activity=action.activity,_teacher_id8=action.teacher_id;var _message_by_student_id7=_objectSpread({},state.message_by_student_id);Object.keys(_message_by_student_id7).forEach(function(student_id){_message_by_student_id7[student_id].other_activity=activity===''?'其它':activity;_message_by_student_id7[student_id].teacher_id=_teacher_id8;});return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_message_by_student_id7,student_id_for_update:new Set(Object.keys(_message_by_student_id7))});}case'WRITE_ACTIVITY_FOR_ONE':{var _student_id4=action.student_id,_activity=action.activity,_teacher_id9=action.teacher_id;return _objectSpread(_objectSpread({},state),{},{message_by_student_id:_objectSpread(_objectSpread({},state.message_by_student_id),{},_defineProperty({},_student_id4,_objectSpread(_objectSpread({},state.message_by_student_id[_student_id4]),{},{other_activity:_activity,teacher_id:_teacher_id9}))),student_id_for_update:new Set([].concat(_toConsumableArray(state.student_id_for_update),[_student_id4]))});}case'SEND_MESSAGE_ON_SUCCESS':{return _objectSpread(_objectSpread({},state),{},{student_id_for_update:new Set()});}case'CLEAR_STATE':{return{message_by_student_id:{},student_id_for_update:new Set()};}default:return state;}}","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/redux/school/reducers/message.js"],"names":["initial_state","message_by_student_id","student_id_for_update","Set","message","state","action","type","students","forEach","student","id","text","things_to_bring","other_item","activities","other_activity","teacher_id","message_data","Object","keys","student_id","items_to_bring_bool","item_to_bring","new_acitivities_bool","activity"],"mappings":"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","sourcesContent":["const initial_state = {\n  // TODO: parents can only write one response per message\n  // TODO: how do we incorporate reminders for things to bring\n  message_by_student_id: {\n    // { student_id }: {\n    //   text: '',\n    //   things_to_bring: [0,0,1,1,0,0,0],\n    //   other_item: ''\n    //   activities: [1,1,0,0,0,0,1],\n    //   other_activity: '',\n    //   teacher_id: ''\n    // }\n  },\n  student_id_for_update: new Set()\n}\n\nexport default function message(state = initial_state, action) {\n  switch (action.type) {\n    case 'INITIALIZE_CLASS': {\n      const message_by_student_id = {}\n      action.students.forEach(student => {\n        const { id } = student\n        message_by_student_id[id] = {\n          text: '',\n          things_to_bring: [0, 0, 0, 0, 0],\n          other_item: '其它',\n          activities: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n          other_activity: '其它',\n          teacher_id: ''\n        }\n      })\n      return {\n        ...state,\n        message_by_student_id\n      }\n    }\n      \n    case 'FETCH_CLASS_MESSAGE_DATA': {\n      const { message_data } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          ...message_data\n        }\n      }\n    }\n\n    case 'WRITE_TO_ALL': {\n      const { text, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].text = text\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n\n      return {\n        ...state,\n        ...message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'WRITE_TO_ONE': {\n      const { text, student_id, teacher_id } = action\n      const student_id_for_update = new Set([...state.student_id_for_update, student_id])\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            text,\n            teacher_id\n          }\n        },\n        student_id_for_update\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ALL': {\n      const { items_to_bring_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].things_to_bring = items_to_bring_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ONE': {\n      const { student_id, things_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].things_to_bring = things_to_bring\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ALL': {\n      const { item_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_item = item_to_bring === '' ? '其它' : item_to_bring\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ONE': {\n      const { student_id, item_to_bring, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_item: item_to_bring,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ALL': {\n      const { new_acitivities_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].activities = new_acitivities_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ONE': {\n      const { student_id, activities, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].activities = activities\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ALL': {\n      const { activity, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_activity = activity === '' ? '其它' : activity\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id))\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ONE': {\n      const { student_id, activity, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_activity: activity,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id])\n      }\n    }\n\n    case 'SEND_MESSAGE_ON_SUCCESS': {\n      return {\n        ...state,\n        student_id_for_update: new Set()\n      }\n    }\n\n    case 'CLEAR_STATE': {\n      return {\n        message_by_student_id: {},\n        student_id_for_update: new Set()\n      }\n    }\n\n    default:\n      return state\n  }\n}"]},"metadata":{},"sourceType":"module"}