{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import{Card,CardItem,Toast}from'native-base';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Image from\"react-native-web/dist/exports/Image\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import{connect}from'react-redux';import{bindActionCreators}from'redux';import{markAbsent,markPresent}from\"./../../redux/school/actions/index\";import{formatDate}from\"./../util\";var AttendanceCard=function(_React$Component){_inherits(AttendanceCard,_React$Component);var _super=_createSuper(AttendanceCard);function AttendanceCard(props){var _this;_classCallCheck(this,AttendanceCard);_this=_super.call(this,props);_this.state={selected_student_ids:[]};return _this;}_createClass(AttendanceCard,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}},{key:\"onSelectAttendanceType\",value:function onSelectAttendanceType(attendance_type){var attendance=this.props.attendance;switch(attendance_type){case'present':{this.setState({selected_student_ids:_toConsumableArray(attendance.present)});return;}case'absent':{this.setState({selected_student_ids:_toConsumableArray(attendance.absent)});return;}case'unmarked':{this.setState({selected_student_ids:_toConsumableArray(attendance.unmarked)});return;}}}},{key:\"fetchData\",value:function fetchData(){var _this2=this;var date=formatDate(new Date());var query=\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance?date=\"+date+\"&class_id=\"+this.props.class.class_id;fetch(query,{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(resJson){for(var key in resJson){if(resJson[key][0]!==null){_this2.props.markPresent(key,resJson[key][0]);}else if(resJson[key][2]!==null){_this2.props.markAbsent(key,resJson[key][2]);}}_this2.setState({selected_student_ids:_toConsumableArray(_this2.props.attendance.unmarked)});}).catch(function(err){return console.log('err: ',err);});}},{key:\"handleOnClick\",value:function handleOnClick(student_id){this.props.showModal(student_id);}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(Card,{style:{flex:1,alignItems:'center',justifyContent:'center'}},React.createElement(CardItem,null,React.createElement(Text,{style:{fontSize:30}},\"\\u51FA\\u5E2D\\u72C0\\u6CC1\")),React.createElement(View,{style:{flex:1,flexDirection:'row'}},React.createElement(View,{style:{flex:1}},React.createElement(View,{style:{paddingLeft:5,paddingTop:5}},React.createElement(Text,null,\"\\u51FA\\u5E2D\")),React.createElement(TouchableHighlight,{style:{flex:1,alignSelf:'center',width:'70%',height:'70%',backgroundColor:'#dcf3d0'},underlayColor:\"#00c07f\",onPress:function onPress(){return _this3.onSelectAttendanceType('present');}},React.createElement(Text,{style:{flex:1,width:'100%',textAlign:'center',fontSize:60},adjustsFontSizeToFit:true},this.props.attendance.present.size))),React.createElement(View,{style:{flex:1}},React.createElement(View,{style:{paddingLeft:5,paddingTop:5}},React.createElement(Text,null,\"\\u7F3A\\u5E2D\")),React.createElement(TouchableHighlight,{style:{flex:1,alignSelf:'center',width:'70%',height:'70%',backgroundColor:'#ffe1d0'},underlayColor:\"#fa625f\",onPress:function onPress(){return _this3.onSelectAttendanceType('absent');}},React.createElement(Text,{style:{flex:1,width:'100%',textAlign:'center',fontSize:60},adjustsFontSizeToFit:true},this.props.attendance.absent.size))),React.createElement(View,{style:{flex:1}},React.createElement(View,{style:{paddingLeft:5,paddingTop:5}},React.createElement(Text,null,\"\\u672A\\u77E5\")),React.createElement(TouchableHighlight,{style:{flex:1,alignSelf:'center',width:'70%',height:'70%',backgroundColor:'#fff1b5'},underlayColor:\"#f4d41f\",onPress:function onPress(){return _this3.onSelectAttendanceType('unmarked');}},React.createElement(Text,{style:{flex:1,width:'100%',textAlign:'center',fontSize:60},adjustsFontSizeToFit:true},this.props.attendance.unmarked.size)))),React.createElement(View,{style:{flex:1,flexDirection:'row',flexWrap:'wrap'}},this.state.selected_student_ids.map(function(student_id){var _this3$props$attendan=_this3.props.attendance,present=_this3$props$attendan.present,unmarked=_this3$props$attendan.unmarked,absent=_this3$props$attendan.absent;return React.createElement(TouchableHighlight,{key:student_id,style:{width:'31%',margin:'1%'},underlayColor:\"transparent\",onPress:function onPress(){return _this3.handleOnClick(student_id);}},React.createElement(View,{style:styles.cardContainer},React.createElement(Card,null,React.createElement(CardItem,{style:{justifyContent:'center'}},React.createElement(Image,{source:_this3.props.class.students[student_id].profile_picture===''?require(\"../../assets/icon-thumbnail.png\"):{uri:_this3.props.class.students[student_id].profile_picture},style:{height:200,width:200,borderRadius:100,borderWidth:10,borderColor:present.has(student_id)?'#dcf3d0':unmarked.has(student_id)?'#fff1b5':'#ffe1d0'}})),React.createElement(CardItem,{footer:true,style:{justifyContent:'center',marginTop:-5}},React.createElement(Text,{style:{marginTop:-10}},_this3.props.class.students[student_id].name)))));})));}}]);return AttendanceCard;}(React.Component);var styles=StyleSheet.create({cardContainer:{paddingVertical:5},thumbnailImage:{height:80,width:80,borderRadius:40}});var mapStateToProps=function mapStateToProps(state){return{attendance:state.attendance,class:state.classInfo};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return _objectSpread({},bindActionCreators({markAbsent:markAbsent,markPresent:markPresent},dispatch));};export default connect(mapStateToProps,mapDispatchToProps,null,{forwardRef:true})(AttendanceCard);","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/attendancecard.js"],"names":["React","Card","CardItem","Toast","connect","bindActionCreators","markAbsent","markPresent","formatDate","AttendanceCard","props","state","selected_student_ids","fetchData","attendance_type","attendance","setState","present","absent","unmarked","date","Date","query","class","class_id","fetch","method","headers","Accept","then","res","json","resJson","key","catch","err","console","log","student_id","showModal","flex","alignItems","justifyContent","fontSize","flexDirection","paddingLeft","paddingTop","alignSelf","width","height","backgroundColor","onSelectAttendanceType","textAlign","size","flexWrap","map","margin","handleOnClick","styles","cardContainer","students","profile_picture","require","uri","borderRadius","borderWidth","borderColor","has","marginTop","name","Component","StyleSheet","create","paddingVertical","thumbnailImage","mapStateToProps","classInfo","mapDispatchToProps","dispatch","forwardRef"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Card, CardItem, Toast } from 'native-base'\nimport { View, Text, StyleSheet, Image, TouchableHighlight } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { markAbsent, markPresent } from './../../redux/school/actions/index'\nimport { formatDate } from './../util'\n\nclass AttendanceCard extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            selected_student_ids: []\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    onSelectAttendanceType(attendance_type) {\n        const { attendance } = this.props\n        switch (attendance_type) {\n            case 'present': {\n                this.setState({\n                    selected_student_ids: [...attendance.present]\n                })\n                return\n            }\n            \n            case 'absent': {\n                this.setState({\n                    selected_student_ids: [...attendance.absent]\n                })\n                return \n            }\n                \n            case 'unmarked': {\n                this.setState({\n                    selected_student_ids: [...attendance.unmarked]\n                })\n                return\n            }\n        }\n    }\n\n    fetchData() {\n        const date = formatDate(new Date())\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance?date=${date}&class_id=${this.props.class.class_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then(res => res.json())\n        .then(resJson => {\n            for (var key in resJson) {\n                // {student_id}: [in_time, out_time, excuse_type]\n                if(resJson[key][0] !== null) {\n                    this.props.markPresent(key, resJson[key][0])\n                }\n                else if (resJson[key][2] !== null) {\n                    this.props.markAbsent(key, resJson[key][2])\n                }\n            }\n            this.setState({\n                selected_student_ids: [...this.props.attendance.unmarked]\n            })\n        })\n        .catch(err => console.log('err: ', err))\n    }\n\n    handleOnClick(student_id) {\n        this.props.showModal(student_id)\n    }\n\n    render() {\n        // TODO: on unmount, clear redux\n        // TODO: way to automatically update absent whenever parents send absense request\n        // TODO: what to display on homepage vs what to display in other pages after teachers\n        //          click into the attendance status(present, absent, or not yet)\n        // console.log(this.props.attendance)\n        // console.log(this.props.class.students)\n        return (\n            <Card style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                <CardItem>\n                    <Text style={{ fontSize: 30 }}>出席狀況</Text>\n                </CardItem>\n\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>出席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#dcf3d0'\n                            }}\n                            underlayColor='#00c07f'\n                            onPress={() => this.onSelectAttendanceType('present')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.present.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>缺席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#ffe1d0'\n                            }}\n                            underlayColor='#fa625f'\n                            onPress={() => this.onSelectAttendanceType('absent')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.absent.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>未知</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#fff1b5'\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.onSelectAttendanceType('unmarked')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.unmarked.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', flexWrap: 'wrap' }}>\n                    {this.state.selected_student_ids.map((student_id) => {\n                        const { present, unmarked, absent } = this.props.attendance\n                        return (\n                            <TouchableHighlight\n                                key={student_id}\n                                style={{ width: '31%', margin: '1%'}}\n                                underlayColor='transparent'\n                                onPress={() => this.handleOnClick(student_id)}\n                            >\n                                <View style={styles.cardContainer}>\n                                    <Card>\n                                        <CardItem style={{ justifyContent: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={{\n                                                        height: 200,\n                                                        width: 200,\n                                                        borderRadius: 100,\n                                                        borderWidth: 10,\n                                                        borderColor:\n                                                            present.has(student_id) ? '#dcf3d0'\n                                                                : unmarked.has(student_id) ? '#fff1b5'\n                                                                    : '#ffe1d0'\n                                                    }}\n                                                />\n                                        </CardItem>\n                                        <CardItem\n                                            footer\n                                            style={{ justifyContent: 'center', marginTop: -5 }}\n                                        >\n                                            <Text style={{ marginTop: -10 }}>{this.props.class.students[student_id].name}</Text>\n                                        </CardItem>\n                                    </Card>\n                                </View>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        paddingVertical: 5\n    },\n    thumbnailImage: {\n        height: 80,\n        width: 80,\n        borderRadius: 40\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        attendance: state.attendance,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markAbsent, markPresent}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (AttendanceCard)"]},"metadata":{},"sourceType":"module"}