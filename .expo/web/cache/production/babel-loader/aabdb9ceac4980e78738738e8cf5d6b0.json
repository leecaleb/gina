{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _readOnlyError from\"@babel/runtime/helpers/readOnlyError\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import ENV from\"../variables\";export var formatDate=function formatDate(date){return date.getFullYear()+'-'+('0'+(date.getMonth()+1)).slice(-2)+'-'+('0'+date.getDate()).slice(-2);};export var beautifyDate=function beautifyDate(date){return date.getFullYear()+'/'+('0'+(date.getMonth()+1)).slice(-2)+'/'+('0'+date.getDate()).slice(-2);};export var beautifyMonthDate=function beautifyMonthDate(date){return('0'+(date.getMonth()+1)).slice(-2)+'/'+('0'+date.getDate()).slice(-2);};export var formatTime=function formatTime(date){return date.getHours()+':'+date.getMinutes()+':'+date.getSeconds();};export var beautifyTime=function beautifyTime(date){return date.getHours()+':'+('0'+date.getMinutes()).slice(-2);};export var formatHourMinute=function formatHourMinute(date){return date.getHours()+':'+date.getMinutes();};export var get=function get(endpoint){var success,result;return _regeneratorRuntime.async(function get$(_context){while(1){switch(_context.prev=_context.next){case 0:success=true;_context.next=3;return _regeneratorRuntime.awrap(fetch(\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+endpoint,{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(resJson){var statusCode=resJson.statusCode,message=resJson.message,data=resJson.data;if(statusCode>200){success=false;}else if(statusCode===undefined){return{success:false,statusCode:500,message:message,data:{}};}return{success:success,statusCode:statusCode,message:message,data:data};}).catch(function(err){return{success:false,statusCode:500,message:err.message,data:{}};}));case 3:result=_context.sent;return _context.abrupt(\"return\",result);case 5:case\"end\":return _context.stop();}}},null,null,null,Promise);};export var post=function post(endpoint,body){var success,result;return _regeneratorRuntime.async(function post$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:success=true;_context2.next=3;return _regeneratorRuntime.awrap(fetch(\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+endpoint,{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify(body)}).then(function(res){return res.json();}).then(function(resJson){var statusCode=resJson.statusCode,message=resJson.message,data=resJson.data;if(statusCode>200){success=false;}else if(statusCode===undefined){return{success:false,statusCode:500,message:message,data:{}};}return{success:success,statusCode:statusCode,message:message,data:data};}).catch(function(err){return{success:false,statusCode:500,message:err.message,data:{}};}));case 3:result=_context2.sent;return _context2.abrupt(\"return\",result);case 5:case\"end\":return _context2.stop();}}},null,null,null,Promise);};export var put=function put(endpoint,body){var success,result;return _regeneratorRuntime.async(function put$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:success=true;_context3.next=3;return _regeneratorRuntime.awrap(fetch(\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+endpoint,{method:'PUT',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify(body)}).then(function(res){return res.json();}).then(function(resJson){var statusCode=resJson.statusCode,message=resJson.message,data=resJson.data;if(statusCode>200){success=false;}else if(statusCode===undefined){return{success:false,statusCode:500,message:message,data:{}};}return{success:success,statusCode:statusCode,message:message,data:data};}).catch(function(err){return{success:false,statusCode:500,message:err.message,data:{}};}));case 3:result=_context3.sent;return _context3.abrupt(\"return\",result);case 5:case\"end\":return _context3.stop();}}},null,null,null,Promise);};export var delete_by_id=function delete_by_id(endpoint){var success,result;return _regeneratorRuntime.async(function delete_by_id$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:success=true;_context4.next=3;return _regeneratorRuntime.awrap(fetch(\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+endpoint,{method:'DELETE',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(resJson){var statusCode=resJson.statusCode,message=resJson.message,data=resJson.data;if(statusCode>200){success=false;}else if(statusCode===undefined){return{success:false,statusCode:500,message:message,data:{}};}return{success:success,statusCode:statusCode,message:message,data:data};}).catch(function(err){return{success:false,statusCode:500,message:err.message,data:{}};}));case 3:result=_context4.sent;return _context4.abrupt(\"return\",result);case 5:case\"end\":return _context4.stop();}}},null,null,null,Promise);};export var fetchData=function fetchData(type,child_id,start_date,end_date){var query,fetchedData;return _regeneratorRuntime.async(function fetchData$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:query=\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+\"/\"+type+\"/\"+child_id+\"?start_date=\"+start_date+\"&end_date=\"+end_date;_context5.next=3;return _regeneratorRuntime.awrap(fetch(query,{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(resJson){return resJson;}).catch(function(err){console.log(err);}));case 3:fetchedData=_context5.sent;return _context5.abrupt(\"return\",fetchedData);case 5:case\"end\":return _context5.stop();}}},null,null,null,Promise);};export var fetchClassData=function fetchClassData(type,class_id,start_date,end_date){var query,fetchedData;return _regeneratorRuntime.async(function fetchClassData$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:query=\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+\"/\"+type+\"/class/\"+class_id+\"?start_date=\"+start_date+\"&end_date=\"+end_date;_context6.next=3;return _regeneratorRuntime.awrap(fetch(query,{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(resJson){return resJson;}).catch(function(err){console.log(err);}));case 3:fetchedData=_context6.sent;return _context6.abrupt(\"return\",fetchedData);case 5:case\"end\":return _context6.stop();}}},null,null,null,Promise);};export var fetchMessagesByConversationId=function fetchMessagesByConversationId(conversation_id,sender_id,recipient_id){var query,messageData;return _regeneratorRuntime.async(function fetchMessagesByConversationId$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log('fetchMessageByConvId/recipient_id',recipient_id);query=\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+\"/message?conversation_id=\"+conversation_id+\"&sender_id=\"+sender_id;_context7.next=4;return _regeneratorRuntime.awrap(fetch(query,{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(resJson){console.log('fetchMessagesByConversationId/resJson: ',resJson);var _resJson$data=resJson.data,messages=_resJson$data.messages,most_recently_read_message_id=_resJson$data.most_recently_read_message_id;if(resJson.statusCode===200){markRead(messages,sender_id,recipient_id);return{success:true,data:resJson.data};}else{return{sucess:false,data:resJson};}}).catch(function(err){console.log('err: ',err);return{success:false,data:err};}));case 4:messageData=_context7.sent;return _context7.abrupt(\"return\",messageData);case 6:case\"end\":return _context7.stop();}}},null,null,null,Promise);};var markRead=function markRead(message_array,sender_id,recipient_id){var query=\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+\"/message\";var most_recent_message=message_array[0]?message_array[0]:null;if(most_recent_message===null||most_recent_message.sender_id===sender_id||most_recent_message.read_at!==null){return;}fetch(query,{method:'PUT',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({most_recent_message_id:most_recent_message.message_id,recipient_id:recipient_id})}).then(function(res){return res.json();}).then(function(resJson){console.log('markRead/resJson: ',resJson);}).catch(function(err){return console.log('err: ',err);});};export var fetchReadReceipt=function fetchReadReceipt(conversation_id,sender_id){var query,success,message_id;return _regeneratorRuntime.async(function fetchReadReceipt$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:query=\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+\"/message/read-receipt?conversation_id=\"+conversation_id+\"&sender_id=\"+sender_id;success=true;_context8.next=4;return _regeneratorRuntime.awrap(fetch(query,{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(resJson){console.log('parent/inboxcard/fetchReadReceipt/resJson: ',resJson);return resJson.data;}).catch(function(err){console.log('err: ',err);success=(_readOnlyError(\"success\"),false);return\"err: \"+err;}));case 4:message_id=_context8.sent;return _context8.abrupt(\"return\",{success:success,data:message_id});case 6:case\"end\":return _context8.stop();}}},null,null,null,Promise);};export var sendWellnessData=function sendWellnessData(wellness_data,class_id,date){var record_id_for_update,data_objs,request_body,query,fetchResult;return _regeneratorRuntime.async(function sendWellnessData$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:record_id_for_update=wellness_data.record_id_for_update;data_objs=[];if(!(record_id_for_update.size===0)){_context9.next=4;break;}return _context9.abrupt(\"return\",{success:true,data:[]});case 4:record_id_for_update.forEach(function(record_id){data_objs.push(_objectSpread({record_id:record_id},wellness_data.records[record_id]));});normalize(data_objs);request_body={date:date,class_id:class_id,data_objs:data_objs};query=\"https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/\"+ENV+\"/wellness/\";_context9.next=10;return _regeneratorRuntime.awrap(fetch(query,{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify(request_body)}).then(function(res){return res.json();}).then(function(resJson){var statusCode=resJson.statusCode,message=resJson.message,data=resJson.data;if(statusCode>200||statusCode===undefined){return{success:false,statusCode:statusCode,message:message};}return{success:true,statusCode:statusCode,message:message,data:data};}).catch(function(err){return{success:false,message:err};}));case 10:fetchResult=_context9.sent;return _context9.abrupt(\"return\",fetchResult);case 12:case\"end\":return _context9.stop();}}},null,null,null,Promise);};function normalize(data_objs){for(var i=0;i<data_objs.length;i++){data_objs[i].time=formatTime(data_objs[i].time);}}","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/util.js"],"names":["ENV","formatDate","date","getFullYear","getMonth","slice","getDate","beautifyDate","beautifyMonthDate","formatTime","getHours","getMinutes","getSeconds","beautifyTime","formatHourMinute","get","endpoint","success","fetch","method","headers","Accept","then","res","json","resJson","statusCode","message","data","undefined","catch","err","result","post","body","JSON","stringify","put","delete_by_id","fetchData","type","child_id","start_date","end_date","query","console","log","fetchedData","fetchClassData","class_id","fetchMessagesByConversationId","conversation_id","sender_id","recipient_id","messages","most_recently_read_message_id","markRead","sucess","messageData","message_array","most_recent_message","read_at","most_recent_message_id","message_id","fetchReadReceipt","sendWellnessData","wellness_data","record_id_for_update","data_objs","size","forEach","record_id","push","records","normalize","request_body","fetchResult","i","length","time"],"mappings":"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","sourcesContent":["// import { connect } from \"react-redux\"\nimport ENV from '../variables'\n\nexport const formatDate = (date) => {\n    return date.getFullYear() + '-' + ('0' + (date.getMonth()+ 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyDate = (date) => {\n    return date.getFullYear() + '/' + ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyMonthDate = (date) => {\n    return ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const formatTime = (date) => {\n    return date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\n}\n\nexport const beautifyTime = (date) => {\n    return date.getHours() + ':' + ('0' + date.getMinutes()).slice(-2)\n}\n\nexport const formatHourMinute = (date) => {\n    return date.getHours() + ':' + date.getMinutes()\n}\n\nexport const get = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log(resJson)\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const post = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const put = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const delete_by_id = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const fetchData = async (type, child_id, start_date, end_date) => {\n    // const date = formatDate(new Date());\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/${child_id}?start_date=${start_date}&end_date=${end_date}`\n\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    // console.log(`${type} util/fetchData/fetchedData: `, fetchedData)\n    return fetchedData\n}\n\nexport const fetchClassData = async (type, class_id, start_date, end_date) => {\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/class/${class_id}?start_date=${start_date}&end_date=${end_date}`\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            // console.log('fetchClassData/resJson: /', resJson)\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    return fetchedData\n}\n\nexport const fetchMessagesByConversationId = async (conversation_id, sender_id, recipient_id) => {\n    console.log('fetchMessageByConvId/recipient_id', recipient_id)\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const messageData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('fetchMessagesByConversationId/resJson: ', resJson)\n            const { messages, most_recently_read_message_id } = resJson.data\n            if (resJson.statusCode === 200) {\n                markRead(messages, sender_id, recipient_id)\n                return {\n                    success: true,\n                    data: resJson.data\n                }\n            } else {\n                return {\n                    sucess: false,\n                    data: resJson\n                }\n            }\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            return {\n                success: false,\n                data: err\n            }\n        })\n    return messageData\n}\n\nconst markRead = (message_array, sender_id, recipient_id) => {\n    // console.log('message_array: ', message_array)\n    // const { sender_id, recipient_id } = this.state\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message`\n\n    const most_recent_message = message_array[0] ? message_array[0] : null\n    if (most_recent_message === null || most_recent_message.sender_id === sender_id || most_recent_message.read_at !== null) {\n        return\n    }\n\n    fetch(query, {\n        method: 'PUT',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            most_recent_message_id: most_recent_message.message_id,\n            recipient_id\n        })\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('markRead/resJson: ', resJson)\n        })\n        .catch(err => console.log('err: ', err))\n}\n\nexport const fetchReadReceipt = async (conversation_id,  sender_id) => {\n    // const { conversation_id } = this.state.messageData\n    // const sender_id = this.props.child_id\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message/read-receipt?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const success = true\n    const message_id = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('parent/inboxcard/fetchReadReceipt/resJson: ', resJson)\n            return resJson.data\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            success = false\n            return `err: ${err}`\n        })\n    return {\n        success,\n        data: message_id\n    }\n}\n\nexport const sendWellnessData = async (wellness_data, class_id, date) => {\n    const { record_id_for_update} = wellness_data\n    var data_objs = []\n\n    if (record_id_for_update.size === 0) {\n        return {\n            success: true,\n            data: []\n        }\n    }\n\n    record_id_for_update.forEach((record_id) => {\n        data_objs.push({\n            record_id,\n            ...wellness_data.records[record_id]\n        })\n    })\n    normalize(data_objs)\n\n    var request_body = {\n        date,\n        class_id,\n        data_objs\n    }\n\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/wellness/`\n    \n    const fetchResult = await fetch(query, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n        .then((res) => res.json())\n        .then((resJson) => {\n            const { statusCode, message, data } = resJson\n            if (statusCode > 200 || statusCode === undefined) {\n                return {\n                    success: false,\n                    statusCode,\n                    message\n                }\n            }\n            return {\n                success: true,\n                statusCode,\n                message,\n                data\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                message: err\n            }\n        })\n    return fetchResult\n}\n\nfunction normalize(data_objs) {\n    for (var i = 0; i < data_objs.length; i++) {\n        data_objs[i].time = formatTime(data_objs[i].time)\n    }\n}"]},"metadata":{},"sourceType":"module"}