{"version":3,"sources":["assets/app-splash.gif","assets/icon-bookmark.png","assets/icon-delete.png","assets/icon-teacher-thumbnail.png","assets/icon-back.png","assets/icon-forward.png","assets/icon-qr.png","assets/app_logo.png","assets/icon-checked.png","assets/icon-plus.png","redux/school/reducers/classInfo.js","redux/school/reducers/attendance.js","redux/school/reducers/appetite.js","redux/school/reducers/sleep.js","redux/school/reducers/healthstatus.js","redux/school/reducers/milk.js","redux/school/reducers/diaper.js","redux/school/reducers/message.js","redux/school/reducers/school.js","redux/school/reducers/index.js","redux/school/reducers/medicationrequests.js","redux/school/reducers/water.js","redux/school/actions/index.js","components/teacher/loginnumberpad.js","variables.js","components/util.js","components/teacher/attendancecard.js","components/teacher/medicationrequestcard.js","components/reloading.js","components/teacher/pickupalert.js","components/picker.js","components/teacher/wellnessform.js","components/teacher/studentmodal.js","components/teacher/teachermodal.js","components/teacher/modal.js","components/teacher/inboxcard.js","components/teacher/absencecard.js","components/parent/timemodal.js","components/teacher/teacherhome.js","components/teacher/schoolhome.js","components/teacher/teacherclockinout.js","components/teacher/logs/medrequestmodal.js","components/teacher/logs/medicinelog.js","components/teacher/logs/wellnesslog.js","components/header.js","components/teacher/logs/appetitelog.js","components/teacher/logs/sleeplog.js","components/teacher/logs/milklog.js","components/teacher/logs/pootextinput.js","components/teacher/logs/pooentry.js","components/teacher/logs/diaperlog.js","components/teacher/admin/adminhome.js","components/teacher/admin/announcement.js","components/teacher/admin/registernewstudents.js","components/teacher/admin/registerparents.js","components/teacher/admin/registration.js","components/teacher/admin/modal.js","components/teacher/admin/editstudentprofile.js","components/teacher/admin/addparent.js","components/teacher/admin/qrpage.js","components/teacher/admin/students.js","components/teacher/admin/addteacher.js","components/teacher/admin/editteacher.js","components/teacher/admin/teachers.js","components/modal.js","components/form.js","components/teacher/messageforparents.js","components/teacher/attendancepage.js","components/teacher/inbox.js","components/teacher/admin/downloadpage.js","components/teacher/admin/downloadteacherattendance.js","components/teacher/admin/announcementhome.js","components/teacher/admin/addannouncementpage.js","components/teacher/schoolapp.js","components/auth/signin.js","components/auth/signup.js","redux/parent/reducers/index.js","redux/parent/reducers/parent.js","redux/parent/reducers/attendance.js","redux/parent/reducers/inbox.js","redux/parent/actions/index.js","components/parent/wellnesscard.js","components/parent/appetitecard.js","components/parent/milkcard.js","components/parent/sleepcard.js","components/parent/restroomcard.js","components/parent/messagecard.js","components/parent/parenthometitle.js","components/parent/profileselector.js","components/parent/qrpage.js","components/parent/medicinerequestcard.js","components/parent/morningremindercard.js","components/parent/announcementcard.js","components/parent/attendancecard.js","components/parent/mainmenu/mainmenu.js","components/parent/parenthome.js","components/parent/medicinepowderform.js","components/parent/medicinesyrupform.js","components/parent/medicinecreamform.js","components/parent/medicationrequestmain.js","components/parent/medicationrequestpage.js","components/parent/absenceexcuse.js","components/parent/absenceexcusepage.js","components/parent/pickuprequest.js","components/parent/addmedicationrequestpage.js","components/parent/announcementpage.js","components/parent/announcementlistpage.js","components/parent/mainmenu/downloadpage.js","components/parent/parentapp.js","components/auth/confirmsignup.js","components/auth/authloading.js","configuration/aws-cognito-auth.js","App.js","assets/icon-thumbnail.png","assets/icon-checked-box.png","assets/icon-unchecked-box.png","assets/icon-medication-powder.png","assets/icon-medication-syrup.png","assets/icon-medication-gel.png","assets/icon-medication-pill.png","assets/icon-wellness.png","assets/icon-appetite.png","assets/icon-milk.png","assets/icon-sleep.png","assets/icon-diaper.png","assets/icon-message.png","assets/icon-babies.png","assets/icon-medrequest.png","assets/icon-morningreminder.png","assets/icon-announcement.png","assets/icon-attendance.png","assets/icon-menu.png","assets/icon-plus-green.png","assets/icon-plus-red.png","assets/icon-download.png"],"names":["module","exports","initial_state","class_id","passcodeTeacherId","teachers","students","isConnected","errMessage","initialized","present","Set","absent","unmarked","attendance","initialState","loaded","fruit_name","ratings","updatedStudents","err_message","data_dispatched","by_student_id","records","by_id","all_id","errorMessage","newDataForCreate","oldDataForEdit","records_with_error","record_id_for_update","dataForRemoval","all_dispatched","data_to_update","new_data_for_create","old_data_for_edit","message_by_student_id","for_all","text","student_id_for_update","parent_messages","classes","pick_up_request","admin_passcode","viewing_status","passcodeAdminId","teacherOnDuty","student_present","student_absent","student_unmarked","teacher_present","teacher_absent","teacher_unmarked","combineReducers","classInfo","state","action","newState","type","teacher_objs","forEach","teacher","name","passcode","logged_in","in_time","out_time","student","id","profile_picture","blood_type","address","home_phone","father_phone","mother_phone","conversation_id","data","attendance_obj","attendance_id","teacher_id","time","student_id","delete","excuse_type","medicationrequests","requests","unfinished","finished","new_unfinished","request_id","administered","i","length","push","appetite","Breakfast","Fruit","Lunch","Snack","mealType","rating","water_drank","slice","meal_type","student_id_array","Object","keys","add","students_to_display","newRatingObj","map","water","byId","includes","sleep","sleepData","index","sleep_time","record_id_array","record_id","setSeconds","removed","splice","found","has","new_record_id","size","wake_time","student_record_ids","removing_index","findIndex","element","healthstatus","len","temperature","status","wellnessData","student_id_list","record_id_list","new_id","Date","milk","milkData","amount","milk_type","milk_amount","date_time","record_id_index","indexOf","diaper","diaperData","cloth_diaper","pee_or_poo","condition","current_pee_or_poo","new_records","record","students_pending_amount_update","message","things_to_bring","other_item","activities","other_activity","message_data","items_to_bring_bool","item_to_bring","new_acitivities_bool","activity","messages","school","admins","updated_classes","admin_id","updated_teachers","attendance_array","total_minutes","updated_students","uri","old_class_id","new_class_id","new_student_id_array","image_url","initializeClass","rateAppetite","markPresent","markAbsent","initializeRequests","fillMedRequest","fetchAttendanceSuccess","markTeacherLoggedIn","markTeacherLoggedOut","clearRatings","setAllRatingsToGreat","setAllDrinkWater","addWellnessRecord","addHealthStatus","addTemperature","sendWellnessDataSuccess","sendWellnessDataFail","invalidateWellnessData","setSleepTime","removeSleepRecord","removeSleepRecordSuccess","removeSleepRecordFail","setWakeTime","removeWakeTime","editMilkAmount","editMilkTime","updateDiaperAmount","addDiaperRecord","editDiaperTime","switchPeeOrPoo","editPooCondition","removeDiaperRecordSuccess","removeDiaperRecordFail","clearDiaperlogErrorMessage","addMilkRecord","fetchClassAppetiteData","fetchClassWellnessData","fetchClassSleepData","clearPendingSleepUpdate","fetchClassMilkData","createDataSuccess","createDataFail","editDataSuccess","editDataFail","removeMilkRecordSuccess","removeMilkRecordFail","createSleepRecordSuccess","createSleepRecordFail","editSleepRecordSuccess","editSleepRecordFail","fetchClassDiaperData","createDiaperRecordSuccess","createDiaperRecordFail","editDiaperRecordSuccess","editDiaperRecordFail","editDiaperAmountSuccess","editDiaperAmountFail","removeRecord","clearState","setClassId","onSendAppetiteSuccess","alertErrMessage","clearAppetiteErrorMessage","addStudentIdForUpdate","markWaterDrank","markStaffAttendanceFail","writeToAll","writeToOne","remindItemsToBringToAll","remindItemsToBringToOne","recordActivitiesForAll","recordActivitiesForOne","writeItemToBringToAll","writeItemToBringToOne","writeActivityForAll","writeActivityForOne","fetchClassMessageData","alertSleeplogErrorMessage","clearSleeplogErrorMessage","editFruitName","fetchClassesSuccess","email","fetchTeachersSuccess","fetchStudentsSuccess","initializeStudentWellness","sendMessageOnSuccess","setConnectState","clearSchoolState","fetchTeacherAttendanceSuccess","fetchStudentAttendanceSuccess","editTeacherOnDuty","addPickupRequest","updateViewingStatus","updateProfilePicture","editStudentSuccess","updateTeacherProfilePicture","markRecordError","markRecordCorrect","getParentMessageSuccess","LoginNumberPad","props","number_array","handlePasscode","bind","num","this","setState","handleEnterPasscode","TouchableHighlight","style","backgroundColor","width","height","flex","justifyContent","alignItems","zIndex","position","underlayColor","onPress","hideLoginPad","borderRadius","flexDirection","margin","fontSize","fontWeight","paddingHorizontal","alignSelf","flexWrap","number","key","React","Component","connect","StyleSheet","create","button","minWidth","aspectRatio","class","dispatch","bindActionCreators","getEnvVars","env","undefined","Constants","manifest","releaseChannel","formatDate","date","getFullYear","getMonth","getDate","beautifyDate","beautifyMonthDate","formatTime","getHours","getMinutes","getSeconds","beautifyTime","formatHourMinute","get","endpoint","a","async","success","fetch","ENV","method","headers","Accept","then","res","json","resJson","statusCode","catch","err","result","post","body","JSON","stringify","put","delete_by_id","fetchData","child_id","start_date","end_date","query","console","log","fetchedData","fetchClassData","sendWellnessData","wellness_data","data_objs","normalize","request_body","fetchResult","AttendanceCard","selected_student_ids","attendance_type","showModal","Text","View","paddingLeft","paddingTop","onSelectAttendanceType","textAlign","adjustsFontSizeToFit","handleOnClick","styles","cardContainer","Image","source","require","borderWidth","borderColor","footer","marginTop","paddingVertical","thumbnailImage","forwardRef","MedicationReqeustCard","timerId","d","alert","medication_requests","padding","navigation","button_text","ScrollView","horizontal","timestamp","medication","note","card","color","Reloading","ActivityIndicator","PickupAlert","timer","setTimeout","timeoutId","requestQueue","isLoading","onConfirm","goBack","Alert","clearTimeout","request","arrival_time","marginRight","PickerComponent","selectedIndex","Platform","OS","options","ActionSheetIOS","showActionSheetWithOptions","cancelButtonIndex","buttonIndex","handleSelectValue","ActionSheet","show","selectedValue","textStyle","disabled","showSelect","WellnessForm","other_option","normalized_temperature","autoFocus","TextInput","keyboardType","placeholder","value","onChangeText","temp","handleTempInput","handleSelectStatus","selectTextOnFocus","onBlur","StudentModal","getClassIdByStudentId","class_id_found","j","wellness","Toast","buttonText","duration","sendDataResult","fetchStudentAttendance","hideModal","school_id","startDate","endDate","response","handleSend","TeacherModal","clockout","clockin","fetchTeacherAttendance","setOptions","headerRight","paddingRight","editTemperature","Math","round","clock","Modal","KeyboardAvoidingView","behavior","enabled","InboxCard","prevProps","denormalize","denormalized","message_for_teacher","message_read","morning_reminder_read","viewing_previous","toDateString","onGoBack","items_to_bring","messageIsRead","AbsenceCard","class_students","showLoginNumberPad","Dimensions","TimeModal","onChange","isWeekday","special_date","day","getDay","datetime","isIOS","iosSetDate","androidSetDate","selectDatetimeConfirm","datetime_type","minDatetime","maxDatetime","minTime","maxTime","inline","selected","minDate","maxDate","onClickOutside","filterDate","showTimeSelect","showTimeSelectOnly","timeIntervals","timeCaption","dateFormat","TeacherHome","poll","_handleAppStateChange","nextAppState","appState","match","route","params","unsubscribe","NetInfo","addEventListener","pageClicked","alertForPickup","pickupQueue","modalStudentId","modalTeacherId","isAdmin","showDateTimeModal","onConfirmPickup","initializeConnectionStatus","class_name","title","AppState","window","navigator","onLine","setOnline","e","setOffline","refs","navigate","teacher_name","newPickupQueue","hasUnsentRecords","getTime","setDate","wellness_dispatched","message_dispatched","appetite_dispatched","sleep_dispatched","milk_dispatched","diaper_dispatched","removeEventListener","contentContainerStyle","paddingBottom","goBackADay","goForwardADay","ref","button_row","record_button","marginVertical","SchoolHome","handleSignOut","fetchClassIdAndName","fetchTeacherData","fetchStudentData","class_data","getAdminId","teacher_id_array","school_name","loadAuth","Auth","signOut","TeacherClockInOut","logging_in","fetchStaffAttendanceByClassId","clockOut","clockIn","staff_id","marginBottom","MedRequestModal","medicated_time","showTimePicker","thumbnail","student_name","fever_entry","before_meal","gel","other_type","powder","powder_refrigerated","syrup","marginHorizontal","entry","need_refrigerated","marginLeft","TeacherMedicineLog","refreshing","selected_request_id","handleShowRequest","handleFulfillRequest","current_request","refreshControl","RefreshControl","onRefresh","fetchFromDB","tintColor","titleColor","colors","progressBackgroundColor","WellnessLog","show_record","addRecord","propsDate","has_unsent_record","validated","keyboardVerticalOffset","childThumbnail","hasUnsentRecord","subHeading","Header","TeacherAppetiteLog","selectedForCustomize","editingFruitType","students_with_records","display_all_students","handleRateFoodWellness","handleClearAll","handleSetAll","handleAllDrank","appetiteData","customized_text","appetite_log","b_rating","f_rating","l_rating","s_rating","obj","new_students_to_display","mealButtons","mealButtonText","onLongPress","fruitNameEditorOnBlur","addStudentToDisplayList","reverse","meal_rating","cardBody","isRatingCustomized","onClickOther","maxLength","onCustomizeRating","customizedRatingOnBlur","foodButton","TeacherSleepLog","showIOSDatePicker","recordType","confirmDelete","updateReducerTime","setTime","last_record","current_wake_time","checkLastRecord","n","last_record_id","last_second_record","start_time","checkRecord","prev_record_id","next_record_id","prev_record","next_record","createRecord","editRecord","status_code","createSleepRecordRes","editRecordRes","current_sleep_time","confirmToRemoveWakeTime","confirmToRemoveRecord","TeacherMilkLog","handleOnAddRecord","handleRemoveRecord","handleRemove","handleCreate","handleCreateRes","handleEdit","handleEditRes","createDataRes","editDataRes","checkUnsent","handleEditMilkAmout","textRef","isFocused","onEndEditing","PooEntry","selected_other","poo_condition","diaper_records","DiaperLog","show_time_picker","record_id_for_edit","removeDiaperRecord","createRecords","create_records_result","Promise","all","Array","from","createRecordsRes","keyboardShouldPersistTaps","confirmRemove","mode","display","event","minimumDate","AdminHome","pageName","TouchableOpacity","onClick","handleNavigate","navigationOptions","headerTitle","Announcement","selected_all_classes","selected_classes","class_id_list","announcements","page_number","announcement_on_display","is_loading","unread_list","read_list","show_more","announcement","fetchMostRecentAnnouncement","fetchReadStatusByAnnouncementId","separateReadUnread","read_status","confirm","deleteAnnouncementById","showConfirmDeleteDialog","overflow","links","link","WebBrowser","url","photo_url_arr","RegisterNewStudents","studentDataArray","found_class_id","addStudent","borderBottomWidth","borderBottomColor","setName","setBloodType","removeStudent","handleSelectClass","RegisterParents","parentDataArray","username","password","role","mobile","work_phone","transportation","parentSignUpStatus","nativeEvent","toLowerCase","signUp","attributes","values","addParent","parent","Picker","onValueChange","itemValue","itemIndex","setRole","Item","label","removeParent","autoCapitalize","setEmail","setUsername","secureTextEntry","setPassword","handleSignup","disable","Registration","createFamilyProfileStatus","all_parents_signed_up","getParentSignUpStatus","getParentDataArray","getStudentDataArray","error","createFamilyProfile","component","modal_padding","EditStudentProfile","parents","borderStyle","editStudentData","AddParent","qr_data","parent_data","signUpParent","editable","viewQRCode","postParent","QRPage","name_prefix","Students","getPermissionAsync","Permissions","_pickImage","ImagePicker","mediaTypes","All","allowsEditing","aspect","quality","base64","cancelled","getProfilePictureURL","modal_type","image","path","getMilliseconds","deleteStudentById","getModalContent","max","pageY","confirmDeleteStudent","AddTeacher","postTeacher","EditTeacher","getClassIdByTeacherId","Teachers","selected_teacher_id","deleteTeacher","confirmDeleteTeacher","content","Form","labelStyle","inputStyle","input","MessageForParents","to_all_message","activities_list","activities_bool","editingOtherItemToBring","editingOtherItemForStudent","editingOtherActivity","editingOtherActivityForOne","growth_standard_by_student_id","show_growth_standard","dob_year","dob_month","dob_date","messageData","selected_index","new_bool","normalized_data","fetchParentPreviousDayMessage","weight","hc","sendGrowthStandardData","sendGrowthStandardDataRes","messate","weight_percentile","height_percentile","hc_percentile","head_circumference","showDOBModal","show_dob_modal","student_id_dob_edit","handleEndEditing","borderLeftWidth","editDOB","showGrowthStandard","item","trim","otherItemForAllEditorOnBlur","otherActivityEditorOnBlur","multiline","confirmRecord","editItemToBringToOneEditorOnBlur","activityForOneEditorOnBlur","borderTopWidth","borderRightWidth","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","AttendancePage","display_list","students_or_teachers","selected_class_id","teacherClicked","attendanceType","all_id_list","person_id","selectPersonType","selectClass","selectAttendanceType","person","Inbox","messages_read","showDateModal","sortMessages","message_id","morning_reminder_id","bubbleDown","left_pointer","refresh","morning_reminder","read","markRead","DownloadPage","DownloadTeacherAttendance","AnnouncementHome","addListener","fetchAnnouncements","AddAnnouncementPage","images","sendLoading","new_selected_classes","update_page","selectAllClasses","handleChangeLinkText","handleChangeUrl","handleDeleteUrl","handleAddLink","removeImage","postAnnouncement","store","createStore","reducer","Stack","createStackNavigator","SchoolApp","NavigationContainer","Navigator","initialRouteName","screenOptions","gestureEnabled","headerTitleStyle","Screen","initialParams","headerLeft","Signin","user_type","signIn","user","challengeName","completeNewPassword","code","changeAuthState","container","textInput","pass","handleSignIn","responseJson","setUserRole","child_of_id","med_requests","child","days","1","2","3","4","5","inbox","current_conversation_id","conversations_by_id","most_recently_read_message_id","initializeChildren","getMedRequestSuccess","WellnessCard","updateTitleTemp","AppetiteCard","breakfast","fruit","lunch","snack","denormalizeAppetiteData","today","breakfast_rating","fruit_rating","lunch_rating","snack_rating","parseData","data_string","water_drunk","parseInt","MilkCard","milkIntakeData","SleepCard","hours","minutes","RestroomCard","MessageCard","data_available","scrollHeight","propDate","items_list","parent_id","threshold","setHours","before4am","prev_day","scrollEnabled","setScrollHeight","target","onLayout","sendMessage","showMessageForTeacher","ParentHomeTitle","layout","selectOtherChildProfile","opacity","ProfileSelector","showSelector","SlideInRight","Animated","Value","timing","toValue","useNativeDriver","start","onSelectStudent","windowWidth","student_of_id","transform","translateX","interpolate","inputRange","outputRange","hideQRCode","MedicationRequestCard","get_todays_requests","object_array","viewMedRequest","afterFive","MorningReminderCard","reminder_read","milk_timestamp","diaper_timestamp","diaper_type","showDateTimeModalType","includeMilkIntake","includeDiaper","onSendMessageDelay","debounce","reminder","showTimeModal","onFocus","AnnouncementCard","fetchAnnouncement","viewMore","viewAnnouncement","useState","setIsLoading","inTime","setInTime","outTime","setOutTime","excuseType","setExcuseType","absenceTime","setAbsenceTime","useEffect","fetchAttendanceByStudentId","absence_time","MainMenu","onItemClick","ParentHome","checkStudentAttendance","showQR","showMainMenu","update_type","end","selected_student","day_difference","getDayDifference","onMenuItemClick","onHide","slideIn","MedicinePowderForm","藥粉","onCancelSelect","onFinishEdit","MedicineSyrupForm","藥水","MedicineCreamForm","藥膏","area","optionButtonWidth","optionButtonHeight","show_date_picker","show_editor","need_refrigeration","access_mode","iosSetTime","androidSetTime","medicine_type","medicine_data","sendRequest","onCreateRequestSuccess","deleteRequest","onDeleteRequestSuccess","getHeader","powder_amount","syrup_amount","cream_area","placeholderTextColor","deleteRequestConfirm","handleClickConfirmButton","MedicationRequestPage","tomorrow","SlideInLeft","total_height","total_width","left","top","day_of_week","selected_request_index","fetchMedicationRequest","initializePage","selectRequest","sequence","fetchAccessMode","new_request_index","deleted_request_id","updated_requests","SectionList","sections","keyExtractor","renderItem","section","renderSectionHeader","AbsenceExcuse","editing_other_option","max_date","cached_date","show_start_date_picker","show_end_date_picker","childIsSick","months","setStartDate","setEndDate","setChildNotSick","setChildSick","sendAbsenceNote","iosSetStartDate","androidSetStartDate","checkUniqueStudentDate","iosSetEndDate","androidSetEndDate","abs","editAbsenceNote","option","editorOnBlur","textAlignVertical","dateContainer","AbsenceExcusePage","todays_date","fetchAbsenceExcuse","duplicateDateFound","selected_request","showsHorizontalScrollIndicator","PickupRequest","provided_times","hightlighted_colors","choose_other_option","setMinutes","minute","AddMedicationRequestPage","time_array","time_selected_index","medicated_timestamp","date_array","date_selected_index","switchRequest","handleDateSelected","handleTimeSelected","updated_date_array","updated_time_array","normalizedData","timeIsEmpty","removeDate","removeTime","onSelectSyrup","editSyrupAmountEntry","editSyrupRefrigerationEntry","editSyrupNoteEntry","removeSyrupEntry","blurOnSubmit","onSelectFeverSyrup","editFeverSyrupAmountEntry","editFeverSyrupRefrigerationEntry","removeFeverSyrupEntry","onClickConfirm","cancelEdit","AnnouncementPage","announcement_id","selected_announcement","AnnouncementListPage","setAnnouncements","page","setPage","endReached","setEndReached","fetchAnnouncementByPage","all_months","month","setMonth","screenHeight","modalAnimation","studentId","setStudentId","actionSheetType","setActionSheetType","downloadUrl","setDownloadUrl","setShowModal","showActionSheet","dataType","hideActionSheet","findAllPreviousMonths","month_to_fetch","getUrl","absoluteFill","translateY","extrapolate","minHeight","month_item","ParentApp","ParentDownloadPage","ConfirmSignUp","confirmCode","confirmSignUp","getCurrentUser","caretHidden","fill","charAt","rounded","YellowBox","ignoreWarnings","AuthLoading","Font","currentAuthenticatedUser","awsCognitoAuth","identityPooId","region","userPoolId","userPoolWebClientId","Amplify","configure","cognito_auth","App","_cacheSplashResourcesAsync","gif","Asset","fromModule","downloadAsync","_cacheResourcesAsync","SplashScreen","hide","cacheImages","isAppReady","isSplashReady","preventAutoHide","defaultProps","allowFontScaling"],"mappings":"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","file":"static/js/app.1e09d919.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/app-splash.0a3ec935.gif\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsSAAALEgHS3X78AAACi0lEQVR42u3dsWsTYRjH8d97aRKJ6eDkIlXBScFFN3GzLnYNiBQjaSp0UJdi1+Cklg6KUi2xia0VJGPbRVcdHVx0ERRxcXIoSnqX3ONQERRbWk3Svtfv9w9ILve5e98ny51EREREREREtJtyvfqi1dHiMddWWaZBOR2StHeHnYtvMn1UoOcWB9VsrfY2EQBWKGSifG5KTmOSUp5cmG1J99N92XE3MxN5C2CFQibqzy1LOuPl+mB6kU5nz3UTIejm8Uf53JS3J3/t8hyMonDSyzvg55r/xqNlZ71aFsTHs9X5d17dAa7lRhNw8iWpz8Wpsn9LkLPB5AyLdtbHPWAgQeP6QR8B8gkC6PdyCiIAACAAACAAACAAACAAACAAACAAACAAACAAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACAAACgt5lJS052WoFOSjavtUfOe1efZ8cbSvbMLHXzjxcsXGyODN8ILHVF0mVJe3z5QV17enpYKloHP25FUq0VtCZz1YXPG94a5fL+MG6NOdlVSfs6dQCZ2cduNwJ8MbkHmWx4x00//bqlNapU6o9cq+TMjZt0AICt9V7O7qXbwUNXrzf/a7NYe4vHeUkTko7uNICdtge8lnQ3vfJ9wTUaHdlUXaMRSpozaX515NJQYDYh6RSb8O8TzXIgu5WenXvZxc3O9Ki+KGkxLBdPKLZrkrugbX7JxHYuQetNND2rOTJ8ZLOTU5L2gE1PND27BTcxOSUB4J8nmp5BbDA5+QzQsYmmZxB/mZx8nIJexdLt7MDhJVepxD793f41OVUqT1Y/fRgKpOsiIiIiIiIiog70A/W73/uabAUFAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4UlEQVRo3u2YvUvDQBiHf++dGYuLoKJDB4sfuCnEDmprrX+0iikiqOAoOOioUKxLzeAHvTsXBZHY3CXvRcX7jcnl8jzJm+TNASEhISEhIZZJO/HKsBs3fM0/bDUX0k684nKMsB34uLe2RDCHUpvjdHdjmR2+GzekVD2CSdK99VXb48gWXih5BGD2fVPfkNipHZ5dscFrkwCYe990b6Tu1PYvLksLZMCDUyIDHi4SuSUUvUbPAF4yds2Q0UdlymkMPABo6AnFUkJPrY26kjoBUM/YXehO5MBbz0m2J+SU4IJ3EuCS4IR3FigrwQ1fSKCohA/4wgKuEr7gSwnYSmgyI1/wpQVyJQgDGGgA0z7gWQQs7gR8wbMJOEqw9lFsAh8SI6lPKLveYYAHkNjigndqp23yGplIGMhKrha3wMer0hBmxgybKtsAerkoOe95r8+B8ApvMADQ99GKswjkfmGF2FZKbgK49SVB3uA/txKt5oKUKgEw/ytaiSK9jS8JqgLepwRVBf9FosfV3Ikq4QFgsnd6owS1AdxxPNhUJfyP/NT7/BnhmDu3hGikxDfjSn9NJw/Or8eUk4AYSZ6lxfb6ohAi+ZNLixkSxAmfIRHZwjvH+/J6N264Lq+HhISEhPzvvAH4usfGrPqHIQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/icon-teacher-thumbnail.0693cca6.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABqUlEQVRo3u2Zu1LDMBBF7zJ0JC215Zq/YgYGjKHkzSQhEEogWG7gq+jjPq1My1IkgUxwg61dO4PvB3jO0eqxkoE2bdq0+XOYySRubKyLqn6KaoFP8zGACAADiLPDblL2cxvq8DZ/nsMvBrBSJTbVR56wCksE7DS7AjP4p6WRX87rZNqJmiswmzaPAOIi+Gza2UePPhsrEKYfIxCOJeDFd6HQ5g8MPpWCF61AkOQjaXixXSiw+T2Bz6ThRabQHP5cA967gLHuDsCFFrzXNWBSN9SG91YBk7ohGJfa8F4EjHW3AK7qgK88hUziBnXCV6qASdwAhOs64UtXILSu3wT4UgJh4noM3DQB3nMrQfq3u7JrILSuX1wFesumW3uaVRBYxLoSlcreBAnBg0xHQriVkJfwtnPUJaHUTstJKF5oZCREDh9NCbHTM0jyEVHRvdivRE3PKv4kxPsXaQn5BmzxtFj4OlddQqeD/HncjX1L6LxOE3F20DkBUPAjg3fD7XwNfnDMJGIwXlYNwHhv9hT6PZ2+fzER42gSdS3WKswUWGeD1O2jTZs2/ztfAkobJARJpfUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABwklEQVRo3u1ZQVLCQBDs4Rxz9UryBat8EQIJRakIeOUqImBhElT8kW9gveIR9sx4pYRAyiRbEyt93UrSne6ZnWyAEiVKFBqU9gZOuK6B6FKtrCYGtC2UACdc1wB6BVABsFDfVsO0iEpG5AGg5pzrOZipEAIIdLF3PePKifTMpIi/P4iZnEjPALQOrL4pz2qCiGUXsQARlXTyiZVntQEEB1br7lxP8o5TJb2H8SKYce1Geix6H0gSJwKmS//sVqYDSZwAbqrReizbgQROMPHky7M7sgWc7E48Vr59Jy9CibsTdZxgPZLtQBInmJ9Uy+7KFnA6TiPl2z15EUoep64T6qFsBxI5QY/Kt/oyHUjkBPfcSD/IFnBy7OC+G2wGsgXsfEwUo40eqoO5fgHD3zeHhkvPupddxDHk0xQxFZm8mRo4Sp5HacibGSXiyIsfJQyQz3ecjo9NpuM0mSQv/4PGMPlsu9CxTQqY5kE+OwdOkM/rRCIbB46OB3heelYHOYLy6zZmjhapyORTRciNdBhDPjBFPpUAZv4EsP3l57vyrLYp8qkEqJb9Aeb6joiFWpl785mhGm0a1XATmv61VKJEiX+CH053J36ap3UTAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVR42u1bbW7CMAx9TIhb7CKM/R87yI4y2BF2HWgvsgLHoPuTSihLGtv5aNP5SREsJHbixvZzYIBCoVAoFC5sAHwBuAHoK21XAEezFzaOFW/cbgeJAa5m8rbiU7x7OAlsDNarHaP7ePrvgU4NIJjzDqAjBJ4OwP5hXusY03g+bxLoy+Y7lMUM7cchz24Dzg99pwT6omOZbyJVoD0u9HdsMBatV2NAAhk+3+WejJ4oh6sveQwIbcA37sxkb7H6SC6wChjANcbu7z0y+4AOrnypvtF1pHCBxnrKuVFMX+os0FqL57pYlvWuCwbcreNJzrrWyEWExqK6K7jNjgjtjSLKYt4sfz2N6Ok9TFCqL5sBiparWg7PkAlKmVjI12PliJihxAB3z3tuFoAwn4/pfJnSN0P1PlVeK3yyxahwaDyE1JgqJ5a6Zw+CK4bRSsiZTRBcTBYIBUFuOcstb32xYnKCwq33OY3KIPsE+8jG0HLfAeqd4NRBkJq/Y+4AJbGiWBC8B8Y2Qga3Zcahaqo0btbQanAuMSD2uzpq/uZ+f9CmJmapr8So+ZvLEaLSYPLqSjBfGgOSGGC9IHdOfstMtWjLrP+lLpCbWUYfYeqRPAe4fujz6g2Q+oRSmWc2A/h+2TGFAWadBVx5OqavujTompeyr1g5fGHc7HQT1BIsSHjAB4BvAM+BcZ0ZO5anY/t2S6gGJz0hWg2qAfy4mdddxft7Na+in8sfsJx/mPiUGGBjjHCteOMXs/kNFAqFQqH4g1+9qDy6b2x6HAAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/app_logo.fee19d58.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-checked.83ee9de4.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-plus.e319f13c.png\";","const initial_state = {\n    class_id: '',\n    passcodeTeacherId: {},\n    teachers: {\n        /*\n        {teacher_id}: {\n            name: \"teacher_name\",\n            passcode: 33,\n            logged_in: false,\n            attendance_id: '',\n            in_time: '',\n            out_time: ''\n        }, {...}\n        */\n    },\n    students: {\n        /*\n        {student_id}: {\n            name: \"\",\n            profile_picture: \"\",\n            conversation_id; \"\",\n            blood_type: \"\",\n            address: \"\",\n            home_phone: \"\",\n            father_phone: \"\",\n            mother_phone: \"\"\n        }, {...}\n        */\n    },\n    isConnected: false,\n    errMessage: ''\n}\n\nexport default function classInfo(state = initial_state, action) {\n    const newState = { ...state }\n    switch (action.type) {\n        case 'SET_CONNECT_STATE': {\n            const { isConnected } = action\n            return {\n                ...state,\n                isConnected\n            }\n        }\n        case 'INITIALIZE_CLASS':\n            var teachers = {}, students = {}\n            action.teacher_objs.forEach(teacher => {\n                teachers[teacher[0]] = {\n                    name: teacher[1],\n                    passcode: teacher[2],\n                    logged_in: false,\n                    in_time: '',\n                    out_time: ''\n                }\n                state.passcodeTeacherId[teacher[2]] = teacher[0]\n            })\n            action.students.forEach(student => {\n                const { \n                    id,\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone, \n                    mother_phone, \n                    conversation_id } = student\n                students[id] = {\n                    name,\n                    profile_picture,\n                    blood_type,\n                    address,\n                    home_phone,\n                    father_phone,\n                    mother_phone,\n                    conversation_id\n                }\n            })\n            \n            return {\n                ...state,\n                passcodeTeacherId: state.passcodeTeacherId,\n                teachers: teachers,\n                students: students\n            }\n        \n        case 'SET_CLASS_ID':\n            return {\n                ...state,\n                class_id: action.class_id\n            }\n    \n        case 'FETCH_ATTENDANCE_SUCCESS': {\n            const { data } = action\n            data.forEach(attendance_obj => {\n                const { attendance_id, teacher_id, in_time } = attendance_obj\n                newState.teachers[teacher_id] = {\n                    ...state.teachers[teacher_id],\n                    logged_in: true,\n                    attendance_id,\n                    in_time\n                }\n            })\n\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_IN':{\n            const { teacher_id, time, attendance_id } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: true,\n                in_time: time,\n                attendance_id\n            }\n            return newState\n        }\n        \n        case 'MARK_TEACHER_LOGGED_OUT':{\n            const { teacher_id, time } = action\n            newState.teachers[teacher_id] = {\n                ...state.teachers[teacher_id],\n                logged_in: false,\n                out_time: time,\n                attendance_id: ''\n            }\n            return newState\n        }\n\n        case 'MARK_STAFF_ATTENDANCE_FAIL':\n            const {errMessage} = action\n            return {\n                errMessage\n            }\n        \n        case 'CLEAR_STATE':\n            return {\n                class_id: '',\n                passcodeTeacherId: {},\n                teachers: {},\n                students: {},\n                isConnected: false,\n                errMessage: ''\n            }\n        \n        default:\n            return state\n    }\n\n}","var initial_state = {\n    initialized: false,\n    present: new Set(),// student_A_id\n    absent: new Set(), // student_B_id\n    unmarked: new Set(),\n    attendance: {\n        /*\n        {student_A_id}: {\n            present: true,\n            in_time: [Date],\n            out_time: [Date]\n        },\n        {student_B_id}: {\n            present: false,\n            excuse_type: \"fever\"\n        }\n        */\n    }\n}\n\nexport default function attendance(state = initial_state, action) {\n    switch (action.type) {\n        // case 'INITIALIZE_CLASS':\n        //     var attendance = {}\n        //     var unmarked = new Set()\n        //     action.students.forEach(student => {\n        //         const { id } = student\n        //         unmarked.add(id)\n        //         attendance[id] = {\n        //             present: false\n        //         }\n        //     })\n        //     return {\n        //         ...state,\n        //         initialized: true,\n        //         unmarked: unmarked,\n        //         attendance: attendance\n        //     }\n\n        // case 'MARK_PRESENT':\n        //     // student_id, in_time\n        //     state.unmarked.delete(action.student_id)\n        //     return {\n        //         ...state,\n        //         present: new Set([...state.present, action.student_id]),\n        //         unmarked: state.unmarked,\n        //         attendance: {\n        //             ...state.attendance,\n        //             [action.student_id]: {\n        //                 present: true,\n        //                 in_time: action.in_time\n        //             }\n        //         }\n        //     }\n        \n        case 'MAKR_DISMISS':\n            return {\n                ...state,\n                attendance: {\n                    ...state.attendance,\n                    [action.student_id]: {\n                        ...state.attendance[action.student_id],\n                        present: false,\n                        out_time: action.out_time\n                    }\n                }\n            }\n        \n        case 'MARK_ABSENT':\n            // student_id, excuse_type\n            state.unmarked.delete(action.student_id)\n            return {\n                ...state,\n                absent: new Set([...state.absent, action.student_id]),\n                unmarked: state.unmarked,\n                attendance: {\n                    ...state.attendance,\n                    [action.student_id]: {\n                        ...state.attendance[action.student_id],\n                        excuse_type: action.excuse_type\n                    }\n                }\n            }\n    \n        case 'CLEAR_STATE':\n            return {\n                initialized: false,\n                present: new Set(),\n                absent: new Set(),\n                unmarked: new Set(),\n                attendance: {}\n            }\n        default:\n            return state\n    }\n}","var initialState = {\n    loaded: false,\n    fruit_name: '水果',\n    ratings: {\n        /*\n        {student_id}: { \n            Breakfast: 'Awesome0'\n            Fruit: 'Good0'\n            Lunch: 'Ok1',\n            Snack: 'Poor1',\n            teacher_id: ''\n        }, {...}\n        */\n    },\n    updatedStudents: new Set(),\n    err_message: '',\n    data_dispatched: true\n}\n\nexport default function appetite(state = initialState, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS': {\n            var ratings = {}\n            action.students.forEach(student => {\n                const { id } = student\n                ratings[id] = {\n                    Breakfast: '0',\n                    Fruit: '0',\n                    Lunch: '0',\n                    Snack: '0',\n                    teacher_id: ''\n                }\n            })\n\n            return {\n                ...state,\n                ratings\n            }\n        }\n        case 'FETCH_CLASS_APPETITE_DATA': {\n            const { fruit_name, ratings } = action\n            return {\n                ...state,\n                fruit_name,\n                ratings: {\n                    ...state.ratings,\n                    ...ratings\n                }\n            }\n        }\n\n        case 'EDIT_FRUIT_NAME': {\n            const { fruit_name } = action\n            return {\n                ...state,\n                fruit_name\n            }\n        }\n\n        case 'RATE_APPETITE':{\n            const { student_id, mealType, rating, teacher_id } = action\n            var { updatedStudents } = state\n            const water_drank = state.ratings[student_id][mealType].slice(-1)\n            if (rating !== '') {\n                updatedStudents = new Set([...state.updatedStudents, student_id])\n            }\n            return {\n                ...state,\n                ratings: {\n                    ...state.ratings,\n                    [student_id]: {\n                        ...state.ratings[student_id],\n                        [mealType]: rating + water_drank,\n                        teacher_id\n                    }\n                },\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n        \n        case 'CLEAR_RATINGS': {\n            const { meal_type } = action\n            const newState = { ...state }\n            const student_id_array = Object.keys(state.ratings)\n            const updatedStudents = new Set()\n            for (var i = 0; i < student_id_array.length; i++) {\n                const student_id = student_id_array[i]\n                if (state.ratings[student_id][meal_type] !== '0') {\n                    updatedStudents.add(student_id)\n                }\n                newState.ratings[student_id] = {\n                    ...state.ratings[student_id],\n                    [meal_type]: '0'\n                }\n            }\n            newState.updatedStudents = updatedStudents\n            newState.data_dispatched = false\n\n            return newState\n        }\n        case 'SET_ALL_RATINGS_TO_GREAT':{\n            const { students_to_display, mealType, teacher_id } = action\n            let updatedStudents = new Set([...state.updatedStudents])\n            var newRatingObj = {...state.ratings}\n            students_to_display.map((student_id) => {\n                updatedStudents.add(student_id)\n                const water_drank = state.ratings[student_id][mealType].slice(-1) === '1'\n                newRatingObj[student_id] = {\n                    ...state.ratings[student_id],\n                    [mealType]: water_drank ? '胃口佳1' : '胃口佳0',\n                    teacher_id\n                }\n            })\n            return {\n                ...state,\n                ratings: newRatingObj,\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n        \n        case 'MARK_WATER_DRANK': {\n            const { student_id, meal_type, teacher_id } = action\n            const updatedStudents = new Set([...state.updatedStudents, student_id])\n            const rating = state.ratings[student_id][meal_type]\n            const water_drank = rating.slice(-1) === '1'\n            return {\n                ...state,\n                ratings: {\n                    ...state.ratings,\n                    [student_id]: {\n                        ...state.ratings[student_id],\n                        [meal_type]: water_drank ? rating.slice(0, -1) + '0' : rating.slice(0, -1) + '1',\n                        teacher_id\n                    }\n                },\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n\n        case 'SET_ALL_DRINK_WATER': {\n            const { mealType, students_to_display, teacher_id } = action\n            const updatedStudents = new Set([...students_to_display])\n            var newRatingObj = {...state.ratings}\n            students_to_display.forEach(student_id => {\n                let rating = state.ratings[student_id][mealType].slice(0, -1)\n                rating = rating + '1'\n                newRatingObj[student_id] = {\n                    ...state.ratings[student_id],\n                    [mealType]: rating,\n                    teacher_id\n                }\n            })\n            return {\n                ...state,\n                ratings: newRatingObj,\n                updatedStudents,\n                data_dispatched: false\n            }\n        }\n\n        case 'CLEAR_UPDATED_STUDENTS':{ //NOT USED\n            return {\n                ...state,\n                updatedStudents: new Set()\n            }\n        }\n        case 'ON_SEND_APPETITE_SUCCESS':{\n            return {\n                ...state,\n                updatedStudents: new Set(),\n                data_dispatched: true\n            }\n        }    \n        case 'ALERT_ERR_MESSAGE': {\n            const { err_message } = action\n            return {\n                ...state,\n                err_message\n            }\n        }\n            \n        case 'CLEAR_ERR_MESSAGE': {\n            return {\n                ...state,\n                err_message: ''\n            }\n        }\n            \n        case 'ADD_STUDENT_ID_FOR_UPDATE': {\n            const { student_id_array } = action\n            return {\n                ...state,\n                updatedStudents: new Set([...state.updatedStudents, ...student_id_array]),\n                data_dispatched: false\n            }\n        }\n        \n        case 'CLEAR_STATE': {\n            return {\n                loaded: false,\n                fruit_name: '水果',\n                ratings: {},\n                updatedStudents: new Set(),\n                err_message: '',\n                data_dispatched: true\n            }\n        }\n        default:\n            return state\n    }\n}","var initial_state = {\n    by_student_id: {\n        /*\n        {student_id}: [{record_id}, {...}]\n        */\n    },\n    records: {\n        by_id: {\n            // { record_id }: {\n            //     student_id: '',\n            //     sleep_time: '',\n            //     wake_time: '',\n            //     teacher_id: ''\n            // }\n        },\n        all_id: new Set()\n    },\n    errorMessage: '',\n    newDataForCreate: new Set(),\n    oldDataForEdit: new Set(),\n    records_with_error: new Set(),\n    data_dispatched: true\n}\n\nexport default function sleep(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS':\n            let by_student_id = {}\n            action.students.forEach(student => {\n                const { id } = student\n                by_student_id[id] = []\n            })\n            return {\n                ...state,\n                by_student_id\n            }\n\n        case 'FETCH_CLASS_SLEEP_DATA': { // TODO\n            const { by_student_id, records } = action.sleepData\n            return {\n                ...state,\n                by_student_id: {\n                    // ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    by_id: {\n                        // ...state.records.by_id,\n                        ...records.by_id\n                    },\n                    all_id: new Set([\n                        // ...state.records.all_id,\n                        ...records.all_id\n                    ])\n                }\n            }\n        }\n\n        case 'SET_SLEEP_TIME': {\n            const newState = { ...state }\n            const { student_id, index, sleep_time, teacher_id } = action\n            const record_id_array = newState.by_student_id[student_id]\n            const record_id = record_id_array[index]\n            const records = newState.records.by_id\n            sleep_time.setSeconds(0, 0)\n            if (index !== null) { // if index is specified, we change data\n                if (index > 0 && sleep_time <= records[record_id_array[index - 1]].sleep_time) {\n                    const record_id_array = newState.by_student_id[student_id]\n                    const removed = record_id_array.splice(index, 1)\n                    let found = 0\n                    for(var i = 0; i < record_id_array.length-1; i++) {\n                        if (records[record_id_array[i]].sleep_time > sleep_time) {\n                            found = i // index of record\n                            break\n                        }\n                    }\n                    record_id_array.splice(found, 0, removed[0])\n                    newState.by_student_id[student_id] = record_id_array\n                }\n\n                newState.records.by_id[record_id].sleep_time = sleep_time\n                newState.records.by_id[record_id].teacher_id = teacher_id\n                \n                if (!newState.newDataForCreate.has(record_id)) {\n                    newState.oldDataForEdit.add(record_id)\n                }\n            } else { // if index not specified, we push new data\n                // const record_length = record_id_array.length\n                const new_record_id = newState.records.all_id.size\n\n                // if (record_length > 0 && sleep_time <= records[record_id_array[record_length - 1]].wake_time) {\n                //     //if sleep_time <= wake time of last record\n                //     // WARNING!!!!\n                //     newState.records_with_error = new Set([...state.records_with_error, new_record_id, record_length - 1])\n                // } \n                    newState.by_student_id[student_id].push(new_record_id)\n                    newState.records.by_id[new_record_id] = {\n                        student_id,\n                        sleep_time,\n                        wake_time: null,\n                        teacher_id\n                    }\n                    newState.records.all_id.add(new_record_id)\n                    newState.errorMessage = ''\n                    newState.newDataForCreate.add(new_record_id)\n                // }\n\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        case 'SET_WAKE_TIME': {\n            const newState = { ...state }\n            const { student_id, index, wake_time, teacher_id } = action\n            const record_id = newState.by_student_id[student_id][index]\n            // const next_record_id = index + 1 < newState.by_student_id[student_id].length ?\n            //     newState.by_student_id[student_id][index + 1]\n            //     : -1\n            // const records = newState.records.by_id\n            wake_time.setSeconds(0,0)\n\n            newState.records.by_id[record_id].wake_time = wake_time\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            newState.errorMessage = ''\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n            \n        case 'REMOVE_WAKE_TIME': {\n            const { record_id, teacher_id } = action\n            const newState = { ...state }\n            const records_with_error = new Set([...state.records_with_error])\n            records_with_error.delete(record_id)\n            newState.records_with_error = records_with_error\n            newState.records.by_id[record_id].wake_time = null\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n        \n        case 'CREATE_SLEEP_RECORD_SUCCESS': {\n            return {\n                ...state,\n                newDataForCreate: new Set(),\n                data_dispatched: true\n            }\n        }\n\n        case 'CREATE_SLEEP_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errMessage\n            }\n        }\n\n        case 'EDIT_SLEEP_RECORD_SUCCESS': {\n            return {\n                ...state,\n                oldDataForEdit: new Set(),\n                data_dispatched: true\n            }\n        }\n\n        case 'EDIT_SLEEP_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errMessage\n            }\n        }\n\n        case 'REMOVE_RECORD_SUCCESS': {\n            const { record_id, student_id } = action\n            const student_record_ids = state.by_student_id[student_id]\n            const removing_index = student_record_ids.findIndex(element => element === record_id)\n\n            const newDataForCreate = new Set([...state.newDataForCreate])\n            newDataForCreate.delete(record_id)\n\n            const oldDataForEdit = new Set([...state.oldDataForEdit])\n            oldDataForEdit.delete(record_id)\n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    [student_id]: [\n                        ...student_record_ids.slice(0, removing_index),\n                        ...student_record_ids.slice(removing_index+1)\n                    ]\n                },\n                newDataForCreate,\n                oldDataForEdit,\n                data_dispatched: (newDataForCreate.size + oldDataForEdit.size) === 0\n            }\n        }\n\n        case 'REMOVE_RECORD_FAIL': {\n            return {\n                ...state,\n                errorMessage: action.errorMessage\n            }\n        }\n\n        case 'MARK_RECORD_ERROR': {\n            const { record_id_array } = action\n            return {\n                ...state,\n                records_with_error: new Set([...state.records_with_error, ...record_id_array])\n\n            }\n        }\n\n        case 'MARK_RECORD_CORRECT': {\n            const { record_id } = action\n            let records_with_error = new Set([...state.records_with_error])\n            records_with_error.delete(record_id)\n            return {\n                ...state,\n                records_with_error\n            }\n        }\n            \n        case 'ALERT_SLEEPLOG_ERROR_MESSAGE': {\n            const {err_message} = action\n            return {\n                ...state,\n                errorMessage: err_message\n            }\n        }\n            \n        case 'CLEAR_SLEEPLOG_ERROR_MESSAGE': {\n            return {\n                ...state,\n                errorMessage: ''\n            }\n        }\n\n        case 'CLEAR_STATE':\n            return {\n                by_student_id: {},\n                records: {\n                    by_id: {},\n                    all_id: new Set()\n                },\n                errorMessage: '',\n                newDataForCreate: new Set(),\n                oldDataForEdit: new Set(),\n                records_with_error: new Set(),\n                data_dispatched: true\n            }\n        \n        default:\n            return state \n    }\n}","var initial_state = {\n    // loaded: false,\n    by_student_id: {\n        /*\n        {student_id}: [{record_id}, {record_id}...]\n        */\n    },\n    records: {\n        // { record_id }: {\n        //     student_id\n        //     temperature: {INT_TYPE},\n        //     status: '',\n        //     time: '',\n        //     teacher_id: ''\n        // }, {...}\n    },\n    record_id_for_update: new Set(),\n    // record_id_for_edit: new Set()\n    errMessage: '',\n    records_with_error: new Set(),\n    data_dispatched: true\n}\n\nexport default function healthstatus(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_STUDENT_WELLNESS': {\n            var by_student_id = {}\n            var records = {}\n            var len = 0\n            action.students.forEach(student_id => {\n                // const { id } = student\n                by_student_id[student_id] = [len, len+1]\n\n                records[len] = {\n                    temperature: '',\n                    status: '健康寶寶',\n                    time: null,\n                    teacher_id: ''\n                }\n\n                records[len+1] = {\n                    temperature: '',\n                    status: '健康寶寶',\n                    time: null,\n                    teacher_id: ''\n                }\n\n                len+=2\n            })\n\n            return {\n                ...state,\n                by_student_id,\n                records\n            }\n        }\n\n        case 'FETCH_CLASS_WELLNESS_DATA': {\n            const { by_student_id, records } = action.wellnessData\n            const student_id_list = Object.keys(by_student_id)\n            for (var i = 0; i < student_id_list.length; i++){\n                const student_id = student_id_list[i]\n                let record_id_list = by_student_id[student_id]\n                if (record_id_list.length === 1) {\n                    record_id_list.push(state.by_student_id[student_id][1])\n                    by_student_id[student_id] = record_id_list\n                }\n            }\n            return {\n                ...state,\n                by_student_id: {\n                    ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    ...state.records,\n                    ...records\n                }\n            }\n        }\n\n        case 'ADD_RECORD': {\n            const {by_student_id, records} = state\n            const { student_id } = action\n            const new_id = Object.keys(state.records).length\n            return {\n                ...state,\n                by_student_id: {\n                    ...by_student_id,\n                    [student_id]: [...by_student_id[student_id], new_id]\n                },\n                records: {\n                    ...records,\n                    [new_id]: {\n                        temperature: '',\n                        status: '健康寶寶',\n                        time: null,\n                        teacher_id: ''\n                    }\n                }\n            }\n        }\n\n        case 'ADD_HEALTH_STATUS': {\n            const { student_id, record_id, status, teacher_id } = action\n            const record_id_for_update = new Set([...state.record_id_for_update, record_id])\n            const records = {\n                ...state.records,\n                [record_id]: {\n                    ...state.records[record_id],\n                    student_id,\n                    status,\n                    time: new Date(),\n                    teacher_id\n                }\n            }\n            return {\n                ...state,\n                records,\n                record_id_for_update,\n                data_dispatched: false\n            }\n        }\n        case 'ADD_TEMPERATURE': {\n            const { student_id, record_id, temperature, teacher_id } = action\n            const record_id_for_update = new Set([...state.record_id_for_update, record_id])\n            const records = {\n                ...state.records,\n                [record_id]: {\n                    ...state.records[record_id],\n                    student_id,\n                    temperature,\n                    time: new Date(),\n                    teacher_id\n                }\n            }\n            return {\n                ...state,\n                records,\n                record_id_for_update,\n                data_dispatched: false\n            }\n        }\n            \n        case 'INVALIDATE_WELLNESS_DATA': {\n            const { record_id, errMessage } = action\n            return {\n                ...state,\n                //TODO how do we efficiently match each errmessage to the wellness_form that contains the error\n                records_with_error: new Set([...state.records_with_error, record_id])\n            }\n        }\n            \n        case 'SEND_WELLNESS_DATA_SUCCESS': {\n            return {\n                ...state,\n                record_id_for_update: new Set(),\n                data_dispatched: true\n            }\n        }\n            \n        case 'SEND_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n\n        // case 'CLEAR_STATE': {\n        //     return {\n        //         by_student_id: {},\n        //         records: {},\n        //         record_id_for_update: new Set(),\n        //         errMessage: '',\n        //         records_with_error: new Set()\n        //     }\n        // }\n        \n        default:\n            return state\n    }\n}","var initial_state = {\n    /* TODO: flatten the structure like sleep record for better separation of post and put (?)\n            -why separate post and put instead of upsert in lambda?\n            -possible conflict: if using student_id/date/time as uniqueness delimeter,\n                                edited records with a new time set gets INSERTed into database\n            -solution: fetched data doesn't get added into newDataForCreate set\n            -problem#2: how do we treat initial rendering of page; will each student gets a placeholding, empty record\n    */\n    loaded: false,\n    by_student_id: {\n        // {student_id}: [{record_id}, {...}]\n    },\n    records: {\n        by_id: {\n            /*{ record_id }: {\n                student_id,\n                time,\n                amount,\n                milk_type,\n                teacher_id\n            }*/\n        },\n        all_id: new Set()\n    },\n    // pendingUpdates: new Set(),\n    newDataForCreate: new Set(),\n    oldDataForEdit: new Set(),\n    dataForRemoval: new Set(),\n    errMessage: '',\n    data_dispatched: true\n}\n\nexport default function milk(state = initial_state, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS': {\n            var by_student_id = {}\n            action.students.forEach(student => {\n                const { id } = student\n                by_student_id[id] = []\n            })\n            // initial_state = {\n            //     ...state,\n            //     by_student_id\n            // }\n            return {\n                ...state,\n                by_student_id\n            }\n        }\n        \n        case 'FETCH_CLASS_MILK_DATA': {\n            const { by_student_id, records } = action.milkData\n            \n            return {\n                ...state,\n                by_student_id: {\n                    // ...state.by_student_id,\n                    ...by_student_id\n                },\n                records: {\n                    by_id: {\n                        // ...state.records.by_id,\n                        ...records.by_id\n                    },\n                    all_id: new Set([\n                        // ...state.records.all_id,\n                        ...records.all_id\n                    ])\n                }\n            }\n        }\n\n        case 'FETCH_CLASS_MILK_DATA_SUCCESS': {\n\n        } \n\n        case 'ADD_MILK_RECORD': {\n            const newState = { ...state }\n            const { student_id } = action\n            const record_id = state.newDataForCreate.size\n            newState.records.by_id[record_id] = {\n                student_id,\n                time: new Date,\n                amount: '',\n                milk_type: '配方奶',\n                teacher_id: ''\n            }\n            newState.by_student_id[student_id].push(record_id)\n            newState.newDataForCreate.add(record_id)\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        case 'EDIT_MILK_AMOUNT': {\n            const newState = { ...state }\n            const { record_id, milk_amount, teacher_id } = action\n            newState.records.by_id[record_id].amount = milk_amount\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        case 'EDIT_MILK_TYPE': {\n            const newState = {...state}\n            const { record_id, teacher_id } = action\n            const { milk_type } = state.records.by_id[record_id]\n            newState.records.by_id[record_id].milk_type = milk_type === '配方奶' ? '母奶' : '配方奶'\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n\n        // case 'EDIT_ASSIST_TYPE': { TODO: IS THIS IMPORTANT?\n        //     const newState = {...state}\n        //     const { record_id, teacher_id } = action\n        //     const { teacher_id } = state.records.by_id[record_id]\n        //     newState.records.by_id[record_id].teacher_id = \n        // }\n\n        case 'EDIT_MILK_TIME': {\n            const newState = { ...state }\n            const { record_id, date_time, teacher_id } = action\n            newState.records.by_id[record_id].time = date_time\n            newState.records.by_id[record_id].teacher_id = teacher_id\n            if (!newState.newDataForCreate.has(record_id)) {\n                newState.oldDataForEdit.add(record_id)\n            }\n\n            newState.data_dispatched = false\n            return newState\n        }\n            \n        case 'CREATE_DATA_SUCCESS': {\n            return {\n                ...state,\n                newDataForCreate: new Set(),\n                data_dispatched: state.oldDataForEdit.size === 0\n            }\n        }\n            \n        case 'CREATE_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n            \n        case 'EDIT_DATA_SUCCESS': {\n            return {\n                ...state,\n                oldDataForEdit: new Set(),\n                data_dispatched: state.newDataForCreate.size === 0\n            }\n        }\n            \n        case 'EDIT_DATA_FAIL': {\n            return {\n                ...state,\n                errMessage: action.errMessage\n            }\n        }\n\n        case 'REMOVE_RECORD': {\n            const { student_id, record_id } = action\n            const newState = { ...state }\n            let record_id_index = state.by_student_id[student_id].indexOf(record_id)\n            if (record_id_index > -1) {\n                newState.by_student_id[student_id].splice(record_id_index, 1)\n            }\n\n            if (newState.oldDataForEdit.has(record_id)) {\n                newState.oldDataForEdit.delete(record_id)\n            }\n\n            if (newState.newDataForCreate.has(record_id)) {\n                newState.newDataForCreate.delete(record_id)\n            } else {\n                newState.dataForRemoval.add(record_id)\n            }\n\n            newState.data_dispatched = (newState.newDataForCreate.size + newState.oldDataForEdit.size) === 0\n            return newState\n        }\n            \n        case 'REMOVE_MILK_RECORD_SUCCESS':\n            return {\n                ...state,\n                dataForRemoval: new Set(),\n                data_dispatched: (state.newDataForCreate.size + state.oldDataForEdit.size) === 0\n            }\n        \n        case 'REMOVE_MILK_RECORD_FAIL':\n            return {\n                ...state,\n                errMessage: 'Error occured while removing milk record, please try again'\n            }\n        \n        case 'CLEAR_STATE':\n            return {\n                loaded: false,\n                by_student_id: {},\n                records: {\n                    by_id: {},\n                    all_id: new Set()\n                },\n                newDataForCreate: new Set(),\n                oldDataForEdit: new Set(),\n                dataForRemoval: new Set(),\n                errMessage: '',\n                data_dispatched: true\n            }\n\n        default:\n            return state\n    }\n}","var initial_state = {\n  by_student_id: {\n    /*\n    {student_id}: {\n      amount: 16,\n      records: [{record_id}, {...}]\n    }\n    */\n  },\n  records: {\n    by_id: {\n      /*\n      {record_id}: {\n        student_id,\n        time: {Datetime},\n        cloth_diaper: true/false,\n        pee_or_poo: {小便/大便},\n        condition: {varchar(4)}\n        teacher_id\n      }\n      */\n    },\n    all_id: []\n  },\n  all_dispatched: true,\n  // students_pending_amount_update: new Set(),\n  data_to_update: [],\n  new_data_for_create: new Set(),\n  old_data_for_edit: new Set(),\n  err_message: '',\n  data_dispatched: true\n}\n\nexport default function diaper(state = initial_state, action) {\n  switch (action.type) {\n    case 'INITIALIZE_CLASS': {\n      let by_student_id = {}\n      action.students.forEach(student => {\n        const { id } = student\n        by_student_id[id] = {\n          amount: '',\n          records: []\n        }\n      })\n      // initial_state = {\n      //   ...state,\n      //   by_student_id\n      // }\n      return {\n        ...state,\n        by_student_id\n      }\n    }\n    case 'FETCH_CLASS_DIAPER_DATA': { // TODO: fix bug\n      return {\n        ...state,\n        ...action.diaperData\n      }\n    }\n    case 'ADD_DIAPER_RECORD': {\n      const { student_id, time, cloth_diaper, teacher_id } = action\n      const newState = { ...state }\n      const id = newState.records.all_id.length\n      newState.by_student_id[student_id].records.push(id)\n      if (!cloth_diaper) {\n        newState.by_student_id[student_id].amount -= 1\n        // newState.students_pending_amount_update.add(student_id)\n      }\n\n      newState.records.by_id[id] = {\n        student_id,\n        time,\n        cloth_diaper,\n        pee_or_poo: '小便',\n        condition: cloth_diaper ? '有濕' : '',\n        teacher_id\n      }\n      newState.records.all_id.push(id)\n      newState.all_dispatched = false\n      newState.new_data_for_create.add(id)\n\n      newState.data_dispatched = false\n      return newState\n    }\n      \n    case 'EDIT_DIAPER_TIME': {\n      const { record_id, time, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n      newState.records.by_id[record_id].time = time\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n    \n    case 'SWITCH_PEE_OR_POO': {\n      const { record_id, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n      const current_pee_or_poo = newState.records.by_id[record_id].pee_or_poo\n      const cloth_diaper = newState.records.by_id[record_id].cloth_diaper\n      newState.records.by_id[record_id].pee_or_poo = \n        current_pee_or_poo === '小便' ? \n          '大便'\n          : current_pee_or_poo === '大便' ?\n            '洗澡'\n            : '小便'\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (current_pee_or_poo === '小便') {\n        newState.records.by_id[record_id].condition = '正常'\n      // } else if (current_pee_or_poo === '大便') {\n      //   newState.records.by_id[record_id].condition = ''\n      } else if (current_pee_or_poo === '大便' && !cloth_diaper) {\n        newState.records.by_id[record_id].condition = ''\n      } else if (current_pee_or_poo === '洗澡' && cloth_diaper) {\n        newState.records.by_id[record_id].condition = '有濕'\n      } else {\n        newState.records.by_id[record_id].condition = ''\n      }\n\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_CLOTH_DIAPER_CONDITION': {\n      const { record_id, teacher_id } = action\n      const newState = { ...state }\n      const { condition } = state.records.by_id[record_id]\n      newState.records.by_id[record_id].condition = condition === '有濕' ? '成功' : '有濕'\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!state.new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_DIAPER_PEE_CONDITION': {\n      const { record_id, teacher_id, student_id } = action\n      const newState = { ...state }\n      const { condition } = state.records.by_id[record_id]\n      if (condition === '') {\n        newState.records.by_id[record_id].condition = '檢查'\n        newState.by_student_id[student_id].amount += 1\n      } else {\n        newState.records.by_id[record_id].condition = ''\n        newState.by_student_id[student_id].amount -= 1\n      }\n      // newState.records.by_id[record_id].condition = condition === '' ? '檢查' : ''\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!state.new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_POO_CONDITION': {\n      const { record_id, condition, teacher_id } = action\n      const { new_data_for_create } = state\n      const newState = { ...state }\n\n      newState.records.by_id[record_id].condition = condition\n      newState.records.by_id[record_id].teacher_id = teacher_id\n      if (!new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n\n    case 'EDIT_SHOWER_CONDITION': {\n      const { record_id } = action\n      const newState = {...state}\n      const { condition } = state.records.by_id[record_id]\n      if (condition === '') {\n        newState.records.by_id[record_id].condition = '大便'\n      } else {\n        newState.records.by_id[record_id].condition = ''\n      }\n\n      if (!state.new_data_for_create.has(record_id)) {\n        newState.old_data_for_edit.add(record_id)\n      }\n\n      newState.data_dispatched = false\n      return newState\n    }\n      \n    case 'REMOVE_DIAPER_RECORD_SUCCESS': {\n      const { student_id, record_id } = action\n      const newState = { ...state }\n      const new_records = []\n      \n      const records = state.by_student_id[student_id].records\n      const record = state.records.by_id[record_id]\n      if(!record.cloth_diaper) {\n        if (!(record.pee_or_poo === '小便' && record.condition === '檢查')) {\n          newState.by_student_id[student_id].amount += 1\n        }\n      }\n\n      for (var i = 0; i < records.length; i++){\n        if (records[i] !== record_id) {\n          new_records.push(records[i])\n        }\n      }\n      newState.by_student_id[student_id].records = new_records\n\n      const new_data_for_create = new Set([...state.new_data_for_create])\n      new_data_for_create.delete(record_id)\n      newState.new_data_for_create = new_data_for_create\n\n      const old_data_for_edit = new Set([...state.old_data_for_edit])\n      old_data_for_edit.delete(record_id)\n      newState.old_data_for_edit = old_data_for_edit\n\n      newState.data_dispatched = (new_data_for_create.size + old_data_for_edit.size) === 0\n      return newState\n    }\n    \n    case 'REMOVE_DIAPER_RECORD_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    // case 'UPDATE_DIAPER_AMOUNT': {\n    //   const { student_id, amount } = action\n    //   const students_pending_amount_update = new Set([...state.students_pending_amount_update, student_id])\n    //   return {\n    //     ...state,\n    //     by_student_id: {\n    //       ...state.by_student_id,\n    //       [student_id]: {\n    //         ...state.by_student_id[student_id],\n    //         amount\n    //       }\n    //     },\n    //     students_pending_amount_update,\n    //     data_dispatched: false\n    //   }\n    // }\n    \n    case 'CREATE_DIAPER_RECORD_SUCCESS': {\n      return {\n        ...state,\n        new_data_for_create: new Set(),\n        old_data_for_edit: new Set(),\n        data_dispatched: true\n      }\n    }\n      \n    case 'CREATE_DIAPER_RECORD_FAIL': {\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    case 'EDIT_DIAPER_RECORD_SUCCESS': { // NOT USED\n      return {\n        ...state,\n        old_data_for_edit: new Set()\n      }\n    }\n\n    case 'EDIT_DIAPER_RECORD_FAIL': { // NOT USED\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n\n    case 'EDIT_DIAPER_AMOUNT_SUCCESS': { // NOT USED\n      return {\n        ...state,\n        students_pending_amount_update: new Set(),\n        data_dispatched: (state.new_data_for_create.size + state.old_data_for_edit.size) === 0\n      }\n    }\n      \n    case 'EDIT_DIAPER_AMOUNT_FAIL': { // NOT USED\n      const { err_message } = action\n      return {\n        ...state,\n        err_message\n      }\n    }\n      \n    case 'CLEAR_ERR_MESSAGE': {\n      return {\n        ...state,\n        err_message: ''\n      }\n    }\n      \n    case 'CLEAR_STATE': {\n      return {\n        by_student_id: {},\n        records: {\n          by_id: {},\n          all_id: []\n        },\n        all_dispatched: true,\n        // students_pending_amount_update: new Set(),\n        data_to_update: [],\n        new_data_for_create: new Set(),\n        old_data_for_edit: new Set(),\n        err_message: '',\n        data_dispatched: true\n      }\n    }\n\n    default:\n      return state\n  }\n}","const initial_state = {\n  // TODO: parents can only write one response per message\n  // TODO: how do we incorporate reminders for things to bring\n  message_by_student_id: {\n    // { student_id }: {\n    //   text: '',\n    //   things_to_bring: [0,0,1,1,0,0,0],\n    //   other_item: ''\n    //   activities: [1,1,0,0,0,0,1],\n    //   other_activity: '',\n    //   teacher_id: ''\n    // }\n  },\n  for_all: {\n    text: '',\n    // things_to_bring: [0,0,1,1,0,0,0],\n    // other_item: '',\n    // activities: [1,1,0,0,0,0,1],\n    // other_activity: '',\n  },\n  student_id_for_update: new Set(),\n  data_dispatched: true,\n  parent_messages: {\n    /*\n      {studeny_id}: message_for_teacher\n    */\n  }\n}\n\nexport default function message(state = initial_state, action) {\n  switch (action.type) {\n    case 'INITIALIZE_CLASS': {\n      const message_by_student_id = {}\n      action.students.forEach(student => {\n        const { id } = student\n        message_by_student_id[id] = {\n          text: '',\n          things_to_bring: [0, 0, 0, 0, 0],\n          other_item: '其它',\n          activities: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n          other_activity: '其它',\n          teacher_id: ''\n        }\n      })\n      return {\n        ...state,\n        message_by_student_id\n      }\n    }\n      \n    case 'FETCH_CLASS_MESSAGE_DATA': {\n      const { message_data } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          ...message_data\n        },\n        for_all: {\n          text: ''\n        }\n      }\n    }\n\n    case 'WRITE_TO_ALL': {\n      const { text, teacher_id } = action\n      let message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        // message_by_student_id[student_id].text = text\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n\n      return {\n        ...state,\n        for_all: {\n          ...state.for_all,\n          text\n        },\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(state.message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'WRITE_TO_ONE': {\n      const { text, student_id, teacher_id } = action\n      const student_id_for_update = new Set([...state.student_id_for_update, student_id])\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            text,\n            teacher_id\n          }\n        },\n        student_id_for_update,\n        data_dispatched: false\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ALL': {\n      const { items_to_bring_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].things_to_bring = items_to_bring_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'REMIND_ITEMS_TO_BRING_TO_ONE': {\n      const { student_id, things_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].things_to_bring = things_to_bring\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ALL': {\n      const { item_to_bring, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_item = item_to_bring === '' ? '其它' : item_to_bring\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n      \n    case 'WRITE_ITEM_TO_BRING_TO_ONE': {\n      const { student_id, item_to_bring, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_item: item_to_bring,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ALL': {\n      const { new_acitivities_bool, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].activities = new_acitivities_bool\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'RECORD_ACTIVITIES_FOR_ONE': {\n      const { student_id, activities, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      message_by_student_id[student_id].activities = activities\n      message_by_student_id[student_id].teacher_id = teacher_id\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ALL': {\n      const { activity, teacher_id } = action\n      const message_by_student_id = { ...state.message_by_student_id }\n      Object.keys(message_by_student_id).forEach(student_id => {\n        message_by_student_id[student_id].other_activity = activity === '' ? '其它' : activity\n        message_by_student_id[student_id].teacher_id = teacher_id\n      })\n      return {\n        ...state,\n        message_by_student_id,\n        student_id_for_update: new Set(Object.keys(message_by_student_id)),\n        data_dispatched: false\n      }\n    }\n\n    case 'WRITE_ACTIVITY_FOR_ONE': {\n      const { student_id, activity, teacher_id } = action\n      return {\n        ...state,\n        message_by_student_id: {\n          ...state.message_by_student_id,\n          [student_id]: {\n            ...state.message_by_student_id[student_id],\n            other_activity: activity,\n            teacher_id\n          }\n        },\n        student_id_for_update: new Set([...state.student_id_for_update, student_id]),\n        data_dispatched: false\n      }\n    }\n\n    case 'SEND_MESSAGE_ON_SUCCESS': {\n      return {\n        ...state,\n        student_id_for_update: new Set(),\n        data_dispatched: true\n      }\n    }\n\n    case 'GET_PARENT_MESSAGE_SUCCESS': {\n      const { messages } = action\n      return {\n        ...state,\n        parent_messages: messages\n      }\n    }\n\n    case 'CLEAR_STATE': {\n      return {\n        message_by_student_id: {},\n        student_id_for_update: new Set(),\n        for_all: {\n          text: '',\n          // things_to_bring: [0,0,1,1,0,0,0],\n          // other_item: '',\n          // activities: [1,1,0,0,0,0,1],\n          // other_activity: '',\n        },\n        data_dispatched: true,\n        parent_messages: {}\n      }\n    }\n\n    default:\n      return state\n  }\n}","const initial_state = {\n  isConnected: true,\n  classes: {\n    /*\n    [id]: {\n      teachers: [],\n      students: [],\n      name: ''\n    }\n    */\n  },\n  pick_up_request: [],\n  admin_passcode: '',\n  viewing_status: '',\n  passcodeAdminId: {},\n  passcodeTeacherId: {},\n  teacherOnDuty: '',\n  teachers: {\n      /*\n      [id]: {\n          name: '',\n          profile_picture: '',\n          passcode: 33,\n          present: false,\n          attendance: [attendance_id, ...]\n      }, {...}\n      */\n  },\n  students: {\n      /*\n      [id]: {\n          name: '',\n          profile_picture: '',\n          present: true,\n          wellness_id: '',\n          address: '',\n          father_phone: '',\n          mother_phone: '',\n          attendance_id: ''\n      }, {...}\n      */\n  },\n  attendance: {\n    /*\n    [id]: {\n      in_time: '',\n      out_time: '',\n      excuse_type: ''\n    }\n    */\n  },\n  student_present: new Set(),\n  student_absent: new Set(),\n  student_unmarked: new Set(),\n  teacher_present: new Set(),\n  teacher_absent: new Set(),\n  teacher_unmarked: new Set()\n}\n\nexport default function school(state = initial_state, action) {\n  switch (action.type) {\n    case 'SET_CONNECT_STATE': {\n      const { isConnected } = action\n      return {\n          ...state,\n          isConnected\n      }\n    }\n    case 'FETCH_CLASSES_SUCCESS':\n      const { classes, admin_passcode } = action\n      return {\n        ...state,\n        classes,\n        admin_passcode\n      }\n    \n    case 'FETCH_TEACHERS_SUCCESS': {\n      const { admins, teachers, classes } = action\n      const updated_classes = {...state.classes}\n      const {passcodeAdminId, passcodeTeacherId} = state\n\n      Object.keys(classes).forEach(class_id => {\n        updated_classes[class_id].teachers = classes[class_id].teachers\n      })\n\n      Object.keys(admins).forEach(admin_id => {\n        passcodeAdminId[admins[admin_id].passcode] = admin_id\n      })\n\n      Object.keys(teachers).forEach(teacher_id => {\n        passcodeTeacherId[teachers[teacher_id].passcode] = teacher_id\n      })\n\n      return {\n        ...state,\n        passcodeAdminId,\n        passcodeTeacherId,\n        // admins,\n        teachers: {\n          ...teachers,\n          ...admins\n        },\n        classes: updated_classes,\n        teacher_unmarked: new Set(Object.keys(teachers))\n      }\n    }\n\n    case 'FETCH_STUDENTS_SUCCESS': {\n      const { students, classes } = action\n      const updated_classes = {...state.classes}\n\n      Object.keys(classes).forEach(class_id => {\n        updated_classes[class_id].students = classes[class_id].students\n      })\n      \n      return {\n        ...state,\n        students,\n        classes: updated_classes,\n        student_unmarked: new Set(Object.keys(students))\n      }\n    }\n\n    case 'FETCH_TEACHER_ATTENDANCE_SUCCESS': {\n      const { attendance, teachers } = action\n      const updated_teachers = {...state.teachers}\n      const teacher_unmarked = new Set(Object.keys(state.teachers))\n      const teacher_present = new Set()\n      const teacher_absent = new Set()\n      Object.keys(teachers).forEach(teacher_id => {\n        updated_teachers[teacher_id].attendance = teachers[teacher_id].attendance_array\n        updated_teachers[teacher_id].present = teachers[teacher_id].present\n        updated_teachers[teacher_id].total_minutes = teachers[teacher_id].total_minutes\n        if (teachers[teacher_id].present) {\n          teacher_present.add(teacher_id)\n        } else {\n          teacher_absent.add(teacher_id)\n        }\n        teacher_unmarked.delete(teacher_id)\n      })\n      return {\n        ...state,\n        teachers: updated_teachers,\n        attendance: {\n          ...state.attendance,\n          ...attendance\n        },\n        teacher_present,\n        teacher_absent,\n        teacher_unmarked\n      }\n    }\n\n    case 'FETCH_STUDENT_ATTENDANCE_SUCCESS': {\n      const { attendance, students, present, absent } = action\n      const updated_students = {...state.students}\n      const student_unmarked = new Set(Object.keys(state.students))\n      Object.keys(students).forEach(student_id => {\n        updated_students[student_id].attendance_id = students[student_id]\n\n        if (present.includes(student_id) || absent.includes(student_id)) {\n          student_unmarked.delete(student_id)\n        }\n      })\n      return {\n        ...state,\n        students: updated_students,\n        attendance: {\n          ...state.attendance,\n          ...attendance\n        },\n        student_present: new Set([...present]),\n        student_absent: new Set([...absent]),\n        student_unmarked\n      }\n    }\n\n    case 'EDIT_TEACHER_ON_DUTY': {\n      const {teacher_id} = action\n      return {\n        ...state,\n        teacherOnDuty: teacher_id\n      }\n    }\n    \n    case 'ADD_PICKUP_REQUEST': {\n      const { requests } = action\n      return {\n        ...state,\n        pick_up_request: requests\n      }\n    }\n\n    case 'UPDATE_VIEWING_STATUS': {\n      const { status } = action\n      return {\n        ...state,\n        viewing_status: status\n      }\n    }\n\n    case 'UPDATE_PROFILE_PICTURE': {\n      const { student_id, uri } = action\n      const students = {...state.students}\n      students[student_id].profile_picture = uri\n      return {\n        ...state,\n        students\n      }\n    }\n\n    case 'EDIT_STUDENT_SUCCESS': {\n      const { student_id, name, old_class_id, new_class_id } = action\n      const students = {...state.students}\n      const classes = {...state.classes}\n      students[student_id].name = name\n      students[student_id].class_id = new_class_id\n\n      // remove student id from old class[id].students\n      let student_id_array = classes[old_class_id].students\n      let new_student_id_array = []\n      for(var i = 0; i < student_id_array.length; i++) {\n        if (student_id_array[i] !== student_id) {\n          new_student_id_array.push(student_id)\n        }\n      }\n      classes[old_class_id].students = new_student_id_array\n\n      // add student id to new class[id].students\n      student_id_array = classes[new_class_id].students\n      student_id_array.push(student_id)\n      classes[new_class_id].students = student_id_array\n\n      return {\n        ...state,\n        students,\n        classes\n      }\n    }\n\n    case 'UPDATE_TEACHER_PROFILE_PICTURE': {\n      const { teacher_id, image_url } = action\n      const teachers = {...state.teachers}\n      teachers[teacher_id].profile_picture = image_url\n      return {\n        ...state,\n        teachers\n      }\n    }\n\n    case 'CLEAR_STATE': {\n      return {\n        ...state,\n        viewing_status: ''\n      }\n    }\n  \n    case 'CLEAR_SCHOOL_STATE': {\n      return {\n        isConnected: false,\n        classes: {},\n        pick_up_request: [],\n        passcodeAdminId: {},\n        passcodeTeacherId: {},\n        teacherOnDuty: '',\n        teachers: {},\n        students: {},\n        attendance: {},\n        student_present: new Set(),\n        student_absent: new Set(),\n        student_unmarked: new Set(),\n        teacher_present: new Set(),\n        teacher_absent: new Set(),\n        teacher_unmarked: new Set()\n      }\n    }\n    \n    default:\n        return state\n  }\n\n}","import { combineReducers } from 'redux'\nimport classInfo from './classInfo'\nimport attendance from './attendance'\nimport medicationrequests from './medicationrequests'\nimport appetite from './appetite'\nimport water from './water'\nimport sleep from './sleep'\nimport healthstatus from './healthstatus'\nimport milk from './milk'\nimport diaper from './diaper'\nimport inbox from './inbox'\nimport message from './message'\nimport school from './school'\n\nexport default combineReducers({\n    classInfo,\n    attendance,\n    medicationrequests,\n    appetite,\n    water,\n    sleep,\n    healthstatus,\n    milk,\n    diaper,\n    message,\n    school\n})","export default function medicationrequests(state = {\n    requests: {\n        // [request_id]: {\n        //     'student_id': student_id,\n        //     'timestamp': timestamp.strftime('%B %d, %Y %H:%M:%S'),\n        //     'medication': {\n        //         '藥粉': None if 藥粉 == 'None' else 藥粉,\n        //         'need_refrigeration': need_refrigeration == 'True',\n        //         '藥水': None if 藥水 == 'None' else 藥水,\n        //         '藥膏': None if 藥膏 == 'None' else 藥膏\n        //     },\n        //     'note': note,\n        //     'administered': administered,\n        //     'teacher_id': teacher_id\n        // }, {...}\n    },\n    unfinished: [],\n    finished: []\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_REQUESTS':{\n            const { requests, finished, unfinished} = action\n            return {\n                ...state,\n                requests,\n                finished,\n                unfinished\n            }\n        }\n        \n        case 'FILL_MED_REQUEST':{\n            const newState = { ...state }\n            const { unfinished } = state\n            var new_unfinished = []\n            newState.requests[action.request_id].administered = true\n            newState.finished = [...state.finished, action.request_id]\n\n            for (var i = 0; i < unfinished.length; i++) {\n                if (unfinished[i] !== action.request_id) {\n                    new_unfinished.push(unfinished[i])\n                }\n            }\n            newState.unfinished = new_unfinished\n            return newState\n        }\n        \n        case 'CLEAR_STATE': {\n            return {\n                requests: {},\n                unfinished: [],\n                finished: []\n            }\n        }\n\n        default:\n            return state\n    }\n}","export default function water(state = {\n    byId: {\n\n    }\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_CLASS':\n            var students = {}\n            action.students.forEach(student => {\n                students[student[0]] = []\n            })\n            return {\n                byId: students\n            }\n        \n        case 'ADD_WATER_RECORD':\n            // const d = action.date\n            // time = d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds()\n            // action.student_id_list.forEach(id => {\n            //     state.byId[id].push(time)\n            // })\n            if (!state.byId[action.student_id].includes(action.time)) {\n                state.byId[action.student_id].push(action.time)\n            }\n            return {\n                ...state\n            }\n        default:\n            return state\n    }\n}","\nexport const initializeClass = (teacher_objs, students) => {\n    return {\n        type: 'INITIALIZE_CLASS',\n        teacher_objs,\n        students\n    }\n}\n\nexport const rateAppetite = (student_id, mealType, rating, teacher_id) => {\n    return {\n        type: 'RATE_APPETITE',\n        student_id,\n        mealType,\n        rating,\n        teacher_id\n    }\n}\n\nexport const markPresent = (student_id, in_time) => {\n    return {\n        type: 'MARK_PRESENT',\n        student_id,\n        in_time\n    }\n}\n\nexport const markDismiss = (student_id, out_time) => {\n    return {\n        type: 'MARK_DISMISS',\n        student_id,\n        out_time\n    }\n}\n\nexport const markAbsent = (student_id, excuse_type) => {\n    return {\n        type: 'MARK_ABSENT',\n        student_id,\n        excuse_type\n    }\n}\n\nexport const initializeRequests = (requests, finished, unfinished) => {\n    return {\n        type: 'INITIALIZE_REQUESTS',\n        requests,\n        finished,\n        unfinished\n    }\n}\n\nexport const fillMedRequest = (request_id) => {\n    return {\n        type: 'FILL_MED_REQUEST',\n        request_id\n    }\n}\n\nexport const fetchAttendanceSuccess = (data) => {\n    return {\n        type: 'FETCH_ATTENDANCE_SUCCESS',\n        data\n    }\n}\n\nexport const markTeacherLoggedIn = (teacher_id, time, attendance_id) => {\n    return {\n        type: 'MARK_TEACHER_LOGGED_IN',\n        teacher_id,\n        time,\n        attendance_id\n    }\n}\n\nexport const markTeacherLoggedOut = (teacher_id, time) => {\n    return {\n        type: 'MARK_TEACHER_LOGGED_OUT',\n        teacher_id,\n        time\n    }\n}\n\nexport const clearRatings = (meal_type) => {\n    return {\n        type: 'CLEAR_RATINGS',\n        meal_type\n    }\n}\n\nexport const setAllRatingsToGreat = (mealType, students_to_display, teacher_id) => {\n    return {\n        type: 'SET_ALL_RATINGS_TO_GREAT',\n        mealType,\n        students_to_display,\n        teacher_id\n    }\n}\n\nexport const setAllDrinkWater = (mealType, students_to_display, teacher_id) => {\n    return {\n        type: 'SET_ALL_DRINK_WATER',\n        mealType,\n        students_to_display,\n        teacher_id\n    }\n}\n\nexport const addWaterRecord = (time, student_id) => {\n    return {\n        type: 'ADD_WATER_RECORD',\n        time,\n        student_id\n    }\n}\n\nexport const addWellnessRecord = (student_id) => {\n    return {\n        type: 'ADD_RECORD',\n        student_id\n    }\n}\n\nexport const addHealthStatus = (student_id, record_id, status, teacher_id) => {\n    return {\n        type: 'ADD_HEALTH_STATUS',\n        student_id,\n        record_id,\n        status,\n        teacher_id\n    }\n}\n\nexport const addTemperature = (student_id,record_id, temperature, teacher_id) => {\n    return {\n        type: 'ADD_TEMPERATURE',\n        student_id,\n        record_id,\n        temperature,\n        teacher_id\n    }\n}\n\nexport const sendWellnessDataSuccess = () => {\n    return {\n        type: 'SEND_WELLNESS_DATA_SUCCESS'\n    }\n}\n\nexport const sendWellnessDataFail = (errMessage) => {\n    return {\n        type: 'SEND_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const invalidateWellnessData = (record_id, errMessage) => {\n    return {\n        type: 'INVALIDATE_WELLNESS_DATA',\n        record_id,\n        errMessage\n    }\n}\n\nexport const setSleepTime = (student_id, index, sleep_time, teacher_id) => {\n    return {\n        type: 'SET_SLEEP_TIME',\n        student_id,\n        index,\n        sleep_time,\n        teacher_id\n    }\n}\n\nexport const removeSleepRecord = (record_id, student_id) => {\n    return {\n        type: 'REMOVE_RECORD',\n        record_id,\n        student_id\n    }\n}\n\nexport const removeSleepRecordSuccess = (record_id, student_id) => {\n    return {\n        type: 'REMOVE_RECORD_SUCCESS',\n        record_id,\n        student_id\n    }\n}\n\nexport const removeSleepRecordFail = (errorMessage) => {\n    return {\n        type: 'REMOVE_RECORD_FAIL',\n        errorMessage\n    }\n}\n\nexport const setWakeTime = (student_id, index, wake_time, teacher_id) => {\n    return {\n        type: 'SET_WAKE_TIME',\n        student_id,\n        index,\n        wake_time,\n        teacher_id\n    }\n}\n\nexport const removeWakeTime = (record_id, teacher_id) => {\n    return {\n        type: 'REMOVE_WAKE_TIME',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editMilkAmount = (record_id, milk_amount, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_AMOUNT',\n        record_id,\n        milk_amount,\n        teacher_id\n    }\n}\n\nexport const editMilkType = (record_id, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_TYPE',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editAssistType = (record_id, teacher_id) => {\n    return {\n        type: 'EDIT_ASSIST_TYPE',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editMilkTime = (record_id, date_time, teacher_id) => {\n    return {\n        type: 'EDIT_MILK_TIME',\n        record_id, \n        date_time,\n        teacher_id\n    }\n}\n\nexport const updateDiaperAmount = (student_id, amount) => {\n    return {\n        type: 'UPDATE_DIAPER_AMOUNT',\n        student_id,\n        amount\n    }\n}\n\nexport const addDiaperRecord = (student_id, time, cloth_diaper, teacher_id) => {\n    return {\n        type: 'ADD_DIAPER_RECORD',\n        student_id,\n        time,\n        cloth_diaper,\n        teacher_id\n    }\n}\n\nexport const editDiaperTime = (record_id, time, teacher_id) => {\n    return {\n        type: 'EDIT_DIAPER_TIME',\n        record_id, \n        time,\n        teacher_id\n    }\n}\n\nexport const switchPeeOrPoo = (record_id, teacher_id) => {\n    return {\n        type: 'SWITCH_PEE_OR_POO',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editClothDiaperCondition = (record_id, teacher_id) => {\n    return { \n        type: 'EDIT_CLOTH_DIAPER_CONDITION',\n        record_id,\n        teacher_id\n    }\n}\n\nexport const editDiaperPeeCondition = (record_id, teacher_id, student_id) => {\n    return {\n        type: 'EDIT_DIAPER_PEE_CONDITION',\n        record_id,\n        teacher_id,\n        student_id\n    }\n}\n\nexport const editPooCondition = (record_id, condition, teacher_id) => {\n    return {\n        type: 'EDIT_POO_CONDITION',\n        record_id,\n        condition,\n        teacher_id\n    }\n}\n\nexport const editShowerCondition = (record_id) => {\n    return {\n        type: 'EDIT_SHOWER_CONDITION',\n        record_id\n    }\n}\n\nexport const removeDiaperRecordSuccess = (student_id, record_id) => {\n    return {\n        type: 'REMOVE_DIAPER_RECORD_SUCCESS',\n        student_id,\n        record_id\n    }\n}\n\nexport const removeDiaperRecordFail = (err_message) => {\n    return {\n        type: 'REMOVE_DIAPER_RECORD_FAIL',\n        err_message\n    }\n}\n\nexport const clearDiaperlogErrorMessage = () => {\n    return {\n        type: 'CLEAR_ERR_MESSAGE'\n    }\n}\n\nexport const addMilkRecord = (student_id) => {\n    return {\n        type: 'ADD_MILK_RECORD',\n        student_id\n    }\n}\n\nexport const clearUpdatedStudents = () => {\n    return {\n        type: 'CLEAR_UPDATED_STUDENTS'\n    }\n}\n\nexport const fetchClassAppetiteData = (fruit_name, ratings) => {\n    return {\n        type: 'FETCH_CLASS_APPETITE_DATA',\n        fruit_name,\n        ratings\n    }\n}\n\nexport const fetchClassWellnessData = (wellnessData) => {\n    return {\n        type: 'FETCH_CLASS_WELLNESS_DATA',\n        wellnessData\n    }\n}\n\nexport const fetchClassSleepData = (sleepData) => {\n    return {\n        type: 'FETCH_CLASS_SLEEP_DATA',\n        sleepData\n    }\n}\n\nexport const clearPendingSleepUpdate = () => {\n    return {\n        type: 'CLEAR_PENDNING_SLEEP_UPDATE'\n    }\n}\n\nexport const fetchClassMilkData = (milkData) => {\n    return {\n        type: 'FETCH_CLASS_MILK_DATA',\n        milkData\n    }\n}\n\n// TODO: specify create and edit for milk data\nexport const createDataSuccess = () => {\n    return {\n        type: 'CREATE_DATA_SUCCESS'\n    }\n}\n\nexport const createDataFail = (errMessage) => {\n    return {\n        type: 'CREATE_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const editDataSuccess = () => {\n    return {\n        type: 'EDIT_DATA_SUCCESS'\n    }\n}\n\nexport const editDataFail = (errMessage) => {\n    return {\n        type: 'EDIT_DATA_FAIL',\n        errMessage\n    }\n}\n\nexport const removeMilkRecordSuccess = () => {\n    return {\n        type: 'REMOVE_MILK_RECORD_SUCCESS'\n    }\n}\n\nexport const removeMilkRecordFail = () => {\n    return {\n        type: 'REMOVE_MILK_RECORD_FAIL'\n    }\n}\n\nexport const createSleepRecordSuccess = () => {\n    return {\n        type: 'CREATE_SLEEP_RECORD_SUCCESS'\n    }\n}\n\nexport const createSleepRecordFail = (errMessage) => {\n    return {\n        type: 'CREATE_SLEEP_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editSleepRecordSuccess = () => {\n    return {\n        type: 'EDIT_SLEEP_RECORD_SUCCESS'\n    }\n}\n\nexport const editSleepRecordFail = (errMessage) => {\n    return {\n        type: 'EDIT_SLEEP_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const fetchClassDiaperData = (diaperData) => {\n    return {\n        type: 'FETCH_CLASS_DIAPER_DATA',\n        diaperData\n    }\n}\n\nexport const createDiaperRecordSuccess = () => {\n    return {\n        type: 'CREATE_DIAPER_RECORD_SUCCESS'\n    }\n}\n\nexport const createDiaperRecordFail = (errMessage) => {\n    return {\n        type: 'CREATE_DIAPER_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editDiaperRecordSuccess = () => {\n    return {\n        type: 'EDIT_DIAPER_RECORD_SUCCESS'\n    }\n}\n\nexport const editDiaperRecordFail = (errMessage) => {\n    return {\n        type: 'EDIT_DIAPER_RECORD_FAIL',\n        errMessage\n    }\n}\n\nexport const editDiaperAmountSuccess = () => {\n    return {\n        type: 'EDIT_DIAPER_AMOUNT_SUCCESS'\n    }\n}\n\nexport const editDiaperAmountFail = (errMessage) => {\n    return {\n        type: 'EDIT_DIAPER_AMOUNT_FAIL',\n        errMessage\n    }\n}\n\nexport const removeRecord = (student_id, record_id, index) => {\n    return {\n        type: 'REMOVE_RECORD',\n        student_id,\n        record_id,\n        index\n    }\n}\n\nexport const clearState = () => {\n    return {\n        type: 'CLEAR_STATE'\n    }\n}\n\nexport const getConversations = (conversations, unread_conversation_list) => {\n    return {\n        type: 'GET_CONVERSATIONS',\n        conversations,\n        unread_conversation_list\n    }\n}\n\nexport const setMessageDataSchool = (messages, most_recently_read_message_id, conversation_id, student_id) => {\n    return {\n        type: 'SET_MESSAGE_DATA',\n        messages,\n        most_recently_read_message_id,\n        conversation_id,\n        student_id\n    }\n}\n\nexport const setCurrentConversationId = (conversation_id) => {\n    return {\n        type: 'SET_CURRENT_CONVERSATION_ID',\n        conversation_id\n    }\n}\n\nexport const clearCurrentConversationIdSchool = () => {\n    return {\n        type: 'CLEAR_CURRENT_CONVERSATION_ID'\n    }\n}\n\nexport const setClassId = (class_id) => {\n    return {\n        type: 'SET_CLASS_ID',\n        class_id\n    }\n}\n\nexport const onSendAppetiteSuccess = () => {\n    return {\n        type: 'ON_SEND_APPETITE_SUCCESS'\n    }\n}\n\nexport const alertErrMessage = (err_message) => {\n    return {\n        type: 'ALERT_ERR_MESSAGE',\n        err_message\n    }\n}\n\nexport const clearAppetiteErrorMessage = () => {\n    return {\n        type: 'CLEAR_ERR_MESSAGE'\n    }\n}\n\nexport const addStudentIdForUpdate = (student_id_array) => {\n    return {\n        type: 'ADD_STUDENT_ID_FOR_UPDATE',\n        student_id_array\n    }\n}\n\nexport const markWaterDrank = (student_id, meal_type, teacher_id) => {\n    return {\n        type: 'MARK_WATER_DRANK',\n        student_id,\n        meal_type,\n        teacher_id\n    }\n}\n\nexport const markStaffAttendanceFail = (errMessage) => {\n    return {\n        type: 'MARK_STAFF_ATTENDANCE_FAIL',\n        errMessage\n    }\n}\n\nexport const writeToAll = (text, teacher_id) => {\n    return {\n        type: 'WRITE_TO_ALL',\n        text,\n        teacher_id\n    }\n}\n\nexport const writeToOne = (text, student_id, teacher_id) => {\n    return {\n        type: 'WRITE_TO_ONE',\n        text,\n        student_id,\n        teacher_id\n    }\n}\n\nexport const remindItemsToBringToAll = (items_to_bring_bool, teacher_id) => {\n    return {\n        type: 'REMIND_ITEMS_TO_BRING_TO_ALL',\n        items_to_bring_bool,\n        teacher_id\n    }\n}\n\nexport const remindItemsToBringToOne = (student_id, things_to_bring, teacher_id) => {\n    return {\n        type: 'REMIND_ITEMS_TO_BRING_TO_ONE',\n        student_id,\n        things_to_bring,\n        teacher_id\n    }\n}\n\nexport const recordActivitiesForAll = (new_acitivities_bool, teacher_id) => {\n    return {\n        type: 'RECORD_ACTIVITIES_FOR_ALL',\n        new_acitivities_bool,\n        teacher_id\n    }\n}\n\nexport const recordActivitiesForOne = (student_id, activities, teacher_id) => {\n    return {\n        type: 'RECORD_ACTIVITIES_FOR_ONE',\n        student_id,\n        activities,\n        teacher_id\n    }\n}\n\nexport const writeItemToBringToAll = (item_to_bring, teacher_id) => {\n    return {\n        type: 'WRITE_ITEM_TO_BRING_TO_ALL',\n        item_to_bring,\n        teacher_id\n    }\n}\n\nexport const writeItemToBringToOne = (student_id, item_to_bring, teacher_id) => {\n    return {\n        type: 'WRITE_ITEM_TO_BRING_TO_ONE',\n        student_id,\n        item_to_bring,\n        teacher_id\n    }\n}\n\nexport const writeActivityForAll = (activity, teacher_id) => {\n    return {\n        type: 'WRITE_ACTIVITY_FOR_ALL',\n        activity,\n        teacher_id\n    }\n}\n\nexport const writeActivityForOne = (student_id, activity, teacher_id) => {\n    return {\n        type: 'WRITE_ACTIVITY_FOR_ONE',\n        student_id,\n        activity,\n        teacher_id\n    }\n}\n\nexport const fetchClassMessageData = (message_data) => {\n    return {\n        type: 'FETCH_CLASS_MESSAGE_DATA',\n        message_data\n    }\n}\n\nexport const alertSleeplogErrorMessage = (err_message) => {\n    return {\n        type: 'ALERT_SLEEPLOG_ERROR_MESSAGE',\n        err_message\n    }\n}\n\nexport const clearSleeplogErrorMessage = () => {\n    return {\n        type: 'CLEAR_SLEEPLOG_ERROR_MESSAGE'\n    }\n}\n\nexport const editFruitName = (fruit_name) => {\n    return {\n        type: 'EDIT_FRUIT_NAME',\n        fruit_name\n    }\n}\n\nexport const fetchClassesSuccess = (classes, admin_passcode, email) => {\n    return {\n        type: 'FETCH_CLASSES_SUCCESS',\n        classes,\n        admin_passcode,\n        email\n    }\n}\n\nexport const fetchTeachersSuccess = (admins, teachers, classes) => {\n    return {\n        type: 'FETCH_TEACHERS_SUCCESS',\n        admins,\n        teachers, \n        classes\n    }\n}\n\nexport const fetchStudentsSuccess = (students, classes) => {\n    return {\n        type: 'FETCH_STUDENTS_SUCCESS',\n        students,\n        classes\n    }\n}\n\nexport const initializeStudentWellness = (students) => {\n    return {\n        type: 'INITIALIZE_STUDENT_WELLNESS',\n        students\n    }\n}\n\nexport const sendMessageOnSuccess = () => {\n    return {\n        type: 'SEND_MESSAGE_ON_SUCCESS'\n    }\n}\n\nexport const setConnectState = (isConnected) => {\n    return {\n        type: 'SET_CONNECT_STATE',\n        isConnected\n    }\n}\n\nexport const clearSchoolState = () => {\n    return {\n        type: 'CLEAR_SCHOOL_STATE'\n    }\n}\n\nexport const fetchTeacherAttendanceSuccess = (attendance, teachers) => {\n    return {\n        type: 'FETCH_TEACHER_ATTENDANCE_SUCCESS',\n        attendance,\n        teachers\n    }\n}\n\nexport const fetchStudentAttendanceSuccess = (attendance, students, present, absent) => {\n    return {\n        type: 'FETCH_STUDENT_ATTENDANCE_SUCCESS',\n        attendance,\n        students,\n        present,\n        absent\n    }\n}\n\nexport const editTeacherOnDuty = (teacher_id) => {\n    return {\n        type: 'EDIT_TEACHER_ON_DUTY',\n        teacher_id\n    }\n}\n\nexport const addPickupRequest = (requests) => {\n    return {\n        type: 'ADD_PICKUP_REQUEST',\n        requests\n    }\n}\n\nexport const updateViewingStatus = (status) => {\n    return {\n        type: 'UPDATE_VIEWING_STATUS',\n        status\n    }\n}\n\nexport const updateProfilePicture = (student_id , uri) => {\n    return {\n        type: 'UPDATE_PROFILE_PICTURE',\n        student_id,\n        uri\n    }\n}\n\nexport const editStudentSuccess = (student_id, name, old_class_id, new_class_id) => {\n    return {\n        type: 'EDIT_STUDENT_SUCCESS',\n        student_id,\n        name,\n        old_class_id,\n        new_class_id\n    }\n}\n\nexport const updateTeacherProfilePicture = (teacher_id, image_url) => {\n    return {\n        type: 'UPDATE_TEACHER_PROFILE_PICTURE',\n        teacher_id,\n        image_url\n    }\n}\n\nexport const markRecordError = (record_id_array) => {\n    return {\n        type: 'MARK_RECORD_ERROR',\n        record_id_array\n    }\n}\n\nexport const markRecordCorrect = (record_id) => {\n    return {\n        type: 'MARK_RECORD_CORRECT',\n        record_id\n    }\n}\n\nexport const getParentMessageSuccess = (messages) => {\n    return {\n        type: 'GET_PARENT_MESSAGE_SUCCESS',\n        messages\n    }\n}","import React from 'react'\nimport { Container, View, Text, Card, CardItem, Item, Input, Button, Toast } from 'native-base'\nimport { TouchableHighlight, StyleSheet } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { markTeacherLoggedIn, markTeacherLoggedOut } from '../../redux/school/actions/index'\n\nclass LoginNumberPad extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            passcode: '',\n            err_message: '',\n            number_array: [1,2,3,4,5,6,7,8,9]\n        }\n        this.handlePasscode = this.handlePasscode.bind(this)\n    }\n\n    handlePasscode(num) {\n        this.setState({ passcode: this.state.passcode + num })\n    }\n\n    handleEnterPasscode() {\n        this.props.handleEnterPasscode(this.state.passcode)\n        this.setState({ passcode: '' })\n    }\n\n    render() {\n        const {passcode, number_array} = this.state\n        return (\n            <TouchableHighlight\n                style={{\n                    backgroundColor: 'rgba(0,0,0,0.5)',\n                    width: '100%',\n                    height: '100%',\n                    // // opacity: 0.5,\n                    flex: 1,\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    zIndex: 2,\n                    position: 'absolute',\n                }}\n                underlayColor='transparent'\n                onPress={this.props.hideLoginPad}\n            >\n                <TouchableHighlight\n                    style={{ width: 350, height: 560, borderRadius: 25, zIndex: 3, position: 'absolute', backgroundColor: 'white' }}\n                    underlayColor='white'\n                    onPress={() => { }}\n                >\n                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                        <View style={{ flex: 1, flexDirection: 'row', width: 310, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#b5e9e9', justifyContent: 'center' }}>\n                            <Text style={{ width: 210, fontSize: 40, fontWeight: 'bold', paddingHorizontal: 20, alignSelf: 'center' }}>{passcode}</Text>\n                            <TouchableHighlight\n                                style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#ffe1d0', justifyContent: 'center', alignItems: 'center'  }}\n                                underlayColor='#fa625f'\n                                onPress={() => this.setState({ passcode: '' })}\n                            >\n                                <Text style={{ fontSize: 30 }} >Clear</Text>\n                            </TouchableHighlight>\n                        </View>\n                        <View style={{ flex: 3, flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'center' }}>\n                            {number_array.map(number => {\n                                return (\n                                    <TouchableHighlight\n                                        key={number}\n                                        style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#fff1b5', justifyContent: 'center', alignItems: 'center'  }}\n                                        underlayColor='#f4d41f'\n                                        onPress={() => this.handlePasscode(number)}\n                                    >\n                                        <Text style={{ fontSize: 30 }} >{number}</Text>\n                                    </TouchableHighlight>\n                                )\n                            })}\n                        </View>\n                        <View style={{ flex: 1, flexDirection: 'row' }}>\n                            <TouchableHighlight\n                                style={{ width: 100, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#fff1b5', justifyContent: 'center', alignItems: 'center' }}\n                                underlayColor='#f4d41f'\n                                onPress={() => this.handlePasscode(0)}\n                            >\n                                <Text style={{ fontSize: 30 }}>0</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight\n                                style={{ width: 210, height: 100, margin: 5, borderRadius: 50, backgroundColor: '#dcf3d0', justifyContent: 'center', alignItems: 'center' }}\n                                underlayColor='#00c07f'\n                                onPress={() => this.handleEnterPasscode()}\n                            >\n                                <Text style={{ fontSize: 30 }}>Enter</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                </TouchableHighlight>\n            </TouchableHighlight>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    button: {\n        minWidth: '22%',\n        aspectRatio: 1,\n        margin: 5,\n        justifyContent: 'center'\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markTeacherLoggedIn, markTeacherLoggedOut}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (LoginNumberPad)","import Constants from 'expo-constants';\n\n// export const prodUrl = \"https://someapp.herokuapp.com\";\n\n// const ENV = {\n//   dev: {\n//     apiUrl: \"http://localhost:3000\"\n//   },\n//   staging: {\n//     apiUrl: prodUrl\n//   },\n//   prod: {\n//     apiUrl: prodUrl\n//   }\n// };\n\nfunction getEnvVars(env = \"\") {\n  if (env === null || env === undefined || env === \"\") return \"prod\";\n  if (env.indexOf(\"dev\") !== -1) return \"prod\";\n  if (env.indexOf(\"staging\") !== -1) return \"staging\";\n  if (env.indexOf(\"prod\") !== -1) return \"prod\";\n}\n\nexport default getEnvVars(Constants.manifest.releaseChannel);\n","// import { connect } from \"react-redux\"\nimport ENV from '../variables'\n\nexport const formatDate = (date) => {\n    return date.getFullYear() + '-' + ('0' + (date.getMonth()+ 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyDate = (date) => {\n    return date.getFullYear() + '/' + ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const beautifyMonthDate = (date) => {\n    return ('0' + (date.getMonth()+ 1)).slice(-2) + '/' + ('0' + date.getDate()).slice(-2)\n}\n\nexport const formatTime = (date) => {\n    return date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds()\n}\n\nexport const beautifyTime = (date) => {\n    return date.getHours() + ':' + ('0' + date.getMinutes()).slice(-2)\n}\n\nexport const formatHourMinute = (date) => {\n    return date.getHours() + ':' + date.getMinutes()\n}\n\nexport const get = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log(resJson)\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const post = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const put = async (endpoint, body) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const delete_by_id = async (endpoint) => {\n    var success = true\n    const result = await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}${endpoint}`, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200) {\n                    success = false\n                } else if (statusCode === undefined) {\n                    return {\n                        success: false,\n                        statusCode: 500,\n                        message,\n                        data: {}\n                    }\n                }\n\n                return {\n                    success,\n                    statusCode,\n                    message,\n                    data\n                }\n            }).catch(err => {\n                return {\n                    success: false,\n                    statusCode: 500,\n                    message: err.message,\n                    data: {}\n                }\n            })\n\n    return result\n}\n\nexport const fetchData = async (type, child_id, start_date, end_date) => {\n    // const date = formatDate(new Date());\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/${child_id}?start_date=${start_date}&end_date=${end_date}`\n\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    // console.log(`${type} util/fetchData/fetchedData: `, fetchedData)\n    return fetchedData\n}\n\nexport const fetchClassData = async (type, class_id, start_date, end_date) => {\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/${type}/class/${class_id}?start_date=${start_date}&end_date=${end_date}`\n    const fetchedData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            // console.log('fetchClassData/resJson: /', resJson)\n            return resJson\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    return fetchedData\n}\n\nexport const fetchMessagesByConversationId = async (conversation_id, sender_id, recipient_id) => {\n    console.log('fetchMessageByConvId/recipient_id', recipient_id)\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const messageData = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('fetchMessagesByConversationId/resJson: ', resJson)\n            const { messages, most_recently_read_message_id } = resJson.data\n            if (resJson.statusCode === 200) {\n                markRead(messages, sender_id, recipient_id)\n                return {\n                    success: true,\n                    data: resJson.data\n                }\n            } else {\n                return {\n                    sucess: false,\n                    data: resJson\n                }\n            }\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            return {\n                success: false,\n                data: err\n            }\n        })\n    return messageData\n}\n\nconst markRead = (message_array, sender_id, recipient_id) => {\n    // console.log('message_array: ', message_array)\n    // const { sender_id, recipient_id } = this.state\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message`\n\n    const most_recent_message = message_array[0] ? message_array[0] : null\n    if (most_recent_message === null || most_recent_message.sender_id === sender_id || most_recent_message.read_at !== null) {\n        return\n    }\n\n    fetch(query, {\n        method: 'PUT',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            most_recent_message_id: most_recent_message.message_id,\n            recipient_id\n        })\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('markRead/resJson: ', resJson)\n        })\n        .catch(err => console.log('err: ', err))\n}\n\nexport const fetchReadReceipt = async (conversation_id,  sender_id) => {\n    // const { conversation_id } = this.state.messageData\n    // const sender_id = this.props.child_id\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/message/read-receipt?conversation_id=${conversation_id}&sender_id=${sender_id}`\n    const success = true\n    const message_id = await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n        .then(res => res.json())\n        .then(resJson => {\n            console.log('parent/inboxcard/fetchReadReceipt/resJson: ', resJson)\n            return resJson.data\n        })\n        .catch(err => {\n            console.log('err: ', err)\n            success = false\n            return `err: ${err}`\n        })\n    return {\n        success,\n        data: message_id\n    }\n}\n\nexport const sendWellnessData = async (wellness_data, class_id, date) => {\n    const { record_id_for_update} = wellness_data\n    var data_objs = []\n\n    if (record_id_for_update.size === 0) {\n        return {\n            success: true,\n            data: []\n        }\n    }\n\n    record_id_for_update.forEach((record_id) => {\n        data_objs.push({\n            record_id,\n            ...wellness_data.records[record_id]\n        })\n    })\n    normalize(data_objs)\n\n    var request_body = {\n        date,\n        class_id,\n        data_objs\n    }\n\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/wellness/`\n    \n    const fetchResult = await fetch(query, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n        .then((res) => res.json())\n        .then((resJson) => {\n            const { statusCode, message, data } = resJson\n            if (statusCode > 200 || statusCode === undefined) {\n                return {\n                    success: false,\n                    statusCode,\n                    message\n                }\n            }\n            return {\n                success: true,\n                statusCode,\n                message,\n                data\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                message: err\n            }\n        })\n    return fetchResult\n}\n\nfunction normalize(data_objs) {\n    for (var i = 0; i < data_objs.length; i++) {\n        data_objs[i].time = formatTime(data_objs[i].time)\n    }\n}","import React from 'react'\nimport { Card, CardItem, Toast } from 'native-base'\nimport { View, Text, StyleSheet, Image, TouchableHighlight } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { markAbsent, markPresent } from './../../redux/school/actions/index'\nimport { formatDate } from './../util'\n\nclass AttendanceCard extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            selected_student_ids: []\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    onSelectAttendanceType(attendance_type) {\n        const { attendance } = this.props\n        switch (attendance_type) {\n            case 'present': {\n                this.setState({\n                    selected_student_ids: [...attendance.present]\n                })\n                return\n            }\n            \n            case 'absent': {\n                this.setState({\n                    selected_student_ids: [...attendance.absent]\n                })\n                return \n            }\n                \n            case 'unmarked': {\n                this.setState({\n                    selected_student_ids: [...attendance.unmarked]\n                })\n                return\n            }\n        }\n    }\n\n    fetchData() {\n        const date = formatDate(new Date())\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance?date=${date}&class_id=${this.props.class.class_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then(res => res.json())\n        .then(resJson => {\n            for (var key in resJson) {\n                // {student_id}: [in_time, out_time, excuse_type]\n                if(resJson[key][0] !== null) {\n                    this.props.markPresent(key, resJson[key][0])\n                }\n                else if (resJson[key][2] !== null) {\n                    this.props.markAbsent(key, resJson[key][2])\n                }\n            }\n            this.setState({\n                selected_student_ids: [...this.props.attendance.unmarked]\n            })\n        })\n        .catch(err => console.log('err: ', err))\n    }\n\n    handleOnClick(student_id) {\n        this.props.showModal(student_id)\n    }\n\n    render() {\n        // TODO: on unmount, clear redux\n        // TODO: way to automatically update absent whenever parents send absense request\n        // TODO: what to display on homepage vs what to display in other pages after teachers\n        //          click into the attendance status(present, absent, or not yet)\n        // console.log(this.props.attendance)\n        // console.log(this.props.class.students)\n        return (\n            <Card style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                <CardItem>\n                    <Text style={{ fontSize: 30 }}>出席狀況</Text>\n                </CardItem>\n\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>出席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#dcf3d0'\n                            }}\n                            underlayColor='#00c07f'\n                            onPress={() => this.onSelectAttendanceType('present')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.present.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>缺席</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#ffe1d0'\n                            }}\n                            underlayColor='#fa625f'\n                            onPress={() => this.onSelectAttendanceType('absent')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.absent.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingLeft: 5, paddingTop: 5}}>\n                            <Text>未知</Text>\n                        </View>\n                        <TouchableHighlight\n                            style={{\n                                flex: 1,\n                                alignSelf: 'center',\n                                width: '70%',\n                                height: '70%',\n                                backgroundColor: '#fff1b5'\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.onSelectAttendanceType('unmarked')}\n                        >\n                            <Text \n                                style={{ flex: 1, width: '100%', textAlign: 'center', fontSize: 60 }}\n                                adjustsFontSizeToFit={true}\n                            >\n                                {this.props.attendance.unmarked.size}\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', flexWrap: 'wrap' }}>\n                    {this.state.selected_student_ids.map((student_id) => {\n                        const { present, unmarked, absent } = this.props.attendance\n                        return (\n                            <TouchableHighlight\n                                key={student_id}\n                                style={{ width: '31%', margin: '1%'}}\n                                underlayColor='transparent'\n                                onPress={() => this.handleOnClick(student_id)}\n                            >\n                                <View style={styles.cardContainer}>\n                                    <Card>\n                                        <CardItem style={{ justifyContent: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={{\n                                                        height: 200,\n                                                        width: 200,\n                                                        borderRadius: 100,\n                                                        borderWidth: 10,\n                                                        borderColor:\n                                                            present.has(student_id) ? '#dcf3d0'\n                                                                : unmarked.has(student_id) ? '#fff1b5'\n                                                                    : '#ffe1d0'\n                                                    }}\n                                                />\n                                        </CardItem>\n                                        <CardItem\n                                            footer\n                                            style={{ justifyContent: 'center', marginTop: -5 }}\n                                        >\n                                            <Text style={{ marginTop: -10 }}>{this.props.class.students[student_id].name}</Text>\n                                        </CardItem>\n                                    </Card>\n                                </View>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        paddingVertical: 5\n    },\n    thumbnailImage: {\n        height: 80,\n        width: 80,\n        borderRadius: 40\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        attendance: state.attendance,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markAbsent, markPresent}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (AttendanceCard)","import React from 'react'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { initializeRequests } from '../../redux/school/actions/index'\nimport { formatHourMinute } from '../util'\n\nclass MedicationReqeustCard extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            timerId: null\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData()\n    }\n\n    fetchData() {\n        const d = new Date()\n        const date = d.getFullYear() + '-' + (d.getMonth() + 1) + '-' + d.getDate()\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/medicationrequest?date=' + date + '&class_id=' + this.props.class_id, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                const { requests, finished, unfinished } = data\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('托藥單取不完整，請和工程師聯繫' + message)\n                    return\n                }\n                this.props.initializeRequests(requests, finished, unfinished)\n            })\n            .catch(err => {\n                alert('Error, please try again 托藥單取不完整，請和工程師聯繫：' + err.message)\n            })\n    }\n\n    render() {\n        const { students } = this.props\n        const { requests, unfinished } = this.props.medication_requests\n        // console.log('this.props.medication_requests: ', this.props.medication_requests)\n        return (\n            <Card style={{ flex: 1, width: '90%'}}>\n                <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                    <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>托藥單</Text>\n                    <TouchableHighlight\n                        style={{\n                            width: '25%',\n                            alignSelf: 'flex-end',\n                            position: 'absolute',\n                            padding: 5,\n                            backgroundColor: '#b5e9e9'\n                        }}\n                        onPress={() => {\n                            this.props.navigation.push('TeacherMedicineLog', {\n                                request_id: null\n                            })\n                        }}\n                    >\n                        <Text style={styles.button_text}>查看</Text>\n                    </TouchableHighlight>\n                </View>\n                <View style={{ }}>\n                    <ScrollView horizontal={true}>\n                        {unfinished.map((request_id) => {\n                            const { student_id, timestamp, medication, note, administered, teacher_id } = requests[request_id]\n                            const time = formatHourMinute(new Date(timestamp))\n                            return (\n                                <TouchableHighlight\n                                    key={request_id}\n                                    style={{ flex: 1, margin: 3 }}\n                                    onPress={() => {\n                                        this.props.navigation.push('TeacherMedicineLog', {\n                                            request_id\n                                        })\n                                    }}\n                                >\n                                    <Card style={{ flex:1, alignItems: 'center', paddingHorizontal: 15 }}>\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Text style={{ fontSize: 35 }}>{time}</Text>\n                                        </View>\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                source={\n                                                    students[student_id].profile_picture === '' ?\n                                                        require('../../assets/icon-thumbnail.png')\n                                                        : {uri: students[student_id].profile_picture} \n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View\n                                            style={{ justifyContent: 'center' }}\n                                        >\n                                            <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                                        </View>\n                                    </Card>\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\n// const mapStateToProps = (state) => {\n//     return {\n//         medication_requests: state.medicationrequests\n//     }\n// }\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ initializeRequests }, dispatch)\n    }\n}\n\nexport default connect(null, mapDispatchToProps, null, { forwardRef: true }) (MedicationReqeustCard)","import React from 'react'\nimport { View, Text, ActivityIndicator } from 'react-native'\n\nexport default class Reloading extends React.Component{\n    render() {\n        return (\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                <Text>Loading...</Text>\n                <ActivityIndicator size=\"large\"></ActivityIndicator>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { formatDate } from '../util'\nimport Reloading from '../reloading'\nimport { addPickupRequest } from '../../redux/school/actions/index'\nimport { bindActionCreators } from 'redux'\n\nclass PickupAlert extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = {\n            color: '#ffe1d0',\n            // alertForPickup: false,\n            requestQueue: [],\n            isLoading: true\n        }\n        this.onConfirm = this.onConfirm.bind(this)\n    }\n\n    componentDidMount() {\n        // const { requestQueue } = this.props.route.params\n        // if (requestQueue.length > 0) {\n        //     this.setState({\n        //         requestQueue,\n        //         isLoading: false\n        //     })\n            this.timeoutId = this.timer()\n        // } else {\n        //     this.props.navigation.goBack()\n        // }\n    }\n\n    timer = () => setTimeout(() => {\n        this.setState({ color: this.state.color === '#ffe1d0' ? '#fa625f' : '#ffe1d0' })\n        this.timeoutId = this.timer()\n        }, 2000\n    )\n\n    // fetchData() {\n    //     const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance/pickup-request?school_id=${this.props.school_id}`\n    //     fetch(query, {\n    //         method: 'GET',\n    //         headers: {\n    //             Accept: 'application/json',\n    //             'Content-Type': 'application/json'\n    //         }\n    //     })\n    //         .then(res => res.json())\n    //         .then(resJson => {\n    //             if (resJson.data.length > 0) {\n    //                 this.timeoutId = this.timer()\n    //             }\n    //             this.setState({\n    //                 alertForPickup: resJson.data.length === 0 ? false : true,\n    //                 requestQueue: resJson.data\n    //             })\n    //         })\n    //         .catch(err => {\n    //             console.log('err: ', err)\n    //         })\n    // }\n\n    onConfirm(request_id, index) {\n        const pick_up_request = [...this.props.pick_up_request]\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/attendance/pickup-request?request_id=${request_id}`\n        fetch(query, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // TODO: error handling\n                const { statusCode, message } = resJson\n                if (statusCode === 200) {\n                    pick_up_request.splice(index, 1)\n                    this.props.addPickupRequest(pick_up_request)\n                    if (pick_up_request.length === 0) {\n                        // clearTimeout(this.timeoutId)\n                        this.props.navigation.goBack()\n                    }\n                } else {\n                    Alert.alert(\n                        'Sorry 取得接回通知資料時電腦出狀況了！',\n                        '請截圖和與工程師聯繫 ' + message,\n                        [{ text: 'Ok' }]\n                    )\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId)\n    }\n\n    render() {\n        const { pick_up_request, students } = this.props\n        // if (this.state.isLoading) {\n        //     return <Reloading />\n        // } else {\n            // const request = this.state.requestQueue[0]\n            // const student = this.props.students[request['student_id']]\n            return (\n                <View style={{\n                    flex: 1,\n                    flexDirection: 'row',\n                    // backgroundColor: 'transparent',\n                    justifyContent: 'space-evenly',\n                    alignItems: 'center',\n                    flexWrap: 'wrap'\n                    // zIndex: 2,\n                    // position: 'absolute',\n                    // width: '100%',\n                    // height: '100%'\n                }}>\n                    {pick_up_request.map((request, index) => {\n                        const { id, student_id, arrival_time } = request\n                        const student = students[student_id]\n                        return(\n                            <View\n                                key={index}\n                                style={{\n                                    // flex: 1,\n                                    width: '45%',\n                                    height: '45%',\n                                    marginTop: '5%',\n                                    backgroundColor: this.state.color,\n                                    // zIndex: 3,\n                                    // position: 'absolute'\n                                }}\n                            >\n                                <View style={{ flex: 2, alignItems: 'center', justifyContent: 'center' }}>\n                                    <Image\n                                        source={{uri: student.profile_picture }}\n                                        style={{\n                                            width: '80%',\n                                            aspectRatio: 1\n                                        }}\n                                    />\n                                </View>\n                                <View style={{ flex: 1 }}>\n                                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                                        <Text style={{ fontSize: 80, textAlign: 'center' }}>{arrival_time}</Text>\n                                    </View>\n                                    <View style={{ flex: 1 }}>\n                                        <TouchableHighlight\n                                            style={{\n                                                backgroundColor: 'grey',\n                                                padding: 15,\n                                                alignSelf: 'flex-end',\n                                                justifyContent: 'center',\n                                                marginRight: 15\n                                            }}\n                                            onPress={() => this.onConfirm(id, index)}\n                                        >\n                                            <Text style={{ fontSize: 35, textAlign: 'center', color: 'lightgrey' }}>確認</Text>\n                                        </TouchableHighlight>\n                                    </View>\n                                </View>\n                            </View>\n                        )\n                    })}\n                </View>\n            )\n        // }\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        students: state.school.students,\n        pick_up_request: state.school.pick_up_request\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ addPickupRequest }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (PickupAlert)","import React from 'react'\nimport { View, TouchableHighlight, Text, Platform, Picker, ActionSheetIOS } from 'react-native'\nimport { ActionSheet } from 'native-base'\n\nexport default class PickerComponent extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      selectedIndex: 0\n    }\n  }\n\n  isIOS() {\n    if (Platform.OS === 'ios') {\n      return true\n    } else return false\n  }\n\n  showActionSheet() {\n    // this.props.handleOnClick()\n    // if (this.isIOS()) {\n    //   this.iosShowActionSheet()\n    // } else { // android\n    //   this.androidShowActionSheet()\n    // }\n  }\n\n  iosShowActionSheet() {\n    const { options } = this.props\n    ActionSheetIOS.showActionSheetWithOptions(\n      {\n        options,\n        cancelButtonIndex: options.length-1\n      },\n      (buttonIndex) => {\n        this.setState({\n          selectedIndex: buttonIndex\n        })\n        this.props.handleSelectValue(options[buttonIndex])\n      }\n    )\n  }\n\n  androidShowActionSheet() {\n    const { options } = this.props\n    ActionSheet.show(\n      {\n        options,\n        cancelButtonIndex: options.length-1\n      },\n      buttonIndex => {\n        this.setState({ selectedIndex: buttonIndex })\n        this.props.handleSelectValue(options[buttonIndex])\n      }\n    )\n  }\n\n  isOtherSelected() {\n    const { selectedValue, options } = this.props\n    const index = options.indexOf(selectedValue)\n    if (index < 0) return true\n    return false\n  }\n\n  render() {\n    const { selectedValue, style, textStyle, disabled } = this.props\n    return (\n      <TouchableHighlight\n        disabled={disabled}\n        style={style}\n        onPress={() => this.props.showSelect()}\n      >\n        <Text style={textStyle}>{selectedValue}</Text>\n      </TouchableHighlight>\n    )\n  }\n}","import React from 'react'\nimport { View, TextInput, Text } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { addHealthStatus, addTemperature } from '../../redux/school/actions/index'\nimport PickerComponent from '../picker'\n\nclass WellnessForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      other_option: ''\n    }\n  }\n\n  handleSelectStatus(student_id, record_id, status) {\n    if (status === 'Cancel') {\n      return\n    } else if (status === '其他') {\n      this.setState({\n        other_option: '其他'\n      })\n    } else {\n      this.props.addHealthStatus(student_id, record_id, status, this.props.teacher_id)\n    }\n  }\n\n  handleTempInput(student_id, record_id, temperature) {\n    const normalized_temperature = \n      temperature.slice(-1) === '.' ?\n        temperature.slice(0,2)\n        :\n      temperature.length === 3 ? \n        temperature.slice(0,2) + '.' + temperature.slice(-1)\n        : temperature\n    this.props.addTemperature(student_id, record_id, normalized_temperature, this.props.teacher_id)\n  }\n\n  render() {\n    const { student_id, record_id, records, records_with_error, autoFocus } = this.props\n    const wellness_data = records[record_id]\n    return (\n      <View\n        style={{\n          flex: 1,\n          flexDirection: 'row',\n          alignItems: 'center',\n          justifyContent: 'center',\n          borderWidth: 2,\n          borderColor: records_with_error.has(record_id) ? 'red' : 'transparent'\n        }}\n      >\n        <View \n          style={{ \n            flex: 1, \n            flexDirection: 'row', \n            backgroundColor: 'rgba(255,255,255, 0.5)', \n            marginRight: '10%', \n            justifyContent: 'center',\n            padding: 5\n          }}\n        >\n          <TextInput\n            style={{ fontSize: 40 }}\n            autoFocus={autoFocus}\n            keyboardType='decimal-pad'\n            placeholder='體溫'\n            value={'' + wellness_data.temperature}\n            onChangeText={(temp) => { this.handleTempInput(student_id, record_id, temp) }}\n          />\n          {wellness_data.temperature === '' ? null : <Text style={{ fontSize: 30 }}>°</Text>}\n        </View>\n        <View style={{ flex: 2 }}>\n          {this.state.other_option === '' ? \n            <PickerComponent\n              style={{ \n                backgroundColor: 'rgba(255,255,255, 0.5)',\n                alignItems: 'center',\n                padding: 5\n              }}\n              textStyle={{fontSize: 40}}\n              selectedValue={wellness_data.status}\n              options={[\n                \"健康寶寶\",\n                \"發燒\",\n                \"喉嚨偏紅\",\n                \"咳嗽\",\n                \"流⿐涕\",\n                \"頭痛\",\n                \"活動⼒不佳\",\n                \"嘔吐\", \n                \"糞便帶有⾎絲\",\n                \"拉肚子\",\n                \"其他\",\n                \"Cancel\"\n              ]}\n              handleOnClick={() => { }}\n              handleSelectValue={(status) => this.handleSelectStatus(student_id, record_id, status)}\n            />\n          : <TextInput\n              style={{ \n                fontSize: 40,\n                backgroundColor: 'rgba(255,255,255, 0.5)',\n                alignItems: 'center',\n                padding: 2\n              }}\n              keyboardType='default'\n              autoFocus={this.state.other_option !== ''}\n              selectTextOnFocus={true}\n              // placeholder=''\n              value={wellness_data.status}\n              onChangeText={(status) => { this.handleSelectStatus(student_id, record_id, status) }}\n              onBlur={() => this.setState({ other_option: ''})}\n            />\n          }\n        </View>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      // class: state.classInfo,\n    records: state.healthstatus.records,\n    records_with_error: state.healthstatus.records_with_error\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      ...bindActionCreators({\n          addHealthStatus,\n          addTemperature,\n      }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (WellnessForm)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate, post } from '../util'\nimport { sendWellnessDataFail, sendWellnessDataSuccess } from '../../redux/school/actions/index'\n\nclass StudentModal extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n        class_id: ''\n    }\n  }\n\n  componentDidMount() {\n    const { class_id, student_id } = this.props\n    if (class_id === 'all') {\n      this.getClassIdByStudentId(student_id)\n    } else {\n      this.setState({ class_id })\n    }\n  }\n\n  getClassIdByStudentId(student_id) {\n      const { classes } = this.props\n      const id = Object.keys(classes)\n      var class_id_found = ''\n      for(var i = 0; i < id.length; i++) {\n          const {students} = classes[id[i]]\n          for(var j = 0; j < students.length; j++) {\n              if (students[j] === student_id) {\n                  class_id_found = id[i]\n              }\n          }\n      }\n\n      this.setState({\n          class_id: class_id_found\n      })\n  }\n\n  async handleSend(record_id) {\n    const { wellness, isConnected } = this.props\n    const { class_id } = this.state\n    const { records } = wellness\n    const record = records[record_id]\n    if (record.temperature === '') {\n      Alert.alert(\n        '未填寫!',\n        '',\n        [{text: 'OK'}]\n      )\n      return\n    }\n\n    if (!isConnected) {\n        Toast.show({\n            text: '拍謝 網路連不到! 等一下再試試看',\n            buttonText: 'Okay',\n            position: \"top\",\n            type: \"warning\",\n            duration: 2000\n        })\n    }\n\n    const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n    if (sendDataResult.success) {\n        this.props.fetchStudentAttendance()\n        this.props.sendWellnessDataSuccess()\n        this.props.hideModal()\n    } else {\n      this.props.sendWellnessDataFail(sendDataResult.message)\n    }\n  }\n\n  async markAbsent() {\n    const { student_id, school_id } = this.props\n    const { class_id } = this.state\n    const body = {\n      student_id,\n      class_id,\n      school_id,\n      startDate: formatDate(new Date()),\n      endDate: formatDate(new Date()),\n      excuse_type: 'none-medical',\n      note: '校方填寫'\n    }\n    const response = await post('/absence-excuse', body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        Alert.alert(\n            'Sorry 標記學生缺席時電腦出狀況了！',\n            '請截圖和與工程師聯繫\\n\\n' + message,\n            [{ text: 'Ok' }]\n        )\n        return \n    }\n    this.props.fetchStudentAttendance()\n    this.props.hideModal()\n  }\n\n  render() {\n    const { show, student_id, teacher_id, students, student_unmarked, student_absent, teacherOnDuty } = this.props\n    const student = students[student_id]\n    const { wellness } = this.props\n    const record_id = wellness.by_student_id[student_id][0]\n    return (\n        <View\n          style={{\n            flex: 1,\n            width: '80%',\n            height: '70%',\n            backgroundColor:\n                student_absent.has(student_id) ? '#ffe1d0'\n                : student_unmarked.has(student_id) ? '#fff1b5'\n                : '#dcf3d0',\n            zIndex: 3,\n            position: 'absolute'\n          }}\n        >\n          <View style={{ flex: 2, flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center' }}>\n            <View style={{ flex: 1, alignItems: 'center' }}>\n              <Image\n                source={\n                  student.profile_picture === '' ?\n                      require('../../assets/icon-thumbnail.png')\n                      : {uri: student.profile_picture }\n              }\n                style={styles.thumbnailImage}\n              />\n            </View>\n            <View style={{ flex: 1, alignItems: 'flex-start' }}>\n              <Text style={{ fontSize: 60 }}>{student.name}</Text>\n              <TouchableHighlight\n                style={{ padding: 10, backgroundColor: 'lightgrey', justifyContent: 'center' }}\n                onPress={() => this.markAbsent()}\n              >\n                <Text style={{ fontSize: 40 }}>缺席</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n          \n          <View style={{ flex: 2 }}>\n            <View style={{ flex: 3, alignItems: 'center' }}>\n              <Text style={{ fontSize: 20 }}>血型: {student.blood_type} </Text>\n              <Text style={{ fontSize: 20 }}>地址: {student.address}</Text>\n              <Text style={{ fontSize: 20 }}>家裡電話: {student.home_phone}</Text>\n              <Text style={{ fontSize: 20 }}>（父）手機: {student.father_phone}</Text>\n              <Text style={{ fontSize: 20 }}>（母）手機: {student.mother_phone}</Text>\n            </View>\n            <View style={{ flex: 1, flexDirection: 'row', paddingHorizontal: 30 }}>\n              {student_unmarked.has(student_id) ? \n                <WellnessForm\n                  student_id={student_id}\n                  teacher_id={teacherOnDuty}\n                  record_id={record_id}\n                  autoFocus={true}\n                />\n              : null}\n            </View>\n          </View>\n\n          <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n            {student_unmarked.has(student_id) ?\n              <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'red', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={this.props.hideModal}\n                >\n                  <Text style={{ fontSize: 30 }}>取消</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'grey', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={() => this.handleSend(record_id)}\n                >\n                  <Text style={{ fontSize: 30 }}>送出</Text>\n                </TouchableHighlight>\n              </View>\n              : null\n            }\n          </View>\n        </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    // school: state.school,\n    classes: state.school.classes,\n    student_absent: state.school.student_absent,\n    student_unmarked: state.school.student_unmarked,\n    students: state.school.students,\n    wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({ sendWellnessDataFail, sendWellnessDataSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (StudentModal)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, TextInput } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate, post, formatTime, put } from '../util'\nimport { markPresent, sendWellnessDataFail, editTeacherOnDuty } from '../../redux/school/actions/index'\n\nclass TeacherModal extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n        temperature: ''\n    }\n  }\n\n  editTemperature(temperature) {\n    const normalized_temperature = \n      temperature.slice(-1) === '.' ?\n        temperature.slice(0,2)\n        :\n      temperature.length === 3 ? \n        temperature.slice(0,2) + '.' + temperature.slice(-1)\n        : temperature\n      this.setState({ temperature: normalized_temperature })\n  }\n\n  clock() {\n    const { isConnected, teacher_id, teachers } = this.props\n    const teacher = teachers[teacher_id]\n\n    if (!isConnected) {\n      Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n      })\n      return\n    }\n\n    if (teacher.present) {\n      const attendance_id = teacher.attendance[teacher.attendance.length - 1]\n      this.clockout(attendance_id)\n    } else {\n      this.clockin()\n    }\n  }\n\n  async clockout(attendance_id) {\n    const response = await put(`/staff-attendance/${attendance_id}`, {\n      out_time: formatDate(new Date()) + ' ' + formatTime(new Date())\n  })\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      Alert.alert(\n        'Sorry 打卡時電腦出狀況了！',\n        '請截圖和與工程師聯繫\\n\\n' + message,\n        [{ text: 'Ok' }]\n      )\n    }\n\n    this.props.fetchTeacherAttendance()\n    this.props.hideModal()\n  }\n\n  async clockin() {\n    const { isConnected, teacher_id } = this.props\n    const { temperature } = this.state\n\n    if (!isConnected) {\n        Toast.show({\n            text: '拍謝 網路連不到! 等一下再試試看',\n            buttonText: 'Okay',\n            position: \"top\",\n            type: \"warning\",\n            duration: 2000\n        })\n    }\n\n    const response = await post('/staff-attendance', {\n        teacher_id,\n        in_time: formatDate(new Date()) + ' ' + formatTime(new Date()),\n        temperature: temperature ? temperature : 0\n    })\n\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        Alert.alert(\n            'Sorry 打卡時電腦出狀況了！',\n            '請截圖和與工程師聯繫\\n\\n' + message,\n            [{ text: 'Ok' }]\n        )\n        return \n    }\n    this.props.fetchTeacherAttendance()\n    this.props.hideModal()\n  }\n\n  editTeacherOnDuty(teacher_id) {\n    const { teacherOnDuty, teachers } = this.props\n    var name = '未登入'\n    if (teacherOnDuty === teacher_id) {\n      this.props.editTeacherOnDuty('')\n    } else {\n      this.props.editTeacherOnDuty(teacher_id)\n      name = teachers[teacher_id].name\n    }\n    \n    this.props.navigation.setOptions({ \n        headerRight: () => (\n            <View style={{ paddingRight: 20 }}>\n                <Text style={{ fontSize: 30 }}>{`值班老師：${name}`}</Text>\n            </View>\n        )\n    })\n  }\n\n  // getTotalTime(record) {\n  //   const { teacher_id, teachers, attendance } = this.props\n  //   let total_hour = 0\n  //   let total_min = 0\n  //   for(var i = 0; i < teachers[teacher_id].attendance.length; i++){\n  //     const { in_time, out_time } = attendance[teachers[teacher_id].attendance[i]]\n  //     total_hour += parseInt(in_time)\n  //     total_min +=\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, teachers, unmarked, absent, teacherOnDuty, attendance } = this.props\n    const { temperature } = this.state\n    const teacher = teachers[teacher_id]\n    // console.log('teacher: ', teacher)\n    // const { wellness } = this.props\n    // const record_id = wellness.by_student_id[student_id][0]\n    // TODO: temperature\n    return (\n        <View\n          style={{\n            flex: 1,\n            width: '80%',\n            height: '70%',\n            backgroundColor:\n              absent.has(teacher_id) ? '#ffe1d0'\n                : unmarked.has(teacher_id) ? '#fff1b5'\n                : '#dcf3d0',\n            zIndex: 3,\n            position: 'absolute'\n          }}\n        >\n          <View style={{ flex: 3, flexDirection: 'row', justifyContent: 'space-evenly', alignItems: 'center' }}>\n            <View style={{ flex: 1, alignItems: 'center' }}>\n              <Image\n                source={\n                    teacher.profile_picture === '' ?\n                      require('../../assets/icon-teacher-thumbnail.png')\n                      : {uri: teacher.profile_picture }\n              }\n                style={styles.thumbnailImage}\n              />\n              <TextInput\n              style={{ fontSize: 60 }}\n              keyboardType='decimal-pad'\n              placeholder='體溫'\n              value={'' + temperature}\n              onChangeText={(temperature) => this.editTemperature(temperature)}\n          />\n            </View>\n            <View style={{ flex: 1 }}>\n              <Text style={{ fontSize: 60 }}>{teacher.name}</Text>\n              <TouchableHighlight\n                onPress={() => this.editTeacherOnDuty(teacher_id)}\n                underlayColor='transparent'\n              >\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <Image\n                    source={teacherOnDuty === teacher_id ? \n                      require('../../assets/icon-checked-box.png')\n                    : require('../../assets/icon-unchecked-box.png')}\n                    style={{ width: 80, aspectRatio: 1 }}\n                  />\n                  <Text style={{ fontSize: 40 }}>值班老師</Text>\n                </View>\n              </TouchableHighlight>\n            </View>\n          </View>\n          \n          <View style={{ flex: 2, paddingHorizontal: 30, justifyContent: 'space-evenly', alignItems: 'center' }}>\n            {teacher.attendance && teacher.attendance.map((attendance_id) => {\n              const record = attendance[attendance_id]\n              return (\n                <View key={attendance_id} style={{ flex: 1, flexDirection: 'row', width: '60%', justifyContent: 'space-around' }}>\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 50 }}>{record.in_time}</Text>\n                  </View>\n                  <View style={{ flex: 1 }}>\n                    <Text style={{ fontSize: 50 }}>{record.out_time}</Text>\n                  </View>\n                </View>\n              )\n            })}\n\n            {/* <TouchableHighlight\n              style={{ backgroundColor: 'red', flex: 1, height: 60, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n              onPress={() => this.clock()}\n            >\n              <Text style={{ fontSize: 30 }}>打卡</Text>\n            </TouchableHighlight> */}\n            <View style={{ flexDirection: 'row', alignSelf: 'flex-end',  backgroundColor: 'white', padding: 10 }}>\n              <Text style={{ fontSize: 25}}>今日總計: {Math.round(teacher.total_minutes*100) / 100}</Text>\n            </View>\n          </View>\n\n          <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n            {/* {unmarked.has(teacher_id) ? */}\n              <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'red', flex: 1, height: 80, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={this.props.hideModal}\n                >\n                  <Text style={{ fontSize: 40 }}>取消</Text>\n                </TouchableHighlight>\n                <TouchableHighlight\n                  style={{ backgroundColor: 'grey', flex: 1, height: 80, justifyContent: 'center', alignItems: 'center', margin: 8 }}\n                  onPress={() => this.clock()}\n                >\n                  <Text style={{ fontSize: 40 }}>打卡</Text>\n                </TouchableHighlight>\n              </View>\n              {/* : null\n            } */}\n          </View>\n        </View>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    attendance: state.school.attendance,\n    teachers: state.school.teachers,\n    teacherOnDuty: state.school.teacherOnDuty,\n    unmarked: state.school.teacher_unmarked,\n    absent: state.school.teacher_absent,\n    // wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail, editTeacherOnDuty}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherModal)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport WellnessForm from './wellnessform'\nimport { sendWellnessData, formatDate } from '../util'\nimport { markPresent, sendWellnessDataFail } from '../../redux/school/actions/index'\nimport StudentModal from './studentmodal'\nimport TeacherModal from './teachermodal'\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  // async handleSend(record_id) {\n  //   const { wellness, class_id, isConnected } = this.props\n  //   const { records } = wellness\n  //   const record = records[record_id]\n  //   if (record.temperature === '') {\n  //     Alert.alert(\n  //       '未填寫!',\n  //       '',\n  //       [{text: 'OK'}]\n  //     )\n  //     return\n  //   }\n\n  //   if (!isConnected) {\n  //       Toast.show({\n  //           text: '拍謝 網路連不到! 等一下再試試看',\n  //           buttonText: 'Okay',\n  //           position: \"top\",\n  //           type: \"warning\",\n  //           duration: 2000\n  //       })\n  //   }\n\n  //   const sendDataResult = await sendWellnessData(wellness, class_id, formatDate(new Date()))\n  //   if (sendDataResult.success) {\n  //     sendDataResult.data.forEach(student_id => {\n  //       this.props.markPresent(student_id, new Date)\n  //     })\n  //   } else {\n  //     this.props.sendWellnessDataFail(sendDataResult.message)\n  //   }\n  // }\n\n  render() {\n    const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id, school_id } = this.props\n    if (!show) {\n      return null\n    }\n    const student = students[student_id]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        behavior='height'\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={this.props.hideModal}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        {student_id !== '' ?\n          <StudentModal\n            student_id={student_id}\n            // teacher_id={teacher_id}\n            teacherOnDuty={teacherOnDuty}\n            class_id={class_id}\n            school_id={school_id}\n            // unmarked={unmarked}\n            // absent={absent}\n            fetchStudentAttendance={() => this.props.fetchStudentAttendance()}\n            hideModal={this.props.hideModal}\n          />\n          : <TeacherModal \n              teacher_id={teacher_id}\n              teacherOnDuty={teacherOnDuty}\n              navigation={this.props.navigation}\n              // class_id={class_id}\n              // unmarked={unmarked}\n              // absent={absent}\n              fetchTeacherAttendance={() => this.props.fetchTeacherAttendance()}\n              hideModal={this.props.hideModal}\n            />\n        }\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.classInfo.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({markPresent, sendWellnessDataFail}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)","import React from 'react'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card, CardItem, Button, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { getParentMessageSuccess } from '../../redux/school/actions/index'\nimport { formatHourMinute, get, formatDate } from '../util'\n\nclass InboxCard extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            messages: []\n        }\n    }\n\n    componentDidMount() {\n        const { date } = this.props\n        this.fetchData(new Date(date))\n    }\n\n    componentDidUpdate(prevProps) {\n        if(prevProps.date !== this.props.date) {\n            const { date } = this.props\n            this.fetchData(new Date(date))\n        }\n    }\n\n    async fetchData(date) {\n        const { class_id } = this.props\n        // let yesterday = new Date()\n        // yesterday.setDate(yesterday.getDate() - 1)\n        // const date = new Date()\n        // console.log('date: ', date)\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            // Toast.show({\n            //     text: '網路連線連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     position: \"top\",\n            //     type: \"danger\",\n            //     duration: 4000\n            // })\n            alert('網路連線連不到! 等一下再試試看')\n            return\n        }\n\n        const response = await get(`/message/class/${class_id}/unread?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                `Sorry 取得家長訊息時電腦出狀況了！`,\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n            )\n            return \n        }\n        this.setState({ messages: data })\n        this.denormalize(data)\n    }\n\n    denormalize(messages) {\n        let denormalized = {}\n        for(var i = 0; i < messages.length; i++) {\n            denormalized[messages[i].student_id] = messages[i].message_for_teacher\n        }\n        // console.log('denormalized: ', denormalized)\n        this.props.getParentMessageSuccess(denormalized)\n    }\n\n    messageIsRead(message_read, morning_reminder_read) {\n        if (message_read !== null && !message_read) return false\n        if (morning_reminder_read !== null && !morning_reminder_read) return false\n        return true\n    }\n\n    render() {\n        const { students, class_id, date } = this.props\n        const { messages } = this.state\n        // const { requests, unfinished } = this.props.medication_requests\n        const viewing_previous = date.toDateString() !== (new Date()).toDateString()\n        return (\n            <Card style={{ flex: 1, width: '90%'}}>\n                <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                    <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>訊息</Text>\n                    <TouchableHighlight\n                        style={{\n                            width: '25%',\n                            alignSelf: 'flex-end',\n                            position: 'absolute',\n                            padding: 5,\n                            backgroundColor: '#b5e9e9'\n                        }}\n                        onPress={() => {\n                            this.props.navigation.push('Inbox', {\n                                messages,\n                                students,\n                                class_id,\n                                date,\n                                onGoBack: (date) => this.fetchData(date)\n                            })\n                        }}\n                    >\n                        <Text style={styles.button_text}>查看</Text>\n                    </TouchableHighlight>\n                </View>\n                <View style={{ }}>\n                    <ScrollView horizontal={true}>\n                        {messages.map((message, index) => {\n                            const { activities, items_to_bring, message_for_teacher, other_activity, other_item, \n                                student_id, teacher_id, text, message_read, morning_reminder_read  } = message\n                            if (this.messageIsRead(message_read, morning_reminder_read) && !viewing_previous) return null\n                            return (\n                                <TouchableHighlight\n                                    key={index}\n                                    style={{ flex: 1, margin: 3 }}\n                                    onPress={() => {\n                                        this.props.navigation.push('Inbox', {\n                                            messages,\n                                            students,\n                                            class_id,\n                                            date,\n                                            onGoBack: (date) => this.fetchData(date)\n                                        })\n                                    }}\n                                >\n                                    <Card style={{ flex:1, alignItems: 'center', padding: 15 }}>\n                                        {/* <View style={{ justifyContent: 'center' }}>\n                                            <Text style={{ fontSize: 35 }}>{time}</Text>\n                                        </View> */}\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                source={\n                                                    students[student_id].profile_picture === '' ?\n                                                        require('../../assets/icon-thumbnail.png')\n                                                        : {uri: students[student_id].profile_picture} \n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View\n                                            style={{ justifyContent: 'center' }}\n                                        >\n                                            <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                                        </View>\n                                    </Card>\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ getParentMessageSuccess }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (InboxCard)","import React from 'react'\nimport { View, Text, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card } from 'native-base'\nimport { connect } from 'react-redux'\nimport { beautifyTime } from '../util'\n\nclass AbsenceCard extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    render() {\n        const { class_students, students, student_absent, student_unmarked } = this.props\n        // console.log('this.props.medication_requests: ', this.props.medication_requests)\n        return (\n            <Card style={{ flex: 1, width: '90%'}}>\n                <View style={{ height: 80, justifyContent: 'center', marginTop: 5 }}>\n                    <Text style={{ fontSize: 30, alignSelf: 'center', position: 'absolute' }}>出席狀況</Text>\n                </View>\n                <View style={{ }}>\n                    <ScrollView horizontal={true}>\n                        {[...student_unmarked].map((student_id) => {\n                            const student = class_students[student_id]\n                            if (student === undefined) return\n                            return (\n                                <TouchableHighlight\n                                    key={student_id}\n                                    style={{ flex: 1, margin: 3 }}\n                                    onPress={() => {\n                                        this.props.showLoginNumberPad(student_id)\n                                    }}\n                                >\n                                    <Card style={{ flex:1, alignItems: 'center', paddingHorizontal: 15, padding: 10, backgroundColor: '#fff1b5' }}>\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                source={\n                                                    student.profile_picture === '' || student.profile_picture === null ?\n                                                        require('../../assets/icon-thumbnail.png')\n                                                        : {uri: student.profile_picture} \n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View\n                                            style={{ justifyContent: 'center' }}\n                                        >\n                                            <Text style={{ fontSize: 25 }}>{student.name}</Text>\n                                        </View>\n                                    </Card>\n                                </TouchableHighlight>\n                            )\n                        })}\n\n                        {[...student_absent].map((student_id) => {\n                            const student = class_students[student_id]\n                            if (student === undefined) return\n                            return (\n                                <TouchableHighlight\n                                    key={student_id}\n                                    style={{ flex: 1, margin: 3 }}\n                                    onPress={() => {\n                                        this.props.showLoginNumberPad(student_id)\n                                    }}\n                                >\n                                    <Card style={{ flex:1, alignItems: 'center', paddingHorizontal: 15, padding: 10, backgroundColor: '#ffe1d0' }}>\n                                        <View style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                source={\n                                                    student.profile_picture === '' ?\n                                                        require('../../assets/icon-thumbnail.png')\n                                                        : {uri: student.profile_picture} \n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View\n                                            style={{ justifyContent: 'center' }}\n                                        >\n                                            <Text style={{ fontSize: 25 }}>{student.name}</Text>\n                                        </View>\n                                    </Card>\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%',\n        flex: 1\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 30,\n    },\n    thumbnailImage: {\n        height: 150,\n        width: 150,\n        borderRadius: 75\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        attendance: state.school.attendance,\n        students: state.school.students,\n        student_absent: state.school.student_absent,\n        student_unmarked: state.school.student_unmarked\n    }\n}\n\nexport default connect(mapStateToProps, null) (AbsenceCard)","import React from 'react'\nimport { \n    View, \n    Text,\n    TouchableHighlight,\n    Dimensions,\n    Platform } from 'react-native'\nimport DatePicker from 'react-datepicker'\nimport \"react-datepicker/dist/react-datepicker.css\"\n\nconst { width } = Dimensions.get('window')\n\nexport default class TimeModal extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            datetime: new Date(),\n            isLoading: true\n            // max_date: (new Date()).setDate((new Date()).getDate() + 7)\n        }\n    }\n\n    componentDidMount() {\n        const { start_date } = this.props\n        this.setState({\n            datetime: start_date,\n            isLoading: false\n        })\n    }\n\n    isIOS() {\n        if (Platform.OS === 'ios') {\n          return true\n        } else return false\n      }\n\n    setDate(datetime) {\n        if (this.isIOS()) {\n            this.iosSetDate(datetime)\n        } else {\n            this.androidSetDate(datetime)\n        }\n        // if (datetime !== undefined) {\n        //     this.setState({datetime})\n        // } else {\n        //     this.props.hideModal()\n        // }\n    }\n\n    iosSetDate(datetime) {\n        this.setState({datetime})\n    }\n\n    androidSetDate(datetime) {\n        if (datetime !== undefined) {\n            this.props.selectDatetimeConfirm(datetime)\n        //     this.props.hideModal()\n        } else {\n            this.props.hideModal()\n        }\n        // this.props.hideModal()\n    }\n\n    selectDatetimeConfirm(date) {\n        // const { datetime } = this.state\n        this.props.selectDatetimeConfirm(date)\n        this.props.hideModal()\n    }\n\n    onChange = date => {\n        console.log(date)\n    }\n    \n    isWeekday = date => {\n        const special_date = new Date('September 26, 2020')\n        const day = date.getDay()\n        return (day !== 0 && day !== 6) || date.toDateString() === special_date.toDateString();\n    };\n\n    render() {\n        const { datetime_type, minDatetime, maxDatetime, minTime, maxTime, paddingVertical } = this.props\n        const { datetime, isLoading } = this.state\n        if (isLoading) {\n            return null\n        }\n        return (\n            <TouchableHighlight\n                style={{ \n                    width: '100%',\n                    height: '100%', \n                    zIndex: 2,\n                    position: 'absolute',\n                    paddingVertical,\n                    // justifyContent: 'center', \n                    alignItems: 'center', \n                    backgroundColor: 'rgba(0,0,0,0.7)' \n                }}\n                // onPress={() => this.props.hideModal()}\n            >\n                <View style={{ }}>\n                    {datetime_type === 'date' &&\n                        <DatePicker\n                            onChange={(date) => this.selectDatetimeConfirm(date)}\n                            inline\n                            selected={datetime}\n                            minDate={new Date(minDatetime)}\n                            maxDate={new Date(maxDatetime)}\n                            onClickOutside={() => this.props.hideModal()}\n                            filterDate={this.isWeekday}\n                        />\n                    }\n\n                    {datetime_type === 'time' && \n                        <DatePicker\n                            onChange={(time) => this.selectDatetimeConfirm(time)}\n                            showTimeSelect\n                            showTimeSelectOnly\n                            timeIntervals={30}\n                            timeCaption=\"Time\"\n                            dateFormat=\"h:mm aa\"\n                            selected={datetime}\n                            minTime={minTime}\n                            maxTime={maxTime}\n                            onClickOutside={() => this.props.hideModal()}\n                        />\n                    }\n                </View>\n            </TouchableHighlight>\n        )\n    }\n}","import React from 'react'\nimport { Text, Button, Container, Content, Toast} from 'native-base'\nimport { StyleSheet, View, AppState, Alert, TouchableHighlight, Image } from 'react-native'\nimport { setConnectState, initializeClass, setClassId, fetchStudentAttendanceSuccess, clearState } from '../../redux/school/actions/index'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport LoginNumberPad from './loginnumberpad'\nimport AttendanceCard from './attendancecard'\nimport MedicationReqeustCard from './medicationrequestcard'\nimport Reloading from '../reloading'\nimport PickupAlert from './pickupalert'\nimport Modal from './modal'\nimport NetInfo from '@react-native-community/netinfo'\nimport InboxCard from './inboxcard'\nimport { beautifyDate, formatDate, get } from '../util'\nimport AbsenceCard from './absencecard'\nimport TimeModal from '../parent/timemodal'\nimport ENV from '../../variables'\n\n// -api ping tai ying yung cheng shi jie mien\n\nclass TeacherHome extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            isLoading: true,\n            showLoginNumberPad: false,\n            pageClicked: '',\n            alertForPickup: false,\n            pickupQueue: [],\n            showModal: false,\n            modalStudentId: '',\n            modalTeacherId: '',\n            isAdmin: false,\n            admin_id: '',\n            appState: '',\n            showDateTimeModal: false\n        }\n        this.initializeClass = this.initializeClass.bind(this)\n        this.handleEnterPasscode = this.handleEnterPasscode.bind(this)\n        this.hideLoginPad = this.hideLoginPad.bind(this)\n        this.onConfirmPickup = this.onConfirmPickup.bind(this)\n        this.showModal = this.showModal.bind(this)\n        this.hideModal = this.hideModal.bind(this)\n    }\n\n    componentDidMount() {\n        this.initializeConnectionStatus()\n        const { class_id, class_name, isAdmin, admin_id } = this.props.route.params\n        this.setState({ isAdmin, admin_id })\n        this.props.setClassId(class_id)\n        this.initializeClass(class_id)\n        this.timeoutId = this.timer(class_id)\n        this.props.navigation.setOptions({ \n            title: class_name\n        })\n        this.fetchStudentAttendance()\n        AppState.addEventListener(\"change\", this._handleAppStateChange);\n    }\n\n    initializeConnectionStatus() {\n        if (window.navigator.onLine) {\n            this.setOnline()\n            window.addEventListener('online', (e) => { \n                console.log('online');\n                this.setOnline()\n            });\n            window.addEventListener('offline', (e) => {\n                console.log('offline'); \n                this.setOffline()\n            });\n        } else {\n            this.setOffline()\n        }\n    }\n\n    setOnline() {\n        this.props.setConnectState(true)\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    setOffline() {\n        this.props.setConnectState(false)\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#fa625f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    timer = (class_id) => setTimeout(() => {\n        this.poll(class_id)\n    }, 10000)\n\n    async poll(class_id) {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/class/${class_id}/updates`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => { // TODO: make sure to disable this polling for admin log in\n                // console.log('teacherhome/poll/resJson: ', resJson)\n                const update_types = resJson.data\n                update_types.forEach(type => {\n                    // console.log('type: ', type)\n                    if (type === 'attendance') {\n                        this.fetchStudentAttendance()\n                    } else {\n                        this.refs[type].fetchData(this.state.date)\n                    }\n                })\n            })\n            .catch(err => {\n                console.log('teacherhome poll err: ', err)\n            })\n        this.timeoutId = this.timer(class_id)\n    }\n\n    initializeClass(class_id) {\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/class/${class_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        }).then((res) => res.json())\n            .then((resJson) => {\n                console.log('teacherHome/resJson: ', resJson)\n                this.props.initializeClass(resJson.teachers, resJson.students)\n                this.setState({\n                    isLoading: false\n                })\n        }).catch(err => {\n            console.log('initializeClass err: ', err)\n        })\n    }\n\n    _handleAppStateChange = nextAppState => {\n        if (\n            this.state.appState.match(/inactive|background/) &&\n            nextAppState === \"active\"\n        ) {\n            if (this.state.date.toDateString() !== (new Date).toDateString()) {\n                this.setState({ isLoading: true })\n                // console.log('this.state.date.toDateString() !== (new Date).toDateString()')\n                const { class_id } = this.props.route.params\n                this.props.clearState()\n                this.props.setClassId(class_id)\n                this.initializeClass(class_id)\n                this.unsubscribe = NetInfo.addEventListener(state => {\n                    const {isConnected} = state\n                    this.props.setConnectState(isConnected)\n                    if (isConnected) {\n                        this.props.navigation.setOptions({ \n                            headerRight: () => (\n                                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n                            )\n                        })\n                    } else {\n                        this.props.navigation.setOptions({ \n                            headerRight: () => (\n                                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#fa625f', marginRight: 20 }} />\n                            )\n                        })\n                    }\n                });\n            }\n        }\n        this.setState({ appState: nextAppState, date: new Date() });\n    };\n\n    handleEnterPasscode(passcode) {\n        const { date } = this.state\n        const { passcodeAdminId, passcodeTeacherId, teachers } = this.props\n        const teacher_id = passcodeTeacherId[passcode] || passcodeAdminId[passcode]\n        const isAdmin = passcodeAdminId[passcode] !== undefined\n\n        if (teacher_id === undefined) {\n            Toast.show({\n                text: '密碼不正確!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 3000\n            })\n        } else if (this.state.pageClicked === 'attendance_modal') {\n            this.setState({\n                showModal: true,\n                showLoginNumberPad: false,\n                modalTeacherId: teacher_id\n            })\n        } else {\n            this.props.navigation.navigate(this.state.pageClicked, {\n                teacher_id: teacher_id,\n                class: this.props.class,\n                date,\n                isAdmin,\n                teacher_name: teachers[teacher_id].name\n            })\n            this.setState({ showLoginNumberPad: false })\n        }\n    }\n\n    pageClicked(pageClicked) {\n        const { isAdmin, admin_id, date } = this.state\n        if (isAdmin) {\n            this.props.navigation.push(pageClicked, {\n                class: this.props.class,\n                teacher_id: admin_id,\n                date,\n                isAdmin,\n                teacher_name: this.props.teachers[admin_id].name\n            })\n        } else {\n            this.setState({ showLoginNumberPad: true, pageClicked})\n        }\n    }\n\n    hideLoginPad() {\n        this.setState({ showLoginNumberPad: false })\n    }\n\n    onConfirmPickup() {\n        var newPickupQueue = this.state.pickupQueue.slice(1, this.state.pickupQueue.length)\n        this.setState({\n            alertForPickup: newPickupQueue.length === 0 ? false : true,\n            pickupQueue: newPickupQueue\n        })\n    }\n\n    showModal(student_id) {\n        this.setState({\n            showLoginNumberPad: true,\n            pageClicked: 'attendance_modal',\n            modalStudentId: student_id\n        })\n    }\n\n    async fetchStudentAttendance() {\n        const { class_id } = this.props.route.params\n        const date = formatDate(this.state.date)\n        const response = await get(`/attendance/class?class_id=${class_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                'Sorry 取得學生出席資料時電腦出狀況了！',\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n            )\n            return \n        }\n\n        const { attendance, students, present, absent } = data\n        this.props.fetchStudentAttendanceSuccess(attendance, students, present, absent)\n    }\n\n    hideModal() {\n        this.setState({\n            showModal: false\n        })\n    }\n\n    selectDatetimeConfirm(date) {\n        const { isAdmin } = this.state\n        if (!isAdmin || this.hasUnsentRecords()) return\n        this.setState({\n            date,\n            showDateTimeModal: false\n        })\n    }\n\n    goBackADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 1) {\n            date.setDate(date.getDate() - 3)\n        } else {\n            date.setDate(date.getDate() - 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    goForwardADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 5) {\n            date.setDate(date.getDate() + 3)\n        } else {\n            date.setDate(date.getDate() + 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    hasUnsentRecords() {\n        const { wellness_dispatched, message_dispatched, appetite_dispatched, sleep_dispatched, milk_dispatched, diaper_dispatched } = this.props\n        const all_data_dispatched = wellness_dispatched && message_dispatched && appetite_dispatched && sleep_dispatched && milk_dispatched && diaper_dispatched\n        if (all_data_dispatched) {\n            return false\n        }\n        return true\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId)\n        AppState.removeEventListener(\"change\", this._handleAppStateChange);\n        window.removeEventListener('online', console.log('removing online listener'))\n        window.removeEventListener('offline', console.log('removing offline listener'))\n        this.props.clearState()\n        // this.unsubscribe()\n    }\n\n    render() {\n        const { school_id, class_id } = this.props.route.params\n        const { isLoading, date, showModal, modalStudentId, modalTeacherId, showDateTimeModal, isAdmin } = this.state\n        const { wellness_dispatched, message_dispatched, appetite_dispatched, sleep_dispatched, milk_dispatched, diaper_dispatched } = this.props\n        \n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        return (\n            <Container style={{ flex: 1 }}>\n                {this.state.showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={this.hideLoginPad}\n                    /> : null\n                }\n                \n                {showDateTimeModal && <TimeModal\n                    start_date={date}\n                    datetime_type={'date'}\n                    hideModal={() => this.setState({ showDateTimeModal: false })}\n                    selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                    minDatetime={null}\n                    maxDatetime={new Date()}\n                />}\n\n                <Modal\n                    show={showModal}\n                    student_id={modalStudentId}\n                    teacher_id={null}\n                    teacherOnDuty={modalTeacherId}\n                    class_id={class_id}\n                    school_id={school_id}\n                    navigation={this.props.navigation}\n                    // unmarked={unmarked}\n                    // absent={absent}\n                    fetchStudentAttendance={() => this.fetchStudentAttendance()}\n                    fetchTeacherAttendance={() => {return null}}\n                    hideModal={() => this.hideModal()}\n                />\n\n                <Content contentContainerStyle={{\n                    marginTop: 30,\n                    paddingBottom: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center'\n                }}>\n                    {/* <Button\n                        style={styles.button}\n                        onPress={() => {this.props.navigation.push('TeacherClockInOut')}}>\n                        <Text style={styles.button_text}>打卡</Text>\n                    </Button> */}\n\n                    {/* <View style={styles.card}>\n                        {this.props.attendance.initialized ? \n                            <AttendanceCard\n                                ref=\"attendance\"\n                                navigator={this.props.navigation}\n                                showModal={(student_id) => this.showModal(student_id)}\n                            />\n                        : <Reloading />\n                        }\n                    </View> */}\n                    <View style={{ flexDirection: 'row', justifyContent: 'space-between'}}>\n                        <View style={{ width: '15%'}}>\n                            <TouchableHighlight\n                                style={{ flex: 1, justifyContent: 'center', alignItems: 'center'}}\n                                onPress={() => this.goBackADay()}\n                            >\n                                <Image\n                                    source={require('../../assets/icon-back.png')}\n                                    style={{ width: 40, height: 40 }}\n                                />\n                            </TouchableHighlight>\n                        </View>\n\n                        <TouchableHighlight\n                            onPress={() => {\n                                if (!isAdmin || this.hasUnsentRecords()) return\n                                this.setState({ showDateTimeModal: true })\n                            }}\n                        >\n                            <Text style={{ fontSize: 50 }}>{beautifyDate(date)}</Text>\n                        </TouchableHighlight>\n\n                        <View style={{ width: '15%'}}>\n                            {date.toDateString() !== (new Date).toDateString() &&\n                                <TouchableHighlight\n                                    style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}\n                                    onPress={() => this.goForwardADay()}\n                                >\n                                    <Image\n                                        source={require('../../assets/icon-forward.png')}\n                                        style={{ width: 40, height: 40 }}\n                                    />\n                                </TouchableHighlight>\n                            }\n                        </View>\n                    </View>\n\n                    <InboxCard\n                        ref=\"messages\"\n                        class_id={class_id}\n                        students={this.props.class.students}\n                        navigation={this.props.navigation}\n                        date={date}\n                    />\n\n                    <MedicationReqeustCard //TODO: are we getting med requests real time? or was it slow internet?\n                        ref=\"med_request\"\n                        class_id={class_id}\n                        students={this.props.class.students}\n                        medication_requests={this.props.medication_requests}\n                        navigation={this.props.navigation}\n                        date={date}\n                    />\n\n                    <View style={styles.button_row}>\n                        <TouchableHighlight\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('WellnessLog')}\n                        >\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                                <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                    {!wellness_dispatched ? \n                                        <Image\n                                            source={require('../../assets/icon-bookmark.png')}\n                                            style={{\n                                                width: 25,\n                                                height: 25,\n                                                marginTop: 3,\n                                                alignSelf: 'flex-end'\n                                            }}\n                                        /> \n                                    : null}\n                                </View>\n                                <Text style={styles.button_text}>健康</Text>\n                            </View>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('MessageForParents')}\n                        >\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                                <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                    {!message_dispatched ? \n                                        <Image\n                                            source={require('../../assets/icon-bookmark.png')}\n                                            style={{\n                                                width: 25,\n                                                height: 25,\n                                                marginTop: 3,\n                                                alignSelf: 'flex-end'\n                                            }}\n                                        /> \n                                    : null}\n                                </View>\n                                <Text style={styles.button_text}>老師{\"\\n\"}留⾔</Text>\n                            </View>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('TeacherAppetiteLog')}\n                        >\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                                <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                    {!appetite_dispatched ? \n                                        <Image\n                                            source={require('../../assets/icon-bookmark.png')}\n                                            style={{\n                                                width: 25,\n                                                height: 25,\n                                                marginTop: 3,\n                                                alignSelf: 'flex-end'\n                                            }}\n                                        /> \n                                    : null}\n                                </View>\n                                <Text style={styles.button_text}>飲食</Text>\n                            </View>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={styles.button_row}>\n                        <TouchableHighlight\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('TeacherSleepLog')}\n                        >\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                                <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                    {!sleep_dispatched ? \n                                        <Image\n                                            source={require('../../assets/icon-bookmark.png')}\n                                            style={{\n                                                width: 25,\n                                                height: 25,\n                                                marginTop: 3,\n                                                alignSelf: 'flex-end'\n                                            }}\n                                        /> \n                                    : null}\n                                </View>\n                                <Text style={styles.button_text}>睡眠</Text>\n                            </View>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('TeacherMilkLog')}\n                        >\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                                <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                    {!milk_dispatched ? \n                                        <Image\n                                            source={require('../../assets/icon-bookmark.png')}\n                                            style={{\n                                                width: 25,\n                                                height: 25,\n                                                marginTop: 3,\n                                                alignSelf: 'flex-end'\n                                            }}\n                                        /> \n                                    : null}\n                                </View>\n                                <Text style={styles.button_text}>餵奶</Text>\n                            </View>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={styles.record_button}\n                            onPress={() => this.pageClicked('DiaperLog')}\n                        >\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                                <View style={{ zIndex: 2, position: 'absolute', width: '100%', height: '100%' }}>\n                                    {!diaper_dispatched ? \n                                        <Image\n                                            source={require('../../assets/icon-bookmark.png')}\n                                            style={{\n                                                width: 25,\n                                                height: 25,\n                                                marginTop: 3,\n                                                alignSelf: 'flex-end'\n                                            }}\n                                        /> \n                                    : null}\n                                </View>\n                                <Text style={styles.button_text}>換尿布</Text>\n                            </View>\n                        </TouchableHighlight>\n                    </View>\n\n                    <AbsenceCard\n                        class_students={this.props.class.students}\n                        showLoginNumberPad={(student_id) => this.setState({\n                            showLoginNumberPad: true,\n                            modalStudentId: student_id,\n                            pageClicked: 'attendance_modal'\n                        })}\n                    />\n                    <TouchableHighlight\n                        style={styles.button}\n                        onPress={() => this.props.navigation.goBack()}>\n                        <Text style={styles.button_text}>返回</Text>\n                    </TouchableHighlight>\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    card: {\n        width: '90%'\n    },\n    button_row: {\n        width: '90%',\n        height: 100,\n        justifyContent: 'space-between',\n        flexDirection: 'row',\n        marginVertical: 7,\n        paddingHorizontal: 3\n    },\n    button_text: {\n        width: '100%',\n        textAlign: 'center',\n        color: 'gray',\n        fontSize: 40\n    },\n    record_button: {\n        width: '30%',\n        height: '100%',\n        backgroundColor:\"#b5e9e9\"\n    },\n    button: {\n        width: '30%',\n        backgroundColor:\"#b5e9e9\"\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        medication_requests: state.medicationrequests,\n        attendance: state.attendance,\n        teachers: state.school.teachers,\n        passcodeAdminId: state.school.passcodeAdminId,\n        passcodeTeacherId: state.school.passcodeTeacherId,\n        wellness_dispatched: state.healthstatus.data_dispatched,\n        message_dispatched: state.message.data_dispatched,\n        appetite_dispatched: state.appetite.data_dispatched,\n        sleep_dispatched: state.sleep.data_dispatched,\n        milk_dispatched: state.milk.data_dispatched,\n        diaper_dispatched: state.diaper.data_dispatched\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({setConnectState, initializeClass, setClassId, fetchStudentAttendanceSuccess, clearState}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherHome)","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert } from 'react-native'\nimport { Toast } from 'native-base'\nimport Auth from '@aws-amplify/auth'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { \n    setConnectState, \n    fetchClassesSuccess, \n    fetchTeachersSuccess, \n    fetchStudentsSuccess,\n    initializeStudentWellness,\n    clearSchoolState,\n    addPickupRequest,\n    updateViewingStatus,\n    fetchStudentAttendanceSuccess } from '../../redux/school/actions/index'\nimport { get, formatDate } from '../util'\nimport NetInfo from '@react-native-community/netinfo'\nimport LoginNumberPad from './loginnumberpad'\n// import PickupAlert from './pickupalert'\nimport ENV from '../../variables'\n\nclass SchoolHome extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            classes: [],\n            err_message: '',\n            showLoginNumberPad: false,\n            pageClicked: '',\n            class_id: '',\n            admin_id: ''\n        }\n        this.handleSignOut = this.handleSignOut.bind(this)\n    }\n\n    async componentDidMount() {\n        // this.unsubscribe = NetInfo.addEventListener(state => {\n        //     const {isConnected} = state\n        //     this.props.setConnectState(isConnected)\n        // });\n        window.addEventListener('offline', (e) => {\n            this.props.setConnectState(false) \n        });\n        window.addEventListener('online', () => {\n            this.props.setConnectState(true)\n        });\n        const { school_id } = this.props.route.params\n        await this.fetchClassIdAndName()\n        this.fetchTeacherData(school_id)\n        this.fetchStudentData(school_id)\n        // this.timeoutId = this.timer(school_id)\n    }\n\n    // timer = (school_id) => setTimeout(() => {\n    //     this.poll(school_id)\n    // }, 10000)\n\n    // async poll(school_id) {\n    //     const { viewing_status } = this.props\n    //     if (viewing_status === '') {\n    //         const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/class/${school_id}/updates`\n    //         await fetch(query, {\n    //             method: 'GET',\n    //             headers: {\n    //                 Accept: 'application/json',\n    //                 'Content-Type': 'application/json'\n    //             }\n    //         })\n    //             .then(res => res.json())\n    //             .then(resJson => {\n    //                 console.log('schoolhome: ', resJson)\n    //                 const update_types = resJson.data\n    //                 update_types.forEach(type => {\n    //                     if (type === 'pickup_request') {\n    //                         this.fetchPickupRequest(school_id)\n    //                     } else if(type === 'attendance') {\n    //                         this.fetchStudentAttendance()\n    //                     } else {\n    //                         this.refs[type].fetchData()\n    //                     }\n    //                 })\n    //             })\n    //             .catch(err => {\n    //                 Toast.show({\n    //                     text: '系統出差錯，請重新開ＡＰＰ',\n    //                     buttonText: 'Okay',\n    //                     position: \"top\",\n    //                     type: \"warning\",\n    //                     duration: 3000\n    //                 })\n    //             })\n    //     }\n    //     this.timeoutId = this.timer(school_id)\n    // }\n\n    async fetchClassIdAndName() {\n        const { school_id } = this.props.route.params\n        await fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/school/${school_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 取得教室資料時電腦出狀況了！請截圖和與工程師聯繫 ' + message)\n                    return\n                }\n                this.setState({\n                    classes: data.classes\n                })\n                const classes = {}\n                data.classes.forEach(class_data => {\n                    const {id, name } = class_data\n                    classes[id] = {\n                        teachers: [],\n                        students: [],\n                        name\n                    }\n                })\n                this.props.fetchClassesSuccess(classes, data.admin_passcode)\n            }).catch(err => {\n                alert('Sorry 取得教室資料時電腦出狀況了！請截圖和與工程師聯繫')\n            })\n    }\n    async fetchTeacherData(school_id) {\n        const response = await get(`/school/${school_id}/teacher`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得教師資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        const {admins, teachers, classes} = data\n        this.props.fetchTeachersSuccess(admins, teachers, classes)\n        this.getAdminId(teachers)\n    }\n\n    getAdminId(teachers) {\n        const teacher_id_array = Object.keys(teachers)\n        for(var i = 0; i < teacher_id_array.length; i++) {\n            if (teachers[teacher_id_array[i]].name === '管理員') {\n                this.setState({\n                    admin_id: teacher_id_array[i]\n                })\n                return\n            }\n        }\n    }\n\n    async fetchStudentData(school_id) {\n        const response = await get(`/school/${school_id}/student`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const {students, classes} = data\n        this.props.fetchStudentsSuccess(students, classes)\n        this.props.initializeStudentWellness(Object.keys(students))\n    }\n\n    fetchPickupRequest(school_id) {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/attendance/pickup-request?school_id=${school_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                if (resJson.data.length > 0) {\n                    this.props.addPickupRequest(resJson.data)\n                    this.props.navigation.navigate('PickupAlert', {\n                    })\n                }\n            })\n            .catch(err => {\n                alert('Sorry 取得接回告知時電腦出狀況了！請截圖和與工程師聯繫')\n            })\n    }\n\n    async fetchStudentAttendance() {\n        const { school_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/attendance?school_id=${school_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生出席資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const { attendance, students, present, absent } = data\n        this.props.fetchStudentAttendanceSuccess(attendance, students, present, absent)\n    }\n\n    handleEnterPasscode(passcode) {\n        console.log(passcode)\n        const { school_name, school_id } = this.props.route.params\n        const { passcodeAdminId, passcodeTeacherId, classes, teachers } = this.props\n        const { pageClicked, class_id } = this.state\n        const teacher_id = passcodeTeacherId[passcode]\n        const admin_id = passcodeAdminId[passcode]\n        console.log(admin_id)\n\n\n        if (teacher_id === undefined && admin_id === undefined) {\n            alert('密碼不正確！請截圖和與工程師聯繫')\n        } else if (admin_id !== undefined) {\n            this.setState({ showLoginNumberPad: false })\n            this.props.navigation.navigate(pageClicked, {\n                school_name, \n                school_id,\n                class_id,\n                class_name: '管理員：' + teachers[admin_id].name,\n                isAdmin: true,\n                admin_id\n            })\n        } else if (class_id !== '' && !classes[class_id].teachers.includes(teacher_id) || pageClicked === 'AdminHome') {\n            alert('Sorry 權限不合！請截圖和與工程師聯繫')\n        } else { //pageClicked === 'TeacherHome'\n            this.setState({ showLoginNumberPad: false })\n            this.props.updateViewingStatus('teacher')\n            this.props.navigation.navigate('TeacherHome', {\n                class_id,\n                class_name: classes[class_id].name,\n                isAdmin: false\n            })\n        }\n    }\n\n    hideLoginPad() {\n        this.setState({ showLoginNumberPad: false })\n    }\n\n    handleSignOut() {\n        const {loadAuth} = this.props.route.params\n        Auth.signOut()\n            .then(() => {\n                loadAuth()\n            })\n            .catch(err => console.log(err))\n    }\n\n    componentWillUnmount() {\n        // clearTimeout(this.timeoutId)\n        window.removeEventListener('offline', (e) => {\n            this.props.setConnectState(false) \n        });\n        window.removeEventListener('online', (e) => {\n            this.props.setConnectState(false) \n        });\n        this.props.clearSchoolState()\n    }\n\n    render() {\n        const { classes, showLoginNumberPad } = this.state\n        const { school_id } = this.props.route.params\n        return (\n            <View style={{ flex: 1, flexDirection: 'column' }}>\n                {showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={() => this.hideLoginPad()}\n                    /> : null\n                }\n\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <TouchableHighlight\n                        key='admin'\n                        style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                        onPress={() => this.setState({ showLoginNumberPad: true, pageClicked: 'AdminHome' })}\n                    >\n                        <Text style={{ fontSize: 50, textAlign: 'center' }}>行政管理</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        key='child_dismissal'\n                        style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                        onPress={() => {\n                            this.props.updateViewingStatus('dismissal')\n                            this.props.navigation.push('DismissChildQRScan', {})\n                        }}\n                    >\n                        <Text style={{ fontSize: 50, textAlign: 'center' }}>放學</Text>\n                    </TouchableHighlight>\n                </View>\n                <TouchableHighlight\n                    key='attendance_page'\n                    style={{ flex: 1, backgroundColor: '#74b987', margin: 10, justifyContent: 'center' }}\n                    onPress={() => {\n                        this.props.navigation.push('AttendancePage', {\n                            school_id\n                        })\n                    }}\n                >\n                    <Text style={{ fontSize: 80, textAlign: 'center' }}>出席/打卡</Text>\n                </TouchableHighlight>\n                <View style={{ flex: 3 }}>\n                    {classes.map((class_data) => {\n                        if (class_data.name === '管理員') return null\n                        return(\n                            <TouchableHighlight\n                                key={class_data.id}\n                                style={{ \n                                    flex: 1,\n                                    backgroundColor: '#74b987', \n                                    margin: 10,\n                                    justifyContent: 'center'\n                                }}\n                                onPress={() => this.setState({\n                                    showLoginNumberPad: true,\n                                    pageClicked: 'TeacherHome',\n                                    class_id: class_data.id\n                                })}\n                            >\n                                <Text style={{ fontSize: 80, textAlign: 'center' }}>{class_data.name}</Text>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        pick_up_request: state.school.pick_up_request,\n        passcodeAdminId: state.school.passcodeAdminId,\n        passcodeTeacherId: state.school.passcodeTeacherId,\n        classes: state.school.classes,\n        teachers: state.school.teachers,\n        viewing_status: state.school.viewing_status,\n        isConnected: state.school.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setConnectState,\n            fetchClassesSuccess, \n            fetchTeachersSuccess, \n            fetchStudentsSuccess,\n            initializeStudentWellness,\n            addPickupRequest,\n            clearSchoolState,\n            updateViewingStatus,\n            fetchStudentAttendanceSuccess\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (SchoolHome)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight } from 'react-native'\nimport { Container, Content, Text, View, Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport LoginNumberPad from './loginnumberpad'\nimport { bindActionCreators } from 'redux';\nimport { markTeacherLoggedIn, markTeacherLoggedOut, markStaffAttendanceFail, fetchAttendanceSuccess } from '../../redux/school/actions/index'\n\nclass TeacherClockInOut extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            logging_in: false,\n            teacher_id: ''\n        }\n        this.handleEnterPasscode = this.handleEnterPasscode.bind(this)\n        this.hideLoginPad = this.hideLoginPad.bind(this)\n    }\n\n    componentDidMount() {\n        this.fetchStaffAttendanceByClassId()\n    }\n\n    fetchStaffAttendanceByClassId() {\n        const { class_id, isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance?class_id=${class_id}`\n        fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                this.props.fetchAttendanceSuccess(resJson.data)\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n\n    }\n\n    handleEnterPasscode(passcode) {\n        const teacher_id = this.props.class.passcodeTeacherId[passcode]\n        if (teacher_id === undefined || teacher_id !== this.state.teacher_id) {\n            Toast.show({\n                text: 'Wrong password!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 3000\n            })\n        } else {\n            const teacher = this.props.class.teachers[teacher_id]\n            const time = new Date()\n            if (teacher.logged_in) {\n                this.clockOut(teacher_id, time)\n            } else {\n                this.clockIn(teacher_id, time)\n            }\n            this.setState({ logging_in: false })\n        }\n        \n    }\n\n    clockIn(staff_id, time) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance`\n        fetch(query, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                staff_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if ( statusCode > 200 || resJson[\"message\"] === \"Internal server error\") {\n                    this.props.markStaffAttendanceFail(message)\n                } else {\n                    this.props.markTeacherLoggedIn(staff_id, time, data.attendance_id)\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    clockOut(staff_id, time) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 5000\n            })\n            return\n        }\n\n        const { attendance_id } = this.props.class.teachers[staff_id]\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/staff-attendance/${attendance_id}`\n        fetch(query, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === \"Internal server error\") {\n                    this.props.markStaffAttendanceFail(message)\n                }\n                else {\n                    this.props.markTeacherLoggedOut(staff_id, time)\n                }\n            })\n            .catch(err => {\n                console.log('err: ', err)\n            })\n    }\n\n    hideLoginPad() {\n        this.setState({ logging_in: false })\n    }\n\n    render() {\n        const { errMessage } = this.props.class\n        return(\n            <Container>\n                {errMessage !== '' ?    \n                    <Text style={{ fontSize: 20, color: 'red' }}>{errMessage}</Text>\n                    : null}\n                {this.state.logging_in ?\n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={this.hideLoginPad}\n                    /> : null}\n                        \n                <Content contentContainerStyle={{ marginTop: 30, paddingBottom: 30, alignSelf: 'center', flexDirection: 'row' }}>\n                    {Object.keys(this.props.class.teachers).map((teacher_id) => {\n                        return (\n                            <TouchableHighlight\n                                key={teacher_id}\n                                style={{ margin: 20 }}\n                                underlayColor='transparent'\n                                onPress={() => this.setState({ logging_in: true, teacher_id: teacher_id})}\n                            >\n                                <View style={styles.cardContainer}>\n                                    <Card>\n                                        <CardItem style={{ justifyContent: 'center' }}>\n                                            <Image\n                                                // source={{ uri: this.props.class.students[student_id].profile_picture }}\n                                                style={styles.thumbnailImage}/>\n                                        </CardItem>\n                                        <CardItem\n                                            footer\n                                            style={{ justifyContent: 'center', backgroundColor: this.props.class.teachers[teacher_id].logged_in ? '#dcf3d0' : '#ffe1d0' }}>\n                                            <Text>{this.props.class.teachers[teacher_id].name}</Text>\n                                        </CardItem>\n                                    </Card>\n                                </View>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 119,\n        height: 150,\n        margin: 2,\n        marginBottom: -2\n    },\n    thumbnailImage: {\n        height: 80,\n        width: 80,\n        borderRadius: 40\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({markTeacherLoggedIn, markTeacherLoggedOut, markStaffAttendanceFail, fetchAttendanceSuccess}, dispatch)\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherClockInOut)","import React from 'react'\nimport { Image, StyleSheet, View, Text, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatHourMinute, beautifyTime } from '../../util'\nimport TimeModal from '../../parent/timemodal'\n\nexport default class MedRequestModal extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state={\n            medicated_time: new Date(),\n            showTimePicker: false\n        }\n    }\n\n    selectDatetimeConfirm(time){\n        this.setState({\n            medicated_time: time,\n            showTimePicker: false\n        })\n    }\n\n    render() {\n        const { thumbnail, student_name, request } = this.props\n        const { medicated_time, showTimePicker } = this.state\n        const { administered, fever_entry, medication, note, student_id, teacher_id, timestamp } = request\n        const { before_meal, gel, other_type, powder, powder_refrigerated, syrup } = medication\n        // const { other_type, powder, powder_refrigerated, syrup, temperature } = fever_entry\n        const time = formatHourMinute(new Date(timestamp))\n        return (\n            <Card style={{ flex: 1, alignSelf: 'center', width: '100%' }}>\n\n                {showTimePicker ?\n                    <TimeModal\n                        start_date={medicated_time}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showTimePicker: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n\n                <View style={{ flex: 0.35, flexDirection: 'row' }}>\n                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                        <Image\n                            source={thumbnail === '' ?\n                                require('../../../assets/icon-thumbnail.png')\n                                : { uri: thumbnail }\n                            }\n                            style={styles.thumbnailImage}\n                        />\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'flex-start' }}>\n                        <Text style={{ fontSize: 70, fontWeight: 'bold' }}>{student_name}</Text>\n                        <Text style={{ fontSize: 70, fontWeight: 'bold' }}>{time} {before_meal === null ? null : before_meal ? '餐前' : '餐後'}</Text>\n                    </View>\n                </View>\n                <View style={{ flex: 0.65, paddingBottom: 20 }}>\n                    <View style={{ width: '100%', flexDirection: 'row', flexWrap: 'wrap', justifyContent: 'space-evenly' }}>\n                        {powder &&\n                            <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', flexDirection: 'row', marginBottom: 15, marginHorizontal: 7}}>\n                                <Image\n                                    source={require('../../../assets/icon-medication-powder.png')}\n                                />\n                                <View>\n                                    <Text style={{ fontSize: 30 }}>藥粉</Text>\n                                    {powder_refrigerated && <Text style={{ fontSize: 30 }}>需冷藏</Text>}\n                                </View>\n                            </View>\n                        }\n                        {syrup.length !== 0 &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-syrup.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>藥水</Text>\n                                {syrup.map((entry, index) => {\n                                    return (\n                                        <View key={index} style={{ flexDirection: 'row' }}>\n                                            <Text style={{ fontSize: 20 }}>{entry.amount} c.c.</Text>\n                                            {entry.need_refrigerated && <Text style={{ fontSize: 20, marginLeft: 20 }}>需冷藏</Text>}\n                                        </View>\n                                    )\n                                })}\n                            </View>\n                        </View>\n                        }\n                        {gel &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-gel.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>藥膏</Text>\n                                <Text style={{ fontSize: 30 }}>{gel}</Text>\n                            </View>\n                        </View>\n                        }\n                        {other_type &&\n                        <View style={{ width: '48%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', marginBottom: 15, flexDirection: 'row', marginHorizontal: 7 }}>\n                            <Image\n                                source={require('../../../assets/icon-medication-pill.png')}\n                            />\n                            <View>\n                                <Text style={{ fontSize: 30 }}>其他</Text>\n                                <Text style={{ fontSize: 30 }}>{other_type}</Text>\n                            </View>\n                        </View>\n                        }\n                    </View>\n                    <View style={{ width: '97%', marginHorizontal: 10, flexDirection: 'row', justifyContent: 'space-between' }}>\n                        <View style={{ width: '32%', aspectRatio: 1, backgroundColor: '#fff1b5' }}>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 30 }}>備註</Text>\n                            </View>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 25 }}>{note}</Text>\n                            </View>\n                        </View>\n\n                        <View style={{ width: '40%', backgroundColor: '#fa625f' }}>\n                            <View style={{ padding: 10 }}>\n                                <Text style={{ fontSize: 30, color: 'white' }}>發燒超過 {fever_entry.temperature}°C</Text>\n                            </View>\n                            <View style={{ padding: 10 }}>\n                                {fever_entry.powder &&\n                                    <Text style={{ fontSize: 25, color: 'white' }}>藥粉 {fever_entry.powder_refrigerated && '需冷藏'}</Text>\n                                }\n\n                                {fever_entry.syrup.length !== 0 &&\n                                    <View style={{ flexDirection: 'row'}}>\n                                        <Text style={{ fontSize: 25, color: 'white' }}>藥水    </Text>\n                                        {fever_entry.syrup.map((entry, index) => {\n                                            return (\n                                                <Text key={index} style={{ fontSize: 25, color: 'white' }}>{entry.amount} c.c. {entry.need_refrigerated && '需冷藏'}</Text>\n                                            )\n                                        })}\n                                    </View>\n                                }\n\n                                {fever_entry.other_type && \n                                    <Text style={{ fontSize: 25, color: 'white' }}>其他    {fever_entry.other_type}</Text>\n                                }\n                            </View>\n                        </View>\n\n                        <View style={{ width: '25%', justifyContent: 'space-between'}}>\n                            <TouchableHighlight \n                                style={{ \n                                    padding: 15, \n                                    backgroundColor: 'rgba(0,0,0,0.2)', \n                                    justifyContent: 'center', \n                                    alignItems: 'center' \n                                }}\n                                onPress={() => this.setState({ showTimePicker: true })}\n                            >\n                                <Text style={{ fontSize: 40 }}>{beautifyTime(medicated_time)}</Text>\n                            </TouchableHighlight>\n                            <TouchableHighlight\n                                style={{\n                                    padding: 15,\n                                    width: '100%',\n                                    backgroundColor: administered ? '#dcf3d0' : '#ffe1d0',\n                                    alignItems: 'center'\n                                }}\n                                onPress={() => this.props.showLoginNumberPad()}\n                            >\n                                <Text style={{ fontSize: 40 }}>完成</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                </View>\n            </Card>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnailImage: {\n        height: 180,\n        width: 180,\n        borderRadius: 90\n    }\n})","import React from 'react'\nimport { View, Text, RefreshControl, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport MedRequestModal from './medrequestmodal'\nimport { bindActionCreators } from 'redux';\nimport { initializeRequests, fillMedRequest } from '../../../redux/school/actions/index' \nimport Reloading from '../../reloading'\nimport { formatHourMinute } from '../../util'\nimport LoginNumberPad from '../loginnumberpad'\n\nclass TeacherMedicineLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            refreshing: false,\n            selected_request_id: '',\n            showLoginNumberPad: false\n        }\n        this.handleShowRequest = this.handleShowRequest.bind(this)\n        this.handleFulfillRequest = this.handleFulfillRequest.bind(this)\n    }\n\n    componentDidMount() {\n        // if not loaded, we fetch else do nothing(teacher can fetch new requests by refreshing page)\n        const { request_id } = this.props.route.params\n        if (request_id === null) {\n            this.setState({\n                isLoading: false\n            })\n            return\n        }\n        this.handleShowRequest(request_id)\n    }\n\n    handleShowRequest(request_id) {\n        this.setState({\n            selected_request_id: request_id,\n            isLoading: false\n        })\n    }\n\n    handleEnterPasscode(passcode) {\n        const teacher_id = this.props.class.passcodeTeacherId[passcode]\n        if (teacher_id === undefined) {\n            Alert.alert(\n                'Wrong password',\n                'Please try again',\n                [{text: 'OK'}]\n            )\n        } else {\n            this.setState({ showLoginNumberPad: false })\n            this.handleFulfillRequest(teacher_id)\n        }\n    }\n    \n    hideLoginPad() {\n        this.setState({\n            showLoginNumberPad: false\n        })\n    }\n\n    handleFulfillRequest(teacher_id) {\n        const { selected_request_id } = this.state\n        // console.log(this.props.requests)\n        const { student_id } = this.props.requests.requests[selected_request_id]\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/medicationrequest', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id: selected_request_id,\n                teacher_id,\n                student_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    Alert.alert(\n                        'Error, please try again',\n                        message,\n                        [{text: 'OK'}]\n                    )\n                    return\n                }\n                this.props.fillMedRequest(selected_request_id)\n                this.props.navigation.goBack()\n            })\n            .catch(err => {\n                Alert.alert(\n                    'Error, please try again',\n                    err.message,\n                    [{text: 'OK'}]\n                )\n            })\n    }\n\n    render() {\n        const { selected_request_id, isLoading, showLoginNumberPad } = this.state\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        const { requests } = this.props.requests\n        const { students } = this.props.class\n        const current_request = requests[selected_request_id]\n        // console.log('current_request: ', current_request)\n        // const { administered, fever_entry, medication, note, student_id, teacher_id, timestamp } = current_request\n        return (\n            <View style={{ flex: 1 }}>\n                {showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={this.hideLoginPad}\n                    /> : null\n                }\n                <ScrollView\n                    contentContainerStyle={{ flex: 1, padding: 10 }}\n                    refreshControl={\n                        <RefreshControl\n                            style={{backgroundColor: '#E0FFFF'}}\n                            refreshing={this.state.refreshing}\n                            onRefresh={this.fetchFromDB}\n                            tintColor=\"#ff0000\"\n                            title=\"Loading...\"\n                            titleColor=\"#00ff00\"\n                            colors={['#ff0000', '#00ff00', '#0000ff']}\n                            progressBackgroundColor=\"#ffff00\"\n                        />\n                    }\n                >\n                    <View style={{ flex: 3 }}>\n                        {selected_request_id === '' ?\n                            null\n                        :   \n                            <MedRequestModal\n                                thumbnail={students[current_request.student_id].profile_picture}\n                                student_name={students[current_request.student_id].name}\n                                request={current_request}\n                                showLoginNumberPad={() => this.setState({ showLoginNumberPad: true })}\n                            />\n                        }\n                    </View>\n                    <View style={{ flex: 1 }}>\n                        <ScrollView horizontal={true}>\n                            {Object.keys(requests).map((request_id) => {\n                                const { student_id } = requests[request_id]\n                                const { timestamp, administered } = requests[request_id]\n                                const time = formatHourMinute(new Date(timestamp))\n                                return (\n                                    <TouchableHighlight\n                                        key={request_id}\n                                        style={styles.cardContainer}\n                                        underlayColor='transparent'\n                                        onPress={() => this.handleShowRequest(request_id)}\n                                    >\n                                        <Card \n                                            style={{ \n                                                flex: 1,\n                                                backgroundColor: administered ? '#dcf3d0' : '#ffe1d0'\n                                            }}\n                                        >\n                                            <View\n                                                style={{ flex: 1, justifyContent: 'center' }}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>{time}</Text>\n                                            </View>\n                                            <View style={{ flex: 2, justifyContent: 'center', alignItems: 'center' }}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                        : { uri: students[student_id].profile_picture }}\n                                                    style={styles.thumbnailImage}\n                                                />\n                                            </View>\n                                            <View\n                                                style={{ flex: 1, justifyContent: 'center' }}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>{students[student_id].name}</Text>\n                                            </View>\n                                        </Card>\n                                    </TouchableHighlight>\n                                )\n                            })}\n                        </ScrollView>\n                    </View>\n                </ScrollView>\n            </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 170,\n        // backgroundColor: 'transparent',\n        paddingRight: 5\n    },\n    thumbnailImage: {\n        height: 110,\n        width: 110,\n        borderRadius: 55\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        requests: state.medicationrequests\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({ initializeRequests, fillMedRequest }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherMedicineLog)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, KeyboardAvoidingView, ScrollView, Alert } from 'react-native'\nimport { Text, View, Button, Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    fetchClassWellnessData,\n    markPresent,\n    sendWellnessDataSuccess,\n    sendWellnessDataFail,\n    addWellnessRecord,\n    invalidateWellnessData\n} from '../../../redux/school/actions/index'\nimport { formatDate, fetchClassData, sendWellnessData, beautifyDate } from '../../util';\nimport WellnessForm from '../wellnessform'\nimport TimeModal from '../../parent/timemodal'\nimport Reloading from '../../reloading'\n\nclass WellnessLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            show_record: false,\n            showDateTimeModal: false\n        }\n        this.handleSend = this.handleSend.bind(this)\n        this.addRecord = this.addRecord.bind(this)\n    }\n\n    componentDidMount() {\n        const { record_id_for_update } = this.props.wellness\n        const { isConnected } = this.props.class\n        const { date, teacher_name } = this.props.route.params\n        if (record_id_for_update.size === 0 && isConnected) {\n            this.setState({\n                date\n            })\n            this.fetchClassData(date)\n        }\n        else {\n            this.setState({\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n        }\n\n        this.props.navigation.setOptions({ \n            title: `健康 - ${teacher_name}`\n        })\n    }\n\n    async fetchClassData(propsDate) {\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n            )\n        })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const wellnessData = await fetchClassData('wellness', this.props.class.class_id, start_date, end_date)\n        // console.log(wellnessData)\n        this.denormalize(wellnessData)\n        this.props.fetchClassWellnessData(wellnessData.data)\n        this.setState({\n            isLoading: false\n        })\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    denormalize(wellnessData) {\n        if (!Object.keys(wellnessData.data.records).length){\n            return\n        }\n        const { records } = wellnessData.data\n        for (var record_id in records) {\n            wellnessData.data.records[record_id].time = new Date(records[record_id].time)\n        }\n    }\n\n    hasUnsentRecord(record_id_list) {\n        const { record_id_for_update } = this.props.wellness\n        var has_unsent_record = false\n        for (var i = 0; i < record_id_list.length; i++) {\n            if (record_id_for_update.has(record_id_list[i])) {\n                has_unsent_record = true\n                break\n            }\n        }\n        return has_unsent_record\n    }\n\n    addRecord(student_id) {\n        const record_amount = this.props.wellness.by_student_id[student_id].length\n        if (record_amount === 2) {\n            Alert.alert(\n                '今天已經量了兩次體溫了',\n                '',\n                [{text: 'OK'}]\n            )\n            return\n        }\n        this.props.addWellnessRecord(student_id)\n    }\n\n    async handleSend() {\n        // if (!this.wellnessDataValidated()) {\n        //     return\n        // }\n        const { wellness } = this.props\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n            return\n        }\n        this.setState({ isLoading: true })\n        const sendDataResult = await sendWellnessData(wellness, this.props.class.class_id, formatDate(new Date))\n        if (sendDataResult.success) {\n            sendDataResult.data.forEach(student_id => {\n                this.props.markPresent(student_id, new Date)\n            })\n            this.props.sendWellnessDataSuccess()\n            this.props.navigation.goBack()\n        } else {\n            this.props.sendWellnessDataFail(sendDataResult.message)\n            Alert.alert(\n                'Err',\n                sendDataResult.message,\n                [{text: 'OK'}]\n            )\n        }\n        this.setState({ isLoading: false })\n    }\n\n    wellnessDataValidated() {\n        const { records, record_id_for_update } = this.props.wellness\n        let validated = true\n        record_id_for_update.forEach(record_id => {\n            if (records[record_id].temperature === '') {\n                this.props.invalidateWellnessData(record_id, 'Temperature is not filled out')\n                validated = false\n            } else if (records[record_id].status === '') {\n                this.props.invalidateWellnessData(record_id, 'Health status is not filled out')\n                validated = false\n            }\n        })\n        return validated\n    }\n\n    selectDatetimeConfirm(date) {\n        this.setState({\n            date,\n            showDateTimeModal: false\n        })\n        this.fetchClassData(date)\n    }\n\n    render() {\n        const { by_student_id, records } = this.props.wellness\n        const { teacher_id, isAdmin } = this.props.route.params\n        const { showDateTimeModal, date, isLoading } = this.state\n        \n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1\n                }}\n                behavior='height'\n                keyboardVerticalOffset={80}\n                enabled\n            >\n                {showDateTimeModal && <TimeModal\n                    start_date={date}\n                    datetime_type={'date'}\n                    hideModal={() => this.setState({ showDateTimeModal: false })}\n                    selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                    minDatetime={null}\n                    maxDatetime={new Date()}\n                />}\n                <View style={{ flexDirection: 'row', width: '90%', justifyContent: 'space-between', alignSelf: 'center', alignItems: 'center'}}>\n                    <TouchableHighlight\n                        onPress={() => {\n                            const { data_dispatched } = this.props.wellness\n                            if (!data_dispatched || !isAdmin) return\n                            this.setState({ showDateTimeModal: true })\n                        }}\n                    >\n                        <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n                    </TouchableHighlight>\n\n                    <TouchableHighlight\n                        disabled={isLoading}\n                        style={{ \n                            backgroundColor: isLoading ? 'rgba(0,0,0,0.5)' : '#dcf3d0', \n                            padding: 10  \n                        }}\n                        onPress={this.handleSend}>\n                        <Text style={{ fontSize: 40}}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n                <ScrollView contentContainerStyle={{ alignItems: 'center', marginBottom: 20 }}>\n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const record_id_list = by_student_id[student_id]\n                        return(\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card>\n                                    <CardItem style={{ flex: 1, flexDirection: 'row' }}>\n                                        <TouchableHighlight\n                                            style={styles.childThumbnail}\n                                            // onPress={() => this.addRecord(student_id)}\n                                        >\n                                            <Image\n                                                source={\n                                                    this.props.class.students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: this.props.class.students[student_id].profile_picture}\n                                                }\n                                                style={styles.thumbnailImage}\n                                            />\n                                        </TouchableHighlight>\n                                        <View style={{ flex: 3 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 10 }}>\n                                                <View style={{ flex: 1 }}>\n                                                    <Text style={{ fontSize: 25}}>{this.props.class.students[student_id].name}</Text>\n                                                </View>\n                                                <View style={{ flex: 1, alignItems: 'flex-end' }}>\n                                                    {this.hasUnsentRecord(record_id_list) ? \n                                                        <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                    : null}\n                                                </View>\n                                            </View>\n                                            {record_id_list.map((record_id, index) => {\n                                                return (\n                                                    <View style={{flex:1}} key={record_id}>\n                                                        { index === 0 ?\n                                                            <Text>早上</Text>\n                                                            : <Text>下午</Text>\n                                                        }\n                                                        <WellnessForm\n                                                            student_id={student_id}\n                                                            record_id={record_id}\n                                                            teacher_id={teacher_id}\n                                                        />\n                                                    </View>\n                                                )\n                                            })}\n                                        </View>\n                                    </CardItem>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        flex: 1,\n        backgroundColor: 'white',\n        marginLeft: -7,\n    },\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    },\n    subHeading: {\n        width: 355,\n        height: 45,\n        marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        wellness: state.healthstatus,\n        unmarked: state.attendance.unmarked\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            fetchClassWellnessData,\n            markPresent,\n            sendWellnessDataSuccess,\n            sendWellnessDataFail,\n            addWellnessRecord,\n            invalidateWellnessData\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (WellnessLog)","import React from \"react\"\nimport { View, Text } from \"react-native\"\n\n\nexport default class Header extends React.Component {\n    constructor(props) {\n        super(props)\n    }\n    render() {\n        return (\n            <View style={{flexDirection: 'row'}}>\n                <Text style={{ fontSize: 30 }}>\n                    {this.props.title}\n                </Text>\n            </View>\n            \n        )\n    }\n}","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, TextInput, Text, View, KeyboardAvoidingView, Alert, Keyboard } from 'react-native'\nimport { Container, Content, Card, CardItem, Body, Button, Toast } from 'native-base'\nimport { connect } from 'react-redux';\nimport Header from '../../header'\nimport { bindActionCreators } from 'redux';\nimport {\n    rateAppetite,\n    clearRatings,\n    setAllRatingsToGreat,\n    setAllDrinkWater,\n    fetchClassAppetiteData,\n    onSendAppetiteSuccess,\n    alertErrMessage,\n    markWaterDrank,\n    editFruitName,\n    clearAppetiteErrorMessage,\n    addStudentIdForUpdate\n} from '../../../redux/school/actions/index'\nimport { formatDate, fetchClassData, beautifyDate } from '../../util'\nimport TimeModal from '../../parent/timemodal'\n\nclass TeacherAppetiteLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            isLoading: true,\n            mealType: '',\n            selectedForCustomize: new Set(),\n            editingFruitType: false,\n            students_with_records: [],\n            showDateTimeModal: false,\n            display_all_students: true,\n            students_to_display: new Set()\n        }\n        this.handleRateFoodWellness = this.handleRateFoodWellness.bind(this)\n        this.handleSend = this.handleSend.bind(this)\n        this.handleClearAll = this.handleClearAll.bind(this)\n        this.handleSetAll = this.handleSetAll.bind(this)\n        this.handleAllDrank = this.handleAllDrank.bind(this)\n    }\n\n    componentDidMount() {\n        const { date, teacher_name } = this.props.route.params\n        const { updatedStudents } = this.props.appetite\n        const { isConnected, students } = this.props.class\n        this.setState({\n            students_to_display: new Set(Object.keys(students))\n        })\n        if (updatedStudents.size > 0 || !isConnected) {\n            this.setState({\n                isLoading: false\n            })\n        } else {\n            this.setState({ date })\n            this.fetchClassData(date)\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n        }\n        \n        this.props.navigation.setOptions({ \n            title: `飲食 - ${teacher_name}`\n        })\n    }\n\n    async fetchClassData(propsDate) {\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n            )\n        })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const appetiteData = await fetchClassData('appetite', this.props.class.class_id, start_date, end_date)\n        if (appetiteData.data[start_date] === undefined) {\n            this.props.navigation.setOptions({ \n                headerRight: () => (\n                    <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n                )\n            })\n            return \n        }\n        const { fruit_name, ratings } = appetiteData.data[start_date]\n        this.props.fetchClassAppetiteData(fruit_name, ratings)\n        this.setState({\n            isLoading: false,\n            students_with_records: Object.keys(ratings)\n        })\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    editFruitName(fruit_name) {\n        this.props.editFruitName(fruit_name)\n    }\n\n    fruitNameEditorOnBlur() {\n        const { students_with_records } = this.state\n        this.setState({ editingFruitType: false })\n        if (this.props.appetite.fruit_name === '') {\n            this.props.editFruitName('水果')\n        }\n\n        if (students_with_records.length > 1) {\n            this.props.addStudentIdForUpdate(students_with_records)\n        }\n    }\n\n    handleRateFoodWellness(student_id, rating) {\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            const { selectedForCustomize } = this.state\n            const {teacher_id } = this.props.route.params\n            selectedForCustomize.delete(student_id)\n            this.setState({\n                selectedForCustomize\n            })\n            this.props.rateAppetite(student_id, this.state.mealType, rating, teacher_id)\n        }\n    }\n\n    onClickOther(student_id) {\n        const { mealType, selectedForCustomize } = this.state\n        const {teacher_id } = this.props.route.params\n        if (mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.setState({\n                selectedForCustomize: new Set([...selectedForCustomize, student_id])\n            })\n            this.props.rateAppetite(student_id, this.state.mealType, '', teacher_id)\n        }\n    }\n\n    isRatingCustomized(rating) {\n        const { mealType } = this.state\n        if (mealType === '') {\n            return false\n        } else if (rating === '胃口佳' || rating === '滿滿一碗' || rating === '７/8分滿' || rating === '半碗' || rating === '胃口不佳' || rating === '') {\n            return false\n        }\n        return true\n    }\n\n    onCustomizeRating(student_id, customized_text) {\n        const {teacher_id } = this.props.route.params\n        this.props.rateAppetite(student_id, this.state.mealType, customized_text, teacher_id)\n    }\n\n    customizedRatingOnBlur(student_id) {\n        const { selectedForCustomize } = this.state\n        selectedForCustomize.delete(student_id)\n        this.setState({\n            selectedForCustomize\n        })\n    }\n\n    markWaterDrank(student_id) {\n        const {teacher_id } = this.props.route.params\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.props.markWaterDrank(student_id, this.state.mealType, teacher_id)\n        }\n    }\n\n    handleSetAll() {\n        const { teacher_id } = this.props.route.params\n        const { students_to_display } = this.state\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.props.setAllRatingsToGreat(this.state.mealType, [...students_to_display], teacher_id)\n        }\n    }\n\n    handleClearAll() {\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.props.clearRatings(this.state.mealType)\n        }\n    }\n\n    handleAllDrank() {\n        const {teacher_id } = this.props.route.params\n        const { students_to_display } = this.state\n        if (this.state.mealType === '') {\n            Toast.show({\n                text: '請選擇餐時',\n                buttonText: 'Okay',\n                position: 'top',\n                duration: 3000\n            })\n        } else {\n            this.props.setAllDrinkWater(this.state.mealType, [...students_to_display], teacher_id)\n        }\n    }\n\n    handleSend() {\n        const { isConnected } = this.props.class\n        const {updatedStudents, fruit_name} = this.props.appetite\n        var data_objs = [],\n            appetite_log = this.props.appetite.ratings\n        \n        if (updatedStudents.size === 0) {\n            this.props.navigation.goBack()\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '網路連線連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"danger\",\n                duration: 4000\n            })\n            return\n        }\n\n        updatedStudents.forEach(student_id => {\n            const ratings = appetite_log[student_id] // get ratings obj for student\n            const data = { // create query data and append to data_objs\n                student_id,\n                b_rating: ratings.Breakfast,\n                f_rating: ratings.Fruit,\n                l_rating: ratings.Lunch,\n                s_rating: ratings.Snack,\n                teacher_id: ratings.teacher_id\n            }\n            data_objs.push(data)\n        })\n        \n        const request_body = {\n            date: formatDate(new Date()),\n            fruit_name,\n            obj: data_objs\n        }\n\n        fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/appetite', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        }).then(res => res.json())\n            .then(resJson => {\n                // console.log(resJson)\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    this.props.alertErrMessage(message)\n                } else {\n                    this.props.onSendAppetiteSuccess()\n                    this.props.navigation.goBack()\n                }\n            })\n            .catch(err => {\n                this.props.alertErrMessage(err)\n            })\n    }\n\n    selectDatetimeConfirm(date) {\n        this.setState({\n            date,\n            showDateTimeModal: false\n        })\n        this.fetchClassData(date)\n    }\n\n    addStudentToDisplayList(student_id) {\n        const { display_all_students, students_to_display } = this.state\n        if (display_all_students) {\n            this.setState({\n                students_to_display: new Set([student_id]),\n                display_all_students: false\n            })\n        } else if (students_to_display.has(student_id)) {\n            let new_students_to_display = new Set([...students_to_display])\n            new_students_to_display.delete(student_id)\n            this.setState({ students_to_display: new_students_to_display })\n        } else {\n            let new_students_to_display = new Set([...students_to_display])\n            new_students_to_display.add(student_id)\n            this.setState({ students_to_display: new_students_to_display })\n        }\n\n    }\n\n    // keyboardDidHide = () => {\n    //     Keyboard.dismiss();\n    // }\n\n    componentWillUnmount() {\n        // this.keyboardDidHideListener.remove()\n    }\n\n    render() {\n        if (this.props.appetite.err_message !== ''){\n            Alert.alert(\n                'Error!',\n                this.props.appetite.err_message,\n                [{text: 'OK', onPress: () => this.props.clearAppetiteErrorMessage()}]\n            )\n        }\n        const { isAdmin } = this.props.route.params\n        const { mealType, selectedForCustomize, editingFruitType, date, showDateTimeModal, display_all_students, students_to_display } = this.state\n        const { students } = this.props.class\n        // console.log('this.props.appetite: ', this.props.appetite)\n        // console.log('students_to_display: ', students_to_display)\n        // console.log('this.props.appetite.updatedStudents', this.props.appetite.updatedStudents)\n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1,\n                    backgroundColor: mealType === 'Breakfast' ? '#ffe1d0'\n                                    : mealType === 'Fruit' ? '#ffddb7'\n                                    : mealType === 'Lunch' ? '#fff1b5'\n                                    : mealType === 'Snack' ? '#dcf3d0'\n                                    : 'transparent'\n                }}\n                behavior='height'\n                keyboardVerticalOffset={80}\n                enabled\n            >\n                {showDateTimeModal && <TimeModal\n                    start_date={date}\n                    datetime_type={'date'}\n                    hideModal={() => this.setState({ showDateTimeModal: false })}\n                    selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                    minDatetime={null}\n                    maxDatetime={new Date()}\n                />}\n                <View style={styles.subHeading}>\n                    <TouchableHighlight\n                        onPress={() => {\n                            const { data_dispatched } = this.props.appetite\n                            if (!data_dispatched || !isAdmin) return\n                            this.setState({ showDateTimeModal: true })\n                        }}\n                    >\n                        <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#b5e9e9', padding: 10 }}\n                        onPress={this.handleSetAll}>\n                        <Text style={{ color: 'grey', fontSize: 40 }}>全胃口佳</Text>\n                    </TouchableHighlight>\n                    {/* <TouchableHighlight\n                        style={{ backgroundColor: '#ffe1d0', padding: 10  }}\n                        onPress={this.handleClearAll}>\n                        <Text style={{ color: 'grey', fontSize: 40 }}>全部清除</Text>\n                    </TouchableHighlight> */}\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#b5e9e9', padding: 10  }}\n                        onPress={this.handleAllDrank}\n                    >\n                        <Text style={{ color: 'grey', fontSize: 40 }}>全喝水</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#dcf3d0', padding: 10  }}\n                        onPress={this.handleSend}>\n                        <Text style={{ color: 'grey', fontSize: 40 }}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n\n                <View style={styles.mealButtons}>\n                    <TouchableHighlight\n                        style={{\n                            backgroundColor: mealType === 'Breakfast' ? '#fa625f' : '#ffe1d0',\n                            width: '23%',\n                            height: 60,\n                            justifyContent: 'center',\n                            marginHorizontal: '1%',\n                            padding: 10\n                        }}\n                        underlayColor='#fa625f'\n                        onPress={() => this.setState({ mealType: 'Breakfast', editingFruitType: false })}\n                    >\n                        <Text style={styles.mealButtonText}>早餐</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{\n                            backgroundColor: mealType === 'Fruit' ? '#ff8944' : '#ffddb7',\n                            width: '23%',\n                            height: 60,\n                            justifyContent: 'center',\n                            marginHorizontal: '1%',\n                            // padding: 10\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ mealType: 'Fruit' })}\n                        onLongPress={() => this.setState({ mealType: 'Fruit', editingFruitType: true })}\n                    >\n                        {editingFruitType ?\n                            <View style={{ flex: 1 }}>\n                                <Text style={{ paddingLeft: 5 }}>水果:</Text>\n                                <TextInput\n                                    autoFocus={true}\n                                    selectTextOnFocus={true}\n                                    style={{ width: '95%', alignSelf: 'center', fontSize: 25, textAlign: 'center', color: 'grey', borderWidth: 1 }}\n                                    onChangeText={fruit_name => this.editFruitName(fruit_name)}\n                                    value={this.props.appetite.fruit_name}\n                                    onBlur={() => this.fruitNameEditorOnBlur()}\n                                />\n                            </View>\n                        :   <Text style={styles.mealButtonText}>{this.props.appetite.fruit_name}</Text>\n                        }\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{\n                            backgroundColor: mealType === 'Lunch' ? '#f4d41f' : '#fff1b5',\n                            width: '23%',\n                            height: 60,\n                            justifyContent: 'center',\n                            marginHorizontal: '1%',\n                            padding: 10\n                        }}\n                        underlayColor='#f4d41f'\n                        onPress={() => this.setState({ mealType: 'Lunch', editingFruitType: false })}\n                    >\n                        <Text style={styles.mealButtonText}>午餐</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{\n                            backgroundColor: mealType === 'Snack' ? '#00c07f' : '#dcf3d0',\n                            width: '23%',\n                            height: 60,\n                            justifyContent: 'center',\n                            marginHorizontal: '1%',\n                            padding: 10\n                        }}\n                        underlayColor='#00c07f'\n                        onPress={() => this.setState({ mealType: 'Snack', editingFruitType: false })}\n                    >\n                        <Text style={styles.mealButtonText}>點心</Text>\n                    </TouchableHighlight>\n                </View>\n\n                <View style={{ width: '98%', flexDirection: 'row', flexWrap: 'wrap', alignSelf: 'center', justifyContent: 'space-evenly' }}>\n                    <TouchableHighlight\n                        style={{\n                            padding: 5,\n                            backgroundColor: display_all_students ? '#b5e9e9' : 'rgba(255,255,255,0.8)',\n                            marginRight: 3\n                        }}\n                        onPress={() => {\n                            this.setState({\n                                display_all_students: true,\n                                students_to_display: new Set(Object.keys(students))\n                            })\n                        }}\n                    >\n                        <Text style={{ fontSize: 25 }}>全班</Text>\n                    </TouchableHighlight>\n                    {Object.keys(students).map((student_id) => {\n                        return (\n                            <TouchableHighlight\n                                key={student_id}\n                                style={{\n                                    padding: 5,\n                                    backgroundColor: students_to_display.has(student_id) && !display_all_students ? '#b5e9e9' : 'rgba(255,255,255,0.8)',\n                                    marginRight: 3\n                                }}\n                                onPress={() => this.addStudentToDisplayList(student_id)}\n                            >\n                                <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n                \n                <Content contentContainerStyle={{ alignItems: 'center' }}>\n                    {[...students_to_display].reverse().map((student_id) => {\n                        const meal_rating = mealType === '' ? '' : this.props.appetite.ratings[student_id][mealType].slice(0,-1)\n                        const water_drank = mealType === '' ? false : this.props.appetite.ratings[student_id][mealType].slice(-1) === '1'\n                        return (\n                            <View\n                                key={student_id}\n                                style={{ width: '98%' }}\n                            >\n                                <Card>\n                                    <CardItem>\n                                        <View style={styles.childThumbnail}>\n                                            <Image\n                                                source={\n                                                    this.props.class.students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: this.props.class.students[student_id].profile_picture}\n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </View>\n                                        <View style={{ width: '80%' }}>\n                                            <View style={{ flex: 1 }}>\n                                                <View style={{ flex: 1, flexDirection: 'row' }}>\n                                                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                                                        <Text style={{ fontSize: 30, paddingLeft: 18, alignSelf: 'center' }}>\n                                                            {this.props.class.students[student_id].name}\n                                                        </Text>\n                                                    </View>\n                                                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: '80%',\n                                                                borderWidth: 2,\n                                                                borderColor: '#368cbf',\n                                                                padding: 10,\n                                                                justifyContent: 'center',\n                                                                backgroundColor: water_drank ? '#368cbf': 'white'\n                                                            }}\n                                                            onPress={() => this.markWaterDrank(student_id)}\n                                                        >\n                                                            <Text style={{\n                                                                textAlign: 'center',\n                                                                color: water_drank ? '#D3D3D3': 'grey',\n                                                                fontSize: 17\n                                                            }}>有喝水</Text>\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                    <View style={{ flex: 2, alignItems: 'flex-end'}}>\n                                                        {this.props.appetite.updatedStudents.has(student_id) ?\n                                                            <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                            : null\n                                                        }\n                                                    </View>\n                                                </View>\n                                                <View style={{...styles.cardBody, marginVertical: 15}}>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '30%',\n                                                            height: '100%',\n                                                            // marginRight: '3%',\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === '胃口佳' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 15\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, '胃口佳')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === '胃口佳' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            胃口佳\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '30%',\n                                                            height: '100%',\n                                                            // marginRight: '3%',\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === '滿滿一碗' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 15\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, '滿滿一碗')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === '滿滿一碗' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            滿滿一碗\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '30%',\n                                                            height: '100%',\n                                                            // marginRight: '3%',\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === '７/8分滿' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 15\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, '７/8分滿')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === '７/8分滿' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            ７/8分滿\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                </View>\n                                                <View style={styles.cardBody}>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '30%',\n                                                            height: '100%',\n                                                            // margin: 5,\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === '半碗' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 15\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, '半碗')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === '半碗' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            半碗\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '30%',\n                                                            height: '100%',\n                                                            // margin: 5,\n                                                            justifyContent: 'center',\n                                                            backgroundColor: meal_rating === '胃口不佳' ? '#368cbf' : '#b5e9e9',\n                                                            padding: 15\n                                                        }}\n                                                        onPress={() => this.handleRateFoodWellness(student_id, '胃口不佳')}\n                                                    >\n                                                        <Text\n                                                            style={{\n                                                                textAlign: 'center',\n                                                                color: meal_rating === '胃口不佳' ? '#D3D3D3' : 'grey',\n                                                                fontSize: 20\n                                                            }}\n                                                        >\n                                                            胃口不佳\n                                                        </Text>\n                                                    </TouchableHighlight>\n                                                    <TouchableHighlight\n                                                        style={{\n                                                            width: '30%',\n                                                            height: '100%',\n                                                            // margin: 5,\n                                                            justifyContent: 'center',\n                                                            backgroundColor:\n                                                                this.isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ?\n                                                                    '#368cbf'\n                                                                    : '#b5e9e9',\n                                                            padding: 15\n                                                        }}\n                                                        onPress={() => this.onClickOther(student_id)}\n                                                    >\n                                                        {this.isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ?\n                                                            <TextInput\n                                                                style={{\n                                                                    textAlign: 'center',\n                                                                    color: '#D3D3D3',\n                                                                    fontSize: 20\n                                                                }}\n                                                                maxLength={6}\n                                                                autoFocus={meal_rating === '' ? true : false}\n                                                                onChangeText={customized_text => this.onCustomizeRating(student_id, customized_text)}\n                                                                value={meal_rating}\n                                                                onBlur={() => this.customizedRatingOnBlur(student_id)}\n                                                            />\n                                                            : <Text\n                                                                style={{\n                                                                    textAlign: 'center',\n                                                                    color: this.isRatingCustomized(meal_rating) || selectedForCustomize.has(student_id) ? '#D3D3D3' : 'grey',\n                                                                    fontSize: 20\n                                                                }}\n                                                            >\n                                                                Other\n                                                            </Text>\n                                                        }\n                                                    </TouchableHighlight>\n                                                </View>\n                                            </View>\n                                        </View>\n                                    </CardItem>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </Content>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        width: '20%',\n        // width: 100,\n        // height: '100%',\n        justifyContent: 'center',\n        alignItems: 'center',\n        // marginLeft: -7,\n        // backgroundColor: 'red'\n    },\n    cardBody: {\n        flex: 1,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        // marginBottom: 15\n        // backgroundColor: 'lightblue'\n    },\n    foodButton: {\n        width: 70,\n        alignSelf: 'center',\n        margin: 5,\n        justifyContent: 'center',\n        backgroundColor: '#b5e9e9'\n    },\n    thumbnailImage: {\n        height: 130,\n        width: 130,\n        borderRadius: 65\n    },\n    subHeading: {\n        width: '99%',\n        // height: 45,\n        paddingHorizontal: '4%',\n        // marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        // backgroundColor: '#ccd2dd',\n        zIndex: 2\n    },\n    mealButtons: {\n        width: '99%',\n        // height: 45,\n        marginVertical: 15,\n        // marginTop: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        // zIndex: 1,\n        // position: 'absolute'\n    },\n    mealButtonText: {\n        fontSize: 30,\n        textAlign: 'center'\n    },\n    buttonText: {\n        color: 'grey',\n        textAlign: 'center'\n    }\n})\n\nconst mapStatesToProps = (state) => {\n    return {\n        class: state.classInfo,\n        appetite: state.appetite\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            rateAppetite,\n            clearRatings,\n            setAllRatingsToGreat,\n            setAllDrinkWater,\n            fetchClassAppetiteData,\n            onSendAppetiteSuccess,\n            alertErrMessage,\n            markWaterDrank,\n            editFruitName,\n            clearAppetiteErrorMessage,\n            addStudentIdForUpdate\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStatesToProps, mapDispatchToProps) (TeacherAppetiteLog)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, Alert } from 'react-native'\nimport { Container, Content, Text, View, Card, Toast} from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    setSleepTime,\n    setWakeTime,\n    fetchClassSleepData,\n    clearPendingSleepUpdate,\n    createSleepRecordSuccess,\n    createSleepRecordFail,\n    editSleepRecordSuccess,\n    editSleepRecordFail,\n    removeSleepRecord,\n    removeSleepRecordSuccess,\n    removeSleepRecordFail,\n    alertSleeplogErrorMessage,\n    clearSleeplogErrorMessage,\n    removeWakeTime,\n    markRecordError,\n    markRecordCorrect\n} from '../../../redux/school/actions/index'\nimport { formatDate, formatTime, fetchClassData } from '../../util'\nimport Reloading from '../../reloading'\nimport TimeModal from '../../parent/timemodal'\n\n\nclass TeacherSleepLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            showIOSDatePicker: false,\n            student_id: '',\n            index: -1,\n            recordType: '',\n            teacher_id: '',\n            confirmDelete: false,\n            showDateTimeModal: false\n        }\n        this.handleOnClick = this.handleOnClick.bind(this)\n        this.handleSend = this.handleSend.bind(this)\n        this.updateReducerTime = this.updateReducerTime.bind(this)\n        this.setTime = this.setTime.bind(this)\n    }\n\n    componentDidMount() {\n        const { newDataForCreate, oldDataForEdit } = this.props.sleep\n        const { isConnected } = this.props.class\n        const { teacher_id, date, teacher_name } = this.props.route.params\n        this.setState({ teacher_id })\n        if ((newDataForCreate.size + oldDataForEdit.size === 0) && isConnected) {\n            this.fetchClassData(date)\n        }\n        else {\n            this.setState({\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n\n        this.props.navigation.setOptions({ \n            title: `睡眠 - ${teacher_name}`\n        })\n    }\n\n    async fetchClassData(propsDate) {\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n            )\n        })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const sleepData = await fetchClassData('sleep', this.props.class.class_id, start_date, end_date)\n        this.denormalize(sleepData)\n        this.props.fetchClassSleepData(sleepData.data)\n        this.setState({\n            isLoading: false\n        })\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    denormalize(sleepData) {\n        if (!sleepData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = sleepData.data.records\n        for (var record_id in by_id) {\n            by_id[record_id].sleep_time = new Date(by_id[record_id].sleep_time)\n            by_id[record_id].wake_time = by_id[record_id].wake_time === null ? null : new Date(by_id[record_id].wake_time)\n        }\n        sleepData.data.records.by_id = by_id\n    }\n\n    hasUnsentRecord(student_id) {\n        const { newDataForCreate, oldDataForEdit, by_student_id } = this.props.sleep\n        let record_id_array = by_student_id[student_id]\n        var hasUnsentRecord = false\n        for (var i = 0; i < record_id_array.length; i++) {\n            if (newDataForCreate.has(record_id_array[i]) || oldDataForEdit.has(record_id_array[i])) {\n                hasUnsentRecord = true\n                break\n            }\n        }\n        return hasUnsentRecord\n    }\n\n    handleOnClick(student_id) {\n        const record_id_array = this.props.sleep.by_student_id[student_id]\n        const records = this.props.sleep.records.by_id\n        const last_record = record_id_array.length > 0 ? records[record_id_array[record_id_array.length - 1]] : null\n        const current_wake_time = last_record ? last_record.wake_time : null\n\n        if (!record_id_array.length || current_wake_time) {\n            this.props.setSleepTime(student_id, null, new Date(), this.state.teacher_id)\n        } else {\n            this.props.setWakeTime(student_id, record_id_array.length - 1, new Date(), this.state.teacher_id)\n        }\n        this.checkLastRecord(student_id, records, record_id_array)\n    }\n\n    checkLastRecord(student_id, records, record_id_array) {\n        const n = record_id_array.length\n        const last_record_id = record_id_array[record_id_array.length - 1]\n        const last_record = records[last_record_id]\n        if (last_record.wake_time !== null && last_record.sleep_time.getTime() >= last_record.wake_time.getTime()) {\n            this.props.markRecordError([last_record_id])\n        } \n        \n        if (n > 1) {\n            const last_second_record_id = record_id_array[record_id_array.length - 2]\n            const last_second_record = records[last_second_record_id]\n            if (last_record.sleep_time >= last_second_record.sleep_time && last_record.sleep_time <= last_second_record.wake_time) {\n                this.props.markRecordError([last_record_id])\n            }\n        }\n    }\n\n    setTime(recordType, student_id, index, start_time) {\n        this.setState({\n            student_id,\n            index,\n            recordType,\n            showDateTimeModal: true,\n            start_time: start_time ? start_time : new Date()\n        })\n    }\n\n    updateReducerTime(index, time) {\n        this.setState({ showDateTimeModal: false })\n        if (this.state.recordType === 'sleep') {\n            this.props.setSleepTime(this.state.student_id, index, time, this.state.teacher_id)\n        } else {\n            this.props.setWakeTime(this.state.student_id, index, time, this.state.teacher_id)\n        }\n        this.checkRecord(this.state.student_id, index)\n    }\n\n    checkRecord(student_id, index) {\n        const record_id_array = this.props.sleep.by_student_id[student_id]\n        const records = this.props.sleep.records.by_id\n        const record_id = record_id_array[index]\n        const record = records[record_id]\n        const { records_with_error } = this.props.sleep\n        let prev_record_id = null\n        let next_record_id = null\n\n        if (index < 0 || index > record_id_array.length - 1) {\n            return\n        }\n\n        if (record.wake_time !== null) {\n            if(record.sleep_time.getTime() >= record.wake_time.getTime()) {\n                this.props.markRecordError([record_id])\n                return\n            }\n        }\n\n        if (index > 0) {\n            prev_record_id = record_id_array[index-1]\n            const prev_record = records[prev_record_id]\n            if (//record.sleep_time.getTime() >= prev_record.sleep_time.getTime() && \n                prev_record.wake_time !== null &&\n                record.sleep_time.getTime() <= prev_record.wake_time.getTime()) {\n                this.props.markRecordError([record_id])\n                return\n            }\n        }\n\n        if (index < record_id_array.length - 1) {\n            next_record_id = record_id_array[index+1]\n            const next_record = records[next_record_id]\n            if (record.wake_time >= next_record.sleep_time) {\n                this.props.markRecordError([record_id])\n                return\n            }\n        }\n\n        this.props.markRecordCorrect(record_id)\n\n        if (prev_record_id !== null && records_with_error.has(prev_record_id)) {\n            this.checkRecord(student_id, index-1)\n            // console.log('records_with_error.has(prev_record_id: ', records_with_error.has(prev_record_id))\n        }\n\n        if (next_record_id !== null && records_with_error.has(next_record_id)) {\n            // console.log('records_with_error.has(next_record_id: ', records_with_error.has(next_record_id))\n            this.checkRecord(student_id, index+1)\n        }\n    }\n\n    confirmToRemoveWakeTime(record_id, index, student_id) {\n        const record_id_array = this.props.sleep.by_student_id[student_id]\n        if (index !== record_id_array.length - 1) {\n            // cannot remove wake time if it is not the most recent record\n            this.props.alertSleeplogErrorMessage('這個睡眠記錄並不能刪除，只能改選')\n            return\n        }\n        Alert.alert(\n            '確定要刪除?',\n            '',\n            [\n                { text: 'Yes', onPress: () => this.props.removeWakeTime(record_id, this.state.teacher_id) },\n                { text: 'Cancel', style: 'cancel'}]\n        )\n    }\n\n    async handleSend() {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.setState({\n            isLoading: true\n        })\n        const { newDataForCreate, oldDataForEdit } = this.props.sleep\n        \n        if (newDataForCreate.size) {\n            const createSleepRecordRes = await this.createRecord()\n            if (createSleepRecordRes.success) {\n                // console.log('SUCCESS')\n                this.props.createSleepRecordSuccess()\n            } else {\n                this.props.createSleepRecordFail()\n                return\n            }\n        }\n\n        if (oldDataForEdit.size) {\n            const editSleepRecordRes = await this.editRecord()\n            if (editSleepRecordRes.success) {\n                this.props.editSleepRecordSuccess()\n            } else {\n                this.props.editSleepRecordFail()\n                return\n            }\n        }\n\n        this.props.navigation.goBack()\n    }\n\n    async createRecord() {\n        const { newDataForCreate, records } = this.props.sleep\n        \n        const data_objs = []\n        newDataForCreate.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n\n        this.normalize(data_objs)\n\n        var request_body = {\n            date: formatDate(this.state.date),\n            data_objs\n        }\n\n        const createSleepRecordRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('sleep resJson: ', resJson)\n                if (resJson['statusCode'] > 200) {\n                    return {\n                        success: false,\n                        status_code: resJson['statusCode'],\n                        data: resJson.message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return createSleepRecordRes\n    }\n\n    async editRecord() {\n        const { oldDataForEdit, records } = this.props.sleep\n        const data_objs = []\n        oldDataForEdit.forEach(record_id => {\n            data_objs.push({\n                record_id,\n                ...records.by_id[record_id]\n            })\n        })\n\n        this.normalize(data_objs)\n\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const editRecordRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        }).then(res => res.json())\n        .then(resJson => {\n            if (resJson['statusCode'] > 200) {\n                return {\n                    success: false,\n                    status_code: resJson['statusCode'],\n                    data: resJson.message\n                }\n            }\n            return {\n                success: true,\n                status_code: 200,\n                data: resJson\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                status_code: 500,\n                data: err\n            }\n        })\n        return editRecordRes\n    }\n\n    confirmToRemoveRecord(record_id, student_id) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'Yes', onPress: () => this.removeRecord(record_id, student_id) },\n                { text: 'Cancel', style: 'cancel' }\n            ]\n        )\n    }\n\n    removeRecord(record_id, student_id) {\n        const { newDataForCreate } = this.props.sleep\n        const { isConnected } = this.props.class\n\n        if (newDataForCreate.has(record_id)) {\n            this.props.removeSleepRecordSuccess(record_id, student_id)\n            return\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/sleep`\n        fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                record_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    this.props.removeSleepRecordFail(message)\n                    return {\n                        success: false,\n                        statusCode,\n                        message\n                    }\n                }\n                this.props.removeSleepRecordSuccess(record_id, student_id)\n                return {\n                    success: true,\n                    statusCode,\n                    message\n                }\n            })\n            .catch(err => {\n                this.props.removeSleepRecordFail(err)\n                return {\n                    success: false,\n                    message: err\n            }\n        })\n    }\n\n    normalize(data_objs) {\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].sleep_time = formatTime(data_objs[i].sleep_time)\n            data_objs[i].wake_time = data_objs[i].wake_time === null ? null : formatTime(data_objs[i].wake_time)\n        }\n    }\n\n    render() {\n        if (this.props.sleep.errorMessage !== ''){\n            Alert.alert(\n                'Add new record fail',\n                this.props.sleep.errorMessage,\n                [{text: 'OK', onPress: () => this.props.clearSleeplogErrorMessage()}]\n            )\n        }\n        const { records_with_error } = this.props.sleep\n        const { showDateTimeModal, start_time, date } = this.state\n        // console.log('records_with_error: ', records_with_error)\n        // console.log('showDateTimeModal: ', showDateTimeModal)\n        if (this.state.isLoading) {\n            return <Reloading />\n        }\n        return (\n            <Container>\n                {showDateTimeModal ?\n                    <TimeModal\n                        start_date={start_time}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showDateTimeModal: false })}\n                        selectDatetimeConfirm={(time) => this.updateReducerTime(this.state.index, time)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n                <View style={styles.subHeading}>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                        <TouchableHighlight\n                            style={{ alignSelf: 'flex-end', backgroundColor: '#dcf3d0', padding: 10, marginRight: 50 }}\n                            onPress={this.handleSend}\n                            underlayColor=\"#00c07f\"\n                        >\n                            <Text style={{ fontSize: 40, color: 'grey' }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n                <Content contentContainerStyle={{ alignItems: 'center' }}>\n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const record_id_array = this.props.sleep.by_student_id[student_id] // [record_id, ...]\n                        const records = this.props.sleep.records.by_id\n                        const last_record = record_id_array.length > 0 ? records[record_id_array[record_id_array.length - 1]] : null\n                        const current_sleep_time = last_record ? last_record.sleep_time : null\n                        const current_wake_time = last_record ? last_record.wake_time : null\n                        return(\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, paddingVertical: 15 }}>\n                                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <TouchableHighlight\n                                                key={student_id}\n                                                style={styles.thumbnail}\n                                                onPress={() => this.handleOnClick(student_id)}>\n                                                <Image\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={{\n                                                        width: 140,\n                                                        height: 140,\n                                                        borderRadius: 70,\n                                                        borderWidth: 8,\n                                                        borderColor: current_sleep_time !== null ? (current_wake_time === null ? '#ffe1d0' : '#dcf3d0') : '#dcf3d0'\n                                                    }} />\n                                            </TouchableHighlight>\n                                        </View>\n                                        <View style={{ flex: 3 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row', padding: 10 }}>\n                                                <View style={{ flex: 1 }}>\n                                                    <Text style={{ fontSize: 30 }}>{this.props.class.students[student_id].name}</Text>\n                                                </View>\n                                                <View style={{ flex: 1, alignItems: 'flex-end' }}>\n                                                    {this.hasUnsentRecord(student_id) ? \n                                                        <Text style={{ color: 'red', fontSize: 15 }}>未送出</Text>\n                                                    : null}\n                                                </View>\n                                            </View>\n                                            <View style={styles.cardBody}>\n                                                <View style={{ width: '40%', height: '100%', paddingLeft: 5 }}>\n                                                    <Text style={{ fontSize: 20 }}>從</Text>\n                                                </View>\n                                                <View style={{ width: '40%', height: '100%', paddingLeft: 5 }}>\n                                                    <Text style={{ fontSize: 20 }}>到</Text>\n                                                </View>\n                                            </View>\n                                            {record_id_array.map((record_id, index) => {\n                                                let { sleep_time, wake_time } = records[record_id]\n                                                return (\n                                                    <View key={record_id} style={{\n                                                        ...styles.cardBody, \n                                                        borderWidth: 2, \n                                                        borderColor: records_with_error.has(record_id) ? 'red' : 'white'\n                                                    }}>\n                                                        <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10}}\n                                                                onPress={() => this.setTime('sleep', student_id, index, sleep_time)}\n                                                            >\n                                                                {sleep_time === null ?\n                                                                    <Text style={{ fontSize: 30, textAlign: 'center' }}>選擇時間</Text> :\n                                                                    <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                        {sleep_time.getHours() + ':' + sleep_time.getMinutes()}\n                                                                    </Text>}\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                        <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10 }}\n                                                                onPress={() => this.setTime('wake', student_id, index, wake_time)}\n                                                                onLongPress={() => this.confirmToRemoveWakeTime(record_id, index, student_id)}\n                                                            >\n                                                                {wake_time === null ?\n                                                                    <Text style={{ fontSize: 30, textAlign: 'center' }}>選擇時間</Text> :\n                                                                    <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                        {wake_time.getHours() + ':' + wake_time.getMinutes()}\n                                                                    </Text>}\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                        <View style={{ width: '20%', marginRight: '4%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#ffe1d0', borderRadius: 10 }}\n                                                                onPress={() => this.confirmToRemoveRecord(record_id, student_id)}\n                                                            >\n                                                                <Text style={{ fontSize: 30, textAlign: 'center' }}>移除</Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                    </View>\n                                                )\n                                            })}\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </Content>\n                {/* {this.state.showIOSDatePicker ?\n                    <View style={{ height: 200, justifyContent: 'center'}}>\n                        <DatePickerIOS\n                            mode={'time'}\n                            date={new Date()}\n                            onDateChange={(time) => this.updateReducerTime(this.state.index, time)}\n                        />\n                    </View> : null} */}\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnail: {\n        // width: 100,\n        // height: 100,\n        // borderRadius: 50,\n        // backgroundColor: 'transparent',\n        // marginLeft: -7,\n    },\n    subHeading: {\n        // width: 355,\n        // height: 45,\n        // marginTop: 10,\n        // padding: 10,\n        flexDirection: 'row',\n        alignItems: 'center',\n        // justifyContent: 'space-between',\n    },\n    cardBody: {\n        flex: 1,\n        flexDirection: 'row',\n        marginVertical: 6\n    },\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        sleep: state.sleep\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setSleepTime,\n            setWakeTime,\n            fetchClassSleepData,\n            clearPendingSleepUpdate,\n            createSleepRecordSuccess,\n            createSleepRecordFail,\n            editSleepRecordSuccess,\n            editSleepRecordFail,\n            removeSleepRecord,\n            removeSleepRecordSuccess,\n            removeSleepRecordFail,\n            alertSleeplogErrorMessage,\n            clearSleeplogErrorMessage,\n            removeWakeTime,\n            markRecordError,\n            markRecordCorrect\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherSleepLog)","import React from 'react'\nimport { StyleSheet, Image, TouchableHighlight, View, Text, TextInput, Alert} from 'react-native'\nimport { Container, Content, Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n    editMilkAmount,\n    addMilkRecord,\n    fetchClassMilkData,\n    createDataSuccess,\n    createDataFail,\n    editDataSuccess,\n    editDataFail,\n    removeRecord,\n    removeMilkRecordSuccess,\n    removeMilkRecordFail,\n    editMilkTime\n} from '../../../redux/school/actions/index'\nimport { formatTime, formatDate, fetchClassData } from '../../util'\nimport Reloading from '../../reloading'\nimport TimeModal from '../../parent/timemodal'\n\nclass TeacherMilkLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            showDateTimeModal: false,\n            record_id: ''\n        }\n        this.handleSend = this.handleSend.bind(this)\n        this.handleOnAddRecord = this.handleOnAddRecord.bind(this)\n    }\n\n    componentDidMount() {\n        const { isConnected } = this.props.class\n        const { date, teacher_name } = this.props.route.params\n        if (!this.props.milk.loaded && isConnected) {\n            this.fetchClassData(date)\n        }\n        else {\n            this.setState({\n                isLoading: false\n            })\n        }\n\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n\n        this.props.navigation.setOptions({ \n            title: `餵奶 - ${teacher_name}`\n        })\n    }\n\n    checkUnsent(student_id) {\n        const { newDataForCreate, oldDataForEdit, dataForRemoval, by_student_id } = this.props.milk\n        const record_id_list = by_student_id[student_id]\n        var found = false\n        for (var i = 0; i < record_id_list.length; i++) {\n            const record_id = record_id_list[i]\n            if (newDataForCreate.has(record_id) || oldDataForEdit.has(record_id)) {\n                found = true\n                break\n            }\n        }\n        return found\n    }\n\n    async fetchClassData(propsDate) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n            )\n        })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const milkData = await fetchClassData('milkintake', this.props.class.class_id, start_date, end_date)\n        this.denormalize(milkData)\n        this.props.fetchClassMilkData(milkData.data)\n        this.setState({\n            isLoading: false\n        })\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    denormalize(milkData) {\n        if (!milkData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = milkData.data.records\n        for (const record_id in by_id) {\n            by_id[record_id].time = new Date(by_id[record_id].time)\n        }\n    }\n\n    handleEditMilkAmout(record_id, milk_amount) {\n        const { teacher_id } = this.props.route.params\n        this.props.editMilkAmount(record_id, milk_amount, teacher_id)\n    }\n\n    handleOnAddRecord(student_id) {\n        this.props.addMilkRecord(student_id)\n    }\n\n    confirmToRemoveRecord(student_id, record_id, index) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'Yes', onPress: () => this.handleRemoveRecord(student_id, record_id, index) },\n                { text: 'Cancel', style: 'cancel' }\n            ]\n        )\n    }\n\n    handleRemoveRecord(student_id, record_id, index) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.props.removeRecord(student_id, record_id, index)\n        this.handleRemove(record_id, student_id)\n    }\n\n    async handleSend() {\n        // this.setState({ isLoading: true })\n        const { newDataForCreate, oldDataForEdit, dataForRemoval } = this.props.milk\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        if (newDataForCreate.size) {\n            const handleCreateRes = await this.handleCreate()\n            // console.log('handleCreateRes: ', handleCreateRes)\n            if (handleCreateRes.success) {\n                this.props.createDataSuccess()\n            } else {\n                this.props.createDataFail(handleCreateRes.data)\n                return\n            }\n        }\n\n        if (oldDataForEdit.size) {\n            const handleEditRes = await this.handleEdit()\n            // console.log('handleEditRes: ', handleEditRes)\n            if (handleEditRes.success) {\n                this.props.editDataSuccess()\n            } else {\n                this.props.editDataFail(handleEditRes.data)\n                return\n            }\n        }\n        // this.setState({ isLoading: false })\n        this.props.navigation.goBack()\n    }\n\n    async handleCreate() {\n        const { newDataForCreate, records } = this.props.milk\n        const data_objs = []\n        newDataForCreate.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const createDataRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('milklog/resJson: ', resJson)\n                const {statusCode, errMessage, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: errMessage || message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return createDataRes\n    }\n\n    async handleEdit() {\n        const { oldDataForEdit, records } = this.props.milk\n        const data_objs = []\n        \n        oldDataForEdit.forEach(record_id => {\n            data_objs.push({\n                record_id,\n                ...records.by_id[record_id]\n            })\n        })\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n\n        const editDataRes = await fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake', {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const {statusCode, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n        return editDataRes\n    }\n\n    async handleRemove(record_id, student_id) {\n        const { dataForRemoval } = this.props.milk\n\n        if (!dataForRemoval.has(record_id)) {\n            return\n        }\n\n        var request_body = {\n            record_id_array: record_id,\n            student_id\n        }\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/milkintake`\n        const removeRes = await fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const {statusCode, message } = resJson\n                if (statusCode > 200) {\n                    return {\n                        success: false,\n                        status_code: statusCode,\n                        data: message\n                    }\n                }\n                return {\n                    success: true,\n                    status_code: 200,\n                    data: resJson\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: err\n                }\n            })\n\n        if (removeRes.success) {\n            this.props.removeMilkRecordSuccess()\n        } else {\n            this.props.removeMilkRecordFail()\n        }\n    }\n\n    normalize(data_objs) {\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].time = formatTime(data_objs[i].time)\n        }\n    }\n\n    selectDatetimeConfirm(time) {\n        const { teacher_id } = this.props.route.params\n        const { record_id } = this.state\n        this.setState({ record_id: '', showDateTimeModal: false })\n        this.props.editMilkTime(record_id, time, teacher_id)\n    }\n\n    render() {\n        if (this.state.isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n\n        const { date, showDateTimeModal } = this.state\n        return (\n            <Container>\n                {showDateTimeModal ?\n                    <TimeModal\n                        start_date={date}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showDateTimeModal: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                    />\n                    : null\n                }\n                <View style={styles.subHeading}>\n                    <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n                    <TouchableHighlight\n                        style={{ backgroundColor: '#dcf3d0', padding: 10 }}\n                        onPress={this.handleSend}\n                    >\n                        <Text style={{ fontSize: 40, color: 'grey' }}>送出</Text>\n                    </TouchableHighlight>\n                </View>\n                <Content contentContainerStyle={{ alignItems: 'center' }}>\n                    {Object.keys(this.props.class.students).map((student_id) => {\n                        const record_id_array = this.props.milk.by_student_id[student_id]\n                        const records = this.props.milk.records.by_id\n                        return(\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, paddingVertical: 15 }}>\n                                    <View style={{ flex: 1, flexDirection: 'row'}}>\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <TouchableHighlight\n                                                style={styles.childThumbnail}\n                                                onPress={() => this.handleOnAddRecord(student_id)}\n                                                underlayColor=\"transparent\"\n                                            >\n                                                <Image\n                                                    // source={{uri: this.props.class.students[student_id].profile_picture }}\n                                                    source={\n                                                        this.props.class.students[student_id].profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                            : {uri: this.props.class.students[student_id].profile_picture}\n                                                    }\n                                                    style={styles.thumbnailImage}/>\n                                            </TouchableHighlight>\n                                        </View>\n                                        <View style={{ flex: 3}}>\n                                            <View style={{ flexDirection: 'row'}}>\n                                                <View style={{ flex: 1 }}>\n                                                    <Text style={{ fontSize: 30, paddingLeft: 18 }}>{this.props.class.students[student_id].name}</Text>\n                                                </View>\n                                                <View style={{ flex: 1, paddingRight: 15 }}>\n                                                    {this.checkUnsent(student_id) ?\n                                                        <Text style={{ fontSize: 15, paddingLeft: 18, alignSelf: 'flex-end', color: 'red' }}>\n                                                            未送出\n                                                        </Text>\n                                                        : null\n                                                    }\n                                                </View>\n                                            </View>\n                                            {record_id_array.map((record_id, index) => {\n                                                const record = records[record_id]\n                                                return (\n                                                    <View key={record_id} style={styles.cardBody}>\n                                                        <View style={{ width: '35%', marginRight: '3%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex: 1, justifyContent: 'center', backgroundColor: '#fef6dd', borderRadius: 10 }}\n                                                                onPress={() => this.setState({ showDateTimeModal: true, record_id})}\n                                                            >\n                                                                <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                    {record.time.getHours() + ':' + record.time.getMinutes()}\n                                                                </Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                        <View style={{\n                                                            flexDirection: 'row',\n                                                            width: '35%',\n                                                            marginRight: '3%',\n                                                            alignItems: 'center',\n                                                            justifyContent: 'center',\n                                                            backgroundColor: '#fef6dd',\n                                                            height: '100%',\n                                                            borderRadius: 10\n                                                        }}>\n                                                            <TextInput\n                                                                style={{ flex: 2, fontSize: 35, textAlign: 'center' }}\n                                                                keyboardType='decimal-pad'\n                                                                placeholder=\"⽤量\"\n                                                                value={'' + record.amount}\n                                                                onChangeText={(milk_amount) => {this.handleEditMilkAmout(record_id, milk_amount)}}\n                                                            />\n                                                            <Text style={{ flex: 1, fontSize: 30, textAlign: 'center' }}>\n                                                                c.c.\n                                                            </Text>\n                                                        </View>\n                                                        <View style={{ width: '20%', marginRight: '4%', height: '100%' }}>\n                                                            <TouchableHighlight\n                                                                style={{ flex:1, justifyContent: 'center', backgroundColor: '#ffe1d0', borderRadius: 10}}\n                                                                onPress={() => this.confirmToRemoveRecord(student_id, record_id, index)}\n                                                            >\n                                                                <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                    移除\n                                                                </Text>\n                                                            </TouchableHighlight>\n                                                        </View>\n                                                    </View>\n                                                )\n                                            })}\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    childThumbnail: {\n        // width: 100,\n        // height: 100,\n        // backgroundColor: 'white',\n        // marginLeft: -7,\n    },\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    },\n    subHeading: {\n        width: '90%',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        alignSelf: 'center'\n    },\n    cardBody: {\n        // flex: 1,\n        flexDirection: 'row',\n        marginVertical: 6\n        // alignItems: 'center',\n        // justifyContent: 'center',\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        milk: state.milk\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            editMilkAmount,\n            addMilkRecord,\n            fetchClassMilkData,\n            createDataSuccess,\n            createDataFail,\n            editDataSuccess,\n            editDataFail,\n            removeRecord,\n            removeMilkRecordSuccess,\n            removeMilkRecordFail,\n            editMilkTime\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (TeacherMilkLog)","import React from 'react'\nimport { TextInput } from 'react-native'\n\nexport default class PooTextInput extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            other_option: '其他'\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            other_option: '其他'\n        }, () => {\n            console.log('mounted', this.refs.textRef.isFocused())\n        })\n    //    this.refs.textRef.focus()\n    //    console.log('mounted', this.refs.textRef.isFocused())\n    }\n\n    onBlur(other_option) {\n        console.log('onBlur')\n        this.setState({\n            other_option: ''\n        })\n        this.props.editPooCondition(other_option)\n    }\n\n    // componentWillUnmount() {\n        \n    // }\n\n    render() {\n        const { other_option } = this.state\n        console.log('other_option ===: ',other_option === '其他')\n        return (\n            <TextInput\n                ref={\"textRef\"}\n                autoFocus={other_option === '其他'}\n                selectTextOnFocus={true}\n                style={{ fontSize: 30, textAlign: 'center' }}\n                // keyboardType='default'\n                value={other_option}\n                onChangeText={(condition) => this.setState({ other_option: condition})}\n                onEndEditing={() => this.props.editPooCondition(other_option)}\n                onBlur={() => this.onBlur(other_option)}\n            />\n        )\n    }\n}","import React from 'react'\nimport { Card, Toast } from 'native-base'\nimport { View, ScrollView, Text, Image, TouchableHighlight, StyleSheet, TextInput, KeyboardAvoidingView, Alert } from 'react-native'\nimport DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, fetchClassData, beautifyDate } from '../../util'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n    updateDiaperAmount,\n    addDiaperRecord,\n    editDiaperTime,\n    switchPeeOrPoo,\n    editPooCondition,\n    removeDiaperRecordSuccess,\n    removeDiaperRecordFail,\n    fetchClassDiaperData,\n    createDiaperRecordSuccess,\n    createDiaperRecordFail,\n    editDiaperRecordSuccess,\n    editDiaperRecordFail,\n    editDiaperAmountSuccess,\n    editDiaperAmountFail,\n    clearDiaperlogErrorMessage\n} from '../../../redux/school/actions/index'\nimport PickerComponent from '../../picker'\nimport PooTextInput from './pootextinput'\n\nclass PooEntry extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            selected_other: false,\n            other_option: ''\n        }\n    }\n\n    componentDidMount() {\n       \n    }\n\n    editPooCondition(record_id, condition) {\n        // console.log('editPooCondition: ', record_id, condition, teacher_id)\n        const { teacher_id } = this.props\n        if (condition === '取消編輯') {\n            return \n        } else if (condition === '其他') {\n            this.setState({\n                selected_other: true,\n                other_option: ' '\n            })\n            \n        } else {\n            console.log('editPooCondition: ', record_id, condition, teacher_id)\n            this.setState({\n                selected_other: false,\n                other_option: condition\n            })\n            this.props.editPooCondition(record_id, condition, teacher_id)\n        }\n    }\n\n    render() {\n        // TODO: Provide some options for poo condition\n        // if (this.props.diaper_records.err_message !== ''){\n        //     Alert.alert(\n        //         'Error!',\n        //         this.props.diaper_records.err_message,\n        //         [{text: 'OK', onPress: () => this.props.clearDiaperlogErrorMessage()}]\n        //     )\n        // }\n        const { record_id, record } = this.props\n        const { selected_other,other_option } = this.state\n        // const { by_student_id, records } = this.props.diaper_records\n        // const { students } = this.props.class\n        // const date = this.state.date\n        // console.log('record_id: ', record_id)\n        return (\n            <View\n                style={{\n                    width: '23%',\n                    // marginRight: '3%',\n                    height: '100%',\n                    justifyContent: 'center',\n                    backgroundColor: '#fef6dd',\n                    borderRadius: 10\n                }}\n            >\n                {selected_other ?\n                    <TextInput\n                        style={{ fontSize: 30, textAlign: 'center' }}\n                        keyboardType='default'\n                        autoFocus={selected_other}\n                        // showSoftInputOnFocus={true}\n                        selectTextOnFocus={true}\n                        // scrollEnabled={false}\n                        value={other_option}\n                        onChangeText={(condition) => this.setState({ other_option: condition})}\n                        // onFocus={() => }\n                        onBlur={() => this.editPooCondition(record_id, other_option)}\n                    />\n\n                    // <PooTextInput\n                    //     editPooCondition={(other_option) => this.editPooCondition(record_id, other_option)}\n                    // />\n\n                    : <PickerComponent\n                        style={{\n                            // height: 20,\n                            // width: '50%',\n                            // marginLeft: 25\n                            alignItems: 'center',\n                            padding: 5\n                        }}\n                        selectedValue={other_option || record.poo_condition}\n                        options={[\n                            \"正常\",\n                            \"硬\",\n                            \"軟糊\",\n                            \"稀水\",\n                            \"其他\",\n                            \"取消編輯\"\n                        ]}\n                        textStyle={{ fontSize: 30 }}\n                        handleOnClick={() => { }}\n                        handleSelectValue={(condition) => this.editPooCondition(record_id, condition)}\n                    />\n                }\n            </View>\n        )\n    }\n}\n\n// const styles = StyleSheet.create({\n//     thumbnailImage: {\n//         width: 140,\n//         height: 140,\n//         borderRadius: 70\n//     }\n// })\n\nconst mapStateToProps = (state) => {\n    return {\n        diaper_records: state.diaper,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            editPooCondition\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (PooEntry)","import React from 'react'\nimport { Card, Toast } from 'native-base'\nimport { View, ScrollView, Text, Image, TouchableHighlight, StyleSheet, TextInput, KeyboardAvoidingView, Alert } from 'react-native'\nimport DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, fetchClassData, beautifyDate } from '../../util'\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {\n    updateDiaperAmount,\n    addDiaperRecord,\n    editDiaperTime,\n    switchPeeOrPoo,\n    editPooCondition,\n    removeDiaperRecordSuccess,\n    removeDiaperRecordFail,\n    fetchClassDiaperData,\n    createDiaperRecordSuccess,\n    createDiaperRecordFail,\n    editDiaperRecordSuccess,\n    editDiaperRecordFail,\n    editDiaperAmountSuccess,\n    editDiaperAmountFail,\n    clearDiaperlogErrorMessage\n} from '../../../redux/school/actions/index'\nimport PickerComponent from '../../picker'\nimport PooEntry from './pooentry'\nimport PooTextInput from './pootextinput'\n\nclass DiaperLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            date: new Date(),\n            other_option: '',\n            show_time_picker: false,\n            record_id_for_edit: '',\n            cloth_diaper: false,\n            record_id: ''\n        }\n        this.handleSend = this.handleSend.bind(this)\n    }\n\n    componentDidMount() {\n        const { date, teacher_name } = this.props.route.params\n        const { new_data_for_create, old_data_for_edit } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        if ((new_data_for_create.size + old_data_for_edit.size === 0) && isConnected) {\n            this.fetchClassData(date)\n        } else {\n            this.setState({\n                isLoading: false\n            })\n        }\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n        }\n        this.props.navigation.setOptions({ \n            title: `如廁 - ${teacher_name}`\n        })\n    }\n\n    checkUnsent(student_id) {\n        const { new_data_for_create, old_data_for_edit, by_student_id } = this.props.diaper_records\n        const { records } = by_student_id[student_id]\n        var found = false\n        // if (students_pending_amount_update.has(student_id)) {\n        //     return true\n        // }\n        for (var i = 0; i < records.length; i++) {\n            if (new_data_for_create.has(records[i]) || old_data_for_edit.has(records[i])) {\n                found = true\n                break\n            }\n        }\n        return found\n    }\n\n    async fetchClassData(propsDate) {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n            )\n        })\n        const date = new Date(propsDate)\n        const start_date = formatDate(date)\n        date.setDate(date.getDate() + 1)\n        const end_date = formatDate(date)\n        const diaperData = await fetchClassData('diaper', this.props.class.class_id, start_date, end_date)\n        this.denormalize(diaperData)\n        this.props.fetchClassDiaperData(diaperData.data)\n        this.setState({\n            isLoading: false\n        })\n        this.props.navigation.setOptions({ \n            headerRight: () => (\n                <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n            )\n        })\n    }\n\n    denormalize(diaperData) {\n        // console.log('denormalize: ', diaperData)\n        if (!diaperData.data.records.all_id.length) {\n            return\n        }\n        const { by_id } = diaperData.data.records\n        for (const record_id in by_id) {\n            by_id[record_id].time = new Date(by_id[record_id].time)\n        }\n    }\n\n    handleUpdateDiaperAmount(student_id, amount) {\n        this.props.updateDiaperAmount(student_id, amount)\n    }\n\n    addDiaperRecord(student_id) {\n        const { teacher_id } = this.props.route.params\n        this.props.addDiaperRecord(student_id, new Date(), this.state.cloth_diaper, teacher_id)\n    }\n\n    setTime(time) {\n        const { teacher_id } = this.props.route.params\n        const { record_id_for_edit } = this.state\n        if (time !== undefined) {\n            this.setState({ \n                show_time_picker: false,\n                record_id_for_edit: ''\n            })\n            this.props.editDiaperTime(record_id_for_edit, time, teacher_id)\n        } else {\n            this.setState({ \n                show_time_picker: false,\n                record_id_for_edit: ''\n            })\n        }\n    }\n\n    switchPeeOrPoo(record_id) {\n        const { teacher_id } = this.props.route.params\n        this.props.switchPeeOrPoo(record_id, teacher_id)\n    }\n\n    editPooCondition(record_id, condition) {\n        // console.log(record_id, condition)\n        const { teacher_id } = this.props.route.params\n        if (condition === '取消編輯') {\n            return \n        } else if (condition === '其他') {\n            this.setState({\n                record_id,\n                other_option: 'Please Fill Out'\n            })\n        } else {\n            // console.log('HERE')\n            this.setState({ other_option: '' })\n            this.props.editPooCondition(record_id, condition, teacher_id)\n        }\n    }\n\n    confirmRemove(student_id, record_id) {\n        Alert.alert(\n            '確定要刪除？',\n            '',\n            [\n                { text: 'OK', onPress: () => this.removeDiaperRecord(student_id, record_id) },\n                { text: 'Cancel', style: 'cancel'}\n            ]\n        )\n    }\n\n    removeDiaperRecord(student_id, record_id) {\n        const { new_data_for_create } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        \n        if (new_data_for_create.has(record_id)) {\n            this.props.removeDiaperRecordSuccess(student_id, record_id)\n            return\n        }\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper`\n        fetch(query, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                record_id\n            })\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal Server Error') {\n                    this.props.removeDiaperRecordFail(message)\n                }\n                this.props.removeDiaperRecordSuccess(student_id, record_id)\n            })\n            .catch(err => {\n                this.props.removeDiaperRecordFail(err)\n            })\n    }\n\n    async handleSend() { // TODO: test function\n        const { new_data_for_create, old_data_for_edit } = this.props.diaper_records\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n\n        if (new_data_for_create.size || old_data_for_edit.size) {\n            const create_records_result = await this.createRecords()\n            if (create_records_result.success) {\n                // console.log(create_records_result)\n                this.props.createDiaperRecordSuccess()\n            } else {\n                this.props.createDiaperRecordFail(create_records_result.data)\n                return\n            }\n        }\n\n        // if (students_pending_amount_update.size) {\n        //     const sendDiaperAmountDataResult = await this.sendDiaperAmountData()\n        //     if (sendDiaperAmountDataResult.success) {\n        //         this.props.editDiaperAmountSuccess()\n        //     } else {\n        //         this.props.editDiaperAmountFail(sendDiaperAmountDataResult.err_message)\n        //         return\n        //     }\n        // }\n        \n        this.props.navigation.goBack()\n    }\n\n    async sendDiaperAmountData() {\n        const { isConnected } = this.props.class\n        if (!isConnected) {\n            Toast.show({\n                text: '拍謝 網路連不到! 等一下再試試看',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 2000\n            })\n            return\n        }\n        let url = 'https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper/'\n\n        const response = await Promise.all(\n            Array.from(this.props.diaper_records.students_pending_amount_update).map(student_id => {\n                return fetch(url + student_id, {\n                    method: 'PUT',\n                    body: JSON.stringify({\n                        amount: this.props.diaper_records.by_student_id[student_id].amount\n                    }),\n                    headers: {\n                        Accept: 'application/json',\n                        'Content-Type': 'application/json'\n                    }\n                })\n                .then(res => res.json())\n                .then(resJson => {\n                    return resJson\n                })\n                .catch(err => { throw err })\n            })\n        )\n        .then(result => {\n            return {\n                success: true,\n                status_code: 200,\n                data: result\n            }\n        })\n        .catch(err => {\n            return {\n                success: false,\n                status_code: 500,\n                err_message: 'error occured while sending diaper amount data: ' + err\n            }\n        })\n        return response\n    }\n\n    async createRecords() {\n        const { new_data_for_create, old_data_for_edit, records } = this.props.diaper_records\n        const data_objs = []\n        const all_record_id = [...new_data_for_create, ...old_data_for_edit]\n        // console.log('new_data_for_create: ', new_data_for_create)\n        all_record_id.forEach(record_id => {\n            data_objs.push({\n                ...records.by_id[record_id]\n            })\n        })\n        this.normalize(data_objs)\n        const request_body = {\n            date: formatDate(new Date()),\n            data_objs\n        }\n        let url = 'https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/diaper/'\n        const createRecordsRes =\n            await fetch(url, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(request_body)\n            })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log(\"resJson: \", resJson)\n                if (resJson.statusCode === 200) {\n                    return {\n                        success: true,\n                        status_code: 200,\n                        data: resJson\n                    }\n                }\n                return {\n                    success: false,\n                    status_code: 500,\n                    data: resJson.message\n                }\n            })\n            .catch(err => {\n                return {\n                    success: false,\n                    status_code: 500,\n                    err_message: err\n                }\n            })\n\n        return createRecordsRes\n    }\n\n    async editDiaperRecords() {\n        //TODO implement\n        return\n    }\n\n    normalize(data_objs) {\n        // console.log('data_objs: ', data_objs)\n        for (var i = 0; i < data_objs.length; i++) {\n            data_objs[i].time = formatTime(data_objs[i].time)\n        }\n    }\n\n    render() {\n        // TODO: Provide some options for poo condition\n        if (this.props.diaper_records.err_message !== ''){\n            Alert.alert(\n                'Error!',\n                this.props.diaper_records.err_message,\n                [{text: 'OK', onPress: () => this.props.clearDiaperlogErrorMessage()}]\n            )\n        }\n        const { teacher_id } = this.props.route.params\n        const { show_time_picker, cloth_diaper } = this.state\n        const { by_student_id, records } = this.props.diaper_records\n        const { students } = this.props.class\n        const date = this.state.date\n        // console.log('this.props.diaper_records: ', this.props.diaper_records)\n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1,\n                    paddingBottom: 15\n                }}\n                // behavior='padding'\n                // keyboardVerticalOffset={100}\n                enabled\n            >\n                <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-evenly' }}>\n                    <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n                    <View style={{ flexDirection: 'row' }}>\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: cloth_diaper ? 'rgba(255,255,255,0.2)' : '#ffe1d0',\n                                padding: 10,\n                                marginRight: 20\n                            }}\n                            onPress={() => this.setState({ cloth_diaper: false })}\n                        >\n                            <Text style={{ fontSize: 40 }}>尿布</Text>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={{\n                                backgroundColor: cloth_diaper ? '#ffe1d0' : 'rgba(255,255,255,0.2)',\n                                padding: 10,\n                                marginRight: 20\n                            }}\n                            onPress={() => this.setState({ cloth_diaper: true })}\n                        >\n                            <Text style={{ fontSize: 40 }}>學習褲</Text>\n                        </TouchableHighlight>\n\n                        <TouchableHighlight\n                            style={{ backgroundColor: '#dcf3d0', padding: 10 }}\n                            onPress={this.handleSend}\n                        >\n                            <Text style={{ fontSize: 40 }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n                <ScrollView \n                    contentContainerStyle={{ alignItems: 'center' }}\n                    keyboardShouldPersistTaps='handled'\n                >\n                    {Object.keys(students).map((student_id) => {\n                        if (by_student_id[student_id] === null) {\n                            return null\n                        }\n                        const record_id_list = by_student_id[student_id].records\n                        return (\n                            <View key={student_id} style={{ width: '98%' }}>\n                                <Card style={{ flex: 1, flexDirection: 'row', paddingVertical: 15 }}>\n                                    <View style={{ width: '23%', alignItems: 'center', justifyContent: 'center' }}>\n                                        <TouchableHighlight\n                                            // style={styles.childThumbnail}\n                                            onPress={() => this.addDiaperRecord(student_id)}\n                                            underlayColor=\"transparent\"\n                                        >\n                                            <Image\n                                                source={\n                                                    students[student_id].profile_picture === '' ?\n                                                        require('../../../assets/icon-thumbnail.png')\n                                                        : {uri: students[student_id].profile_picture}\n                                                }\n                                                style={styles.thumbnailImage}/>\n                                        </TouchableHighlight> \n                                    </View>\n                                    <View style={{ width: '77%' }}>\n                                        <View style={{ flex: 1 }}>\n                                            <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                    <Text style={{ fontSize: 30 }}>\n                                                        {students[student_id].name}\n                                                    </Text>\n                                                    {this.checkUnsent(student_id) ? \n                                                        <Text style={{ fontSize: 15, color: 'red', marginLeft: 15}}>未送出</Text>\n                                                        : null\n                                                    }\n                                                </View>\n                                            </View>\n                                            {record_id_list.map(record_id => {\n                                                const record = records.by_id[record_id]\n                                                if (record.cloth_diaper !== cloth_diaper) return null\n                                                return (\n                                                    <View key={record_id} style={{ flex: 1, flexDirection: 'row', marginVertical: 6, justifyContent: 'space-between', paddingRight: 15 }}>\n                                                        {/* TIME */}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: record.pee_or_poo === '大便' ? '23%' : '35%',\n                                                                // marginRight: '3%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#fef6dd',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.setState({ record_id_for_edit: record_id, show_time_picker: true })}\n                                                        >\n                                                            <Text style={{ fontSize: 35, textAlign: 'center' }}>\n                                                                {`${record.time.getHours()}:${record.time.getMinutes()}`}\n                                                            </Text>\n                                                        </TouchableHighlight>\n\n                                                        {/* PEE OR POO*/}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: record.pee_or_poo === '大便' ? '23%' : '35%',\n                                                                // marginRight: '3%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#fef6dd',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.switchPeeOrPoo(record_id)}\n                                                        >\n                                                            <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                {`${record.pee_or_poo}`}\n                                                            </Text>\n                                                        </TouchableHighlight>\n\n                                                        {/* POO CONDITION*/}\n                                                        {record.pee_or_poo === '大便' ?\n                                                            <PooEntry\n                                                                teacher_id={teacher_id}\n                                                                record_id={record_id}\n                                                                record={record}\n                                                            />\n                                                            // <View\n                                                            //     style={{\n                                                            //         width: '23%',\n                                                            //         // marginRight: '3%',\n                                                            //         height: '100%',\n                                                            //         justifyContent: 'center',\n                                                            //         backgroundColor: '#fef6dd',\n                                                            //         borderRadius: 10\n                                                            //     }}\n                                                            // >\n                                                            //     {this.state.other_option === '' && this.state.record_id != record_id ?\n                                                            //         <PickerComponent\n                                                            //             style={{\n                                                            //                 // height: 20,\n                                                            //                 // width: '50%',\n                                                            //                 // marginLeft: 25\n                                                            //                 alignItems: 'center',\n                                                            //                 padding: 5\n                                                            //             }}\n                                                            //             selectedValue={record.poo_condition}\n                                                            //             options={[\n                                                            //                 \"正常\",\n                                                            //                 \"硬\",\n                                                            //                 \"軟糊\",\n                                                            //                 \"稀水\",\n                                                            //                 \"其他\",\n                                                            //                 \"取消編輯\"\n                                                            //             ]}\n                                                            //             textStyle={{fontSize: 30}}\n                                                            //             handleOnClick={() => { }}\n                                                            //             handleSelectValue={(condition) => this.editPooCondition(record_id, condition)}\n                                                            //         />\n                                                            //         :\n                                                            //         <PooTextInput\n                                                            //             editPooCondition={(condition) => this.editPooCondition(record_id, condition)}\n                                                            //         />\n                                                            //     }\n                                                                    \n                                                            // </View>\n                                                            : null\n                                                        }\n\n                                                        {/* REMOVE RECORD*/}\n                                                        <TouchableHighlight\n                                                            style={{\n                                                                width: '20%',\n                                                                // marginRight: '2%',\n                                                                height: '100%',\n                                                                justifyContent: 'center',\n                                                                backgroundColor: '#ffe1d0',\n                                                                borderRadius: 10\n                                                            }}\n                                                            onPress={() => this.confirmRemove(student_id, record_id)}\n                                                        >\n                                                            <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                                                                移除\n                                                            </Text>\n                                                        </TouchableHighlight>\n                                                    </View>\n                                                )\n                                            })}\n                                            {show_time_picker &&\n                                                <DateTimePicker\n                                                    style={{ width: '100%'}}\n                                                    mode={'time'}\n                                                    display={'spinner'}\n                                                    value={new Date}\n                                                    onChange={(event, time) => this.setTime(time)}\n                                                    minimumDate={new Date()}\n                                                />\n                                            }\n                                        </View>\n                                    </View>\n                                </Card>\n                            </View>\n                        )\n                    })}\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    thumbnailImage: {\n        width: 140,\n        height: 140,\n        borderRadius: 70\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        diaper_records: state.diaper,\n        class: state.classInfo\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            updateDiaperAmount,\n            addDiaperRecord,\n            editDiaperTime,\n            switchPeeOrPoo,\n            editPooCondition,\n            removeDiaperRecordSuccess,\n            removeDiaperRecordFail,\n            fetchClassDiaperData,\n            createDiaperRecordSuccess,\n            createDiaperRecordFail,\n            editDiaperRecordSuccess,\n            editDiaperRecordFail,\n            editDiaperAmountSuccess,\n            editDiaperAmountFail,\n            clearDiaperlogErrorMessage\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (DiaperLog)","import React from 'react'\nimport { View, Text, TouchableHighlight, StyleSheet, ScrollView, TouchableOpacity } from 'react-native'\nimport Header from '../../header'\n// import { TouchableOpacity } from 'react-native-gesture-handler'\n\nexport default class AdminHome extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  static navigationOptions = ({ navigation }) => {\n    return {\n      headerTitle: <Header title={'Admin Home'} />\n    }\n  }\n\n  componentDidMount() {\n\n  }\n\n  handleNavigate(pageName) {\n    // console.log(pageName)\n    const { school_name, school_id } = this.props.route.params\n    this.props.navigation.navigate(pageName, { school_name, school_id })\n\n    // this.props.navigation.push(pageName)\n  }\n\n  render() {\n    return (\n      <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('AnnouncementHome')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>公告</Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('Registration')}\n          // onPress={()=> this.handleNavigate('Registration')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>新生註冊</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('Students')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>學生資料</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('Teachers')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>教師資料</Text>\n        </TouchableOpacity>\n\n        <TouchableOpacity\n          style={styles.button}\n          onClick={()=> this.handleNavigate('DownloadPage')}\n          underlayColor=\"#368cbf\"\n        >\n          <Text style={{ fontSize: 70 }}>下載</Text>\n        </TouchableOpacity>\n      </ScrollView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    // flex: 1,\n    width: '80%',\n    padding: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#b5e9e9',\n    marginVertical: 20\n  },\n  button_text: {\n\n  }\n})","import React from 'react'\nimport { View, Text, TextInput, TouchableHighlight, ScrollView, Image, KeyboardAvoidingView, Alert } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { connect } from 'react-redux'\nimport { get, post, formatDate, formatTime, beautifyDate, beautifyMonthDate, delete_by_id } from '../../util'\nimport * as WebBrowser from 'expo-web-browser'\n\n\nclass Announcement extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            selected_all_classes: true,\n            selected_classes: new Set(),\n            class_id_list: [],\n            text: '',\n            announcements: [],\n            page_number: 0,\n            announcement_on_display: {},\n            is_loading: true,\n            unread_list: [],\n            read_list: [],\n            show_more: false\n        }\n    }\n    \n    /*\n        1. text and be able to import pictures\n        2. be able to pick classes(include, exclude)\n        3. be able to see which parent has read or not read the announcement(ability to track past announcements)\n    */\n\n    async componentDidMount() {\n        const { announcement } = this.props.route.params\n        const { classes } = this.props\n        let class_id_list = []\n        Object.keys(classes).forEach((class_id) => {\n            if (classes[class_id].name !== '管理員' && !classes[class_id].name.includes('畢業生')) {\n                class_id_list.push(class_id)\n            }\n        })\n        this.setState({\n            class_id_list,\n            selected_classes: new Set(class_id_list)\n        })\n        if(announcement === undefined) {\n            this.fetchMostRecentAnnouncement()\n        } else {\n            this.fetchReadStatusByAnnouncementId(announcement)\n        }\n    }\n\n    async fetchMostRecentAnnouncement() {\n        const { school_id } = this.props.route.params\n        const response = await get(`/announcement/most-recent?school_id=${school_id}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            let [unread_list, read_list] = this.separateReadUnread(data.read_status)\n            this.setState({\n                announcement_on_display: data,\n                is_loading: false,\n                unread_list,\n                read_list\n            })\n        }\n    }\n\n    async fetchReadStatusByAnnouncementId(announcement) {\n        const response = await get(`/announcement/${announcement.id}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            let [unread_list, read_list] = this.separateReadUnread(data)\n            this.setState({\n                announcement_on_display: announcement,\n                is_loading: false,\n                unread_list,\n                read_list\n            })\n        }\n    }\n\n    separateReadUnread(data) {\n        let unread_list = [],\n            read_list = []\n        for (const student_id in data) {\n            if(data[student_id]) {\n                read_list.push(student_id)\n            } else {\n                unread_list.push(student_id)\n            }\n        }\n        return [unread_list, read_list]\n    }\n\n    showConfirmDeleteDialog() {\n        // Alert.alert(\n        //     '確定要永久刪除此公告?',\n        //     '',\n        //     [\n        //         {\n        //             text: '返回',\n        //             style: 'cancel'\n        //         },\n        //         {\n        //             text: 'Ok',\n        //             onPress: () => this.deleteAnnouncementById()\n        //         }\n        //     ]\n        // )\n        const confirmed = confirm('確定要永久刪除此公告?')\n        if (confirmed) {\n            this.deleteAnnouncementById()\n        }\n    }\n\n    async deleteAnnouncementById() {        \n        const { school_id } = this.props.route.params\n        const announcement = this.state.announcement_on_display\n        const response = await delete_by_id(`/announcement/${announcement.id}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            this.props.navigation.navigate('AnnouncementHome', {\n                school_id\n            })\n        }\n    }\n\n    render () {\n        const { students } = this.props\n        const { school_id, school_name } = this.props.route.params\n        const {\n            announcement_on_display, \n            is_loading, \n            unread_list, \n            read_list,\n            show_more\n        } = this.state\n        return (\n            <View style={{ flex: 1 }}>\n                <View style={{ flexDirection: 'row', justifyContent: 'flex-end', paddingVertical: 7 }}>\n                    <TouchableHighlight\n                        style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                        onPress={() => this.fetchReadStatusByAnnouncementId(announcement_on_display)}\n                    >\n                        <Text style={{ fontSize: 20 }}>刷新</Text>\n                    </TouchableHighlight>\n\n                    <TouchableHighlight\n                        style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                        onPress={() => this.props.navigation.navigate('AnnouncementHome', {\n                            school_id,\n                            school_name\n                        })}\n                    >\n                        <Text style={{ fontSize: 20 }}>檢視全部</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                        onPress={() => this.props.navigation.push('AddAnnouncementPage', {\n                            school_id,\n                            school_name\n                        })}\n                    >\n                        <Text style={{ fontSize: 20 }}>新增</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight\n                        style={{ padding: 10, backgroundColor: 'red', marginRight: 10 }}\n                        onPress={() => this.showConfirmDeleteDialog()}\n                    >\n                        <Text style={{ fontSize: 20 }}>刪除</Text>\n                    </TouchableHighlight>\n                </View>\n                    {!is_loading &&\n                    <View style={{ flex: 1 }}>\n                        <Card\n                            style={{\n                                flex: 1\n                            }}\n                        >\n                            <ScrollView>\n                                <View style={{ padding: 20 }}>\n                                    <Text style={{ fontSize: 28 }}>{announcement_on_display.title}</Text>\n                                    <Text style={{ fontSize: 18 }}>{beautifyDate(new Date(announcement_on_display.timestamp))}</Text>\n                                </View>\n                                <View \n                                    style={{\n                                        paddingHorizontal: 20,\n                                        height: show_more ? -1 : 100,\n                                        overflow: 'hidden'\n                                    }}\n                                >\n                                    <Text style={{ fontSize: 20 }}>{announcement_on_display.text}</Text>\n                                </View>\n                                {show_more &&\n                                    <View style={{ flex: 1, alignItems: 'flex-start', padding: 20 }}>\n                                        {announcement_on_display.links.map((link, index) => {\n                                            return (\n                                                <TouchableHighlight\n                                                    key={index}\n                                                    style={{ backgroundColor: 'lightblue', padding: 8, marginBottom: 15 }}\n                                                    onPress={async() => {\n                                                        let result = await WebBrowser.openBrowserAsync(link.url)\n                                                    }}\n                                                >\n                                                    <Text style={{ fontSize: 18 }}>{link.text}</Text>\n                                                </TouchableHighlight>\n                                            )\n                                        })}\n                                    </View>\n                                }\n\n                                {show_more &&\n                                    <View style={{ flexDirection: 'row', paddingHorizontal: 20, flexWrap: 'wrap' }}>\n                                        {announcement_on_display.photo_url_arr.map((url, index) => {\n                                            return (\n                                                <TouchableHighlight\n                                                    key={index}\n                                                    onPress={async() => {\n                                                        let result = await WebBrowser.openBrowserAsync(url)\n                                                    }}\n                                                >\n                                                    <Image\n                                                        source={{ uri: url}}\n                                                        style={{\n                                                            width: 150,\n                                                            height: 150,\n                                                            marginRight: 10,\n                                                            marginTop: 10\n                                                        }}\n                                                    />\n                                                </TouchableHighlight>\n                                            )\n                                        })}\n                                    </View>\n                                }\n                                <View style={{ width: '100%', paddingHorizontal: 20 }}>\n                                    <TouchableHighlight\n                                        style={{ padding: 10, alignSelf: 'flex-end', backgroundColor: 'lightblue' }}\n                                        onPress={() => this.setState({ show_more: !show_more })}\n                                    >\n                                        <Text>{show_more ? '隱藏' : '更多'}</Text>\n                                    </TouchableHighlight>\n                                </View>\n                                <View style={{ flexDirection: 'row', flexWrap: 'wrap' }}>\n\n                                \n                                {unread_list.map(id => {\n                                    const student = students[id]\n                                    return (\n                                        <TouchableHighlight \n                                            key={id}\n                                            style={{ \n                                                height: 300, \n                                                width: '33.3%', \n                                                padding: 5\n                                            }}\n                                        >\n                                            <Card style={{ flex: 1, padding: 10, backgroundColor: '#ffe1d0' }}>\n                                                <CardItem style={{ justifyContent: 'center' }}>\n                                                        <Image\n                                                            source={\n                                                                student.profile_picture === '' ?\n                                                                require('../../../assets/icon-thumbnail.png')\n                                                                : {uri: student.profile_picture}\n                                                            }\n                                                            style={{\n                                                                height: 200,\n                                                                width: 200,\n                                                                borderRadius: 100\n                                                            }}\n                                                        />\n                                                </CardItem>\n                                                <CardItem\n                                                    footer\n                                                    style={{ justifyContent: 'center', marginTop: -5 }}\n                                                >\n                                                    <Text style={{ marginTop: -10 }}>{student.name}</Text>\n                                                </CardItem>\n                                            </Card>\n                                        </TouchableHighlight>\n                                    )\n                                })}\n                                {read_list.map(id => {\n                                    const student = students[id]\n                                    return (\n                                        <TouchableHighlight \n                                            key={id}\n                                            style={{ \n                                                height: 300, \n                                                width: '33.3%', \n                                                padding: 5\n                                            }}\n                                        >\n                                            <Card style={{ flex: 1, padding: 10, backgroundColor: '#dcf3d0' }}>\n                                                <CardItem style={{ justifyContent: 'center' }}>\n                                                    <Image\n                                                        source={\n                                                            student.profile_picture === '' ?\n                                                            require('../../../assets/icon-thumbnail.png')\n                                                            : {uri: student.profile_picture}\n                                                        }\n                                                        style={{\n                                                            height: 200,\n                                                            width: 200,\n                                                            borderRadius: 100\n                                                        }}\n                                                    />\n                                                </CardItem>\n                                                <CardItem\n                                                    footer\n                                                    style={{ justifyContent: 'center', marginTop: -5 }}\n                                                >\n                                                    <Text style={{ marginTop: -10 }}>{student.name}</Text>\n                                                </CardItem>\n                                            </Card>\n                                        </TouchableHighlight>\n                                    )\n                                })}\n                                </View>\n                            </ScrollView>\n                        </Card>\n                    </View>\n                }\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        classes: state.school.classes,\n        students: state.school.students\n    }\n}\n\nexport default connect(mapStateToProps) (Announcement)","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\nimport PickerComponent from '../../picker'\n\nexport default class RegisterNewStudents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n      studentDataArray: [{\n        name: '',\n        class_id: '',\n        class_name: '',\n        profile_picture: '',\n        blood_type: ''\n      }],\n    }\n  }\n\n  addStudent() {\n    const { studentDataArray } = this.state\n    studentDataArray.push({\n      name: '',\n      class_id: '',\n      class_name: '',\n      profile_picture: '',\n      blood_type: ''\n    })\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  fillStudent() {\n    const { studentDataArray } = this.state\n    studentDataArray[0] = {\n        name: 'John Smith',\n        class_id: null,\n        profile_picture: '',\n        blood_type: 'AB'\n    }\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  setName(name, index) {\n    const { studentDataArray } = this.state\n    studentDataArray[index].name = name\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  setBloodType(type, index) {\n    const {studentDataArray} = this.state\n    studentDataArray[index].blood_type = type\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  removeStudent(index) {\n    const { studentDataArray} = this.state\n    studentDataArray.splice(index, 1)\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  handleSelectClass(class_name, index) {\n    // console.log(class_name)\n    const {classes } = this.props\n    const { studentDataArray } = this.state\n    var class_id = ''\n    for (var i = 0; i < Object.keys(classes).length; i++) {\n      const found_class_id = Object.keys(classes)[i]\n      if (classes[found_class_id].name === class_name) {\n        class_id = found_class_id\n        break\n      }\n    }\n    \n    studentDataArray[index].class_id = class_id\n    studentDataArray[index].class_name = class_name\n    this.setState({\n      studentDataArray\n    })\n  }\n\n  getStudentDataArray() {\n    return this.state.studentDataArray\n  }\n\n  render() {\n    const { studentDataArray } = this.state\n    const { classes } = this.props\n    const options = Object.keys(classes).map(class_id => classes[class_id].name)\n    // console.log('studentDataArray: ', studentDataArray)\n    return (\n      <View style={{ width: '100%', padding: '5%', backgroundColor: '#368cbf' }}>\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingVertical: 5, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n            <Text style={{ fontSize: 60 }}>學生資料</Text>\n            <TouchableHighlight\n              style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n              onPress={() => this.addStudent()}\n            >\n              <Text style={{ fontSize: 35 }}>新增學生</Text>\n            </TouchableHighlight>\n\n            {/* <TouchableHighlight\n              style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n              onPress={() => this.fillStudent()}\n            >\n              <Text style={{ fontSize: 30 }}>Fill Student</Text>\n            </TouchableHighlight> */}\n          </View>\n          \n          {studentDataArray.map((student, index) => {\n            const { name, blood_type } = student\n            return (\n              <View key={index} style={{ width: '100%', padding: '5%', backgroundColor: '#f4d41f' }}>\n                <View\n                  style={{ flexDirection: 'row', padding: 10, backgroundColor: 'white', justifyContent: 'space-between' }}\n                >\n                  <View\n                    style={{\n                      width: '50%',\n                      padding: 10,\n                      backgroundColor: '#F5F5F5',\n                      borderRadius: 2,\n                      borderBottomWidth: 2,\n                      borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                  }}>\n                    <TextInput\n                      placeholder=\"全名\"\n                      value={name}\n                      style={{ fontSize: 30 }}\n                      onChangeText={(name) => this.setName(name, index)}\n                    />\n                  </View>\n\n                  <View\n                    style={{\n                      width: '20%',\n                      padding: 10,\n                      backgroundColor: '#F5F5F5',\n                      borderRadius: 2,\n                      borderBottomWidth: 2,\n                      borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                  }}>\n                    <TextInput\n                      placeholder=\"血型\"\n                      value={blood_type}\n                      style={{ fontSize: 30 }}\n                      onChangeText={(type) => this.setBloodType(type, index)}\n                    />\n                  </View>\n\n                  <TouchableHighlight\n                    style={{\n                      width: '20%',\n                      padding: 10,\n                      backgroundColor: '#fa625f',\n                      borderRadius: 2,\n                      // borderBottomWidth: 2,\n                      // borderBottomColor: '#b5e9e9',\n                      justifyContent: 'center'\n                    }}\n                    onPress={() => this.removeStudent(index)}\n                  >\n                    <Text style={{ alignSelf: 'center', fontSize: 30 }}>移除</Text>\n                  </TouchableHighlight>\n                </View>\n\n                <View style={{ padding: 10, backgroundColor: 'white' }}>\n                  <PickerComponent\n                    style={{\n                      padding: 10, \n                      backgroundColor: '#b5e9e9'\n                    }}\n                    textStyle={{ fontSize: 30 }}\n                    selectedValue={studentDataArray[index].class_name || '選擇學生班級'}\n                    options={options}\n                    handleOnClick={() => { }}\n                    handleSelectValue={(class_name) => this.handleSelectClass(class_name, index)}\n                  />\n                </View>\n              </View>\n            )\n          })}\n          \n        </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput, Alert, Picker } from 'react-native'\nimport Auth from '@aws-amplify/auth'\n\nexport default class RegisterParents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n        parentDataArray: [{\n            name: '',\n            email: '', \n            username: '',\n            password: '',\n            role: '父',\n            mobile: '',\n            address: '',\n            work_phone: '',\n            transportation: ''\n        }],\n        parentSignUpStatus: [false],\n    }\n  }\n\n  addParent() {\n    const { parentDataArray, parentSignUpStatus } = this.state\n    parentDataArray.push({\n      name: '',\n      email: '', \n      username: '',\n      password: '',\n      role: '父',\n      mobile: '',\n      address: '',\n      work_phone: '',\n      transportation: ''\n    })\n\n    parentSignUpStatus.push(false)\n\n    this.setState({\n      parentDataArray,\n      parentSignUpStatus\n    })\n  }\n\n  fillParent() {\n    const { parentDataArray } = this.state\n    parentDataArray[0] = {\n      name: 'Jane Smith',\n      email: 'caleb7947@gmail.com', \n      username: 'abc123',\n      password: 'password',\n      role: 'parent#mother',\n      mobile: '061234567',\n      address: 'SOME ADDRESS',\n      work_phone: '061234567',\n      transportation: 'car'\n    }\n    this.setState({\n      parentDataArray\n    })\n  }\n\n  setName(name, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].name = name\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setRole(role, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].role = role\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setEmail(email, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].email = email\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  setUsername(username, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].username = username\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  toLowerCase(event, index) {\n      const { text } = event.nativeEvent\n      const { parentDataArray } = this.state\n      const username = text.toLowerCase()\n      parentDataArray[index].username = username\n      this.setState({ parentDataArray })\n  }\n\n  setPassword(password, index) {\n    const { parentDataArray } = this.state\n    parentDataArray[index].password = password\n    this.setState({\n        parentDataArray\n    })\n  }\n\n  removeParent(index) {\n      const { parentDataArray, parentSignUpStatus } = this.state\n      parentDataArray.splice(index, 1)\n      parentSignUpStatus.splice(index, 1)\n      this.setState({\n          parentDataArray,\n          parentSignUpStatus\n      })\n  }\n\n  handleSignup(index) {\n    const { name, email, username, password } = this.state.parentDataArray[index]\n\n    Auth.signUp({\n      username,\n      password,\n      attributes: {\n          name,\n          email\n      }\n    })\n      .then(values => {\n        // console.log(values)\n        const { parentSignUpStatus } = this.state\n        parentSignUpStatus[index] = true\n        this.setState({\n          parentSignUpStatus\n        })\n      })\n      .catch(err => {\n        alert('註冊有問題!請與工程師聯繫\\n\\n' + err.message)\n    })\n  }\n\n  getParentSignUpStatus() {\n      return this.state.parentSignUpStatus\n  }\n\n  getParentDataArray() {\n      return this.state.parentDataArray\n  }\n\n  render() {\n    const { parentDataArray, parentSignUpStatus } = this.state\n    // console.log('parentDataArray: ', parentDataArray)\n    return (\n\n        <View style={{ width: '100%', padding: '5%', backgroundColor: '#f4d41f' }}>\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', paddingVertical: 5, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n          <Text style={{ fontSize: 60 }}>家長資料</Text>\n          <TouchableHighlight\n            style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n            onPress={() => this.addParent()}\n          >\n            <Text style={{ fontSize: 35 }}>新增家長</Text>\n          </TouchableHighlight>\n\n          {/* <TouchableHighlight\n            style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n            onPress={() => this.fillParent()}\n          >\n            <Text style={{ fontSize: 20 }}>Fill Parent</Text>\n          </TouchableHighlight> */}\n        </View>\n        \n        {parentDataArray.map((parent, index) => {\n          const { name, email, username, password, role, mobile, address, work_phone, transportation } = parent\n          return (\n            <View\n              key={index}\n              style={{padding: 10, backgroundColor: 'white', marginBottom: 20 }}\n            >\n              {/* FIRST ROW */}\n              <View \n                style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}\n              >\n                <View\n                  style={{\n                    width: '50%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center',\n                }}>\n                  <TextInput\n                    placeholder=\"全名\"\n                    value={name}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(name) => this.setName(name, index)}\n                  />\n                </View>\n\n                <View\n                  style={{\n                    width: '20%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  {/* <TextInput\n                    placeholder=\"父/母\"\n                    value={role.charAt(role.length-1)}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(role) => this.setRole(role, index)}\n                  /> */}\n                  <Picker\n                    selectedValue={role}\n                    style={{ height: 50 }}\n                    onValueChange={(itemValue, itemIndex) => this.setRole(itemValue, index)}\n                  >\n                    <Picker.Item label=\"父\" value=\"父\" />\n                    <Picker.Item label=\"母\" value=\"母\" />\n                  </Picker>\n                </View>\n\n                <TouchableHighlight\n                  style={{\n                    width: '20%',\n                    padding: 10,\n                    backgroundColor: '#fa625f',\n                    borderRadius: 2,\n                    justifyContent: 'center'\n                  }}\n                  onPress={() => this.removeParent(index)}\n                >\n                  <Text style={{ alignSelf: 'center', fontSize: 30 }}>移除</Text>\n                </TouchableHighlight>\n\n              </View>\n\n              {/* SECOND ROW */}\n              <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}>\n\n                <View\n                  style={{\n                    width: '100%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    placeholder=\"Email\"\n                    autoCapitalize=\"none\"\n                    keyboardType=\"email-address\"\n                    value={email}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(email) => this.setEmail(email, index)}\n                  />\n                </View>\n              </View>\n\n              {/* THIRD ROW */}\n              <View style={{ flexDirection: 'row', justifyContent: 'space-between', marginBottom: '5%' }}>\n                <View\n                  style={{\n                    width: '35%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    placeholder=\"帳號\"\n                    autoCapitalize=\"none\"\n                    value={username}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(username) => this.setUsername(username, index)}\n                    onEndEditing={(username) => this.toLowerCase(username, index)}\n                  />\n                </View>\n\n                <View\n                  style={{\n                    width: '35%',\n                    padding: 10,\n                    backgroundColor: '#F5F5F5',\n                    borderRadius: 2,\n                    borderBottomWidth: 2,\n                    borderBottomColor: '#b5e9e9',\n                    justifyContent: 'center'\n                }}>\n                  <TextInput\n                    secureTextEntry\n                    placeholder=\"密碼\"\n                    value={password}\n                    style={{ fontSize: 30 }}\n                    onChangeText={(password) => this.setPassword(password, index)}\n                  />\n                </View>\n\n                <TouchableHighlight\n                  style={{\n                    width: '20%',\n                    padding: 5,\n                    backgroundColor: parentSignUpStatus[index] ? '#dcf3d0' : '#ffe1d0',\n                    justifyContent: 'center'\n                  }}\n                  onPress={() => this.handleSignup(index)}\n                  disable={parentSignUpStatus[index]}\n                >\n                  {parentSignUpStatus[index] ?\n                    <Text style={{ fontSize: 20 }}>SUCCESS</Text>\n                    : <Text style={{ fontSize: 35, alignSelf: 'center' }}>註冊</Text>\n                  }\n                </TouchableHighlight>\n              </View>\n            </View>\n          )\n        })}\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, TextInput, TouchableHighlight, Text, Alert, KeyboardAvoidingView } from 'react-native'\n// import Auth from '@aws-amplify/auth'\nimport Reloading from '../../reloading'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport RegisterNewStudents from './registernewstudents'\nimport RegisterParents from './registerparents'\nimport { ScrollView } from 'react-native-gesture-handler'\nimport { fetchStudentsSuccess } from '../../../redux/school/actions/index'\nimport { get } from '../../util'\n\n/*\n1. Page where we connect parents to amplify for their login:\n  Auth.signUp({\n    username: 'USERNAME',\n    password: 'PASSWORD',\n    attributes: {\n        given_name: 'John',\n        family_name: 'Smith',\n        email: 'EMAIL@email.com'\n    }\n  })\n\n2. Save their credential in database in table users:\n  -id: 'UUID',\n  -firstName: 'John',\n  -lastName: 'Smith',\n  -email: 'EMAIL@email.com',\n  -username: 'USERNAME',\n  -role: 'parent'\n\n3. And initialize child/ren's data in database including but not limited to \n  -first_name,\n  -last_name,\n  -profile_picture,\n  -class_id <<====== list all classes and assign a class_id to child/ren\n\n****Leave sign up confirmation to parent side of the app(first time sign in)****\n\n*/\nclass Registration extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state = {\n      \n      \n      parentSignUpStatus: [false],\n      createFamilyProfileStatus: 'not_created'\n    }\n  }\n\n  componentDidMount() {\n    //  fetch class info for class assinment or get it from redux store\n  }\n\n  \n\n  createFamilyProfile() {\n    let all_parents_signed_up = true\n    let parentSignUpStatus = this.refs['parent'].getParentSignUpStatus()\n    parentSignUpStatus.forEach(status => {\n      all_parents_signed_up &= status\n    })\n\n    if (!all_parents_signed_up) {\n      alert('Error! We cannot create family profile until all parents have been signed up')\n      return\n    }\n\n    let parentDataArray = this.refs['parent'].getParentDataArray()\n    let studentDataArray = this.refs['student'].getStudentDataArray()\n\n    this.setState({\n      createFamilyProfileStatus: 'creating'\n    })\n\n    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/family/', {\n      method: 'POST',\n      headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        parentDataArray,  //name, email, username, role\n        studentDataArray  //name, class_id, profile_picture, blood_type\n      })\n    })\n    .then((response) => response.json())\n    .then((resJson) => {\n      // console.log(resJson)\n      if (resJson.statusCode > 200 || resJson.message === 'Internal server error') {\n        alert('Error!' + resJson.message)\n      } else {\n        this.fetchStudentData()\n        Alert.alert(\n          '註冊成功!',\n          '點選OK以離開頁面',\n          [\n              { text: 'OK', onPress: () => this.props.navigation.goBack()}\n          ]\n        )\n        this.setState({\n          createFamilyProfileStatus: 'created'\n        })\n      }\n    })\n    .catch((err) => {\n      console.error(err)\n    })\n  }\n\n  async fetchStudentData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/student`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {students, classes} = data\n    this.props.fetchStudentsSuccess(students, classes)\n  }\n\n  render() {\n    const { studentDataArray, parentDataArray, parentSignUpStatus, createFamilyProfileStatus } = this.state\n    // console.log(this.props.classes)\n    return (\n      <KeyboardAvoidingView style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <ScrollView style={{ width: '100%'}}>\n\n          <RegisterNewStudents \n            ref=\"student\"\n            classes={this.props.classes}\n          />\n\n          <RegisterParents ref=\"parent\" />\n\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-around' }}>\n            <TouchableHighlight\n              style={{\n                flex: 1,\n                padding: 20,\n                backgroundColor: createFamilyProfileStatus === 'not_created' ?\n                  '#b5e9e9'\n                  : createFamilyProfileStatus === 'creating' ?\n                    '#b5e9e9'\n                  : '#00c07f',\n                  justifyContent: 'center'\n              }}\n              onPress={() => this.createFamilyProfile()}\n            >\n              {createFamilyProfileStatus === 'not_created' ?\n                <Text style={{ fontSize: 50, textAlign: 'center' }}>完成</Text>\n                : createFamilyProfileStatus === 'creating' ?\n                  <Reloading />\n                : <Text style={{ fontSize: 50 }}>SUCCESS</Text>\n              }\n            </TouchableHighlight>\n\n            <TouchableHighlight\n              style={{ flex:1, padding: 20, backgroundColor: '#fa625f', justifyContent: 'center' }}\n              onPress={() => this.props.navigation.goBack()}\n            >\n              <Text style={{ fontSize: 50, textAlign: 'center'}}>返回</Text>\n            </TouchableHighlight>\n          </View>\n        </ScrollView>\n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({fetchStudentsSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Registration)","import React from 'react'\nimport { View, Image, Text, TouchableHighlight, StyleSheet, KeyboardAvoidingView, Alert, Dimensions } from 'react-native'\nimport { Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\n\nconst { width, height } = Dimensions.get('window')\n\n\nclass Modal extends React.Component{\n  constructor(props) {\n    super(props)\n    \n  }\n\n  render() {\n    // const { show, student_id, teacher_id, students, unmarked, absent, teacherOnDuty, class_id } = this.props\n    const { show, component, modal_padding } = this.props\n    if (!show) {\n      return null\n    }\n    // console.log('student_id: ', student_id)\n    // const student = students[student_id]\n    // const { wellness } = this.props\n    // const record_id = wellness.by_student_id[student_id][0]\n    return (\n      <KeyboardAvoidingView\n        style={{\n          backgroundColor: 'transparent',\n          // justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 2,\n          position: 'absolute',\n          width: '100%',\n          height: '100%'\n        }}\n        // contentContainerStyle={{\n        //   justifyContent: 'center',\n        //   alignItems: 'center',\n        //   zIndex: 2,\n        //   position: 'absolute',\n        //   width: '100%',\n        //   height: '100%'\n        // }}\n        behavior='height'\n        // keyboardVerticalOffset={-80}\n        enabled\n      >\n        <TouchableHighlight\n          style={{\n            backgroundColor: 'rgba(0,0,0,0.8)',\n            // opacity: 0.7,\n            width: '100%',\n            height: '100%'\n          }}\n          onPress={() => this.props.hideModal()}\n        >\n          <View></View>\n        </TouchableHighlight>\n\n        <View style={{ flex: 1, marginTop: modal_padding, width: width/2, height, backgroundColor: 'white', zIndex: 3,\n            position: 'absolute' }}>\n                {component}\n        </View>\n        \n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  thumbnailImage: {\n      width: 200,\n      height: 200,\n      borderRadius: 100\n  }\n})\n\nconst mapStateToProps = (state) => {\n  return {\n    // students: state.classInfo.students,\n    students: state.school.students,\n    // attendance: state.attendance,\n    // wellness: state.healthstatus,\n    isConnected: state.school.isConnected\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Modal)","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, PushNotificationIOS } from 'react-native'\nimport { get, put } from '../../util'\nimport PickerComponent from '../../picker'\nimport Reloading from '../../reloading'\n\nexport default class EditStudentProfile extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            parents: [],\n            student: null,\n            isLoading: true\n        }\n    }\n\n    async componentDidMount() {\n        const { student_id, student } = this.props\n        const response = await get(`/student/${student_id}/family`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得家庭資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.setState({\n            parents: response.data,\n            student,\n            isLoading: false\n        })\n    }\n\n    addParent() {\n        const { parents } = this.state\n        if (parents.length === 3) {\n            alert('Sorry 一個寶貝只能註冊三位家長！')\n            return \n        }\n        this.props.addParent({\n            id: '',\n            name: '',\n            role: '',\n            username: '',\n            password: '',\n            mobile: '',\n            work_phone: '',\n            address: ''\n        })\n    }\n\n    async editStudentData() {\n        const { student_id } = this.props\n        const { student } = this.state\n        const { name, class_id } = student\n        const response = await put(`/student/${student_id}`, {\n            name,\n            class_id\n        })\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 編輯學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n        this.props.hideModal()\n        const old_class_id = this.props.student.class_id\n        this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n    }\n\n    // getClassByStudentId() {\n    //     const { student_id, classes } = this.props\n    //     Object.keys(classes).forEach(class_id => {\n    //         const {students} = classes[class_id]\n    //         for(var i = 0; i < students.length; i++) {\n    //             if (student_id === students[i]) {\n    //                 return classes[class_id].name\n    //             }\n    //         }\n    //     })\n    //     return ''\n    // }\n\n    getClassNames() {\n        const { classes } = this.props\n        return Object.keys(classes).map(class_id => {\n            return classes[class_id].name\n        })\n    }\n    \n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            student: {\n                ...this.state.student,\n                class_id: class_id_found\n            }\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { student, parents, isLoading } = this.state\n        // console.log('student: ', student)\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 3, flexDirection: 'row', alignItems: 'center', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{  }}\n                            // onPress={() => }\n                        >\n                            <Image\n                                source={\n                                    student.profile_picture === '' ?\n                                        require('../../../assets/icon-thumbnail.png')\n                                        : {uri: student.profile_picture}\n                                }\n                                style={{\n                                    width: 200,\n                                    height: 200,\n                                    borderRadius: 100\n                                }}\n                            />\n                        </TouchableHighlight>\n                    </View>\n                    \n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                        <TextInput \n                            style={{ fontSize: 50 }}\n                            value={student.name}\n                            onChangeText={name => this.setState({\n                                student: {\n                                    ...this.state.student,\n                                    name\n                                }\n                            })}\n                        />\n                        {/* <Text style={{ fontSize: 50 }}>{classes[student.class_id].name}</Text> */}\n                        {/* <PickerComponent\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                            textStyle={{fontSize: 50}}\n                            selectedValue={classes[student.class_id].name}\n                            options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                            handleOnClick={() => { }}\n                            handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                        /> */}\n                        <TouchableHighlight\n                            style={{ \n                                backgroundColor: 'rgba(255,255,255, 0.5)',\n                                alignItems: 'center',\n                                padding: 5,\n                                width: '90%',\n                                marginTop: 5\n                            }}\n                        >\n                            <Text style={{fontSize: 50}}>{classes[student.class_id].name}</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                <View style={{ flex: 5, backgroundColor: '#F5F5F5' }}>\n\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        {parents.map(parent => {\n                            return (\n                                <View key={parent.id} style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                    <TouchableHighlight\n                                        style={{ flex: 1, padding : 10, backgroundColor: '#b5e9e9', justifyContent: 'center' }}\n                                        onPress={() => this.props.addParent(parent)}\n                                    >\n                                        <View style={{ flex: 1, flexDirection: 'row' }}>\n                                            {/* <Text style={{ fontSize: 30, alignSelf: 'center' }}>{parent.role}</Text> */}\n                                            <View style={{ paddingRight: 10 }}>\n                                                <Text style={{ fontSize: 20 }}>{parent.role}</Text>\n                                            </View>\n                                            <View>\n                                                <View style={{ width: '100%', flexDirection:'row'}}>\n                                                    <Text style={{ fontSize: 20 }}>姓名: {parent.name}         </Text>\n                                                    <Text style={{ fontSize: 20 }}>帳號: {parent.username}         </Text>\n                                                </View>\n                                                <Text style={{ fontSize: 20 }}>手機: {parent.mobile}</Text>\n                                                <Text style={{ fontSize: 18 }}>工作/家用電話: {parent.work_phone}</Text>\n                                                <Text style={{ fontSize: 18 }}>地址: {parent.address}</Text>\n                                            </View>\n                                        </View>\n                                    </TouchableHighlight>\n                                </View>\n                            )\n                        })}\n                        {parents.length < 3 ?\n                            <View style={{ width: '100%', height: '33%', padding: '1%' }}>\n                                <TouchableHighlight\n                                    style={{\n                                        flex: 1,\n                                        padding : 10,\n                                        backgroundColor: 'white',\n                                        justifyContent: 'center',\n                                        borderWidth: 5,\n                                        borderRadius: 1,\n                                        borderStyle: 'dashed'\n                                    }}\n                                    onPress={() => this.addParent()}\n                                >\n                                    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>新增家長</Text>\n                                    </View>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                    </View>\n                </View>\n\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                            onPress={() => this.props.hideModal()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                            onPress={() => this.editStudentData()}\n                        >\n                            <Text style={{ fontSize: 30, alignSelf: 'center' }}>送出</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { Toast } from 'native-base'\nimport { post, get } from '../../util'\nimport Auth from '@aws-amplify/auth'\nimport { connect } from 'react-redux'\n\nclass AddParent extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            password: '',\n            qr_data: '',\n            name: ''\n        }\n    }\n\n    async componentDidMount() {\n        const { parent_data, isConnected } = this.props\n        this.setState({\n            ...this.state,\n            ...parent_data\n        })\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            return\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (parent_data.id != ''){\n            const response = await get(`/user/${parent_data.id}/qrcode`)\n            const { success, statusCode, message, data } = response\n            if (!success) {\n                alert('Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n                return \n            }\n            this.setState({\n                qr_data: data\n            })\n        }\n    }\n\n    async postParent() {\n        const { student_id, isConnected } = this.props\n        const { id, name, role, email, username, mobile, work_phone, address } = this.state\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (id === '') { // we register and then add parent to database\n            const response = await this.signUpParent()\n            if (!response.success) {\n                return\n            }\n        }\n        const body = {\n            student_id,\n            parent_data: {\n                id,\n                name, \n                role,\n                email,\n                username, \n                mobile, \n                work_phone, \n                address\n            }\n        }\n        const response = await post(`/student/${student_id}/family`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 新增家長時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n          }\n        this.props.goBack()\n    }\n\n    async signUpParent() {\n        const { username, password, name, email } = this.state\n        const response = await Auth.signUp({\n            username,\n            password,\n            attributes: {\n                name,\n                email\n            }\n          })\n            .then(values => {\n                return {\n                    success: true\n                }\n            })\n            .catch(err => {\n                alert('家長註冊有問題!請與工程師聯繫\\n\\n' + err.message)\n                return {\n                    success: false\n                }\n          })\n        return response\n    }\n\n    render() {\n        const { id, name, username, password, mobile, work_phone, address, role, email } = this.state\n        // console.log('this.state: ', this.state)\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '66%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>姓名</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={name}\n                                onChangeText={(name) => this.setState({ name })}\n                            />\n                        </View>\n\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '32%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>角色</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={role}\n                                onChangeText={(role) => this.setState({ role })}\n                            />\n                        </View>\n\n                        {/* <TouchableHighlight\n                            style={{\n                                width: '20%',\n                                padding: 15,\n                                backgroundColor: '#fa625f',\n                                justifyContent: 'center'\n                            }}\n                            // onPress={() => }\n                        >\n                            <Text style={{fontSize: 20, textAlign: 'center'}}>移除</Text>\n                        </TouchableHighlight> */}\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>Email</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                autoCapitalize={'none'}\n                                keyboardType={'email-address'}\n                                placeholder={''}\n                                value={email}\n                                onChangeText={(email) => this.setState({ email })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '49%',\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>帳號</Text>\n                            <TextInput\n                                editable={id === ''}\n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                autoCapitalize={'none'}\n                                value={username}\n                                onChangeText={(username) => this.setState({ username })}\n                            />\n                        </View>\n\n                        {id === '' ? \n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '49%',\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput\n                                    secureTextEntry={true}\n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={password}\n                                    onChangeText={(password) => this.setState({ password })}\n                                />\n                            </View>\n                        :   <TouchableHighlight\n                                style={{ backgroundColor: 'transparent', alignItems: 'center', justifyContent: 'center' }}\n                                onPress={() => this.props.viewQRCode(this.state.qr_data)}\n                            >\n                                <Image\n                                    source={require('../../../assets/icon-qr.png')}\n                                    style={{\n                                        width: 120,\n                                        height: 120,\n                                    }}\n                                />\n                            </TouchableHighlight>\n                        }\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>手機</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={mobile}\n                                onChangeText={(mobile) => this.setState({ mobile })}\n                            />\n                        </View>\n                    </View>\n                    \n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>工作/家用電話</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={work_phone}\n                                onChangeText={(work_phone) => this.setState({ work_phone })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>地址</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                placeholder={''}\n                                value={address}\n                                onChangeText={(address) => this.setState({ address })}\n                            />\n                        </View>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                onPress={() => this.props.goBack()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                            </TouchableHighlight>\n                        </View>\n                        {id !== '' ? \n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                    // onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                                onPress={() => this.postParent()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                    </ScrollView>\n                </View>\n\n                \n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      isConnected: state.school.isConnected\n    }\n}\n\nexport default connect(mapStateToProps, null) (AddParent)","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert } from 'react-native'\nimport QRCode from 'react-native-qrcode-svg'\n\nexport default class QRPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            // isLoading: true,\n            // data: ''\n        }\n    }\n    \n    render() {\n        const { name, role } = this.props.parent_data\n        const name_prefix = \n            role === '母' ? '媽媽'\n            : role === '父' ? '爸爸'\n            : role\n        return (\n            // <View\n            //     style={{\n            //         width: '100%',\n            //         height: '100%',\n            //         justifyContent: 'space-evenly',\n            //         alignItems: 'center'\n            //     }}\n            // >\n                <View style={{ flex: 1 }}>\n                    <View style={{ flex: 3, justifyContent: 'center', alignItems: 'center' }}>\n                        <Text style={{ fontSize: 65, }}>{this.props.student_name} {name_prefix}</Text>\n                        <QRCode\n                            value={this.props.qr_data}\n                            size={400}\n                        />\n                    </View>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{ padding: 15, backgroundColor: '#b5e9e9' }}\n                            onPress={() => this.props.goBack()}\n                        >\n                            <Text style={{ fontSize: 30 }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            // </View>\n        )\n    }\n}","import React from 'react'\nimport { View, TouchableHighlight, Image, Text, ScrollView, Platform, Alert, Dimensions } from 'react-native'\nimport { connect } from 'react-redux'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { bindActionCreators } from 'redux';\nimport { updateProfilePicture, fetchStudentsSuccess, editStudentSuccess } from '../../../redux/school/actions/index'\nimport { get, post, delete_by_id } from '../../util'\nimport Modal from './modal'\nimport EditStudentProfile from './editstudentprofile'\nimport AddParent from './addparent';\nimport QRPage from './qrpage';\n\nconst { width, height } = Dimensions.get('window')\n/* \nPage where we view/edit class information including:\n  -adding/removing class\n  -adding/removing/switching students\n  -adding/removing/switching teachers\n*/\n// const editStudent = \n//     <View>\n//       <Text>Student</Text>\n//     </View>\n\nclass Students extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: '',\n      student_id: '',\n      parent_data: {},\n      qr_data: '',\n      modal_padding: 0\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync();\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert('Sorry, we need camera roll permissions to make this work!');\n      }\n    }\n  };\n\n  _pickImage = async (student_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { base64 } = result\n        // this.setState({ image: result.uri });\n        this.getProfilePictureURL(base64, student_id, url)\n      }\n\n      // console.log(result);\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, student_id, url) {\n    const { school_name } = this.props.route.params\n    const { students } = this.props\n    const body = {\n      image,\n      url,\n      path: `${school_name}/profile_picture_${student_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await post(`/student/${student_id}/profile-picture`, body)\n    // console.log(response)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.updateProfilePicture(student_id, data.image_url)\n  }\n\n  getModalContent() {\n    const { students, classes } = this.props\n    const { showModal, modal_type, student_id, parent_data, qr_data } = this.state\n    // console.log('students: ', students)\n    if (!showModal) {\n      return null\n    } else if (modal_type === 'student') {\n      return <EditStudentProfile\n              student_id={student_id}\n              student={students[student_id]}\n              classes={classes}\n              addParent={(parent_data) => this.setState({\n                modal_type: 'add_parent',\n                parent_data\n              })}\n              editStudentSuccess={(student_id, name, old_class_id, class_id) => \n                this.props.editStudentSuccess(student_id, name, old_class_id, class_id)\n              }\n              hideModal={() => this.hideModal()}\n            />\n    } else if (modal_type === 'add_parent') {\n      return <AddParent\n              student_id={student_id}\n              parent_data={parent_data}\n              viewQRCode={(qr_data) => this.setState({\n                modal_type: 'qrpage',\n                qr_data\n              })}\n              goBack={() => this.setState({\n                modal_type: 'student'\n              })}\n            />\n    } else { // modal_type: 'qrpage'\n      return <QRPage\n              qr_data={qr_data}\n              student_name={students[student_id].name}\n              parent_data={parent_data}\n              goBack={() => this.setState({\n                modal_type: 'add_parent'\n              })}\n            />\n    }\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  confirmDeleteStudent(student_id) {\n    const {students} = this.props\n    Alert.alert(\n      `${students[student_id].name} 刪除確認`,\n      '刪除這個寶貝會將一切攸關資料(包誇父母)刪除',\n      [\n        { text: \"取消\", style: \"cancel\"},\n        { text: 'OK', onPress: () => this.deleteStudentById(student_id) }\n      ]\n    )\n  }\n\n  async deleteStudentById(student_id) {\n    const { students } = this.props\n    const response = await delete_by_id(`/student/${student_id}/`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${students[student_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.fetchStudentData()\n  }\n\n  async fetchStudentData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/student`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得學生資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {students, classes} = data\n    this.props.fetchStudentsSuccess(students, classes)\n  }\n\n  render() {\n    const { students } = this.props\n    const { showModal, modal_padding } = this.state\n    // console.log('students: ', students)\n    return (\n      <View>\n        <Modal\n          modal_padding={modal_padding}\n          show={showModal}\n          component={this.getModalContent()}\n          hideModal={() => this.hideModal()}\n        />\n        <ScrollView>\n          {Object.keys(students).map((id, index) => {\n            const student = students[id]\n            return (\n              <View key={id} style={{ flex:1, backgroundColor: 'lightgrey', flexDirection: 'row', marginBottom: 10, padding: 15 }}>\n                {/* profile picture */}\n                <TouchableHighlight\n                  style={{ }}\n                  onPress={() => this._pickImage(id, student.profile_picture)}\n                >\n                  <Image\n                    source={\n                        student.profile_picture === '' ?\n                            require('../../../assets/icon-thumbnail.png')\n                            : {uri: student.profile_picture}\n                    }\n                    style={{\n                      width: 200,\n                      height: 200,\n                      borderRadius: 100\n                    }}\n                  />\n                </TouchableHighlight>\n                \n                <View style={{ flex: 5, paddingLeft: 15 }}>\n                  {/* Name */}\n                  <View>\n                    <Text style={{ fontSize: 50 }}>{student.name}</Text>\n                  </View>\n\n                  {/* Address */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>地址: {student.address}</Text>\n                  </View>\n\n                  {/* Father phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(父): {student.father_phone}</Text>\n                  </View>\n\n                  {/* Mother phone */}\n                  <View>\n                    <Text style={{ fontSize: 20 }}>手機(母): {student.mother_phone}</Text>\n                  </View>\n                </View>\n\n                {/* Right */}\n                <View style={{ flex: 1, justifyContent: 'space-evenly' }}>\n                  <View style={{ backgroundColor: 'white' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={(event) => this.setState({ \n                        showModal: true, \n                        modal_type: 'student', \n                        student_id: id,\n                        modal_padding: Math.max(0, event.nativeEvent.pageY - height)\n                      })}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>編輯</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                  <View style={{ backgroundColor: '#fa625f' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.confirmDeleteStudent(id)}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>刪除</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                </View>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    students: state.school.students,\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      updateProfilePicture,\n      fetchStudentsSuccess,\n      editStudentSuccess,\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Students)","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class AddTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    async componentDidMount() {\n        // const { parent_data } = this.props\n        // this.setState({\n        //     ...this.state,\n        //     ...parent_data\n        // })\n        // if (parent_data.id != ''){\n        //     const response = await get(`/user/${parent_data.id}/qrcode`)\n        //     const { success, statusCode, message, data } = response\n        //     if (!success) {\n        //         Alert.alert(\n        //         `Sorry 取得家長QR Code時電腦出狀況了！`,\n        //         '請截圖和與工程師聯繫\\n\\n' + message,\n        //         [{ text: 'Ok' }]\n        //         )\n        //         return \n        //     }\n        //     this.setState({\n        //         qr_data: data\n        //     })\n        // }\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 新增教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(school_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     this.props.fetchTeachersSuccess(teachers, classes)\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { id, name, class_id, passcode, isAdmin } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        {/* <View\n                            style={{\n                                flex: 1,\n                                padding: 10\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>手機</Text>\n                                <TextInput \n                                    style={{ fontSize: 35 }}\n                                    keyboardType={'number-pad'}\n                                    placeholder={''}\n                                    value={mobile}\n                                    onChangeText={(mobile) => this.setState({ mobile })}\n                                />\n                            </View>\n                        </View> */}\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            {/* {id !== '' ? \n                                <View style={{ flex: 1, padding: 14 }}>\n                                    <TouchableHighlight\n                                        style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                        // onPress={() => this.props.goBack()}\n                                    >\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                    </TouchableHighlight>\n                                </View>\n                            : null\n                            } */}\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class EditTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    componentDidMount() {\n        const { teacher_id, teacher, classes } = this.props\n        const { name, profile_picture, passcode } = teacher\n        const class_id = this.getClassIdByTeacherId(teacher_id, classes)\n        this.setState({\n            id: teacher_id,\n            name,\n            profile_picture,\n            passcode,\n            class_id,\n            isAdmin: class_id !== '' && (classes[class_id].name === '管理員')\n        })\n        \n    }\n\n    getClassIdByTeacherId(teacher_id, classes) {\n        const class_id_list = Object.keys(classes)\n        for(var i = 0; i < class_id_list.length; i++) {\n            let class_id = class_id_list[i]\n            const { teachers } = classes[class_id]\n            for(var j = 0; j < teachers.length; j++) {\n                if (teacher_id === teachers[j]) {\n                    return class_id\n                }\n            }\n        }\n        return ''\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 更改教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(teacher_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     // this.setState({\n\n    //     // })\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes, teacher } = this.props\n        const { id, name, class_id, passcode } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess  } from '../../../redux/school/actions/index'\nimport Modal from './modal'\nimport AddTeacher from './addteacher';\nimport EditTeacher from './editteacher';\n\n/*\nPage where we view and edit Teacher profiles:\n  -creating teacher profile\n  -editing teacher profile\n  -removing teacher profile\n*/\n\nclass Teachers extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: '',\n      selected_teacher_id: ''\n    }\n  }\n\n  componentDidMount() {\n    this.getPermissionAsync()\n  }\n\n  getPermissionAsync = async () => {\n    if (Platform.OS === 'ios') {\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n      if (status !== 'granted') {\n        alert(`Sorry, we need camera roll permissions to make this work!`)\n        return \n      }\n    }\n  };\n\n  _pickImage = async (teacher_id, url) => {\n    try {\n      let result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [1,1],\n        quality: 0.4,\n        base64: true\n      });\n      if (!result.cancelled) {\n        const { base64 } = result\n        this.getProfilePictureURL(base64, teacher_id, url)\n      }\n      // console.log(result);\n    } catch (E) {\n      console.log(E);\n    }\n  };\n\n  async getProfilePictureURL(image, teacher_id, url) {\n    const { school_name } = this.props.route.params\n    const { teachers } = this.props\n    const body = {\n      image,\n      url,\n      path: `${school_name}/teacher/profile_picture_${teacher_id}_${(new Date()).getMilliseconds()}.jpg`\n    }\n    const response = await put(`/user/${teacher_id}/profile-picture`, body)\n    // console.log(response)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${teachers[teacher_id].name}照片上傳時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.props.updateTeacherProfilePicture(teacher_id, data.image_url)\n  }\n\n  async fetchTeacherData() {\n    const { school_id } = this.props.route.params\n    const response = await get(`/school/${school_id}/teacher`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n        alert('Sorry 取得教師資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n        return \n    }\n\n    const {admins, teachers, classes} = data\n    this.props.fetchTeachersSuccess(admins, teachers, classes)\n}\n\n  getModalContent() {\n    const { school_id } = this.props.route.params\n    const { classes, teachers } = this.props\n    const { modal_type, selected_teacher_id } = this.state\n    if (modal_type === 'add_teacher') {\n      return <AddTeacher\n                classes={classes}\n                school_id={school_id}\n                fetchTeacherData={() => this.fetchTeacherData()}\n                goBack={() => this.hideModal()}\n            />\n    } else if (modal_type === 'edit_teacher') {\n      return <EditTeacher\n                classes={classes}\n                teacher_id={selected_teacher_id}\n                teacher={teachers[selected_teacher_id]}\n                fetchTeacherData={() => this.fetchTeacherData()}\n                goBack={() => this.hideModal()}\n            />\n    }\n  }\n\n  hideModal() {\n    this.setState({\n      showModal: false\n    })\n  }\n\n  confirmDeleteTeacher(teacher_id) {\n    const {teachers} = this.props\n    const confirmed = confirm(`${teachers[teacher_id].name} 刪除確認`)\n    if (confirmed) {\n      this.deleteTeacher(teacher_id)\n    }\n  }\n\n  async deleteTeacher(teacher_id) {\n    const response = await delete_by_id(`/user/${teacher_id}`)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry ${teachers[teacher_id].name}刪除時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    this.fetchTeacherData()\n  }\n\n  render() {\n    const { teachers } = this.props\n    const { showModal } = this.state\n    return (\n      <View>\n        <Modal\n          show={showModal}\n          component={this.getModalContent()}\n          hideModal={() => this.hideModal()}\n        />\n        <ScrollView>\n          <View style={{ padding: 20 }}>\n            <TouchableHighlight\n              style={{ padding: 10, alignSelf: 'flex-end', backgroundColor: '#ffddb7' }}\n              onPress={() => this.setState({ showModal: true, modal_type: 'add_teacher' })}\n            >\n              <Text style={{ fontSize: 40 }}>新增教師</Text>\n            </TouchableHighlight>\n          </View>\n          {Object.keys(teachers).map((id, index) => {\n            const teacher = teachers[id]\n            return (\n              <View key={id} style={{ flex:1, backgroundColor: 'lightgrey', flexDirection: 'row', marginBottom: 10, padding: 15 }}>\n                {/* profile picture */}\n                <TouchableHighlight\n                  style={{ }}\n                  onPress={() => this._pickImage(id, teacher.profile_picture)}\n                >\n                  <Image\n                    source={\n                      teacher.profile_picture === '' ?\n                        require('../../../assets/icon-teacher-thumbnail.png')\n                        : {uri: teacher.profile_picture}\n                    }\n                    style={{\n                      width: 200,\n                      height: 200,\n                      borderRadius: 100\n                    }}\n                  />\n                </TouchableHighlight>\n                \n                <View style={{ flex: 5, paddingLeft: 15 }}>\n                  {/* Name */}\n                  <View>\n                    <Text style={{ fontSize: 50 }}>{teacher.name}</Text>\n                  </View>\n                </View>\n\n                {/* Right */}\n                <View style={{ flex: 1, justifyContent: 'space-evenly' }}>\n                  <View style={{ backgroundColor: 'white' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.setState({ showModal: true, modal_type: 'edit_teacher', selected_teacher_id: id })}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>編輯</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                  <View style={{ backgroundColor: '#fa625f' }}>\n                    <TouchableHighlight\n                      style={{padding: 15, justifyContent: 'center'}}\n                      onPress={() => this.confirmDeleteTeacher(id)}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>刪除</Text>\n                    </TouchableHighlight>\n                  </View>\n\n                </View>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </View>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    teachers: state.school.teachers,\n    classes: state.school.classes\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({\n      updateTeacherProfilePicture,\n      fetchTeachersSuccess\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Teachers)","import React from 'react'\nimport { View, Text, TouchableHighlight } from 'react-native'\n\nconst Modal = (props) => {\n    const { title, content, hideModal } = props\n    return (\n        <TouchableHighlight\n            style={{ \n                width: '100%',\n                height: '100%', \n                zIndex: 2,\n                position: 'absolute', \n                justifyContent: 'center', \n                alignItems: 'center', \n                backgroundColor: 'rgba(0,0,0,0.7)' \n            }}\n            onPress={() => hideModal()}\n        >\n            <View style={{ width: '80%', backgroundColor: 'white' }}>\n                <View style={{ padding: 10, fontSize: 30 }}>\n                    <Text>{title}</Text>\n                </View>\n                <View style={{ padding: 10 }}>\n                    {content}\n                </View>\n            </View>\n        </TouchableHighlight>\n    )\n}\n\nexport default Modal","import React from 'react'\nimport { View, Text, TextInput } from 'react-native'\n\nconst Form = (props) => {\n    const { label, value, keyboardType, onChangeText, labelStyle, inputStyle } = props\n    return (\n        <View style={{ flexDirection: 'row', padding: 5, width: '100%' }}>\n            <Text style={labelStyle}>\n                {`${label}: `}\n            </Text>\n            <TextInput \n                value={value}\n                keyboardType={keyboardType}\n                style={inputStyle}\n                onChangeText={(input) => onChangeText(input)}\n            />\n        </View>\n    )\n}\n\nexport default Form","import React from 'react'\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableHighlight,\n  Image,\n  StyleSheet,\n  TextInput,\n  KeyboardAvoidingView,\n  Alert\n} from 'react-native'\nimport { Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n  writeToAll,\n  writeToOne,\n  remindItemsToBringToAll,\n  remindItemsToBringToOne,\n  recordActivitiesForAll,\n  recordActivitiesForOne,\n  writeItemToBringToAll,\n  writeItemToBringToOne,\n  writeActivityForAll,\n  writeActivityForOne,\n  fetchClassMessageData,\n  sendMessageOnSuccess,\n  getParentMessageSuccess\n} from '../../redux/school/actions/index'\nimport Reloading from '../reloading'\nimport { formatDate, fetchClassData, beautifyDate, get, post, put } from '../util'\nimport TimeModal from '../parent/timemodal'\nimport Modal from '../modal'\nimport Form from '../form'\n\nclass MessageForParents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      date: new Date(),\n      isLoading: true,\n      to_all_message: '',\n      items_to_bring: ['母奶粉', '尿布', '水壺', '衣物'],\n      other_item: '其它',\n      items_to_bring_bool: [0, 0, 0, 0, 0],\n      activities_list: ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言'],\n      other_activity: '其它',\n      activities_bool: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n      message_by_student_id: {},\n      editingOtherItemToBring: false,\n      editingOtherItemForStudent: '',\n      editingOtherActivity: false,\n      editingOtherActivityForOne: '',\n      showDateTimeModal: false,\n      growth_standard_by_student_id: {},\n      show_growth_standard: false,\n      dob_year: '',\n      dob_month: '',\n      dob_date: ''\n    }\n    this.recordActivitiesForAll = this.recordActivitiesForAll.bind(this)\n  }\n\n  componentDidMount() {\n    const { date, teacher_name } = this.props.route.params\n    const { student_id_for_update } = this.props.message\n    const { isConnected } = this.props.class\n    if (student_id_for_update.size > 0 || !isConnected) {\n      this.setState({\n        date,\n        isLoading: false\n      })\n    } else {\n      this.setState({\n        date\n      })\n      this.fetchClassData(date)\n    }\n\n    if (!isConnected) {\n      Toast.show({\n          text: '網路連線連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"danger\",\n          duration: 4000\n      })\n    }\n\n    this.props.navigation.setOptions({ \n      title: `老師留⾔ - ${teacher_name}`\n    })\n  }\n\n  async fetchClassData(propsDate) {\n    this.props.navigation.setOptions({ \n      headerRight: () => (\n          <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#f4d41f', marginRight: 20 }} />\n      )\n    })\n    const date = new Date(propsDate)\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchClassData('message', this.props.class.class_id, start_date, end_date)\n    this.props.fetchClassMessageData(messageData.data)\n    this.setState({\n        isLoading: false\n    })\n    this.props.navigation.setOptions({ \n      headerRight: () => (\n          <View style={{ width: 16, height: 16, borderRadius: 8, backgroundColor: '#00c07f', marginRight: 20 }} />\n      )\n    })\n  }\n\n  writeToAll(text) {\n    const { teacher_id } = this.props.route.params\n    // this.setState({ to_all_message: text })\n    this.props.writeToAll(text, teacher_id)\n  }\n\n  writeToOne(text, student_id) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeToOne(text, student_id, teacher_id)\n  }\n\n  remindItemsToBringToOne(student_id, selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { message_by_student_id } = this.props.message\n    const things_to_bring = [...message_by_student_id[student_id].things_to_bring]\n    const new_bool = things_to_bring[selected_index] ? 0 : 1\n    things_to_bring.splice(selected_index, 1, new_bool)\n    this.props.remindItemsToBringToOne(student_id, things_to_bring, teacher_id)\n  }\n\n  remindItemsToBringToAll(selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { items_to_bring_bool } = this.state\n    const new_bool = items_to_bring_bool[selected_index] ? 0 : 1\n    items_to_bring_bool.splice(selected_index, 1, new_bool)\n    this.setState({\n      items_to_bring_bool\n    })\n    this.props.remindItemsToBringToAll(items_to_bring_bool, teacher_id)\n  }\n\n  otherItemForAllEditorOnBlur() {\n    const { other_item } = this.state\n    this.setState({\n      editingOtherItemToBring: false,\n      other_item: other_item === '' ? '其它' : other_item\n    })\n  }\n\n  writeItemToBringToAll(item_to_bring) {\n    const { teacher_id } = this.props.route.params\n    this.setState({\n      other_item: item_to_bring\n    })\n    this.props.writeItemToBringToAll(item_to_bring, teacher_id)\n  }\n\n  writeItemToBringToOne(student_id, item_to_bring) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeItemToBringToOne(student_id, item_to_bring, teacher_id)\n  }\n\n  editItemToBringToOneEditorOnBlur(student_id, other_item) {\n    this.setState({ editingOtherItemForStudent: '' })\n    if (other_item === '') {\n      this.props.writeItemToBringToOne(student_id, '其它')\n    }\n  }\n\n  recordActivitiesForOne(student_id, selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { message_by_student_id } = this.props.message\n    const activities = [...message_by_student_id[student_id].activities]\n    const new_bool = activities[selected_index] ? 0 : 1\n    activities.splice(selected_index, 1, new_bool)\n    this.props.recordActivitiesForOne(student_id, activities, teacher_id)\n  }\n\n  recordActivitiesForAll(selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { activities_bool } = this.state\n    const new_bool = activities_bool[selected_index] ? 0 : 1\n    activities_bool.splice(selected_index, 1, new_bool)\n    this.setState({\n      activities_bool\n    })\n    this.props.recordActivitiesForAll(activities_bool, teacher_id)\n  }\n\n  writeActivityForAll(other_activity) {\n    const { teacher_id } = this.props.route.params\n    this.setState({\n      other_activity\n    })\n    this.props.writeActivityForAll(other_activity, teacher_id)\n  }\n\n  otherActivityEditorOnBlur() {\n    const { other_activity } = this.state\n    this.setState({\n      editingOtherActivity: false,\n      other_activity: other_activity === '' ? '其它' : other_activity\n    })\n  }\n\n  writeActivityForOne(student_id, other_activity) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeActivityForOne(student_id, other_activity, teacher_id)\n  }\n  \n  activityForOneEditorOnBlur(student_id, other_activity) {\n    this.setState({ editingOtherActivityForOne: '' })\n    if (other_activity === '') {\n      this.props.writeActivityForOne(student_id, '其它')\n    }\n  }\n\n  handleSend() {\n    const { message_by_student_id, student_id_for_update } = this.props.message\n    const { isConnected } = this.props.class\n\n    if (student_id_for_update.size === 0) { \n      this.props.navigation.goBack()\n      return\n    }\n\n    if (!isConnected) {\n      Toast.show({\n        text: '網路連線連不到! 等一下再試試看',\n        buttonText: 'Okay',\n        position: \"top\",\n        type: \"danger\",\n        duration: 4000\n      })\n      return\n    }\n\n    const request_body = {\n      date: formatDate(new Date()),\n      data: this.normalize(message_by_student_id)\n    }\n\n    // console.log('request_body: ', request_body)\n\n    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/message', {\n      method: 'POST',\n      headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(request_body)\n    })\n      .then(res => res.json())\n      .then(resJson => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          Alert.alert(\n            'Error',\n            message,\n            [{text: 'OK'}]\n          )\n          return\n        }\n        this.props.sendMessageOnSuccess()\n        this.props.navigation.goBack()\n      })\n      .catch(err => {\n        Alert.alert(\n          'Error',\n          err,\n          [{text: 'OK'}]\n        )\n      })\n  }\n\n  normalize(data) {\n    const { student_id_for_update, for_all } = this.props.message\n    var normalized_data = []\n    student_id_for_update.forEach(student_id => {\n      normalized_data.push({\n        ...data[student_id],\n        text: for_all.text + ' \\n' + data[student_id].text,\n        student_id,\n      })\n    })\n    return normalized_data\n  }\n\n  selectDatetimeConfirm(date) {\n    this.setState({\n        date,\n        showDateTimeModal: false\n    })\n    this.fetchClassData(date)\n    this.fetchParentPreviousDayMessage(date)\n  }\n\n  async fetchParentPreviousDayMessage(date) {\n    const response = await get(`/message/class/${this.props.class.class_id}/previous-day?date=${formatDate(date)}`)\n    const { statusCode, message, data } = response\n    // console.log('response: ', response)\n    if (statusCode === 200) {\n      this.props.getParentMessageSuccess(data)\n    }\n  }\n\n  showGrowthStandard() {\n    const { students } = this.props.class\n    const { show_growth_standard } = this.state\n    let growth_standard_by_student_id = {}\n    Object.keys(students).map(student_id => {\n      growth_standard_by_student_id[student_id] = {\n        weight: '',\n        height: '',\n        hc: ''\n      }\n    })\n    this.setState({\n      growth_standard_by_student_id,\n      show_growth_standard: !show_growth_standard\n    })\n  }\n\n  async handleEndEditing(student_id) {\n    const { growth_standard_by_student_id } = this.state\n    // console.log('growth_standard_by_student_id: ', growth_standard_by_student_id)\n    // console.log('student_id: ', student_id)\n    let record = growth_standard_by_student_id[student_id]\n    // console.log('record: ', record)\n    if (record.weight !== '' && record.height !== '' && record.hc !== '') {\n      const { weight, height, hc } = record\n      let sendGrowthStandardDataRes = await this.sendGrowthStandardData(student_id, weight, height, hc)\n      const { success, statusCode, messate, data } = sendGrowthStandardDataRes\n      if (success) {\n        const { weight_percentile, height_percentile, hc_percentile } = data\n        // console.log('growth_standard_by_student_id[student_id]: ', growth_standard_by_student_id[student_id])\n        this.setState({\n          growth_standard_by_student_id: {\n            ...growth_standard_by_student_id,\n            [student_id]: {\n              ...growth_standard_by_student_id[student_id],\n              weight_percentile,\n              height_percentile,\n              hc_percentile\n            }\n          }\n        })\n      }\n    }\n  }\n\n  async sendGrowthStandardData(student_id, weight, height, hc) {\n    let response = await post(`/student/growth-standard-percentile`, {\n      student_id,\n      weight,\n      height,\n      head_circumference: hc,\n      date: formatDate(new Date())\n    })\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      const { students } = this.props.class\n      Alert.alert(\n        `${students[student_id].name}的體位表計算出差錯`,\n        message,\n        [\n          { text: 'OK' },\n          { text: '現在填入', onPress: () => this.showDOBModal(student_id) }\n        ]\n      )\n    }\n    return response\n  }\n\n  confirmRecord(student_id) {\n    const { teacher_id } = this.props.route.params\n    const { message_by_student_id } = this.props.message\n    let { text } = message_by_student_id[student_id]\n    const { growth_standard_by_student_id } = this.state\n    const { weight, height, hc, weight_percentile, height_percentile, hc_percentile } = growth_standard_by_student_id[student_id]\n    if (weight_percentile === null) {\n      Alert.alert(\n        '體重百分比還未計算出來',\n        '',\n        [{ text: 'OK' }]\n      )\n      return\n    }\n\n    if (height_percentile === null) {\n      Alert.alert(\n        '身高百分比還未計算出來',\n        '',\n        [{ text: 'OK' }]\n      )\n      return\n    }\n\n    if (hc_percentile === null) {\n      Alert.alert(\n        '頭圍百分比還未計算出來',\n        '',\n        [{ text: 'OK' }]\n      )\n      return\n    }\n\n    text += `\\n體重: ${weight} kg (${weight_percentile})\\n身高: ${height} cm (${height_percentile})\\n頭圍: ${hc} cm (${hc_percentile})`\n    this.props.writeToOne(text, student_id, teacher_id)\n  }\n\n  showDOBModal(student_id) {\n    this.setState({\n      show_dob_modal: true,\n      student_id_dob_edit: student_id\n    })\n  }\n\n  async editDOB() {\n    const { student_id_dob_edit, dob_year, dob_month, dob_date, growth_standard_by_student_id } = this.state\n    const { weight, height, hc } = growth_standard_by_student_id[student_id_dob_edit]\n    const response = await put(`/student/${student_id_dob_edit}/dob`,{\n      'dob': `${dob_year}-${dob_month}-${dob_date}`\n    })\n    // console.log('editDOB/response', response)\n    const { success, statusCode, message, data } = response\n    if (success) {\n      this.setState({\n        show_dob_modal: false\n      })\n      Alert.alert(\n        '更改成功！',\n        '',\n        [{ text: 'OK', onPress: () => this.handleEndEditing(student_id_dob_edit) }]\n      )\n    } else {\n      Alert.alert(\n        '出生年月日更改未成功',\n        message,\n        [{ text: 'OK' }]\n      )\n    }\n  }\n\n  render() { \n    const { isAdmin } = this.props.route.params\n    // const {  } = this.props.message\n    // console.log('this.props.message: ', this.props.message)\n    // if (this.state.isLoading) {\n    //   return (\n    //     <Reloading />\n    //   )\n    // }\n    const { teachers } = this.props\n    const { students } = this.props.class\n    const { message_by_student_id, for_all, data_dispatched, student_id_for_update, parent_messages } = this.props.message\n    const {\n      items_to_bring,\n      items_to_bring_bool,\n      activities_list,\n      activities_bool,\n      editingOtherItemToBring,\n      editingOtherItemForStudent,\n      editingOtherActivity,\n      editingOtherActivityForOne,\n      date,\n      showDateTimeModal,\n      growth_standard_by_student_id,\n      show_growth_standard,\n      show_dob_modal,\n      dob_year,\n      dob_month,\n      dob_date\n    } = this.state\n    // console.log('parent_messages: ', parent_messages)\n    return (\n      <KeyboardAvoidingView\n        style={{\n          flex: 1\n        }}\n        behavior='height'\n        keyboardVerticalOffset={80}\n        enabled\n      >\n        {showDateTimeModal && <TimeModal\n            start_date={date}\n            datetime_type={'date'}\n            hideModal={() => this.setState({ showDateTimeModal: false })}\n            selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n            minDatetime={null}\n            maxDatetime={new Date()}\n        />}\n\n        {show_dob_modal &&\n          <Modal\n            title={'寶貝出生年月日填入'}\n            content={\n              <View style={{ backgroundColor: 'rgba(0,0,0,0.2)' }}>\n                <Form\n                  label={'年'}\n                  value={dob_year}\n                  keyboardType={'numeric'}\n                  onChangeText={(dob_year) => this.setState({\n                    dob_year\n                  })}\n                  labelStyle={{\n                    padding: 15,\n                    fontSize: 20,\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  inputStyle={{\n                    flex: 1,\n                    padding: 15,\n                    fontSize: 20,\n                    backgroundColor: 'rgba(255,255,255,0.4)',\n                    borderLeftWidth: 1,\n                    borderColor: 'white'\n                  }}\n                />\n\n                <Form\n                  label={'月'}\n                  value={dob_month}\n                  keyboardType={'numeric'}\n                  onChangeText={(dob_month) => this.setState({\n                    dob_month\n                  })}\n                  labelStyle={{\n                    padding: 15,\n                    fontSize: 20,\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  inputStyle={{\n                    flex: 1,\n                    padding: 15,\n                    fontSize: 20,\n                    backgroundColor: 'rgba(255,255,255,0.4)',\n                    borderLeftWidth: 1,\n                    borderColor: 'white'\n                  }}\n                />\n\n                <Form\n                  label={'日'}\n                  value={dob_date}\n                  keyboardType={'numeric'}\n                  onChangeText={(dob_date) => this.setState({\n                    dob_date\n                  })}\n                  labelStyle={{\n                    padding: 15,\n                    fontSize: 20,\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  inputStyle={{\n                    flex: 1,\n                    padding: 15,\n                    fontSize: 20,\n                    backgroundColor: 'rgba(255,255,255,0.4)',\n                    borderLeftWidth: 1,\n                    borderColor: 'white'\n                  }}\n                />\n\n                <TouchableHighlight\n                  onPress={() => this.editDOB()}\n                >\n                  <Text style={{ fontSize: 20, padding: 15, backgroundColor: '#b5e9e9' }}>\n                    送出\n                  </Text>\n                </TouchableHighlight>\n              </View>\n            }\n            hideModal={() => this.setState({\n              show_dob_modal: false\n            })}\n          />\n        }\n        <View\n          style={{\n            padding: 10,\n            flexDirection: 'row',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n          }}\n        >\n          <TouchableHighlight\n            onPress={() => {\n              if (!data_dispatched || !isAdmin) return\n              this.setState({ showDateTimeModal: true})\n            }}\n          >\n            <Text style={{ fontSize: 40 }}>{beautifyDate(date)}</Text>\n          </TouchableHighlight>\n\n          <TouchableHighlight\n            style={{\n              borderWidth: show_growth_standard ? 0 : 2,\n              borderColor: show_growth_standard ? 'transparent' : 'green',\n              backgroundColor: show_growth_standard ? '#dcf3d0' : 'transparent' \n            }}\n            onPress={() => this.showGrowthStandard()}\n          >\n            <Text style={{ fontSize: 40, padding: 5 }}>體位表</Text>\n          </TouchableHighlight>\n\n          <TouchableHighlight\n            style={{ backgroundColor: '#dcf3d0' }}\n            onPress={() => this.handleSend()}\n          >\n            <Text style={{ fontSize: 40, padding: 5 }}>送出</Text>\n          </TouchableHighlight>\n        </View> \n        <ScrollView\n          contentContainerStyle={{ alignItems: 'center', marginBottom: 20 }}\n        >\n          <View style={{ width: '95%' }}>\n            <Card style={{padding: 10}}>\n              <View style={{ flex: 1 }}>\n                <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-evenly', paddingVertical: 10 }}>\n                  <View style={{\n                    width: '29%',\n                    backgroundColor: '#fff1b5',\n                    borderRadius: 10,\n                    marginRight: 5\n                  }}>\n                    <Text style={{ fontSize: 35, alignSelf: 'center' }}>家長準備</Text>\n                    <View\n                      style={{\n                        flex: 1,\n                        flexDirection: 'row',\n                        justifyContent: 'space-evenly',\n                        flexWrap: 'wrap'\n                      }}\n                    >\n                      {items_to_bring.map((item, index) => {\n                        return (\n                          <TouchableHighlight\n                            key={index}\n                            style={{\n                              backgroundColor: items_to_bring_bool[index] ? '#f4d41f' : '#fff7d6',\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                            }}\n                            onPress={() => this.remindItemsToBringToAll(index)}\n                          >\n                            <Text style={{fontSize: 20}}>{item}</Text>\n                          </TouchableHighlight>\n                        )\n                      })}\n                      <TouchableHighlight\n                            style={{\n                                backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6',\n                                justifyContent: 'center',\n                                borderRadius: 3,\n                                padding: 3,\n                                margin: 5\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.remindItemsToBringToAll(4)}\n                            onLongPress={() => this.setState({ editingOtherItemToBring: true })}\n                      >\n                        {editingOtherItemToBring ?\n                          <View style={{ flex: 1 }}>\n                            \n                            <TextInput\n                              autoFocus={true}\n                              selectTextOnFocus={true}\n                              value={this.state.other_item}\n                              style={{\n                                alignSelf: 'center',\n                                fontSize: 20,\n                                backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6'\n                              }}\n                              onChangeText={item_to_bring => this.writeItemToBringToAll(item_to_bring.trim())}\n                              onBlur={() => this.otherItemForAllEditorOnBlur()}\n                            />\n\n                          </View>\n                          : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{this.state.other_item}</Text>\n                        }\n                      </TouchableHighlight>\n                    </View>\n                  </View>\n                  <View\n                    style={{\n                      width: '69%',\n                      backgroundColor: '#b5e9e9',\n                      borderRadius: 10,\n                      marginLeft: 5\n                    }}\n                  >\n                    <Text style={{ fontSize: 35, alignSelf: 'center' }}>今日活動</Text>\n                    <View style={{\n                      flexDirection: 'row',\n                      justifyContent: 'space-evenly',\n                      flexWrap: 'wrap'\n                    }}>\n                      {activities_list.map((activity, index) => {\n                        return (\n                          <TouchableHighlight\n                            key={index}\n                            style={{\n                              backgroundColor: activities_bool[index] ? '#368cbf' : '#eaf8f8',\n                              // borderColor: '#d6f2f2',\n                              // borderWidth: 2,\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                              // width: '13%'\n                            }}\n                            onPress={() => this.recordActivitiesForAll(index)}\n                          >\n                            <Text style={{fontSize: 20}}>{activity}</Text>\n                          </TouchableHighlight>\n                        )\n                      })}\n\n                      <TouchableHighlight\n                            style={{\n                                backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8',\n                                justifyContent: 'center',\n                                borderRadius: 3,\n                                padding: 3,\n                                margin: 5\n                            }}\n                            underlayColor='#368cbf'\n                            onPress={() => this.recordActivitiesForAll(8)}\n                            onLongPress={() => this.setState({ editingOtherActivity: true })}\n                      >\n                        {editingOtherActivity ?\n                          <View style={{ flex: 1 }}>\n                            \n                            <TextInput\n                              autoFocus={true}\n                              selectTextOnFocus={true}\n                              value={this.state.other_activity}\n                              style={{\n                                alignSelf: 'center',\n                                fontSize: 20,\n                                backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8'\n                              }}\n                              onChangeText={other_activity => this.writeActivityForAll(other_activity.trim())}\n                              onBlur={() => this.otherActivityEditorOnBlur()}\n                            />\n\n                          </View>\n                          : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{this.state.other_activity}</Text>\n                        }\n                      </TouchableHighlight>\n                    </View>\n                  </View>\n                </View>\n                <TextInput\n                  value={for_all.text}\n                  style={{\n                    alignSelf: 'center',\n                    width: '100%',\n                    borderColor: 'gray',\n                    borderWidth: 2,\n                    borderRadius: 10,\n                    fontSize: 25,\n                    padding: 20\n                  }}\n                  multiline={true}\n                  // maxLength={100}\n                  onChangeText={to_all_message => this.writeToAll(to_all_message)}\n                  onEndEditing={() => this.writeToAll(for_all.text.trim())}\n                />\n              </View>\n            </Card>\n          </View>\n          {Object.keys(students).map(student_id => {\n            const {text, things_to_bring, activities, other_item, other_activity, teacher_id } = message_by_student_id[student_id]\n            // console.log('teacher: ', teachers[teacher_id])\n            // console.log('teacher_id: ', teacher_id)\n            const teacher = teachers[teacher_id] === undefined ?  '' : `- ${teachers[teacher_id].name}`\n            return (\n              <View key={student_id} style={{ width: '95%' }}>\n                <Card style={{ padding: 10 }}>\n                  <View style={{ flex: 1, flexDirection: 'row'}}>\n                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                      <Image\n                        source={\n                          students[student_id].profile_picture === '' ?\n                            require('../../assets/icon-thumbnail.png')\n                            : {uri: students[student_id].profile_picture}\n                        }\n                        style={{ width: 100, height: 100, borderRadius: 50 }}\n                      />\n                      <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                    </View>\n                    <View style={{ flex: 4 }}>\n                      {/* Growth rate standard */}\n                      {show_growth_standard && \n                        <View style={{ flexDirection: 'row' }}>\n                          <View>\n                            <View style={{ flexDirection: 'row', paddingBottom: 15 }}>\n                              <Text style={{ fontSize: 20, paddingRight: 15 }}>\n                                體重: \n                              </Text>\n                              <TextInput\n                                value={growth_standard_by_student_id[student_id].weight}\n                                keyboardType={'numeric'}\n                                style={{\n                                  fontSize: 20,\n                                  borderBottomWidth: 1, \n                                  paddingHorizontal: 10,\n                                  paddingVertical: 1\n                                }}\n                                onChangeText={(weight) => {\n                                  this.setState({\n                                    growth_standard_by_student_id: {\n                                      ...growth_standard_by_student_id,\n                                      [student_id]: {\n                                        ...growth_standard_by_student_id[student_id],\n                                        weight\n                                      }\n                                    }\n                                  })\n                                }}\n                                onEndEditing={() => this.handleEndEditing(student_id)}\n                              />\n                              <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                                kg\n                              </Text>\n                              <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                                {growth_standard_by_student_id[student_id].weight_percentile && `(${growth_standard_by_student_id[student_id].weight_percentile})`}\n                              </Text>\n                            </View>\n\n                            <View style={{ flexDirection: 'row', paddingBottom: 15}}>\n                              <Text style={{ fontSize: 20, paddingRight: 15 }}>\n                                身高:\n                              </Text>\n                              <TextInput\n                                value={growth_standard_by_student_id[student_id].height}\n                                keyboardType={'numeric'}\n                                style={{\n                                  fontSize: 20,\n                                  borderBottomWidth: 1, \n                                  paddingHorizontal: 10,\n                                  paddingVertical: 1\n                                }}\n                                onChangeText={(height) => {\n                                  this.setState({\n                                    growth_standard_by_student_id: {\n                                      ...growth_standard_by_student_id,\n                                      [student_id]: {\n                                        ...growth_standard_by_student_id[student_id],\n                                        height\n                                      }\n                                    }\n                                  })\n                                }}\n                                onEndEditing={() => this.handleEndEditing(student_id)}\n                              />\n                              <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                                cm\n                              </Text>\n                              <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                                {growth_standard_by_student_id[student_id].height_percentile && `(${growth_standard_by_student_id[student_id].height_percentile})`}\n                              </Text>\n                            </View>\n\n                            <View style={{ flexDirection: 'row', paddingBottom: 15}}>\n                              <Text style={{ fontSize: 20, paddingRight: 15 }}>\n                                頭圍:\n                              </Text>\n                              <TextInput\n                                value={growth_standard_by_student_id[student_id].hc}\n                                keyboardType={'numeric'}\n                                style={{\n                                  fontSize: 20,\n                                  borderBottomWidth: 1, \n                                  paddingHorizontal: 10,\n                                  paddingVertical: 1\n                                }}\n                                onChangeText={(hc) => {\n                                  this.setState({\n                                    growth_standard_by_student_id: {\n                                      ...growth_standard_by_student_id,\n                                      [student_id]: {\n                                        ...growth_standard_by_student_id[student_id],\n                                        hc\n                                      }\n                                    }\n                                  })\n                                }}\n                                onEndEditing={() => this.handleEndEditing(student_id)}\n                              />\n                              <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                                cm\n                              </Text>\n                              <Text style={{ fontSize: 20, marginLeft: 15 }}>\n                                {growth_standard_by_student_id[student_id].hc_percentile && `(${growth_standard_by_student_id[student_id].hc_percentile})`}\n                              </Text>\n                            </View>\n                          </View>\n                          <View style={{ padding: 10 }}>\n                            <TouchableHighlight\n                              style={{ padding: 10, backgroundColor: '#b5e9e9' }}\n                              underlayColor={'#368cbf'}\n                              onPress={() => this.confirmRecord(student_id)}\n                            >\n                              <Text style={{ fontSize: 20 }}>確認載入</Text>\n                            </TouchableHighlight>\n                          </View>\n                        </View>\n                      }\n                      <View style={{ flex: 1, flexDirection: 'row', paddingBottom: 10 }}>\n                        <View\n                          style={{\n                            width: '29%',\n                            backgroundColor: '#fff1b5',\n                            borderRadius: 10,\n                            marginRight: 3\n                          }}\n                        >\n                          <Text style={{ fontSize: 28, alignSelf: 'center' }}>家長準備</Text>\n                          <View\n                              style={{\n                              flex: 1,\n                              flexDirection: 'row',\n                              justifyContent: 'space-evenly',\n                              flexWrap: 'wrap',\n                            }}\n                          >\n                            {items_to_bring.map((item, index) => {\n                              return (\n                                <TouchableHighlight\n                                  key={index}\n                                  style={{\n                                    backgroundColor: things_to_bring[index] ? '#f4d41f' : '#fff7d6',\n                                    borderRadius: 3,\n                                    padding: 4,\n                                    margin: 5\n                                  }}\n                                  onPress={() => this.remindItemsToBringToOne(student_id, index)}\n                                >\n                                  <Text style={{fontSize: 20}}>{item}</Text>\n                                </TouchableHighlight>\n                              )\n                            })}\n\n                            <TouchableHighlight\n                                  style={{\n                                      backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                      justifyContent: 'center',\n                                      borderRadius: 3,\n                                      padding: 3,\n                                      margin: 5\n                                  }}\n                                  underlayColor='#f4d41f'\n                                  onPress={() => this.remindItemsToBringToOne(student_id, 4)}\n                                  onLongPress={() => this.setState({ editingOtherItemForStudent: student_id })}\n                            >\n                              {editingOtherItemForStudent === student_id ?\n                                <View style={{ flex: 1 }}>\n                                  \n                                  <TextInput\n                                    autoFocus={true}\n                                    selectTextOnFocus={true}\n                                    value={other_item}\n                                    style={{\n                                      alignSelf: 'center',\n                                      fontSize: 20,\n                                      backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                    }}\n                                    onChangeText={item_to_bring => this.writeItemToBringToOne(student_id, item_to_bring.trim())}\n                                    onBlur={() => this.editItemToBringToOneEditorOnBlur(student_id, other_item)}\n                                  />\n\n                                </View>\n                                : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_item}</Text>\n                              }\n                            </TouchableHighlight>\n                          </View>\n                        </View>\n                        <View style={{\n                          width: '70%',\n                          borderRadius: 10,\n                          marginLeft: 3,\n                          backgroundColor: '#b5e9e9'\n                        }}>\n                          <View style={{ flex:1, flexDirection: 'row' }}>\n                            <View style={{ flex: 2 }}>\n                              <Text style={{ fontSize: 28, alignSelf: 'flex-end' }}>今日活動</Text>\n                            </View>\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                              {student_id_for_update.has(student_id) ? \n                                <Text \n                                  style={{ fontSize: 15, alignSelf: 'flex-end', paddingRight: 10, color: 'red' }}\n                                >\n                                    未送出\n                                </Text>\n                                : null}\n                            </View>\n                          </View>\n                          <View style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            justifyContent: 'space-between',\n                            flexWrap: 'wrap'\n                          }}>\n                            {activities_list.map((activity, index) => {\n                              return (\n                                <TouchableHighlight\n                                  key={index}\n                                  style={{\n                                    backgroundColor: activities[index] ? '#368cbf' : '#d6f2f2',\n                                    borderRadius: 3,\n                                    padding: 4,\n                                    margin: 5\n                                  }}\n                                  onPress={() => this.recordActivitiesForOne(student_id, index)}\n                                >\n                                  <Text style={{fontSize: 20}}>{activity}</Text>\n                                </TouchableHighlight>\n                              )\n                            })}\n\n                            <TouchableHighlight\n                                  style={{\n                                      backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                      justifyContent: 'center',\n                                      borderRadius: 3,\n                                      padding: 3,\n                                      margin: 5\n                                  }}\n                                  underlayColor='#368cbf'\n                                  onPress={() => this.recordActivitiesForOne(student_id, 8)}\n                                  onLongPress={() => this.setState({ editingOtherActivityForOne: student_id })}\n                            >\n                              {editingOtherActivityForOne === student_id ?\n                                <View style={{ flex: 1 }}>\n                                  \n                                  <TextInput\n                                    autoFocus={true}\n                                    selectTextOnFocus={true}\n                                    value={other_activity}\n                                    style={{\n                                      alignSelf: 'center',\n                                      fontSize: 20,\n                                      backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                    }}\n                                    onChangeText={activity => this.writeActivityForOne(student_id, activity.trim())}\n                                    onBlur={() => this.activityForOneEditorOnBlur(student_id, other_activity)}\n                                  />\n\n                                </View>\n                                : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_activity}</Text>\n                              }\n                            </TouchableHighlight>\n                          </View>\n                        </View>\n                      </View>\n\n                      {/* parent's message from previous day */}\n                      {parent_messages[student_id] !== undefined &&\n                        <Text\n                          style={{\n                            fontSize: 20, \n                            padding: 20\n                          }}\n                        >\n                          {parent_messages[student_id]}\n                        </Text>\n                      }\n\n                      {for_all.text !== '' && <TextInput\n                        editable={false}\n                        value={for_all.text}\n                        style={{ \n                          borderColor: 'gray',\n                          borderTopWidth: 2,\n                          borderLeftWidth: 2,\n                          borderRightWidth: 2,\n                          borderTopLeftRadius: 10,\n                          borderTopRightRadius: 10,\n                          fontSize: 25, \n                          padding: 20,\n                          backgroundColor: '#F5F5F5'\n                        }}\n                        multiline={true}\n                        // maxLength={100}\n                        // onChangeText={text => this.writeToOne(text, student_id)}\n                      />}\n                      <TextInput\n                        value={text}\n                        style={{ \n                          borderColor: 'gray', \n                          borderBottomWidth: 2,\n                          borderLeftWidth: 2,\n                          borderRightWidth: 2,\n                          borderTopWidth: for_all.text !== '' ? 0 : 2,\n                          borderBottomLeftRadius: 10, \n                          borderBottomRightRadius: 10,\n                          borderTopLeftRadius:  for_all.text !== '' ? 0 : 10,\n                          borderTopRightRadius:  for_all.text !== '' ? 0 : 10,\n                          fontSize: 25, \n                          padding: 20 \n                        }}\n                        multiline={true}\n                        // maxLength={100}\n                        onChangeText={text => this.writeToOne(text, student_id)}\n                        onEndEditing={() => this.writeToOne(text.trim(), student_id)}\n                      />\n                      <Text style={{ fontSize: 25, alignSelf: 'flex-end' }}>{teacher}</Text>\n                    </View>\n                  </View>\n                </Card>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  cardContainer: {\n      width: 119,\n      height: '100%',\n      backgroundColor: 'transparent'\n  },\n  thumbnailImage: {\n      height: 80,\n      width: 80,\n      borderRadius: 40\n  }\n})\n\n\nconst mapStateToProps = state => {\n  return {\n    class: state.classInfo,\n    message: state.message,\n    teachers: state.school.teachers\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    ...bindActionCreators({\n      writeToAll,\n      writeToOne,\n      remindItemsToBringToAll,\n      remindItemsToBringToOne,\n      recordActivitiesForAll,\n      recordActivitiesForOne,\n      writeItemToBringToAll,\n      writeItemToBringToOne,\n      writeActivityForAll,\n      writeActivityForOne,\n      fetchClassMessageData,\n      sendMessageOnSuccess,\n      getParentMessageSuccess\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (MessageForParents)","import React from 'react'\nimport { View, ScrollView, Text, TouchableHighlight, Alert, Image } from 'react-native'\nimport { Card, CardItem, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { get, formatDate } from '../util'\nimport { bindActionCreators } from 'redux'\nimport { fetchTeacherAttendanceSuccess, fetchStudentAttendanceSuccess } from '../../redux/school/actions/index'\nimport LoginNumberPad from './loginnumberpad'\nimport Modal from './modal'\n\nclass AttendancePage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            isLoading: true,\n            display_list: [],\n            students_or_teachers: 'students',\n            selected_class_id: 'all',\n            showLoginNumberPad: false,\n            showModal: false,\n            modalStudentId: '',\n            teacherClicked: '',\n            teacher_id: '',\n            pageClicked: ''\n        }\n    }\n\n    componentDidMount() {\n        const { students, teacherOnDuty, teachers } = this.props.school\n        const display_list = Object.keys(students)\n        this.setState({ display_list })\n        this.fetchTeacherAttendance()\n        this.fetchStudentAttendance()\n        // this.fetchTeacherWellness()\n        // this.fetchStudentWellness()\n        \n        if (teacherOnDuty !== '') {\n            const { name }= teachers[teacherOnDuty]\n            this.props.navigation.setOptions({ \n                headerRight: () => (\n                    <View style={{ paddingRight: 20 }}>\n                        <Text style={{ fontSize: 30 }}>{`值班老師：${name}`}</Text>\n                    </View>\n                )\n            })\n        }\n    }\n\n    selectPersonType(type) {\n        const { classes } = this.props.school\n        const { selected_class_id } = this.state\n        if (selected_class_id === 'all') {\n            this.setState({\n                display_list: Object.keys(this.props.school[type]),\n                students_or_teachers: type\n            })\n            return\n        }\n\n        this.setState({\n            display_list: classes[selected_class_id][type],\n            students_or_teachers: type\n        })\n    }\n\n    selectClass(class_id) {\n        const { classes } = this.props.school\n        const {students_or_teachers} = this.state\n        // console.log('classes[class_id][students_or_teachers]: ', classes[class_id][students_or_teachers])\n        this.setState({\n            display_list: classes[class_id][students_or_teachers],\n            selected_class_id: class_id\n        })\n    }\n\n    selectAttendanceType(attendanceType) {\n        const { classes } = this.props.school\n        const { students_or_teachers, selected_class_id } = this.state\n        var display_list = []\n        var all_id_list = []\n        if (selected_class_id === 'all') {\n            all_id_list = Object.keys(this.props.school[students_or_teachers])\n        } else {\n            all_id_list = classes[selected_class_id][students_or_teachers]\n        }\n        for (var i = 0; i < all_id_list.length; i++) {\n            if (this.props.school[`student_${attendanceType}`].has(all_id_list[i])\n                || this.props.school[`teacher_${attendanceType}`].has(all_id_list[i])) {\n                display_list.push(all_id_list[i])\n            }\n        }\n        this.setState({\n            display_list\n        })\n    }\n\n    async fetchTeacherAttendance() {\n        const { school_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/staff-attendance?school_id=${school_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得教師出席資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        // console.log('data: ', data)\n        const { attendance, teachers } = data\n        this.props.fetchTeacherAttendanceSuccess(attendance, teachers)\n    }\n\n    async fetchStudentAttendance() {\n        const { school_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/attendance?school_id=${school_id}&date=${date}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 取得學生出席資料時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n        }\n\n        const { attendance, students, present, absent } = data\n        // console.log('data: ', data)\n        this.props.fetchStudentAttendanceSuccess(attendance, students, present, absent)\n    }\n\n    handleOnClick(person_id) {\n        const { teacherOnDuty } = this.props\n        const { students_or_teachers } = this.state\n        // console.log('students_or_teachers: ', students_or_teachers)\n        if (students_or_teachers === 'students') {\n            if (teacherOnDuty === '') {\n                this.setState({ \n                    showLoginNumberPad: true,\n                    pageClicked: 'student_modal',\n                    modalStudentId: person_id,\n                    // showModal: true\n                })\n                return\n            }\n            this.showModal(person_id)\n        } else {\n            this.setState({ showLoginNumberPad: true, teacherClicked: person_id })\n        }\n    }\n\n    showModal(student_id) {\n        this.setState({\n            // showLoginNumberPad: true,\n            modalStudentId: student_id,\n            showModal: true\n        })\n    }\n\n    handleEnterPasscode(passcode) {\n        const { passcodeTeacherId } = this.props.school\n        const { passcodeAdminId, teachers } = this.props\n        const { pageClicked, teacherClicked } = this.state\n        const teacher_id = passcodeTeacherId[passcode]\n        const admin_id = passcodeAdminId[passcode]\n        if (admin_id !== undefined) {\n            this.setState({\n                teacher_id: admin_id,\n                pageClicked: '',\n                showModal: true,\n                showLoginNumberPad: false\n            })\n        } else if (pageClicked === 'student_modal' && teacher_id !== undefined) {\n            this.setState({\n                teacher_id,\n                pageClicked: '',\n                showModal: true,\n                showLoginNumberPad: false\n            })\n        } else if (teacher_id === undefined || teacher_id !== teacherClicked) {\n            Toast.show({\n                text: 'Wrong password!',\n                buttonText: 'Okay',\n                position: \"top\",\n                type: \"warning\",\n                duration: 3000\n            })\n        } else {\n            this.setState({\n                showModal: true,\n                showLoginNumberPad: false,\n                // modalTeacherId: teacher_id\n            })\n        }\n    }\n\n    hideLoginPad() {\n        this.setState({ \n            showLoginNumberPad: false,\n            modalStudentId: ''\n        })\n    }\n\n    hideModal() {\n        this.setState({\n            showModal: false,\n            modalStudentId: '',\n            teacher_id: ''\n        })\n    }\n\n    render() {\n        const { school_id } = this.props.route.params\n        const { school, teacherOnDuty } = this.props\n        const { \n            student_present,\n            student_unmarked,\n            student_absent,\n            teacher_present,\n            teacher_unmarked,\n            teacher_absent\n        } = school\n        const { \n            display_list,\n            students_or_teachers,\n            selected_class_id,\n            modalStudentId,\n            teacherClicked,\n            teacher_id,\n            showLoginNumberPad\n        } = this.state\n        // console.log('school: ', school)\n        // console.log('attendance: ', school.attendance)\n        // console.log('student_present: ', student_present)\n        // console.log('student_absent: ', student_absent)\n        // console.log('teacherOnDuty: ', teacherOnDuty)\n        // console.log('teacher_id: ', teacher_id)\n        return (\n            <View style={{ flex: 1 }}>\n                {showLoginNumberPad ? \n                    <LoginNumberPad\n                        handleEnterPasscode={(passcode) => this.handleEnterPasscode(passcode)}\n                        hideLoginPad={() => this.hideLoginPad()}\n                    /> : null\n                }\n\n                <Modal\n                    show={this.state.showModal}\n                    student_id={modalStudentId}\n                    teacher_id={teacherClicked}\n                    teacherOnDuty={teacherOnDuty || teacher_id}\n                    class_id={selected_class_id}\n                    school_id={school_id}\n                    navigation={this.props.navigation}\n                    // unmarked={unmarked}\n                    // absent={absent}\n                    fetchStudentAttendance={() => this.fetchStudentAttendance()}\n                    fetchTeacherAttendance={() => this.fetchTeacherAttendance()}\n                    hideModal={() => this.hideModal()}\n                />\n                \n                {/*////////\n                STUDENT/TEACHER \n                ////////*/}\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ \n                                flex: 1, \n                                backgroundColor: students_or_teachers === 'students' ? 'lightgrey' : 'white', \n                                justifyContent: 'center' \n                            }}\n                            onPress={() => this.selectPersonType('students')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>學生</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ \n                                flex:1,\n                                backgroundColor: students_or_teachers === 'teachers' ? 'lightgrey' : 'white', \n                                justifyContent: 'center' \n                            }}\n                            onPress={() => this.selectPersonType('teachers')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>教師</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                {/*////////\n                CLASSES\n                ////////*/}\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                    {Object.keys(school.classes).map(class_id => {\n                        if (class_id === 'all') {\n                            return null\n                        }\n                        return (\n                            <View key={class_id} style={{ flex: 1, padding: 10 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        backgroundColor: selected_class_id === class_id ? 'lightgrey' : 'white', \n                                        justifyContent: 'center' \n                                    }}\n                                    onPress={() => this.selectClass(class_id)}\n                                >\n                                    <Text style={{ fontSize: 40, textAlign: 'center' }}>{school.classes[class_id].name}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        )\n                    })}\n                </View>\n\n                {/*////////\n                ATTENDANCE STATUS\n                ////////*/}\n                <View style={{ flex: 1, flexDirection: 'row', backgroundColor: 'white' }}>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex: 1, backgroundColor: '#ffe1d0', justifyContent: 'center' }}\n                            onPress={() => this.selectAttendanceType('absent')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>缺席</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, backgroundColor: '#fff1b5', justifyContent: 'center' }}\n                            onPress={() => this.selectAttendanceType('unmarked')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>未知</Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ flex: 1, padding: 10 }}>\n                        <TouchableHighlight\n                            style={{ flex:1, backgroundColor: '#dcf3d0', justifyContent: 'center' }}\n                            onPress={() => this.selectAttendanceType('present')}\n                        >\n                            <Text style={{ fontSize: 40, textAlign: 'center' }}>出席</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n\n                {/*////////\n                DISPLAY\n                ////////*/}\n                <View style={{ flex: 9, backgroundColor: 'lightgrey' }}>\n                    <ScrollView contentContainerStyle={{ flexDirection:'row', flexWrap: 'wrap', backgroundColor: 'transparent' }}>\n                        {display_list.map(person_id => {\n                            const person = school[students_or_teachers][person_id]\n                            return (\n                                <TouchableHighlight \n                                    key={person_id}\n                                    style={{ \n                                        height: 300, \n                                        width: '33.3%', \n                                        padding: 5,\n                                        // backgroundColor: this.props.attendance.unmarked.has(person_id) ? 'black' : 'white'\n                                    }}\n                                    onPress={() => this.handleOnClick(person_id)}\n                                >\n                                    {/* <View style={{ flex: 1, padding: 10, backgroundColor: 'white' }}> */}\n                                        <Card style={{ flex: 1, padding: 10, backgroundColor: 'white' }}>\n                                            <CardItem style={{ justifyContent: 'center' }}>\n                                                    <Image\n                                                        source={\n                                                            person.profile_picture === '' && students_or_teachers === 'students' ?\n                                                                require('../../assets/icon-thumbnail.png')\n                                                                : person.profile_picture === '' && students_or_teachers === 'teachers' ?\n                                                                    require('../../assets/icon-teacher-thumbnail.png')\n                                                                    : {uri: person.profile_picture}\n                                                        }\n                                                        style={{\n                                                            height: 200,\n                                                            width: 200,\n                                                            borderRadius: 100,\n                                                            borderWidth: 10,\n                                                            borderColor: \n                                                                student_present.has(person_id) || teacher_present.has(person_id) ? '#dcf3d0'\n                                                                    : student_unmarked.has(person_id) || teacher_unmarked.has(person_id) ? '#fff1b5'\n                                                                        : '#ffe1d0'\n                                                        }}\n                                                    />\n                                            </CardItem>\n                                            <CardItem\n                                                footer\n                                                style={{ justifyContent: 'center', marginTop: -5 }}\n                                            >\n                                                <Text style={{ marginTop: -10 }}>{person.name}</Text>\n                                            </CardItem>\n                                        </Card>\n                                    {/* </View> */}\n                                </TouchableHighlight>\n                            )\n                        })}\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        school: state.school,\n        teacherOnDuty: state.school.teacherOnDuty,\n        teachers: state.school.teachers,\n        passcodeAdminId: state.school.passcodeAdminId,\n        attendance: state.attendance\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            fetchTeacherAttendanceSuccess,\n            fetchStudentAttendanceSuccess\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (AttendancePage)","import React from 'react'\nimport { View, Text, RefreshControl, StyleSheet, Image, TouchableHighlight, ScrollView, Alert } from 'react-native'\nimport { connect } from 'react-redux'\n// import MedRequestModal from './medrequestmodal'\nimport { bindActionCreators } from 'redux';\n// import { initializeRequests, fillMedRequest } from '../../../redux/school/actions/index' \nimport Reloading from '../reloading'\nimport { formatDate, put, get, beautifyDate } from '../util'\nimport LoginNumberPad from './loginnumberpad'\nimport TimeModal from '../parent/timemodal'\n\nclass Inbox extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            isLoading: true,\n            refreshing: false,\n            selected_request_id: '',\n            showLoginNumberPad: false,\n            messages: [],\n            messages_read: new Set(),\n            showDateModal: false\n        }\n    }\n\n    componentDidMount() {\n        const { messages, date } = this.props.route.params\n        this.setState({\n            date,\n            messages: this.sortMessages(messages)\n        })\n    }\n\n    async markRead(message_id, morning_reminder_id, student_id, index) {\n        const response = await put(`/message/read`, {\n            'message_id': message_id,\n            'morning_reminder_id': morning_reminder_id,\n            student_id\n        })\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                `Sorry 標記已讀訊息時電腦出狀況了！`,\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n              )\n              return \n        }\n        this.bubbleDown(index)\n        let messages_read = new Set([...this.state.messages_read])\n        if (message_id !== null) messages_read.add(message_id)\n        if (morning_reminder_id !== null) messages_read.add(morning_reminder_id)\n        this.setState({\n            messages_read\n        })\n    }\n\n    bubbleDown(index) {\n        const { messages, messages_read } = this.state\n        const n = messages.length\n        while (index < n-1) {\n            const { message_id } = messages[index+1]\n            if (!messages_read.has(message_id)) {\n                var temp = messages[index]\n                messages[index] = messages[index+1]\n                messages[index+1] = temp \n            }\n            index+=1\n        }\n        this.setState({\n            messages\n        })\n    }\n\n    sortMessages(data) {\n        let messages = data\n        let left_pointer = 0\n        let messages_read = new Set()\n        for(var i = 0; i < messages.length; i++) {\n            const { message_id, morning_reminder_id, message_read, morning_reminder_read } = messages[i]\n            if ((message_read !== null && !message_read) || \n                (morning_reminder_read !== null && !morning_reminder_read)) {\n                var temp = messages[left_pointer]\n                messages[left_pointer] = messages[i]\n                messages[i] = temp\n                left_pointer+=1\n            } else {\n                if (message_id !== null) messages_read.add(message_id)\n                if (morning_reminder_id !== null) messages_read.add(morning_reminder_id)\n            }\n        }\n        this.setState({\n            messages_read\n        })\n        return messages\n    }\n\n    async refresh(date) {\n        const { class_id } = this.props.route.params\n        const response = await get(`/message/class/${class_id}/unread?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n                `Sorry 取得家長訊息時電腦出狀況了！`,\n                '請截圖和與工程師聯繫\\n\\n' + message,\n                [{ text: 'Ok' }]\n              )\n              return \n        }\n        this.setState({ messages: this.sortMessages(data) })\n    }\n\n    selectDatetimeConfirm(date) {\n        this.setState({\n            date,\n            showDateModal: false\n        })\n        this.refresh(date)\n    }\n\n    goBackADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 1) {\n            date.setDate(date.getDate() - 3)\n        } else {\n            date.setDate(date.getDate() - 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    goForwardADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 5) {\n            date.setDate(date.getDate() + 3)\n        } else {\n            date.setDate(date.getDate() + 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    componentWillUnmount() {\n        const { onGoBack, date } = this.props.route.params\n        onGoBack(date)\n    }\n\n    render() {\n        const { students } = this.props.route.params\n        const { messages, messages_read, date, showDateModal } = this.state\n        return (\n            <View style={{ flex: 1, paddingBottom: 40 }}>\n                {showDateModal &&\n                    <TimeModal\n                        start_date={date}\n                        datetime_type={'date'}\n                        hideModal={() => this.setState({ showDateModal: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={null}\n                        maxDatetime={new Date()}\n                    />\n                }\n                <View style={{ flexDirection: 'row', justifyContent: 'space-between'}}>\n                    <View style={{ width: '15%'}}>\n                        <TouchableHighlight\n                            style={{ flex: 1, justifyContent: 'center', alignItems: 'center'}}\n                            onPress={() => this.goBackADay()}\n                        >\n                            <Image\n                                source={require('../../assets/icon-back.png')}\n                                style={{ width: 40, height: 40 }}\n                            />\n                        </TouchableHighlight>\n                    </View>\n\n                    <TouchableHighlight\n                        style={{ alignSelf: 'center', padding: 10 }}\n                        onPress={() => this.setState({ showDateModal: true })}\n                    >\n                        <Text style={{ fontSize: 50 }}>{beautifyDate(date)}</Text>\n                    </TouchableHighlight>\n\n                    <View style={{ width: '15%'}}>\n                        {date.toDateString() !== (new Date).toDateString() &&\n                            <TouchableHighlight\n                                style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}\n                                onPress={() => this.goForwardADay()}\n                            >\n                                <Image\n                                    source={require('../../assets/icon-forward.png')}\n                                    style={{ width: 40, height: 40 }}\n                                />\n                            </TouchableHighlight>\n                        }\n                    </View>\n                </View>\n                \n                <ScrollView>\n                    {messages.map((message, index) => {\n                        const {\n                            message_id,\n                            morning_reminder_id,\n                            activities, \n                            items_to_bring, \n                            message_for_teacher, \n                            morning_reminder, \n                            other_activity, \n                            other_item, \n                            student_id, \n                            teacher_id, \n                            text,\n                            message_read,\n                            morning_reminder_read\n                        } = message\n                        const read = messages_read.has(message_id) || messages_read.has(morning_reminder_id)\n                        return (\n                            <View \n                                key={index}\n                                style={{\n                                    flexDirection: 'row',\n                                    backgroundColor: 'white',\n                                    borderWidth: 1,\n                                    borderColor: 'lightgrey',\n                                    marginBottom: 20,\n                                    padding: 20,\n\n                                }}\n                            >\n                                <View>\n                                    <Image\n                                        source={\n                                            students[student_id].profile_picture === '' ?\n                                                require('../../assets/icon-thumbnail.png')\n                                                : {uri: students[student_id].profile_picture} \n                                        }\n                                        style={styles.thumbnailImage}\n                                    />\n                                    <View style={{ justifyContent: 'center', alignItems: 'center', paddingTop: 20 }}>\n                                        <Text style={{ fontSize: 25 }}>\n                                            {students[student_id].name}\n                                        </Text>\n                                    </View>\n                                    <TouchableHighlight\n                                        disabled={read}\n                                        style={{\n                                            justifyContent: 'center', \n                                            alignItems: 'center', \n                                            marginTop: 20, \n                                            padding: 15,\n                                            backgroundColor: read ? '#dcf3d0' : '#ffe1d0'\n                                        }}\n                                        onPress={() => this.markRead(message_id, morning_reminder_id, student_id, index)}\n                                    >\n                                        <Text style={{ fontSize: 25 }}>{read ? '已讀' : '未讀'}</Text>\n                                    </TouchableHighlight>\n                                </View>\n                                \n                                <View style={{ flex:1, marginLeft: 20 }}>\n\n                                    <View style={{}}>\n                                        <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                            老師的話:\n                                        </Text>\n                                        <Text style={{ fontSize: 20 }}>\n                                            {text && text + '\\n'}\n                                        </Text>\n                                    </View>\n\n                                    <View style={{}}>\n                                        <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                            家長回應:\n                                        </Text>\n                                        <Text style={{ fontSize: 20 }}>\n                                            {message_for_teacher && message_for_teacher + '\\n'}\n                                        </Text>\n                                    </View>\n\n                                    <View style={{}}>\n                                        <Text style={{ fontSize: 25, fontWeight: 'bold' }}>\n                                            早晨叮嚀:\n                                        </Text>\n                                        <Text style={{ fontSize: 20 }}>\n                                            {morning_reminder && morning_reminder + '\\n'}\n                                        </Text>\n                                    </View>\n\n                                </View>\n                            </View>\n                        )\n                    })}\n                </ScrollView>\n            </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    cardContainer: {\n        width: 170,\n        paddingRight: 5\n    },\n    thumbnailImage: {\n        height: 160,\n        width: 160,\n        borderRadius: 80\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        class: state.classInfo,\n        requests: state.medicationrequests\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (Inbox)","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess, deleteTeacher  } from '../../../redux/school/actions/index'\n\n\nexport default class DownloadPage extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: ''\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  handleNavigate(pageName) {\n    const { school_name, school_id } = this.props.route.params\n    this.props.navigation.navigate(pageName, { school_name, school_id })\n  }\n\n  render() {\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'space-around'}}>\n            <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('DownloadTeacherAttendance')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>學生出勤表</Text>\n            </TouchableHighlight>\n\n            <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('DownloadTeacherAttendance')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>教師出勤表</Text>\n            </TouchableHighlight>\n        </ScrollView>\n    )\n  }\n}","import React from 'react'\nimport { View, ScrollView, TouchableHighlight, Image, Text, Platform, Alert } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { put, delete_by_id, get } from '../../util'\nimport { updateTeacherProfilePicture, fetchTeachersSuccess, deleteTeacher  } from '../../../redux/school/actions/index'\n\n\nexport default class DownloadTeacherAttendance extends React.Component{\n  constructor(props) {\n    super(props)\n    this.state={\n      showModal: false,\n      modal_type: ''\n    }\n  }\n\n  componentDidMount() {\n    const { school_name, school_id } = this.props.route.params\n    console.log('school_name, school_id: ', school_name, school_id)\n\n  }\n\n  render() {\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n            {/* <TouchableHighlight\n                style={{\n                    width: '80%',\n                    padding: 50,\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    backgroundColor: '#b5e9e9',\n                    marginVertical: 20\n                }}\n                onPress={()=> this.handleNavigate('Registration')}\n                underlayColor=\"#368cbf\"\n            >\n                <Text style={{ fontSize: 70 }}>教師出勤</Text>\n            </TouchableHighlight> */}\n        </ScrollView>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TextInput, TouchableHighlight, ScrollView, Image, KeyboardAvoidingView } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { connect } from 'react-redux'\nimport { get, post, formatDate, formatTime, beautifyDate, beautifyMonthDate } from '../../util'\n\nclass AnnouncementHome extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            selected_all_classes: true,\n            selected_classes: new Set(),\n            class_id_list: [],\n            text: '',\n            announcements: [],\n            page_number: 0,\n            is_loading: true\n        }\n    }\n    \n    /*\n        1. text and be able to import pictures\n        2. be able to pick classes(include, exclude)\n        3. be able to see which parent has read or not read the announcement(ability to track past announcements)\n    */\n\n    async componentDidMount() {\n        this.unsubscribe = this.props.navigation.addListener('focus', async () => {\n            // console.log('focused!!!!')\n            await this.fetchAnnouncements()\n        })\n        // await this.fetchAnnouncements()\n    }\n\n    async fetchAnnouncements() {\n        const { school_id } = this.props.route.params\n        const { page_number } = this.state\n        const response = await get(`/announcement?school_id=${school_id}&page=${page_number}`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchAnnouncements/response: ', response)\n        if (success) {\n            this.setState({\n                announcements: data\n            })\n        }\n    }\n\n    // async fetchReadStatusByAnnouncementId(announcement_id) {\n    //     const response = await get(`/announcement/${announcement_id}`)\n    //     console.log(response)\n    // }\n    componentWillUnmount() {\n        this.unsubscribe()\n    }\n\n    render () {\n        const { school_id, school_name } = this.props.route.params\n        const { classes, students } = this.props\n        const { announcements } = this.state\n        \n        return (\n            <View style={{ flex: 1 }}>\n                <View style={{ flexDirection: 'row', justifyContent: 'flex-end', paddingVertical: 7 }}>\n                    <TouchableHighlight\n                        style={{ padding: 10, backgroundColor: 'lightblue', marginRight: 10 }}\n                        onPress={() => this.props.navigation.push('AddAnnouncementPage', {\n                            school_id,\n                            school_name\n                        })}\n                    >\n                        <Text style={{ fontSize: 20 }}>新增</Text>\n                    </TouchableHighlight>\n                </View>\n                <ScrollView contentContainerStyle={{ alignItems: 'center' }}>\n                    {announcements.map((announcement, index) => {\n                        const date = beautifyDate(new Date(announcement.timestamp))\n                        return (\n                            <TouchableHighlight\n                                key={announcement.id}\n                                style={{ }}\n                                onPress={() => this.props.navigation.push('Announcement', { \n                                    school_id,\n                                    announcement,\n                                    school_name\n                                })}\n                            >\n                                <Card\n                                    style={{\n                                        padding: 20,\n                                        width: '95%',\n                                        height: 200,\n                                        flexDirection: 'row'\n                                    }}\n                                >\n                                    <View style={{ width: '100%', overflow: 'hidden'}}>\n                                        <View style={{ paddingBottom: 20 }}>\n                                            <Text style={{ fontSize: 25 }}>{announcement.title}</Text>\n                                            <Text style={{ fontSize: 15 }}>{date}</Text>\n                                        </View>\n                                        <View style={{ }}>\n                                            <Text style={{ fontSize: 18 }}>{announcement.text}</Text>\n                                        </View>\n                                    </View>\n                                </Card>\n                            </TouchableHighlight>\n                        )\n                    })}\n                </ScrollView>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        classes: state.school.classes,\n        students: state.school.students\n    }\n}\n\nexport default connect(mapStateToProps) (AnnouncementHome)","import React from 'react'\nimport { View, Text, TextInput, TouchableHighlight, KeyboardAvoidingView, ScrollView, Alert, Image, Platform } from 'react-native'\nimport { connect } from 'react-redux'\nimport { formatDate, formatTime, post } from '../../util'\nimport * as ImagePicker from 'expo-image-picker';\nimport * as Permissions from 'expo-permissions';\n// import s3 from '../../../configuration/s3';\nimport Reloading from '../../reloading'\n\nclass AddAnnouncementPage extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            selected_all_classes: true,\n            selected_classes: new Set(),\n            class_id_list: [],\n            text: '',\n            title: '',\n            images: [],\n            sendLoading: false,\n            links: []\n        }\n    }\n\n    componentDidMount () {\n        this.getPermissionAsync()\n        const { classes } = this.props\n        let class_id_list = []\n        Object.keys(classes).forEach((class_id) => {\n            // if (classes[class_id].name !== '管理員' && !classes[class_id].name.includes('畢業')) {\n                class_id_list.push(class_id)\n            // }\n        })\n        this.setState({\n            class_id_list,\n            selected_classes: new Set(class_id_list)\n        })\n    }\n\n    selectClass (class_id) {\n        const { selected_classes, class_id_list } = this.state\n        let new_selected_classes = new Set([...selected_classes])\n        if ( new_selected_classes.has(class_id) ) {\n            new_selected_classes.delete(class_id)\n        } else {\n            new_selected_classes.add(class_id)\n        }\n        this.setState({\n            selected_classes: new_selected_classes,\n            selected_all_classes: new_selected_classes.size === class_id_list.length ? true : false\n        })\n    }\n\n    selectAllClasses() {\n        const { selected_all_classes } = this.state\n        this.setState({\n            selected_all_classes: !selected_all_classes,\n            selected_classes: selected_all_classes ? new Set() : new Set(this.state.class_id_list)\n        })\n    }\n\n    async postAnnouncement() {\n        const { school_id, school_name } = this.props.route.params\n        const { text, date, selected_classes, title, images, links } = this.state\n        if (selected_classes.size === 0) {\n            // Alert.alert(\n            //     '請選擇班級',\n            //     '',\n            //     [\n            //         { text: 'Ok' }\n            //     ]\n            // )\n            alert('請選擇班級')\n            return\n        }\n\n        if (title === '') {\n            // Alert.alert(\n            //     'Title 未填',\n            //     '',\n            //     [\n            //         { text: 'Ok' }\n            //     ]\n            // )\n            alert('Title 未填')\n            return\n        }\n\n        this.setState({ sendLoading: true })\n\n        const response = await post(`/announcement`, {\n            'school_id': school_id,\n            'title': title,\n            'text': text,\n            'timestamp': `${formatDate(date)} ${formatTime(date)}`,\n            'class_id_list': [...selected_classes],\n            'images': images,\n            'school_name': school_name,\n            'links': links\n        })\n        const { success, statusCode, message, data } = response\n        if ( success ) {\n            this.props.navigation.navigate('AnnouncementHome', {\n                school_id,\n                school_name,\n                update_page: true\n            })\n        } else {\n            // Alert.alert(\n            //     '送出訊息時出狀況',\n            //     message,\n            //     [\n            //         { text: 'Ok' }\n            //     ]\n            // )\n            alert('送出訊息時出狀況')\n            return\n        }\n    }\n\n    getPermissionAsync = async () => {\n        if (Platform.OS === 'ios') {\n            const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\n            if (status !== 'granted') {\n                alert('Sorry, we need camera roll permissions to make this work!');\n            }\n        }\n    };\n    \n    _pickImage = async () => {\n        try {\n            let result = await ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: false,\n                quality: 0.4,\n                base64: true\n            });\n            if (!result.cancelled) {\n                const { base64 } = result\n                this.setState({\n                    images: [...this.state.images, base64]\n                })\n                // this.setState({ image: result.uri });\n                // this.getProfilePictureURL(base64, student_id, url)\n            }\n        \n            // console.log(result);\n        } catch (E) {\n            console.log(E);\n        }\n    };\n\n    removeImage(index) {\n        const { images } = this.state\n        images.splice(index, 1)\n        this.setState({\n            images\n        })\n    }\n\n    handleAddLink() {\n        const { links } = this.state\n        links.push({\n            text: '',\n            url: ''\n        })\n        this.setState({\n            links\n        })\n    }\n\n    handleChangeLinkText(text, index) {\n        const { links } = this.state\n        links[index].text = text\n        this.setState({\n            links\n        })\n    }\n\n    handleChangeUrl(url, index) {\n        const { links } = this.state\n        links[index].url = url\n        this.setState({\n            links\n        })\n    }\n\n    handleDeleteUrl(index) {\n        const { links } = this.state\n        links.splice(index, 1)\n        this.setState({\n            links\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { selected_all_classes, class_id_list, selected_classes, text, title, images, sendLoading, links } = this.state\n        \n        return (\n            <KeyboardAvoidingView\n                style={{\n                    flex: 1\n                }}\n                behavior='height'\n                keyboardVerticalOffset={80}\n                enabled\n            >   \n                <ScrollView contentContainerStyle={{ }} keyboardShouldPersistTaps='never'>\n                    <View style={{ padding: 15, flexDirection: 'row', alignItems: 'center', flexWrap: 'wrap' }}>\n                        <Text style={{ fontSize: 25 }}>班級:</Text>\n                        {class_id_list.map((class_id) => { \n                            return (\n                                <TouchableHighlight\n                                    key={class_id}\n                                    style={{ \n                                        backgroundColor: selected_classes.has(class_id) ? '#368cbf' : 'rgba(0, 0, 0, 0.1)',\n                                        marginLeft: 15\n                                    }}\n                                    underlayColor={'#368cbf'}\n                                    onPress={() => this.selectClass(class_id)}\n                                >\n                                    <Text \n                                        style={{ \n                                            padding: 10,\n                                            fontSize: 25,\n                                            color: selected_classes.has(class_id) ? 'rgba(255,255,255,0.6)' : 'rgba(0, 0, 0, 0.5)'\n                                        }}\n                                    >\n                                        {classes[class_id].name}\n                                    </Text>\n                                </TouchableHighlight>\n                            )\n                        })}\n                        <TouchableHighlight \n                            style={{\n                                backgroundColor: selected_all_classes ? '#368cbf' : 'rgba(0, 0, 0, 0.1)',\n                                marginLeft: 15\n                            }}\n                            underlayColor={'#368cbf'}\n                            onPress={() => this.selectAllClasses()}\n                        >\n                            <Text style={{ padding: 10, fontSize: 25, color: selected_all_classes ? 'rgba(255,255,255,0.6)' : 'rgba(0, 0, 0, 0.5)' }}>\n                                所有\n                            </Text>\n                        </TouchableHighlight>\n                    </View>\n                    <View style={{ padding: 15, backgroundColor: 'lightgrey' }}>\n                        <View style={{ flexDirection: 'row', width: '100%' }}>\n                            <Text style={{ fontSize: 25 }}>標題: </Text>\n                            <TextInput\n                                value={title}\n                                placeholder={'必填'}\n                                style={{\n                                    // width: '100%',\n                                    flex: 1,\n                                    fontSize: 25,\n                                    borderBottomWidth: 1,\n                                    borderBottomColor: 'gray'\n                                }}\n                                onChangeText={title => this.setState({\n                                    title\n                                })}\n                            />\n                        </View>\n                        <TextInput\n                            value={text}\n                            style={{\n                                backgroundColor: 'white',\n                                alignSelf: 'center',\n                                width: '100%',\n                                borderColor: 'gray',\n                                borderWidth: 2,\n                                borderRadius: 10,\n                                fontSize: 25,\n                                padding: 20,\n                                paddingTop: 20,\n                                marginVertical: 15\n                            }}\n                            multiline={true}\n                            // maxLength={100}\n                            onChangeText={text => this.setState({\n                                text\n                            })}\n                            // onEndEditing={() => this.writeToAll(for_all.text.trim())}\n                        />\n                        <View style={{ }}>\n                            <Text style={{ fontSize: 20, marginRight: 20 }}>連結</Text>\n                            {links.map((link,index) => {\n                                return (\n                                    <View\n                                        key={index} \n                                        style={{ flex: 1, flexDirection: 'row', marginTop: 15 }}\n                                    >\n                                        <View\n                                            style={{ \n                                                flex: 7,\n                                                backgroundColor: 'rgba(255,255,255,0.7)', \n                                                padding: 8, \n                                                borderRadius: 7\n                                            }}\n                                        >\n                                            <Text style={{ }}>顯示文字</Text>\n                                            <TextInput\n                                                value={link.text}\n                                                style={{ padding: 5, borderBottomWidth: 1 }}\n                                                onChangeText={(text) => this.handleChangeLinkText(text, index)}\n                                            />\n\n                                            <Text style={{ marginTop: 10 }}>連結</Text>\n                                            <TextInput\n                                                value={link.url}\n                                                style={{ padding: 5, borderBottomWidth: 1 }}\n                                                onChangeText={(url) => this.handleChangeUrl(url, index)}\n                                            />\n                                        </View>\n                                        <View style={{ flex: 1, backgroundColor: 'grey' }}>\n                                            <TouchableHighlight\n                                                style={{ \n                                                    flex: 1, \n                                                    padding: 10, \n                                                    backgroundColor: '#ffe1d0', \n                                                    alignItems: 'center', \n                                                    justifyContent: 'center' \n                                                }}\n                                                onPress={() => this.handleDeleteUrl(index)}\n                                            >\n                                                <Text>\n                                                    刪除\n                                                </Text>\n                                            </TouchableHighlight>\n                                        </View>\n                                    </View>\n                                )\n                            })}\n\n                            <View style={{ flexDirection: 'row', alignItems: 'center', marginVertical: 15 }}>\n                                <TouchableHighlight \n                                    style={{\n                                        backgroundColor: 'rgba(255,255,255,0.7)', \n                                        paddingVertical: 10, \n                                        paddingHorizontal: 20,\n                                        borderWidth: 2,\n                                        borderRadius: 10,\n                                        borderStyle: 'dashed' \n                                    }}\n                                    onPress={() => this.handleAddLink()}\n                                >\n                                    <Text>\n                                        新增\n                                    </Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                        <View>\n                            <Text style={{ fontSize: 20 }}>相片</Text>\n                            <View style={{ flexDirection: 'row', marginTop: 20 }}>\n                                <View style={{ flex: 1, flexDirection: 'row' }}>\n                                    {images.map((base64, index) => {\n                                        return (\n                                            <TouchableHighlight \n                                                key={index}\n                                                onPress={() => this.removeImage(index)}\n                                            >\n                                                <Image\n                                                    style={{ width: 100, height: 100, marginRight: 10, borderRadius: 10 }}\n                                                    source={{ uri: `data:image/png;base64,${base64}` }}\n                                                />\n                                            </TouchableHighlight>\n                                        )\n                                    })}\n                                    <TouchableHighlight\n                                        style={{\n                                            // padding: 10,\n                                            backgroundColor: 'rgba(255,255,255,0.7)',\n                                            width: 100,\n                                            height: 100,\n                                            justifyContent: 'center',\n                                            alignItems: 'center',\n                                            borderWidth: 2,\n                                            borderRadius: 10,\n                                            borderStyle: 'dashed'\n                                        }}\n                                        onPress={() => this._pickImage() }\n                                    >\n                                        <Text>新增</Text>\n                                    </TouchableHighlight>\n                                </View>\n                                <TouchableHighlight\n                                    disabled={sendLoading}\n                                    style={{\n                                        // width: '10%',\n                                        backgroundColor: 'lightblue',\n                                        padding: 10,\n                                        alignSelf: 'flex-end'\n                                    }}\n                                    onPress={() => this.postAnnouncement()}\n                                >\n                                    {sendLoading ? \n                                        <Reloading />\n                                    : <Text style={{ fontSize: 25 }}>送出</Text>}\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                        \n                    </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        classes: state.school.classes\n    }\n}\n\nexport default connect(mapStateToProps) (AddAnnouncementPage)","import React from 'react'\nimport { View, TouchableHighlight, Text } from 'react-native'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport reducer from '../../redux/school/reducers/index'\nimport TeacherHome from './teacherhome'\nimport { NavigationContainer } from '@react-navigation/native'\nimport { createStackNavigator } from '@react-navigation/stack'\nimport SchoolHome from './schoolhome'\nimport TeacherClockInOut from './teacherclockinout';\n// import DismissChildQRScan from './dismisschildqrscan';\nimport TeacherMedicineLog from './logs/medicinelog';\nimport WellnessLog from './logs/wellnesslog';\nimport TeacherAppetiteLog from './logs/appetitelog';\nimport TeacherSleepLog from './logs/sleeplog';\nimport TeacherMilkLog from './logs/milklog';\nimport DiaperLog from './logs/diaperlog';\nimport AdminHome from './admin/adminhome'\nimport Announcement from './admin/announcement'\nimport Registration from './admin/registration'\nimport Students from './admin/students'\nimport Teachers from './admin/teachers'\nimport MessageForParents from './messageforparents'\nimport AttendancePage from './attendancepage'\nimport PickupAlert from './pickupalert'\nimport Inbox from './inbox'\nimport DownloadPage from './admin/downloadpage'\nimport DownloadTeacherAttendance from './admin/downloadteacherattendance'\nimport AnnouncementHome from './admin/announcementhome'\nimport AddAnnouncementPage from './admin/addannouncementpage'\n\nconst store = createStore(reducer)\nconst Stack = createStackNavigator()\n\nexport default class SchoolApp extends React.Component {\n\n    render() {\n        return (\n            <Provider store={store}>\n                <NavigationContainer>\n                    <Stack.Navigator \n                        initialRouteName=\"SchoolHome\"\n                        screenOptions={{\n                            gestureEnabled: false,\n                            headerTitleStyle: {\n                                fontWeight: 'bold',\n                                fontSize: 30,\n                                alignSelf: 'center'\n                            },\n                            // cardStyle: { backgroundColor: 'transparent' },\n                            // cardOverlayEnabled: true,\n                            // cardStyleInterpolator: ({ current: { progress } }) => ({\n                            //     cardStyle: {\n                            //         opacity: progress.interpolate({\n                            //         inputRange: [0, 0.5, 0.9, 1],\n                            //         outputRange: [0, 0.25, 0.7, 1],\n                            //         }),\n                            //     },\n                            //     overlayStyle: {\n                            //         opacity: progress.interpolate({\n                            //         inputRange: [0, 1],\n                            //         outputRange: [0, 0.5],\n                            //         extrapolate: 'clamp',\n                            //         }),\n                            //     },\n                            // }),\n                        }}\n                    >\n                        <Stack.Screen \n                            name=\"SchoolHome\"\n                            component={SchoolHome}\n                            initialParams={{\n                                school_id: this.props.school_id,\n                                school_name: this.props.school_name,\n                                loadAuth: this.props.loadAuth\n                            }}\n                            options={{ \n                                title: '',\n                                headerRight: () => (\n                                    <TouchableHighlight\n                                        style={{ padding: 10, marginRight: 20 }}\n                                        onPress={() => this.props.handleSignOut()}\n                                    >\n                                        <Text style={{ fontSize: 30 }}>登出</Text>\n                                    </TouchableHighlight>\n                                )\n                            }}\n                        />\n                        <Stack.Screen \n                            name=\"AdminHome\"\n                            component={AdminHome}\n                            options={{ gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Announcement\"\n                            component={Announcement}\n                            options={{ gestureEnabled: true, title: '公告' }}\n                        />\n                        <Stack.Screen\n                            name=\"AnnouncementHome\"\n                            component={AnnouncementHome}\n                            options={{ gestureEnabled: true, title: '公告首頁' }}\n                        />\n                        <Stack.Screen\n                            name=\"AddAnnouncementPage\"\n                            component={AddAnnouncementPage}\n                            options={{ gestureEnabled: true, title: '新增公告' }}\n                        />\n                        <Stack.Screen \n                            name=\"Registration\"\n                            component={Registration}\n                            options={{ headerLeft: null, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Students\"\n                            component={Students}\n                            options={{ gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Teachers\"\n                            component={Teachers}\n                            options={{ gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"DownloadPage\"\n                            component={DownloadPage}\n                            options={{ gestureEnabled: true, title: '下載' }}\n                        />\n                        <Stack.Screen \n                            name=\"DownloadTeacherAttendance\"\n                            component={DownloadTeacherAttendance}\n                            options={{ gestureEnabled: true, title: '學生出勤下載' }}\n                        />\n                        <Stack.Screen \n                            name=\"AttendancePage\"\n                            component={AttendancePage}\n                            options={{\n                                title: '出席/打卡',\n                                headerRight: () => (\n                                    <View style={{ paddingRight: 20 }}>\n                                        <Text style={{ fontSize: 30 }}>{'值班老師：未登入'}</Text>\n                                    </View>\n                                )\n                            }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherHome\"\n                            component={TeacherHome}\n                            options={{ headerLeft: null, title: '' }}\n                        />\n                        <Stack.Screen \n                            name=\"Inbox\"\n                            component={Inbox}\n                            options={{gestureEnabled: true, title: '' }}\n                        />\n                        <Stack.Screen\n                            name=\"PickupAlert\"\n                            component={PickupAlert}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherClockInOut\"\n                            component={TeacherClockInOut}\n                            options={{ gestureEnabled: true, title: '打卡' }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherMedicineLog\"\n                            component={TeacherMedicineLog}\n                            options={{ gestureEnabled: true, title: '托藥單' }}\n                        />\n                        <Stack.Screen \n                            name=\"WellnessLog\"\n                            component={WellnessLog}\n                            options={{ gestureEnabled: true, title: '健康' }}\n                        />\n                        <Stack.Screen \n                            name=\"MessageForParents\"\n                            component={MessageForParents}\n                            options={{ gestureEnabled: true, title: '老師留⾔' }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherAppetiteLog\"   \n                            component={TeacherAppetiteLog}\n                            options={{ gestureEnabled: true, title: '飲食' }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherSleepLog\"\n                            component={TeacherSleepLog}\n                            options={{ gestureEnabled: true, title: '睡眠' }}\n                        />\n                        <Stack.Screen \n                            name=\"TeacherMilkLog\"\n                            component={TeacherMilkLog}\n                            options={{ gestureEnabled: true, title: '餵奶' }}\n                        />\n                        <Stack.Screen \n                            name=\"DiaperLog\"\n                            component={DiaperLog}\n                            options={{ gestureEnabled: true, title: '如廁' }}\n                        />\n                        \n                    </Stack.Navigator>\n                </NavigationContainer>\n            </Provider>\n        )\n    }\n}","import React from 'react'\nimport { StyleSheet, TextInput, Platform, KeyboardAvoidingView, TouchableHighlight, Image } from 'react-native'\nimport { View, Text } from 'native-base'\nimport Auth from '@aws-amplify/auth'\nimport Reloading from '../reloading'\n\nclass Signin extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            password: '',\n            errMessage: '',\n            user_type: '',\n            isLoading: false\n        }\n    }\n\n    componentDidMount() {\n        // this.props.clearState\n    }\n\n    handleSignIn() {\n        // invoke google auth with scopes, ask for school's authorization\n        // allow requests to googple photo api\n        this.setState({\n            isLoading: true\n        })\n        const { username, password } = this.state\n        Auth.signIn(username, password)\n            .then((user) => {\n                if (user.challengeName === 'NEW_PASSWORD_REQUIRED') {\n                    // const {requiredAttributes} = user.challengeParam\n                    this.completeNewPassword(user)\n                    return\n                }\n                this.setState({\n                    isLoading: false\n                })\n                this.props.loadAuth()\n            })\n            .catch((err) => {\n                if (err.code === 'UserNotConfirmedException') {\n                    this.props.changeAuthState('ConfirmSignUpPage', username)\n                } else {\n                    this.props.changeAuthState('signedout', username)\n                    this.setState({ \n                        errMessage: err.message,\n                        isLoading: false\n                    })\n                }\n            })\n    }\n\n    completeNewPassword(user) {\n        Auth.completeNewPassword(\n            user,\n            'barRoco',\n            { name: 'barroco' }\n        )\n        .then((user) => {\n            this.setState({\n                isLoading: false\n            })\n            this.props.loadAuth()\n        })\n        .catch((err) => {\n            this.setState({\n                errMessage: err.message,\n                isLoading: false\n            })\n        })\n    }\n\n    render () {\n        const { isLoading } = this.state\n        if (isLoading) {\n            return (\n                <Reloading />\n            )\n        }\n        const keyboardVerticalOffset = Platform.OS === 'ios' ? 60 : 0\n        const errMessage = this.state.errMessage ? (\n            <Text style={{ color: 'red'}}>\n                {this.state.errMessage}\n            </Text>\n        ) : (\n            null\n        )\n\n        return (\n            <KeyboardAvoidingView \n                style={styles.container} \n                behavior={'padding'}\n                keyboardVerticalOffset={keyboardVerticalOffset} \n                enabled\n            >\n                <Image\n                    source={require('../../assets/app_logo.png')}\n                    style={{\n                        width: 200,\n                        height: 200,\n                    }}\n                />\n\n                <Text style={{ fontSize: 40 }}>請登入</Text>\n                {errMessage}\n                <TextInput\n                    placeholder=\"Email / 帳號\"\n                    keyboardType=\"email-address\"\n                    autoCapitalize=\"none\"\n                    style={styles.textInput}\n                    onChangeText={(username) => this.setState({ username })}\n                    value={this.state.username}\n                />\n\n                <TextInput\n                    secureTextEntry\n                    placeholder=\"密碼\"\n                    style={styles.textInput}\n                    onChangeText={(pass) => this.setState({ password: pass })}\n                    value={this.state.password}\n                />\n\n                <View style={{ marginTop: 20 }}>\n                    <TouchableHighlight\n                        style={{ backgroundColor: 'grey', padding: 20 }}\n                        onPress={() => this.handleSignIn()}\n                    >\n                        <Text style={{ fontSize: 30 }}>登入</Text>\n                    </TouchableHighlight>\n                </View>\n                \n                {/*<View style={{ width: '90%', margin: 10, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('','')}>\n                        <Text>Sign in</Text>\n                    </Button>\n                    <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.props.changeAuthState('SignupPage', '')}>\n                        <Text>No Account? Sign up here!</Text>\n                    </Button>\n                </View>\n                <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('abc123', 'password')}>\n                    <Text>我是家長</Text>\n                </Button>\n                <Button style={{ backgroundColor: '#35D0BA' }} onPress={() => this.handleSignIn('formosa', 'formosaADMIN')}>\n                    <Text>我是校方</Text>\n                </Button>*/}\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    textInput: {\n        height: 80,\n        width: '90%',\n        borderColor: 'gray',\n        borderWidth: 1,\n        marginTop: 20,\n        fontSize: 30,\n        padding: 10\n    }\n})\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n//         ...bindActionCreators({addUserType, clearState}, dispatch)\n//     }\n// }\n\n// function mapStateToProps(state) {\n//     return({\n//         user: state.user\n//     })\n// }\n\n// export default connect(mapStateToProps, mapDispatchToProps) (Signin)\nexport default Signin","import React from 'react'\n// import { db } from '../../configuration/db'\nimport { View, StyleSheet, Text, KeyboardAvoidingView, TextInput, AsyncStorage, TouchableHighlight } from 'react-native'\nimport { Button } from 'native-base'\n// import firebase from 'firebase'\n// import { addCurrentUser, addUserType } from '../../redux/actions/index'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons'\nimport Auth from '@aws-amplify/auth'\n\nclass Signup extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: '',\n            name: '',\n            user_type: '',\n            email: '',\n            password: '',\n            errMessage: ''\n        }\n    }\n\n    handleSignup() {\n        const {username, password, name, email, user_type} = this.state\n        if (!this.state.user_type) {\n            this.setState({ errMessage: 'Please select user role'})\n        } else {\n            Auth.signUp({\n                username,\n                password,\n                attributes: {\n                    name,\n                    email\n                }\n            })\n                .then((data) => {\n                    // console.log(data)\n                    // switch to code input page\n                    // initialize user in database and recorde user id \n                    // for use later to switch to homepage upon successful code input\n                    console.log(this.state.user_type)\n\n                    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/user/' + username, {\n                        method: 'POST',\n                        headers: {\n                            Accept: 'application/json',\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            name,\n                            email,\n                            role: user_type\n                        })\n                    })\n                        .then((response) => response.json())\n                        .then((responseJson) => {\n                            console.log(responseJson)\n                            // this.props.navigation.navigate('ConfirmSignUpPage', {role: this.state.user_type})\n                            this.props.changeAuthState('ConfirmSignUpPage')\n                        })\n                        .catch((err) => {\n                            console.error(err)\n                        })\n                })\n                .catch((err) => {\n                    this.setState({ errMessage: err.message })\n                })            \n        }\n    }\n\n    setUserRole (role) {\n        this.setState({ user_type: role })\n    }\n\n    render () {\n        return (\n            <KeyboardAvoidingView style={styles.container} behavior=\"padding\" enabled>\n                <View style={{ width: '45%', marginBottom:20, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('teacher')}}>\n                        <Icon\n                            name='food-apple'\n                            size={80}\n                            color='#C93D1B'>\n                        </Icon>\n                        {/* <Text>Teacher</Text> */}\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ width: 80, height: 85 }}\n                        onPress={() => {this.setUserRole('parent')}}>\n                        <Icon\n                            name='baby-buggy'\n                            size={80}\n                            color='#f8c43a'>\n                        </Icon>\n                        {/* <Text>Parent</Text> */}\n                    </TouchableHighlight>\n                </View>\n                <Text>{this.state.user_type} Sign Up</Text>\n                {this.state.errMessage === '' ?\n                    null \n                : <Text style={{ color: 'red' }}>\n                    {this.state.errMessage}\n                </Text>}\n\n                <TextInput\n                    placeholder=\"username\"\n                    style={styles.textInput}\n                    onChangeText={(username) => this.setState({ username })}\n                    value={this.state.username}\n                />\n                <TextInput\n                    secureTextEntry\n                    placeholder=\"password\"\n                    style={styles.textInput}\n                    onChangeText={(password) => this.setState({ password })}\n                    value={this.state.password}\n                />\n                <TextInput\n                    placeholder=\"Name\"\n                    style={styles.textInput}\n                    onChangeText={(name) => this.setState({ name })}\n                    value={this.state.name}\n                />\n                <TextInput\n                    placeholder=\"Email\"\n                    style={styles.textInput}\n                    onChangeText={(email) => this.setState({ email })}\n                    value={this.state.email}\n                />\n                \n                <View style={{ width: '90%', margin: 10, flexDirection: 'row', justifyContent: 'space-around' }}>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={this.handleSignup.bind(this)}>\n                        <Text>Sign up</Text>\n                    </TouchableHighlight>\n                    <TouchableHighlight style={{ backgroundColor: '#35D0BA' }} onPress={() => this.props.changeAuthState('signedout')}>\n                        <Text> Already have an account? Sign in here</Text>\n                    </TouchableHighlight>\n                </View>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center'\n    },\n    textInput: {\n        height: 40,\n        width: '90%',\n        borderColor: 'gray',\n        borderWidth: 1,\n        marginTop: 8\n    }\n})\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n//         ...bindActionCreators({ addCurrentUser, addUserType }, dispatch)\n//     }\n// }\n\n// function mapStateToProps(state) {\n//     return({\n//         user: state.user\n//     })\n// }\n\n// export default connect(mapStateToProps, mapDispatchToProps) (Signup)\nexport default Signup","import { combineReducers } from 'redux'\nimport parent from './parent'\nimport attendance from './attendance'\nimport inbox from './inbox'\n\nexport default combineReducers({\n    parent,\n    attendance,\n    inbox\n})","export default function parent(state = {\n    // first_name: '',\n    // last_name: '',\n    // id: '',\n    isConnected: true,\n    child_of_id: {\n        /*\n        {child_A_id}: {\n            first_name: \"\",\n            last_name: \"\",\n            class_id: SOME_ID,\n            profile_pic: \"\",\n            // teacher_ids: []\n        },\n        {child_B_id}: {\n            first_name: \"\",\n            last_name: \"\",\n            class_id: SOME_ID,\n            profile_pic: \"\"\n        }\n        */\n    },\n    med_requests: []\n    // teachers: {\n\n    // }\n}, action) {\n    switch (action.type) {\n        case 'SET_CONNECT_STATE': {\n            const { isConnected } = action\n            return {\n                ...state,\n                isConnected\n            }\n        }\n        case 'INITIALIZE_CHILDREN':\n            const { data } = action\n            data.forEach((child) => {\n                const { id, name, class_id, profile_picture, school_id } = child\n                state.child_of_id[id] = {\n                    name,\n                    class_id,\n                    profile_picture,\n                    school_id\n                }\n            })\n            return {\n                ...state\n            }\n\n        case 'MARK_PRESENT':\n            const { student_id } = action\n            state.child_of_id[student_id].present = true\n            return {\n                ...state\n            }\n\n        case 'GET_MED_REQUEST_SUCCESS': \n            const { med_requests } = action\n            return {\n                ...state,\n                med_requests\n            }\n    \n        case 'CLEAR_STATE': {\n            return {\n                isConnected: true,\n                child_of_id: {},\n                med_requests: []\n            }\n        }\n\n        default:\n            return state\n    }\n}","export default function attendance(state = {\n    days: {\n        1: [ // index representing day of week\n            // ex. id_4, ...\n        ],\n        2: [],\n        3: [],\n        4: [],\n        5: []\n    },\n    attendance: {\n        /*\n        {id_4}: {\n            student_id\n            in_time: '',\n            out_time: '',\n            excuse_type: ''\n        }, {...}\n        */\n    }\n}, action) {\n    switch (action.type) {\n        case 'INITIALIZE_ATTENDANCE':\n        // initialize attendance status every morning to get any absence excuse(s) of the day\n            return {\n                ...state,\n                days: {\n                    ...state.days,\n                    [action.day]: [...state.days[action.day], action.attendance_id]\n                },\n                attendance: {\n                    ...state.attendance,\n                    [action.attendance_id]: action.attendance_obj\n                }\n            }\n        default:\n            return state\n    }\n}","export default function inbox(state = {\n  current_conversation_id: '',\n  conversations_by_id: {\n    // { conversation_id }: {\n    //   most_recently_read_message_id: 'MESSAGE_ID'\n    //   messages: [\n    //     {\n    //       message_id,\n    //       message_text,\n    //       created_at,\n    //       read_at,\n    //       sender_id\n    //     }, {...}\n    //   ]\n    // }\n  }\n}, action) {\n  switch (action.type) {\n    // case 'SET_READ_RECEIPT':\n    //   const {most_recently_read_message_id} = action\n    //   return {\n    //     ...state,\n    //     most_recently_read_message_id\n    //   }\n    case 'SET_MESSAGE_DATA':\n      const newState = { ...state }\n      const { messages, most_recently_read_message_id, conversation_id } = action\n      newState.conversations_by_id[conversation_id] = {\n        messages, \n        most_recently_read_message_id\n      }\n      newState.current_conversation_id = conversation_id\n      return newState\n\n    case 'SET_CURRENT_CONVERSATION_ID':\n      return {\n        ...state,\n        current_conversation_id: action.conversation_id\n      }\n\n    case 'CLEAR_CURRENT_CONVERSATION_ID':\n      return {\n        ...state,\n        current_conversation_id: ''\n      }\n\n    default:\n      return state\n  }\n}","\nexport const initializeChildren = (data) => {\n    return {\n        type: 'INITIALIZE_CHILDREN',\n        data\n    }\n}\n\nexport const setReadReceipt = (most_recently_read_message_id) => {\n    return {\n        type: 'SET_READ_RECEIPT',\n        most_recently_read_message_id\n\n    }\n}\n\nexport const setMessageDataParent = (messages, most_recently_read_message_id, conversation_id) => {\n    return {\n        type: 'SET_MESSAGE_DATA',\n        messages,\n        most_recently_read_message_id,\n        conversation_id\n    }\n}\n\nexport const clearCurrentConversationIdParent = () => {\n    return {\n        type: 'CLEAR_CURRENT_CONVERSATION_ID'\n    }\n}\n\nexport const clearState = () => {\n    return {\n        type: 'CLEAR_STATE'\n    }\n}\n\nexport const getMedRequestSuccess = (med_requests) => {\n    return {\n        type: 'GET_MED_REQUEST_SUCCESS',\n        med_requests\n    }\n}\n\nexport const markPresent = (student_id) => {\n    return {\n        type: 'MARK_PRESENT',\n        student_id\n    }\n}\n\nexport const setConnectState = (isConnected) => {\n    return {\n        type: 'SET_CONNECT_STATE',\n        isConnected\n    }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData } from '../util'\nimport Reloading from '../reloading'\n\nexport default class WellnessCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date());\n    }\n  }\n\n  async fetchData(child_id, date) {\n    // const date = new Date(datetime.getTime())\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const wellnessData = await fetchData('wellness', child_id, start_date, end_date)\n    this.setState({\n      wellnessData,\n      isLoading: false\n    }) \n    if (wellnessData && wellnessData[start_date]) {\n      this.props.updateTitleTemp(wellnessData[start_date][0][1])\n    } else {\n      this.props.updateTitleTemp('')\n    }\n  }\n\n  render() {\n    const { wellnessData, isLoading} = this.state\n    const date = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-wellness.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>健康</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : wellnessData && wellnessData[date] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row' }}\n                  >\n                    <View style={{ flex: 1, justifyContent: 'center', paddingBottom: 5 }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1, justifyContent: 'center'  }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>體溫</Text>\n                    </View>\n                    <View style={{ flex: 2, justifyContent: 'center'  }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>今日狀況</Text>\n                    </View>\n                  </View>\n                  {wellnessData[date].map((record, index) => {\n                    return (\n                      <View\n                        key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[0]}</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center'  }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[1]}°</Text>\n                        </View>\n                        <View style={{ flex: 2, justifyContent: 'center'  }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{record[2]}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, TextInput, Image } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { formatDate, fetchData, beautifyDate } from '../util'\nimport Reloading from '../reloading'\n\nexport default class AppetiteCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      // rankings: ['Ok', 'Good', 'Awesome!'],\n      fruit_name: null,\n      isLoading: true,\n      breakfast: null,\n      fruit: null,\n      lunch: null,\n      snack: null,\n      // rating: {\n      //   'Awesome': '滿滿一碗',\n      //   'Good': '７/8分滿',\n      //   'Ok': '半碗',\n      //   'Poor': '胃口不佳'\n      // }\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const appetiteData = await fetchData('appetite', child_id, start_date, end_date)\n    this.denormalizeAppetiteData(appetiteData.data, date)\n  }\n\n  denormalizeAppetiteData(appetiteData) {\n    const { date } = this.props\n    const today = formatDate(date)\n    if (appetiteData && appetiteData[today]){\n      const { fruit_name, breakfast_rating, fruit_rating, lunch_rating, snack_rating } = appetiteData[today]\n      // console.log('fruit_name: ', fruit_name)\n      const breakfast = this.parseData(breakfast_rating)\n      const fruit = this.parseData(fruit_rating)\n      const lunch = this.parseData(lunch_rating)\n      const snack = this.parseData(snack_rating)\n\n      this.setState({\n        fruit_name,\n        breakfast,\n        fruit,\n        lunch,\n        snack,\n        appetiteData,\n        isLoading: false\n      })\n    } else {\n      this.setState({\n      appetiteData,\n      isLoading: false\n    })\n    }\n  }\n\n  parseData(data_string) {\n    const rating = data_string.slice(0, -1)\n    const water_drunk = parseInt(data_string.slice(-1))\n    // const rating_icons = {\n    //   'Awesome': require('../../assets/icon-appetite-awesome.png'),\n    //   'Good': require('../../assets/icon-appetite-good.png'),\n    //   'Ok': require('../../assets/icon-appetite-ok.png')\n    // }\n    return {\n      // rating_icon: rating_icons[rating],\n      rating,\n      water_drunk\n    }\n  }\n\n  getEmoji() {\n\n  }\n\n  getWaterDrinkingStatus() {\n    \n  }\n\n  render() {\n    const { appetiteData, isLoading, breakfast, fruit, lunch, snack, rating, fruit_name } = this.state\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-appetite.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>飲食</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : appetiteData && appetiteData[today] ? \n                <View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {breakfast ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>早餐</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{breakfast.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {breakfast.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                  {fruit ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>{(fruit_name !== '水果' && `水果餐: ${fruit_name}`) || '水果'}</Text>\n                      </View>\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{fruit.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {fruit.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n                  </View>\n                  <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  {lunch ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>午餐</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{lunch.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {lunch.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n\n                    </View>\n                    : null\n                  }\n\n                  {snack ?\n                    <View style={{ width: '45%', justifyContent: 'center', backgroundColor: '#F5F5F5', marginRight: '5%' }}>\n                      <View style={{ padding: 5 }}>\n                        <Text style={{ fontSize: 17, color: 'rgba(0,0,0,0.8)'}}>點心</Text>\n                      </View>\n\n                      <View\n                        style={{\n                          justifyContent: 'center',\n                          alignItems: 'center',\n                          padding: 8\n                        }}\n                      >\n                        <Text style={{ fontSize: 20 }}>{snack.rating || ' '}</Text>\n                      </View>\n\n                      <View style={{ padding: 5, justifyContent: 'center' }}>\n                        <Text style={{ fontSize: 17, textAlign: 'center' }}>\n                          {snack.water_drunk ?\n                            '有喝水' : ' '\n                          }\n                        </Text>\n                      </View>\n                    </View>\n                    : null\n                  }\n\n                </View>\n                </View>\n            : <View style={{ flex: 1, paddingVertical: 8 }}>\n                <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n              </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData, formatTime } from '../util';\nimport Reloading from '../reloading';\n\nexport default class MilkCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const milkIntakeData = await fetchData('milkintake', child_id, start_date, end_date)\n    this.setState({\n      milkIntakeData,\n      isLoading: false\n    })\n  }\n\n  render() {\n    const { milkIntakeData, isLoading } = this.state\n    // console.log('milkIntakeData: ', milkIntakeData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-milk.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>喝奶</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n            : milkIntakeData && milkIntakeData[today] ?\n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row', paddingBottom: 5 }}\n                  >\n                    <View style={{ width: '25%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ width: '28%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>量</Text>\n                    </View>\n                    <View style={{ width: '28%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>乳品</Text>\n                    </View>\n                    <View style={{ width: '19%', justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>老師</Text>\n                    </View>\n                  </View>\n                  {milkIntakeData[today].map((record, index) => {\n                    const { time, amount, milk_type, teacher_name } = record\n                    return (\n                      <View key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ width: '25%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ width: '28%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{amount} c.c.</Text>\n                        </View>\n                        <View style={{ width: '28%' }}>\n                          <Text style={{ fontSize: 20, textAlign: 'center', color: '#404040' }}>{milk_type}</Text>\n                        </View>\n                        <View style={{ width: '19%' }}>\n                          <Text style={{fontSize: 20, textAlign: 'center', color: '#404040' }}>{teacher_name !== null && teacher_name.slice(1)}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n              : <View style={{ flex: 1, paddingVertical: 8  }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading'\n\nexport default class SleepCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const sleepData = await fetchData('sleep', child_id, start_date, end_date)\n    this.setState({\n      sleepData,\n      isLoading: false\n    })\n  }\n\n  render() {\n    const { sleepData, isLoading } = this.state\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-sleep.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>睡眠</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : sleepData && sleepData[today] ?\n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View\n                    style={{ flexDirection: 'row', paddingBottom: 5 }}\n                  >\n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>從</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                    </View>\n                    <View style={{ flex: 1, justifyContent: 'center' }}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>到</Text>\n                    </View>\n                  </View>\n                  {sleepData[today].map((record, index) => {\n                    const { sleep_time, wake_time, hours, minutes } = record\n                    return (\n                      <View\n                        key={index}\n                        style={{ flexDirection: 'row' }}\n                      >\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{sleep_time}</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center'}}>\n                          <Text style={{ fontSize: 15, textAlign: 'center', color: '#404040' }}>{hours}H {minutes}M</Text>\n                        </View>\n                        <View style={{ flex: 1, justifyContent: 'center' }}>\n                          <Text style={{ fontSize: 25, textAlign: 'center', color: '#404040' }}>{wake_time}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image } from 'react-native'\nimport { Card, CardItem } from 'native-base'\nimport { formatDate, fetchData } from '../util';\nimport Reloading from '../reloading';\n\nexport default class RestroomCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    }\n  }\n\n  async fetchData(child_id, date) {\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const diaperData = await fetchData('diaper', child_id, start_date, end_date)\n    this.setState({\n      isLoading: false,\n      diaperData\n    })\n  }\n\n  render() {\n    const { isLoading, diaperData } = this.state\n    // console.log('diaperData: ', diaperData)\n    const today = formatDate(this.props.date)\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-diaper.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>如廁</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : diaperData && diaperData[today] ? \n                <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <View style={{ flexDirection: 'row', paddingBottom: 5 }}>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>時間</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>排泄</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>使用</Text>\n                    </View>\n                    <View style={{ flex: 1}}>\n                      <Text style={{ fontSize: 15, textAlign: 'center', color: '#606060' }}>狀況</Text>\n                    </View>\n                  </View>\n                  {diaperData[today].map((record, index) => {\n                    const { time, cloth_diaper, pee_or_poo, condition, teacher_id } = record\n                    return (\n                      <View key={index} style={{ flexDirection: 'row' }}>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{time}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{pee_or_poo}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{cloth_diaper ? '學習褲' : '尿布'}</Text>\n                        </View>\n                        <View style={{ flex: 1}}>\n                          <Text style={{ fontSize: 23, textAlign: 'center', color: '#404040' }}>{condition}</Text>\n                        </View>\n                      </View>\n                    )\n                  })}\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                  <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image, TextInput, TouchableOpacity, Alert } from 'react-native'\nimport { Card, Body } from 'native-base'\nimport { formatDate, fetchData, post, beautifyTime, formatTime, get } from '../util'\nimport Reloading from '../reloading'\n\nexport default class MessageCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      child_id: this.props.child_id,\n      isLoading: true,\n      data_available: false,\n      items_to_bring: [],\n      activities: [],\n      text: '',\n      teacher_id: '',\n      message_id: null,\n      message_for_teacher: '',\n      isConnected: true,\n      scrollHeight: '100%',\n      message_read: false\n    }\n    this.fetchData = this.fetchData.bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n    // this.fetchDiaperAmount(child_id)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      this.setState({ isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true, message_for_teacher: '', scrollHeight: '100%' })\n      this.fetchData(this.props.child_id, new Date());\n    } else if (this.props.isConnected != prevProps.isConnected) {\n      this.setState({\n        isConnected: this.props.isConnected\n      })\n    }\n  }\n\n  setScrollHeight(scrollHeight) {\n    this.setState({ scrollHeight })\n  }\n\n  async fetchData(child_id, propDate) {\n    let date = new Date(propDate.getTime())\n    if (date.getHours() < 17) {\n      this.setState({\n        isLoading: false,\n        message_for_teacher: '',\n        data_available: false\n      })\n      return\n    }\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchData('message', child_id, start_date, end_date)\n    if (messageData.data === undefined || messageData.data[start_date] === undefined) {\n      this.setState({\n        isLoading: false,\n        message_for_teacher: '',\n        data_available: false\n      })\n      return\n    }\n    this.denormalize(messageData.data[start_date])\n  }\n\n  denormalize(message_data) {\n    const items_list = ['母奶粉', '尿布', '水壺', '衣物']\n    const activities_list = ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言']\n    const items_to_bring = []\n    const activities = []\n    for (var i = 0; i < message_data.items_to_bring.length-1; i++) {\n      if (message_data.items_to_bring[i]) {\n        items_to_bring.push(items_list[i])\n      }\n    }\n\n    if (message_data.items_to_bring[message_data.items_to_bring.length-1]) {\n      items_to_bring.push(message_data.other_item)\n    }\n\n    for (var i = 0; i < message_data.activities.length - 1; i++) {\n      if (message_data.activities[i]) {\n        activities.push(activities_list[i])\n      }\n    }\n\n    if (message_data.activities[message_data.activities.length - 1]) {\n      activities.push(message_data.other_activity)\n    }\n\n    this.setState({\n      isLoading: false,\n      data_available: true,\n      message_id: message_data.message_id,\n      items_to_bring,\n      activities,\n      text: message_data.text,\n      teacher_id: message_data.teacher_id,\n      message_for_teacher: message_data.message_for_teacher,\n      message_read: message_data.message_read\n    })\n  }\n\n  async sendMessage() {\n    const { class_id, parent_id, date } = this.props\n    const { message_for_teacher, message_id, isConnected } = this.state\n    if (!this.editable() || message_for_teacher === '') return\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n\n    // const now = new Date()\n    const body = {\n      student_id: this.props.child_id,\n      parent_id,\n      message_id,\n      message_for_teacher,\n      timestamp: formatDate(date) + ' ' + formatTime(date)\n    }\n    const response = await post(`/message/class/${class_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry 傳送訊息時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    alert(`訊息傳達成功！`)\n    // const { date } = this.props\n    this.fetchData(this.state.child_id, new Date(date.getTime()))\n  }\n\n  editable() {\n    const { date } = this.props\n    // console.log('date: ', date)\n    let threshold = new Date()\n    if (threshold.getDay() === 6) { // if today is saturday\n      threshold.setDate(threshold.getDate() - 1)\n    } else if (threshold.getDay() === 0) { // if today is sunday\n      threshold.setDate(threshold.getDate() - 2)\n    }\n    threshold.setHours(17, 0, 0, 0)\n    return date.getTime() >= threshold.getTime() || this.before4am()\n  }\n\n  before4am() {\n    const { date } = this.props\n    let today = new Date()\n    let prev_day = new Date() \n    if (today.getDay() === 1) { // if today is monday, prev_day is last friday\n      prev_day.setDate(prev_day.getDate() - 3)\n      return date.toDateString() === prev_day.toDateString() && today.getHours() < 4\n    } else if (today.getDay() > 1 && today.getDay() < 6) { // today is [ tues, fri ]\n      prev_day.setDate(prev_day.getDate() - 1)\n      return date.toDateString() === prev_day.toDateString() && today.getHours() < 4\n    }\n    return false\n  }\n\n  showMessageForTeacher(){\n    const { date } = this.props\n    let today = new Date()\n    today.setHours(0,0,0,1)\n\n    if (date.toDateString() === today.toDateString() && this.editable()) {\n      return true\n    } else if (date < today) {\n      return true\n    }\n    return false\n  }\n\n  render() {\n    const { items_to_bring, activities, text, teacher_id, isLoading, data_available, message_for_teacher, scrollHeight, message_read } = this.state\n    const { date } = this.props\n    // console.log(date.toDateString())\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, alignItems: 'center', justifyContent: 'center'}}>\n            <Image\n              source={require('../../assets/icon-message.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>訊息</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : data_available ? \n                <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                  <View style={{ padding: 5, marginBottom: 6, backgroundColor: '#F5F5F5' }}>\n                    <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>愛的小語</Text>\n                    <Text style={{ fontSize: 25, paddingVertical: 7 }}>{text}</Text>\n                  </View>\n                  <View\n                    style={{ flexDirection: 'row' }}\n                  >\n                    <View style={{ flex: 1, padding: 5, backgroundColor: '#F5F5F5', marginRight: 3 }}>\n                      <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>家長準備</Text>\n                      {items_to_bring.length ?\n                        <View style={{ alignItems: 'center', paddingVertical: 7}}>\n                          {items_to_bring.map((item, index) => {\n                            return(\n                              <Text \n                                key={index} \n                                style={{ \n                                  padding: 5, \n                                  backgroundColor: 'lightgrey', \n                                  marginBottom: 3,\n                                  fontSize: 25\n                                }}\n                              >\n                                {item}\n                              </Text>\n                            )\n                          })}\n                        </View>\n                        : null\n                      }\n                    </View>\n                    <View style={{ flex: 1, padding: 5, backgroundColor: '#F5F5F5', marginLeft: 3 }}>\n                      <Text style={{color: 'rgba(0,0,0,0.8)', fontSize: 15}}>今日活動</Text>\n                      {activities.length ?\n                        <View style={{ alignItems: 'center', paddingVertical: 7}}>\n                          {activities.map((activity, index) => {\n                            return(\n                              <Text \n                                key={index}\n                                style={{ \n                                  padding: 5, \n                                  backgroundColor: 'lightgrey', \n                                  marginBottom: 3,\n                                  fontSize: 25\n                                }}\n                              >\n                                {activity}\n                              </Text>\n                            )\n                          })}\n                        </View>\n                        : null\n                      }\n                    </View>\n                  </View>\n\n                  {/* message for teacher */}\n                  <View style={{ backgroundColor: '#ffddb7', marginTop: 5}}>\n                    <View style={{ padding: 5, flexDirection: 'row', justifyContent: 'space-between' }}>\n                      <Text style={{ fontSize: 15 }}>給老師的話</Text>\n                      {message_for_teacher !== '' && <Text style={{ fontSize: 15 }}>{message_read ? '已讀' : '未讀'}</Text>}\n                    </View>\n                    \n                    <TextInput\n                      editable={this.editable()}\n                      style={{\n                        // marginHorizontal: 15,\n                        height: scrollHeight,\n                        justifyContent: 'center',\n                        backgroundColor: 'rgba(255,255,255,0.7)',\n                        paddingTop: 10,\n                        padding: 10,\n                        fontSize: 25\n                      }}\n                      // textAlignVertical={\"top\"}\n                      placeholder={this.editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'}\n                      scrollEnabled={false}\n                      multiline={true}\n                      // blurOnSubmit={true}\n                      // maxLength={200}\n                      value={message_for_teacher}\n                      onChangeText={(message_for_teacher) => this.setState({ message_for_teacher })}\n                      onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                      onLayout={(event) => {\n                        const { scrollHeight } = event.nativeEvent.target\n                        this.setState({\n                            scrollHeight\n                        })\n                      }}\n                    />\n                    <TouchableOpacity\n                      disabled={!this.editable()}\n                      style={{ padding: 10, justifyContent: 'center' }}\n                      onClick={() => this.sendMessage()}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>送出</Text>\n                    </TouchableOpacity>\n                  </View>\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                  {/* message for teacher */}\n                  {this.showMessageForTeacher() && \n                  <View style={{ backgroundColor: '#ffddb7', marginTop: 5}}>\n                    <View style={{ padding: 5, flexDirection: 'row', justifyContent: 'space-between' }}>\n                      <Text style={{ fontSize: 15 }}>給老師的話</Text>\n                      {message_for_teacher !== '' && <Text style={{ fontSize: 15 }}>{message_read ? '已讀' : '未讀'}</Text>}\n                    </View>\n                    \n                    <TextInput\n                      editable={this.editable()}\n                      style={{\n                        // marginHorizontal: 15,\n                        height: scrollHeight,\n                        justifyContent: 'center',\n                        backgroundColor: 'rgba(255,255,255,0.7)',\n                        paddingTop: 10,\n                        padding: 10,\n                        fontSize: 25\n                      }}\n                      // textAlignVertical={\"top\"}\n                      placeholder={this.editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'}\n                      scrollEnabled={false}\n                      multiline={true}\n                      // blurOnSubmit={true}\n                      // maxLength={200}\n                      value={message_for_teacher}\n                      onChangeText={(message_for_teacher) => this.setState({ message_for_teacher })}\n                      onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                    />\n                    <TouchableOpacity\n                      disabled={!this.editable()}\n                      style={{ padding: 10, justifyContent: 'center' }}\n                      onClick={() => this.sendMessage()}\n                    >\n                      <Text style={{ fontSize: 25, alignSelf: 'center' }}>送出</Text>\n                    </TouchableOpacity>\n                  </View>\n                  }\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, TouchableOpacity, Image, Text} from 'react-native'\nimport { Card } from 'native-base'\n\nexport default class ParentHomeTitle extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      temperature: '',\n      borderRadius: 0\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.temperature !== prevProps.temperature) {\n      this.setState({ temperature: this.props.temperature })\n    }\n  }\n\n  render() {\n    const { temperature, borderRadius } = this.state\n    const { student, student_name } = this.props\n    return (\n      <View style={{ width: '97%', marginLeft: '3%', alignSelf: 'flex-start', flexDirection: 'row'}}>\n        <Card style={{ flexDirection: 'row', width: '85%', alignItems: 'center', paddingVertical: 15 }}>\n          <View \n            style={{\n              flex: 1,\n              width: '50%',\n              alignItems: 'center'\n            }}\n            onLayout={(event) => {\n              var {width} = event.nativeEvent.layout\n              this.setState({ borderRadius: width/2})\n            }}\n          >\n            <Image\n                source={\n                    student.profile_picture === '' ?\n                        require('../../assets/icon-thumbnail.png')\n                        : { uri: student.profile_picture }\n                    }\n                style={\n                  student.profile_picture === '' ?\n                    { width: 130, height: 130 }\n                    : { width: 130, height: 130, borderRadius: 65 }\n                }\n            />\n          </View>\n          <View style={{ height: '90%', width: '50%', paddingLeft: 10 }}>\n            <View style={{ flex: 1}}>\n              <View style={{ height: '50%', alignItems: 'flex-start', justifyContent: 'flex-end' }}>\n                  <Text style={{ fontSize: 40 }}>{student_name}</Text>\n              </View>\n              <View style={{ flex: 1, flexDirection: 'row', paddingTop: 5 }}>\n                <View style={{ flex: 1, height: '100%', backgroundColor: '#F5F5F5', justifyContent: 'center' }}>\n                  <Text style={{ padding: 5 }}>早上體溫</Text>\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    {temperature === '' ? '未量' : `${temperature}°`}\n                  </Text>\n                </View>\n                <TouchableOpacity\n                  style={{ backgroundColor: '#F5F5F5', alignItems: 'center', justifyContent: 'center' }}\n                  onClick={() => this.props.viewQRCode()}\n                >\n                  <Image\n                    source={require('../../assets/icon-qr.png')}\n                    style={{\n                        width: 65,\n                        height: 65,\n                    }}\n                  />\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Card>\n        <Card style={{ width: '20%'}}>\n          <TouchableOpacity\n            style={{ flex: 1, justifyContent: 'center', paddingLeft: 5 }}\n            underlayColor='#F5F5F5'\n            onClick={() => this.props.selectOtherChildProfile()}\n          >\n            <Image\n              source={require('../../assets/icon-babies.png')}\n              style={{\n                width: 43,\n                height: 43,\n                opacity: 0.6\n              }}\n            />\n          </TouchableOpacity>\n        </Card>\n      </View>\n    )\n  }\n}\n","import React from 'react'\nimport { Animated, Dimensions, Image, TouchableHighlight } from 'react-native'\n\nexport default class ProfileSelector extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showSelector: false,\n      SlideInRight: new Animated.Value(0)\n    }\n  }\n\n  slideIn() {\n    this.setState({\n      showSelector: true\n    } , () => {\n      Animated.timing(\n        this.state.SlideInRight,\n        {\n            toValue: 1,\n            duration: 200,\n            useNativeDriver: true\n        }\n      ).start()\n    })\n  }\n\n  onSelectStudent(student_id) {\n    this.props.onSelectStudent(student_id)\n    Animated.timing(\n      this.state.SlideInRight,\n      {\n          toValue: 0,\n          duration: 500,\n          useNativeDriver: true\n      }\n    ).start()\n    this.setState({\n      showSelector: false\n    })\n  }\n\n  render() {\n    const windowWidth = Dimensions.get('window').width\n    const { showSelector, SlideInRight } = this.state\n    const { student_of_id } = this.props\n    if (!showSelector) {\n      return null\n    }\n    return (\n      <Animated.View\n        style={{\n          zIndex: 2,\n          width: '100%',\n          height: '100%',\n          position: 'absolute',\n          backgroundColor: 'rgba(0,0,0,0.7)',\n          transform: [\n            {\n                translateX: SlideInRight.interpolate({\n                    inputRange: [0,1],\n                    outputRange: [windowWidth, 0]\n                })\n            }\n          ],\n          alignItems: 'center',\n          // justifyContent: 'space-evenly'\n        }}\n      >\n        {Object.keys(student_of_id).map((student_id) => {\n          return (\n            <TouchableHighlight \n              key={student_id}\n              style={{ marginTop: windowWidth/4 }}\n              onPress={() => this.onSelectStudent(student_id)}\n              underlayColor='transparent'\n            >\n              <Image\n                    source={\n                      student_of_id[student_id].profile_picture === '' ?\n                        require('../../assets/icon-thumbnail.png')\n                        : { uri: student_of_id[student_id].profile_picture }\n                      }\n                    style={{\n                        width: 160,\n                        height: 160,\n                        borderRadius: 80,\n                        backgroundColor: 'rgba(255,255,255,0.6)'\n                    }}\n                />\n            </TouchableHighlight>\n          )\n        })}\n      </Animated.View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, Alert, Dimensions } from 'react-native'\nimport QRCode from 'react-native-qrcode-svg'\nimport Reloading from '../reloading'\nimport { get } from '../util'\nimport { connect } from 'react-redux'\n\nconst { width, height } = Dimensions.get('window')\n\nclass QRPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            isLoading: true,\n            data: ''\n        }\n    }\n\n    async componentDidMount() {\n        const { parent_id, isConnected } = this.props\n        const response = await get(`/user/${parent_id}/qrcode`)\n        const { success, statusCode, message, data } = response\n\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n\n        if (!success) {\n            alert(`Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n            return \n        }\n\n        this.setState({\n            isLoading: false,\n            data\n        })\n    }\n    \n    render() {\n        return (\n            <View\n                style={{\n                    height,\n                    zIndex: 2,\n                    width: '100%',\n                    // height: '100%',\n                    position: 'absolute',\n                    backgroundColor: 'white',\n                    justifyContent: 'space-evenly',\n                    alignItems: 'center'\n                }}\n            >\n                <View style={{ flex: 1 }}>\n                    <View style={{ flex: 3, justifyContent: 'center', alignItems: 'center' }}>\n                        {this.state.isLoading ? \n                            <Reloading />\n                            :  <QRCode\n                                value={this.state.data}\n                                size={300}\n                                />\n                        }\n                    </View>\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <TouchableHighlight\n                            style={{ padding: 15, backgroundColor: '#b5e9e9' }}\n                            onPress={() => this.props.hideQRCode()}\n                        >\n                            <Text style={{ fontSize: 30 }}>返回</Text>\n                        </TouchableHighlight>\n                    </View>\n                </View>\n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (QRPage)","import React from 'react'\nimport { View, Text, TextInput, Image, TouchableOpacity, ScrollView, Alert } from 'react-native'\nimport { Card, CardItem, Button } from 'native-base'\nimport { formatDate, fetchData, beautifyTime } from '../util'\nimport Reloading from '../reloading'\nimport { connect } from 'react-redux'\nimport { bindActionCreators} from 'redux'\nimport { getMedRequestSuccess } from '../../redux/parent/actions/index'\nimport ENV from '../../variables'\n\nclass MedicationRequestCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true,\n      med_requests: [],\n      // date: new Date()\n    }\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      // const { date } = this.props\n      // console.log('this.props.date !== prevProps.date: ', this.props.date.toDateString())\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      // console.log('this.props.child_id !== prevProps.child_id')\n      this.setState({ isLoading: true })\n      this.fetchData(this.props.child_id, new Date());\n    }\n  }\n\n  afterFive() {\n    const { date } = this.props\n    return date.getHours() >= 17\n  }\n\n  async fetchData(student_id, date) {\n    const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/student/${student_id}?date=${formatDate(date)}`\n    await fetch(query, {\n        method: 'GET',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        }\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n          const {data} = resJson\n          const med_requests = this.get_todays_requests(data, date)\n          this.setState({\n            med_requests\n          })\n          this.setState({ isLoading: false })\n      })\n      .catch(err => {\n          alert('Sorry 取得今日托藥單時電腦出狀況了！請與工程師聯繫: error occurred when fetching medication request')\n      })\n  }\n\n  get_todays_requests(object_array, date) {\n    // const { date } = this.props\n    let med_requests = []\n    for (var i = 0; i < object_array.length; i++) {\n      const timestamp = new Date(object_array[i].title)\n      // console.log('timestamp: ', timestamp.toDateString())\n      // console.log('date: ', date.toDateString())\n      if (timestamp.toDateString() === (date).toDateString()) {\n        med_requests = object_array[i].data\n        for(var j = 0; j < med_requests.length; j++) {\n          med_requests[j].timestamp = new Date(med_requests[j].timestamp)\n        }\n        break\n      }\n    }\n    return med_requests\n  }\n\n  render() {\n    const { med_requests } = this.state\n    const { isLoading } = this.state\n    // console.log('med_requests: ', med_requests)\n    // console.log('med/this.props.date: ', this.props.date.toDateString())\n    return (\n      <Card style={{ width: '93%' }}>\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-medrequest.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8 }}>\n              <Text style={{ fontSize: 20 }}>今日藥單</Text>\n            </View>\n            {isLoading ? \n              <Reloading />\n              : med_requests.length ? \n                <View style={{ flex: 1, flexDirection: 'row', paddingVertical: 8 }}>\n                  <ScrollView horizontal contentContainerStyle={{ paddingBottom: 10}}>\n                  {med_requests.map((request, index) => {\n                    return (\n                      <TouchableOpacity \n                        key={request.id}\n                        style={{\n                          padding: 10,\n                          backgroundColor: '#F5F5F5', \n                          marginRight: 15, \n                          justifyContent: 'center'\n                        }}\n                        underlayColor='#ff8944'\n                        onClick={() => this.props.viewMedRequest(index, med_requests)}\n                      >\n                        <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                          {this.afterFive() && request.administered ? \n                            <Image\n                              source={require('../../assets/icon-checked.png')}\n                              style={{\n                                  width: 20,\n                                  height: 20\n                              }}\n                            />\n                            : null\n                          }\n                          <Text style={{ alignSelf: 'center', fontSize: 25, color: 'rgba(0,0,0,0.8)' }}>{beautifyTime(request.timestamp)}</Text>\n                        </View>\n                      </TouchableOpacity>\n                    )\n                  })}\n                  </ScrollView>\n                </View>\n                : <View style={{ flex: 1, paddingVertical: 8 }}>\n                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                </View>\n            }\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    med_requests: state.parent.med_requests\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    ...bindActionCreators({getMedRequestSuccess}, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }) (MedicationRequestCard)","import React from 'react'\nimport { View, Text, Image, TextInput, TouchableOpacity, Alert } from 'react-native'\nimport { Card, Body } from 'native-base'\nimport { formatDate, fetchData, post, beautifyTime, formatTime } from '../util'\nimport Reloading from '../reloading'\nimport TimeModal from './timemodal'\nimport { debounce } from 'lodash'\n\nexport default class MorningReminderCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n        isLoading: true,\n        // present: false,\n        morning_reminder_id: null,\n        text: '',\n        reminder_read: false,\n        isConnected: true,\n        scrollHeight: '100%',\n        milk_timestamp: new Date(),\n        diaper_timestamp: new Date(),\n        milk_amount: '',\n        diaper_type: '小便',\n        showDateTimeModal: false,\n        showDateTimeModalType: '',\n        includeMilkIntake: false,\n        includeDiaper: false\n    }\n    this.fetchData = this.fetchData.bind(this)\n    this.onSendMessageDelay = debounce(this.sendMessage, 1000).bind(this)\n  }\n\n  componentDidMount() {\n    const { date } = this.props\n    this.fetchData(this.props.child_id, new Date(date.getTime()))\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.date !== prevProps.date) {\n      // console.log('this.props.date !== prevProps.date')\n      this.setState({ isLoading: true, text: '', scrollHeight: '100%', includeMilkIntake: false, milk_timestamp: new Date(), milk_amount: '', \n        includeDiaper: false, diaper_timestamp: new Date(), diaper_type: '小便' })\n      this.fetchData(this.props.child_id, new Date(this.props.date.getTime()));\n    } else if (this.props.child_id !== prevProps.child_id) {\n      this.setState({ isLoading: true, text: '', scrollHeight: '100%', includeMilkIntake: false, milk_timestamp: new Date(), milk_amount: '', \n        includeDiaper: false, diaper_timestamp: new Date(), diaper_type: '小便' })\n      this.fetchData(this.props.child_id, new Date());\n    // } else if (this.props.present !== prevProps.present) {\n    //     this.setState({ present: this.props.present })\n    } else if (this.props.isConnected != prevProps.isConnected) {\n      this.setState({\n        isConnected: this.props.isConnected\n      })\n    }\n  }\n\n  setScrollHeight(scrollHeight) {\n    // console.log('scrollHeight: ', scrollHeight)\n    this.setState({ scrollHeight })\n  }\n\n  async fetchData(child_id, date) {\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchData('morningreminder', child_id, start_date, end_date)\n    // console.log('messageData: ', messageData)\n    if (messageData.data === undefined || messageData.data[start_date] === undefined) {\n      this.setState({\n        isLoading: false,\n        morning_reminder_id: null,\n        text: '',\n        reminder_read: false\n      })\n      return\n    }\n    this.setState({\n        isLoading: false,\n        morning_reminder_id: messageData.data[start_date].morning_reminder_id,\n        text: messageData.data[start_date].text,\n        reminder_read: messageData.data[start_date].reminder_read\n    })\n  }\n\n  async sendMessage() {\n    const { class_id, date, parent_id } = this.props\n    const { text, morning_reminder_id, isConnected, \n      includeMilkIntake, milk_timestamp, milk_amount, includeDiaper, diaper_timestamp, diaper_type } = this.state\n    if (!this.editable() || (text === '' && !includeMilkIntake && !includeDiaper)) return\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n\n    let reminder = text\n    if(includeDiaper) {\n      reminder = `如廁: ${beautifyTime(diaper_timestamp)} ${diaper_type}\\n` + reminder\n    }\n    if (includeMilkIntake) {\n      reminder = `餵奶: ${beautifyTime(milk_timestamp)} ${milk_amount} c.c.\\n` + reminder\n    }\n\n    const body = {\n        morning_reminder_id,\n        student_id: this.props.child_id,\n        parent_id,\n        timestamp: formatDate(date) + ' ' + formatTime(date),\n        text: reminder\n    }\n    const response = await post(`/morningreminder/class/${class_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert(`Sorry 傳送訊息時電腦出狀況了！請截圖和與工程師聯繫\\n\\n` + message)\n      return \n    }\n    alert(`訊息傳達成功！`)\n    this.setState({\n      includeMilkIntake: false,\n      milk_timestamp: new Date(),\n      milk_amount: '',\n      includeDiaper: false,\n      diaper_timestamp: new Date(),\n      diaper_type: '小便',\n      morning_reminder_id: ''\n    })\n\n    this.fetchData(this.props.child_id, new Date(this.props.date))\n  }\n\n  editable() {\n    const { date } = this.props\n    const threshold = new Date()\n    threshold.setHours(10, 0, 0)\n    return (date.toDateString() === (new Date).toDateString() && new Date() < threshold) || (date.toDateString() !== (new Date).toDateString() && date > (new Date()))\n    // return true\n  }\n\n  selectDatetimeConfirm(datetime) {\n    const { showDateTimeModalType } = this.state\n    if ( showDateTimeModalType === 'milkintake') {\n      this.setState({\n        milk_timestamp: datetime,\n        // showDateTimeModal: false\n      })\n    } else if (showDateTimeModalType === 'diaper') {\n      this.setState({\n        diaper_timestamp: datetime,\n        // showDateTimeModal: false\n      })\n    }\n  }\n\n  render() {\n    const { isLoading, text, scrollHeight, morning_reminder_id, reminder_read, \n      milk_timestamp, milk_amount, diaper_timestamp, diaper_type, showDateTimeModal, includeMilkIntake, includeDiaper } = this.state\n    // console.log('this.state: ', this.state)\n    return (\n      <Card style={{ width: '93%' }}>\n        {/* {showDateTimeModal &&\n          <TimeModal\n            start_date={new Date()}\n            datetime_type={'time'}\n            hideModal={() => this.setState({ showDateTimeModal: false })}\n            selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n            minDatetime={null}\n            maxDatetime={null}\n            minTime={null}\n            maxTime={null}\n          />\n        } */}\n        <View style={{ flex: 1, flexDirection: 'row' }}>\n          <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n            <Image\n              source={require('../../assets/icon-morningreminder.png')}\n              style={{\n                  width: 48,\n                  height: 48\n              }}\n            />\n          </View>\n          <View style={{ flex: 1 }}>\n            <View style={{ paddingTop: 8, flexDirection: 'row', justifyContent: 'space-between', paddingRight: 8 }}>\n              <Text style={{ fontSize: 20 }}>愛的叮嚀</Text>\n              {text !== '' && <Text style={{ fontSize: 20 }}>{reminder_read ? '已讀' : '未讀'}</Text>}\n            </View>\n            <View style={{ flex: 1, paddingVertical: 8, paddingRight: 8 }}>\n                {/* milk */}\n                <View style={{ flexDirection: 'row', alignItems: 'center', backgroundColor: includeMilkIntake ? '#dcf3d0' : 'transparent' }}>\n                  <TouchableOpacity\n                    disabled={true}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({ includeMilkIntake: !includeMilkIntake })\n                    }}\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: includeMilkIntake ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 20, marginLeft: 10, alignSelf: 'center' }}>餵奶: </Text>\n                    </View>\n                  </TouchableOpacity>\n\n                  <TouchableOpacity\n                    style={{ justifyContent: 'center', alignItems: 'center', padding: 10 }}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({\n                        showDateTimeModalType: 'milkintake',\n                        // showDateTimeModal: true,\n                        includeMilkIntake: true\n                      })\n                      this.props.showTimeModal()\n                    }}\n                  >\n                    <Text style={{ fontSize: 25 }}>{`${beautifyTime(milk_timestamp)}`}</Text>\n                  </TouchableOpacity>\n                  <TextInput\n                    editable={this.editable()}\n                    style={{ marginLeft: 15, width: 55, fontSize: 25 }}\n                    keyboardType=\"number-pad\"\n                    placeholder={'_____'}\n                    value={''+milk_amount}\n                    onChangeText={(milk_amount) => this.setState({ milk_amount })}\n                    onFocus={() => {\n                      if (!this.editable()) return\n                      this.setState({ includeMilkIntake: true })\n                    }}\n                  />\n                  <Text style={{ fontSize: 20 }}>  c.c.</Text>\n                </View>\n\n                {/* diaper */}\n                <View \n                  style={{ \n                    flexDirection: 'row', alignItems: 'center', \n                    marginTop: 10, backgroundColor: includeDiaper ? '#dcf3d0' : 'transparent'\n                  }}\n                >\n                  <TouchableOpacity\n                    disabled={true}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({ includeDiaper: !includeDiaper })\n                    }}\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: includeDiaper? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 20, marginLeft: 10, alignSelf: 'center' }}>如廁: </Text>\n                    </View>\n                  </TouchableOpacity>\n                  \n                  <TouchableOpacity\n                    style={{ justifyContent: 'center', alignItems: 'center', padding: 5 }}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({\n                        showDateTimeModalType: 'diaper',\n                        // showDateTimeModal: true,\n                        includeDiaper: true\n                      })\n                      this.props.showTimeModal()\n                    }}\n                  >\n                    <Text style={{ fontSize: 25, padding: 5 }}>{`${beautifyTime(diaper_timestamp)}`}</Text>\n                  </TouchableOpacity>\n\n                  <TouchableOpacity\n                    style={{ marginLeft: 15, justifyContent: 'center', alignItems: 'center', padding: 10 }}\n                    onClick={() => {\n                      if (!this.editable()) return\n                      this.setState({\n                        diaper_type: \n                          diaper_type === '小便' ? \n                            '大便'\n                            : diaper_type === '大便' ?\n                              '無排便'\n                              : '小便',\n                        includeDiaper: true\n                      })\n                    }}\n                  >\n                    <Text style={{ fontSize: 20 }}>{diaper_type}</Text>\n                  </TouchableOpacity>\n                </View>\n\n                {/* text */}\n                <TextInput\n                    key={morning_reminder_id}\n                    editable={this.editable()}\n                    style={{ width: '100%', height: scrollHeight, backgroundColor: '#dcf3d0', \n                      fontSize: 25, paddingTop: 10, padding: 10, marginTop: 10\n                    }}\n                    placeholder={\n                      this.editable() ? \n                        '點擊我開始填寫...' \n                        : isLoading ?\n                          '下載中...'\n                          :'已不能填寫'\n                    }\n                    value={text}\n                    multiline={true}\n                    scrollEnabled={false}\n                    // maxLength={200}\n                    onChangeText={(text) => this.setState({ text })}\n                    onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                    onLayout={(event) => {\n                      const { scrollHeight } = event.nativeEvent.target\n                      this.setState({\n                          scrollHeight\n                      })\n                    }}\n                />\n                <TouchableOpacity\n                    disabled={!this.editable()}\n                    style={{ backgroundColor: '#00c07f', padding: 10, justifyContent: 'center', alignItems: 'center' }}\n                    underlayColor=\"transparent\"\n                    onClick={this.onSendMessageDelay}\n                >\n                    <Text style={{ fontSize: 25}}>送出</Text>\n                </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Card>\n    );\n  }\n}","import React from 'react'\nimport { View, Text, Image, ScrollView, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport { get, beautifyMonthDate } from '../util'\nimport { TouchableOpacity } from 'react-native'\n\nexport default class AnnouncementCard extends React.Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            announcements: []\n        }\n    }\n\n    componentDidMount () {\n        this.fetchAnnouncement()    \n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.date !== prevProps.date) {\n          this.setState({ isLoading: true })\n          this.fetchAnnouncement();\n        } else if (this.props.child_id !== prevProps.child_id) {\n          this.setState({ isLoading: true })\n          this.fetchAnnouncement();\n        }\n      }\n\n    async fetchAnnouncement () {\n        const { parent_id } = this.props\n        // console.log('parent_id: ', parent_id)\n        const response = await get(`/announcement/unread?parent_id=${parent_id}&page=0`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchAnnouncement/response: ', response)\n        if (success) {\n            this.setState({\n                announcements: data\n            })\n        }\n    }\n\n    render () {\n        /*\n            -if there are announcement unread, show on home page the date of the announcement\n            -only when parent click into it, we mark it read\n            -parent can also click next or previous depends on which announcement s/he is in\n            -when parent navigate back to home page, update announcement card status to show only the unread announcements\n            -should still show unread when parent changes date\n        */\n        const { announcements } = this.state\n        // console.log('announcements:', announcements)\n        if (announcements.length === 0) {\n            return null\n        }\n        return (\n            <Card style={{ width: '93%'}}>\n                <View style={{ flex: 1, flexDirection: 'row' }}>\n                    <TouchableOpacity \n                        style={{ \n                            width: 56, \n                            height: 56, \n                            justifyContent: 'center', \n                            alignItems: 'center'\n                        }}\n                        onClick={() => this.props.viewMore(announcements)}\n                    >\n                        <Image\n                            source={require('../../assets/icon-announcement.png')}\n                            style={{\n                                width: 38,\n                                height: 38\n                            }}\n                        />\n                    </TouchableOpacity>\n                    <View style={{ flex: 1 }}>\n                        <View style={{ paddingTop: 8 }}>\n                            <Text style={{ fontSize: 20 }}>新公告</Text>\n                        </View>\n                        <View style={{ flex: 1, paddingVertical: 8 }}>\n                            <ScrollView horizontal contentContainerStyle={{ paddingBottom: 10 }}>\n                                {announcements.map((announcement, index) => {\n                                    const date = new Date(announcement.timestamp)\n                                    // console.log('beautifyDate(date): ', beautifyDate(date))\n                                    return (\n                                        <TouchableOpacity\n                                            key={announcement.id}\n                                            style={{\n                                                padding: 10,\n                                                backgroundColor: '#F5F5F5',\n                                                marginRight: 15,\n                                                justifyContent: 'center'\n                                            }}\n                                            underlayColor={'#ff8944'}\n                                            onClick={() => this.props.viewAnnouncement(index, announcements)}\n                                        >\n                                            <View style={{ flex: 1, flexDirection: 'row', alignItems: 'center' }}>\n                                                {announcement.read ? \n                                                    <Image\n                                                        source={require('../../assets/icon-checked.png')}\n                                                        style={{\n                                                            width: 20,\n                                                            height: 20\n                                                        }}\n                                                    />\n                                                    : null\n                                                }\n                                                <Text\n                                                    style={{\n                                                        marginLeft: 3,\n                                                        alignSelf: 'center',\n                                                        fontSize: 25,\n                                                        color: 'rgba(0,0,0,0.8)'\n                                                    }}\n                                                >\n                                                    {beautifyMonthDate(date)}    \n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                    )\n                                })}\n                            </ScrollView>\n                        </View>\n                    </View>\n                </View>\n            </Card>\n        )\n    }\n}","import React, { useState, useEffect } from 'react'\nimport { Card } from 'native-base'\nimport { View, Image, Text, } from 'react-native'\nimport Reloading from '../reloading'\nimport { formatDate, get } from '../util'\n\nconst AttendanceCard = (props) => {\n    const { student_id } = props\n    const [ isLoading, setIsLoading ] = useState(true)\n    const [ inTime, setInTime ] = useState(null)\n    const [ outTime, setOutTime ] = useState(null)\n    const [ excuseType, setExcuseType ] = useState(null)\n    const [ absenceTime, setAbsenceTime ] = useState(null)\n    const time = {\n        'morning': '早上',\n        'evening': '下午',\n        'all_day': '全天'\n    }\n    \n    useEffect(() => {\n        const { date } = props\n        fetchAttendanceByStudentId(date)\n    }, [props.date])\n\n    const fetchAttendanceByStudentId = async(date) => {\n        const response = await get(`/attendance/${student_id}?date=${formatDate((date))}`)\n        const { success, statusCode, message, data } = response\n        if (success) {\n            // console.log('response: ', response)\n            let { in_time, out_time, excuse_type, absence_time } = data\n            if (excuse_type === 'none-medical') {\n                excuse_type = '事假'\n            }\n            setInTime(in_time)\n            setOutTime(out_time)\n            setExcuseType(excuse_type)\n            setAbsenceTime(absence_time)\n            setIsLoading(false)\n        } else if (statusCode === 400) {\n            setInTime(null)\n            setOutTime(null)\n            setExcuseType(null)\n            setAbsenceTime(null)\n            setIsLoading(false)\n        }\n    }\n\n    return (\n        <Card style={{ width: '93%' }}>\n            <View style={{ flex: 1, flexDirection: 'row' }}>\n                <View style={{ width: 56, height: 56, justifyContent: 'center', alignItems: 'center'}}>\n                    <Image\n                        source={require('../../assets/icon-attendance.png')}\n                        style={{\n                            width: 48,\n                            height: 48\n                        }}\n                    />\n                </View>\n                <View style={{ flex: 1 }}>\n                    <View style={{ paddingTop: 8 }}>\n                        <Text style={{ fontSize: 20 }}>出勤</Text>\n                    </View>\n                    {isLoading ? \n                        <Reloading />\n                        : inTime !== null || outTime !== null || excuseType !== null ? \n                            <View style={{ flex: 1, paddingVertical: 8, alignItems: 'center' }}>\n                                {excuseType !== null && \n                                    <View style={{ flex: 1, paddingBottom: 8 }}>\n                                        <Text style={{ fontSize: 25 }}>\n                                            {`請假: ${excuseType} (${time[absenceTime]})`}\n                                        </Text>\n                                    </View>\n                                }\n                                <View style={{ flex: 1, width: '100%', flexDirection: 'row' }}>\n                                    <View style={{ flex: 1, alignItems: 'center' }}>\n                                        <Text>到校</Text>\n                                        {inTime !== null && <Text style={{ fontSize: 25, alignSelf: 'center' }}>{inTime}</Text>}\n                                    </View>\n                                    {/* <Text style={{ fontSize: 25 }}> ~ </Text> */}\n                                    <View style={{ flex: 1, alignItems: 'center' }}>\n                                        <Text>離校</Text>\n                                        {outTime !== null && <Text style={{ fontSize: 25, alignSelf: 'center' }}>{outTime}</Text>}\n                                    </View>\n                                </View>\n                            </View>\n                            : \n                                <View style={{ flex: 1, paddingVertical: 8 }}>\n                                    <Text style={{ fontSize: 17 }}>沒有新紀錄</Text>\n                                </View>\n                    }\n                </View>\n            </View>\n        </Card>\n    )\n}\n\nexport default AttendanceCard","import React from 'react'\nimport { View, Text, TouchableOpacity } from 'react-native'\n\nconst MainMenu = (props) => {\n    return (\n        <View\n            style={{\n                zIndex: 2,\n                width: '100%',\n                height: '100%',\n                position: 'absolute',\n                backgroundColor: 'rgba(0,0,0,1)',\n                alignItems: 'center',\n                // justifyContent: 'center'\n            }}\n        >\n            <TouchableOpacity \n                style={{\n                    // textAlign: 'center',\n                    paddingTop: 30,\n                    paddingBottom: 15,\n                    borderBottomWidth: 2,\n                    borderBottomColor: 'grey'\n                }}\n                onClick={() => props.onItemClick('DownloadPage')}\n            >\n                <Text style={{ fontSize: 25, color: 'grey', fontWeight: 'bold' }}> 下載 </Text>\n            </TouchableOpacity>\n        </View>\n    )\n}\n\nexport default MainMenu","import React from 'react'\nimport { StyleSheet, ScrollView, View, Text, RefreshControl, TouchableOpacity,\n    Alert, Dimensions, AppState, Image, KeyboardAvoidingView, Platform, } from 'react-native'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { setConnectState, initializeChildren, markPresent, clearState } from '../../redux/parent/actions/index'\nimport Reloading from '../reloading'\nimport WellnessCard from './wellnesscard';\nimport AppetiteCard from './appetitecard';\nimport MilkCard from './milkcard';\nimport SleepCard from './sleepcard';\nimport RestroomCard from './restroomcard';\nimport MessageCard from './messagecard'\nimport ParentHomeTitle from './parenthometitle'\nimport ProfileSelector from './profileselector'\nimport QRPage from './qrpage'\nimport { formatDate, beautifyDate, beautifyTime, get } from '../util'\nimport MedicationRequestCard from './medicinerequestcard'\nimport TimeModal from './timemodal'\nimport MorningReminderCard from './morningremindercard'\nimport AnnouncementCard from './announcementcard'\nimport AttendanceCard from './attendancecard'\nimport ENV from '../../variables'\nimport MainMenu from './mainmenu/mainmenu'\nconst { width } = Dimensions.get('window')\n\nclass ParentHome extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            date: new Date(),\n            child_id: '',\n            student_id_array: [],\n            message: '',\n            refreshing: false,\n            showQR: false,\n            temperature: '',\n            appState: '',\n            showDateTimeModal: false,\n            present: false,\n            showTimeModal: false,\n            showMainMenu: false\n        }\n        this.initializeChildren = this.initializeChildren.bind(this)\n    }\n\n    timer = () => setTimeout(() => {\n        this.poll(this.state.child_id)\n    }, 10000)\n\n    async poll(student_id) {\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/family/updates?student_id=${student_id}`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                // console.log('parenthome/poll: ')\n                const update_types = resJson.data\n                update_types.forEach(update_type => {\n                    // console.log(update_type)\n                    this.refs[update_type].fetchData(student_id, new Date(this.state.date))\n                })  \n            })\n            .catch(err => {\n                console.log('polling error: ', err)\n            })\n        this.timeoutId = this.timer()\n    }\n\n    componentDidMount() {\n        // this.setDate()\n        window.addEventListener('offline', (e) => {\n            // console.log('offline ', e)\n            this.props.setConnectState(false) \n        });\n        window.addEventListener('online', (e) => {\n            // console.log('online ', e)\n            this.props.setConnectState(true)\n        });\n        this.initializeChildren()\n        this.timeoutId = this.timer()\n        AppState.addEventListener(\"change\", this._handleAppStateChange);\n        this.props.navigation.setOptions({\n            headerLeft: () => (\n                <TouchableOpacity\n                    style={{ padding: 15 }}\n                    onClick={() => this.setState({ showMainMenu: !this.state.showMainMenu })}\n                >\n                    <Image\n                        source={require('../../assets/icon-menu.png')}\n                        style={{ width: 20, height: 20 }}\n                    />\n                </TouchableOpacity>\n            )\n        })\n    }\n\n    // // SPECIAL DAY QUICK TEMP FIX\n    // isSpecialDate(date) {\n    //     const special_date = new Date()\n    //     special_date.setMonth(5,20)\n    //     return date.toDateString() === special_date.toDateString()\n    // }\n    \n    // goBackADay() {\n    //     const date = new Date(this.state.date.getTime())\n    //     const special_date = new Date()\n    //     special_date.setMonth(5,22)\n    //     if (date.getDay() === 1 && (date.toDateString() !== special_date.toDateString())) {\n    //         date.setDate(date.getDate() - 3)\n    //     } else if (date.toDateString() === special_date.toDateString()) {\n    //         date.setDate(date.getDate() - 2)\n    //     } else {\n    //         date.setDate(date.getDate() - 1)\n    //     }\n    //     this.selectDatetimeConfirm(date)\n    // }\n\n    // goForwardADay() {\n    //     const date = new Date(this.state.date.getTime())\n    //     if (date.getDay() === 5 && !this.tomorrowHasClass()) {\n    //         date.setDate(date.getDate() + 3)\n    //     } else if (date.getDay() === 6 && this.isSpecialDate(date)) {\n    //         date.setDate(date.getDate() + 2)\n    //     } else {\n    //         date.setDate(date.getDate() + 1)\n    //     }\n    //     this.selectDatetimeConfirm(date)\n    // }\n\n    // tomorrowHasClass() {\n    //     const date = new Date(this.state.date)\n    //     date.setDate(date.getDate() + 1)\n    //     const special_date = new Date()\n    //     special_date.setMonth(5, 20)\n    //     if (date.toDateString() === special_date.toDateString()) {\n    //         return true\n    //     }\n    //     return false\n    // }\n\n    \n    setDate() {\n        let date = new Date()\n        if (date.getDay() === 6) {  \n            date.setDate(date.getDate() - 1)\n        } else if (date.getDay() === 0) {\n            date.setDate(date.getDate() - 2)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    // // SPECIAL DAY QUICK TEMP FIX\n    // setDate() {\n    //     let date = new Date()\n    //     if (date.getDay() === 0) {\n    //         date.setDate(date.getDate() - 1)\n    //     }\n    //     this.selectDatetimeConfirm(date)\n    // }\n\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    initializeChildren() {\n        const { parent_id } = this.props.route.params\n\n        // this.setState({ child_id: '', date: new Date })\n        // this.setDate()\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/family/${parent_id}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.initializeChildren(data)\n                const student_id_array = Object.keys(this.props.parent.child_of_id)\n                this.setState({\n                    child_id: student_id_array[0],\n                    student_id_array\n                })\n                // this.checkStudentAttendance(student_id_array[0])\n                this.setDate()\n            })\n            .catch((err) => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when initializing student profiles')\n        })\n    }\n\n    _handleAppStateChange = nextAppState => {\n        if (\n            this.state.appState.match(/inactive|background/) &&\n            nextAppState === \"active\"\n        ) {\n            this.checkStudentAttendance(this.state.child_id)\n\n            if (this.state.date.toDateString() !== (new Date).toDateString() && (new Date).getHours() > 3) {\n                this.initializeChildren()\n            }\n        }\n        this.setState({ appState: nextAppState });\n    };\n\n    async checkStudentAttendance(student_id) {\n        if (this.state.date.toDateString() !== (new Date).toDateString()) {\n            return\n        }\n        const date = new Date()\n        const response = await get(`/attendance/${student_id}?date=${formatDate(date)}`)\n        const { success, statusCode, message, data } = response\n        // console.log('response: ', response)\n        if (success) {\n            const { in_time, out_time, excuse_type } = data\n            if ((in_time !== null && out_time !== null) || excuse_type !== null) {\n                let date = new Date()\n                date.setHours(18,0,0,0)\n                this.setState({\n                    date\n                })\n            }\n        }\n    }\n\n    onSelectStudent(child_id) {\n        this.setState({ child_id })\n    }\n\n    markPresent(temperature) {\n        const { date } = this.state\n        this.setState({\n            temperature,\n            present: temperature !== ''\n        })\n    }\n\n    selectDatetimeConfirm(date) {\n        const threshold = new Date()\n        threshold.setHours(0,0,0,0)\n        if (date.getTime() < threshold.getTime()) { // if selected date is before today\n            date.setHours(18)\n        } else if (date.toDateString() === (new Date()).toDateString()) { // if selected date is today\n            date.setTime(new Date())\n        } else { // if selected date is tomorrow\n            date.setHours(16, 0, 0)\n        }\n        this.setState({ date, showDateTimeModal: false }, () => this.checkStudentAttendance(this.state.child_id))\n    }\n\n    getDayDifference(startDate, endDate) {\n        let start = new Date(startDate)\n        let end = new Date(endDate)\n        start.setHours(0)\n        end.setHours(0)\n        const oneDay = 24 * 60 * 60 * 1000;\n        return Math.round((end - start) / (oneDay))\n    }\n\n    // SPECIAL DAY QUICK TEMP FIX\n    goBackADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 1) {\n            date.setDate(date.getDate() - 3)\n        } else {\n            date.setDate(date.getDate() - 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    goForwardADay() {\n        const date = new Date(this.state.date.getTime())\n        if (date.getDay() === 5) {\n            date.setDate(date.getDate() + 3)\n        } else {\n            date.setDate(date.getDate() + 1)\n        }\n        this.selectDatetimeConfirm(date)\n    }\n\n    onMenuItemClick(item) {\n        const { child_id } = this.state\n        this.setState({ showMainMenu: false })\n        this.props.navigation.navigate(item, {\n            student_id: child_id,\n            students: this.props.parent.child_of_id\n        })\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timeoutId)\n        AppState.removeEventListener(\"change\", this._handleAppStateChange);\n        this.props.clearState()\n    }\n\n    render() {\n        const { parent_id } = this.props.route.params\n        const { isConnected } = this.props\n        // console.log('isConnected: ', isConnected)\n        const { date, child_id, showQR, temperature, showDateTimeModal, present, showTimeModal, showMainMenu } = this.state\n        // console.log('parenthome: ', date)\n        if (child_id === '') {\n            return (\n                <Reloading />\n            )\n        }\n        const selected_student = this.props.parent.child_of_id[child_id]\n        const day_difference = this.getDayDifference(date, new Date())\n        return (\n            <KeyboardAvoidingView\n                enabled\n                behavior={\"padding\"}\n                keyboardVerticalOffset={100}\n                style={{ flex: 1, zIndex: 1 }}\n            >\n                <ProfileSelector\n                    ref='profile_selector'\n                    student_of_id={this.props.parent.child_of_id}\n                    onSelectStudent={(student_id) => this.onSelectStudent(student_id)}\n                />\n                {showQR ? \n                    <QRPage\n                        hideQRCode={() => this.setState({\n                            showQR: false\n                        })}\n                        parent_id={parent_id}\n                    />\n                    : null\n                }\n\n                {showDateTimeModal ?\n                    <TimeModal\n                        start_date={date}\n                        datetime_type={'date'}\n                        hideModal={() => this.setState({ showDateTimeModal: false })}\n                        selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n                        minDatetime={(new Date()).setDate((new Date()).getDate() - 7)}\n                        maxDatetime={(new Date()).setDate((new Date()).getDate() + 1)}\n                        paddingVertical={100}\n                    />\n                    : null\n                }\n\n                {showTimeModal &&\n                    <TimeModal\n                        start_date={new Date()}\n                        datetime_type={'time'}\n                        hideModal={() => this.setState({ showTimeModal: false })}\n                        selectDatetimeConfirm={(time) => this.refs['morningreminder'].selectDatetimeConfirm(time)}\n                        minDatetime={null}\n                        maxDatetime={null}\n                        minTime={null}\n                        maxTime={null}\n                        paddingVertical={400}\n                    />\n                }\n\n                {showMainMenu && \n                    <MainMenu\n                        onItemClick={(item) => this.onMenuItemClick(item)}\n                        onHide={() => this.setState({ showMainMenu: false})}\n                    />\n                }\n\n                {<ScrollView\n                    contentContainerStyle={{ alignItems: 'center', justifyContent: 'center', paddingBottom: 30 }}\n                    refreshControl={\n                        <RefreshControl\n                            style={{backgroundColor: 'transparent' }}\n                            refreshing={this.state.refreshing}\n                            onRefresh={this.initializeChildren}\n                            tintColor=\"#ff8944\"\n                            title=\"Loading...\"\n                            titleColor=\"#368cbf\"\n                            colors={['#ff8944', '#368cbf', '#0000ff']}\n                            progressBackgroundColor=\"#ffff00\"\n                        />\n                    }\n                >\n                    <View style={{ width: '100%', flexDirection: 'row', backgroundColor: 'white' }}> \n                        <View style={{ width: '15%'}}>\n                            {day_difference < 7 ?\n                                <TouchableOpacity\n                                    style={{ flex: 1, justifyContent: 'center', alignItems: 'center'}}\n                                    onClick={() => this.goBackADay()}\n                                >\n                                    <Image\n                                        source={require('../../assets/icon-back.png')}\n                                        style={{ width: 40, height: 40 }}\n                                    />\n                                </TouchableOpacity>\n                                : null\n                            }\n                        </View>\n                        <TouchableOpacity\n                            style={{ width: '70%', justifyContent: 'center'}}\n                            onClick={() => this.setState({ showDateTimeModal: true })}\n                        >\n\n                            <Text style={{ fontSize: width * 0.12, textAlign: 'center' }}>\n                                {beautifyDate(date)}\n                            </Text>\n                        </TouchableOpacity>\n                        <View style={{ width: '15%'}}>\n                            {day_difference >= 0 ?\n                                <TouchableOpacity\n                                    style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}\n                                    onClick={() => this.goForwardADay()}\n                                >\n                                    <Image\n                                        source={require('../../assets/icon-forward.png')}\n                                        style={{ width: 40, height: 40 }}\n                                    />\n                                </TouchableOpacity>\n                                : null\n                            }\n                        </View>\n                    </View>\n                    <ParentHomeTitle\n                        student={selected_student}\n                        students={this.props.parent.child_of_id}\n                        student_name={this.props.parent.child_of_id[child_id].name}\n                        selectOtherChildProfile={() => this.refs['profile_selector'].slideIn()}\n                        viewQRCode={() => this.setState({\n                            showQR: true\n                        })}\n                        temperature={temperature}\n                    />\n\n                    <View style={{ flex: 1, width: '93%', flexDirection: 'row', justifyContent: 'space-between', marginVertical: 5 }}>\n                        <TouchableOpacity\n                            style={{width: '30%', padding: 10, backgroundColor: '#ffe1d0'}}\n                            onClick={() => this.props.navigation.navigate('PickupRequest', {\n                                child_id,\n                                school_id: selected_student.school_id\n                            })}>\n                            <Text style={{ fontSize: width * 0.05, textAlign: 'center'}}>接回告知</Text>\n                        </TouchableOpacity>\n                        <TouchableOpacity\n                            style={{width: '30%', padding: 10, backgroundColor: '#fff1b5'}}\n                            onClick={() => this.props.navigation.push('MedicationRequestPage', {\n                                onGoBack: () => this.refs['med_request'].fetchData(child_id, new Date()),\n                                student_id: child_id,\n                                class_id: selected_student.class_id\n                            })}>\n                            <Text style={{ fontSize: width * 0.05, textAlign: 'center' }}>托藥單</Text>\n                        </TouchableOpacity>\n                        <TouchableOpacity\n                            style={{width: '30%', padding: 10, backgroundColor: '#b5e9e9'}}\n                            onClick={() => this.props.navigation.navigate('AbsenceExcusePage', {\n                                student_id: child_id,\n                                class_id: selected_student.class_id === null ? \"\" : selected_student.class_id,\n                                school_id: selected_student.school_id\n                            })}>\n                            <Text style={{ fontSize: width * 0.05, textAlign: 'center' }}>請假單</Text>\n                        </TouchableOpacity>\n                    </View>\n\n                    <AnnouncementCard \n                        child_id={child_id}\n                        date={date}\n                        parent_id={parent_id}\n                        ref=\"announcement\"\n                        viewAnnouncement={(index, data) => this.props.navigation.push('AnnouncementPage', {\n                            onGoBack: () => this.refs['announcement'].fetchAnnouncement(),\n                            index,\n                            data,\n                            parent_id\n                        })}\n                        viewMore={(announcements) => this.props.navigation.push('AnnouncementListPage', {\n                            announcements,\n                            parent_id,\n                            viewAnnouncement: (index, data) => this.props.navigation.push('AnnouncementPage', {\n                                onGoBack: () => this.refs['announcement'].fetchAnnouncement(),\n                                index,\n                                data,\n                                parent_id\n                            })\n                        })}\n                    />\n\n                    <MorningReminderCard\n                        child_id={child_id}\n                        date={date}\n                        class_id={selected_student.class_id}\n                        ref=\"morningreminder\"\n                        present={present}\n                        isConnected={isConnected}\n                        parent_id={parent_id}\n                        showTimeModal={() => this.setState({ showTimeModal: true })}\n                    />\n\n                    <AttendanceCard\n                        student_id={child_id}\n                        date={date}\n                        ref=\"attendance\"\n                    />\n\n                    <MedicationRequestCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"med_request\"\n                        viewMedRequest={(index, data) => this.props.navigation.push('AddMedicationRequestPage', {\n                            onGoBack: () => this.refs['med_request'].fetchData(child_id, new Date()),\n                            student_id: child_id, \n                            class_id: selected_student.class_id === null ? \"\" : selected_student.class_id,\n                            index,\n                            data\n                        })}\n                    />\n\n                    <WellnessCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"wellness\"\n                        updateTitleTemp={(temperature) => this.markPresent(temperature)}\n                    />\n\n                    <MessageCard\n                        child_id={child_id}\n                        date={date}\n                        class_id={selected_student.class_id}\n                        ref=\"messages\"\n                        parent_id={parent_id}\n                    />\n\n                    <AppetiteCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"appetite\"\n                    />\n\n                    <MilkCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"milkintake\"\n                    />\n\n                    <SleepCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"sleep\"\n                    />\n\n                    <RestroomCard\n                        child_id={child_id}\n                        date={date}\n                        ref=\"diaper\"\n                    />\n\n                </ScrollView>}\n            </KeyboardAvoidingView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    button_text: {\n        fontSize: 18,\n        textAlign: 'center'\n    },\n    button: {\n        width: '30%',\n        padding: 20,\n        justifyContent: 'center',\n        // shadowColor: \"#000\",\n        // shadowOffset: {\n        //     width: 0,\n        //     height: 1,\n        // },\n        // shadowOpacity: 0.22,\n        // shadowRadius: 2.22,\n        // elevation: 3,\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        parent: state.parent,\n        isConnected: state.parent.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({\n            setConnectState,\n            initializeChildren,\n            markPresent,\n            clearState\n        }, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParentHome)\n","import React from 'react'\nimport { View, Text, TouchableHighlight, Dimensions } from 'react-native'\nconst { width } = Dimensions.get('window')\n\nexport default class MedicinePowderForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥粉: 0\n    }\n  }\n\n  componentDidMount() {\n    const { 藥粉 } = this.props\n    this.setState({\n      藥粉: parseInt(藥粉)\n    })\n  }\n\n  render() {\n    const { 藥粉 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                // backgroundColor: 'white',\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥粉</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n            <TouchableHighlight\n              style={{\n                backgroundColor: 'rgba(0,0,0,0.4)',\n                height: height*0.8,\n                aspectRatio: 1,\n                justifyContent: 'center',\n                borderRadius: height*0.4\n              }}\n              onPress={() => this.setState({\n                藥粉: 藥粉 === 0 ? 0 : 藥粉-1\n              })}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center', color: 'white' }}>-</Text>\n            </TouchableHighlight>\n\n            <Text style={{ fontSize: 40, paddingHorizontal: 15 }}>{藥粉} 包</Text>\n\n            <TouchableHighlight\n              style={{\n                backgroundColor: 'rgba(0,0,0,0.4)',\n                height: height*0.8,\n                aspectRatio: 1,\n                justifyContent: 'center',\n                borderRadius: height*0.4\n              }}\n              onPress={() => this.setState({\n                藥粉: 藥粉+1\n              })}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center', color: 'white' }}>+</Text>\n            </TouchableHighlight>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: width*0.12, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥粉)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\n\nexport default class MedicineSyrupForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥水: 0\n    }\n  }\n\n  componentDidMount() {\n    const { 藥水 } = this.props\n    this.setState({\n      藥水\n    })\n  }\n\n  render() {\n    const { 藥水 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥水</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', marginTop: -20 }}>\n            <View style={{ flexDirection: 'row', backgroundColor: 'rgba(255,255,255,0.4)', alignItems: 'center' }}>\n              <TextInput\n                style={{ fontSize: 40, padding: 10 }}\n                keyboardType='decimal-pad'\n                autoFocus\n                selectTextOnFocus\n                value={'' + 藥水}\n                onChangeText={(amount) => this.setState({ 藥水: amount })}\n              />\n              <Text style={{ paddingLeft: 10, fontSize: 40 }}>c.c.</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥水)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput } from 'react-native'\n\nexport default class MedicineCreamForm extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      藥膏: ''\n    }\n  }\n\n  componentDidMount() {\n    const { 藥膏 } = this.props\n    this.setState({\n      藥膏\n    })\n  }\n\n  render() {\n    const { 藥膏 } = this.state\n    const {width, height} = this.props\n    return (\n      <View style={{ flex: 4, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n        <View style={{ flex: 3, margin: 14, backgroundColor: '#ffddb7' }}>\n          <View style={{ height: height, flexDirection: 'row',  flexDirection: 'row' }}>\n            <View\n              style={{\n                width,\n                justifyContent: 'center',\n                alignItems: 'center'\n              }}>\n              <Text style={{ fontSize: 25 }}>藥膏</Text>\n            </View>\n          </View>\n          <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', marginTop: -20 }}>\n            <View style={{ flexDirection: 'row', backgroundColor: 'rgba(255,255,255,0.4)', alignItems: 'center' }}>\n              <TextInput\n                style={{ fontSize: 40, padding: 10 }}\n                placeholder='部位'\n                autoFocus\n                selectTextOnFocus\n                value={藥膏}\n                onChangeText={(area) => this.setState({ 藥膏: area })}\n              />\n            </View>\n          </View>\n          <View style={{ flex: 1, flexDirection: 'row' }}>\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#fa625f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onCancelSelect()}\n              >\n                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消選取</Text>\n              </TouchableHighlight>\n            </View>\n\n            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n              <TouchableHighlight\n                style={{\n                  height: '70%',\n                  aspectRatio: 2,\n                  padding: 5,\n                  backgroundColor: '#00c07f',\n                  justifyContent: 'center'\n                }}\n                onPress={() => this.props.onFinishEdit(藥膏)}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>OK</Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n        </View>\n      </View>\n    )\n  }\n}","import React from 'react'\nimport { View, Text, TouchableHighlight, TextInput, KeyboardAvoidingView, Alert, ScrollView, Platform } from 'react-native'\n// import DateTimePicker from '@react-native-community/datetimepicker'\nimport { formatDate, formatTime, beautifyDate, beautifyTime }  from '../util'\nimport MedicinePowderForm from './medicinepowderform'\nimport MedicineSyrupForm from './medicinesyrupform'\nimport MedicineCreamForm from './medicinecreamform'\nimport ENV from '../../variables'\n\nexport default class MedicationRequestMain extends React.Component{\n  constructor(props) {\n    super(props) \n    this.state = {\n      optionButtonWidth: 0,\n      optionButtonHeight: 0,\n      show_date_picker: false,\n      show_time_picker: false,\n      date: new Date(),\n      time: new Date(),\n      show_editor: '',\n      藥粉: null,\n      need_refrigeration: false,\n      藥水: null,\n      藥膏: null,\n      note: '',\n      access_mode: 'create'\n    }\n  }\n\n  componentDidMount() {\n  }\n\n  getHeader() {\n    const { access_mode, date, } = this.state\n    if (access_mode === 'read') {\n      if (formatDate(date) === formatDate(new Date)) {\n        return '今天托藥單'\n      }\n      const days_of_week = ['天', '一', '二', '三', '四', '五', '六']\n      const day = days_of_week[date.getDay()]\n      return `星期${day}`\n    } else if (access_mode === 'create') {\n      return '新增托藥單'\n    } else if (access_mode === 'edit') {\n      return '編輯中...'\n    }\n  }\n\n  fetchAccessMode() {\n    return this.state.access_mode\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.request !== this.props.request) {\n      const { request } = this.props\n      if (!request) {\n        this.setState({\n          date: new Date(),\n          time: new Date(),\n          藥粉: null,\n          need_refrigeration: false,\n          藥水: null,\n          藥膏: null,\n          note: '',\n          access_mode: 'create'\n        })\n        return\n      }\n\n      const { timestamp, medication, note } = request\n      const { 藥粉, need_refrigeration, 藥水, 藥膏 } = medication\n      this.setState({\n        date: timestamp,\n        time: timestamp,\n        藥粉,\n        need_refrigeration,\n        藥水,\n        藥膏,\n        note,\n        access_mode: 'read'\n      })\n    }\n  }\n\n  setDate(date) {\n    if (Platform.OS === 'ios') {\n      this.iosSetDate(date)\n    } else { // android\n      this.androidSetDate(date)\n    }\n  }\n\n  iosSetDate(date) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      date,\n      time: date\n    })\n  }\n\n  androidSetDate(date) {\n    if (date !== undefined) {\n      this.setState({\n        date,\n        time: date,\n        show_date_picker: false\n      })\n    } else {\n      this.setState({ show_date_picker: false })\n    }\n  }\n\n  setTime(time) {\n    if (Platform.OS === 'ios') {\n      this.iosSetTime(time)\n    } else { // android\n      this.androidSetTime(time)\n    }\n  }\n\n  iosSetTime(time) {\n    if (this.state.access_mode === 'read') return;\n    this.setState({\n      time\n    })\n  }\n\n  androidSetTime(time) {\n    if (time !== undefined) {\n      this.setState({\n        time,\n        show_time_picker: false\n      })\n    } else {\n      this.setState({ show_time_picker: false })\n    }\n  }\n\n  onFinishEdit(medicine_type, medicine_data) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: medicine_data\n    })\n  }\n\n  onCancelSelect(medicine_type) {\n    this.setState({\n      show_editor: '',\n      [medicine_type]: null\n    })\n  }\n\n  handleClickConfirmButton() {\n    const { access_mode } = this.state\n    if (access_mode === 'read') {\n      this.setState({\n        access_mode: 'edit'\n      })\n    } else if (access_mode === 'create') {\n      this.sendRequest(null)\n    } else if (access_mode === 'edit') {\n      const { id } = this.props.request\n      this.sendRequest(id)\n    }\n  }\n\n  sendRequest(request_id) {\n    const { date, time, 藥粉, need_refrigeration, 藥水, 藥膏, note  } = this.state\n    const {student_id, class_id} = this.props\n    const request_body = {\n      request_id,\n      timestamp: `${formatDate(date)} ${formatTime(time)}`,\n      class_id,\n      藥粉,\n      need_refrigeration,\n      藥水,\n      藥膏,\n      note\n    }\n\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/student/${student_id}`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onCreateRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending medication request')\n      })\n  }\n\n  deleteRequestConfirm() {\n    const confirmed = confirm('確定要刪除？')\n    if (confirmed) {\n      this.deleteRequest()\n    }\n  }\n\n  deleteRequest() {\n    const { request, class_id } = this.props\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request.id}`, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        class_id\n      })\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        this.props.onDeleteRequestSuccess(data.id)\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n      })\n  }\n\n  render() {\n    const {\n      show_date_picker,\n      show_time_picker,\n      date,\n      time,\n      藥粉,\n      藥水,\n      藥膏,\n      note,\n      optionButtonWidth,\n      optionButtonHeight,\n      show_editor,\n      access_mode\n    } = this.state\n\n    // console.log(this.props.request)\n\n    if (show_date_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'date'}\n              value={date}\n              onChange={(event, date) => this.setDate(date)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_date_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    if (show_time_picker) {\n      return (\n        <View style={{ flex: 1 }}>\n          <View style={{ flex: 3, justifyContent: 'center' }}>\n            {/* <DateTimePicker\n              style={{ width: '100%'}}\n              mode={'time'}\n              value={time}\n              onChange={(event, time) => this.setTime(time)}\n              minimumDate={new Date()}\n            /> */}\n          </View>\n          <View style={{ flex: 1 }}>\n            <TouchableHighlight\n              style={{ width: '50%', padding: 10, backgroundColor: 'rgba(255,255,255,0.4)', alignSelf: 'flex-end',  }}\n              onPress={() => this.setState({ show_time_picker: false })}\n            >\n              <Text style={{ fontSize: 30, textAlign: 'center' }}>OK</Text>\n            </TouchableHighlight>\n          </View>\n        </View>\n      )\n    }\n    return (\n      <KeyboardAvoidingView\n        style={{ flex: 1 }}\n        behavior='padding'\n        enabled\n      >\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n          <Text style={{ fontSize: 30, textAlign: 'center' }}>{this.getHeader()}</Text>\n        </View>\n        <View style={{ flex: 7 }}>\n\n          {/* DATE and TIME */}\n          <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-between', paddingVertical: 10 }}>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_date_picker: !show_date_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyDate(date)}</Text>\n            </TouchableHighlight>\n            <TouchableHighlight\n              disabled={access_mode === 'read' || show_editor !== ''}\n              style={{\n                backgroundColor: 'rgba(255,255,255,0.4)',\n                justifyContent: 'center',\n                padding: 10,\n                height: '100%'\n              }}\n              onPress={() => this.setState({show_time_picker: !show_time_picker})}\n            >\n              <Text style={{ fontSize: 25, textAlign: 'center' }}>{beautifyTime(time)}</Text>\n            </TouchableHighlight>\n          </View>\n\n          {show_editor === '藥粉' ? \n            <MedicinePowderForm\n              藥粉={藥粉}\n              width={optionButtonWidth}\n              height={optionButtonHeight}\n              onFinishEdit={(powder_amount) => this.onFinishEdit('藥粉', powder_amount)}\n              onCancelSelect={() => this.onCancelSelect('藥粉')}\n            />\n            : show_editor === '藥水' ?\n              <MedicineSyrupForm\n                藥水={藥水}\n                width={optionButtonWidth}\n                height={optionButtonHeight}\n                onFinishEdit={(syrup_amount) => this.onFinishEdit('藥水', syrup_amount)}\n                onCancelSelect={() => this.onCancelSelect('藥水')}\n              />\n              : show_editor === '藥膏' ?\n                <MedicineCreamForm\n                  藥膏={藥膏}\n                  width={optionButtonWidth}\n                  height={optionButtonHeight}\n                  onFinishEdit={(cream_area) => this.onFinishEdit('藥膏', cream_area)}\n                  onCancelSelect={() => this.onCancelSelect('藥膏')}\n                />\n                :\n                <View style={{ flex: 4 }}>\n                  <View style={{ flex: 3, backgroundColor: 'rgba(255,255,255,0.4)' }}>\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* POWDER */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥粉 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 14,\n                          marginRight: 7,\n                          marginBottom: 7\n                        }}\n                        onLayout={(event) => {\n                          const { width, height } = event.nativeEvent.layout\n                          this.setState({\n                            optionButtonWidth: width,\n                            optionButtonHeight: height\n                          })\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ show_editor: '藥粉', 藥粉: 藥粉 || 1 })}\n                      >\n                        {藥粉 ? \n                          <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉: {藥粉} 包</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥粉</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* REFRIGERATED */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: this.state.need_refrigeration ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 14,\n                          marginRight: 14,\n                          marginBottom: 7\n                        }}\n                        underlayColor='#ff8944'\n                        onPress={() => this.setState({ need_refrigeration: !this.state.need_refrigeration})}\n                      >\n                        <Text style={{ fontSize: 25, textAlign: 'center' }}>藥品需冷藏</Text>\n                      </TouchableHighlight>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row' }}>\n                      {/* SYRUP */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥水 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 14,\n                          marginTop: 7,\n                          marginRight: 7,\n                          marginBottom: 14\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥水', 藥水: 藥水 || 0 })}\n                      >\n                        {藥水 ?\n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥水: {藥水} c.c.</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥水</Text>\n                        }\n                      </TouchableHighlight>\n\n                      {/* CREAM */}\n                      <TouchableHighlight\n                        disabled={access_mode === 'read'}\n                        style={{\n                          flex: 1,\n                          backgroundColor: 藥膏 ? '#ff8944' : '#ffddb7',\n                          justifyContent: 'center',\n                          marginLeft: 7,\n                          marginTop: 7,\n                          marginRight: 14,\n                          marginBottom: 14,\n                        }}\n                        onPress={() => this.setState({ show_editor: '藥膏' })}\n                      >\n                        {藥膏 ? \n                          <Text style={{ fontSize: 20, textAlign: 'center' }}>藥膏部位: {藥膏}</Text>\n                          : <Text style={{ fontSize: 25, textAlign: 'center' }}>藥膏</Text>\n                        }\n                        \n                      </TouchableHighlight>\n                    </View>\n                  </View>\n\n              {/* NOTE */}\n                  <View\n                    style={{ backgroundColor: '#b5e9e9' }}\n                  >\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      placeholder='備註'\n                      placeholderTextColor='grey'\n                      value={note}\n                      style={{\n                        // height: '100%',\n                        backgroundColor: '#eaf8f8',\n                        borderRadius: 3,\n                        fontSize: 20,\n                        padding: 20,\n                      }}\n                      onChangeText={note => this.setState({ note })}\n                    />\n                  </View>\n                </View>\n\n          }\n\n          {/* Add Button */}\n          {this.props.request !== undefined && this.props.request.administered ?\n            <View\n              style={{ flex: 1, flexDirection: 'row', paddingVertical: 10, justifyContent: 'center', alignItems: 'center' }}\n            >\n              <Text style={{ fontSize: 30 }}>喂藥老師: {this.props.request.teacher_name}</Text>\n            </View>\n            :\n          <View\n            style={{ flex: 1, flexDirection: 'row', paddingVertical: 10 }}\n          >\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    // alignSelf: 'flex-start',\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.deleteRequestConfirm()}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>刪除</Text>\n                </TouchableHighlight>\n                : null\n              }              \n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              {access_mode === 'edit' ?\n                <TouchableHighlight\n                  disabled={show_editor !== ''}\n                  style={{\n                    height: '100%',\n                    padding: 10,\n                    justifyContent: 'center',\n                    backgroundColor: 'rgba(255,255,255,0.4)'\n                  }}\n                  onPress={() => this.setState({ access_mode: 'read'})}\n                >\n                  <Text style={{ fontSize: 17, textAlign: 'center' }}>取消編輯</Text>\n                </TouchableHighlight>\n                : null\n              }\n            </View>\n            <View style={{ flex: 1, marginHorizontal: 7 }}>\n              <TouchableHighlight\n                disabled={show_editor !== ''}\n                style={{\n                  height: '100%',\n                  padding: 10,\n                  justifyContent: 'center',\n                  backgroundColor: 'rgba(255,255,255,0.4)'\n                }}\n                onPress={() => this.handleClickConfirmButton()}\n              >\n                <Text style={{ fontSize: 25, textAlign: 'center' }}>\n                  {access_mode === 'read' ?\n                    '編輯'\n                    : access_mode === 'create' ?\n                      '新增'\n                      : access_mode === 'edit' ?\n                        '送出'\n                        : null\n                  }\n                </Text>\n              </TouchableHighlight>\n            </View>\n          </View>\n          }\n        </View>\n      </KeyboardAvoidingView>\n    )\n  }\n}","import React from 'react'\nimport {\n    View, TouchableOpacity, Text, Animated, ScrollView, Alert, SectionList, Dimensions, Platform\n} from 'react-native'\nimport MedicationRequestMain from './medicationrequestmain'\nimport { formatDate, beautifyTime, beautifyDate, beautifyMonthDate, get } from '../util'\nimport { bindActionCreators } from 'redux'\nimport { connect } from 'react-redux'\nimport { getMedRequestSuccess } from '../../redux/parent/actions/index'\nimport ENV from '../../variables'\n\n\nconst { width } = Dimensions.get('window')\n\nclass MedicationRequestPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            today: new Date(),\n            tomorrow: new Date(),\n            SlideInRight: new Animated.Value(0),\n            SlideInLeft: new Animated.Value(0),\n            total_height: 1,\n            total_width: 1,\n            height: 0,\n            width: 0,\n            left: 0,\n            top: 0,\n            requests: [],\n            day_of_week: ['天', '一', '二', '三', '四', '五', '六'],\n            selected_request_index: -1\n        }\n    }\n\n    componentDidMount() {\n        const { selected_request_index } = this.props.route.params\n        const { tomorrow } = this.state\n        tomorrow.setDate(tomorrow.getDate() + 1)\n        this.setState({\n            tomorrow\n        })\n        this.fetchMedicationRequest()\n        this.initializePage()\n        if (selected_request_index !== undefined) {\n            // console.log(selected_request_index)\n            this.selectRequest(selected_request_index)\n        }\n    }\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    async fetchMedicationRequest() {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        const {student_id, onGoBack} = this.props.route.params\n        const date = formatDate(new Date())\n        const response = await get(`/medicationrequest/student/${student_id}?date=${date}`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchMedicationRequest: ', response)\n        if (!success) {\n            alert('Sorry 取得托藥單時電腦出狀況了！請稍後再試試或請截圖和與工程師聯繫\\n\\n' + message)\n            return\n        }\n        this.denormalize(data)\n        this.setState({ requests: data })\n        onGoBack()\n    }\n\n    denormalize(object_array) {\n        for (var i = 0; i < object_array.length; i++) {\n            object_array[i].title = new Date(object_array[i].title)\n            for (var j = 0; j < object_array[i].data.length; j++) {\n                object_array[i].data[j].timestamp = new Date(object_array[i].data[j].timestamp)\n            }\n        }\n    }\n\n    initializePage() {\n        Animated.sequence([\n            Animated.timing(\n                this.state.SlideInRight, \n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ),\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            )\n        ]).start()\n        \n    }\n\n    viewRequest() {\n        this.setState({\n            SlideInLeft: new Animated.Value(0)\n        }, () => {\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ).start()\n        })\n    }\n\n    selectRequest(index) {\n        const access_mode = this.refs['main'].fetchAccessMode()\n        if (access_mode === 'edit') {\n            alert('還在編輯中喔請完成再離開 多謝')\n            return\n        }\n        this.setState({ selected_request_index: index })\n    }\n\n    async onCreateRequestSuccess(request_id) {\n        await this.fetchMedicationRequest()\n        const { requests } = this.state\n        this.get_todays_requests(requests)\n        let new_request_index = -1\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id === request_id) {\n                new_request_index = i\n                break\n            }\n        }\n        this.setState({\n            selected_request_index: new_request_index\n        })\n    }\n\n    get_todays_requests(object_array) {\n        let med_requests = []\n        for (var i = 0; i < object_array.length; i++) {\n            const timestamp = new Date(object_array[i].timestamp)\n            if (timestamp.toDateString() === (new Date).toDateString()) {\n                object_array[i].timestamp = timestamp\n                med_requests.push(object_array[i])\n            } else break\n        }\n        this.props.getMedRequestSuccess(med_requests)\n    }\n\n    onDeleteRequestSuccess(deleted_request_id) {\n        const { requests } = this.state\n        const updated_requests = []\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id !== deleted_request_id) {\n                updated_requests.push(requests[i])\n            }\n        }\n        this.setState({\n            requests: updated_requests,\n            selected_request_index: 0\n        })\n        this.get_todays_requests(updated_requests)\n    }\n\n    deleteRequestConfirm(request_id) {\n        const confirmed = confirm('確定要刪除？')\n        if (confirmed) {\n            this.deleteRequest(request_id)\n        }\n    }\n\n    deleteRequest(request_id) {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        const { class_id } = this.props.route.params\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request_id}`, {\n          method: 'DELETE',\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            class_id\n          })\n        })\n          .then((res) => res.json())\n          .then((resJson) => {\n            const { statusCode, message, data } = resJson\n            if (statusCode > 200 || message === 'Internal Server Error') {\n              alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n              return\n            }\n            this.fetchMedicationRequest()\n          })\n          .catch(err => {\n            alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n          })\n      }\n\n    render () {\n        const { SlideInRight, SlideInLeft, total_width, requests, today, tomorrow, day_of_week, selected_request_index } = this.state\n        const { student_id, class_id } = this.props.route.params\n        // const selected_request = requests[selected_request_index]\n        return (\n            <View\n                style={{\n                    flex: 1,\n                    paddingHorizontal: 20\n                }}\n            >\n                {requests.length === 0 && \n                    <View style={{ padding: 20, justifyContent: 'center', alignItems: 'center' }}>\n                        <Text style={{ fontSize: 50 }}>無托藥單</Text>\n                    </View>\n                }\n                <SectionList\n                    sections={requests}\n                    keyExtractor={(item, index) => item + index}\n                    renderItem={({ item, index, section }) => \n                        <View \n                            style={{ \n                                width: '100%', \n                                aspectRatio: 5, \n                                flexDirection: 'row', \n                                marginVertical: 7, \n                                justifyContent: 'space-between', \n                                alignItems: 'center'\n                            }}\n                        >\n                            <TouchableOpacity \n                                style={{ \n                                    width:'65%',\n                                    height: '100%',\n                                    padding: 20, \n                                    backgroundColor: '#368cbf',\n                                    borderRadius: 40,\n                                    justifyContent: 'center',\n                                    alignItems: 'center'\n                                }}\n                                onClick={() => this.props.navigation.push('AddMedicationRequestPage', {\n                                    onGoBack: () => this.fetchMedicationRequest(),\n                                    student_id,\n                                    class_id,\n                                    index,\n                                    data: section.data\n                                })}\n                            >\n                                <Text style={{ fontSize: 30 }}>{beautifyTime(item.timestamp)}</Text>\n                            </TouchableOpacity>\n                            <TouchableOpacity\n                                style={{ \n                                    width:'30%', \n                                    height: '100%',\n                                    padding: 20, \n                                    backgroundColor: '#fa625f', \n                                    justifyContent: 'center',\n                                    borderRadius: 40\n                                }}\n                                onClick={() => this.deleteRequestConfirm(item.id)}\n                            >\n                                <Text style={{ fontSize: width * 0.07, textAlign: 'center' }}>\n                                    刪除\n                                </Text>\n                            </TouchableOpacity>\n                        </View>\n                    }\n                    renderSectionHeader={({ section: { title } }) => (\n                        <View\n                            style={{ \n                                width: '100%', \n                                backgroundColor: 'rgba(0,0,0,0.5)', \n                                flexDirection: 'row', \n                                alignItems: 'center', \n                                justifyContent: 'space-between',\n                                padding: this.isIOS() ? 20 : 12,\n                                marginTop: 15,\n                                marginBottom: 7,\n                                borderRadius: 40\n                            }}\n                        >\n                            <Text style={{ fontSize: 30, color: 'white' }}>{`${beautifyMonthDate(title)}`}</Text>\n                            <Text style={{ fontSize: 30, color: 'white' }}>{`星期${day_of_week[title.getDay()]}`}</Text>\n                        </View>\n                    )}\n                />\n\n                <View style={{ width: '100%', paddingVertical: 10, justifyContent: 'center', backgroundColor: 'transparent' }}>\n                    <TouchableOpacity\n                        style={{ backgroundColor: '#f4d41f', padding: this.isIOS() ? 20 : 12, justifyContent: 'center', borderRadius: 40 }}\n                        onClick={() => this.props.navigation.push('AddMedicationRequestPage', {\n                            onGoBack: () => this.fetchMedicationRequest(),\n                            student_id, \n                            class_id,\n                            index: -1,\n                            data: null\n                        })}\n                    >\n                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>\n                            新增\n                        </Text>\n                    </TouchableOpacity>\n                </View>\n\n                \n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        ...bindActionCreators({getMedRequestSuccess}, dispatch)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MedicationRequestPage)","import React from 'react'\nimport { \n    View, \n    Text,\n    Platform,\n    StyleSheet,\n    TouchableOpacity,\n    TextInput,\n    Dimensions } from 'react-native'\nimport { formatDate, beautifyMonthDate } from '../util'\nimport PickerComponent from '../picker'\nimport TimeModal from './timemodal'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { width, height } = Dimensions.get('window')\n\nconst options = [\n    { value: \"感冒\", label: \"感冒\" },\n    { value: '流感', label: '流感' },\n    { value: '腸病毒', label: '腸病毒' },\n    { value: '水痘', label: '水痘' },\n    { value: '腸胃炎', label: '腸胃炎' },\n    { value: '其他', label: '其他' },\n    { value: 'Cancel', label: '返回' }\n]\n\nclass AbsenceExcuse extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            max_date: (new Date()).setDate((new Date()).getDate() + 30),\n            cached_date: null,\n            startDate: new Date(),\n            endDate: new Date(),\n            show_start_date_picker: false,\n            show_end_date_picker: false,\n            showSelect: false,\n            childIsSick: 0,\n            excuse_type: 'none-medical',\n            editing_other_option: false,\n            days: ['天', '一', '二', '三', '四', '五', '六'],\n            months: ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十', '十一', '十二'],\n            access_mode: 'create',\n            note: '',\n            absence_time: 'all_day',\n            scrollHeight: '100%',\n            request_id: ''\n        }\n        this.setStartDate = this.setStartDate.bind(this)\n        this.setEndDate = this.setEndDate.bind(this)\n        this.setChildNotSick = this.setChildNotSick.bind(this)\n        this.setChildSick = this.setChildSick.bind(this)\n        this.onValueChange = this.onValueChange.bind(this)\n        this.sendAbsenceNote = this.sendAbsenceNote.bind(this)\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.request !== this.props.request) {\n            const { request } = this.props\n            if (!request) {\n                this.setState({\n                    startDate: new Date(),\n                    endDate: new Date(),\n                    childIsSick: 0,\n                    excuse_type: 'none-medical',\n                    note: '',\n                    absence_time: 'all_day',\n                    access_mode: 'create',\n                    cached_date: null,\n                    scrollHeight: '100%',\n                    request_id: ''\n                })\n                return\n            }\n            const { id, date, excuse_type, note, absence_time } = request\n            this.setState({\n                startDate: date,\n                endDate: null,\n                childIsSick: excuse_type === 'none-medical' ? 0 : 1,\n                excuse_type,\n                note,\n                absence_time,\n                access_mode: 'read',\n                cached_date: null,\n                request_id: id\n            })\n        }\n    }\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    fetchAccessMode() {\n        return this.state.access_mode\n    }\n\n    showSelect() {\n        this.setState({ childIsSick: 1, showSelect: true })\n    }\n\n    setChildSick () {\n        this.setState({ childIsSick: 1 })\n    }\n    \n    setChildNotSick () {\n        const { access_mode } = this.state\n        if (access_mode === 'read') return\n        this.setState({ childIsSick: 0, excuse_type: 'none-medical' })\n    }\n\n    handleSelectStatus = (excuse_type) => {\n        if (excuse_type === 'Cancel') {\n            this.setState({\n                showSelect: false\n            })\n        } else if (excuse_type === '其他') {\n            this.setState({\n                editing_other_option: true,\n                excuse_type: '其他',\n                showSelect: false\n            })\n        } else {\n            this.setState({\n                excuse_type,\n                showSelect: false\n            })\n        }\n    }\n\n    editorOnBlur() {\n        const { excuse_type } = this.state\n        this.setState({\n            editing_other_option: false,\n            childIsSick: excuse_type === '' ? 0 : 1,\n            excuse_type: excuse_type === '' ? 'none-medical' : excuse_type\n        })\n    }\n\n    setStartDate(date) {\n        if (Platform.OS === 'ios') {\n            this.iosSetStartDate(date)\n        } else { //android\n            this.androidSetStartDate(date)\n        }\n    }\n\n    iosSetStartDate(date) {\n        const { endDate } = this.state\n        if (this.state.access_mode === 'edit') {\n            const { cached_date, startDate } = this.state\n            this.setState({\n                cached_date: cached_date === null ? startDate : cached_date,\n                startDate: date\n            })\n        } else {\n            this.setState({\n                startDate: date,\n                endDate: date < endDate ? endDate : date\n            })\n        }\n    }\n\n    androidSetStartDate(date) {\n        if (date !== undefined) {\n            const { endDate } = this.state\n            if (this.state.access_mode === 'edit') {\n                const { cached_date, startDate } = this.state\n                const { id } = this.props.request\n                this.setState({\n                    cached_date: cached_date === null ? startDate : cached_date,\n                    startDate: date,\n                    show_start_date_picker: false\n                })\n                this.props.checkUniqueStudentDate(id, date)\n            } else { // create\n                this.setState({\n                    startDate: date,\n                    endDate: date < endDate ? endDate : date,\n                    show_start_date_picker: false\n                })\n            }\n        } else {\n            this.setState({ show_start_date_picker: false })\n        }\n    }\n\n    onEndEditingStartDate() {\n        const {startDate } = this.state\n        if (this.state.access_mode === 'edit') {\n            const { id } = this.props.request\n            this.props.checkUniqueStudentDate(id, startDate)\n        }\n\n        this.setState({ show_start_date_picker: false })\n    }\n\n    duplicateDateFound() {\n        const { cached_date } = this.state\n        this.setState({\n            startDate: cached_date,\n            cached_date: null\n        })\n    }\n\n    setEndDate(date) {\n        if (Platform.OS === 'ios') {\n            this.iosSetEndDate(date)\n        } else { //android\n            this.androidSetEndDate(date)\n        }\n    }\n\n    iosSetEndDate (date) {\n        const { startDate } = this.state\n        this.setState({\n            startDate: date < startDate ? date : startDate,\n            endDate: date\n        })\n    }\n\n    androidSetEndDate(date) {\n        if (date !== undefined) {\n            const { startDate } = this.state\n            this.setState({\n                startDate: date < startDate ? date : startDate,\n                endDate: date,\n                show_end_date_picker: false\n            })\n        } else {\n            this.setState({ show_end_date_picker: false })\n        }\n    }\n\n    getDayDifference() {\n        const { startDate, endDate } = this.state\n        const oneDay = 24 * 60 * 60 * 1000;\n        return Math.round(Math.abs((endDate - startDate) / (oneDay))) + 1\n    }\n\n    onValueChange (value) {\n        this.setState({ excuse_type: value })\n    }\n\n    setScrollHeight(scrollHeight) {\n        this.setState({ scrollHeight })\n    }\n\n    handleClickConfirmButton() {\n        const { access_mode } = this.state\n        if (access_mode === 'read') {\n            this.setState({\n                access_mode: 'edit'\n            })\n        } else if (access_mode === 'create') {\n            this.sendAbsenceNote()\n        } else if (access_mode === 'edit') {\n            const { id } = this.props.request\n            this.editAbsenceNote(id)\n        }\n    }\n\n    sendAbsenceNote() {\n        const { excuse_type, note, absence_time } = this.state\n        const { student_id, class_id, school_id, isConnected } = this.props\n        const startDate = formatDate(this.state.startDate)\n        const endDate = formatDate(this.state.endDate)\n        const request_body = {\n            student_id,\n            class_id,\n            school_id,\n            startDate,\n            endDate,\n            excuse_type,\n            note,\n            absence_time\n        }\n\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！ 請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.onCreateRequestSuccess(data.id)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！ 請截圖和與工程師聯繫: error occurred when sending absence request')\n            })\n    }\n\n    editAbsenceNote(request_id) {\n        const { excuse_type, note, absence_time } = this.state\n        const { class_id } = this.props\n        const date = formatDate(this.state.startDate)\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'PUT',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id,\n                excuse_type,\n                note,\n                date,\n                class_id,\n                absence_time\n            })\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.onCreateRequestSuccess(request_id)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when editing absence request')\n            })\n    }\n\n    deleteRequestConfirm() {\n        const confirmed = confirm('確定要刪除？')\n        if (confirmed) {\n            this.deleteRequest()\n        }\n    }\n\n    deleteRequest() {\n        const { id } = this.props.request\n        fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse`, {\n            method: 'DELETE',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                request_id: id\n            })\n        })\n            .then((res) => res.json())\n            .then((resJson) => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.props.onDeleteRequestSuccess(id)\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting absence request')\n            })\n    }\n\n    render() {\n        const {\n            max_date,\n            access_mode,\n            startDate,\n            endDate,\n            excuse_type,\n            editing_other_option,\n            note,\n            show_start_date_picker,\n            show_end_date_picker,\n            showSelect,\n            absence_time,\n            scrollHeight,\n            request_id } = this.state\n        if (show_start_date_picker) {\n            return (\n                <View style={{ height, marginTop: -120 }}>\n                    <TimeModal\n                        start_date={startDate}\n                        datetime_type={'date'}\n                        hideModal={() => this.setState({ show_start_date_picker: false })}\n                        selectDatetimeConfirm={(date) => this.setStartDate(date)}\n                        minDatetime={new Date()}\n                        maxDatetime={max_date}\n                        paddingVertical={100}\n                    />\n                </View>\n            )\n        }\n        if (show_end_date_picker) {\n            return (\n                <View style={{ height, marginTop: -120 }}>\n                    <TimeModal\n                        start_date={endDate}\n                        datetime_type={'date'}\n                        hideModal={() => this.setState({ show_end_date_picker: false })}\n                        selectDatetimeConfirm={(date) => this.setEndDate(date)}\n                        minDatetime={new Date()}\n                        maxDatetime={max_date}\n                        paddingVertical={100}\n                    />\n                </View>\n            )\n        }\n        if (showSelect) {\n            return (\n                <View style={{ padding: 30, height: '100%', alignItems: 'center' }}>\n                    {options.map((option, index) => {\n                        const { label, value } = option\n                        return (\n                            <TouchableOpacity\n                                key={index}\n                                style={{ width: '50%', padding: 15, backgroundColor: 'white', borderWidth: 1, borderColor: 'lightgrey' }}\n                                onClick={() => this.handleSelectStatus(value)}\n                            >\n                                <Text style={{ fontSize: 25 }}>{label}</Text>\n                            </TouchableOpacity>\n                        )\n                    })}\n                </View>\n            )\n        }\n        return (\n                    <View style={{ paddingHorizontal: 30, paddingVertical: 30, height: '100%' }}>\n\n                        <View\n                            style={{\n                                // flex: 1,\n                                flexDirection: 'row',\n                                // justifyContent: 'space-evenly',\n                                // alignItems: 'center',\n                            }}\n                        >\n                            <TouchableOpacity\n                                disabled={access_mode === 'read'}\n                                style={{\n                                    flex: 1,\n                                    padding: 15,\n                                    // height: '90%',\n                                    justifyContent: 'center',\n                                    backgroundColor: this.state.childIsSick === 0 ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                    borderTopLeftRadius: 30,\n                                    borderBottomLeftRadius: 30\n                                }}\n                                underlayColor='#368cbf'\n                                onClick={this.setChildNotSick}>\n                                <Text style={{ fontSize: 25, color: this.state.childIsSick === 0 ? 'white' : 'black', textAlign: 'center' }}>事假</Text>\n                            </TouchableOpacity>\n\n                            {editing_other_option ? \n                                <View\n                                    style={{\n                                        flex: 1,\n                                        padding: 15,\n                                        // height: '90%',\n                                        borderTopRightRadius: 30,\n                                        borderBottomRightRadius: 30,\n                                        justifyContent: 'center',\n                                        backgroundColor: this.state.childIsSick ? '#368cbf' : 'rgba(0,0,0,0.1)'\n                                    }}\n                                >\n                                    <TextInput \n                                        autoFocus={true}\n                                        selectTextOnFocus={true}\n                                        style={{ fontSize: 25, color: this.state.childIsSick ? 'white' : 'black', textAlign: 'center', paddingVertical: -1 }}\n                                        value={excuse_type}\n                                        onChangeText={excuse_type => this.setState({ excuse_type })}\n                                        onBlur={() => this.editorOnBlur()}\n                                    />\n                                </View>\n                                :\n                                <PickerComponent\n                                    style={{\n                                        flex: 1,\n                                        padding: 15,\n                                        // height: '90%',\n                                        borderTopRightRadius: 30,\n                                        borderBottomRightRadius: 30,\n                                        justifyContent: 'center',\n                                        backgroundColor: this.state.childIsSick === 0 ? 'rgba(0,0,0,0.1)' : '#368cbf'\n                                    }}\n                                    disabled={access_mode === 'read'}\n                                    textStyle={{ fontSize: 25, color: this.state.childIsSick ? 'white' : 'black', textAlign: 'center' }}\n                                    selectedValue={excuse_type === 'none-medical' ? '病假' : excuse_type}\n                                    showSelect={() => this.showSelect()}\n                                    // options={[\n                                    //     \"感冒\",\n                                    //     \"流感\",\n                                    //     \"腸病毒\",\n                                    //     \"水痘\",\n                                    //     \"腸胃炎\",\n                                    //     \"其他\",\n                                    //     \"Cancel\"\n                                    // ]}\n                                    handleOnClick={this.setChildSick}\n                                    handleSelectValue={(excuse_type) => this.handleSelectStatus(excuse_type)}\n                                />\n                            }\n                        </View>\n                        <View style={{ width: '100%' }}>\n                            {endDate === null ?\n                                <View\n                                    style={{\n                                        paddingVertical: 20,\n                                        width: '70%',\n                                        alignSelf: 'center'\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        disabled={access_mode === 'read'}\n                                        style={{ backgroundColor: 'rgba(0,0,0,0.4)' }}\n                                        onClick={() => {\n                                            if (access_mode === 'read') return\n                                            this.setState({ show_start_date_picker: true })\n                                        }}\n                                    >\n                                        <View style={{ padding: 15, justifyContent: 'center' }}>\n                                            <View style={{}}>\n                                                <Text style={{ color: 'white', fontSize: width*0.12, fontWeight: 'bold' }}>\n                                                    {startDate.getFullYear()}\n                                                </Text>\n                                            </View>\n                                            <View style={{}}>\n                                                <Text style={{ color: 'white', fontSize: width*0.12, fontWeight: 'bold' }}>\n                                                    {startDate.getMonth() + 1}/{startDate.getDate()}\n                                                </Text>\n                                            </View>\n                                            <View style={{}}>\n                                                <Text style={{ fontSize: width*0.12, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{this.state.days[startDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </View>\n                                    </TouchableOpacity>\n                                </View>\n                                :\n                                <View\n                                    style={{\n                                        // flexDirection: 'row',\n                                        alignItems: 'center',\n                                        paddingVertical: 15\n                                    }}\n                                >\n                                    <View style={{ width: '100%' }}>\n                                        <Text style={{ color: 'rgba(0,0,0,0.4)', fontSize: width*0.1 }}>開始</Text>\n                                        <TouchableOpacity\n                                            style={{ backgroundColor: 'rgba(0,0,0,0.4)', padding: 15 }}\n                                            onClick={() => this.setState({ show_start_date_picker: true })}\n                                        >\n                                            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                                                <Text style={{ color: 'white', fontSize: width*0.09, fontWeight: 'bold' }}>\n                                                    {beautifyMonthDate(startDate)}\n                                                </Text>\n                                                <Text style={{ fontSize: width*0.09, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{this.state.days[startDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                    </View>\n\n                                    <View style={{ width: '100%', alignItems: 'center', justifyContent: 'center', padding: 20 }}>\n                                        <Text style={{ fontSize: 25 }}>\n                                            總計 {this.getDayDifference()} 天\n                                        </Text>\n                                    </View>\n\n                                    <View style={{width: '100%' }}>\n                                        <TouchableOpacity\n                                            style={{ backgroundColor: 'rgba(0,0,0,0.4)', padding: 15 }}\n                                            onClick={() => this.setState({ show_end_date_picker: true })}\n                                        >\n                                            <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                                                <Text style={{ color: 'white', fontSize: width*0.09, fontWeight: 'bold' }}>\n                                                    {beautifyMonthDate(endDate)}\n                                                </Text>\n                                                <Text style={{ fontSize: width*0.09, color: 'white', fontWeight: 'bold' }}>\n                                                    星期{this.state.days[endDate.getDay()]}\n                                                </Text>\n                                            </View>\n                                        </TouchableOpacity>\n                                        <Text style={{ color: 'rgba(0,0,0,0.4)', fontSize: width*0.1, textAlign: 'right' }}>結束</Text>\n                                    </View>\n                                </View>\n                            }\n\n                            {/* NOTE */}\n                            <View\n                                style={{ flex: 1,width: '100%', alignItems: 'center' }}\n                            >\n                                <TextInput\n                                    key={request_id}\n                                    editable={access_mode !== 'read'}\n                                    placeholder='備註'\n                                    placeholderTextColor='grey'\n                                    multiline\n                                    // textAlignVertical='center'\n                                    scrollEnabled={false}\n                                    // blurOnSubmit={true}\n                                    value={note}\n                                    style={{\n                                        width: '100%',\n                                        height: scrollHeight,\n                                        backgroundColor: '#eaf8f8',\n                                        borderRadius: 3,\n                                        fontSize: 25,\n                                        paddingTop: 20,\n                                        paddingBottom: 20,\n                                        paddingHorizontal: 20,\n                                        textAlignVertical: 'center'\n                                    }}\n                                    onChangeText={note => this.setState({ note })}\n                                    onChange={(e) => this.setScrollHeight(e.target.scrollHeight)}\n                                    onLayout={(event) => {\n                                        const { scrollHeight } = event.nativeEvent.target\n                                        this.setState({\n                                            scrollHeight\n                                        })\n                                    }}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    flex: 1,\n                                    width: '100%',\n                                    alignItems: 'center',\n                                    flexDirection: 'row',\n                                    justifyContent: 'space-between'\n                                }}\n                            >\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 15,\n                                        justifyContent: 'center'\n                                    }}\n                                    underlayColor='transparent'\n                                    onClick={() => {\n                                        if (access_mode === 'read') return\n                                        this.setState({ absence_time: 'all_day' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'all_day' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'all_day' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        全天\n                                    </Text>\n                                </TouchableOpacity>\n\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 10,\n                                        justifyContent: 'center',\n                                        alignItems: 'center'\n                                    }}\n                                    underlayColor='transparent'\n                                    onClick={() => {\n                                        if (access_mode === 'read') return\n                                        this.setState({ absence_time: 'morning' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'morning' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'morning' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        早上\n                                    </Text>\n                                </TouchableOpacity>\n\n                                <TouchableOpacity\n                                    disabled={access_mode === 'read'}\n                                    style={{\n                                        flex: 1,\n                                        paddingVertical: 10,\n                                        justifyContent: 'center',\n                                        alignItems: 'flex-end'\n                                    }}\n                                    underlayColor='transparent'\n                                    onClick={() => {\n                                        if (access_mode === 'read') return\n                                        this.setState({ absence_time: 'evening' })\n                                    }}\n                                >\n                                    <Text \n                                        style={{\n                                            width: '90%',\n                                            fontSize: 25,\n                                            backgroundColor: absence_time === 'evening' ? '#368cbf' : 'rgba(0,0,0,0.1)',\n                                            color: absence_time === 'evening' ? 'white' : 'black',\n                                            padding: 15,\n                                            textAlign: 'center'\n                                        }}\n                                    >\n                                        下午\n                                    </Text>\n                                </TouchableOpacity>\n                            </View>\n                            \n                            <View\n                                style={{\n                                    marginVertical: 20,\n                                    width: '100%',\n                                    flexDirection: 'row',\n                                    // padding: 10,\n                                    alignItems: 'center',\n                                    justifyContent: 'center'\n                                }}\n                            >\n                                {access_mode !== 'edit' ?\n                                    <TouchableOpacity\n                                        style={{\n                                            // height: '80%',\n                                            width: '100%',\n                                            padding: 20,\n                                            justifyContent: 'center',\n                                            backgroundColor: 'rgba(0,0,0,0.1)'\n                                        }}\n                                        onClick={() => this.handleClickConfirmButton()}\n                                    >\n                                        <Text style={{ fontSize: 25, textAlign: 'center' }}>\n                                            {access_mode === 'read' ?\n                                                '編輯'\n                                                : access_mode === 'create' ?\n                                                    '新增'\n                                                    : null\n                                            }\n                                        </Text>\n                                    </TouchableOpacity>\n                                    : access_mode === 'edit' ?\n                                        <View style={{ width: '100%', flex: 1, flexDirection: 'row' }}>\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: '#fa625f'\n                                                }}\n                                                onClick={() => this.deleteRequestConfirm()}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>刪除</Text>\n                                            </TouchableOpacity>\n\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: 'rgba(0,0,0,0.1)'\n                                                }}\n                                                onClick={() => this.setState({ access_mode: 'read'})}\n                                            >\n                                                <Text style={{ fontSize: 20, textAlign: 'center' }}>取消編輯</Text>\n                                            </TouchableOpacity>\n\n                                            <TouchableOpacity\n                                                style={{\n                                                    // height: '80%',\n                                                    flex: 1,\n                                                    paddingVertical: 20,\n                                                    paddingHorizontal: 10,\n                                                    justifyContent: 'center',\n                                                    backgroundColor: '#00c07f'\n                                                }}\n                                                onClick={() => this.handleClickConfirmButton()}\n                                            >\n                                                <Text style={{ fontSize: 25, textAlign: 'center' }}>送出</Text>\n                                            </TouchableOpacity>\n                                        </View>\n                                        : null\n                                }\n                            </View>\n                        </View>\n                    </View>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    dateContainer: {\n        flex: 1,\n        width: '35%',\n        justifyContent: 'center'\n    }\n})\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps, null, null, { forwardRef: true }) (AbsenceExcuse)","import React from 'react'\nimport {\n    View, TouchableOpacity, Text, Animated, ScrollView, Alert, KeyboardAvoidingView, Platform, Dimensions\n} from 'react-native'\nimport AbsenceExcuse from './absenceexcuse'\nimport { formatDate } from '../util'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { height } = Dimensions.get('window')\n\nclass AbsenceExcusePage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            todays_date: formatDate(new Date()),\n            SlideInRight: new Animated.Value(0),\n            SlideInLeft: new Animated.Value(0),\n            total_height: 1,\n            total_width: 1,\n            height: 0,\n            width: 0,\n            left: 0,\n            top: 0,\n            requests: [],\n            day_of_week: ['天', '一', '二', '三', '四', '五', '六'],\n            selected_request_index: -1\n        }\n    }\n\n    componentDidMount() {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        this.fetchAbsenceExcuse()\n        this.initializePage()\n    }\n\n    isIOS() {\n        return Platform.OS === 'ios'\n    }\n\n    async fetchAbsenceExcuse() {\n        const { student_id } = this.props.route.params\n        const date = formatDate(new Date())\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/absence-excuse/student/${student_id}?date=${date}`\n        await fetch(query, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message, data } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n                    return\n                }\n                this.denormalize(data)\n                this.setState({ requests: data })\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when fetching absence request')\n            })\n    }\n\n    denormalize(data) {\n        for (var i = 0; i < data.length; i++) {\n            data[i].date = new Date(data[i].date)\n        }\n    }\n\n    initializePage() {\n        Animated.sequence([\n            Animated.timing(\n                this.state.SlideInRight, \n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            ),\n            Animated.timing(\n                this.state.SlideInLeft,\n                {\n                    toValue: 1,\n                    duration: 1000,\n                    useNativeDriver: true\n                }\n            )\n        ]).start()\n        \n    }\n\n    selectRequest(index) {\n        const access_mode = this.refs['main'].fetchAccessMode()\n        if (access_mode === 'edit') {\n            alert('還在編輯中喔請完成再離開 多謝')\n            return\n        }\n        this.setState({ selected_request_index: index })\n    }\n\n    async onCreateRequestSuccess(request_id) {\n        await this.fetchAbsenceExcuse()\n        const { requests } = this.state\n        let new_request_index = -1\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id === request_id) {\n                new_request_index = i\n                break\n            }\n        }\n        this.setState({\n            selected_request_index: new_request_index\n        })\n    }\n\n    onDeleteRequestSuccess(deleted_request_id) {\n        const { requests } = this.state\n        const updated_requests = []\n        for (var i = 0; i < requests.length; i++) {\n            if (requests[i].id !== deleted_request_id) {\n                updated_requests.push(requests[i])\n            }\n        }\n        this.setState({\n            requests: updated_requests,\n            selected_request_index: 0\n        })\n    }\n\n    checkUniqueStudentDate(id, date) {\n        const { requests } = this.state\n        var duplicateDateFound = false\n        for (var i = 0; i < requests.length; i++) {\n            if (id !== requests[i].id && formatDate(date) === formatDate(requests[i].date)) {\n                duplicateDateFound = true\n                break\n            }\n        }\n\n        if (!duplicateDateFound) {\n            return\n        }\n\n        alert('已經在這個日期請過假了')\n\n        this.refs['main'].duplicateDateFound()\n    }\n\n    render () {\n        const { SlideInRight, SlideInLeft, total_width, requests, todays_date, day_of_week, selected_request_index } = this.state\n        const { student_id, class_id, school_id } = this.props.route.params\n        const selected_request = requests[selected_request_index]\n        return (\n            <KeyboardAvoidingView\n                style={{flex: 1, width: '100%', alignItems: 'center' }}\n                behavior={'padding'}\n                keyboardVerticalOffset={85}\n                enabled\n            >\n                <ScrollView style={{ width: '100%'}}>\n                <View style={{ width: '100%' }}>\n                    <ScrollView\n                        horizontal\n                        showsHorizontalScrollIndicator={false}\n                    >\n                        {requests.map((request, index) => {\n                            const day = day_of_week[request.date.getDay()]\n                            const date = `${request.date.getMonth()+1}/${request.date.getDate()}`\n                            return (\n                                <Animated.View\n                                    key={request.id}\n                                    style={{\n                                        padding: 10,\n                                        transform: [\n                                            {\n                                                translateX: SlideInRight.interpolate({\n                                                    inputRange: [0,1],\n                                                    outputRange: [total_width, 0]\n                                                })\n                                            }\n                                        ]\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        style={{\n                                            height: 100,\n                                            width: 100,\n                                            padding: 10,\n                                            backgroundColor: selected_request_index === index ? '#368cbf' : 'rgba(0,0,0,0.2)',\n                                            borderRadius: 10\n                                        }}\n                                        underlayColor='#368cbf'\n                                        onClick={() => this.selectRequest(index)}\n                                    >\n                                        <View>\n                                            {formatDate(request.date) === todays_date ?\n                                                <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>今天</Text>\n                                                : <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>星期{day}</Text>\n                                            }\n                                            <Text style={{ fontSize: 20, color: selected_request_index === index ? 'white' : 'black' }}>{date}</Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                </Animated.View>\n                            )\n                        })}\n                        \n                        <Animated.View\n                            style={{\n                                padding: 10,\n                                transform: [\n                                    {\n                                        translateX: SlideInRight.interpolate({\n                                            inputRange: [0,1],\n                                            outputRange: [total_width, 0]\n                                        })\n                                    }\n                                ]\n                            }}\n                        >\n                            <TouchableOpacity\n                                style={{\n                                    height: 100,\n                                    width: 100,\n                                    padding: 10,\n                                    backgroundColor: selected_request_index === -1 ? '#368cbf' : 'rgba(0,0,0,0.2)',\n                                    borderRadius: 10\n                                }}\n                                underlayColor='#ff8944'\n                                ref={'welrnf'}\n                                onClick={() => this.selectRequest(-1)}\n                            >\n                                <View>\n                                    <Text style={{ fontSize: 20, color: selected_request_index === -1 ? 'white' : 'black' }}>新增</Text>\n                                </View>\n                            </TouchableOpacity>\n                        </Animated.View>\n                    </ScrollView>\n                </View>\n\n                <View\n                    style={{\n                        width: '100%',\n                        borderRadius: 40,\n                        backgroundColor: '#b5e9e9'\n                    }}  \n                >\n                    <AbsenceExcuse\n                        ref='main'\n                        student_id={student_id}\n                        class_id={class_id}\n                        school_id={school_id}\n                        request={selected_request}\n                        onCreateRequestSuccess={(request_id) => this.onCreateRequestSuccess(request_id)}\n                        onDeleteRequestSuccess={(deleted_request_id) => this.onDeleteRequestSuccess(deleted_request_id)}\n                        checkUniqueStudentDate={(id, date) => this.checkUniqueStudentDate(id, date)}\n                    />\n                </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (AbsenceExcusePage)","\nimport React from 'react'\nimport { View, Text, TouchableOpacity, TextInput, KeyboardAvoidingView, ScrollView, Alert, Dimensions } from 'react-native'\nimport { formatDate, formatTime } from '../util'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { width, height } = Dimensions.get('window')\n\nclass PickupRequest extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            time: null,\n            provided_times: ['5', '10', '15', '20', '25'],\n            colors: ['#ffe1d0', '#ffddb7', '#fff1b5', '#dcf3d0', '#b5e9e9'],\n            hightlighted_colors: ['#fa625f', '#ff8944', '#f4d41f', '#00c07f', '#368cbf'],\n            choose_other_option: false,\n            total_height: height - 55,\n            total_width: width\n        }\n        this.sendRequest = this.sendRequest.bind(this)\n    }\n\n    onBlur() {\n        const { time, choose_other_option, provided_times } = this.state\n        if (choose_other_option && (time === '' || provided_times.includes(time))) {\n            this.setState({ choose_other_option: false })\n        } \n    }\n\n    sendRequest() {\n        const { isConnected } = this.props\n        if (!isConnected) {\n            alert('網路連不到! 請稍後再試試看')\n            return\n        }\n        const { child_id, school_id } = this.props.route.params\n        const query = `https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/attendance/pickup-request`\n        const student_id = child_id\n        const arrival_time = new Date()\n        arrival_time.setMinutes(arrival_time.getMinutes() + parseInt(this.state.time))\n        const request_body = {\n            school_id,\n            student_id,\n            arrival_time: formatDate(arrival_time) + ' ' + formatTime(arrival_time)\n        }\n        fetch(query, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(request_body)\n        })\n            .then(res => res.json())\n            .then(resJson => {\n                const { statusCode, message } = resJson\n                if (statusCode > 200 || message === 'Internal server error') {\n                    alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫 ' + message)\n                    return\n                }\n                this.props.navigation.goBack()\n            })\n            .catch(err => {\n                alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when sending pickup request')\n            })\n    }\n\n    render() {\n        const { time, provided_times, colors, hightlighted_colors, choose_other_option, total_height, total_width } = this.state\n        return (\n            <KeyboardAvoidingView\n                style={{ flex: 1 }}\n                behavior=\"padding\"\n                keyboardVerticalOffset={100}\n                enabled\n            >\n                <ScrollView>\n                    <View\n                        style={{\n                            flex: 3,\n                            flexDirection: 'row',\n                            flexWrap: 'wrap',\n                            alignItems: 'center',\n                            justifyContent: 'center'\n                        }}\n                    >\n                        {provided_times.map((minute, index) => {\n                            return (\n                                <View\n                                    key={index}\n                                    style={{\n                                        width: '50%',\n                                        height: total_height*0.28,\n                                        // aspectRatio,\n                                        backgroundColor: time == minute ? hightlighted_colors[index] : colors[index],\n                                        alignItems: 'center',\n                                        justifyContent: 'center'\n                                    }}\n                                >\n                                    <TouchableOpacity\n                                        style={{\n                                            width: '90%',\n                                            height: '90%',\n                                            borderWidth: time == minute ? 5 : 0,\n                                            borderColor: 'white',\n                                            backgroundColor: time == minute ? hightlighted_colors[index] : colors[index]\n                                        }}\n                                        underlayColor={hightlighted_colors[index]}\n                                        onClick={() => this.setState({ time: minute, choose_other_option: false })}\n                                    >\n                                        <View style={{ flex:1, flexDirection:'row', justifyContent: 'center', alignItems: 'center' }}>\n                                            <Text style={{ fontSize: total_width*0.20 }}>{minute}</Text>\n                                            <Text style={{ fontSize: total_width*0.09 }}>分鐘</Text>\n                                        </View>\n                                    </TouchableOpacity>\n                                </View>\n                            )\n                        })}\n                        \n                        \n                        <View\n                            style={{\n                                width: '50%',\n                                height: total_height*0.28,\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                backgroundColor: choose_other_option ? 'black' : 'white'\n                            }}\n                        >\n                            <TouchableOpacity\n                                    style={{\n                                        flexDirection: 'row',\n                                        width: '90%',\n                                        height: '90%',\n                                        backgroundColor: choose_other_option ? 'black' : 'white',\n                                        borderWidth: choose_other_option ? 5 : 0,\n                                        borderColor: 'white',\n                                        alignItems: 'center',\n                                        justifyContent: 'center',\n                                    }}\n                                    onClick={() => this.setState({ choose_other_option: true, time: '' })}\n                            >\n                                {choose_other_option ?\n                                    <View\n                                        style={{\n                                            flexDirection: 'row',\n                                            justifyContent: 'center', \n                                            alignItems: 'center',\n                                            width: '100%'\n                                        }}\n                                    >\n                                        <TextInput\n                                            autoFocus={true}\n                                            selectTextOnFocus={true}\n                                            onBlur={() => this.onBlur()}\n                                            keyboardType='numeric'\n                                            value={time + ''}\n                                            style={{\n                                                fontSize: total_width*0.2,\n                                                color: 'white',\n                                                width: '100%'\n                                            }}\n                                            onChangeText={(time) => {\n                                                this.setState({ time })\n                                            }}\n                                        />\n                                            <Text style={{ fontSize: total_width*0.09, color: 'white' }}>分鐘</Text>                            \n                                    </View>\n                                    : <Text style={{ fontSize: 50 }}>其他</Text>\n                                }\n                            </TouchableOpacity>\n                        </View>\n                    </View>\n                    <View style={{ height: total_height*0.16 }}>\n                        <TouchableOpacity\n                            style={{\n                                flex: 1,\n                                backgroundColor: 'lightgrey',\n                                alignItems: 'center',\n                                justifyContent: 'center'\n                            }}\n                            onClick={() => this.sendRequest()}\n                        >\n                            <Text style={{ fontSize: 50 }}>送出</Text>\n                        </TouchableOpacity>\n                    </View>\n                </ScrollView>\n            </KeyboardAvoidingView>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isConnected: state.parent.isConnected\n    }\n}\n\nexport default connect(mapStateToProps) (PickupRequest)","import React from 'react'\nimport { View, Text, TouchableOpacity, TextInput, ScrollView, Image,\n  KeyboardAvoidingView, Platform, Alert, Dimensions } from 'react-native'\nimport { formatDate, beautifyTime, beautifyMonthDate, post, formatTime } from '../util';\nimport TimeModal from './timemodal'\nimport Reloading from '../reloading'\nimport ENV from '../../variables'\nimport { connect } from 'react-redux'\n\nconst { width } = Dimensions.get('window')\n\nclass AddMedicationRequestPage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state={\n      isLoading: true,\n      request_id: null,\n      today: new Date(),\n      showDateTimeModal: false,\n      datetime_type: '',\n      // date: null,\n      time_array: [],\n      time_selected_index: null,\n      before_meal: null,\n      powder: false,\n      powder_refrigerated: false,\n      syrup: [],\n      gel: null,\n      other_type: null,\n      note: '',\n      administered: false,\n      teacher_name: '',\n      medicated_timestamp: null,\n      fever_entry: {\n        temperature: '',\n        powder: false,\n        powder_refrigerated: false,\n        syrup: [],\n        other_type: null\n      },\n      data: null,\n      index: -1,\n      access_mode: 'create',\n      scrollHeight: '100%',\n      date_array: [],\n      date_selected_index: null\n    }\n  }\n\n  componentDidMount() {\n    const { index, data } = this.props.route.params\n\n    if (data === null) {\n      this.setState({\n        date_array: [new Date()],\n        isLoading: false\n      })\n      return\n    }\n\n    this.switchRequest(index)\n  }\n\n  switchRequest(index) {\n    const { data } = this.props.route.params\n    const { id, timestamp, administered, fever_entry, medication, note, teacher_name, medicated_timestamp } = data[index]\n    // const { before_meal, powder, powder_refrigerated, syrup, gel, other_type } = medication\n    this.setState({\n      index,\n      data,\n      request_id: id,\n      date_array: [timestamp],\n      time_array: [timestamp],\n      ...medication,\n      note,\n      fever_entry,\n      administered,\n      teacher_name,\n      medicated_timestamp: medicated_timestamp !== null ? new Date(medicated_timestamp) : null,\n      access_mode: 'read',\n      isLoading: false\n    })\n  }\n\n  isIOS() {\n    if (Platform.OS === 'ios') {\n      return true\n    } else return false\n  }\n\n  selectDatetimeConfirm(datetime) {\n    const { datetime_type } = this.state\n    if (datetime_type === 'date') {\n      this.handleDateSelected(datetime)\n    } else {\n      this.handleTimeSelected(datetime)\n    }\n    // const { datetime_type, time_array, time_selected_index } = this.state\n    // if (datetime_type === 'date') {\n    //   this.setState({\n    //     date: datetime,\n    //     showDateTimeModal: false\n    //   })\n    // } else if (time_selected_index !== null){\n    //   const updated_time_array = []\n    //   for(var i = 0; i < time_array.length; i++) {\n    //     if(i !== time_selected_index) {\n    //       updated_time_array.push(time_array[i])\n    //     } else {\n    //       updated_time_array.push(datetime)\n    //     }\n    //   }\n    //   this.setState({\n    //     time_array: updated_time_array,\n    //     time_selected_index: null,\n    //     showDateTimeModal: false\n    //   })\n    // } else {\n    //   this.setState({\n    //     time_array: [...this.state.time_array, datetime],\n    //     showDateTimeModal: false\n    //   })\n    // }\n  }\n\n  handleDateSelected(date) {\n    const { date_array, date_selected_index } = this.state\n    if (date_selected_index !== null) {\n      let updated_date_array = []\n      for(var i = 0; i < date_array.length; i++) {\n        if(i !== date_selected_index) {\n          updated_date_array.push(date_array[i])\n        } else {\n          updated_date_array.push(date)\n        }\n      }\n      this.setState({\n        date_array: updated_date_array,\n        date_selected_index: null,\n        showDateTimeModal: false\n      })\n    } else {\n      this.setState({\n        date_array: [...date_array, date],\n        showDateTimeModal: false\n      })\n    }\n  }\n\n  handleTimeSelected(time) {\n    const { time_array, time_selected_index } = this.state\n    if (time_selected_index !== null){\n      let updated_time_array = []\n      for(var i = 0; i < time_array.length; i++) {\n        if(i !== time_selected_index) {\n          updated_time_array.push(time_array[i])\n        } else {\n          updated_time_array.push(time)\n        }\n      }\n      this.setState({\n        time_array: updated_time_array,\n        time_selected_index: null,\n        showDateTimeModal: false\n      })\n    } else {\n      this.setState({\n        time_array: [...time_array, time],\n        showDateTimeModal: false\n      })\n    }\n  }\n\n  removeDate(index) {\n    const { date_array } = this.state\n    date_array.splice(index, 1)\n    this.setState({\n      date_array\n    })\n  }\n\n  removeTime(index) {\n    const { time_array } = this.state\n    time_array.splice(index, 1)\n    this.setState({\n      time_array\n    })\n  }\n\n  onSelectSyrup() {\n    const { syrup } = this.state\n    this.setState({ \n      syrup: syrup.length ? []\n        : [{\n          amount: '',\n          need_refrigerated: false,\n          note: ''\n        }]\n    })\n  }\n\n  editSyrupAmountEntry(amount, index) {\n    const { syrup } = this.state\n    syrup[index].amount = amount\n    this.setState({\n      syrup\n    })\n  }\n\n  editSyrupNoteEntry(note, index) {\n    const { syrup } = this.state\n    syrup[index].note = note\n    this.setState({\n      syrup\n    })\n  }\n\n  editSyrupRefrigerationEntry(need_refrigerated, index) {\n    const { syrup } = this.state\n    syrup[index].need_refrigerated = need_refrigerated\n    this.setState({\n      syrup\n    })\n  }\n\n  removeSyrupEntry(index) {\n    const { syrup } = this.state\n    syrup.splice(index, 1)\n    this.setState({\n      syrup\n    })\n\n  }\n\n  onSelectFeverSyrup() {\n    const { fever_entry } = this.state\n    this.setState({\n      fever_entry: {\n        ...fever_entry,\n        syrup: fever_entry.syrup.length ? []\n          : [{\n            amount: '',\n            need_refrigerated: false\n          }]\n      }\n    })\n  }\n\n  editFeverSyrupAmountEntry(amount, index) {\n    const { fever_entry } = this.state\n    fever_entry.syrup[index].amount = amount\n    this.setState({\n      fever_entry\n    })\n  }\n\n  editFeverSyrupRefrigerationEntry(need_refrigerated, index) {\n    const { fever_entry } = this.state\n    fever_entry.syrup[index].need_refrigerated = need_refrigerated\n    this.setState({\n      fever_entry\n    })\n  }\n\n  removeFeverSyrupEntry(index) {\n    const { fever_entry } = this.state\n    fever_entry.syrup.splice(index, 1)\n    this.setState({\n      fever_entry\n    })\n\n  }\n\n  timeIsEmpty() {\n    const { time_array } = this.state\n    if (time_array.length === 0) {\n      alert('至少要選擇一個時間！')\n      return true\n    }\n    return false\n  }\n\n  async sendRequest() {\n    const { isConnected } = this.props\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n    const { student_id, onGoBack } = this.props.route.params\n    const body = this.normalizedData()\n    const response = await post(`/medicationrequest/student/${student_id}`, body)\n    const { success, statusCode, message, data } = response\n    if (!success) {\n      alert('Sorry 送出托藥單時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n      return \n    }\n    this.setState({\n      access_mode: 'read'\n    })\n    onGoBack()\n    this.props.navigation.goBack()\n  }\n\n  normalizedData() {\n    const { class_id } = this.props.route.params\n    const {\n      request_id, \n      date_array,\n      time_array,\n      before_meal ,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel,\n      other_type,\n      note,\n      fever_entry\n    } = this.state\n\n    return{\n      request_id,\n      class_id,\n      // date: formatDate(date), \n      date_array: date_array.map(date => formatDate(date)),\n      time_array: time_array.map(time => formatTime(time)), \n      before_meal,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel: gel === null ? gel : gel.trim(),\n      other_type: other_type === null ? other_type : other_type.trim(),\n      note: note.trim(),\n      fever_entry: {\n        temperature: fever_entry.temperature,\n        powder: fever_entry.powder,\n        powder_refrigerated: fever_entry.powder_refrigerated, \n        syrup: fever_entry.syrup, \n        other_type: fever_entry.other_type === null ? fever_entry.other_type : fever_entry.other_type.trim()\n      }\n    }\n  }\n\n  editable(){\n    const { date_array } = this.state\n    let date = date_array[0]\n    const threshold = new Date()\n    threshold.setHours(10,0,0,0)\n    const tomorrow = new Date()\n    tomorrow.setDate(tomorrow.getDate() + 1)\n    tomorrow.setHours(0,0,0,0)\n    return (date.toDateString() === (new Date).toDateString() && new Date() < threshold) || date.getTime() > tomorrow.getTime()\n  }\n\n  onClickConfirm() {\n    const { access_mode } = this.state\n    if (access_mode === 'create' || access_mode === 'edit') {\n      if (this.timeIsEmpty()) return\n      this.sendRequest()\n    } else {\n      this.setState({\n        access_mode: 'edit'\n      })\n    }\n  }\n\n  deleteRequestConfirm() {\n    const { request_id } = this.state\n    const confirmed = confirm('確定要刪除？')\n    if (confirmed) {\n      this.deleteRequest(request_id)  \n    }\n  }\n\n  deleteRequest(request_id) {\n    const { isConnected } = this.props\n    if (!isConnected) {\n      alert('網路連不到! 請稍後再試試看')\n      return\n    }\n    const { class_id, onGoBack } = this.props.route.params\n    fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/medicationrequest/${request_id}`, {\n      method: 'DELETE',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        class_id\n      })\n    })\n      .then((res) => res.json())\n      .then((resJson) => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal Server Error') {\n          alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫' + message)\n          return\n        }\n        onGoBack()\n        this.props.navigation.goBack()\n      })\n      .catch(err => {\n        alert('Sorry 電腦出狀況了！請截圖和與工程師聯繫: error occurred when deleting medication request')\n      })\n  }\n\n  cancelEdit() {\n    const { index } = this.state\n    this.switchRequest(index)\n  }\n\n  render() {\n    const { \n      isLoading,\n      // date, \n      time_array, \n      showDateTimeModal, \n      datetime_type, \n      time_selected_index, \n      before_meal ,\n      powder,\n      powder_refrigerated,\n      syrup,\n      gel,\n      other_type,\n      note,\n      fever_entry,\n      administered,\n      teacher_name,\n      medicated_timestamp,\n      data,\n      access_mode,\n      scrollHeight,\n      date_array,\n      date_selected_index\n    } = this.state\n    \n    if(isLoading) {\n      return <Reloading />\n    }\n    return (\n      <KeyboardAvoidingView\n          style={{ flex: 1, width: '100%', alignItems: 'center' }}\n          behavior={'padding'}\n          // keyboardVerticalOffset={90}\n          enabled\n      >\n        {showDateTimeModal ?\n          <TimeModal\n            start_date={time_selected_index === null ? new Date() : time_array[time_selected_index]}\n            datetime_type={datetime_type}\n            hideModal={() => this.setState({ showDateTimeModal: false })}\n            selectDatetimeConfirm={(datetime) => this.selectDatetimeConfirm(datetime)}\n            minDatetime={new Date()}\n            maxDatetime={(new Date()).setDate((new Date()).getDate() + 7)}\n            minTime={new Date().setHours(7, 0, 0)}\n            maxTime={new Date().setHours(20, 0, 0)}\n            paddingVertical={100}\n          />\n          : null\n        }\n\n        <ScrollView style={{ width: '100%' }}>\n          \n          {data !== null && data.length > 1 &&\n            <View style={{ width: '100%' }}>\n                <ScrollView horizontal showsHorizontalScrollIndicator={false}>\n                  {data.map((request, index) => {\n                    return (\n                      <View key={index} style={{ padding: 10 }}>\n                        <TouchableOpacity\n                          key={request.id}\n                          style={{\n                            padding: 10,\n                            backgroundColor: this.state.index === index ? '#ffddb7' : 'rgba(0,0,0,0.5)',\n                            justifyContent: 'center',\n                            borderRadius: 30\n                          }}\n                          underlayColor='#ffddb7'\n                          onClick={() => this.switchRequest(index)}\n                        >\n                          <Text\n                            style={{ fontSize: 25, color: this.state.index === index ? 'grey' : 'white' }}\n                          >\n                            {beautifyTime(request.timestamp)}\n                          </Text>\n                        </TouchableOpacity>\n                      </View>\n                    )\n                  })}\n                </ScrollView>\n            </View>\n          }\n\n          <View style={{ backgroundColor: 'white', borderTopRightRadius: 30, borderTopLeftRadius: 30}}>\n            {administered &&\n              <View style={{ alignItems: 'center'}}>\n                {/* MEDICATED RESPONSE - BODY */}\n                <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n                  <Text style={{ fontSize: 25 }}>餵藥老師：{teacher_name}</Text>\n                  <Text style={{ fontSize: 25 }}>餵藥時間：{beautifyTime(medicated_timestamp)}</Text>\n                </View>\n              </View>}\n\n          {/* DATE */}\n          <View style={{ alignItems: 'center'}}>\n            <View\n              style={{ \n                width: '100%', \n                flexDirection: 'row', \n                alignItems: 'center',\n                justifyContent: 'center',\n                backgroundColor: '#ff8944',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n            >\n              <Text style={{ fontSize: 25 }}>日期 </Text>\n            </View>\n            {/* <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#ff8944',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              underlayColor='transparent'\n              onClick={() => {\n                if (access_mode === 'read') return\n                this.setState({ showDateTimeModal: true, datetime_type: 'date' })\n              }}\n            >\n              <Text style={{ fontSize: 30, alignSelf: 'center' }}>日期 {beautifyMonthDate(date)}</Text>\n            </TouchableOpacity> */}\n\n            {/* TIME */}\n            <View \n              style={{ \n                flex: 1,\n                flexDirection: 'row', \n                width: '100%', \n                backgroundColor: 'white', \n                padding: 20,\n                alignItems: 'flex-start'\n              }}\n            >\n\n            <View style={{ flex: 1, alignItems: 'center' }}>\n                <TouchableOpacity \n                  disabled={access_mode === 'read' || access_mode === 'edit'}\n                  style={{\n                    width: '80%',\n                    paddingBottom: 15\n                  }}\n                  underlayColor='transparent'\n                  onClick={() => {\n                    if (access_mode === 'read' || access_mode === 'edit') return\n                    this.setState({ showDateTimeModal: true, datetime_type: 'date' })\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <View style={{ flex: 1, paddingLeft: 15 }}>\n                      <Text style={{ fontSize: 25 }}>日期</Text>\n                    </View >\n                    {access_mode === 'create' &&\n                      <Image\n                        source={require('../../assets/icon-plus.png')}\n                        style={{ width: 32, height: 32, alignSelf: 'flex-end'}}\n                      />\n                    }\n                  </View>\n                </TouchableOpacity>\n                {date_array.map((date, index) => {\n                  return (\n                    <View key={index} \n                      style={{\n                        width: '90%',\n                        justifyContent: 'center',\n                        flexDirection: 'row',\n                        paddingBottom: 10\n                      }}\n                    >\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '70%',\n                          backgroundColor: '#ffddb7',\n                          borderTopLeftRadius: 15,\n                          borderBottomLeftRadius: 15,\n                          justifyContent: 'center'\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.setState({ showDateTimeModal: true, datetime_type: 'date', date_selected_index: index })\n                        }}\n                      >\n                        <Text style={{ fontSize: 25, alignSelf: 'center' }}>{beautifyMonthDate(date)}</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '30%',\n                          justifyContent: 'center',\n                          padding: 5,\n                          backgroundColor: '#ffddb7',\n                          borderBottomRightRadius: 15,\n                          borderTopRightRadius: 15\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.removeDate(index)\n                        }}\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                    </View>\n                  )\n                })}\n              </View>\n\n              <View style={{ flex: 1, alignItems: 'center' }}>\n                <TouchableOpacity \n                  disabled={access_mode === 'read' || access_mode === 'edit'}\n                  style={{\n                    width: '80%',\n                    paddingBottom: 15\n                  }}\n                  underlayColor='transparent'\n                  onClick={() => {\n                    if (access_mode === 'read' || access_mode === 'edit') return\n                    this.setState({ showDateTimeModal: true, datetime_type: 'time' })\n                  }}\n                >\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <View style={{ flex: 1, paddingLeft: 15 }}>\n                      <Text style={{ fontSize: 25 }}>時間</Text>\n                    </View >\n                    {access_mode === 'create' &&\n                      <Image\n                        source={require('../../assets/icon-plus.png')}\n                        style={{ width: 32, height: 32, alignSelf: 'flex-end'}}\n                      />\n                    }\n                  </View>\n                </TouchableOpacity>\n\n                {time_array.map((time, index) => {\n                  return (\n                    <View key={index} \n                      style={{\n                        width: '90%',\n                        justifyContent: 'center',\n                        flexDirection: 'row',\n                        paddingBottom: 10\n                      }}\n                    >\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '70%',\n                          backgroundColor: '#ffddb7',\n                          borderTopLeftRadius: 15,\n                          borderBottomLeftRadius: 15,\n                          justifyContent: 'center'\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.setState({ showDateTimeModal: true, datetime_type: 'time', time_selected_index: index })\n                        }}\n                      >\n                        <Text style={{ fontSize: 25, alignSelf: 'center' }}>{beautifyTime(time)}</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{\n                          width: '30%',\n                          justifyContent: 'center',\n                          padding: 5,\n                          backgroundColor: '#ffddb7',\n                          borderBottomRightRadius: 15,\n                          borderTopRightRadius: 15\n                        }}\n                        underlayColor='transparent'\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.removeTime(index)\n                        }}\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                    </View>\n                  )\n                })}\n              </View>\n            </View>\n            <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'center', alignItems: 'center', paddingBottom: 20 }}>\n              <TouchableOpacity\n                disabled={access_mode === 'read'}\n                style={{ \n                  padding: 15,\n                  borderWidth: 1,\n                  borderColor: 'grey',\n                  backgroundColor: (before_meal !== null && before_meal) ? '#ffddb7' : 'white'\n                }}\n                underlayColor='#ff8944'\n                onClick={() => {\n                  if (access_mode === 'read') return\n                  this.setState({ before_meal: before_meal ? null : true })\n                }}\n              >\n                <Text style={{ fontSize: 25 }}>餐前</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                disabled={access_mode === 'read'}\n                style={{\n                  padding: 15,\n                  borderWidth: 1,\n                  borderLeftWidth: 0,\n                  borderColor: 'grey',\n                  backgroundColor: (before_meal !== null && !before_meal) ? '#ffddb7' : 'white'\n                }}\n                underlayColor='#ff8944'\n                onClick={() => {\n                  if (access_mode === 'read') return\n                  this.setState({ before_meal: before_meal === false ? null : false })\n                }}\n              >\n                <Text style={{ fontSize: 25 }}>餐後</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {/* MEDICATION TYPE - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#00c07f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onClick={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>藥物</Text>\n            </TouchableOpacity>\n\n            {/* MEDICATION TYPE - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', paddingHorizontal: 20 }}>\n\n              {/* POWDER */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingTop: 20, paddingBottom: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ powder: !powder })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: powder ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10, alignSelf: 'center' }}>藥粉    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  \n\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingTop: 20, paddingBottom: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ powder_refrigerated: !powder_refrigerated})\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            // flex: 1,\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: powder_refrigerated ? '#00c07f' : 'white'\n                          }}\n                        >\n                          \n                        </View>\n                      </View>\n                    \n                      <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n\n                    </View>\n\n                  </TouchableOpacity>\n                </View>\n                \n              </View>\n\n              {/* SYRUP */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.onSelectSyrup()\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: syrup.length ? '#00c07f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10 }}>藥水    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  {syrup.length && access_mode !== 'read'? \n                    <TouchableOpacity\n                      style={{ padding: 10 }}\n                      onClick={() => this.setState({\n                        syrup: [...syrup, { amount: '', need_refrigerated: false, note: '' }]\n                      })}\n                      underlayColor='transparent'\n                    >\n                      <Image\n                        source={require('../../assets/icon-plus-green.png')}\n                        style={{ width: 32, height: 32 }}\n                      />\n                    </TouchableOpacity>\n                    : null\n                  }\n                </View>\n\n                {syrup.map((entry,index) => {\n                  return (\n                    <View key={index} style={{ flexDirection: 'row', alignItems: 'center', alignSelf: 'center', marginBottom: 20 }}>\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ width: 35, fontSize: 25, textAlign: 'center', marginHorizontal: 10 }}\n                        keyboardType=\"number-pad\"\n                        autoFocus={true}\n                        placeholder={'____'}\n                        value={entry.amount}\n                        onChangeText={(amount) => this.editSyrupAmountEntry(amount, index)}\n                      />\n\n                      <Text style={{ fontSize: 20, marginRight: 5 }}>c.c.</Text>\n\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{ padding: 5 }}\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.editSyrupRefrigerationEntry(!entry.need_refrigerated, index)\n                        }}\n                        underlayColor='transparent'\n                      >\n                        <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                          <View\n                            style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                          >\n                            <View \n                              style={{\n                                width: 16,\n                                height: 16,\n                                borderRadius: 8,\n                                backgroundColor: entry.need_refrigerated ? '#00c07f' : 'white'\n                              }}\n                            >\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n                        </View>\n\n                      </TouchableOpacity>\n\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ fontSize: 25, textAlign: 'center', marginHorizontal: 10, width: 60 }}\n                        // keyboardType=\"default\"\n                        // autoFocus={true}\n                        placeholder={'備註'}\n                        value={entry.note}\n                        onChangeText={(note) => this.editSyrupNoteEntry(note, index)}\n                      />\n\n                      {access_mode !== 'read' && <TouchableOpacity\n                        style={{ paddingHorizontal: 10 }}\n                        onClick={() => this.removeSyrupEntry(index)}\n                        underlayColor='transparent'\n                      >\n                        <Image\n                          source={require('../../assets/icon-delete.png')}\n                          style={{ width: 32, height: 32 }}\n                        />\n                      </TouchableOpacity>\n                      }\n                    </View>\n                  )\n                })}\n                \n              </View>\n\n              {/* GEL */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ \n                        gel: gel === null ? '' : null\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: gel === null ? 'white' : '#00c07f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>藥膏</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {gel === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex: 1, fontSize: 25 }}\n                      autoFocus={true}\n                      placeholder={'部位'}\n                      value={gel}\n                      onChangeText={(gel) => this.setState({ gel })}\n                    />\n                  }\n                </View>\n                \n              </View>\n\n              {/* OTHER */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({ \n                        other_type: other_type === null ? '' : null\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: other_type === null ? 'white' : '#00c07f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>其他</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {other_type === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex:1, fontSize: 22, paddingHorizontal: 10, paddingTop: 3, paddingBottom: 5, paddingLeft: 0 }}\n                      placeholder={'點擊我開始填寫...'}\n                      autoFocus={true}\n                      textAlignVertical={'top'}\n                      multiline={true}\n                      blurOnSubmit={true}\n                      scrollEnabled={false}\n                      value={other_type}\n                      onChangeText={(other_type) => this.setState({ other_type })} \n                    />\n                  }\n                </View>\n                \n              </View>\n\n            </View>\n          </View>\n\n          {/* NOTE - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#f4d41f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onClick={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>備註</Text>\n            </TouchableOpacity>\n\n            {/* NOTE - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n              <TextInput\n                editable={access_mode !== 'read'}\n                style={{ height: scrollHeight, padding: 15, fontSize: 25 }}\n                placeholder={'點擊填寫...'}\n                multiline={true}\n                blurOnSubmit={true}\n                scrollEnabled={false}\n                value={note}\n                onChangeText={(note) => this.setState({ note})}\n                onChange={(e) => this.setState({\n                  scrollHeight: e.target.scrollHeight\n                })}\n                onLayout={(event) => {\n                  const { scrollHeight } = event.nativeEvent.target\n                  this.setState({\n                      scrollHeight\n                  })\n                }}\n              />\n            </View>\n          </View>\n\n          {/* FEVER MEDS - HEADER */}\n          <View style={{ alignItems: 'center'}}>\n            <TouchableOpacity\n              disabled={access_mode === 'read'}\n              style={{\n                width: '100%',\n                justifyContent: 'center',\n                backgroundColor: '#fa625f',\n                padding: 10,\n                borderTopLeftRadius: 30,\n                borderTopRightRadius: 30\n              }}\n              // onClick={() => }\n            >\n              <Text style={{ fontSize: 25, alignSelf: 'center' }}>發燒餵藥</Text>\n            </TouchableOpacity>\n\n            {/* FEVER MEDS - BODY */}\n            <View style={{ width: '100%', backgroundColor: 'white', padding: 20 }}>\n              <View style={{ paddingVertical: 10 }}>\n                <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                  \n                  <Text style={{ fontSize: width * 0.06, marginHorizontal: 10 }}>發燒超過</Text>\n\n                  <TextInput\n                    editable={access_mode !== 'read'}\n                    style={{ width: 55, fontSize: 25 }}\n                    keyboardType='number-pad'\n                    value={fever_entry.temperature}\n                    onChangeText={(temperature) => this.setState({\n                      fever_entry: {\n                        ...fever_entry,\n                        temperature\n                      }\n                    })}\n                  />\n\n                  <Text style={{ fontSize: width * 0.06 }}>°C 以上才用藥</Text>\n                </View>\n\n                {/* POWDER */}\n                <View style={{ backgroundColor: '' }}>\n                  <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                    <TouchableOpacity\n                      disabled={access_mode === 'read'}\n                      style={{ paddingTop: 20, paddingBottom: 10 }}\n                      onClick={() => {\n                        if (access_mode === 'read') return\n                        this.setState({ \n                          fever_entry: {\n                            ...fever_entry,\n                            powder: !fever_entry.powder \n                          }\n                        })\n                      }}\n                      underlayColor='transparent'\n                    >\n                      <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                        <View\n                          style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                        >\n                          <View \n                            style={{\n                              width: 16,\n                              height: 16,\n                              borderRadius: 8,\n                              backgroundColor: fever_entry.powder ? '#fa625f' : 'white'\n                            }}\n                          >\n                          </View>\n                        </View>\n                        <Text style={{ fontSize: 25, marginLeft: 10 }}>藥粉    </Text>\n                      </View>\n                    </TouchableOpacity>\n                    \n\n                    <TouchableOpacity\n                      disabled={access_mode === 'read'}\n                      style={{ paddingTop: 20, paddingBottom: 10 }}\n                      onClick={() => {\n                        if (access_mode === 'read') return\n                        this.setState({\n                          fever_entry: {\n                            ...fever_entry,\n                            powder_refrigerated: !fever_entry.powder_refrigerated\n                          }\n                        })\n                      }}\n                      underlayColor='transparent'\n                    >\n                      <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                        <View\n                          style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                        >\n                          <View \n                            style={{\n                              // flex: 1,\n                              width: 16,\n                              height: 16,\n                              borderRadius: 8,\n                              backgroundColor: fever_entry.powder_refrigerated ? '#fa625f' : 'white'\n                            }}\n                          >\n                            \n                          </View>\n                        </View>\n                      \n                        <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n\n                      </View>\n\n                    </TouchableOpacity>\n                  </View>\n                  \n                </View>\n                \n                {/* SYRUP */}\n              <View style={{ backgroundColor: '' }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.onSelectFeverSyrup()\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: fever_entry.syrup.length ? '#fa625f' : 'white'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginLeft: 10 }}>藥水    </Text>\n                    </View>\n                  </TouchableOpacity>\n                  {fever_entry.syrup.length && access_mode !== 'read'? \n                    <TouchableOpacity\n                      style={{ padding: 10 }}\n                      onClick={() => this.setState({\n                        fever_entry: {\n                          ...fever_entry,\n                          syrup: [...fever_entry.syrup, { amount: '', need_refrigerated: false }]\n                        }\n                      })}\n                      underlayColor='transparent'\n                    >\n                      <Image\n                        source={require('../../assets/icon-plus-red.png')}\n                        style={{ width: 32, height: 32 }}\n                      />\n                    </TouchableOpacity>\n                    : null\n                  }\n                </View>\n\n                {fever_entry.syrup.map((entry,index) => {\n                  return (\n                    <View key={index} style={{ flexDirection: 'row', alignItems: 'center', alignSelf: 'center', marginBottom: 20 }}>\n                      <TextInput\n                        editable={access_mode !== 'read'}\n                        style={{ width: 62, fontSize: 25 }}\n                        keyboardType=\"number-pad\"\n                        autoFocus={true}\n                        placeholder={'____'}\n                        value={entry.amount}\n                        onChangeText={(amount) => this.editFeverSyrupAmountEntry(amount, index)}\n                      />\n\n                      <Text style={{ fontSize: 25, marginRight: 5 }}>c.c.</Text>\n\n                      <TouchableOpacity\n                        disabled={access_mode === 'read'}\n                        style={{ padding: 5 }}\n                        onClick={() => {\n                          if (access_mode === 'read') return\n                          this.editFeverSyrupRefrigerationEntry(!entry.need_refrigerated, index)\n                        }}\n                        underlayColor='transparent'\n                      >\n                        <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                          <View\n                            style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, marginLeft: 10, justifyContent: 'center', alignItems: 'center' }}\n                          >\n                            <View \n                              style={{\n                                width: 16,\n                                height: 16,\n                                borderRadius: 8,\n                                backgroundColor: entry.need_refrigerated ? '#fa625f' : 'white'\n                              }}\n                            >\n                            </View>\n                          </View>\n                          <Text style={{ fontSize: 25, marginHorizontal: 5 }}>需冷藏</Text>\n                        </View>\n\n                      </TouchableOpacity>\n\n                      {access_mode !== 'read' && \n                        <TouchableOpacity\n                          disabled={access_mode === 'read'}\n                          style={{ paddingHorizontal: 10 }}\n                          onClick={() => {\n                            if (access_mode === 'read') return\n                            this.removeFeverSyrupEntry(index)\n                          }}\n                          underlayColor='transparent'\n                        >\n                          <Image\n                            source={require('../../assets/icon-delete.png')}\n                            style={{ width: 32, height: 32 }}\n                          />\n                        </TouchableOpacity>\n                      }\n                    </View>\n                  )\n                })}\n                \n              </View>\n\n                {/* OTHER */}\n              <View style={{ }}>\n                <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                  <TouchableOpacity\n                    disabled={access_mode === 'read'}\n                    style={{ paddingVertical: 10 }}\n                    onClick={() => {\n                      if (access_mode === 'read') return\n                      this.setState({\n                        fever_entry: {\n                          ...fever_entry,\n                          other_type: fever_entry.other_type === null ? '' : null\n                        }\n                      })\n                    }}\n                    underlayColor='transparent'\n                  >\n                    <View style={{ flexDirection: 'row', justifyContent: 'center', alignItems: 'center' }}>\n                      <View\n                        style={{ width: 24, height: 24, borderWidth: 1, borderRadius: 12, justifyContent: 'center', alignItems: 'center' }}\n                      >\n                        <View \n                          style={{\n                            width: 16,\n                            height: 16,\n                            borderRadius: 8,\n                            backgroundColor: fever_entry.other_type === null ? 'white' : '#fa625f'\n                          }}\n                        >\n                        </View>\n                      </View>\n                      <Text style={{ fontSize: 25, marginHorizontal: 10 }}>其他</Text>\n                    </View>\n                  </TouchableOpacity>\n                  {fever_entry.other_type === null ? \n                    null\n                    :\n                    <TextInput\n                      editable={access_mode !== 'read'}\n                      style={{ flex:1, fontSize: 22, paddingHorizontal: 10, paddingTop: 3, paddingBottom: 5, paddingLeft: 0 }}\n                      placeholder={'點擊我開始填寫...'}\n                      autoFocus={true}\n                      textAlignVertical={'top'}\n                      multiline={true}\n                      blurOnSubmit={true}\n                      scrollEnabled={false}\n                      value={fever_entry.other_type}\n                      onChangeText={(other_type) => this.setState({ \n                        fever_entry: {\n                          ...fever_entry,\n                          other_type\n                        }\n                      })} \n                    />\n                  }\n                </View>\n                \n              </View>\n                  \n              </View>\n            </View>\n          </View>\n          </View>\n        </ScrollView>\n\n        <View\n          style={{ height: 90, width: '100%', paddingHorizontal: 20 }}\n        >\n          {access_mode === 'read' ?\n            <TouchableOpacity \n              disabled={!this.editable()}\n              style={{ width: '100%', height: '70%', backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n              onClick={() => {\n                if (!this.editable()) return\n                this.onClickConfirm()\n              }}\n              underlayColor='transparent'\n            >\n              <Text style={{ fontSize: 40, textAlign: 'center', color: 'white' }}>\n                編輯\n              </Text>\n            </TouchableOpacity>\n            : access_mode === 'edit' ?\n              <View style={{ width: '100%', height: '70%', flexDirection: 'row' }}>\n                <TouchableOpacity \n                  style={{  flex:1, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                  onClick={() => this.deleteRequestConfirm()}\n                  underlayColor='transparent'\n                >\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    刪除\n                  </Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity \n                  style={{  flex:1, backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n                  onClick={() => this.cancelEdit()}\n                  underlayColor='transparent'\n                >\n                  <Text style={{ fontSize: width * 0.06, textAlign: 'center', color: 'white' }}>\n                    取消編輯\n                  </Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity \n                  style={{ flex:1, backgroundColor: '#00c07f', justifyContent: 'center' }}\n                  onClick={() => this.onClickConfirm()}\n                  underlayColor='transparent'\n                  >\n                  <Text style={{ fontSize: 30, textAlign: 'center' }}>\n                    送出\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            : // access_mode === 'create\n              <TouchableOpacity\n                style={{ width: '100%', height: '70%', backgroundColor: 'rgba(0,0,0,0.5)', justifyContent: 'center' }}\n                onClick={() => this.onClickConfirm()}\n                underlayColor='transparent'\n              >\n                <Text style={{ fontSize: 30, textAlign: 'center', color: 'white' }}>\n                  送出\n                </Text>\n              </TouchableOpacity>\n          }\n        </View>\n        \n      </KeyboardAvoidingView>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n      isConnected: state.parent.isConnected\n  }\n}\n\nexport default connect(mapStateToProps) (AddMedicationRequestPage)","import React from 'react'\nimport { View, Text, Image, TouchableHighlight } from 'react-native'\nimport { Card } from 'native-base'\nimport Reloading from '../reloading'\nimport { beautifyDate, put, formatDate, formatTime } from '../util'\nimport * as WebBrowser from 'expo-web-browser'\nimport * as Sharing from 'expo-sharing'\nimport * as Linking from 'expo-linking'\nimport { TouchableOpacity } from 'react-native'\n\nexport default class AnnouncementPage extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            index: -1,\n            data: []\n        }\n    }\n\n    componentDidMount() {\n        const { index, data } = this.props.route.params\n        // deal with default index(0) or selected index from announcement card\n        this.setState({\n            index,\n            data\n        })\n        this.markRead(data[index].id)   \n    }\n\n    async markRead(announcement_id) {\n        const { parent_id } = this.props.route.params\n        const timestamp = formatDate(new Date()) + ' ' + formatTime(new Date())\n        const response = await put(`/announcement/${announcement_id}/read`, {\n            'parent_id': parent_id,\n            'timestamp': timestamp\n        })\n        // console.log(response)\n        const { success, statusCode, message, data } = response\n\n    }\n\n    componentWillUnmount() {\n        const { onGoBack } = this.props.route.params\n        onGoBack()\n    }\n\n    render() {\n        const { index, data } = this.state\n        if (index < 0) {\n            return <Reloading />\n        }\n        const selected_announcement = data[index]\n        // console.log('selected_announcement: ', selected_announcement)\n        return (\n            <Card style={{ flex: 1 }}>\n                <View style={{ padding: 20, alignItems: 'center' }}>\n                    <Text style={{ fontSize: 25 }}>{selected_announcement.title}</Text>\n                    <Text>{beautifyDate(new Date(selected_announcement.timestamp))}</Text>\n                </View>\n                <View style={{ flex: 1, padding: 20,  }}>\n                    <Text>{selected_announcement.text}</Text>\n                    <View style={{ paddingTop: 50, alignItems: 'flex-start' }}>\n                        {selected_announcement.links.map((link,index) => {\n                            return (\n                                <TouchableOpacity\n                                    key={index}\n                                    style={{ padding: 8, backgroundColor: 'lightblue' }}\n                                    onClick={async() => {\n                                        let result = await WebBrowser.openBrowserAsync(link.url)\n                                    }}\n                                >\n                                    <Text>{link.text}</Text>\n                                </TouchableOpacity>\n                            )\n                        })}\n                    </View>\n                    <View style={{ flexDirection: 'row', paddingTop: 50, flexWrap: 'wrap' }}>\n                    {selected_announcement.photo_url_arr.map((url, index) => {\n                        return (\n                            <TouchableHighlight\n                                key={index}\n                                onPress={async() => {\n                                    let result = await WebBrowser.openBrowserAsync(url)\n                                    this.setState({ result })\n                                }}\n                            >\n                                <Image\n                                    source={{ uri: url }}\n                                    style={{\n                                        width: 150,\n                                        height: 150,\n                                        marginRight: 10,\n                                        marginTop: 10\n                                    }}\n                                />\n                            </TouchableHighlight>\n                        )\n                    })}\n                </View>\n                </View>\n            </Card>\n        )\n    }\n}","import React, { useState, useEffect, } from 'react'\nimport { View, Text, TouchableOpacity, Image, Dimensions, ScrollView } from 'react-native'\nimport { Card } from 'native-base'\nimport { beautifyDate, get } from '../util'\n\nconst AnnouncementListPage = (props) => {\n    const { parent_id, viewAnnouncement } =  props.route.params\n    const [ announcements, setAnnouncements ] = useState(props.route.params.announcements)\n    const [ page, setPage ] = useState(0)\n    const [ endReached, setEndReached ] = useState(false)\n    // console.log('page: ', page)\n    // console.log('announcements: ', announcements)\n\n    useEffect(() => {\n        // console.log('useEffect')\n        if (page === 0) return\n        fetchAnnouncementByPage()\n    }, [page])\n\n    const fetchAnnouncementByPage = async() => {\n        const response = await get(`/announcement/unread?parent_id=${parent_id}&page=${page}`)\n        const { success, statusCode, message, data } = response\n        // console.log('fetchAnnouncementByPage/response: ', response)\n        if (success) {\n            setAnnouncements([...announcements, ...data])\n            if (data.length < 3) {\n                setEndReached(true)\n            }\n        }\n    }\n\n    return (\n        <ScrollView contentContainerStyle={{ alignItems: 'center' }}>\n            {announcements.map((announcement, index) => {\n                const date = beautifyDate(new Date(announcement.timestamp))\n                return (\n                    <TouchableOpacity\n                        key={announcement.id}\n                        style={{ width: '100%', alignItems: 'center' }}\n                        onClick={() => viewAnnouncement(index, announcements)}\n                    >\n                        <Card\n                            style={{\n                                padding: 20,\n                                width: '95%',\n                                height: 200,\n                                flexDirection: 'row'\n                            }}\n                        >\n                            <View style={{ width: '100%', overflow: 'hidden'}}>\n                                <View style={{ paddingBottom: 20 }}>\n                                    <Text style={{ fontSize: 25 }}>{announcement.title}</Text>\n                                    <Text style={{ fontSize: 15 }}>{date}</Text>\n                                </View>\n                                <View style={{ }}>\n                                    <Text style={{ fontSize: 18 }}>{announcement.text}</Text>\n                                </View>\n                            {/* <View style={{ width: '10%', justifyContent: 'flex-end' }}>\n                            </View> */}\n                            </View>\n                        </Card>\n                    </TouchableOpacity>\n                )\n            })}\n            {endReached ?\n                <View style={{ padding: 15 }}>\n                    <Text style={{ fontSize: 18 }}>無更多訊息</Text>\n                </View>\n            : <TouchableOpacity\n                style={{ width:'95%', padding: 15, backgroundColor: 'rgba(0,0,0,0.2)', alignItems: 'center' }}\n                onClick={() => setPage(page+1)}\n            >\n                <Text style={{ fontSize: 20 }}>檢視更多</Text>\n            </TouchableOpacity>\n            }\n        </ScrollView>\n    )\n}\n\nexport default AnnouncementListPage","import React, { useState } from 'react'\nimport { View, Text, TouchableOpacity, Animated, Dimensions, TouchableHighlight, ScrollView, StyleSheet } from 'react-native'\nimport { formatDate, get } from '../../util'\n// import * as MailComposer from 'expo-mail-composer'\nimport Modal from '../../modal'\nimport * as WebBrowser from 'expo-web-browser'\n\nconst DownloadPage = (props) => {\n    const { students } = props.route.params\n    const all_months = ['一', '二', '三', '四', '五', '六', '七', '八', '九', '十', '十一', '十二']\n    const [month, setMonth] = useState(0)\n    const [email, setEmail] = useState('')\n    const screenHeight = Dimensions.get('window').height\n    const [modalAnimation, setModalAnimation] = useState(new Animated.Value(0))\n    const [studentId, setStudentId] = useState(props.route.params.student_id)\n    const [actionSheetType, setActionSheetType] = useState('')\n    const [downloadUrl, setDownloadUrl] = useState('')\n    const [showModal, setShowModal] = useState(false)\n\n\n    const findAllPreviousMonths = () => {\n        const today = new Date()\n        const month = today.getMonth()\n        return all_months.slice(0, month+1)\n    }\n\n    const showActionSheet = (dataType) => {\n        setActionSheetType(dataType)\n        // Animated.sequence([\n            Animated.timing(\n                modalAnimation,\n                {\n                    toValue: 1,\n                    duration: 300,\n                    // useNativeDriver: true\n                }\n            ).start()\n        // ]).start()\n    }\n\n    const hideActionSheet = () => {\n        Animated.timing(\n            modalAnimation,\n            {\n                toValue: 0,\n                duration: 200\n            }\n        ).start()\n    }\n\n    const months = findAllPreviousMonths()\n\n    const getUrl = async () => {\n        const month_to_fetch = new Date()\n        month_to_fetch.setMonth(month, 1)\n        const response = await get(`/student/${studentId}/monthly-report?month=${formatDate(month_to_fetch)}`)\n        // console.log('response: ', response)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n          alert('整理寶貝資料中出問題，請截圖給工程師')\n          return\n        }\n\n        setDownloadUrl(data)\n        setShowModal(true)\n        // sendEmail(data)\n    }\n    \n    // const sendEmail = (url) => {\n    //     MailComposer.composeAsync({\n    //       recipients: [email],\n    //       subject: `${all_months[month]}月份學生出勤紀錄`,\n    //       body: `https://gina-mobile-app.s3.amazonaws.com/${url}`\n    //     })\n    // }\n\n    return (\n        <View style={{ flex: 1, alignItems: 'center', paddingHorizontal: 15, overflow: 'hidden' }}>\n            {showModal && <Modal \n                title={'下載連結'}\n                content={\n                    <View style={{ alignItems: 'center'}}>\n                        <Text>{`寶貝${all_months[month]}月的資料準備好了，\\n點擊連結選擇下載方式\\n\\n`}</Text>\n                        <TouchableOpacity style={{ padding: 10, backgroundColor: '#dcf3d0' }}\n                            onClick={async() => {\n                                let result = await WebBrowser.openBrowserAsync(`https://gina-mobile-app.s3.amazonaws.com/${downloadUrl}`)\n                            }}\n                        >\n                            <Text>{`${all_months[month]}月份出勤紀錄`}</Text>\n                        </TouchableOpacity>\n                    </View>\n                }\n                hideModal={() => setShowModal(false)}\n            />}\n            <View \n                style={{\n                    marginTop: 25,\n                    borderWidth: 2, \n                    borderRadius: 10, \n                    borderColor: 'lightgrey',\n                    padding: 20,\n                    backgroundColor: 'rgba(255,255,255,0.8)',\n                    width: '85%'\n                }}\n            >\n                <View style={{ }}>\n                    <Text style={{ fontSize: 25 }}>整月聯絡簿</Text>\n                </View>\n                <View style={{ flex: 1, width: '100%', flexDirection: 'row', marginTop: 15 }}>\n                    <View style={{ flex: 1, paddingVertical: 20, alignItems: 'center', justifyContent: 'center', backgroundColor: 'lightgrey', borderTopLeftRadius: 15 }}>\n                        <Text style={{ fontSize: 25 }}>月份</Text>\n                    </View>\n                    <TouchableOpacity\n                        style={{ flex: 2 }}\n                        onClick={() => showActionSheet('month')}\n                    >\n                        <Text style={{ fontSize: 25, paddingVertical: 20, borderWidth: 1, borderColor: 'lightgrey', textAlign: 'center' }}>{all_months[month]}月</Text>\n                    </TouchableOpacity>\n                </View>\n                <View style={{ flex: 1, width: '100%', flexDirection: 'row', marginTop: 15 }}>\n                    <View style={{ flex: 1, paddingVertical: 20, alignItems: 'center', justifyContent: 'center', backgroundColor: 'lightgrey', borderBottomLeftRadius: 15 }}>\n                        <Text style={{ fontSize: 25 }}>寶貝</Text>\n                    </View>\n                    <TouchableHighlight\n                        style={{ flex: 2 }}\n                        onClick={() => showActionSheet('student')}\n                    >\n                        <Text style={{ fontSize: 25, paddingVertical: 20, textAlign: 'center', borderWidth: 1, borderColor: 'lightgrey'}}>{students[studentId].name}</Text>\n                    </TouchableHighlight>\n                </View>\n                \n                <TouchableHighlight\n                    style={{ paddingTop: 20, alignSelf: 'flex-end' }}\n                    onClick={() => getUrl()}\n                >\n                    <Text style={{ fontSize: 25, backgroundColor: '#dcf3d0', padding: 20, textAlign: 'center'}}>下載</Text>\n                </TouchableHighlight>\n            </View>\n            <Animated.View \n                style={[StyleSheet.absoluteFill, {\n                    flex: 1,\n                    backgroundColor: 'rgba(0,0,0,0.5)',\n                    transform: [{ \n                        translateY: modalAnimation.interpolate({\n                            inputRange: [0, 0.01],\n                            outputRange: [screenHeight, 0],\n                            extrapolate: 'clamp'\n                        })\n                    }],\n                    opacity: modalAnimation.interpolate({\n                        inputRange: [0.01, 0.5],\n                        outputRange: [0, 1],\n                        extrapolate: 'clamp'\n                    })\n                }]}\n            >\n                <TouchableHighlight \n                    style={{ \n                        flex: 1, \n                        backgroundColor: 'transparent'\n                    }}\n                    underlayColor='transparent'\n                    onPress={() => hideActionSheet()}\n                ><View></View>\n                </TouchableHighlight>\n                <View\n                    style={{\n                        flex: 1,\n                        position: 'absolute',\n                        top: screenHeight,\n                        width: '100%',\n                        height: '100%',\n                        justifyContent: 'flex-end',\n                    }}\n                >   \n                    <View style={{ flex: 3 }}></View>\n                    <Animated.View\n                        style={{\n                            flex: 1,\n                            backgroundColor: 'rgba(255,255,255,1)', \n                            // height: '30%',\n                            marginHorizontal: 10,\n                            paddingHorizontal: 10,\n                            minHeight: 200,\n                            transform: [\n                                {\n                                    translateY: modalAnimation.interpolate({\n                                        inputRange: [0.01, 1],\n                                        outputRange: [0, -1 * screenHeight],\n                                        extrapolate: 'clamp'\n                                    })\n                                }\n                            ]\n                        }}\n                    >\n                        <View style={{ padding: 15 }}>\n                            <Text style={{ fontSize: 25 }}>{actionSheetType === 'month' ? '請選擇聯絡簿月份' : '請確認寶貝名稱'}</Text>\n                        </View>\n                        {actionSheetType === 'month' && <ScrollView horizontal contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n                            {months.map((month_item, index) => {\n                                return (\n                                    <TouchableOpacity\n                                        key={index}\n                                        style={{\n                                            // width: '20%',\n                                            flex: 1,\n                                            padding: 20,\n                                            alignItems: 'center',\n                                            justifyContent: 'center',\n                                            backgroundColor: '#b5e9e9',\n                                            margin: 10,\n                                            marginVertical: 20,\n                                            height: 80,\n                                            width: 100\n                                            // marginTop: 20\n                                        }}\n                                        onClick={()=> {\n                                            setMonth(index)\n                                            hideActionSheet()\n                                        }}\n                                        underlayColor=\"#368cbf\"\n                                    >\n                                        <Text style={{ fontSize: 20 }}>{`${month_item}月`}</Text>\n                                    </TouchableOpacity>\n                                )\n                            })}\n                        </ScrollView>}\n                        {actionSheetType === 'student' && <ScrollView horizontal contentContainerStyle={{ alignItems: 'center', justifyContent: 'center'}}>\n                            {Object.keys(students).map((student_id) => {\n                                return (\n                                    <TouchableOpacity\n                                        key={student_id}\n                                        style={{\n                                            // width: '20%',\n                                            padding: 30,\n                                            alignItems: 'center',\n                                            justifyContent: 'center',\n                                            backgroundColor: '#b5e9e9',\n                                            margin: 15,\n                                            height: 80,\n                                            width: 100\n                                        }}\n                                        onClick={()=> {\n                                            setStudentId(student_id)\n                                            hideActionSheet()\n                                        }}\n                                        underlayColor=\"#368cbf\"\n                                    >\n                                        <Text style={{ fontSize: 20 }}>{`${students[student_id].name}`}</Text>\n                                    </TouchableOpacity>\n                                )\n                            })}\n                        </ScrollView>}\n                    </Animated.View>\n                </View>\n            </Animated.View>\n\n        </View>\n    )\n}\n\nexport default DownloadPage","import React from 'react'\nimport { TouchableHighlight, Text, TouchableOpacity } from 'react-native'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux';\nimport reducer from '../../redux/parent/reducers/index'\nimport { NavigationContainer } from '@react-navigation/native'\nimport { createStackNavigator } from '@react-navigation/stack'\nimport ParentHome from './parenthome'\nimport MedicationRequestPage from './medicationrequestpage'\nimport AbsenceExcusePage from './absenceexcusepage'\nimport PickupRequest from './pickuprequest'\nimport AddMedicationRequestPage from './addmedicationrequestpage'\nimport AnnouncementPage from './announcementpage'\nimport ViewImagePage from '../viewimagepage'\nimport AnnouncementListPage from './announcementlistpage';\nimport ParentDownloadPage from './mainmenu/downloadpage'\n\nconst store = createStore(reducer)\nconst Stack = createStackNavigator()\n\nexport default class ParentApp extends React.Component {\n    render() {\n        return (\n            <Provider store={store}>\n                <NavigationContainer>\n                    <Stack.Navigator\n                        initialRouteName=\"ParentHome\"\n                        screenOptions={{\n                            gestureEnabled: true,\n                            headerTitleStyle: {\n                                fontWeight: 'bold',\n                                fontSize: 30\n                            }\n                        }}\n                    >\n                        <Stack.Screen\n                            name=\"ParentHome\"\n                            component={ParentHome}\n                            initialParams={{\n                                parent_id: this.props.parent_id,\n                                loadAuth: this.props.loadAuth\n                            }}\n                            options={{\n                                title: '家長首頁',\n                                headerRight: () => (\n                                    <TouchableHighlight\n                                        style={{ padding: 10, marginRight: 20 }}\n                                        onPress={() => this.props.handleSignOut()}\n                                    >\n                                        <Text>登出</Text>\n                                    </TouchableHighlight>\n                                ),\n                                headerLeft: null\n                            }}\n                        />\n                        {/* <Stack.Screen\n                            name=\"ViewImagePage\"\n                            component={ViewImagePage}\n                            options={{ \n                                title: '',\n                                headerRight: () => (\n                                    <TouchableHighlight\n                                        style={{ padding: 10, marginRight: 20 }}\n                                        // onPress={() => this.props.handleSignOut()}\n                                    >\n                                        <Text></Text>\n                                    </TouchableHighlight>\n                                )\n                        }}\n                        /> */}\n                        <Stack.Screen\n                            name=\"DownloadPage\"\n                            component={ParentDownloadPage}\n                            options={{ title: '資料下載' }}\n                        />\n                        <Stack.Screen\n                            name=\"PickupRequest\"\n                            component={PickupRequest}\n                            options={{ title: '接回告知' }}\n                        />\n                        <Stack.Screen\n                            name=\"MedicationRequestPage\"\n                            component={MedicationRequestPage}\n                            options={{ title: '托藥單' }}\n                        />\n                        <Stack.Screen\n                            name=\"AddMedicationRequestPage\"\n                            component={AddMedicationRequestPage}\n                            options={{ title: '新增托藥單' }}\n                        />\n                        <Stack.Screen \n                            name=\"AbsenceExcusePage\"\n                            component={AbsenceExcusePage}\n                            options={{ title: '請假單' }}\n                        />\n                        <Stack.Screen\n                            name=\"AnnouncementPage\"\n                            component={AnnouncementPage}\n                            options={{ title: '公告' }}\n                        />\n                        <Stack.Screen\n                            name=\"AnnouncementListPage\"\n                            component={AnnouncementListPage}\n                            options={{ title: '公告' }}\n                        />\n                    </Stack.Navigator>\n                </NavigationContainer>\n            </Provider>\n        )\n    }\n}","import React from 'react'\nimport { View, TextInput, StyleSheet, Text, Alert } from 'react-native'\nimport { Container, Content, Card, Button} from 'native-base'\nimport Auth from '@aws-amplify/auth'\n\nclass ConfirmSignUp extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            code: ''\n        }\n        this.confirmCode = this.confirmCode.bind(this)\n    }\n\n    confirmCode() {\n        Auth.confirmSignUp(this.props.username, this.state.code)\n            .then(data => {\n                console.log('data: ', data)\n                // switch to homepage\n                // save often used ids into asyncstorage\n                // this.props.navigation.navigate('AuthLoadingPage')\n                this.props.getCurrentUser()\n            })\n            .catch((err) => {\n                Alert.alert(\n                    'Error!',\n                    err.message,\n                    [\n                        { text: 'OK', onPress: () => console.log('err occured when setting up account for parent(s): ', err)}\n                    ]\n                  )\n            })\n    }\n\n    render() {\n        console.log('this.state.code: ', this.state.code)\n        return (\n            <Container>\n                <Content keyboardShouldPersistTaps=\"always\">\n                    <View\n                        style={{\n                            paddingTop: '20%',\n                            flexDirection: 'row',\n                            justifyContent: 'space-around',\n                            paddingBottom: '15%'\n                        }}\n                    >\n                        <TextInput\n                            style={{ position: 'absolute', color: 'transparent'}}\n                            autoFocus={true}\n                            maxLength={6}\n                            caretHidden={true}\n                            keyboardType={'numeric'}\n                            onChangeText={(number) => {\n                                this.setState({ code: number })\n                            }}\n                        />\n                        {Array(6).fill(0).map((item, index) => {\n                            return (\n                                <Card key={index} style={{ width: 50, height: 50, backgroundColor: 'white', borderColor: 'black', justifyContent: 'center' }}>\n                                    {this.state.code.length > index ? \n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>{this.state.code.charAt(index)}</Text>\n                                        : <Text></Text>\n                                    }\n                                </Card>\n                            )\n                        })}\n                    </View>\n                    \n                    <Button rounded success style={{ alignSelf: 'center' }} onPress={this.confirmCode}>\n                        <Text style={{ paddingHorizontal: 5, color: 'white' }}>Confirm code</Text>\n                    </Button>\n                {/* }} */}\n                </Content>\n            </Container>\n        )\n    }\n}\n\nconst styles = StyleSheet.create({\n    input: {\n        borderColor: 'black',\n        borderWidth: 1\n    }\n})\n\nexport default ConfirmSignUp","import React from 'react'\nimport { View, Text, ActivityIndicator } from 'react-native'\nimport * as Font from 'expo-font'\nimport Auth from '@aws-amplify/auth'\nimport SchoolApp from '../teacher/schoolapp'\nimport Signin from './signin'\nimport Signup from './signup'\nimport ParentApp from '../parent/parentapp'\nimport ConfirmSignUp from './confirmsignup'\nimport Reloading from '../reloading'\nimport { YellowBox } from 'react-native';\nimport ENV from '../../variables'\n\nYellowBox.ignoreWarnings([\n    'Non-serializable values were found in the navigation state',\n]);\n\nclass AuthLoading extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            status: '',\n            id: '',\n            username: ''\n        }\n        this.getCurrentUser = this.getCurrentUser.bind(this)\n    }\n\n    async componentDidMount() {\n        await Font.loadAsync({\n            'Roboto': require('../../node_modules/native-base/Fonts/Roboto.ttf'),\n            'Roboto_medium': require('../../node_modules/native-base/Fonts/Roboto_medium.ttf'),\n        })\n        this.getCurrentUser()\n    }\n\n    getCurrentUser() {\n        this.setState({ status: 'loading' })\n        Auth.currentAuthenticatedUser()\n            .then(user => {\n                //user is authenticated\n                console.log(user.username)\n                fetch(`https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/${ENV}/user?username=${user.username}`, {\n                    method: 'GET',\n                    headers: {\n                        Accept: 'application/json',\n                        'Content-Type': 'application/json'\n                    }\n                })\n                    .then((res) => res.json())\n                    .then((resJson) => {\n                        // get id, name, role of admin and parents\n                        const { statusCode, message, data } = resJson\n                        // console.log('resJson: ', resJson)\n                        if (statusCode === 200) {\n                            this.setState({\n                                status: data.role,\n                                id: data.id,\n                                username: user.username\n                            })\n                        } else {\n                            this.setState({\n                                status: 'signedout'\n                            })\n                        }\n                    })\n                    .catch((err) => {\n                        console.log('err: ', err)\n                        this.setState({ status: 'signedout' })\n                    })\n            })\n            .catch(err => {\n                if (err == 'not authenticated') {\n                    this.setState({ status: 'signedout' })\n                }\n                this.setState({ status: 'signedout' })\n            })\n    }\n\n    changeAuthState(state, username) {\n        this.setState({\n            status: state,\n            username\n        })\n    }\n\n    handleSignOut() {\n        Auth.signOut()\n            .then(() => {\n                this.getCurrentUser()\n            })\n            .catch(err => console.log(err))\n    }\n\n    render() {\n        console.log('ENV: ', ENV)\n        const { status, username } = this.state\n        console.log('status: ', status)\n        return (\n            <View style={{ flex: 1 }}>\n                {\n                    status.includes('parent') ?\n                        <ParentApp parent_id={this.state.id} handleSignOut={() => this.handleSignOut()}/>\n                        : status === 'school' ? \n                            <SchoolApp school_id={this.state.id} school_name={username} handleSignOut={() => this.handleSignOut()} />\n                            : status === 'ConfirmSignUpPage' ?\n                                <ConfirmSignUp getCurrentUser={this.getCurrentUser} username={this.state.username}/>\n                                : status === 'signedout' || status === 'school' ?\n                                    <Signin loadAuth={this.getCurrentUser} changeAuthState={(state,username) => this.changeAuthState(state, username)} />\n                                    :\n                                        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n                                            <Text>Loading...</Text>\n                                            <ActivityIndicator size=\"large\"></ActivityIndicator>\n                                        </View>\n                }\n            </View>\n        )\n    }\n}\n\n// const mapDispatchToProps = (dispatch) => {\n//     return ({\n//         ...bindActionCreators({ initializeClass }, dispatch)\n//     })\n// }\n\n// export default connect(null, mapDispatchToProps) (AuthLoading)\nexport default AuthLoading","const awsCognitoAuth = {\n    identityPooId: 'us-east-1:0a3c861f-48ca-4832-af57-28b4209e695e',\n    region: 'us-east-1',\n    userPoolId: 'us-east-1_QlbPkQ8Ds',\n    userPoolWebClientId: '6maqsbp3gi2vj0tid4akmoiat6'\n}\n\nexport default awsCognitoAuth","// import React from 'react';\n// import { StyleSheet, Text, View } from 'react-native';\n\n// export default function App() {\n//   return (\n//     <View style={styles.container}>\n//       <Text>Open up App.js to start working on your app!</Text>\n//     </View>\n//   );\n// }\n\n// const styles = StyleSheet.create({\n//   container: {\n//     flex: 1,\n//     backgroundColor: '#fff',\n//     alignItems: 'center',\n//     justifyContent: 'center',\n//   },\n// });\n\nimport React from 'react'\nimport AuthLoading from './components/auth/authloading'\nimport { View, Text, TextInput, Image } from 'react-native'\nimport { Root } from 'native-base'\nimport Amplify from 'aws-amplify'\nimport cognito_auth from './configuration/aws-cognito-auth'\nimport { AppLoading, SplashScreen } from 'expo'\nimport { Asset } from 'expo-asset'\n\nAmplify.configure(cognito_auth)\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isSplashReady: false,\n      isAppReady: false\n    }\n    SplashScreen.preventAutoHide()\n  }\n  \n\n  _cacheSplashResourcesAsync = async () => {\n    const gif = require('./assets/app-splash.gif');\n    return Asset.fromModule(gif).downloadAsync();\n  };\n\n  _cacheResourcesAsync = async () => {\n    SplashScreen.hide();\n    const images = [\n      require('./assets/app_logo.png')\n    ];\n\n    const cacheImages = images.map(image => {\n      return Asset.fromModule(image).downloadAsync();\n    });\n\n    await Promise.all(cacheImages);\n    this.setState({ isAppReady: true });\n  };\n\n  render() {\n    // console.log('isAppReady: ', isAppReady)\n    // const { isSplashReady, isAppReady } = this.state\n    // if (!isSplashReady) {\n    //   return (\n    //     <AppLoading\n    //       startAsync={this._cacheSplashResourcesAsync}\n    //       onFinish={() => this.setState({ isSplashReady: true })}\n    //       onError={console.warn}\n    //       autoHideSplash={false}\n    //     />\n    //   )\n    // }\n\n    // if (!isAppReady) {\n    //   return (\n    //     <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n    //       <Image\n    //         source={require('./assets/app-splash.gif')}\n    //         style={{ height: 200, aspectRatio: 1 }}\n    //         onLoad={this._cacheResourcesAsync}\n    //       />\n    //     </View>\n    //   )\n    // }\n\n    return (\n      // <Root>\n        <AuthLoading />\n      // </Root>\n    )\n  }\n}\n\nText.defaultProps = Text.defaultProps || {};\nText.defaultProps.allowFontScaling = false;\n\nTextInput.defaultProps = TextInput.defaultProps || {};\nTextInput.defaultProps.allowFontScaling = false;","module.exports = __webpack_public_path__ + \"static/media/icon-thumbnail.f8c9cedd.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-checked-box.add46308.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsSAAALEgHS3X78AAACN0lEQVR42u3dv28ScRzG8efbKkPLdcPE6OKPja2QuiqjCxCjf4FJdz0lcbrN0KK7iX/BxdTDoaOG0VK6uVWHpumikx4O1vBxqDFRcgmed9TA+zWXkjzv+wHLIQEAAAAAAGBeuCz+STkIC0teqenM6pJblXRR0vKMbTWUdCjZnpmir8NP0bvgzrdTD3DtyetbZgsbkl2es4P3vcke9v3a1qkEuB2GiwcHpbZJ9+f5EmKmTn/YaykIRmlev5D2jRn/5xHs5K8Vrz+e6hlwctlxL7iF/qa549+Icj8DykFYMHNt9h7ztByEhdwDLHmlpqQr7D3m0rJ3rp7/PcDUYOvEO3L+AZxUYelE1Wl8CjrPzoku/O0LzqR4k+Ikf7R9d3Wmlr35fC+zbTL5HoBsEIAABAABCAACEAAEIAAIQAAQgAAgAAFAAAKAAAQAAQgAAhAABCAACEAAEIAAIAABQAACgAAEAAEIAAIQAAQgAAhAABCAACAAAUAAAoAA/7c0z4yLNcGz0SZ8xtqMcZ+ncAa4I47bhGVkR1MIMBowdQLTbu4BzBSxdOIp0M09wGhl5aWkfdYeW/9DHH98lXuAwXr12GQtBv9jfhvdS/OTJqk+hvb92paZOsz+69LTfvug1k3z0tTfA/rDXkuyTdZ3Gztfeo/St/tHa503DUmbkq7O2fL7zsxPe+RnFkCSKs92zy7GcUNmdSdV7ORnrIozNnjspEOTBk6Kvnted7BePeYKAAAAAAAAgEn9AI63ihVnDPNHAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-medication-powder.ea8d7086.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-syrup.a7ee612b.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-gel.12878684.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-medication-pill.b0c168c9.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-wellness.8e4dfdb5.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAC2UlEQVRo3u2Xv24TQRDGv9mzHdt3tmMHCiQiJNqYylBAwRMgurwBSoNooKG0y4gyosk78BRI0IQulihxEiRiXETIh2WMdygSoZx3cv98ZA/J293c7ml++30zuwesxmosNSjpAv5wu+LXnZ8A4LUHBADjwzssPbs/5lV6dDIRv9PfKvnwX4L5udcebKYFKCRdMHF5I/bcKloAvhrJH3SKPo/eAXiyrAIq6QJN1Iw9V6Elxcfl0dsskk8FwFTYWGauf7j5gIBnWdWASr6EW8vMZaJXaWovMwBFaKWdO+zf9AB6mmUXSmEhuhF7LoIFX9WVh2BUrAKA0Uzw+aBaSnWyPgeSA1D8NsoLNcDMd60DUAIFFII1QMAt6wBMSKCAUfAV+xYCxW+jREFY5qJ9AI5fA8Y5QJhkDVBILgCa4IsrwcWl7e8VYeEZRg2QzzlQoBeflXcXQt+sW8hrH+0C/Dra/tx1t456C4fgcQ6K+ByCmXpXi0S9xeQv2tIgFwAAULv3pSspQcTd83diD+5b/yML5LO9XZrVqtPLsWJhrUT7+zNx/kGn6JdHYwCloKIDunYFAAD1umfEnLF35W7d/zQD8DkXFgKAidauEZuRG97E+GNuABznt7HbDlQt1LOK3ucGgDTcOLEgoJMpQGEpAOV4rHnxthoKUH7zeDhTwTX8or5Ge3vT61dgrj0TSnnhW1ZoGLGzs4YVC82FZOeaQwGm9MtIduo4dgCI2RUUCLWQmikjWaXmdgBAwm5HKEBKN8zTW9lSQOhCFA6gQUaymsgOgIZpFykWBDSTpTlbUgDmbke1UWghWVsKgAW7RFiIhWQZWLcDIHccN6Ju1gUl7SjAggIMeBGVLyVrqwZIqgEv4gekIZwnlmoA5kEGCrcQC3Zha0Us28WL0C1PFkoDgPwAsNxx3P8GIJ2FUM+ThU6F8GnEmu9CeGjrKrFDwMml0DER7WS9ZjVW4x+OPysh2phhVbaOAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-milk.02c27d2c.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0UlEQVRo3u2YwQnCQBBF/wQL0GMwdmAFWoJ9iAUJbprJSTvwpBcFIVc7GC8iRBNBRbIJ753CJId5mRmYXQkAIBp8o50HuQdtu5JbUvnKNLs/zaP7uw25JV3vGgQQ+JFB49QHORVoswK2kjVV5fndv+PvOoIhRgABBBBAAAEEWOZqOBXlwmS55ONH8JBKks5FWV2s/hu/uGupY/pZBUwKleTbIzNT/k0LZRF1yoQhjhVrOvVc93ElOpzWnxZpIQQQ6OsqMVq/3s20CfdCCAAA9JIb9gROYBxbOFYAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-diaper.236e3240.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAABvklEQVRo3u2ZO0sDQRSFv1lFfGBg7SysLC20T62CIFb+D8EmhWUsxf+hpYUEtRBMZyCFQewCihZGQuIjMdmZa2MKQx6smSVZMqe9LHPPnHP37OyAg4NDrKHCPiCZnSW0OUaxAczbbki+azSKBUz5FXTwLnClIZVI8zAwAcnsLGFMHliIYjflu0Y9f40EzfZSWQmrs4c8the8UCtocxxV8wCNYqFT8wC+eBx1KnghDbcRpZ9N+bWHPGwOTiACz//pUQe9ygkbBEYOjsCwMTlKzcylw+eSFQJB4SzcoivbzkJWFbC5o3GagReEHErlEJPDm7qNm4WmUfggPuBDc2FoCvQb4i4W84EkkEQpkP99HY/KEGdR3vpYDvGoKJBEzIXLAZfELomjVkCbZZTaA7LxPA9MejMIv8kZRwsJd63ItJDEbohdErszMbwAN6Au0frSKTAELAK7ILtMeP86D3Qk8HnQ4V0JfGXPBup2Nrnthng8CCh4j2KxPn+fK9YICFxFQcBUSr3KGWsENKSAsm0CzeJ9txuYNyTYt0YgkeZBCasoToGqNQVqH9Tz1+jSc8tOVeAECdbU1vkTDg4O44cfoDWTjXIjQSwAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-babies.a7fc62df.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAACTklEQVRo3u2Zz2sTQRzFPzO7KbSaUkOjUAwIFQsipDnlD6hEqQd/FEoPFSke9FSkXuJJ8NZDTHuu1EtCxYL2YH9Y2j/AWw+5LNaTEay/ohUvNrvroWlcY6KB3U1SMu+0OzM7M2/ee18WBhSaC+HHpKmFpYhmmWlskSg1bWBr9+5cv2y0PIHUwlJEM60tIFTR9UViRyfHR/Jerie9JqBZZhoICVi2zOJJiR0BVoGQhXjo9XqeEziwjcC+PXVj9N3k+Eje1OStUu8Fr5fT6xmUGJuIIGXaQiQEBA/aLw0P1/zm/cdPUSAPsLPzIdbX2wvQPZN5ZleOXV5Z+c0fvoPY1KWZXMvMG64zkBibiNhSq+bpfxLYK+79LBS+XisKoYV7ehYDut5Ra6yTgAMFYZnR9SeP37pTQMp0tc3/DwE90HE8HH7hwh3HbKmngFFXBEq2AWDmfpKzZ/rLfbPZ5574eD07V37OGdtMPZim3szIOjxW9rxz8wBHuzpdbz5YMce5gdPOitDtaxUaisdckQh2dTIUj/lfhWrhVN8Jbl692NRfCckhhyLQbOheTfTjfPyP9yMbr/4as2W8qfrt4EC/UqAhcHPSvhCotE2tvmp2OpQKqAyoDFTA6e16yqjKgMpAnXZqZAbaW4Fanm5kdWpvBfzwtFJAZUBlQCmgMqAy0FYKKAItT2D/zmofOWPb9w3ljNfO128ehFhsgn0FcN6cNAaCl64V0KWZBApNcMdnHe66JrCWmTeEZUZBLILYbcCx7yJ4qgsGV7OP8ii0OH4Bz96jqU9mE24AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/icon-morningreminder.9cb15f85.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-announcement.b546f363.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-attendance.96ff830b.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAAeElEQVR4nO3bsQ3AMAwEMSX77+wsYeQKkRMIuPY1AwAAbPPMzKmP2OytD9hOgJgAMQFiAsQEiAkAAAAAAAAAAAAAAJf4EYtZR8cEiAkQEyAmQEyAmAAAAAAAAAAAAAAAcIkfsZh1dEyAmAAxAWICxASICQAAAPCzDwbFAyuExAG0AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/icon-plus-green.128442cf.png\";","module.exports = __webpack_public_path__ + \"static/media/icon-plus-red.4fa4cf94.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAACBklEQVRoge2Yyy4EQRSGvyEZKxazE3GJEFsmsRMLtzXhgWx4AIvBM7jMA1jyEojLIFbuFkRGWFThzJjqS1XXTEJ9SSWnp8+p8/9d09NdA4FAIPBXGQEugHNg2FeTNl8TA4tAL9APLPlq4tNAXsQdvpr4NNAUgoFWEwy0mmCg1fwLAwPAJnAJVIGPBuMFWEnRd1XXNJqrqnttoJ7iTswBT4ZG9eO5rnZZnFsWn+d0bpI5H4GZKIFRKzAAbAOdkRYVr8Bagjy0sDVdE0cXsAP0JZy7hk1+rsQpMEXt+00cphWIIw9MA2eifj1F/TeXYoIpi3pbA19Mi/qKKSnqK9Qt4gMLAa7si7jHlBRloF3Eb85y0iN7tpuS/sVzII5B4Bg4AYoJ8os6t0IGW80sDMwDQygje0SbKOqcQdRP44Jr8ywM7AJ3Oi6gBI41yBvT5wr6+A7YyqC/EflEjKMI3Ir8W6AsjssNzif5uqXR4Fw8Ctzw+3WgftwD4540OBfHmUgj3laDc7HJRFrxLhqci+tN2Ih31eBWjLpJj4BDkt2wVhpyMcVJ8nwSq+FPv0q8izjNPiArZM93U1KUgWsRTzjLSc+kiK9sJtjg5wY6Q+1Nm7ESeWCW2h1ZyWaiftSmOsnm2+d4wHJPDOqqt9LEA2pr6UQfagkrmP8XynJUda8SDlc+EAgEmsMnirAThvyxHLsAAAAASUVORK5CYII=\""],"sourceRoot":""}