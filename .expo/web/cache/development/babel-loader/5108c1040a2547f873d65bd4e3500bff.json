{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/teacher/admin/addteacher.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { post, get } from \"../../util\";\nimport PickerComponent from \"../../picker\";\n\nvar AddTeacher = function (_React$Component) {\n  _inherits(AddTeacher, _React$Component);\n\n  var _super = _createSuper(AddTeacher);\n\n  function AddTeacher(props) {\n    var _this;\n\n    _classCallCheck(this, AddTeacher);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      id: '',\n      name: '',\n      profile_picture: '',\n      class_id: '',\n      passcode: '',\n      isAdmin: false\n    };\n    return _this;\n  }\n\n  _createClass(AddTeacher, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"postTeacher\",\n    value: function postTeacher() {\n      var _this$props, student_id, school_id, _this$state, id, name, profile_picture, class_id, passcode, isAdmin, body, response, success, statusCode, message, data;\n\n      return _regeneratorRuntime.async(function postTeacher$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$props = this.props, student_id = _this$props.student_id, school_id = _this$props.school_id;\n              _this$state = this.state, id = _this$state.id, name = _this$state.name, profile_picture = _this$state.profile_picture, class_id = _this$state.class_id, passcode = _this$state.passcode, isAdmin = _this$state.isAdmin;\n              body = {\n                id: id,\n                name: name,\n                profile_picture: profile_picture,\n                class_id: class_id,\n                passcode: passcode,\n                isAdmin: isAdmin\n              };\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(post(\"/school/\" + school_id + \"/teacher\", body));\n\n            case 5:\n              response = _context2.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context2.next = 10;\n                break;\n              }\n\n              Alert.alert(\"Sorry \\u65B0\\u589E\\u6559\\u5E2B\\u6642\\u96FB\\u8166\\u51FA\\u72C0\\u6CC1\\u4E86\\uFF01\", '請截圖和與工程師聯繫\\n\\n' + message, [{\n                text: 'Ok'\n              }]);\n              return _context2.abrupt(\"return\");\n\n            case 10:\n              this.props.goBack();\n              this.props.fetchTeacherData();\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"handleSelectClass\",\n    value: function handleSelectClass(class_name) {\n      var classes = this.props.classes;\n      var class_id_found = '';\n      Object.keys(classes).forEach(function (class_id) {\n        if (classes[class_id].name === class_name) {\n          class_id_found = class_id;\n        }\n      });\n      this.setState({\n        class_id: class_id_found,\n        isAdmin: class_name === '管理員'\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var _this$state2 = this.state,\n          id = _this$state2.id,\n          name = _this$state2.name,\n          class_id = _this$state2.class_id,\n          passcode = _this$state2.passcode,\n          isAdmin = _this$state2.isAdmin;\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          backgroundColor: '#F5F5F5'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          padding: 20,\n          justifyContent: 'space-between'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }, React.createElement(View, {\n        style: {\n          width: '48%',\n          padding: 10,\n          backgroundColor: '#ffddb7',\n          borderBottomWidth: 3,\n          borderRadius: 10,\n          borderBottomColor: '#ff8944'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 33\n        }\n      }, \"\\u59D3\\u540D\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        value: name,\n        onChangeText: function onChangeText(name) {\n          return _this2.setState({\n            name: name\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 33\n        }\n      })), React.createElement(View, {\n        style: {\n          width: '48%',\n          padding: 10,\n          backgroundColor: '#ffddb7',\n          borderBottomWidth: 3,\n          borderRadius: 10,\n          borderBottomColor: '#ff8944'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 33\n        }\n      }, \"\\u5BC6\\u78BC\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        value: passcode,\n        keyboardType: \"number-pad\",\n        onChangeText: function onChangeText(passcode) {\n          return _this2.setState({\n            passcode: passcode\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 33\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 10,\n          backgroundColor: '#ffddb7',\n          height: '100%',\n          borderBottomWidth: 3,\n          borderRadius: 10,\n          borderBottomColor: '#ff8944'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 33\n        }\n      }, \"\\u73ED\\u7D1A\"), React.createElement(PickerComponent, {\n        style: {\n          backgroundColor: 'rgba(255,255,255, 0)',\n          alignItems: 'center',\n          padding: 5\n        },\n        textStyle: {\n          fontSize: 30\n        },\n        selectedValue: class_id === '' ? '選擇班級' : classes[class_id].name,\n        options: Object.keys(classes).map(function (class_id) {\n          return classes[class_id].name;\n        }),\n        handleOnClick: function handleOnClick() {},\n        handleSelectValue: function handleSelectValue(class_name) {\n          return _this2.handleSelectClass(class_name);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 33\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          backgroundColor: '#DCDCDC',\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 25\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#fa625f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.props.goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 37\n        }\n      }, \"\\u8FD4\\u56DE\"))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#00c07f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.postTeacher();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 37\n        }\n      }, id === '' ? '新增' : '送出')))))));\n    }\n  }]);\n\n  return AddTeacher;\n}(React.Component);\n\nexport { AddTeacher as default };","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/admin/addteacher.js"],"names":["React","post","get","PickerComponent","AddTeacher","props","state","id","name","profile_picture","class_id","passcode","isAdmin","student_id","school_id","body","response","success","statusCode","message","data","Alert","alert","text","goBack","fetchTeacherData","class_name","classes","class_id_found","Object","keys","forEach","setState","flex","padding","backgroundColor","flexDirection","justifyContent","width","borderBottomWidth","borderRadius","borderBottomColor","fontSize","textAlign","height","alignItems","map","handleSelectClass","marginTop","alignSelf","postTeacher","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class AddTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    async componentDidMount() {\n        // const { parent_data } = this.props\n        // this.setState({\n        //     ...this.state,\n        //     ...parent_data\n        // })\n        // if (parent_data.id != ''){\n        //     const response = await get(`/user/${parent_data.id}/qrcode`)\n        //     const { success, statusCode, message, data } = response\n        //     if (!success) {\n        //         Alert.alert(\n        //         `Sorry 取得家長QR Code時電腦出狀況了！`,\n        //         '請截圖和與工程師聯繫\\n\\n' + message,\n        //         [{ text: 'Ok' }]\n        //         )\n        //         return \n        //     }\n        //     this.setState({\n        //         qr_data: data\n        //     })\n        // }\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 新增教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(school_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     this.props.fetchTeachersSuccess(teachers, classes)\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes } = this.props\n        const { id, name, class_id, passcode, isAdmin } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        {/* <View\n                            style={{\n                                flex: 1,\n                                padding: 10\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>手機</Text>\n                                <TextInput \n                                    style={{ fontSize: 35 }}\n                                    keyboardType={'number-pad'}\n                                    placeholder={''}\n                                    value={mobile}\n                                    onChangeText={(mobile) => this.setState({ mobile })}\n                                />\n                            </View>\n                        </View> */}\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            {/* {id !== '' ? \n                                <View style={{ flex: 1, padding: 14 }}>\n                                    <TouchableHighlight\n                                        style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                        // onPress={() => this.props.goBack()}\n                                    >\n                                        <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                    </TouchableHighlight>\n                                </View>\n                            : null\n                            } */}\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}