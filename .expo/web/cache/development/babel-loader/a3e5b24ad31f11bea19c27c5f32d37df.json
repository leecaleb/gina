{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/teacher/admin/editteacher.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { post, get } from \"../../util\";\nimport PickerComponent from \"../../picker\";\n\nvar EditTeacher = function (_React$Component) {\n  _inherits(EditTeacher, _React$Component);\n\n  var _super = _createSuper(EditTeacher);\n\n  function EditTeacher(props) {\n    var _this;\n\n    _classCallCheck(this, EditTeacher);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      id: '',\n      name: '',\n      profile_picture: '',\n      class_id: '',\n      passcode: '',\n      isAdmin: false\n    };\n    return _this;\n  }\n\n  _createClass(EditTeacher, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          teacher_id = _this$props.teacher_id,\n          teacher = _this$props.teacher,\n          classes = _this$props.classes;\n      var name = teacher.name,\n          profile_picture = teacher.profile_picture,\n          passcode = teacher.passcode;\n      var class_id = this.getClassIdByTeacherId(teacher_id, classes);\n      this.setState({\n        id: teacher_id,\n        name: name,\n        profile_picture: profile_picture,\n        passcode: passcode,\n        class_id: class_id,\n        isAdmin: class_id !== '' && classes[class_id].name === '管理員'\n      });\n    }\n  }, {\n    key: \"getClassIdByTeacherId\",\n    value: function getClassIdByTeacherId(teacher_id, classes) {\n      var class_id_list = Object.keys(classes);\n\n      for (var i = 0; i < class_id_list.length; i++) {\n        var class_id = class_id_list[i];\n        var teachers = classes[class_id].teachers;\n\n        for (var j = 0; j < teachers.length; j++) {\n          if (teacher_id === teachers[j]) {\n            return class_id;\n          }\n        }\n      }\n\n      return '';\n    }\n  }, {\n    key: \"postTeacher\",\n    value: function postTeacher() {\n      var _this$props2, student_id, school_id, _this$state, id, name, profile_picture, class_id, passcode, isAdmin, body, response, success, statusCode, message, data;\n\n      return _regeneratorRuntime.async(function postTeacher$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props2 = this.props, student_id = _this$props2.student_id, school_id = _this$props2.school_id;\n              _this$state = this.state, id = _this$state.id, name = _this$state.name, profile_picture = _this$state.profile_picture, class_id = _this$state.class_id, passcode = _this$state.passcode, isAdmin = _this$state.isAdmin;\n              body = {\n                id: id,\n                name: name,\n                profile_picture: profile_picture,\n                class_id: class_id,\n                passcode: passcode,\n                isAdmin: isAdmin\n              };\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(post(\"/school/\" + school_id + \"/teacher\", body));\n\n            case 5:\n              response = _context.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context.next = 10;\n                break;\n              }\n\n              Alert.alert(\"Sorry \\u66F4\\u6539\\u6559\\u5E2B\\u6642\\u96FB\\u8166\\u51FA\\u72C0\\u6CC1\\u4E86\\uFF01\", '請截圖和與工程師聯繫\\n\\n' + message, [{\n                text: 'Ok'\n              }]);\n              return _context.abrupt(\"return\");\n\n            case 10:\n              this.props.goBack();\n              this.props.fetchTeacherData();\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"handleSelectClass\",\n    value: function handleSelectClass(class_name) {\n      var classes = this.props.classes;\n      var class_id_found = '';\n      Object.keys(classes).forEach(function (class_id) {\n        if (classes[class_id].name === class_name) {\n          class_id_found = class_id;\n        }\n      });\n      this.setState({\n        class_id: class_id_found,\n        isAdmin: class_name === '管理員'\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          classes = _this$props3.classes,\n          teacher = _this$props3.teacher;\n      var _this$state2 = this.state,\n          id = _this$state2.id,\n          name = _this$state2.name,\n          class_id = _this$state2.class_id,\n          passcode = _this$state2.passcode;\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          backgroundColor: '#F5F5F5'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          padding: 20,\n          justifyContent: 'space-between'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }\n      }, React.createElement(View, {\n        style: {\n          width: '48%',\n          padding: 10,\n          backgroundColor: '#ffddb7',\n          borderBottomWidth: 3,\n          borderRadius: 10,\n          borderBottomColor: '#ff8944'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 33\n        }\n      }, \"\\u59D3\\u540D\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        value: name,\n        onChangeText: function onChangeText(name) {\n          return _this2.setState({\n            name: name\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 33\n        }\n      })), React.createElement(View, {\n        style: {\n          width: '48%',\n          padding: 10,\n          backgroundColor: '#ffddb7',\n          borderBottomWidth: 3,\n          borderRadius: 10,\n          borderBottomColor: '#ff8944'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 33\n        }\n      }, \"\\u5BC6\\u78BC\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        value: passcode,\n        keyboardType: \"number-pad\",\n        onChangeText: function onChangeText(passcode) {\n          return _this2.setState({\n            passcode: passcode\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 33\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 10,\n          backgroundColor: '#ffddb7',\n          height: '100%',\n          borderBottomWidth: 3,\n          borderRadius: 10,\n          borderBottomColor: '#ff8944'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 33\n        }\n      }, \"\\u73ED\\u7D1A\"), React.createElement(PickerComponent, {\n        style: {\n          backgroundColor: 'rgba(255,255,255, 0)',\n          alignItems: 'center',\n          padding: 5\n        },\n        textStyle: {\n          fontSize: 30\n        },\n        selectedValue: class_id === '' ? '選擇班級' : classes[class_id].name,\n        options: Object.keys(classes).map(function (class_id) {\n          return classes[class_id].name;\n        }),\n        handleOnClick: function handleOnClick() {},\n        handleSelectValue: function handleSelectValue(class_name) {\n          return _this2.handleSelectClass(class_name);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 33\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          backgroundColor: '#DCDCDC',\n          marginTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 25\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#fa625f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.props.goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 37\n        }\n      }, \"\\u8FD4\\u56DE\"))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#00c07f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.postTeacher();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 37\n        }\n      }, id === '' ? '新增' : '送出')))))));\n    }\n  }]);\n\n  return EditTeacher;\n}(React.Component);\n\nexport { EditTeacher as default };","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/admin/editteacher.js"],"names":["React","post","get","PickerComponent","EditTeacher","props","state","id","name","profile_picture","class_id","passcode","isAdmin","teacher_id","teacher","classes","getClassIdByTeacherId","setState","class_id_list","Object","keys","i","length","teachers","j","student_id","school_id","body","response","success","statusCode","message","data","Alert","alert","text","goBack","fetchTeacherData","class_name","class_id_found","forEach","flex","padding","backgroundColor","flexDirection","justifyContent","width","borderBottomWidth","borderRadius","borderBottomColor","fontSize","textAlign","height","alignItems","map","handleSelectClass","marginTop","alignSelf","postTeacher","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { post, get } from '../../util'\nimport PickerComponent from '../../picker'\n\nexport default class EditTeacher extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            id: '',\n            name: '',\n            profile_picture: '',\n            class_id: '',\n            passcode: '',\n            isAdmin: false\n        }\n    }\n\n    componentDidMount() {\n        const { teacher_id, teacher, classes } = this.props\n        const { name, profile_picture, passcode } = teacher\n        const class_id = this.getClassIdByTeacherId(teacher_id, classes)\n        this.setState({\n            id: teacher_id,\n            name,\n            profile_picture,\n            passcode,\n            class_id,\n            isAdmin: class_id !== '' && (classes[class_id].name === '管理員')\n        })\n        \n    }\n\n    getClassIdByTeacherId(teacher_id, classes) {\n        const class_id_list = Object.keys(classes)\n        for(var i = 0; i < class_id_list.length; i++) {\n            let class_id = class_id_list[i]\n            const { teachers } = classes[class_id]\n            for(var j = 0; j < teachers.length; j++) {\n                if (teacher_id === teachers[j]) {\n                    return class_id\n                }\n            }\n        }\n        return ''\n    }\n\n    async postTeacher() {\n        const { student_id, school_id } = this.props\n        const { id, name, profile_picture, class_id, passcode, isAdmin } = this.state\n        const body = {\n            id,\n            name,\n            profile_picture,\n            class_id,\n            passcode,\n            isAdmin\n        }\n        const response = await post(`/school/${school_id}/teacher`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            Alert.alert(\n              `Sorry 更改教師時電腦出狀況了！`,\n              '請截圖和與工程師聯繫\\n\\n' + message,\n              [{ text: 'Ok' }]\n            )\n            return \n          }\n        this.props.goBack()\n        this.props.fetchTeacherData()\n    }\n\n    // async fetchTeacherData(teacher_id) {\n    //     const response = await get(`/school/${school_id}/teacher`)\n    //     const { success, statusCode, message, data } = response\n    //     if (!success) {\n    //         Alert.alert(\n    //             'Sorry 取得教師資料時電腦出狀況了！',\n    //             '請截圖和與工程師聯繫\\n\\n' + message,\n    //             [{ text: 'Ok' }]\n    //         )\n    //         return \n    //     }\n\n    //     const {teachers, classes} = data\n    //     // this.setState({\n\n    //     // })\n    // }\n\n    handleSelectClass(class_name) {\n        const { classes } = this.props\n        let class_id_found = ''\n        Object.keys(classes).forEach(class_id => {\n            if (classes[class_id].name === class_name) {\n                class_id_found = class_id\n            }\n        })\n        this.setState({\n            class_id: class_id_found,\n            isAdmin: class_name === '管理員'\n        })\n    }\n\n    render() {\n        const { classes, teacher } = this.props\n        const { id, name, class_id, passcode } = this.state\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                        <View\n                            style={{\n                                flex: 1,\n                                flexDirection: 'row',\n                                padding: 20,\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>姓名</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={name}\n                                    onChangeText={(name) => this.setState({ name })}\n                                />\n                            </View>\n\n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '48%',\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10,\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput \n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={passcode}\n                                    keyboardType='number-pad'\n                                    onChangeText={(passcode) => this.setState({ passcode })}\n                                />\n                            </View>\n                        </View>\n\n                        <View\n                            style={{\n                                flex: 1,\n                                padding: 20\n                            }}\n                        >\n                            <View\n                                style={{\n                                    padding: 10,\n                                    backgroundColor: '#ffddb7',\n                                    height: '100%',\n                                    borderBottomWidth: 3,\n                                    borderRadius: 10,\n                                    borderBottomColor: '#ff8944'\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>班級</Text>\n                                <PickerComponent\n                                    style={{ \n                                        backgroundColor: 'rgba(255,255,255, 0)',\n                                        alignItems: 'center',\n                                        padding: 5\n                                    }}\n                                    textStyle={{fontSize: 30}}\n                                    selectedValue={class_id === '' ? '選擇班級' : classes[class_id].name}\n                                    options={Object.keys(classes).map(class_id => classes[class_id].name)}\n                                    handleOnClick={() => { }}\n                                    handleSelectValue={(class_name) => this.handleSelectClass(class_name)}\n                                />\n                            </View>\n                        </View>\n\n                        <View \n                            style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC', marginTop: 20 }}>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex:1, \n                                        padding: 5, \n                                        backgroundColor: '#fa625f', \n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                                </TouchableHighlight>\n                            </View>\n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ \n                                        flex: 1, \n                                        padding: 5, \n                                        backgroundColor: '#00c07f',\n                                        justifyContent: 'center'\n                                    }}\n                                    onPress={() => this.postTeacher()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                                </TouchableHighlight>\n                            </View>\n                        </View>\n                    </ScrollView>\n                </View>\n            </View>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}