{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/teacher/admin/addparent.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Toast } from 'native-base';\nimport { post, get } from \"../../util\";\nimport Auth from '@aws-amplify/auth';\nimport { connect } from 'react-redux';\n\nvar AddParent = function (_React$Component) {\n  _inherits(AddParent, _React$Component);\n\n  var _super = _createSuper(AddParent);\n\n  function AddParent(props) {\n    var _this;\n\n    _classCallCheck(this, AddParent);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      password: '',\n      qr_data: '',\n      name: ''\n    };\n    return _this;\n  }\n\n  _createClass(AddParent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props, parent_data, isConnected, response, success, statusCode, message, data;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = this.props, parent_data = _this$props.parent_data, isConnected = _this$props.isConnected;\n              this.setState(_objectSpread(_objectSpread({}, this.state), parent_data));\n\n              if (isConnected) {\n                _context.next = 5;\n                break;\n              }\n\n              alert('網路連不到! 等一下再試試看');\n              return _context.abrupt(\"return\");\n\n            case 5:\n              if (!(parent_data.id != '')) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(get(\"/user/\" + parent_data.id + \"/qrcode\"));\n\n            case 8:\n              response = _context.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context.next = 13;\n                break;\n              }\n\n              alert('Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message);\n              return _context.abrupt(\"return\");\n\n            case 13:\n              this.setState({\n                qr_data: data\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"postParent\",\n    value: function postParent() {\n      var _this$props2, student_id, isConnected, _this$state, id, name, role, email, username, mobile, work_phone, address, _response, body, response, success, statusCode, message, data;\n\n      return _regeneratorRuntime.async(function postParent$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$props2 = this.props, student_id = _this$props2.student_id, isConnected = _this$props2.isConnected;\n              _this$state = this.state, id = _this$state.id, name = _this$state.name, role = _this$state.role, email = _this$state.email, username = _this$state.username, mobile = _this$state.mobile, work_phone = _this$state.work_phone, address = _this$state.address;\n\n              if (!isConnected) {\n                alert('網路連不到! 等一下再試試看');\n              }\n\n              if (!(id === '')) {\n                _context2.next = 9;\n                break;\n              }\n\n              _context2.next = 6;\n              return _regeneratorRuntime.awrap(this.signUpParent());\n\n            case 6:\n              _response = _context2.sent;\n\n              if (_response.success) {\n                _context2.next = 9;\n                break;\n              }\n\n              return _context2.abrupt(\"return\");\n\n            case 9:\n              body = {\n                student_id: student_id,\n                parent_data: {\n                  id: id,\n                  name: name,\n                  role: role,\n                  email: email,\n                  username: username,\n                  mobile: mobile,\n                  work_phone: work_phone,\n                  address: address\n                }\n              };\n              _context2.next = 12;\n              return _regeneratorRuntime.awrap(post(\"/student/\" + student_id + \"/family\", body));\n\n            case 12:\n              response = _context2.sent;\n              success = response.success, statusCode = response.statusCode, message = response.message, data = response.data;\n\n              if (success) {\n                _context2.next = 17;\n                break;\n              }\n\n              alert('Sorry 新增家長時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message);\n              return _context2.abrupt(\"return\");\n\n            case 17:\n              this.props.goBack();\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"signUpParent\",\n    value: function signUpParent() {\n      var _this$state2, username, password, name, email, response;\n\n      return _regeneratorRuntime.async(function signUpParent$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this$state2 = this.state, username = _this$state2.username, password = _this$state2.password, name = _this$state2.name, email = _this$state2.email;\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(Auth.signUp({\n                username: username,\n                password: password,\n                attributes: {\n                  name: name,\n                  email: email\n                }\n              }).then(function (values) {\n                return {\n                  success: true\n                };\n              }).catch(function (err) {\n                alert('家長註冊有問題!請與工程師聯繫\\n\\n' + err.message);\n                return {\n                  success: false\n                };\n              }));\n\n            case 3:\n              response = _context3.sent;\n              return _context3.abrupt(\"return\", response);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state3 = this.state,\n          id = _this$state3.id,\n          name = _this$state3.name,\n          username = _this$state3.username,\n          password = _this$state3.password,\n          mobile = _this$state3.mobile,\n          work_phone = _this$state3.work_phone,\n          address = _this$state3.address,\n          role = _this$state3.role,\n          email = _this$state3.email;\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          backgroundColor: '#F5F5F5'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 17\n        }\n      }, React.createElement(ScrollView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          padding: 10,\n          justifyContent: 'space-between'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          width: '66%',\n          padding: 10,\n          backgroundColor: '#ffddb7'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 29\n        }\n      }, \"\\u59D3\\u540D\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        value: name,\n        onChangeText: function onChangeText(name) {\n          return _this2.setState({\n            name: name\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 29\n        }\n      })), React.createElement(View, {\n        style: {\n          width: '32%',\n          padding: 10,\n          backgroundColor: '#ffddb7'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }\n      }, \"\\u89D2\\u8272\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        value: role,\n        onChangeText: function onChangeText(role) {\n          return _this2.setState({\n            role: role\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 15,\n          backgroundColor: '#ffddb7',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 29\n        }\n      }, \"Email\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35\n        },\n        autoCapitalize: 'none',\n        keyboardType: 'email-address',\n        placeholder: '',\n        value: email,\n        onChangeText: function onChangeText(email) {\n          return _this2.setState({\n            email: email\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 29\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          padding: 10,\n          justifyContent: 'space-between'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          width: '49%',\n          padding: 15,\n          backgroundColor: '#ffddb7'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 29\n        }\n      }, \"\\u5E33\\u865F\"), React.createElement(TextInput, {\n        editable: id === '',\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        autoCapitalize: 'none',\n        value: username,\n        onChangeText: function onChangeText(username) {\n          return _this2.setState({\n            username: username\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 29\n        }\n      })), id === '' ? React.createElement(View, {\n        style: {\n          width: '49%',\n          padding: 15,\n          backgroundColor: '#ffddb7'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 33\n        }\n      }, \"\\u5BC6\\u78BC\"), React.createElement(TextInput, {\n        secureTextEntry: true,\n        style: {\n          fontSize: 35,\n          textAlign: 'center'\n        },\n        value: password,\n        onChangeText: function onChangeText(password) {\n          return _this2.setState({\n            password: password\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 33\n        }\n      })) : React.createElement(TouchableHighlight, {\n        style: {\n          backgroundColor: 'transparent',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.props.viewQRCode(_this2.state.qr_data);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 29\n        }\n      }, React.createElement(Image, {\n        source: require(\"../../../assets/icon-qr.png\"),\n        style: {\n          width: 120,\n          height: 120\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 33\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 15,\n          backgroundColor: '#ffddb7',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 29\n        }\n      }, \"\\u624B\\u6A5F\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35\n        },\n        keyboardType: 'number-pad',\n        placeholder: '',\n        value: mobile,\n        onChangeText: function onChangeText(mobile) {\n          return _this2.setState({\n            mobile: mobile\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 29\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 15,\n          backgroundColor: '#ffddb7',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 29\n        }\n      }, \"\\u5DE5\\u4F5C/\\u5BB6\\u7528\\u96FB\\u8A71\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35\n        },\n        keyboardType: 'number-pad',\n        placeholder: '',\n        value: work_phone,\n        onChangeText: function onChangeText(work_phone) {\n          return _this2.setState({\n            work_phone: work_phone\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 29\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 15,\n          backgroundColor: '#ffddb7',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 29\n        }\n      }, \"\\u5730\\u5740\"), React.createElement(TextInput, {\n        style: {\n          fontSize: 35\n        },\n        placeholder: '',\n        value: address,\n        onChangeText: function onChangeText(address) {\n          return _this2.setState({\n            address: address\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 29\n        }\n      }))), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          backgroundColor: '#DCDCDC'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#fa625f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.props.goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 33\n        }\n      }, \"\\u8FD4\\u56DE\"))), id !== '' ? React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 29\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#fa625f',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 33\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 37\n        }\n      }, \"\\u79FB\\u9664\"))) : null, React.createElement(View, {\n        style: {\n          flex: 1,\n          padding: 14\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          flex: 1,\n          padding: 5,\n          backgroundColor: '#00c07f',\n          justifyContent: 'center'\n        },\n        onPress: function onPress() {\n          return _this2.postParent();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 30,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 33\n        }\n      }, id === '' ? '新增' : '送出')))))));\n    }\n  }]);\n\n  return AddParent;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isConnected: state.school.isConnected\n  };\n};\n\nexport default connect(mapStateToProps, null)(AddParent);","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/admin/addparent.js"],"names":["React","Toast","post","get","Auth","connect","AddParent","props","state","password","qr_data","name","parent_data","isConnected","setState","alert","id","response","success","statusCode","message","data","student_id","role","email","username","mobile","work_phone","address","signUpParent","body","goBack","signUp","attributes","then","values","catch","err","flex","padding","backgroundColor","flexDirection","justifyContent","width","fontSize","textAlign","height","alignItems","viewQRCode","require","alignSelf","postParent","Component","mapStateToProps","school"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, TouchableHighlight, Image, Alert, TextInput, ScrollView} from 'react-native'\nimport { Toast } from 'native-base'\nimport { post, get } from '../../util'\nimport Auth from '@aws-amplify/auth'\nimport { connect } from 'react-redux'\n\nclass AddParent extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            password: '',\n            qr_data: '',\n            name: ''\n        }\n    }\n\n    async componentDidMount() {\n        const { parent_data, isConnected } = this.props\n        this.setState({\n            ...this.state,\n            ...parent_data\n        })\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            return\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (parent_data.id != ''){\n            const response = await get(`/user/${parent_data.id}/qrcode`)\n            const { success, statusCode, message, data } = response\n            if (!success) {\n                alert('Sorry 取得家長QR Code時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n                return \n            }\n            this.setState({\n                qr_data: data\n            })\n        }\n    }\n\n    async postParent() {\n        const { student_id, isConnected } = this.props\n        const { id, name, role, email, username, mobile, work_phone, address } = this.state\n\n        if (!isConnected) {\n            alert('網路連不到! 等一下再試試看')\n            // Toast.show({\n            //     text: '網路連不到! 等一下再試試看',\n            //     buttonText: 'Okay',\n            //     buttonTextStyle: { fontSize: 25 },\n            //     position: \"top\",\n            //     type: \"warning\",\n            //     duration: 2000\n            // })\n        }\n\n        if (id === '') { // we register and then add parent to database\n            const response = await this.signUpParent()\n            if (!response.success) {\n                return\n            }\n        }\n        const body = {\n            student_id,\n            parent_data: {\n                id,\n                name, \n                role,\n                email,\n                username, \n                mobile, \n                work_phone, \n                address\n            }\n        }\n        const response = await post(`/student/${student_id}/family`, body)\n        const { success, statusCode, message, data } = response\n        if (!success) {\n            alert('Sorry 新增家長時電腦出狀況了！請截圖和與工程師聯繫\\n\\n' + message)\n            return \n          }\n        this.props.goBack()\n    }\n\n    async signUpParent() {\n        const { username, password, name, email } = this.state\n        const response = await Auth.signUp({\n            username,\n            password,\n            attributes: {\n                name,\n                email\n            }\n          })\n            .then(values => {\n                return {\n                    success: true\n                }\n            })\n            .catch(err => {\n                alert('家長註冊有問題!請與工程師聯繫\\n\\n' + err.message)\n                return {\n                    success: false\n                }\n          })\n        return response\n    }\n\n    render() {\n        const { id, name, username, password, mobile, work_phone, address, role, email } = this.state\n        // console.log('this.state: ', this.state)\n        return (\n            <View style={{ flex: 1, padding: 30 }}>\n                <View style={{ flex: 1, backgroundColor: '#F5F5F5' }}>\n                    <ScrollView>\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '66%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>姓名</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={name}\n                                onChangeText={(name) => this.setState({ name })}\n                            />\n                        </View>\n\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '32%',\n                                padding: 10,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>角色</Text>\n                            <TextInput \n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                value={role}\n                                onChangeText={(role) => this.setState({ role })}\n                            />\n                        </View>\n\n                        {/* <TouchableHighlight\n                            style={{\n                                width: '20%',\n                                padding: 15,\n                                backgroundColor: '#fa625f',\n                                justifyContent: 'center'\n                            }}\n                            // onPress={() => }\n                        >\n                            <Text style={{fontSize: 20, textAlign: 'center'}}>移除</Text>\n                        </TouchableHighlight> */}\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>Email</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                autoCapitalize={'none'}\n                                keyboardType={'email-address'}\n                                placeholder={''}\n                                value={email}\n                                onChangeText={(email) => this.setState({ email })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            padding: 10,\n                            justifyContent: 'space-between'\n                        }}\n                    >\n                        <View\n                            style={{\n                                // flexDirection: 'row',\n                                width: '49%',\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                // alignSelf: 'flex-start',\n                                // marginBottom: 10\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>帳號</Text>\n                            <TextInput\n                                editable={id === ''}\n                                style={{ fontSize: 35, textAlign: 'center' }}\n                                autoCapitalize={'none'}\n                                value={username}\n                                onChangeText={(username) => this.setState({ username })}\n                            />\n                        </View>\n\n                        {id === '' ? \n                            <View\n                                style={{\n                                    // flexDirection: 'row',\n                                    width: '49%',\n                                    padding: 15,\n                                    backgroundColor: '#ffddb7',\n                                    // alignSelf: 'flex-start',\n                                    // marginBottom: 10\n                                }}\n                            >\n                                <Text style={{ fontSize: 15 }}>密碼</Text>\n                                <TextInput\n                                    secureTextEntry={true}\n                                    style={{ fontSize: 35, textAlign: 'center' }}\n                                    value={password}\n                                    onChangeText={(password) => this.setState({ password })}\n                                />\n                            </View>\n                        :   <TouchableHighlight\n                                style={{ backgroundColor: 'transparent', alignItems: 'center', justifyContent: 'center' }}\n                                onPress={() => this.props.viewQRCode(this.state.qr_data)}\n                            >\n                                <Image\n                                    source={require('../../../assets/icon-qr.png')}\n                                    style={{\n                                        width: 120,\n                                        height: 120,\n                                    }}\n                                />\n                            </TouchableHighlight>\n                        }\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>手機</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={mobile}\n                                onChangeText={(mobile) => this.setState({ mobile })}\n                            />\n                        </View>\n                    </View>\n                    \n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>工作/家用電話</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                keyboardType={'number-pad'}\n                                placeholder={''}\n                                value={work_phone}\n                                onChangeText={(work_phone) => this.setState({ work_phone })}\n                            />\n                        </View>\n                    </View>\n\n                    <View\n                        style={{\n                            flex: 1,\n                            padding: 10\n                        }}\n                    >\n                        <View\n                            style={{\n                                padding: 15,\n                                backgroundColor: '#ffddb7',\n                                height: '100%'\n                            }}\n                        >\n                            <Text style={{ fontSize: 15 }}>地址</Text>\n                            <TextInput \n                                style={{ fontSize: 35 }}\n                                placeholder={''}\n                                value={address}\n                                onChangeText={(address) => this.setState({ address })}\n                            />\n                        </View>\n                    </View>\n\n                    <View style={{ flex: 1, flexDirection: 'row', backgroundColor: '#DCDCDC' }}>\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                onPress={() => this.props.goBack()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>返回</Text>\n                            </TouchableHighlight>\n                        </View>\n                        {id !== '' ? \n                            <View style={{ flex: 1, padding: 14 }}>\n                                <TouchableHighlight\n                                    style={{ flex:1, padding: 5, backgroundColor: '#fa625f', justifyContent: 'center' }}\n                                    // onPress={() => this.props.goBack()}\n                                >\n                                    <Text style={{ fontSize: 30, alignSelf: 'center' }}>移除</Text>\n                                </TouchableHighlight>\n                            </View>\n                        : null\n                        }\n                        <View style={{ flex: 1, padding: 14 }}>\n                            <TouchableHighlight\n                                style={{ flex: 1, padding: 5, backgroundColor: '#00c07f',justifyContent: 'center' }}\n                                onPress={() => this.postParent()}\n                            >\n                                <Text style={{ fontSize: 30, alignSelf: 'center' }}>{id === '' ? '新增' : '送出'}</Text>\n                            </TouchableHighlight>\n                        </View>\n                    </View>\n                    </ScrollView>\n                </View>\n\n                \n            </View>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n      isConnected: state.school.isConnected\n    }\n}\n\nexport default connect(mapStateToProps, null) (AddParent)"]},"metadata":{},"sourceType":"module"}