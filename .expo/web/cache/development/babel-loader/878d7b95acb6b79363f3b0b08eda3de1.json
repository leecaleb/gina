{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/caleb_lee/gina_web_app/components/teacher/messageforparents.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Card, Toast } from 'native-base';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { writeToAll, writeToOne, remindItemsToBringToAll, remindItemsToBringToOne, recordActivitiesForAll, recordActivitiesForOne, writeItemToBringToAll, writeItemToBringToOne, writeActivityForAll, writeActivityForOne, fetchClassMessageData, sendMessageOnSuccess } from \"../../redux/school/actions/index\";\nimport Reloading from \"../reloading\";\nimport { formatDate, fetchClassData as _fetchClassData } from \"../util\";\n\nvar MessageForParents = function (_React$Component) {\n  _inherits(MessageForParents, _React$Component);\n\n  var _super = _createSuper(MessageForParents);\n\n  function MessageForParents(props) {\n    var _this;\n\n    _classCallCheck(this, MessageForParents);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      isLoading: true,\n      to_all_message: '',\n      items_to_bring: ['母奶粉', '尿布', '水壺', '衣物'],\n      other_item: '其它',\n      items_to_bring_bool: [0, 0, 0, 0, 0],\n      activities_list: ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言'],\n      other_activity: '其它',\n      activities_bool: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n      message_by_student_id: {},\n      editingOtherItemToBring: false,\n      editingOtherItemForStudent: '',\n      editingOtherActivity: false,\n      editingOtherActivityForOne: ''\n    };\n    _this.recordActivitiesForAll = _this.recordActivitiesForAll.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(MessageForParents, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var student_id_for_update = this.props.message.student_id_for_update;\n      var isConnected = this.props.class.isConnected;\n\n      if (student_id_for_update.size > 0 || !isConnected) {\n        this.setState({\n          isLoading: false\n        });\n      } else {\n        this.fetchClassData();\n      }\n\n      if (!isConnected) {\n        Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n        });\n      }\n    }\n  }, {\n    key: \"fetchClassData\",\n    value: function fetchClassData() {\n      var date, start_date, end_date, messageData;\n      return _regeneratorRuntime.async(function fetchClassData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              date = new Date();\n              start_date = formatDate(date);\n              date.setDate(date.getDate() + 1);\n              end_date = formatDate(date);\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(_fetchClassData('message', this.props.class.class_id, start_date, end_date));\n\n            case 6:\n              messageData = _context.sent;\n              this.props.fetchClassMessageData(messageData.data);\n              this.setState({\n                isLoading: false\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"writeToAll\",\n    value: function writeToAll(text) {\n      var teacher_id = this.props.route.params.teacher_id;\n      this.setState({\n        to_all_message: text\n      });\n      this.props.writeToAll(text, teacher_id);\n    }\n  }, {\n    key: \"writeToOne\",\n    value: function writeToOne(text, student_id) {\n      var teacher_id = this.props.route.params.teacher_id;\n      this.props.writeToOne(text, student_id, teacher_id);\n    }\n  }, {\n    key: \"remindItemsToBringToOne\",\n    value: function remindItemsToBringToOne(student_id, selected_index) {\n      var teacher_id = this.props.route.params.teacher_id;\n      var message_by_student_id = this.props.message.message_by_student_id;\n\n      var things_to_bring = _toConsumableArray(message_by_student_id[student_id].things_to_bring);\n\n      var new_bool = things_to_bring[selected_index] ? 0 : 1;\n      things_to_bring.splice(selected_index, 1, new_bool);\n      this.props.remindItemsToBringToOne(student_id, things_to_bring, teacher_id);\n    }\n  }, {\n    key: \"remindItemsToBringToAll\",\n    value: function remindItemsToBringToAll(selected_index) {\n      var teacher_id = this.props.route.params.teacher_id;\n      var items_to_bring_bool = this.state.items_to_bring_bool;\n      var new_bool = items_to_bring_bool[selected_index] ? 0 : 1;\n      items_to_bring_bool.splice(selected_index, 1, new_bool);\n      this.setState({\n        items_to_bring_bool: items_to_bring_bool\n      });\n      this.props.remindItemsToBringToAll(items_to_bring_bool, teacher_id);\n    }\n  }, {\n    key: \"otherItemForAllEditorOnBlur\",\n    value: function otherItemForAllEditorOnBlur() {\n      var other_item = this.state.other_item;\n      this.setState({\n        editingOtherItemToBring: false,\n        other_item: other_item === '' ? '其它' : other_item\n      });\n    }\n  }, {\n    key: \"writeItemToBringToAll\",\n    value: function writeItemToBringToAll(item_to_bring) {\n      var teacher_id = this.props.route.params.teacher_id;\n      this.setState({\n        other_item: item_to_bring\n      });\n      this.props.writeItemToBringToAll(item_to_bring, teacher_id);\n    }\n  }, {\n    key: \"writeItemToBringToOne\",\n    value: function writeItemToBringToOne(student_id, item_to_bring) {\n      var teacher_id = this.props.route.params.teacher_id;\n      this.props.writeItemToBringToOne(student_id, item_to_bring, teacher_id);\n    }\n  }, {\n    key: \"editItemToBringToOneEditorOnBlur\",\n    value: function editItemToBringToOneEditorOnBlur(student_id, other_item) {\n      this.setState({\n        editingOtherItemForStudent: ''\n      });\n\n      if (other_item === '') {\n        this.props.writeItemToBringToOne(student_id, '其它');\n      }\n    }\n  }, {\n    key: \"recordActivitiesForOne\",\n    value: function recordActivitiesForOne(student_id, selected_index) {\n      var teacher_id = this.props.route.params.teacher_id;\n      var message_by_student_id = this.props.message.message_by_student_id;\n\n      var activities = _toConsumableArray(message_by_student_id[student_id].activities);\n\n      var new_bool = activities[selected_index] ? 0 : 1;\n      activities.splice(selected_index, 1, new_bool);\n      this.props.recordActivitiesForOne(student_id, activities, teacher_id);\n    }\n  }, {\n    key: \"recordActivitiesForAll\",\n    value: function recordActivitiesForAll(selected_index) {\n      var teacher_id = this.props.route.params.teacher_id;\n      var activities_bool = this.state.activities_bool;\n      var new_bool = activities_bool[selected_index] ? 0 : 1;\n      activities_bool.splice(selected_index, 1, new_bool);\n      this.setState({\n        activities_bool: activities_bool\n      });\n      this.props.recordActivitiesForAll(activities_bool, teacher_id);\n    }\n  }, {\n    key: \"writeActivityForAll\",\n    value: function writeActivityForAll(other_activity) {\n      var teacher_id = this.props.route.params.teacher_id;\n      this.setState({\n        other_activity: other_activity\n      });\n      this.props.writeActivityForAll(other_activity, teacher_id);\n    }\n  }, {\n    key: \"otherActivityEditorOnBlur\",\n    value: function otherActivityEditorOnBlur() {\n      var other_activity = this.state.other_activity;\n      this.setState({\n        editingOtherActivity: false,\n        other_activity: other_activity === '' ? '其它' : other_activity\n      });\n    }\n  }, {\n    key: \"writeActivityForOne\",\n    value: function writeActivityForOne(student_id, other_activity) {\n      var teacher_id = this.props.route.params.teacher_id;\n      this.props.writeActivityForOne(student_id, other_activity, teacher_id);\n    }\n  }, {\n    key: \"activityForOneEditorOnBlur\",\n    value: function activityForOneEditorOnBlur(student_id, other_activity) {\n      this.setState({\n        editingOtherActivityForOne: ''\n      });\n\n      if (other_activity === '') {\n        this.props.writeActivityForOne(student_id, '其它');\n      }\n    }\n  }, {\n    key: \"handleSend\",\n    value: function handleSend() {\n      var _this2 = this;\n\n      var message_by_student_id = this.props.message.message_by_student_id;\n      var isConnected = this.props.class.isConnected;\n\n      if (!isConnected) {\n        Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n        });\n        return;\n      }\n\n      var request_body = {\n        date: formatDate(new Date()),\n        data: this.normalize(message_by_student_id)\n      };\n      fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/message', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(request_body)\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        var statusCode = resJson.statusCode,\n            message = resJson.message,\n            data = resJson.data;\n\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Error' + message);\n          return;\n        }\n\n        _this2.props.sendMessageOnSuccess();\n\n        _this2.props.navigation.goBack();\n      }).catch(function (err) {\n        alert('Error' + err.message);\n      });\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize(data) {\n      var student_id_for_update = this.props.message.student_id_for_update;\n      var normalized_data = [];\n      student_id_for_update.forEach(function (student_id) {\n        normalized_data.push(_objectSpread(_objectSpread({}, data[student_id]), {}, {\n          student_id: student_id\n        }));\n      });\n      return normalized_data;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var student_id_for_update = this.props.message.student_id_for_update;\n\n      if (this.state.isLoading) {\n        return React.createElement(Reloading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 9\n          }\n        });\n      }\n\n      var students = this.props.class.students;\n      var message_by_student_id = this.props.message.message_by_student_id;\n      var _this$state = this.state,\n          items_to_bring = _this$state.items_to_bring,\n          items_to_bring_bool = _this$state.items_to_bring_bool,\n          activities_list = _this$state.activities_list,\n          activities_bool = _this$state.activities_bool,\n          editingOtherItemToBring = _this$state.editingOtherItemToBring,\n          editingOtherItemForStudent = _this$state.editingOtherItemForStudent,\n          editingOtherActivity = _this$state.editingOtherActivity,\n          editingOtherActivityForOne = _this$state.editingOtherActivityForOne;\n      var date = new Date();\n      return React.createElement(KeyboardAvoidingView, {\n        style: {\n          flex: 1\n        },\n        enabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          padding: 10,\n          flexDirection: 'row',\n          alignItems: 'center',\n          justifyContent: 'space-between'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 40\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }\n      }, date.getFullYear() + '.' + (date.getMonth() + 1) + '.' + date.getDate()), React.createElement(TouchableHighlight, {\n        style: {\n          backgroundColor: '#dcf3d0'\n        },\n        onPress: function onPress() {\n          return _this3.handleSend();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 40,\n          padding: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }\n      }, \"\\u9001\\u51FA\"))), React.createElement(ScrollView, {\n        contentContainerStyle: {\n          alignItems: 'center',\n          marginBottom: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          width: '95%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }\n      }, React.createElement(Card, {\n        style: {\n          padding: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 15\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          justifyContent: 'space-evenly',\n          paddingVertical: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          width: '29%',\n          backgroundColor: '#fff1b5',\n          borderRadius: 10,\n          marginRight: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 35,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }\n      }, \"\\u5BB6\\u9577\\u6E96\\u5099\"), React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row',\n          justifyContent: 'space-evenly',\n          flexWrap: 'wrap'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 21\n        }\n      }, items_to_bring.map(function (item, index) {\n        return React.createElement(TouchableHighlight, {\n          key: index,\n          style: {\n            backgroundColor: items_to_bring_bool[index] ? '#f4d41f' : '#fff7d6',\n            borderRadius: 3,\n            padding: 3,\n            margin: 5\n          },\n          onPress: function onPress() {\n            return _this3.remindItemsToBringToAll(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 27\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 29\n          }\n        }, item));\n      }), React.createElement(TouchableHighlight, {\n        style: {\n          backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6',\n          justifyContent: 'center',\n          borderRadius: 3,\n          padding: 3,\n          margin: 5\n        },\n        underlayColor: \"#f4d41f\",\n        onPress: function onPress() {\n          return _this3.remindItemsToBringToAll(4);\n        },\n        onLongPress: function onLongPress() {\n          return _this3.setState({\n            editingOtherItemToBring: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 23\n        }\n      }, editingOtherItemToBring ? React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 27\n        }\n      }, React.createElement(TextInput, {\n        autoFocus: true,\n        selectTextOnFocus: true,\n        value: this.state.other_item,\n        style: {\n          alignSelf: 'center',\n          fontSize: 20,\n          backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6'\n        },\n        onChangeText: function onChangeText(item_to_bring) {\n          return _this3.writeItemToBringToAll(item_to_bring);\n        },\n        onBlur: function onBlur() {\n          return _this3.otherItemForAllEditorOnBlur();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 29\n        }\n      })) : React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 29\n        }\n      }, this.state.other_item)))), React.createElement(View, {\n        style: {\n          width: '69%',\n          backgroundColor: '#b5e9e9',\n          borderRadius: 10,\n          marginLeft: 5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 35,\n          alignSelf: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 21\n        }\n      }, \"\\u4ECA\\u65E5\\u6D3B\\u52D5\"), React.createElement(View, {\n        style: {\n          flexDirection: 'row',\n          justifyContent: 'space-evenly',\n          flexWrap: 'wrap'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 21\n        }\n      }, activities_list.map(function (activity, index) {\n        return React.createElement(TouchableHighlight, {\n          key: index,\n          style: {\n            backgroundColor: activities_bool[index] ? '#368cbf' : '#eaf8f8',\n            borderRadius: 3,\n            padding: 3,\n            margin: 5\n          },\n          onPress: function onPress() {\n            return _this3.recordActivitiesForAll(index);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 27\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 29\n          }\n        }, activity));\n      }), React.createElement(TouchableHighlight, {\n        style: {\n          backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8',\n          justifyContent: 'center',\n          borderRadius: 3,\n          padding: 3,\n          margin: 5\n        },\n        underlayColor: \"#368cbf\",\n        onPress: function onPress() {\n          return _this3.recordActivitiesForAll(8);\n        },\n        onLongPress: function onLongPress() {\n          return _this3.setState({\n            editingOtherActivity: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 23\n        }\n      }, editingOtherActivity ? React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 27\n        }\n      }, React.createElement(TextInput, {\n        autoFocus: true,\n        selectTextOnFocus: true,\n        value: this.state.other_activity,\n        style: {\n          alignSelf: 'center',\n          fontSize: 20,\n          backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8'\n        },\n        onChangeText: function onChangeText(other_activity) {\n          return _this3.writeActivityForAll(other_activity);\n        },\n        onBlur: function onBlur() {\n          return _this3.otherActivityEditorOnBlur();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 29\n        }\n      })) : React.createElement(Text, {\n        style: {\n          alignSelf: 'center',\n          fontSize: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 29\n        }\n      }, this.state.other_activity))))), React.createElement(TextInput, {\n        value: this.state.to_all_message,\n        style: {\n          alignSelf: 'center',\n          width: '100%',\n          borderColor: 'gray',\n          borderWidth: 2,\n          borderRadius: 10,\n          fontSize: 25,\n          padding: 20\n        },\n        multiline: true,\n        maxLength: 100,\n        onChangeText: function onChangeText(to_all_message) {\n          return _this3.writeToAll(to_all_message);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 17\n        }\n      })))), Object.keys(students).map(function (student_id) {\n        var _message_by_student_i = message_by_student_id[student_id],\n            text = _message_by_student_i.text,\n            things_to_bring = _message_by_student_i.things_to_bring,\n            activities = _message_by_student_i.activities,\n            other_item = _message_by_student_i.other_item,\n            other_activity = _message_by_student_i.other_activity;\n        return React.createElement(View, {\n          key: student_id,\n          style: {\n            width: '95%'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }\n        }, React.createElement(Card, {\n          style: {\n            padding: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 17\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 1,\n            flexDirection: 'row'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 19\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 1,\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 21\n          }\n        }, React.createElement(Image, {\n          source: students[student_id].profile_picture === '' ? require(\"../../assets/icon-thumbnail.png\") : {\n            uri: students[student_id].profile_picture\n          },\n          style: {\n            width: 100,\n            height: 100,\n            borderRadius: 50\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 23\n          }\n        }), React.createElement(Text, {\n          style: {\n            fontSize: 25\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 23\n          }\n        }, students[student_id].name)), React.createElement(View, {\n          style: {\n            flex: 4\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 21\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 1,\n            flexDirection: 'row',\n            paddingBottom: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 23\n          }\n        }, React.createElement(View, {\n          style: {\n            width: '29%',\n            backgroundColor: '#fff1b5',\n            borderRadius: 10,\n            marginRight: 3\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 25\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 28,\n            alignSelf: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 27\n          }\n        }, \"\\u5BB6\\u9577\\u6E96\\u5099\"), React.createElement(View, {\n          style: {\n            flex: 1,\n            flexDirection: 'row',\n            justifyContent: 'space-evenly',\n            flexWrap: 'wrap'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 27\n          }\n        }, items_to_bring.map(function (item, index) {\n          return React.createElement(TouchableHighlight, {\n            key: index,\n            style: {\n              backgroundColor: things_to_bring[index] ? '#f4d41f' : '#fff7d6',\n              borderRadius: 3,\n              padding: 4,\n              margin: 5\n            },\n            onPress: function onPress() {\n              return _this3.remindItemsToBringToOne(student_id, index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 33\n            }\n          }, React.createElement(Text, {\n            style: {\n              fontSize: 20\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 35\n            }\n          }, item));\n        }), React.createElement(TouchableHighlight, {\n          style: {\n            backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n            justifyContent: 'center',\n            borderRadius: 3,\n            padding: 3,\n            margin: 5\n          },\n          underlayColor: \"#f4d41f\",\n          onPress: function onPress() {\n            return _this3.remindItemsToBringToOne(student_id, 4);\n          },\n          onLongPress: function onLongPress() {\n            return _this3.setState({\n              editingOtherItemForStudent: student_id\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 29\n          }\n        }, editingOtherItemForStudent === student_id ? React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 33\n          }\n        }, React.createElement(TextInput, {\n          autoFocus: true,\n          selectTextOnFocus: true,\n          value: other_item,\n          style: {\n            alignSelf: 'center',\n            fontSize: 20,\n            backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6'\n          },\n          onChangeText: function onChangeText(item_to_bring) {\n            return _this3.writeItemToBringToOne(student_id, item_to_bring);\n          },\n          onBlur: function onBlur() {\n            return _this3.editItemToBringToOneEditorOnBlur(student_id, other_item);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 35\n          }\n        })) : React.createElement(Text, {\n          style: {\n            alignSelf: 'center',\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 35\n          }\n        }, other_item)))), React.createElement(View, {\n          style: {\n            width: '70%',\n            borderRadius: 10,\n            marginLeft: 3,\n            backgroundColor: '#b5e9e9'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 25\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 1,\n            flexDirection: 'row'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 27\n          }\n        }, React.createElement(View, {\n          style: {\n            flex: 2\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 29\n          }\n        }, React.createElement(Text, {\n          style: {\n            fontSize: 28,\n            alignSelf: 'flex-end'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 31\n          }\n        }, \"\\u4ECA\\u65E5\\u6D3B\\u52D5\")), React.createElement(View, {\n          style: {\n            flex: 1,\n            justifyContent: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 29\n          }\n        }, student_id_for_update.has(student_id) ? React.createElement(Text, {\n          style: {\n            fontSize: 15,\n            alignSelf: 'flex-end',\n            paddingRight: 10,\n            color: 'red'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 33\n          }\n        }, \"\\u672A\\u9001\\u51FA\") : null)), React.createElement(View, {\n          style: {\n            flex: 1,\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            flexWrap: 'wrap'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 27\n          }\n        }, activities_list.map(function (activity, index) {\n          return React.createElement(TouchableHighlight, {\n            key: index,\n            style: {\n              backgroundColor: activities[index] ? '#368cbf' : '#d6f2f2',\n              borderRadius: 3,\n              padding: 4,\n              margin: 5\n            },\n            onPress: function onPress() {\n              return _this3.recordActivitiesForOne(student_id, index);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 33\n            }\n          }, React.createElement(Text, {\n            style: {\n              fontSize: 20\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 35\n            }\n          }, activity));\n        }), React.createElement(TouchableHighlight, {\n          style: {\n            backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n            justifyContent: 'center',\n            borderRadius: 3,\n            padding: 3,\n            margin: 5\n          },\n          underlayColor: \"#368cbf\",\n          onPress: function onPress() {\n            return _this3.recordActivitiesForOne(student_id, 8);\n          },\n          onLongPress: function onLongPress() {\n            return _this3.setState({\n              editingOtherActivityForOne: student_id\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 29\n          }\n        }, editingOtherActivityForOne === student_id ? React.createElement(View, {\n          style: {\n            flex: 1\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 33\n          }\n        }, React.createElement(TextInput, {\n          autoFocus: true,\n          selectTextOnFocus: true,\n          value: other_activity,\n          style: {\n            alignSelf: 'center',\n            fontSize: 20,\n            backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2'\n          },\n          onChangeText: function onChangeText(activity) {\n            return _this3.writeActivityForOne(student_id, activity);\n          },\n          onBlur: function onBlur() {\n            return _this3.activityForOneEditorOnBlur(student_id, other_activity);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 35\n          }\n        })) : React.createElement(Text, {\n          style: {\n            alignSelf: 'center',\n            fontSize: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 35\n          }\n        }, other_activity))))), React.createElement(TextInput, {\n          value: text,\n          style: {\n            borderColor: 'gray',\n            borderWidth: 2,\n            borderRadius: 10,\n            fontSize: 25,\n            padding: 20\n          },\n          multiline: true,\n          maxLength: 100,\n          onChangeText: function onChangeText(text) {\n            return _this3.writeToOne(text, student_id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 23\n          }\n        })))));\n      })));\n    }\n  }]);\n\n  return MessageForParents;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  cardContainer: {\n    width: 119,\n    height: '100%',\n    backgroundColor: 'transparent'\n  },\n  thumbnailImage: {\n    height: 80,\n    width: 80,\n    borderRadius: 40\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    class: state.classInfo,\n    message: state.message\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return _objectSpread({}, bindActionCreators({\n    writeToAll: writeToAll,\n    writeToOne: writeToOne,\n    remindItemsToBringToAll: remindItemsToBringToAll,\n    remindItemsToBringToOne: remindItemsToBringToOne,\n    recordActivitiesForAll: recordActivitiesForAll,\n    recordActivitiesForOne: recordActivitiesForOne,\n    writeItemToBringToAll: writeItemToBringToAll,\n    writeItemToBringToOne: writeItemToBringToOne,\n    writeActivityForAll: writeActivityForAll,\n    writeActivityForOne: writeActivityForOne,\n    fetchClassMessageData: fetchClassMessageData,\n    sendMessageOnSuccess: sendMessageOnSuccess\n  }, dispatch));\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MessageForParents);","map":{"version":3,"sources":["/home/caleb_lee/gina_web_app/components/teacher/messageforparents.js"],"names":["React","Card","Toast","connect","bindActionCreators","writeToAll","writeToOne","remindItemsToBringToAll","remindItemsToBringToOne","recordActivitiesForAll","recordActivitiesForOne","writeItemToBringToAll","writeItemToBringToOne","writeActivityForAll","writeActivityForOne","fetchClassMessageData","sendMessageOnSuccess","Reloading","formatDate","fetchClassData","MessageForParents","props","state","isLoading","to_all_message","items_to_bring","other_item","items_to_bring_bool","activities_list","other_activity","activities_bool","message_by_student_id","editingOtherItemToBring","editingOtherItemForStudent","editingOtherActivity","editingOtherActivityForOne","bind","student_id_for_update","message","isConnected","class","size","setState","show","text","buttonText","position","type","duration","date","Date","start_date","setDate","getDate","end_date","class_id","messageData","data","teacher_id","route","params","student_id","selected_index","things_to_bring","new_bool","splice","item_to_bring","activities","request_body","normalize","fetch","method","headers","Accept","body","JSON","stringify","then","res","json","resJson","statusCode","alert","navigation","goBack","catch","err","normalized_data","forEach","push","students","flex","padding","flexDirection","alignItems","justifyContent","fontSize","getFullYear","getMonth","backgroundColor","handleSend","marginBottom","width","paddingVertical","borderRadius","marginRight","alignSelf","flexWrap","map","item","index","margin","otherItemForAllEditorOnBlur","marginLeft","activity","otherActivityEditorOnBlur","borderColor","borderWidth","Object","keys","profile_picture","require","uri","height","name","paddingBottom","editItemToBringToOneEditorOnBlur","has","paddingRight","color","activityForOneEditorOnBlur","Component","styles","StyleSheet","create","cardContainer","thumbnailImage","mapStateToProps","classInfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableHighlight,\n  Image,\n  StyleSheet,\n  TextInput,\n  KeyboardAvoidingView,\n  Alert\n} from 'react-native'\nimport { Card, Toast } from 'native-base'\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport {\n  writeToAll,\n  writeToOne,\n  remindItemsToBringToAll,\n  remindItemsToBringToOne,\n  recordActivitiesForAll,\n  recordActivitiesForOne,\n  writeItemToBringToAll,\n  writeItemToBringToOne,\n  writeActivityForAll,\n  writeActivityForOne,\n  fetchClassMessageData,\n  sendMessageOnSuccess\n} from '../../redux/school/actions/index'\nimport Reloading from '../reloading'\nimport { formatDate, fetchClassData } from '../util'\n\nclass MessageForParents extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoading: true,\n      to_all_message: '',\n      items_to_bring: ['母奶粉', '尿布', '水壺', '衣物'],\n      other_item: '其它',\n      items_to_bring_bool: [0, 0, 0, 0, 0],\n      activities_list: ['嬰兒按摩', '音樂律動', '教具操作', '繪本欣賞', '認知圖片', '體能活動', '藝術創作', '多元語言'],\n      other_activity: '其它',\n      activities_bool: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n      message_by_student_id: {},\n      editingOtherItemToBring: false,\n      editingOtherItemForStudent: '',\n      editingOtherActivity: false,\n      editingOtherActivityForOne: ''\n    }\n    this.recordActivitiesForAll = this.recordActivitiesForAll.bind(this)\n  }\n\n  componentDidMount() {\n    const { student_id_for_update } = this.props.message\n    const { isConnected } = this.props.class\n    if (student_id_for_update.size > 0 || !isConnected) {\n      this.setState({\n        isLoading: false\n      })\n    } else {\n      this.fetchClassData()\n    }\n\n    if (!isConnected) {\n      Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n      })\n  }\n  }\n\n  async fetchClassData() {\n    const date = new Date()\n    const start_date = formatDate(date)\n    date.setDate(date.getDate() + 1)\n    const end_date = formatDate(date)\n    const messageData = await fetchClassData('message', this.props.class.class_id, start_date, end_date)\n    this.props.fetchClassMessageData(messageData.data)\n    this.setState({\n        isLoading: false\n    })\n  }\n\n  writeToAll(text) {\n    const { teacher_id } = this.props.route.params\n    this.setState({ to_all_message: text })\n    this.props.writeToAll(text, teacher_id)\n  }\n\n  writeToOne(text, student_id) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeToOne(text, student_id, teacher_id)\n  }\n\n  remindItemsToBringToOne(student_id, selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { message_by_student_id } = this.props.message\n    const things_to_bring = [...message_by_student_id[student_id].things_to_bring]\n    const new_bool = things_to_bring[selected_index] ? 0 : 1\n    things_to_bring.splice(selected_index, 1, new_bool)\n    this.props.remindItemsToBringToOne(student_id, things_to_bring, teacher_id)\n  }\n\n  remindItemsToBringToAll(selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { items_to_bring_bool } = this.state\n    const new_bool = items_to_bring_bool[selected_index] ? 0 : 1\n    items_to_bring_bool.splice(selected_index, 1, new_bool)\n    this.setState({\n      items_to_bring_bool\n    })\n    this.props.remindItemsToBringToAll(items_to_bring_bool, teacher_id)\n  }\n\n  otherItemForAllEditorOnBlur() {\n    const { other_item } = this.state\n    this.setState({\n      editingOtherItemToBring: false,\n      other_item: other_item === '' ? '其它' : other_item\n    })\n  }\n\n  writeItemToBringToAll(item_to_bring) {\n    const { teacher_id } = this.props.route.params\n    this.setState({\n      other_item: item_to_bring\n    })\n    this.props.writeItemToBringToAll(item_to_bring, teacher_id)\n  }\n\n  writeItemToBringToOne(student_id, item_to_bring) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeItemToBringToOne(student_id, item_to_bring, teacher_id)\n  }\n\n  editItemToBringToOneEditorOnBlur(student_id, other_item) {\n    this.setState({ editingOtherItemForStudent: '' })\n    if (other_item === '') {\n      this.props.writeItemToBringToOne(student_id, '其它')\n    }\n  }\n\n  recordActivitiesForOne(student_id, selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { message_by_student_id } = this.props.message\n    const activities = [...message_by_student_id[student_id].activities]\n    const new_bool = activities[selected_index] ? 0 : 1\n    activities.splice(selected_index, 1, new_bool)\n    this.props.recordActivitiesForOne(student_id, activities, teacher_id)\n  }\n\n  recordActivitiesForAll(selected_index) {\n    const { teacher_id } = this.props.route.params\n    const { activities_bool } = this.state\n    const new_bool = activities_bool[selected_index] ? 0 : 1\n    activities_bool.splice(selected_index, 1, new_bool)\n    this.setState({\n      activities_bool\n    })\n    this.props.recordActivitiesForAll(activities_bool, teacher_id)\n  }\n\n  writeActivityForAll(other_activity) {\n    const { teacher_id } = this.props.route.params\n    this.setState({\n      other_activity\n    })\n    this.props.writeActivityForAll(other_activity, teacher_id)\n  }\n\n  otherActivityEditorOnBlur() {\n    const { other_activity } = this.state\n    this.setState({\n      editingOtherActivity: false,\n      other_activity: other_activity === '' ? '其它' : other_activity\n    })\n  }\n\n  writeActivityForOne(student_id, other_activity) {\n    const { teacher_id } = this.props.route.params\n    this.props.writeActivityForOne(student_id, other_activity, teacher_id)\n  }\n  \n  activityForOneEditorOnBlur(student_id, other_activity) {\n    this.setState({ editingOtherActivityForOne: '' })\n    if (other_activity === '') {\n      this.props.writeActivityForOne(student_id, '其它')\n    }\n  }\n\n  handleSend() {\n    const { message_by_student_id } = this.props.message\n    const { isConnected } = this.props.class\n    if (!isConnected) {\n      Toast.show({\n          text: '拍謝 網路連不到! 等一下再試試看',\n          buttonText: 'Okay',\n          position: \"top\",\n          type: \"warning\",\n          duration: 2000\n      })\n      return\n    }\n\n    const request_body = {\n      date: formatDate(new Date()),\n      data: this.normalize(message_by_student_id)\n    }\n\n    fetch('https://iejnoswtqj.execute-api.us-east-1.amazonaws.com/dev/message', {\n      method: 'POST',\n      headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(request_body)\n    })\n      .then(res => res.json())\n      .then(resJson => {\n        const { statusCode, message, data } = resJson\n        if (statusCode > 200 || message === 'Internal server error') {\n          alert('Error' + message)\n          return\n        }\n        this.props.sendMessageOnSuccess()\n        this.props.navigation.goBack()\n      })\n      .catch(err => {\n        alert('Error' + err.message)\n      })\n  }\n\n  normalize(data) {\n    const { student_id_for_update } = this.props.message\n    var normalized_data = []\n    student_id_for_update.forEach(student_id => {\n      normalized_data.push({\n        ...data[student_id],\n        student_id,\n      })\n    })\n    return normalized_data\n  }\n\n  render() {\n    const { student_id_for_update } = this.props.message\n    if (this.state.isLoading) {\n      return (\n        <Reloading />\n      )\n    }\n    const { students } = this.props.class\n    const { message_by_student_id } = this.props.message\n    const {\n      items_to_bring,\n      items_to_bring_bool,\n      activities_list,\n      activities_bool,\n      editingOtherItemToBring,\n      editingOtherItemForStudent,\n      editingOtherActivity,\n      editingOtherActivityForOne\n    } = this.state\n    const date = new Date()\n    // console.log('message_by_student_id: ', message_by_student_id)\n    return (\n      <KeyboardAvoidingView\n        style={{\n          flex: 1\n        }}\n        // behavior='padding'\n        // keyboardVerticalOffset={100}\n        enabled\n      >       \n        <View\n          style={{\n            padding: 10,\n            flexDirection: 'row',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n          }}\n        >\n          <Text style={{ fontSize: 40 }}>{date.getFullYear() + '.' + (date.getMonth()+1) + '.' + date.getDate()}</Text>\n          <TouchableHighlight\n            style={{ backgroundColor: '#dcf3d0' }}\n            onPress={() => this.handleSend()}\n          >\n            <Text style={{ fontSize: 40, padding: 5 }}>送出</Text>\n          </TouchableHighlight>\n        </View> \n        <ScrollView\n          contentContainerStyle={{ alignItems: 'center', marginBottom: 20 }}\n        >\n          <View style={{ width: '95%' }}>\n            <Card style={{padding: 10}}>\n              <View style={{ flex: 1 }}>\n                <View style={{ flex: 1, flexDirection: 'row', justifyContent: 'space-evenly', paddingVertical: 10 }}>\n                  <View style={{\n                    width: '29%',\n                    backgroundColor: '#fff1b5',\n                    borderRadius: 10,\n                    marginRight: 5\n                  }}>\n                    <Text style={{ fontSize: 35, alignSelf: 'center' }}>家長準備</Text>\n                    <View\n                      style={{\n                        flex: 1,\n                        flexDirection: 'row',\n                        justifyContent: 'space-evenly',\n                        flexWrap: 'wrap'\n                      }}\n                    >\n                      {items_to_bring.map((item, index) => {\n                        return (\n                          <TouchableHighlight\n                            key={index}\n                            style={{\n                              backgroundColor: items_to_bring_bool[index] ? '#f4d41f' : '#fff7d6',\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                            }}\n                            onPress={() => this.remindItemsToBringToAll(index)}\n                          >\n                            <Text style={{fontSize: 20}}>{item}</Text>\n                          </TouchableHighlight>\n                        )\n                      })}\n                      <TouchableHighlight\n                            style={{\n                                backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6',\n                                justifyContent: 'center',\n                                borderRadius: 3,\n                                padding: 3,\n                                margin: 5\n                            }}\n                            underlayColor='#f4d41f'\n                            onPress={() => this.remindItemsToBringToAll(4)}\n                            onLongPress={() => this.setState({ editingOtherItemToBring: true })}\n                      >\n                        {editingOtherItemToBring ?\n                          <View style={{ flex: 1 }}>\n                            \n                            <TextInput\n                              autoFocus={true}\n                              selectTextOnFocus={true}\n                              value={this.state.other_item}\n                              style={{\n                                alignSelf: 'center',\n                                fontSize: 20,\n                                backgroundColor: items_to_bring_bool[4] ? '#f4d41f' : '#fff7d6'\n                              }}\n                              onChangeText={item_to_bring => this.writeItemToBringToAll(item_to_bring)}\n                              onBlur={() => this.otherItemForAllEditorOnBlur()}\n                            />\n\n                          </View>\n                          : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{this.state.other_item}</Text>\n                        }\n                      </TouchableHighlight>\n                    </View>\n                  </View>\n                  <View\n                    style={{\n                      width: '69%',\n                      backgroundColor: '#b5e9e9',\n                      borderRadius: 10,\n                      marginLeft: 5\n                    }}\n                  >\n                    <Text style={{ fontSize: 35, alignSelf: 'center' }}>今日活動</Text>\n                    <View style={{\n                      flexDirection: 'row',\n                      justifyContent: 'space-evenly',\n                      flexWrap: 'wrap'\n                    }}>\n                      {activities_list.map((activity, index) => {\n                        return (\n                          <TouchableHighlight\n                            key={index}\n                            style={{\n                              backgroundColor: activities_bool[index] ? '#368cbf' : '#eaf8f8',\n                              // borderColor: '#d6f2f2',\n                              // borderWidth: 2,\n                              borderRadius: 3,\n                              padding: 3,\n                              margin: 5\n                              // width: '13%'\n                            }}\n                            onPress={() => this.recordActivitiesForAll(index)}\n                          >\n                            <Text style={{fontSize: 20}}>{activity}</Text>\n                          </TouchableHighlight>\n                        )\n                      })}\n\n                      <TouchableHighlight\n                            style={{\n                                backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8',\n                                justifyContent: 'center',\n                                borderRadius: 3,\n                                padding: 3,\n                                margin: 5\n                            }}\n                            underlayColor='#368cbf'\n                            onPress={() => this.recordActivitiesForAll(8)}\n                            onLongPress={() => this.setState({ editingOtherActivity: true })}\n                      >\n                        {editingOtherActivity ?\n                          <View style={{ flex: 1 }}>\n                            \n                            <TextInput\n                              autoFocus={true}\n                              selectTextOnFocus={true}\n                              value={this.state.other_activity}\n                              style={{\n                                alignSelf: 'center',\n                                fontSize: 20,\n                                backgroundColor: activities_bool[8] ? '#368cbf' : '#eaf8f8'\n                              }}\n                              onChangeText={other_activity => this.writeActivityForAll(other_activity)}\n                              onBlur={() => this.otherActivityEditorOnBlur()}\n                            />\n\n                          </View>\n                          : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{this.state.other_activity}</Text>\n                        }\n                      </TouchableHighlight>\n                    </View>\n                  </View>\n                </View>\n                <TextInput\n                  value={this.state.to_all_message}\n                  style={{\n                    alignSelf: 'center',\n                    width: '100%',\n                    borderColor: 'gray',\n                    borderWidth: 2,\n                    borderRadius: 10,\n                    fontSize: 25,\n                    padding: 20\n                  }}\n                  multiline={true}\n                  maxLength={100}\n                  onChangeText={to_all_message => this.writeToAll(to_all_message)}\n                />\n              </View>\n            </Card>\n          </View>\n          {Object.keys(students).map(student_id => {\n            const {text, things_to_bring, activities, other_item, other_activity} = message_by_student_id[student_id]\n            return (\n              <View key={student_id} style={{ width: '95%' }}>\n                <Card style={{ padding: 10 }}>\n                  <View style={{ flex: 1, flexDirection: 'row'}}>\n                    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n                      <Image\n                        source={\n                          students[student_id].profile_picture === '' ?\n                            require('../../assets/icon-thumbnail.png')\n                            : {uri: students[student_id].profile_picture}\n                        }\n                        style={{ width: 100, height: 100, borderRadius: 50 }}\n                      />\n                      <Text style={{ fontSize: 25 }}>{students[student_id].name}</Text>\n                    </View>\n                    <View style={{ flex: 4 }}>\n                      <View style={{ flex: 1, flexDirection: 'row', paddingBottom: 10 }}>\n                        <View\n                          style={{\n                            width: '29%',\n                            backgroundColor: '#fff1b5',\n                            borderRadius: 10,\n                            marginRight: 3\n                          }}\n                        >\n                          <Text style={{ fontSize: 28, alignSelf: 'center' }}>家長準備</Text>\n                          <View\n                              style={{\n                              flex: 1,\n                              flexDirection: 'row',\n                              justifyContent: 'space-evenly',\n                              flexWrap: 'wrap',\n                            }}\n                          >\n                            {items_to_bring.map((item, index) => {\n                              return (\n                                <TouchableHighlight\n                                  key={index}\n                                  style={{\n                                    backgroundColor: things_to_bring[index] ? '#f4d41f' : '#fff7d6',\n                                    borderRadius: 3,\n                                    padding: 4,\n                                    margin: 5\n                                  }}\n                                  onPress={() => this.remindItemsToBringToOne(student_id, index)}\n                                >\n                                  <Text style={{fontSize: 20}}>{item}</Text>\n                                </TouchableHighlight>\n                              )\n                            })}\n\n                            <TouchableHighlight\n                                  style={{\n                                      backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                      justifyContent: 'center',\n                                      borderRadius: 3,\n                                      padding: 3,\n                                      margin: 5\n                                  }}\n                                  underlayColor='#f4d41f'\n                                  onPress={() => this.remindItemsToBringToOne(student_id, 4)}\n                                  onLongPress={() => this.setState({ editingOtherItemForStudent: student_id })}\n                            >\n                              {editingOtherItemForStudent === student_id ?\n                                <View style={{ flex: 1 }}>\n                                  \n                                  <TextInput\n                                    autoFocus={true}\n                                    selectTextOnFocus={true}\n                                    value={other_item}\n                                    style={{\n                                      alignSelf: 'center',\n                                      fontSize: 20,\n                                      backgroundColor: things_to_bring[4] ? '#f4d41f' : '#fff7d6',\n                                    }}\n                                    onChangeText={item_to_bring => this.writeItemToBringToOne(student_id, item_to_bring)}\n                                    onBlur={() => this.editItemToBringToOneEditorOnBlur(student_id, other_item)}\n                                  />\n\n                                </View>\n                                : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_item}</Text>\n                              }\n                            </TouchableHighlight>\n                          </View>\n                        </View>\n                        <View style={{\n                          width: '70%',\n                          borderRadius: 10,\n                          marginLeft: 3,\n                          backgroundColor: '#b5e9e9'\n                        }}>\n                          <View style={{ flex:1, flexDirection: 'row' }}>\n                            <View style={{ flex: 2 }}>\n                              <Text style={{ fontSize: 28, alignSelf: 'flex-end' }}>今日活動</Text>\n                            </View>\n                            <View style={{ flex: 1, justifyContent: 'center' }}>\n                              {student_id_for_update.has(student_id) ? \n                                <Text \n                                  style={{ fontSize: 15, alignSelf: 'flex-end', paddingRight: 10, color: 'red' }}\n                                >\n                                    未送出\n                                </Text>\n                                : null}\n                            </View>\n                          </View>\n                          <View style={{\n                            flex: 1,\n                            flexDirection: 'row',\n                            justifyContent: 'space-between',\n                            flexWrap: 'wrap'\n                          }}>\n                            {activities_list.map((activity, index) => {\n                              return (\n                                <TouchableHighlight\n                                  key={index}\n                                  style={{\n                                    backgroundColor: activities[index] ? '#368cbf' : '#d6f2f2',\n                                    borderRadius: 3,\n                                    padding: 4,\n                                    margin: 5\n                                  }}\n                                  onPress={() => this.recordActivitiesForOne(student_id, index)}\n                                >\n                                  <Text style={{fontSize: 20}}>{activity}</Text>\n                                </TouchableHighlight>\n                              )\n                            })}\n\n                            <TouchableHighlight\n                                  style={{\n                                      backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                      justifyContent: 'center',\n                                      borderRadius: 3,\n                                      padding: 3,\n                                      margin: 5\n                                  }}\n                                  underlayColor='#368cbf'\n                                  onPress={() => this.recordActivitiesForOne(student_id, 8)}\n                                  onLongPress={() => this.setState({ editingOtherActivityForOne: student_id })}\n                            >\n                              {editingOtherActivityForOne === student_id ?\n                                <View style={{ flex: 1 }}>\n                                  \n                                  <TextInput\n                                    autoFocus={true}\n                                    selectTextOnFocus={true}\n                                    value={other_activity}\n                                    style={{\n                                      alignSelf: 'center',\n                                      fontSize: 20,\n                                      backgroundColor: activities[8] ? '#368cbf' : '#d6f2f2',\n                                    }}\n                                    onChangeText={activity => this.writeActivityForOne(student_id, activity)}\n                                    onBlur={() => this.activityForOneEditorOnBlur(student_id, other_activity)}\n                                  />\n\n                                </View>\n                                : <Text style={{ alignSelf: 'center', fontSize: 20 }}>{other_activity}</Text>\n                              }\n                            </TouchableHighlight>\n                          </View>\n                        </View>\n                      </View>\n                      <TextInput\n                        value={text}\n                        style={{ borderColor: 'gray', borderWidth: 2, borderRadius: 10, fontSize: 25, padding: 20 }}\n                        multiline={true}\n                        maxLength={100}\n                        onChangeText={text => this.writeToOne(text, student_id)}\n                      />\n                    </View>\n                  </View>\n                </Card>\n              </View>\n            )\n          })}\n        </ScrollView>\n      </KeyboardAvoidingView>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  cardContainer: {\n      width: 119,\n      height: '100%',\n      backgroundColor: 'transparent'\n  },\n  thumbnailImage: {\n      height: 80,\n      width: 80,\n      borderRadius: 40\n  }\n})\n\n\nconst mapStateToProps = state => {\n  return {\n    class: state.classInfo,\n    message: state.message\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    ...bindActionCreators({\n      writeToAll,\n      writeToOne,\n      remindItemsToBringToAll,\n      remindItemsToBringToOne,\n      recordActivitiesForAll,\n      recordActivitiesForOne,\n      writeItemToBringToAll,\n      writeItemToBringToOne,\n      writeActivityForAll,\n      writeActivityForOne,\n      fetchClassMessageData,\n      sendMessageOnSuccess\n    }, dispatch)\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps) (MessageForParents)"]},"metadata":{},"sourceType":"module"}